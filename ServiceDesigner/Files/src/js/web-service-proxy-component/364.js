(self.webpackChunkapp_studio_enterprise_web_service=self.webpackChunkapp_studio_enterprise_web_service||[]).push([[364],{34645:(k,Ce,b)=>{var x={"./basketball.json":[99523,523],"./cat.json":[7780,780],"./dashboard.json":[44340,340],"./email.json":[2160,160],"./landingPage.json":[2888,888],"./loader.json":[33475,475],"./raccoon.json":[59425,425],"./search.json":[9780,399]};function F(i){if(!b.o(x,i))return Promise.resolve().then(()=>{var v=new Error("Cannot find module '"+i+"'");throw v.code="MODULE_NOT_FOUND",v});var M=x[i],B=M[0];return b.e(M[1]).then(()=>b.t(B,19))}F.keys=()=>Object.keys(x),F.id=34645,k.exports=F},44331:(k,Ce,b)=>{var x={"./autonumber-icon.svg":46844,"./binary-icon.svg":96323,"./boolean-icon.svg":86174,"./color-icon.svg":70313,"./date-icon.svg":5254,"./date-time-icon.svg":88552,"./email-text-icon.svg":26538,"./float-icon.svg":87232,"./function-icon.svg":31242,"./guid-icon.svg":62907,"./image-icon.svg":91627,"./image-link-icon.svg":39378,"./integer-icon.svg":17984,"./lookup-icon.svg":78764,"./phone-text-icon.svg":21782,"./rich-text-icon.svg":44344,"./small-close-icon.svg":96832,"./string-icon.svg":43319,"./time-icon.svg":98535,"./web-text-icon.svg":73672};function F(M){var B=i(M);return b(B)}function i(M){if(!b.o(x,M)){var B=new Error("Cannot find module '"+M+"'");throw B.code="MODULE_NOT_FOUND",B}return x[M]}F.keys=function(){return Object.keys(x)},F.resolve=i,k.exports=F,F.id=44331},12014:(k,Ce,b)=>{var x={"./default-file-icon.svg":27107,"./file-excel.svg":76185,"./file-image.svg":87831,"./file-pdf.svg":96682,"./file-powerpoint.svg":30351,"./file-word.svg":23472};function F(M){var B=i(M);return b(B)}function i(M){if(!b.o(x,M)){var B=new Error("Cannot find module '"+M+"'");throw B.code="MODULE_NOT_FOUND",B}return x[M]}F.keys=function(){return Object.keys(x)},F.resolve=i,k.exports=F,F.id=12014},10722:(k,Ce,b)=>{var x={"./default-file-icon.svg":8035,"./file-excel.svg":25689,"./file-image.svg":21431,"./file-pdf.svg":94570,"./file-powerpoint.svg":17935,"./file-word.svg":94896,"./large/default-file-icon.svg":27107,"./large/file-excel.svg":76185,"./large/file-image.svg":87831,"./large/file-pdf.svg":96682,"./large/file-powerpoint.svg":30351,"./large/file-word.svg":23472};function F(M){var B=i(M);return b(B)}function i(M){if(!b.o(x,M)){var B=new Error("Cannot find module '"+M+"'");throw B.code="MODULE_NOT_FOUND",B}return x[M]}F.keys=function(){return Object.keys(x)},F.resolve=i,k.exports=F,F.id=10722},95320:(k,Ce,b)=>{var x={"./flex-column-icon.svg":34291,"./flex-row-icon.svg":84531};function F(M){var B=i(M);return b(B)}function i(M){if(!b.o(x,M)){var B=new Error("Cannot find module '"+M+"'");throw B.code="MODULE_NOT_FOUND",B}return x[M]}F.keys=function(){return Object.keys(x)},F.resolve=i,k.exports=F,F.id=95320},33996:(k,Ce,b)=>{var x={"./grid-area-1-icon.svg":35723,"./grid-column-1-icon.svg":27320,"./grid-column-2-icon.svg":48305,"./grid-column-3-icon.svg":6206,"./grid-column-4-icon.svg":50103};function F(M){var B=i(M);return b(B)}function i(M){if(!b.o(x,M)){var B=new Error("Cannot find module '"+M+"'");throw B.code="MODULE_NOT_FOUND",B}return x[M]}F.keys=function(){return Object.keys(x)},F.resolve=i,k.exports=F,F.id=33996},20522:(k,Ce,b)=>{var x={"./datetime-picker-calendar-icon.svg":42926};function F(M){var B=i(M);return b(B)}function i(M){if(!b.o(x,M)){var B=new Error("Cannot find module '"+M+"'");throw B.code="MODULE_NOT_FOUND",B}return x[M]}F.keys=function(){return Object.keys(x)},F.resolve=i,k.exports=F,F.id=20522},48104:(k,Ce,b)=>{var x={"./datetime-picker-toggle-date-icon.svg":67347,"./datetime-picker-toggle-time-icon.svg":63202};function F(M){var B=i(M);return b(B)}function i(M){if(!b.o(x,M)){var B=new Error("Cannot find module '"+M+"'");throw B.code="MODULE_NOT_FOUND",B}return x[M]}F.keys=function(){return Object.keys(x)},F.resolve=i,k.exports=F,F.id=48104},48422:(k,Ce,b)=>{var x={"./error-icon.svg":77017,"./warning-icon.svg":64207};function F(M){var B=i(M);return b(B)}function i(M){if(!b.o(x,M)){var B=new Error("Cannot find module '"+M+"'");throw B.code="MODULE_NOT_FOUND",B}return x[M]}F.keys=function(){return Object.keys(x)},F.resolve=i,k.exports=F,F.id=48422},82084:(k,Ce,b)=>{var x={"./collapse.svg":14186};function F(M){var B=i(M);return b(B)}function i(M){if(!b.o(x,M)){var B=new Error("Cannot find module '"+M+"'");throw B.code="MODULE_NOT_FOUND",B}return x[M]}F.keys=function(){return Object.keys(x)},F.resolve=i,k.exports=F,F.id=82084},65687:(k,Ce,b)=>{"use strict";var x=b(49147),F=b(24677),i=b(99314),M=b(51021),B=b(43558),v=b(86731),W=b(32028),I=b(97270),R=b(76696),c=b(44537),_=b(84235),A=b(73308),re=b(37497),h=b(96091);class xe{constructor(e){this._httpClient=e,this._serviceEndpoint="rest/ApiKeyProvider/"}getOrCreateApiKey(e,t){const n=this._serviceEndpoint+"GetOrCreateWebhookApiKey";return this._httpClient.post(n,{integrationName:e,webhookSource:t})}static{this.\u0275fac=function(t){return new(t||xe)(i.\u0275\u0275inject(F.HttpClient))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:xe,factory:xe.\u0275fac,providedIn:"root"})}}var E=b(93527),P=b(37236),ie=b(37782),Y=b(93422);let Se=class dh extends _.SNu{constructor(e,t){super(),this.httpClient=e,this._sysSettingsInfo=new Map,this._sysSettingsValuesCache=new Map,this._sysSettingsChanged$=new h.Subject,this.sysSettingsChanged$=this._sysSettingsChanged$.asObservable(),this._serviceGetSysSettingsEndpoint=`${t}/QuerySysSettings`,this._serviceSaveSysSettingsEndpoint=`${t}/PostSysSettingsValues`,this._servicePreloadSysSettingsEndpoint=`${t}/PreloadSysSettings`}_removeNotActualSettingsValues(e){e.forEach(([t,n])=>{this._getIsSysSettingCached(t)&&this._getCacheableSysSetting(t).dataValueType===c.DataValueType.Lookup&&this._sysSettingsValuesCache.delete(t)})}_getSysSettingsRequestAfterUpdate(e){const t=e.filter(n=>!this._sysSettingsInfo.has(n[0]));return 0===t.length?(0,h.of)(null):this.getByCodes(t.map(n=>n[0]))}_updateCache(e,t){const n=Object.entries(e??{}).filter(a=>t.saveResult[a[0]]);return n.filter(([a,r])=>this._sysSettingsInfo.has(a)).filter(([a,r])=>this._getIsSysSettingCacheable(a)).forEach(([a,r])=>{this._sysSettingsValuesCache.set(a,{value:r})}),this._getSysSettingsRequestAfterUpdate(n).pipe((0,E.T)(()=>t),(0,P.M)(()=>{this._removeNotActualSettingsValues(n)}),(0,P.M)(()=>{if(n.length>0){const a=n.map(r=>r[0]);this._sysSettingsChanged$.next(a)}}))}_getIsSysSettingCacheable(e){return this._sysSettingsInfo.get(e)?.isCacheable??!1}_getIsSysSettingCached(e){return this._getIsSysSettingCacheable(e)&&this._sysSettingsValuesCache.has(e)}_getCacheableSysSetting(e){const t=this._sysSettingsInfo.get(e);if(t&&t.isCacheable){const n=this._sysSettingsValuesCache.get(e);return{code:t.code,dataValueType:t.dataValueType,id:t.id,isCacheable:t.isCacheable,name:t.name,value:n.value,displayValue:n.displayValue}}return null}_setSysSettingInfo(e){this._sysSettingsInfo.set(e.code,{code:e.code,dataValueType:e.dataValueType,id:e.id,isCacheable:e.isCacheable,name:e.name})}_setSysSettingDetails(e){this._setSysSettingInfo(e),e?.isCacheable&&this._sysSettingsValuesCache.set(e.code,{displayValue:e.displayValue,value:e.value})}_requestSysSettings(e){return this.httpClient.post(this._serviceGetSysSettingsEndpoint,{sysSettingsNameCollection:e}).pipe((0,ie.u)(),(0,P.M)(t=>{e.forEach(n=>{const a=t.values[n];a&&this._setSysSettingDetails(a)})}))}_getResponseWithCachedSysSettings(e,t){return t.filter(a=>this._getIsSysSettingCached(a)).map(a=>this._getCacheableSysSetting(a)).forEach(a=>{e.values[a.code]=a}),e}_createEmptySysSettingDetailByCode(e){return{code:e,value:null,isCacheable:!0}}_updateNotFoundSettingDetails(e){return e.notFoundSettings?.forEach(t=>{const n=this._createEmptySysSettingDetailByCode(t);this._setSysSettingDetails(n),e.values[t]=n}),e}getByCodes(e){if(!e||0===e.length)return(0,h.of)({success:!0,values:{}});const t=e.filter(n=>!this._getIsSysSettingCached(n));return 0===t.length?(0,h.of)(this._getResponseWithCachedSysSettings({success:!0,values:{}},e)):this._requestSysSettings(t).pipe((0,E.T)(n=>this._getResponseWithCachedSysSettings(n,e)),(0,E.T)(n=>this._updateNotFoundSettingDetails(n)))}getByCode(e){return this.getByCodes([e]).pipe((0,E.T)(t=>t.values[e]))}getValueByCode(e,t){return this.getByCode(e).pipe((0,E.T)(n=>{const a=n?.value;return null!=a&&""!==a||void 0===t?a:t}),(0,h.catchError)(()=>(0,h.of)(t)))}updateMany(e,t=!1){const n={};return e.forEach(a=>n[a.code]=a.value),this.httpClient.post(this._serviceSaveSysSettingsEndpoint,{sysSettingsValues:n,isPersonal:t}).pipe((0,Y.Z)(a=>this._updateCache(n,a)),(0,ie.u)())}update(e,t=!1){return this.updateMany([e],t)}preload(){const e=(new F.HttpHeaders).set("Content-Type","application/json; charset=utf-8");return this.httpClient.post(this._servicePreloadSysSettingsEndpoint,{},{headers:e}).pipe((0,P.M)(t=>{Object.values(t.values).forEach(n=>{n.isCacheable=!0,this._setSysSettingDetails(n)})}),(0,E.T)(()=>!0),(0,h.catchError)(t=>(console.error(t),(0,h.of)(!1))))}static{this.\u0275fac=function(t){return new(t||dh)(i.\u0275\u0275inject(F.HttpClient),i.\u0275\u0275inject(_.otV))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:dh,factory:dh.\u0275fac,providedIn:"root"})}};Se=(0,I.Cg)([(0,W.op)({requestType:"crt.SysSettingsService"}),(0,I.Sn)("design:paramtypes",[F.HttpClient,String])],Se);let ne=class extends c.BaseRequestHandler{constructor(e,t,n,a,r){super(),this._copyClipboardService=e,this._notifyService=t,this._apiKeyService=n,this._maskService=a,this._sysSettingsService=r}_handleError(e){this._notifyService.show({message:e.Message,closeMode:"manual"})}_handleSuccess(e,t){e.isInternalIntegration?this._setResultValue(e,t):this._sysSettingsService.getByCode("WebhookURL").pipe((0,h.take)(1)).subscribe(n=>{const a=void 0===n?t:`${n.value}${t}`;this._setResultValue(e,a)})}_setResultValue(e,t){e.$context[e.resultShowAttributeName]=!0,e.$context[e.resultValueAttributeName]=t,this._copyClipboardService.copyTextToBuffer(t).then()}handle(e){var t=this;return(0,A.A)(function*(){if(!0===t._syncObject)return void(yield t.next?.handle(e));t._syncObject=!0;const n="GET_API_KEY";t._maskService.showMask(n,e.$context);const a=yield(0,h.firstValueFrom)(t._apiKeyService.getOrCreateApiKey(e.integrationName,e.webhookSource));t._syncObject=!1,t._maskService.hideMask(n,e.$context),a.success?t._handleSuccess(e,a.apiKey):t._handleError(a.responseStatus),yield t.next?.handle(e)})()}};ne=(0,I.Cg)([(0,c.CrtRequestHandler)({type:"crt.GetApiKeyRequestHandler",requestType:"crt.GetApiKeyRequest"}),(0,I.Qj)(3,(0,c.CrtInject)(_.VMq)),(0,I.Sn)("design:paramtypes",[re.wq,re.FL,xe,c.MaskService,Se])],ne);const je="FolderTreeRelatedElementConfigsNotifier";var de,o,K,X,ue=b(34526),me=b(65719),z=b(72831),tt=b(68887),se=b(38503),Ne=b(38486);class Ae{static{this.\u0275fac=function(t){return new(t||Ae)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Ae,factory:Ae.\u0275fac})}}(o=de||(de={}))[o.General=0]="General",o[o.Limited=1]="Limited",function(o){o[o.Undefined=0]="Undefined",o[o.Filter=1]="Filter",o[o.FilterSummary=2]="FilterSummary"}(K||(K={})),function(o){o[o.Session=0]="Session",o[o.Workspace=1]="Workspace",o[o.Application=2]="Application"}(X||(X={}));class ge{constructor(e=X.Session,t="",n=""){this._cacheLevel=e,this._cacheGroup=t,this._cacheItemName=n}getMetadata(){return{cacheLevel:this._cacheLevel,cacheGroup:this._cacheGroup,cacheItemName:this._cacheItemName}}}class Oe extends Error{constructor(e){super(`Query with config\n${JSON.stringify(e.getMetadata())}\nfinished with error.`)}}class at extends Error{constructor(e){super(e?.error?.responseStatus?.Message||e?.responseStatus?.Message||e?.message),this.errorCode=e?.error?.responseStatus?.ErrorCode}}let st=class extends Ae{constructor(e,t,n){super(),this._sysSettingsService=e,this._httpClient=t,this._dataServiceUri=n,this._defaultDebounceTime=200,this._debounceTimeSysSettingName="QueryExecutorDebounceTime",this._requests=new h.Subject,c.ValidationUtilities.checkArgumentEmpty("_httpClient",t),c.ValidationUtilities.checkArgumentEmpty("_dataServiceUri",n)}_executeWritableQuery(e,t){const a={...e.getMetadata(),queryKind:de.General};return this._httpClient.post(t,a).pipe((0,ue.W)(r=>{throw new at(r)}),(0,P.M)(r=>{if(!r||!r.success)throw new Oe(e)}))}_getQueryUri(e){if(e instanceof c.SelectLocalizationQuery)return`${this._dataServiceUri}/SelectLocalizationQuery`;if(e instanceof c.EntitySchemaQuery)return`${this._dataServiceUri}/SelectQuery`;if(e instanceof c.InsertQuery)return`${this._dataServiceUri}/InsertQuery`;if(e instanceof c.UpdateQuery)return`${this._dataServiceUri}/UpdateQuery`;if(e instanceof c.DeleteQuery)return`${this._dataServiceUri}/DeleteQuery`;throw new Error("Unsupported query type")}_getBundleSettings(){var e=this;return(0,A.A)(function*(){return e._sysSettingsService?{executionDebounceTime:(yield e._sysSettingsService.getByCodes([e._debounceTimeSysSettingName])).values[e._debounceTimeSysSettingName]?.value||e._defaultDebounceTime}:Promise.resolve({executionDebounceTime:e._defaultDebounceTime})})()}_prepareDebouncedResponsesStream(){if(this._responses)return;let e=0;const t=(0,me.r)(this._requests.pipe((0,z.n)(()=>(0,h.from)(this._getBundleSettings())),(0,P.M)(n=>e=n.executionDebounceTime),(0,tt.B)(e)));this._responses=this._requests.pipe(t,(0,se.p)(n=>!!n.length),(0,Y.Z)(n=>{const a=n.map(u=>u.id),r=n.map(u=>u.query);return this.executeBatchSelectQuery(r).pipe((0,E.T)(u=>a.reduce((p,f,S)=>p.set(f,u[S]),new Map)))}),(0,ie.u)())}_executeThrottled(e){this._prepareDebouncedResponsesStream();const t={id:(0,c.generateGuid)(),query:e},n=this._responses.pipe((0,se.p)(a=>a.has(t.id)),(0,E.T)(a=>a.get(t.id)),(0,Ne.s)(1));return n.subscribe(),this._requests.next(t),n}_executeImmediate(e){c.ValidationUtilities.checkArgumentEmpty("query",e);const t=this._getQueryUri(e),n=this._getQueryRequest(e);return this._httpClient.post(t,n).pipe((0,ue.W)(a=>{throw new at(a)}),(0,P.M)(a=>{if(!a?.rows)throw new Oe(e)}),(0,E.T)(a=>this._toSelectQueryResponse(a)))}_toSelectQueryResponse(e){const t=this.getRowsFromResponse(e);return t.rowsAffected=e.rowsAffected,e.errorInfo&&(t.errorInfo=e.errorInfo),t}_getQueryRequest(e){const t=e.getMetadata();return e instanceof c.EntitySchemaQuery?{...t,queryKind:de.General,serverESQCacheParameters:(new ge).getMetadata(),queryOptimize:!1,useMetrics:!1,querySource:K.Undefined}:{...t,queryKind:de.General}}getRowsFromResponse(e){return e.rows}executeSelectQuery(e,t={throttled:!1}){return t.throttled?this._executeThrottled(e):this._executeImmediate(e)}executeInsertQuery(e){return this.execute(e)}executeUpdateQuery(e){return this.execute(e)}executeDeleteQuery(e){return this.execute(e)}execute(e){c.ValidationUtilities.checkArgumentEmpty("query",e);const t=this._getQueryUri(e);return this._executeWritableQuery(e,t)}executeBatchSelectQuery(e){if(c.ValidationUtilities.checkArgumentEmpty("queries",e),0===e.length)return(0,h.of)([]);const t=`${this._dataServiceUri}/BatchQuery`,n={items:[]};return n.items=e.map(a=>({...this._getQueryRequest(a),__type:"Terrasoft.Nui.ServiceModel.DataContract.SelectQuery"})),this._httpClient.post(t,n).pipe((0,ue.W)(a=>{throw new at(a)}),(0,P.M)(a=>{if(!a||a.hasErrors)throw new at(a)}),(0,E.T)(a=>a.queryResults.map(r=>this._toSelectQueryResponse(r))))}};st=(0,I.Cg)([(0,I.Qj)(0,(0,i.Optional)()),(0,I.Qj)(2,(0,i.Inject)(_.otV)),(0,I.Sn)("design:paramtypes",[c.SysSettingsService,F.HttpClient,String])],st);let Pt=class ph extends st{constructor(e,t,n,a){super(e,t,a),this._entityDeserializer=n}getRowsFromResponse(e){return this._entityDeserializer.deserializeEntities(e.rowConfig,e.rows)}static{this.\u0275fac=function(t){return new(t||ph)(i.\u0275\u0275inject(c.SysSettingsService,8),i.\u0275\u0275inject(F.HttpClient),i.\u0275\u0275inject(_.fL7),i.\u0275\u0275inject(_.otV))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:ph,factory:ph.\u0275fac})}};Pt=(0,I.Cg)([(0,W.op)({requestType:"crt.DataServiceQueryExecutor"}),(0,I.Sn)("design:paramtypes",[c.SysSettingsService,F.HttpClient,_.fL7,String])],Pt);class oe{static{this.\u0275fac=function(t){return new(t||oe)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:oe})}static{this.\u0275inj=i.\u0275\u0275defineInjector({providers:[_.Yp,{provide:Ae,useClass:Pt}]})}}class V{static{this.\u0275fac=function(t){return new(t||V)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:V})}static{this.\u0275inj=i.\u0275\u0275defineInjector({providers:[_.Yp,{provide:Ae,useFactory:(e,t,n)=>new st(e,t,n),deps:[[new i.Optional,c.SysSettingsService],F.HttpClient,_.otV]}]})}}var j=b(23596),Z=b(42127);class fe{constructor(e,t,n,a){this._userInfo=e,this._httpClient=t,this._queryExecutor=n,this._messageChannelService=a,this._cache=[],this._messageChannelService.messageEvent$.pipe((0,se.p)(r=>r?.header?.sender===je&&r?.body?.UserId!==this._userInfo.id),(0,P.M)(r=>{this._deleteConfigFromCache({folderId:r.body.FolderId})})).subscribe()}_createEntitySchemaQuery(e,t){const n=new c.EntitySchemaQuery("FolderRelatedElConfig");return n.addSchemaColumn("ElementName"),n.addSchemaColumn("ElementConfig"),this._addQueryFilters(n,{folderId:e,schemaName:t}),n}_createInsertQuery(e){const t=new c.InsertQuery("FolderRelatedElConfig");return this._addQueryColumns(t,e),t}_createUpdateQuery(e,t){const n=new c.UpdateQuery("FolderRelatedElConfig");return this._addQueryColumns(n,t),this._addQueryFilters(n,e),n}_createDeleteQuery(e){const t=new c.DeleteQuery("FolderRelatedElConfig");return this._addQueryFilters(t,e),t}_addQueryColumns(e,t){if("folderId"in t&&e.addColumn("FolderId",t.folderId,c.DataValueType.Guid),"schemaName"in t&&e.addColumn("ClientSchemaName",t.schemaName,c.DataValueType.Text),"elementName"in t&&e.addColumn("ElementName",t.elementName,c.DataValueType.Text),"elementConfig"in t){const n=t.elementConfig?JSON.stringify(t.elementConfig):"";e.addColumn("ElementConfig",n,c.DataValueType.Blob)}}_addQueryFilters(e,t){const{folderId:n,schemaName:a,elementName:r}=t;"folderId"in t&&e.filters.addSchemaColumnFilterWithParameter(c.ComparisonType.Equal,"FolderId",n),"schemaName"in t&&e.filters.addSchemaColumnFilterWithParameter(c.ComparisonType.Equal,"ClientSchemaName",a),"elementName"in t&&e.filters.addSchemaColumnFilterWithParameter(c.ComparisonType.Equal,"ElementName",r)}_executeQueryAndSetCache(e,t,n){return this._queryExecutor.execute(e).pipe((0,h.map)(({success:a})=>({success:a})),(0,h.catchError)(()=>(0,h.of)({success:!1})),(0,P.M)(({success:a})=>{a&&this._setConfigToCache(t,n)}))}_setResponseToCache(e,t){const{folderId:n,schemaName:a,elementName:r}=e;t.length||t.push({ElementName:r,ElementConfig:null}),t.filter(Boolean).forEach(({ElementName:u,ElementConfig:p})=>{this._setConfigToCache({folderId:n,schemaName:a,elementName:u},p?JSON.parse(p):null)})}_isIncludeCacheKey(e,t){const{folderId:n,schemaName:a,elementName:r}=t;return!(n&&n!==e.folderId||a&&a!==e.schemaName||r&&r!==e.elementName)}_hasCachedConfig(e){const{folderId:t,schemaName:n}=e;return this._cache.some(({key:a})=>this._isIncludeCacheKey(a,{folderId:t,schemaName:n}))}_getCachedConfig(e){const{folderId:t,schemaName:n,elementName:a}=e,r=this._cache.find(({key:u})=>(0,j.A)(u,{folderId:t,schemaName:n,elementName:a}));return r?.value?(0,Z.A)(r.value):null}_setConfigToCache(e,t){const{folderId:n,schemaName:a,elementName:r}=e,u=this._cache.filter(({key:p})=>this._isIncludeCacheKey(p,e));u.length?u.forEach(p=>p.value=t):n&&a&&r&&this._cache.push({key:{folderId:n,schemaName:a,elementName:r},value:t})}_deleteConfigFromCache(e){this._cache=this._cache.filter(({key:t})=>!this._isIncludeCacheKey(t,e))}get(e){const{folderId:t,schemaName:n,elementName:a}=e??{};if(!t||!n||!a)return(0,h.of)(null);if(this._hasCachedConfig(e))return(0,h.of)(this._getCachedConfig(e));const r=this._createEntitySchemaQuery(t,n);return this._queryExecutor.executeSelectQuery(r).pipe((0,P.M)(u=>this._setResponseToCache(e,u)),(0,h.map)(()=>this._getCachedConfig(e)),(0,h.catchError)(()=>(0,h.of)(null)))}create(e){const{folderId:t,schemaName:n,elementName:a}=e??{};if(!t||!n||!a)return(0,h.of)({success:!1});const r=this._createInsertQuery(e);return this._executeQueryAndSetCache(r,e,e.elementConfig)}update(e,t){const{folderId:n,schemaName:a,elementName:r}=e??{};if(!n&&!a&&!r||!t)return(0,h.of)({success:!1});const u=this._createUpdateQuery(e,t);return this._executeQueryAndSetCache(u,e,t.elementConfig)}delete(e){const{folderId:t,schemaName:n,elementName:a}=e??{};if(!t&&!n&&!a)return(0,h.of)({success:!1});const r=this._createDeleteQuery(e);return this._executeQueryAndSetCache(r,e,null)}copy(e,t){return e&&t?this._httpClient.post("rest/FolderRelatedElConfigService/Copy",{sourceFolderId:e,targetFolderId:t}).pipe((0,P.M)(()=>this._deleteConfigFromCache({folderId:t})),(0,h.map)(()=>({success:!0})),(0,h.catchError)(()=>(0,h.of)({success:!1}))):(0,h.of)({success:!1})}static{this.\u0275fac=function(t){return new(t||fe)(i.\u0275\u0275inject(_.oqB),i.\u0275\u0275inject(F.HttpClient),i.\u0275\u0275inject(Ae),i.\u0275\u0275inject(_.Awl))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:fe,factory:fe.\u0275fac,providedIn:"root"})}}var ye=b(2245),et=b(92272);class rn{constructor(){this._cache=new Map}setToCache(e,t){this._cache.set(e,t)}deleteFromCache(e){"string"==typeof e?this._cache.delete(e):Array.from(this._cache.keys()).filter(t=>e.test(t)).forEach(t=>this._cache.delete(t))}getFromCache(e){return this._cache.get(e)}}class En extends rn{constructor(){super(...arguments),this.httpClient=(0,i.inject)(F.HttpClient)}_createCacheKey(e,t={}){return`${e}!${JSON.stringify(t)}`}_createCacheKeyRegExp(e,t={}){const n=(0,ye.A)(t)?Object.entries(t).map(([a,r])=>`"${a}":${JSON.stringify(r)}`).join(".*"):t?.toString();return new RegExp(`${e}!.*${n}.*`)}_cacheRequest(e,t){const n=this.getFromCache(t);if((0,et.A)(n)){const a=e().pipe((0,h.shareReplay)({bufferSize:1,refCount:!1}));return this.setToCache(t,a),a}return n}_getMethodEndpoint(e){return`${this.serviceEndpoint.replace(/\/$/,"")}/${e}`}executePostRequestWithCache(e,t={}){const n=this._getMethodEndpoint(e),a=this._createCacheKey(e,t);return this._cacheRequest(()=>this.httpClient.post(n,t),a)}executeGetRequestWithCache(e){const t=this._getMethodEndpoint(e),n=this._createCacheKey(e);return this._cacheRequest(()=>this.httpClient.get(t),n)}resetCache(e,t={},n){const a=n?.partialComparison?this._createCacheKeyRegExp(e,t):this._createCacheKey(e,t);this.deleteFromCache(a)}}class on extends rn{constructor(e){super(),this._folderTreeRelatedElementConfigsRepository=e}_getCachingKey(e){const{folderId:t,schemaName:n,elementName:a}=e;return`${t}_${n}_${a}`}_isValidFolderSettingsConfig(e){const{folderId:t,schemaName:n,elementName:a}=e;return!!t&&!!n&&!!a}get(e){if(!this._isValidFolderSettingsConfig(e))return(0,h.of)(null);const t=this.getUnsaved(e);return t?(0,h.of)(t):this._folderTreeRelatedElementConfigsRepository.get(e)}getUnsaved(e){if(!this._isValidFolderSettingsConfig(e))return null;const t=this._getCachingKey(e),n=this.getFromCache(t);return(0,Z.A)(n)??null}setUnsaved(e,t){if(!this._isValidFolderSettingsConfig(e))return;const n=this._getCachingKey(e);this.setToCache(n,(0,Z.A)(t))}clear(e){return this._isValidFolderSettingsConfig(e)?this._folderTreeRelatedElementConfigsRepository.get(e).pipe((0,h.switchMap)(t=>t?this._folderTreeRelatedElementConfigsRepository.delete(e):(0,h.of)({success:!0})),(0,h.tap)(()=>this.clearUnsaved(e))):(0,h.of)({success:!1})}clearUnsaved(e){if(!this._isValidFolderSettingsConfig(e))return;const t=this._getCachingKey(e);this.deleteFromCache(t)}save(e){if(!this._isValidFolderSettingsConfig(e))return(0,h.of)({success:!1});const t=this.getUnsaved(e);return t?this._folderTreeRelatedElementConfigsRepository.get(e).pipe((0,h.switchMap)(n=>n?this._folderTreeRelatedElementConfigsRepository.update(e,{elementConfig:t}):this._folderTreeRelatedElementConfigsRepository.create({...e,elementConfig:t})),(0,h.tap)(()=>this.clearUnsaved(e))):(0,h.of)({success:!1})}static{this.\u0275fac=function(t){return new(t||on)(i.\u0275\u0275inject(fe))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:on,factory:on.\u0275fac,providedIn:"root"})}}var Re=b(62441);let xn=class jd extends En{constructor(){super(...arguments),this.serviceEndpoint="rest/RightsService"}_getSchemaDeleteRights(e){return this.executePostRequestWithCache("GetSchemaDeleteRights",e).pipe((0,E.T)(t=>({result:t&&0===t.GetSchemaDeleteRightsResult?.length,message:t?.GetSchemaDeleteRightsResult})))}_getCanDeleteByRecord(e){const t=`${this.serviceEndpoint}/GetCanDelete`;return this.httpClient.post(t,e).pipe((0,E.T)(n=>({result:n&&0===n.GetCanDeleteResult?.length,message:n?.GetCanDeleteResult})))}_getCanAddData(e){const t=e.map(a=>this.getFromCache(`GetCanAdd_${a}`)).filter(a=>!!a),n=e.filter(a=>!t.find(r=>r.schemaName===a));return{cachedResult:t,requestSchemaNames:n}}getCanExecuteOperation(e){return this.getCanExecuteOperations([e]).pipe((0,Y.Z)(t=>(0,h.of)((t||[])[0])))}getCanExecuteOperations(e){return(0,h.combineLatest)(e.map(t=>this.executePostRequestWithCache("GetCanExecuteOperation",{operation:t}).pipe((0,E.T)(n=>n?.GetCanExecuteOperationResult))))}getIsTechnicalUser(){const e=`${this.serviceEndpoint}/GetIsTechnicalUser`;return this.httpClient.post(e,null).pipe((0,E.T)(t=>t?.GetIsTechnicalUserResult))}getCanAdd(e){const t="GetCanAdd",{cachedResult:n,requestSchemaNames:a}=this._getCanAddData(e);if(!a.length)return(0,h.of)(n);const r=`${this.serviceEndpoint}/${t}`;return this.httpClient.post(r,a).pipe((0,E.T)(u=>u.map(p=>({schemaName:p.Key,result:(0,Re.A)(p.Value),errorMessage:p.Value}))),(0,P.M)(u=>u.forEach(p=>this.setToCache(`${t}_${p.schemaName}`,p))),(0,E.T)(u=>u.concat(n)))}getCanEdit(e){const t=`${this.serviceEndpoint}/GetCanEdit`;return this.httpClient.post(t,e).pipe((0,E.T)(n=>({result:n&&0===n.GetCanEditResult?.length,message:n?.GetCanEditResult})))}getCanDelete(e){if(e.primaryColumnValue)return this._getCanDeleteByRecord(e);const t={schemaName:e.schemaName};return this._getSchemaDeleteRights(t)}copyRights(e){const t=`${this.serviceEndpoint}/CopyRights`;return this.httpClient.post(t,e)}getCanEditColumns(e){return this.executePostRequestWithCache("GetCanEditColumns",e).pipe((0,E.T)(t=>{const a={};return(t?.GetCanEditColumnsResult??[]).forEach(r=>a[r.Key]=r.Value),a}))}getCanReadColumns(e){return this.executePostRequestWithCache("GetCanReadColumns",e).pipe((0,E.T)(t=>{const a={};return(t?.GetCanReadColumnsResult??[]).forEach(r=>a[r.Key]=r.Value),a}))}getCanExecuteEntityOperation(e,t){const n=`${this.serviceEndpoint}/GetCanExecuteEntityOperation`,a={entitySchemaName:e,entityOperationCode:t};return this.httpClient.post(n,a).pipe((0,Y.Z)(r=>(0,h.of)(r?.GetCanExecuteEntityOperationResult)))}getAclGranted(e){return(0,h.firstValueFrom)(this.executeGetRequestWithCache("GetReadDeniedEntityList")).then(t=>!t.GetReadDeniedEntityListResult.includes(e),t=>(console.error(`Error while making request to ReadDeniedEntityList: ${t}`),!0))}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(jd)))(n||jd)}})()}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:jd,factory:jd.\u0275fac,providedIn:"root"})}};xn=(0,I.Cg)([(0,W.op)({requestType:"crt.RightsService"})],xn);i.APP_INITIALIZER,i.Injector;const Zt="QuerySchemaProfile";class An extends En{constructor(e,t){super(),this.httpClient=e,this.serviceEndpoint=t,this._serviceSaveProfileEndpoint=`${t}/UserSchemaProfile`}getProfile(e,t){return this.executePostRequestWithCache(Zt,{key:e,skipAncestors:t?.skipAncestors}).pipe((0,E.T)(n=>t?.skipAncestors?n?.[0]:n))}saveProfile(e,t,n){const{requirejs:a,require:r}=window;r?.defined("profile")&&r("profile").addKey(e),a?.undef("profile!"+e);const u={key:e,data:null===t?"":JSON.stringify(t),sysAdminUnitIds:n?.sysAdminUnitIds,clearDescendants:n?.clearDescendants};return this.httpClient.post(this._serviceSaveProfileEndpoint,u).pipe((0,E.T)(p=>p),(0,P.M)(()=>{this.resetCache(Zt,{key:e},{partialComparison:!0})}))}static{this.\u0275fac=function(t){return new(t||An)(i.\u0275\u0275inject(F.HttpClient),i.\u0275\u0275inject(_.otV))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:An,factory:An.\u0275fac,providedIn:"root"})}}class ln{constructor(e,t){this._userSchemaProfileService=e,this._subscribeOnNotificationsSettingsChanged(t)}_subscribeOnNotificationsSettingsChanged(e){this._changeUserSettingsSubscription=e.subscribe("UserDesktopNotificationSettingsChanged").subscribe(t=>this._updateRestrictions(t))}_updateRestrictions(e=!1){this._userSettings=this._userSettings||{allowNotifications:!1},this._userSettings.allowNotifications=e}_mapToUserSettings(e){const t={};return e&&Array.isArray(e)&&0!==e.length?t.allowNotifications=e[0].Enabled:t.allowNotifications=!1,t}_loadSettings(){return(0,h.lastValueFrom)(this._userSchemaProfileService.getProfile("DesktopPopupNotification.profile").pipe((0,h.map)(e=>this._mapToUserSettings(e))))}getSettings(){var e=this;return(0,A.A)(function*(){return e._userSettings||(e._userSettings=yield e._loadSettings()),e._userSettings})()}ngOnDestroy(){this._changeUserSettingsSubscription?.unsubscribe()}static{this.\u0275fac=function(t){return new(t||ln)(i.\u0275\u0275inject(An),i.\u0275\u0275inject(W.Dj))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:ln,factory:ln.\u0275fac,providedIn:"root"})}}let Cs=class Vy{static{this.\u0275fac=function(t){return new(t||Vy)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:Vy})}static{this.\u0275inj=i.\u0275\u0275defineInjector({providers:[W.rK,{provide:_.Ac2,useFactory:e=>t=>t?.header?.sender===je&&t?.body?.UserId!==e?.id,deps:[_.oqB],multi:!0},{provide:_.kGb,useClass:xn},{provide:_.XAg,useExisting:Se},{provide:W.rR,useClass:ln}],imports:[R.CommonModule]})}};Cs=(0,I.Cg)([(0,c.CrtModule)({requestHandlers:[ne]})],Cs);let Rn=class extends c.BaseRequest{};Rn=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.GetApiKeyRequest"})],Rn);class si{static{this.\u0275fac=function(t){return new(t||si)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:si})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[R.CommonModule]})}}var ia,we;!function(o){o[o.General=0]="General",o[o.Assembly=1]="Assembly"}(ia||(ia={})),function(o){o[o.SqlScript=0]="SqlScript",o[o.SchemaData=1]="SchemaData",o[o.Assembly=2]="Assembly",o[o.EntitySchema=3]="EntitySchema",o[o.ClientUnitSchema=4]="ClientUnitSchema",o[o.SourceCodeSchema=5]="SourceCodeSchema",o[o.ProcessSchema=6]="ProcessSchema",o[o.DcmSchema=7]="DcmSchema",o[o.ProcessUserTaskSchema=8]="ProcessUserTaskSchema",o[o.CampaignSchema=9]="CampaignSchema",o[o.ServiceSchema=10]="ServiceSchema",o[o.AddonSchema=11]="AddonSchema",o[o.CopilotIntentSchema=12]="CopilotIntentSchema"}(we||(we={}));var _e=b(76340),rt=b(46715);const $e=new Array("constructor","ngOnDestroy");let aa=!1;const ri=new Proxy({},{get(o,e){if(aa||$e.includes(e))return o[e];throw new Error(`FEATURE_VALUES. "${String(e)}" not loaded`)}}),Ot={provide:_.G2Y,useFactory:()=>ri};let Gt=class mh{constructor(e){this.httpClient=e,this._getFeatureStatesEndpoint="rest/FeatureService/GetFeatureStates",this._cachedCodes=new Map,this._destroyed$=new h.Subject}_checkFeaturesFromURL(){const e=location.search;new URLSearchParams(e).forEach((n,a)=>{if(a.indexOf("feature:")>=0){const r=a.split(":")[1],u="true"===n;this._cachedCodes.set(r,u)}})}loadFeatureStates(){return this._featureStates$||(this._featureStates$=this.httpClient.post(this._getFeatureStatesEndpoint,{}).pipe((0,E.T)(e=>(e.GetFeatureStatesResult.forEach(t=>{this._cachedCodes.set(t.Key,1===t.Value)}),(0,i.isDevMode)()&&this._checkFeaturesFromURL(),Object.fromEntries(this._cachedCodes.entries()))),(0,P.M)(e=>{Object.assign(ri,e),Object.freeze(ri),aa=!0}),(0,ue.W)(()=>(aa=!0,(0,h.of)(null))),(0,ie.u)(),(0,_e.Q)(this._destroyed$))),this._featureStates$}getFeatureState(e){return e?this._cachedCodes.size>0?(0,h.of)(this._cachedCodes.get(e)||!1):this.loadFeatureStates().pipe((0,E.T)(()=>this._cachedCodes.get(e)||!1)):(0,h.of)(!1)}getFeaturesState(e){return(0,h.from)(this.getFeaturesStateAsync(e))}getFeaturesStateAsync(e){return Promise.all(e.map(t=>{const n="string"==typeof t?this.getFeatureState(t):t;return new Promise(a=>n.pipe((0,rt.$)()).subscribe({next:a}))}))}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}static{this.\u0275fac=function(t){return new(t||mh)(i.\u0275\u0275inject(F.HttpClient))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:mh,factory:mh.\u0275fac,providedIn:"root"})}};Gt=(0,I.Cg)([(0,W.op)({requestType:"crt.FeatureService"}),(0,I.Sn)("design:paramtypes",[F.HttpClient])],Gt);const pt={provide:i.APP_INITIALIZER,useFactory:function Ti(o){return()=>(0,h.lastValueFrom)(o.loadFeatureStates(),{defaultValue:null})},deps:[Gt],multi:!0};class Le{static{this._sourceCodeSchemaDesignerCodeUrl="SourceCodeSchemaDesigner"}static{this._clientUnitSchemaDesignerUrl="ClientUnitSchemaDesigner"}constructor(e){this._features=e}static _getClientUnitSchemaInfo(e,t={isInterfaceDesignerFeatureOn:!1}){const n=t.isInterfaceDesignerFeatureOn?this.getInterfaceDesignerOpenTemplate():Le._clientUnitSchemaDesignerUrl+"/{0}";return{itemTypes:[we.ClientUnitSchema],itemType:we.ClientUnitSchema,createTemplate:t.createTemplate,createDialogComponentName:t.createDialogComponentName,openTemplate:e+n,itemTitle:t.itemTitle,name:t.name}}static _addAngularSchemaInfo(e,t){e.splice(3,0,Le._getClientUnitSchemaInfo(t,{createTemplate:t+"InterfaceDesigner?packageUId={0}&useFullHierarchy={1}",itemTitle:"WorkspaceExplorer.Section.Items.Add.ClientUnit.AngularSchema",createDialogComponentName:"page-template-lookup",isInterfaceDesignerFeatureOn:!0,name:"angular-schema"}))}static _addExtendingAngularSchemaInfo(e,t){const n={createTemplate:t+Le._clientUnitSchemaDesignerUrl+"/new?packageId={0}&packageName={1}&schemaType=9&extendParent=true",itemTitle:"WorkspaceExplorer.Section.Items.Add.ClientUnit.ExtendedAngularSchema",name:"extended-angular-schema"};e.splice(10,0,Le._getClientUnitSchemaInfo(t,n))}static _getEntitySchemaInfo(e,t){return{itemTypes:[we.EntitySchema],itemType:we.EntitySchema,createTemplate:e+`EntitySchemaDesigner/new?packageId={0}&packageName={1}&useFullHierarchy={2}&extendParent=${t.isExtendParent}`,openTemplate:e+this.getEntitySchemaDesignerOpenTemplate(),itemTitle:t.itemTitle,name:t.name}}static _getEntitySchemaDesignerOpenToExtendTemplate(){return"EntitySchemaDesigner/new?packageId={0}&packageName={1}&useFullHierarchy={2}&extendParent=true&parentSchemaUId={3}"}static getEntitySchemaDesignerOpenTemplate(){return"EntitySchemaDesigner/{0}?packageId={1}&packageName={2}&useFullHierarchy={3}"}static getInterfaceDesignerOpenTemplate(){return"InterfaceDesigner/{0}?packageUId={1}&useFullHierarchy={2}"}static getSourceCodeDesignerOpenTemplate(){return`${this._sourceCodeSchemaDesignerCodeUrl}/{0}`}static getUserCodeDesignerOpenTemplate(){return"UserTaskSchemaDesigner/{0}"}static getCurrentAppUrl(){let e=location.href;return e=e.replace(location.hash,""),R.Location.joinWithSlash(e,"#/")}getSchemaMetaDataUrl(e,t,n){return`${Le.getCurrentAppUrl()}SchemaMetaDataDesigner/${e}/${t}/${n}`}getMetaItemsSourceCodeUrl(e){return`${Le.getCurrentAppUrl()}${Le._sourceCodeSchemaDesignerCodeUrl}/${e}?showMetaItemSourceCode=true`}getClientUnitSchemaDesignerUrl(e){return`${Le.getCurrentAppUrl()}${Le._clientUnitSchemaDesignerUrl}/${e}`}getAppsInfo(){const e=Le.getCurrentAppUrl(),t=(0,_.Xqd)(),n=(0,_.cIr)();return this._features.getFeaturesState(["DisableUserTaskSchemaDesignerComponent","AllowCreateAngularSchema"]).pipe((0,E.T)(([r,u])=>{const p=[Le._getEntitySchemaInfo(e,{name:"entity-schema",isExtendParent:!1,itemTitle:"WorkspaceExplorer.Section.Items.Add.Entity"}),Le._getEntitySchemaInfo(e,{name:"replacing-entity-schema",isExtendParent:!0,itemTitle:"WorkspaceExplorer.Section.Items.Add.ReplacingEntity"}),{itemTypes:[we.EntitySchema],itemType:we.EntitySchema,name:"extend-entity-schema",openTemplate:e+Le._getEntitySchemaDesignerOpenToExtendTemplate(),itemTitle:""},{name:"source-code-schema-designer",itemTypes:[we.SourceCodeSchema],itemType:we.SourceCodeSchema,createTemplate:e+`${Le._sourceCodeSchemaDesignerCodeUrl}/new?packageId={0}&packageName={1}`,openTemplate:e+Le.getSourceCodeDesignerOpenTemplate(),itemTitle:"WorkspaceExplorer.Section.Items.Add.SourceCode"},Le._getClientUnitSchemaInfo(e,{createTemplate:e+Le._clientUnitSchemaDesignerUrl+"/new?packageId={0}&packageName={1}&schemaType=1",itemTitle:"WorkspaceExplorer.Section.Items.Add.ClientUnit.Module",name:"client-unit-schema-module"}),Le._getClientUnitSchemaInfo(e,{createTemplate:e+"ClientUnitSchemaDesigner/new?packageId={0}&packageName={1}&schemaType=2",itemTitle:"WorkspaceExplorer.Section.Items.Add.ClientUnit.EditViewModelSchema",name:"client-unit-schema-page-view-model"}),Le._getClientUnitSchemaInfo(e,{createTemplate:e+"ClientUnitSchemaDesigner/new?packageId={0}&packageName={1}&schemaType=3",itemTitle:"WorkspaceExplorer.Section.Items.Add.ClientUnit.ModuleViewModelSchema",name:"client-unit-schema-section-view-model"}),Le._getClientUnitSchemaInfo(e,{createTemplate:e+"ClientUnitSchemaDesigner/new?packageId={0}&packageName={1}&schemaType=5",itemTitle:"WorkspaceExplorer.Section.Items.Add.ClientUnit.GridDetailViewModelSchema",name:"client-unit-schema-detail-list-view-model"}),Le._getClientUnitSchemaInfo(e,{createTemplate:e+"ClientUnitSchemaDesigner/new?packageId={0}&packageName={1}&schemaType=6",itemTitle:"WorkspaceExplorer.Section.Items.Add.ClientUnit.EditControlsDetailViewModelSchema",name:"client-unit-schema-detail-fields-view-model"}),Le._getClientUnitSchemaInfo(e,{createTemplate:e+Le._clientUnitSchemaDesignerUrl+"/new?packageId={0}&packageName={1}&schemaType=0&extendParent=true",itemTitle:"WorkspaceExplorer.Section.Items.Add.ClientUnit.ExtendedClientUnitSchema",name:"client-unit-schema-replacing-view-model"}),{name:"business-process-schema-designer",itemTypes:[we.ProcessSchema],itemType:we.ProcessSchema,createTemplate:n+"Nui/ViewModule.aspx?vm=SchemaDesigner#process/add/{0}",openTemplate:n+"Nui/ViewModule.aspx?vm=SchemaDesigner#process/{0}/{1}",itemTitle:"WorkspaceExplorer.Section.Items.Add.BusinessProcess"},{name:"rest-services",itemTypes:[we.ServiceSchema],itemType:we.ServiceSchema,createTemplate:n+"Nui/ViewModule.aspx?vm=WebServicesDesigner#add/Rest/packageUId/{0}",openTemplate:n+"Nui/ViewModule.aspx?vm=WebServicesDesigner#edit/{0}",itemTitle:"WorkspaceExplorer.Section.Items.Add.RestService"},{name:"soap-services",itemTypes:[we.ServiceSchema],itemType:we.ServiceSchema,createTemplate:n+"Nui/ViewModule.aspx?vm=WebServicesDesigner#add/Soap/packageUId/{0}",openTemplate:n+"Nui/ViewModule.aspx?vm=WebServicesDesigner#edit/{0}",itemTitle:"WorkspaceExplorer.Section.Items.Add.SoapService"},{name:"dcm-designer",itemTypes:[we.DcmSchema],itemType:we.DcmSchema,createTemplate:"",openTemplate:t+"/Nui/ViewModule.aspx?vm=DcmDesigner#case/{0}",itemTitle:"DcmDesigner"},{name:"user-task-schema-designer",itemTypes:[we.ProcessUserTaskSchema],itemType:we.ProcessUserTaskSchema,createTemplate:r?t+"/Designers/ProcessUserTaskSchemaDesigner.aspx?packageUId={0}&isExtendParent=false&isNewSchema=1&autoCreateDesignInstance=true":e+"UserTaskSchemaDesigner/new?packageId={0}&packageName={1}",openTemplate:r?t+"/Designers/ProcessUserTaskSchemaDesigner.aspx?id={0}&autoCreateDesignInstance=true":e+Le.getUserCodeDesignerOpenTemplate(),itemTitle:"WorkspaceExplorer.Section.Items.Add.UserTask"},{name:"campaign-designer",itemTypes:[we.CampaignSchema],itemType:we.CampaignSchema,createTemplate:"",openTemplate:t+"/Nui/ViewModule.aspx?vm=CampaignDesigner#campaign/{0}",itemTitle:"CampaignDesigner"},{name:"sql-script-schema-designer",itemTypes:[we.SqlScript],itemType:we.SqlScript,createTemplate:e+"SqlScriptSchemaDesigner/new?packageId={0}&packageName={1}",openTemplate:e+"SqlScriptSchemaDesigner/{0}",itemTitle:"WorkspaceExplorer.Section.Items.Add.Sql"},{name:"data-binding",itemTypes:[we.SchemaData],itemType:we.SchemaData,createTemplate:e+"SchemaDataDesigner/new?packageId={0}&packageName={1}",openTemplate:e+"SchemaDataDesigner/{0}",itemTitle:"WorkspaceExplorer.Section.Items.Add.DataBinding"},{name:"addon-schema",itemTypes:[we.AddonSchema],itemType:we.AddonSchema,createTemplate:"",openTemplate:this.getSchemaMetaDataUrl("{0}",we.AddonSchema,"{1}"),itemTitle:""},{name:"copilot-intent-schema",itemTypes:[we.CopilotIntentSchema],itemType:we.CopilotIntentSchema,createTemplate:"",openTemplate:this.getSchemaMetaDataUrl("{0}",we.CopilotIntentSchema,"{1}"),itemTitle:""}];return Le._addAngularSchemaInfo(p,e),u&&Le._addExtendingAngularSchemaInfo(p,e),{success:!0,appsInfo:p}}))}static{this.\u0275fac=function(t){return new(t||Le)(i.\u0275\u0275inject(Gt))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Le,factory:Le.\u0275fac,providedIn:"root"})}}class Vt{constructor(e){this._httpClient=e,this._serviceUrl="/ServiceModel/AppearanceSettingsService.svc/"}getAppearanceSettings(e){return this._httpClient.post(this._serviceUrl+"GetAppearanceSettings",{schemaName:e}).pipe((0,E.T)(t=>t.value))}static{this.\u0275fac=function(t){return new(t||Vt)(i.\u0275\u0275inject(F.HttpClient))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Vt,factory:Vt.\u0275fac,providedIn:"root"})}}class Jt{}class ot{getBaseUrl(){return(0,_.gdN)()}static{this.\u0275fac=function(t){return new(t||ot)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:ot,factory:ot.\u0275fac,providedIn:"root"})}}let cn=null;const Di=new i.InjectionToken("Authentication settings");class Ut{constructor(e,t){this.httpClient=e,this.urlService=t;const a=`${t.getBaseUrl()}/ServiceModel/AuthService.svc`;this._serviceChangePasswordServiceEndpoint=`${a}/DoChangePasswordLogin`,this._serviceGetAuthenticationSettingsEndpoint=`${a}/GetAuthenticationSettings`,this._serviceGetAccessibleAuthFlowsEndpoint=`${a}/GetAccessibleAuthFlows`,this._serviceStartTextCodeAuthFlowEndpoint=`${a}/StartTextCodeAuthFlow`,this._getIsAuthenticatedEndpoint=`${a}/GetIsAuthenticated`}getIsAuthenticated(){return this.httpClient.post(this._getIsAuthenticatedEndpoint,"")}getDoPasswordChange(e){return this.httpClient.post(this._serviceChangePasswordServiceEndpoint,e)}getAuthenticationSettings(){return this.httpClient.post(this._serviceGetAuthenticationSettingsEndpoint,"")}getAccessibleAuthFlows(e){return this.httpClient.post(this._serviceGetAccessibleAuthFlowsEndpoint,e)}initializeCachedSettings(){return this.getAuthenticationSettings().pipe((0,h.map)(e=>{cn=e}))}startTextCodeAuthFlow(e={},t=""){const n={};return t&&(n.headers={"X-Second-Factor-Provider-Name":t}),this.httpClient.post(this._serviceStartTextCodeAuthFlowEndpoint,e,n)}static{this.\u0275fac=function(t){return new(t||Ut)(i.\u0275\u0275inject(F.HttpClient),i.\u0275\u0275inject(Jt))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Ut,factory:Ut.\u0275fac,providedIn:"root"})}}class We{constructor(e,t,n){this._httpClient=e,this._authSettings=t,this._urlService=n,this._baseUrl="",this._totpServicePath="/api/Totp",this._baseUrl=this._urlService.getBaseUrl()}_getEndpointUrl(e){return this._baseUrl+e}getIsTotpEnabledForCurrentUser(){const e=this._getEndpointUrl(`${this._totpServicePath}/IsConfiguredForCurrentUser`);return this._httpClient.get(e)}resetTotpForCurrentUser(){const e="NextGen"===this._authSettings.appFramework?this._getEndpointUrl(`${this._totpServicePath}/Authenticator/DisconnectForCurrentUser`):this._getEndpointUrl(`/0${this._totpServicePath}/Authenticator/DisconnectForCurrentUser`);return this._httpClient.post(e,"").pipe((0,h.map)(t=>{const n=t;return{isSuccess:n.isSuccess,errorCode:n.errorCode,message:n.message}}))}setUpTotp(e){const t=`${this._totpServicePath}/Authenticator/Connect`,n=this._getEndpointUrl(t);return this._httpClient.post(n,{totpCode:e})}getSecret(){const e=`${this._totpServicePath}/GenerateSecret`,t=this._getEndpointUrl(e);return this._httpClient.post(t,{})}static{this.\u0275fac=function(t){return new(t||We)(i.\u0275\u0275inject(F.HttpClient),i.\u0275\u0275inject(Di),i.\u0275\u0275inject(Jt))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:We,factory:We.\u0275fac,providedIn:"root"})}}class zt{constructor(e,t){this._httpClient=e,this._urlService=t,this._baseUrl="",this._recoveryCodeServicePath="/api/RecoveryCode",this._baseUrl=this._urlService.getBaseUrl()}_getEndpointUrl(e){return this._baseUrl+e}getIsGeneratedForCurrentUser(){const e=this._getEndpointUrl(`${this._recoveryCodeServicePath}/IsGenerated`);return this._httpClient.get(e)}generateForCurrentUser(){const e=this._getEndpointUrl(`${this._recoveryCodeServicePath}/Generate`);return this._httpClient.post(e,{})}deleteForCurrentUser(){const e=this._getEndpointUrl(`${this._recoveryCodeServicePath}/Delete`);return this._httpClient.post(e,{})}static{this.\u0275fac=function(t){return new(t||zt)(i.\u0275\u0275inject(F.HttpClient),i.\u0275\u0275inject(Jt))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:zt,factory:zt.\u0275fac,providedIn:"root"})}}var Un=b(64455),Tt=b(76661);class Yt{constructor(e,t,n){this.httpClient=e,this._userInfo=t,this._entitySchemaRepository=n,this._serviceEndpoint=(this._userInfo.isSSP?"ssp/":"")+"rest/ConfigurationDataService/",this._cachedEntityConfigurationData=new Map,this._cachedEntityUIdsData=new Map}_getUncachedEntities(e){return e.filter(t=>!this._cachedEntityConfigurationData.has(t))}_loadEntitiesData(e){const t=this._serviceEndpoint+"GetEntityData";return this.httpClient.post(t,e)}_getEntitiesData(e,t){return this._loadEntitiesData(e).pipe((0,E.T)(n=>n.success&&(0,Re.A)(n.errorInfo)?(this._setEntitiesDataToCache(n.data),this._getEntitiesDataResponse(t)):n))}_setEntitiesDataToCache(e){const{entitiesStructure:t,modulesStructure:n}=e;this._setEntityStructureToCache(t),this._setModuleStructureToCache(n)}_setEntityStructureToCache(e){e.forEach(t=>{const n=t.entitySchemaName,a={entityStructure:t,moduleStructure:null};this._cachedEntityConfigurationData.set(n,a)})}_setModuleStructureToCache(e){e.forEach(t=>{const n=t.entitySchemaName,a=this._cachedEntityConfigurationData.get(n);a&&(a.moduleStructure=t,this._cachedEntityConfigurationData.set(n,a))})}_getEntitiesDataFromCache(e){const t={entitiesStructure:[],modulesStructure:[]};return e.forEach(n=>{const a=this._cachedEntityConfigurationData.get(n);a&&(t.entitiesStructure.push(a.entityStructure),t.modulesStructure.push(a.moduleStructure))}),t}_getEntitiesDataResponse(e){return{data:this._getEntitiesDataFromCache(e),success:!0}}getData(e=!1){if(e&&(this._cachedFullConfigurationData$=void 0),this._cachedFullConfigurationData$)return this._cachedFullConfigurationData$;const t=this._serviceEndpoint+"GetData";return this._cachedFullConfigurationData$=this.httpClient.post(t,e).pipe((0,Tt.t)({refCount:!0}))}getEntityData(e,t=!1){return this.getEntitiesData([e],t).pipe((0,E.T)(n=>({data:{entityStructure:n?.data?.entitiesStructure[0],moduleStructure:n?.data?.modulesStructure[0]},success:n?.success,errorInfo:n?.errorInfo})))}getEntityUId(e){return this._cachedEntityUIdsData.has(e)?(0,h.of)(this._cachedEntityUIdsData.get(e)):this._entitySchemaRepository.getSchemaByName(e).pipe((0,E.T)(t=>{const n={data:{entityUIds:[{entitySchemaName:e,entitySchemaUId:t.uId}]},success:!0};return this._cachedEntityUIdsData.set(e,n),n}))}getEntitiesData(e,t=!1){const n=(0,Un.A)(e);if(t)return this._getEntitiesData(n,n);const a=this._getUncachedEntities(n);return(0,Re.A)(a)?(0,h.of)(this._getEntitiesDataResponse(n)):this._getEntitiesData(a,n)}clearCachedData(){this._cachedFullConfigurationData$=void 0}static{this.\u0275fac=function(t){return new(t||Yt)(i.\u0275\u0275inject(F.HttpClient),i.\u0275\u0275inject(_.oqB),i.\u0275\u0275inject(_.vp2))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Yt,factory:Yt.\u0275fac,providedIn:"root"})}}class un{constructor(e,t){this.sysSettingsService=e,this.queryExecutor=t}_getPrimarySysSettingValue(){return this.sysSettingsService.getByCodes(["PrimaryCurrency"]).pipe((0,E.T)(e=>e.values.PrimaryCurrency))}getCurrencyById(e){const t=new c.EntitySchemaQuery("Currency");return t.addSchemaColumn("Code"),t.addSchemaColumn("Id"),t.addSchemaColumn("Name"),t.addSchemaColumn("ShortName"),t.addSchemaColumn("Symbol"),t.filters.addSchemaColumnFilterWithParameter(c.ComparisonType.Equal,"Id",e),this.queryExecutor.executeSelectQuery(t).pipe((0,E.T)(n=>n[0]))}getPrimaryCurrencyInfo(){return this._primaryCurrencyCache?(0,h.of)(this._primaryCurrencyCache):this._getPrimarySysSettingValue().pipe((0,z.n)(e=>this.getCurrencyById(e.value).pipe((0,E.T)(t=>(this._primaryCurrencyCache=t,t)))),(0,ie.u)())}static{this.\u0275fac=function(t){return new(t||un)(i.\u0275\u0275inject(Se),i.\u0275\u0275inject(Ae))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:un,factory:un.\u0275fac,providedIn:"root"})}}class Kt{constructor(e,t){this.httpClient=e,this._userInfo=t,this._dcmSchemasMap=new Map,this._dcmSchemaItemsMap=new Map,this.serviceEndpoint="DataService/"+(this._userInfo.isSSP?"ssp/":"")+"json/SyncReply/"}getDcmSchemaDataCollection(){if(this._dcmSchemaData)return(0,h.of)(this._dcmSchemaData);const e=this.serviceEndpoint+"DcmSchemaManagerRequest";return this.httpClient.post(e,{}).pipe((0,P.M)(t=>this._dcmSchemaData=t?.collection),(0,E.T)(t=>t?.collection))}getDcmSchemaData(e){const t=this._dcmSchemasMap.get(e);if(t)return(0,h.of)(t);const n=this.serviceEndpoint+"DcmSchemaInfoRequest";return this.httpClient.post(n,{uId:e}).pipe((0,P.M)(a=>this._dcmSchemasMap.set(e,a)),(0,E.T)(a=>a))}getDcmSchemaDataItems(e){let t=this._dcmSchemaItemsMap.get(e);if(t)return t;const n=this.serviceEndpoint+"DcmSchemaInfoItemsRequest";return t=this.httpClient.post(n,{entitySchemaUId:e}).pipe((0,E.T)(a=>a?.collection),(0,h.shareReplay)({bufferSize:1,refCount:!0})),this._dcmSchemaItemsMap.set(e,t),t}getDcmRunningProcess(e,t){const n=this.serviceEndpoint+"DcmRunningProcessRequest";return this.httpClient.post(n,{contractName:"DcmRunningProcessRequest",entitySchemaUId:e,recordId:t}).pipe((0,E.T)(a=>({name:a?.Name,uId:a?.UId,success:a?.success})))}getDcmRunningProcessHistory(e,t){const n=this.serviceEndpoint+"DcmRunningProcessWithHistoryRequest";return this.httpClient.post(n,{contractName:"DcmRunningProcessWithHistoryRequest",entitySchemaUId:e,recordId:t}).pipe((0,E.T)(a=>({name:a?.Name,uId:a?.UId,history:a?.History,success:a?.success})))}getDcmRecordInfo(e,t){const n=this.serviceEndpoint+"DcmInfoRequest";return this.httpClient.post(n,{recordId:e,dcmSchemaUId:t}).pipe((0,E.T)(a=>a))}getAllowedStages(e){return this.httpClient.post("rest/DcmService/GetAllowedStagesForCurrentUser",{dcmSchemaUId:e}).pipe((0,E.T)(n=>n.GetAllowedStagesForCurrentUserResult))}getDcmStageColumnName(e){return this.httpClient.post("rest/DcmService/GetDcmStageColumnName",{entitySchemaId:e}).pipe((0,E.T)(n=>n.GetDcmStageColumnNameResult))}static{this.\u0275fac=function(t){return new(t||Kt)(i.\u0275\u0275inject(F.HttpClient),i.\u0275\u0275inject(_.oqB))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Kt,factory:Kt.\u0275fac,providedIn:"root"})}}class Dt{constructor(e){this.httpClient=e,this._getDcmServiceEndpoint="rest/DcmService/GetDcmStageColumnName",this._destroyed$=new h.Subject}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}getStageColumnName(e){return this.httpClient.post(this._getDcmServiceEndpoint,{entitySchemaName:e}).pipe((0,E.T)(t=>t.GetDcmStageColumnNameResult),(0,ue.W)(()=>(0,h.of)(null)),(0,_e.Q)(this._destroyed$))}static{this.\u0275fac=function(t){return new(t||Dt)(i.\u0275\u0275inject(F.HttpClient))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Dt,factory:Dt.\u0275fac})}}class oi{constructor(e,t,n){this._httpClient=e,this._fileDownloadService=t,this._systemSettings=n,this._serviceName="ReportService",this._exportToExcelMethodName="GetExportToExcelKey",this._downloadExcelFileMethodName="GetExportToExcelData",this._timeoutSysSettingCode="ExportToExcelTimeout",this._defaultTimeoutValue=6e5}_getDownloadExcelFileUrl(e,t){return`../rest/${this._serviceName}/${this._downloadExcelFileMethodName}/${e}/${t}`}_getReportServiceUrl(){return`rest/${this._serviceName}/${this._exportToExcelMethodName}`}_downloadExcelFile(e,t){const n=this._getDownloadExcelFileUrl(e,t),a=`${t}.xlsx`;this._fileDownloadService.downloadFromUrl(n,a)}_getTimeout(e){let t=this._defaultTimeoutValue;return e?.dataValueType===c.DataValueType.Integer&&(t=e.value),t}exportRecordsFromEsqToExcel(e,t){const n=this._getReportServiceUrl(),a=JSON.stringify(e);return this._systemSettings.getByCode(this._timeoutSysSettingCode).pipe((0,z.n)(r=>this._httpClient.post(n,{esqSerialized:a}).pipe((0,h.timeout)(this._getTimeout(r)))),(0,E.T)(r=>(r.GetExportToExcelKeyResult.success&&this._downloadExcelFile(r.GetExportToExcelKeyResult.key,t),r)))}static{this.\u0275fac=function(t){return new(t||oi)(i.\u0275\u0275inject(F.HttpClient),i.\u0275\u0275inject(_.DG0),i.\u0275\u0275inject(Se))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:oi,factory:oi.\u0275fac,providedIn:"root"})}}var zn=b(71857);class li{constructor(e,t,n){this._document=e,this._sysSettingsService=t,this._platform=n,this._useFaviconSysSettingsCode="UseFaviconFromSysSettings",this._faviconImageSysSettingsCode="FaviconImage"}_addFaviconElement(e){const t=this._document.createElement("link");t.setAttribute("rel","icon"),t.setAttribute("type","image/x-icon"),t.setAttribute("href",e),this._document.head.appendChild(t)}_getFaviconHref(e,t){if(e&&e.success){const a=e.values[this._useFaviconSysSettingsCode];if(a&&a.value){const r=Date.now().toString().slice(0,-5),u=`img/terrasoft.axd?s=nui-binary-syssetting&r=${this._faviconImageSysSettingsCode}&source_hash=${r}`;return R.Location.joinWithSlash(t,u)}}return"favicon.ico"}_innerInit(e){return this._sysSettingsService.getByCodes([this._useFaviconSysSettingsCode]).pipe((0,E.T)(t=>{const n=this._getFaviconHref(t,e);this._addFaviconElement(n)}))}init(e){return this._platform.SAFARI?(0,h.of)(void 0):this._innerInit(e)}static{this.\u0275fac=function(t){return new(t||li)(i.\u0275\u0275inject(R.DOCUMENT),i.\u0275\u0275inject(Se),i.\u0275\u0275inject(zn.OD))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:li,factory:li.\u0275fac})}}var ee=b(59684);class L extends _.SNu{constructor(e,t){super(),this.sysSettingsService=e,this.userInfo=t,this._enabled=!1,this._initialized=!1}_initializeDataLayer(){const e=window;e.dataLayer&&(this._dataLayer=e.dataLayer)}_initializeScripts(e){e&&(e=e.replace(/'/g,'"'),this._appendChildScriptTag(document.head,"script",this._getHtmlTagContent("script",e)),this._appendChildScriptTag(document.body,"noscript",this._getHtmlTagContent("noscript",e)))}_getHtmlTagContent(e,t){if(!t||!e)return"";const n=new RegExp("<"+e+"[\\s\\S]*?>[\\s\\S]*?<\\/"+e+">","gi"),a=t.match(n);if(a&&1===a.length){const r=a[0],u=new RegExp("<(\\/|)"+e+"(.*?|)>","gi");return r.replace(u,"").trim()}return""}_appendChildScriptTag(e,t,n){if(!e||!t||!n)return;const a=document.createElement(t);a.appendChild(document.createTextNode(n)),e.appendChild(a)}_initializeDefaultVariables(e){const t=this.userInfo,n={productName:e.ProductName,productEdition:e.ProductEdition,primaryCulture:{displayValue:t.cultureInfo.sysCultureName,value:t.cultureInfo.sysCultureId},customerId:e.CustomerId,version:e.ConfigurationVersion,userId:t.id,userType:this._getUserType(),accessType:t.accessType};this._pushVariables(n)}_getUserType(){return this.userInfo.isSSP?"External":"Employee"}_pushVariables(e){try{this._dataLayer.push(e)}catch(t){console.log(t.message)}}_initializeGoogleTagManager(e){e.UseGoogleTagManager&&(this._initializeScripts(e.GoogleTagManagerScript),this._initializeDataLayer(),this._enabled=!!this._dataLayer,this._enabled&&this._initializeDefaultVariables(e))}_executeInitialization(){const t=this.sysSettingsService.getByCodes(["UseGoogleTagManager","GoogleTagManagerScript","ProductName","ProductEdition","ConfigurationVersion","CustomerId"]);return t.pipe((0,Ne.s)(1)).subscribe(n=>{const a=n&&n.success&&n.values&&(0,ee.A)(n.values||{},r=>r.value);a&&this._initializeGoogleTagManager(a),this._initialized=!0}),t.pipe((0,E.T)(()=>{}))}_resetCustomData(e){const t={};for(const n of Object.keys(e))t[n]=void 0;this._pushVariables(t)}initialize(){return this._initialized?(0,h.of)(void 0):(this._initializationObservable$||(this._initializationObservable$=this._executeInitialization()),this._initializationObservable$)}track(e){this._enabled&&(this._pushVariables(Object.assign(e,{description:JSON.stringify(e.description),event:e?.event||"bpmonlineInfo",virtualUrl:location.href})),this._resetCustomData(e))}static{this.\u0275fac=function(t){return new(t||L)(i.\u0275\u0275inject(Se),i.\u0275\u0275inject(_.oqB))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:L,factory:L.\u0275fac,providedIn:"root"})}}class H{constructor(e){this._injector=e,this._handlerChain=c.HandlerChainService.instance,this._unsubscribesHandlers=[],this._registerHandlerChain()}_registerHandlerChain(){c.HandlerChainServicesRegistry.services.forEach((e,t)=>{(0,c.checkTypeNameFormat)(t,"HandlerChainServiceTypeName"),(0,c.checkCrtTypeNamePascalCase)(t);const n=class extends c.BaseRequestHandler{constructor(r){super(),this._innerInjector=r}handle(r){const p=this._innerInjector.get(e.typeRef)[r.method](...r.args);let f;return f=p instanceof Promise?p:p instanceof h.Observable?(0,h.lastValueFrom)(p,{defaultValue:null}):Promise.resolve(p),f}};this._unsubscribesHandlers.push(this._handlerChain.register({requestType:t,createHandler:()=>new n(this._injector),source:{type:c.HandlerSourceType.Host}}))})}ngOnDestroy(){this._unsubscribesHandlers.forEach(e=>e())}static{this.\u0275fac=function(t){return new(t||H)(i.\u0275\u0275inject(i.Injector))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:H,factory:H.\u0275fac})}}i.APP_INITIALIZER;var le=b(51807);let Je=class hh{constructor(e){this._http=e}_mapToCrtHttpHeaders(e){return e.keys().reduce((t,n)=>({...t,[n]:e.get(n)}),{})}get(e,t){return this._http.get(e,{...(0,le.A)(t,"headers","responseType"),observe:"response"}).pipe((0,E.T)(n=>({headers:this._mapToCrtHttpHeaders(n.headers),...(0,le.A)(n,"body","status","statusText","url","ok")})))}post(e,t,n){return this._http.post(e,t,{...(0,le.A)(n,"headers","responseType"),observe:"response"}).pipe((0,E.T)(a=>({headers:this._mapToCrtHttpHeaders(a.headers),...(0,le.A)(a,"body","status","statusText","url","ok")})))}put(e,t,n){return this._http.put(e,t,{...(0,le.A)(n,"headers","responseType"),observe:"response"}).pipe((0,E.T)(a=>({headers:this._mapToCrtHttpHeaders(a.headers),...(0,le.A)(a,"body","status","statusText","url","ok")})))}patch(e,t,n){return this._http.patch(e,t,{...(0,le.A)(n,"headers","responseType"),observe:"response"}).pipe((0,E.T)(a=>({headers:this._mapToCrtHttpHeaders(a.headers),...(0,le.A)(a,"body","status","statusText","url","ok")})))}delete(e,t){return this._http.delete(e,{...(0,le.A)(t,"headers","responseType","body"),observe:"response"}).pipe((0,E.T)(n=>({headers:this._mapToCrtHttpHeaders(n.headers),...(0,le.A)(n,"body","status","statusText","url","ok")})))}static{this.\u0275fac=function(t){return new(t||hh)(i.\u0275\u0275inject(F.HttpClient))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:hh,factory:hh.\u0275fac,providedIn:"root"})}};Je=(0,I.Cg)([(0,W.op)({requestType:"crt.HttpClientService"}),(0,I.Sn)("design:paramtypes",[F.HttpClient])],Je);let ze=class Bd extends En{constructor(){super(...arguments),this._destroyed$=new h.Subject,this._messageChannelService=(0,i.inject)(_.Awl),this.serviceEndpoint="ServiceModel/LicenseService.svc",this.getLicenseOperationStatuses=e=>this._getLicenseOperationStatuses(e,"GetLicOperationStatuses","GetLicOperationStatusesResult"),this.getExplicitLicenseOperationStatuses=e=>this._getLicenseOperationStatuses(e,"GetExplicitLicOperationStatuses","GetExplicitLicOperationStatusesResult"),this.loadLicenseOperationStatuses=e=>this._getLicenseOperationStatuses(e,"GetExplicitLicOperationStatuses","GetExplicitLicOperationStatusesResult")}_getLicenseOperationStatuses(e,t,n){return e?.length?this.executePostRequestWithCache(t,{licOperationCodes:e}).pipe((0,h.map)(a=>a?.[n]),(0,h.map)(a=>a?.success?a.licOperationStatuses.reduce((r,u)=>(r[u.Key]=u.Value,r),{}):{})):(0,h.of)({})}listenUnavailableLicenseInfo(){return this._messageChannelService.messageEvent$.pipe((0,h.filter)(e=>"UnavailableLicenseEventNotifier"===e.header.sender),(0,h.map)(e=>e.body),(0,h.takeUntil)(this._destroyed$))}getUnavailableLicenseInfo(){const e=this.serviceEndpoint+"/GetUnavailableLicOperations";return this.httpClient.post(e,null).pipe((0,h.map)(t=>t&&t.success?t.unavailableLicOperationsInfo:null),(0,ue.W)(()=>(0,h.of)(null)))}ngOnDestroy(){this._destroyed$.next()}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(Bd)))(n||Bd)}})()}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Bd,factory:Bd.\u0275fac,providedIn:"root"})}};ze=(0,I.Cg)([(0,W.op)({requestType:"crt.LicenseService"})],ze);new i.InjectionToken("CRT_UNAVAILABLE_LICENSE"),new i.InjectionToken("Represents a list of license restriction operation codes"),new i.InjectionToken("Represents a list of license restriction operation values");i.APP_INITIALIZER,i.APP_INITIALIZER;class Oa{constructor(e,t){this.queryExecutor=e,this.configurationDataService=t}_buildUrlWithCardModule(e,t,n){return window.location.origin+window.location.pathname+`#${e}/${t}/edit/${n}`}_getPageSchemaNameForRecord(e,t){const n=e?.pages;if(!n)return(0,h.of)(null);if(1===n.length){const a=n[0];return(0,h.of)(a)}return e.typeColumnName?this._getPageSchemaNameForRecordByType(e,t):(0,h.of)(n.find(a=>a.isDefault))}_getPageSchemaNameByType(e,t){const n=e?.pages;return n?1===n.length?n[0]:this._findPageByType(e,t):null}_getPageSchemaNameForRecordByType(e,t){return new h.Observable(n=>{this._getRecordTypeValue(e,t).subscribe(a=>{const r=this._findPageByType(e,a);n.next(r),n.complete()})})}_findPageByType(e,t){const n=e.pages;t="object"==typeof t?t.value:t;let a=n.find(r=>r.typeId===t);return(!a||!t)&&(a=n[0]),a}_getRecordTypeValue(e,t){return new h.Observable(n=>{const a=e.entitySchemaName,r=e.typeColumnName,u=new c.EntitySchemaQuery(a);u.rowCount=1,u.addSchemaColumn(r),u.filters.addSchemaColumnFilterWithParameter(c.ComparisonType.Equal,"Id",t),this.queryExecutor.executeSelectQuery(u).subscribe(p=>{const w=((p=p||[])[0]||{})[r].value;n.next(w),n.complete()})})}buildPageUrlByEntityName(e,t,n){const a=n.moduleStructure?.cardModule,u=this._getPageSchemaNameByType(n.entityStructure,t.typeId)?.cardSchemaName;return this._buildUrlWithCardModule(a,u,t.Id)}buildPageUrl(e,t){return new h.Observable(n=>{this.configurationDataService.getEntityData(e).subscribe(a=>{const r=a.data?.entityStructure;this._getPageSchemaNameForRecord(r,t).subscribe(u=>{const p=a.data?.moduleStructure?.cardModule,f=u?.cardSchemaName,S=this._buildUrlWithCardModule(p,f,t);n.next(S),n.complete()})})})}static{this.\u0275fac=function(t){return new(t||Oa)(i.\u0275\u0275inject(Ae),i.\u0275\u0275inject(Yt))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Oa,factory:Oa.\u0275fac})}}function Va(o){const e={};return e.uId=o.uId,e.name=o.name,e.caption={"en-US":o.caption||o.name},e.columns={Items:{}},o.columns.map(n=>{const a=function Mr(o){const e={};return e.uId=o.uId||(0,c.generateGuid)(),e.name=o.name,e.caption={"en-US":o.caption||o.name},e.usageType=o.usageType||_.K1D.General,e.dataValueType=o.dataValueType,e.referenceSchemaUId=o.referenceSchemaUId,e.referenceSchemaName=o.referenceSchemaName,e}(n);return n.isPrimaryColumn&&(e.primaryColumnUId=a.uId),n.isPrimaryDisplayColumn&&(e.primaryDisplayColumnUId=a.uId),a}).forEach(n=>{e.columns.Items[n.uId]=n}),e}const La="16be3651-8fe2-4159-8dd0-a803d4683dd3",Fa="Contact",ka="25d7c1ab-1de0-4501-b402-02e0e5a72d6e",ja="Account";Va({uId:La,name:Fa,columns:[{name:"Id",uId:"ae0e45ca-c495-4fe7-a39d-3ab7278e1617",usageType:_.K1D.Advanced,dataValueType:c.DataValueType.Guid,isPrimaryColumn:!0},{name:"Name",dataValueType:c.DataValueType.Text,uId:"a5cca792-47dd-428a-83fb-5c92bdd97ff8"},{name:"Caption",dataValueType:c.DataValueType.Text,isPrimaryDisplayColumn:!0,uId:"9e53fd7c-dde4-4502-a64c-b9e34148108c"},{name:"ProcessListeners",usageType:_.K1D.None,dataValueType:c.DataValueType.Integer},{name:"HomePhone",dataValueType:c.DataValueType.Text},{name:"Address",dataValueType:c.DataValueType.Text,uId:"0fb61bc8-a195-4d90-aecc-18b411b51814"},{name:"DoNotUseEmail",dataValueType:c.DataValueType.Boolean},{name:"DoNotUseFax",dataValueType:c.DataValueType.Boolean},{name:"DoNotUseMail",dataValueType:c.DataValueType.Boolean},{name:"DoNotUseCall",dataValueType:c.DataValueType.Boolean},{name:"TwitterId",dataValueType:c.DataValueType.Text,usageType:_.K1D.Advanced},{name:"GPSN",dataValueType:c.DataValueType.Text,usageType:_.K1D.Advanced},{name:"GPSE",dataValueType:c.DataValueType.Text,usageType:_.K1D.Advanced},{name:"BirthDate",dataValueType:c.DataValueType.Date,uId:"3f08db69-6d2f-4b1c-87a4-acddc6c3b9d6"},{name:"Account",uId:"5c6ca10e-1180-4c1e-8a50-55a72ff9bdd4",dataValueType:c.DataValueType.Lookup,referenceSchemaUId:ka,referenceSchemaName:ja},{name:"Owner",dataValueType:c.DataValueType.Lookup,referenceSchemaUId:La,referenceSchemaName:Fa},{name:"Skype",dataValueType:c.DataValueType.Text},{name:"Email",dataValueType:c.DataValueType.Text},{name:"DoNotUseSms",dataValueType:c.DataValueType.Boolean},{name:"JobTitle",dataValueType:c.DataValueType.Text},{name:"Phone",dataValueType:c.DataValueType.Text},{name:"MobilePhone",dataValueType:c.DataValueType.Text},{name:"Zip",dataValueType:c.DataValueType.Text},{name:"Surname",dataValueType:c.DataValueType.Text},{name:"Dear",dataValueType:c.DataValueType.Text},{name:"CreatedOn",caption:"Created on",dataValueType:c.DataValueType.DateTime,usageType:_.K1D.Advanced},{name:"ModifiedOn",caption:"Modified on",dataValueType:c.DataValueType.DateTime,usageType:_.K1D.Advanced}]}),Va({uId:ka,name:ja,columns:[{name:"Id",usageType:_.K1D.Advanced,dataValueType:c.DataValueType.Guid,isPrimaryColumn:!0},{name:"Name",dataValueType:c.DataValueType.Text},{name:"Caption",dataValueType:c.DataValueType.Text,isPrimaryDisplayColumn:!0},{name:"ProcessListeners",usageType:_.K1D.None,dataValueType:c.DataValueType.Integer},{name:"Phone",dataValueType:c.DataValueType.Text},{name:"Address",dataValueType:c.DataValueType.Text},{name:"Owner",dataValueType:c.DataValueType.Lookup,referenceSchemaUId:La,referenceSchemaName:Fa},{name:"Skype",dataValueType:c.DataValueType.Text},{name:"Email",dataValueType:c.DataValueType.Text},{name:"Fax",dataValueType:c.DataValueType.Text},{name:"Zip",dataValueType:c.DataValueType.Text},{name:"CreatedOn",caption:"Created on",dataValueType:c.DataValueType.DateTime,usageType:_.K1D.Advanced},{name:"ModifiedOn",caption:"Modified on",dataValueType:c.DataValueType.DateTime,usageType:_.K1D.Advanced}]}),Va({uId:"27AEADD6-D508-4572-8061-5B55B667C902",name:"SysSettings",columns:[{name:"Id",usageType:_.K1D.Advanced,dataValueType:c.DataValueType.Guid,isPrimaryColumn:!0},{name:"Name",dataValueType:c.DataValueType.Text,isPrimaryDisplayColumn:!0},{name:"Code",dataValueType:c.DataValueType.Text}]});class Ba extends Gt{constructor(e,t){super(null),this._values=e,this._defaultValue=t}_getFeatureState(e){return this._values?.[e]??this._defaultValue}getFeatureState(e){return(0,h.of)(this._getFeatureState(e))}getFeaturesState(e){return(0,h.of)(e.map(t=>this._getFeatureState(t)))}static{this.\u0275fac=function(t){i.\u0275\u0275invalidFactory()}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Ba,factory:Ba.\u0275fac})}}class wh{static{this.textCodeTwoFactorAuthFlow="SMS"}static{this.totpTwoFactorAuthFlow="TOTP"}static{this.recoveryCodeTwoFactorAuthFlow="RecoveryCode"}}class Hn{constructor(e){this._httpClient=e,this._url="/rest/GridUtilitiesService/DeleteRecordsAsync"}_getCommonPayloadParams(e){return{rootSchema:e.entitySchemaName,parameters:`{'operationKey':'${e.operationKey}'}`}}_deleteRecordsById(e){const t=this._getCommonPayloadParams(e);return t.primaryColumnValues=e.primaryColumnValues,this._httpClient.post(this._url,t)}_deleteRecordsByFilters(e){const t=this._getCommonPayloadParams(e);return t.filtersConfig=JSON.stringify(e.filters),this._httpClient.post(this._url,t)}deleteRecords(e){return(e.filters?this._deleteRecordsByFilters(e):this._deleteRecordsById(e)).pipe((0,E.T)(a=>{const r=JSON.parse(a.DeleteRecordsAsyncResult);return{error:r.ExceptionMessage,operationKey:r.OperationKey,success:r.Success}}),(0,ue.W)(a=>(0,h.of)({error:a?.message,operationKey:e.operationKey,success:!1})))}static{this.\u0275fac=function(t){return new(t||Hn)(i.\u0275\u0275inject(F.HttpClient))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Hn,factory:Hn.\u0275fac,providedIn:"root"})}}class mn{constructor(e,t){this._http=e,this._queryExecutor=t}_getPackageNames(){return this.getPackagesInfo().pipe((0,h.map)(e=>{const t={};return e.forEach(n=>t[n.UId]=n.Name),t}))}_getPackageTopologicalOrder(){return this._http.post("ServiceModel/ApplicationInfoService.svc/GetPackageHierarchyInfo",null).pipe((0,h.tap)(({success:t})=>{if(!t)throw new Error("GetPackageHierarchyInfo request is failed")}),(0,h.map)(t=>t.packageTopologicalOrder))}loadPackagesTopology(){return(0,h.forkJoin)([this._getPackageNames(),this._getPackageTopologicalOrder()]).pipe((0,h.map)(([e,t])=>{c.PkgTopology.items.clear(),t.reverse(),t.forEach((n,a)=>{const r=e[n];c.PkgTopology.items.set(r,a)})}))}getPackagesInfo(){if(this._packagesInfo$)return this._packagesInfo$;const e=new c.EntitySchemaQuery("SysPackage");return e.addSchemaColumn("Name"),e.addSchemaColumn("UId"),e.addSchemaColumn("Maintainer"),this._packagesInfo$=this._queryExecutor.executeSelectQuery(e).pipe((0,h.shareReplay)(1)),this._packagesInfo$}static{this.\u0275fac=function(t){return new(t||mn)(i.\u0275\u0275inject(F.HttpClient),i.\u0275\u0275inject(Ae))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:mn,factory:mn.\u0275fac,providedIn:"root"})}}i.APP_INITIALIZER,i.Injector;var vs;!function(o){o.DevExpress="DevExpress",o.Word="MS Word"}(vs||(vs={}));class $n{constructor(e,t,n){this._queryExecutor=e,this._httpClient=t,this._fileDownloaderService=n}_loadPrintables(){const e=new c.EntitySchemaQuery("SysModuleReport");return e.addSchemaColumn("Id"),e.addSchemaColumn("Caption"),e.addSchemaColumn("ConvertInPDF"),e.addSchemaColumn("ShowInCard"),e.addSchemaColumn("ShowInSection"),e.addSchemaColumn("SysEntitySchema.Name","SysEntitySchemaName"),e.addSchemaColumn("SysModule.SysModuleEntity.[SysSchema:UId:SysEntitySchemaUId].Name","SysModuleEntityName"),e.filters.addSchemaColumnFilterWithParameter(c.ComparisonType.Equal,"Type.Name",vs.Word),this._queryExecutor.executeSelectQuery(e).pipe((0,E.T)(t=>t.map(n=>n)))}_getPrintables(){return this._printables$||(this._printables$=this._loadPrintables()),(0,h.firstValueFrom)(this._printables$)}_filterEntityName(e,t){return e.SysEntitySchemaName===t||e.SysModuleEntityName===t}_getPrintablesList(e){var t=this;return(0,A.A)(function*(){const n=t._httpClient.post("rest/ReportService/CreateReportsList",e);return(yield(0,h.firstValueFrom)(n)).CreateReportsListResult})()}_getPrintablesListByFilter(e){var t=this;return(0,A.A)(function*(){const n=t._httpClient.post("rest/ReportService/CreateReportsListByFilter",e);return(yield(0,h.firstValueFrom)(n)).CreateReportsListByFilterResult})()}_downloadPrintables(e,t){e.forEach(n=>{this._fileDownloaderService.downloadFromUrl(`../rest/ReportService/GetReportFile/${n}`,t)})}getPrintablesForEntity(e){var t=this;return(0,A.A)(function*(){return e?(yield t._getPrintables()).filter(a=>t._filterEntityName(a,e)):[]})()}generatePrintables(e,t){var n=this;return(0,A.A)(function*(){const a=yield n._getPrintablesList(e);n._downloadPrintables(a,t)})()}generatePrintablesByFilter(e,t){var n=this;return(0,A.A)(function*(){const a=yield n._getPrintablesListByFilter(e);n._downloadPrintables(a,t)})()}static{this.\u0275fac=function(t){return new(t||$n)(i.\u0275\u0275inject(Ae),i.\u0275\u0275inject(F.HttpClient),i.\u0275\u0275inject(_.DG0))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:$n,factory:$n.\u0275fac})}}var Nc=b(45224);let Vo=class gh{constructor(e){this.httpClient=e,this.serviceEndpoint="ServiceModel/ProcessEngineService.svc/"}_executePost(e,t){const n=this.serviceEndpoint+t;return this.httpClient.post(n,e)}_getRequestSortingColumns(e){return e?Object.entries(e).map(([n,a],r)=>({path:n,direction:(0,c.toOrderDirection)(a),position:r})):[]}createProcessParameterValues(e){const t=[];return e&&Object.entries(e).forEach(([n,a])=>{let r=a;(0,Nc.A)(a)&&(r=(0,c.encodeDate)(a)),t.push({name:n,value:r})}),t}executeProcessByName(e,t,n){const a={schemaName:e,parameterValues:this.createProcessParameterValues(t),resultParameterNames:n};return this._executePost(a,"RunProcess")}executeProcessForMatchingRecords(e){const t={schemaName:e.processName,inputParameterName:e.inputParameterName,entitySchemaName:e.entitySchemaName,filterConfig:JSON.stringify(e.filterConfig),isSupportMultiplePageOpening:!1,sortingColumns:this._getRequestSortingColumns(e.sortingColumns)};return this._executePost(t,"RunProcessForMatchingRecords")}completeExecuting(e,t){const n={processElementUId:e,parameterValues:this.createProcessParameterValues(t)};return this._executePost(n,"CompleteExecuting")}changeToAppropriateDcmInstance(e,t,n){const a={currentStageId:e,entitySchemaName:t,recordId:n};return this._executePost(a,"ChangeToAppropriateDcmInstance")}static{this.\u0275fac=function(t){return new(t||gh)(i.\u0275\u0275inject(F.HttpClient))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:gh,factory:gh.\u0275fac,providedIn:"root"})}};Vo=(0,I.Cg)([(0,W.op)({requestType:"crt.ProcessEngineService"}),(0,I.Sn)("design:paramtypes",[F.HttpClient])],Vo);var Ar=b(29488);class Is{constructor(e){this.httpClient=e,this.serviceEndpoint="DataService/json/SyncReply/"}_parseProcessSchemaMetadata(e){return JSON.parse(e)}_convertStringSchemaMetadataToObject(e){const t=this._parseProcessSchemaMetadata(e.schema.metaData);return(0,Ar.A)(e,"schema.metaData",t),e}getProcessSchemaData(e){const t=this.serviceEndpoint+"ProcessSchemaRequest";return this.httpClient.post(t,{uId:e,packageUId:null,convertLocalizableStringToParameter:!0}).pipe((0,E.T)(n=>this._convertStringSchemaMetadataToObject(n)))}static{this.\u0275fac=function(t){return new(t||Is)(i.\u0275\u0275inject(F.HttpClient))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Is,factory:Is.\u0275fac,providedIn:"root"})}}class Ts{constructor(e){this._sharingContext=e,this._loadedContainers={},this._initializedRemotes={},this._initializedShareScopes={}}_lookupExposedModule(e,t){var n=this;return(0,A.A)(function*(){return(yield n._loadedContainers[e].get(t))()})()}_initRemote(e,t,n){var a=this;return(0,A.A)(function*(){a._initializedRemotes[t]||(a._initializedShareScopes[n]||(yield a._sharingContext.initSharing(n),a._initializedShareScopes[n]=!0),yield e.init(a._sharingContext.shareScopes[n]),a._initializedRemotes[t]=!0)})()}_loadRemoteScriptEntry(e,t,n){return new Promise((a,r)=>{if(this._loadedContainers[t])return void a();const u=document.createElement("script");u.src=e,u.onerror=r,u.onload=()=>{const p=window[t];this._initRemote(p,t,n),this._loadedContainers[t]=p,a()},document.body.appendChild(u)})}_loadRemoteModuleEntry(e,t){var n=this;return(0,A.A)(function*(){if(n._loadedContainers[e])return Promise.resolve();yield function Pr(o){return import(o)}(e).then(a=>{n._initRemote(a,e,t),n._loadedContainers[e]=a})})()}load(e){var t=this;return(0,A.A)(function*(){let n;return e.remoteEntryType===c.RemoteEntryType.Module?(yield t._loadRemoteModuleEntry(e.remoteEntry,e.shareScope),n=e.remoteEntry):(yield t._loadRemoteScriptEntry(e.remoteEntry,e.remoteName,e.shareScope),n=e.remoteName),t._lookupExposedModule(n,e.exposedModule)})()}}class Ds{get _requirejs(){return this._requireJsProvider.get()}constructor(e,t,n,a,r){this._requireJsProvider=e,this._window=t,this._injector=n,this._remoteEntryLoader=a,this._ngZone=r,this._fileContentUrlBuilder=(0,i.inject)(_.j8w),this._descriptorsKey="_FileContentDescriptors",this._requestUrl=`conf/content/${this._descriptorsKey}`,this._remoteEntryTypes=new Map([["remoteEntry.js",c.RemoteEntryType.Script],["remoteModuleEntry.js",c.RemoteEntryType.Module]]),this._bootstrappingWaitTime=1e4,this._loaded$=new h.BehaviorSubject(!1),this.loaded$=this._loaded$.asObservable()}_setupConfig(e){if(this._requirejs.specified(this._descriptorsKey))return;let t=this._requestUrl;e&&(t+=".js?hash="+e),this._requirejs.config({baseUrl:(0,_.cIr)(),paths:{[this._descriptorsKey]:t}})}_isRemoteEntry(e){return this._remoteEntryTypes.has(e)}_getRemoteEntryType(e){return this._remoteEntryTypes.get(e)}_getRemoteBuildsInfo(e){const t=[],n=this._injector.get(_.vpk);return Object.keys(n.descriptors).forEach(a=>{const r=a.split("/"),u=r.at(-1);if(!this._isRemoteEntry(u))return;const p=r.at(0),f=r.at(-2),S=r.slice(1).join("/"),w=this._fileContentUrlBuilder.getUrl(p,S,e),O=this._getRemoteEntryType(u),$=this._packagesInfo.find(Fe=>Fe.Name===p).Maintainer,te=O===c.RemoteEntryType.Script?"./RemoteEntry":"./Main";t.push({name:f,entry:w,entryType:O,mainModule:te,packageName:p,maintainer:$})}),t}_loadDescriptors(){return new h.Observable(e=>{this._requirejs([this._descriptorsKey],()=>{e.next(),e.complete()},t=>{console.warn(t),e.next(),e.complete()})})}_loadRemoteBuild(e){return(0,h.defer)(()=>this._ngZone.runOutsideAngular(()=>this._remoteEntryLoader.load({remoteName:e.name,remoteEntry:e.entry,remoteEntryType:e.entryType,shareScope:e.maintainer,exposedModule:e.mainModule})))}_onTimeout(e,t){console.error(`${e} modules did not bootstrap in ${t/1e3} seconds. Please ensure that you called bootstrapCrtModule function inside your project.`)}_onLoadingError(e){console.error(e),console.error("Please ensure the remote module name and file content directory name are the same in the snake_case.")}_listenBootstraps(){return new h.Observable(e=>c.BootstrapNotifier.instance.subscribe(()=>e.next()))}_loadRemoteEntries(e){if(0===e.length)return(0,h.of)(null);let t=e.length;const n=this._listenBootstraps(),a=new h.Subject,r=e.map(S=>this._loadRemoteBuild(S).pipe((0,h.catchError)(w=>(this._onLoadingError(w),a.next(w),(0,h.of)(null))))),u=(0,h.forkJoin)(r).pipe((0,h.tap)(()=>a.complete()),(0,h.map)(()=>{})),p=(0,h.merge)(n,a).pipe((0,h.tap)(()=>t--),(0,h.first)(()=>0===t)),f=u.pipe((0,h.delay)(this._bootstrappingWaitTime),(0,h.tap)(()=>this._onTimeout(t,this._bootstrappingWaitTime)));return(0,h.merge)(p,f).pipe((0,h.first)())}load(e){return this._setupConfig(e),this._loadDescriptors().pipe((0,h.switchMap)(()=>this._injector.get(mn).getPackagesInfo()),(0,h.tap)(t=>this._packagesInfo=t),(0,h.map)(()=>this._getRemoteBuildsInfo(e)),(0,h.tap)(t=>t.forEach(n=>c.RemoteEntriesRegistry.items.set(n.name,n))),(0,h.switchMap)(t=>this._loadRemoteEntries(t)),(0,h.tap)(()=>this._loaded$.next(!0)),(0,h.catchError)(t=>(console.log(t),(0,h.of)(null))))}ngOnDestroy(){this._loaded$.complete()}static{this.\u0275fac=function(t){return new(t||Ds)(i.\u0275\u0275inject(_.avn),i.\u0275\u0275inject(W.ZP),i.\u0275\u0275inject(i.Injector),i.\u0275\u0275inject(Ts),i.\u0275\u0275inject(i.NgZone))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Ds,factory:Ds.\u0275fac,providedIn:"root"})}}i.APP_INITIALIZER,_.myf,_.fvr;class wi{constructor(e,t){this._httpClient=e,this._queryExecutor=t,this._serviceEndpoint="ServiceModel/SchemaInfoService.svc",this._featureValues=(0,i.inject)(_.G2Y,{optional:!0})}_getExtendParentResponse(e){const t=new c.EntitySchemaQuery("SysSchema");return t.addSchemaColumn("[SysSchema:Id:Parent].UId","UId"),t.filters.addSchemaColumnFilterWithParameter(c.ComparisonType.Equal,"UId",e),t.filters.addSchemaColumnFilterWithParameter(c.ComparisonType.Equal,"ExtendParent",!0),(0,h.lastValueFrom)(this._queryExecutor.executeSelectQuery(t))}_getCaptionResponse(e){if(this._featureValues?.DisableUseSchemaInfoService){const n=new c.EntitySchemaQuery("SysSchema");return n.addSchemaColumn("=[VwSysSchemaExtending:BaseSchemaId:Id].[SysSchema:Id:TopExtendingSchemaId].Caption","Caption"),n.filters.addSchemaColumnFilterWithParameter(c.ComparisonType.Equal,"Name",e),(0,h.lastValueFrom)(this._queryExecutor.executeSelectQuery(n))}const t=`${this._serviceEndpoint}/GetSchemaCaption`;return(0,h.lastValueFrom)(this._httpClient.post(t,{schemaName:e}))}getSchemaUIdByName(e){var t=this;return(0,A.A)(function*(){if(!e)return"";const n=new c.EntitySchemaQuery("SysSchema");n.addSchemaColumn("UId"),n.filters.addSchemaColumnFilterWithParameter(c.ComparisonType.Equal,"Name",e),n.filters.addSchemaColumnFilterWithParameter(c.ComparisonType.Equal,"ExtendParent",!1);const a=yield(0,h.lastValueFrom)(t._queryExecutor.executeSelectQuery(n));return a.errorInfo?(console.error(a.errorInfo.message),""):a[0]?.UId})()}getSchemaCaptionByName(e){var t=this;return(0,A.A)(function*(){if(!e)return"";const n=yield t._getCaptionResponse(e);return n.errorInfo?(console.error(n.errorInfo.message),""):n?.caption||n[0]?.Caption})()}getExtendSchemaParentUIdByUId(e){var t=this;return(0,A.A)(function*(){if(!e)return"";const n=yield t._getExtendParentResponse(e);return n.errorInfo?(console.error(n.errorInfo.message),""):n[0]?.UId})()}static{this.\u0275fac=function(t){return new(t||wi)(i.\u0275\u0275inject(F.HttpClient),i.\u0275\u0275inject(Ae))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:wi,factory:wi.\u0275fac,providedIn:"root"})}}class Ga{constructor(e){this._messageChannelService=e}getNotifications(e,t){return this._messageChannelService.messageEvent$.pipe((0,h.filter)(n=>n.header.sender===e&&(void 0===t||n.body?.operationId===t)),(0,h.map)(n=>n.body.body))}static{this.\u0275fac=function(t){return new(t||Ga)(i.\u0275\u0275inject(_.Awl))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Ga,factory:Ga.\u0275fac,providedIn:"root"})}}class Ms extends _.XhC{constructor(e){super(),this._injector=e,this._currentThemeProfileKey="CurrentTheme",this._userSchemaProfileService=this._injector.get(An),this._featureService=this._injector.get(c.FeatureService),this._defaultTheme=this._injector.get(_.SS4)}getCurrentTheme(){return(0,h.from)(this._featureService.getFeatureState("ChangeTheme")).pipe((0,z.n)(e=>e?this._userSchemaProfileService.getProfile(this._currentThemeProfileKey):(0,h.of)([])),(0,E.T)(e=>Array.isArray(e)?e?.pop():void 0),(0,E.T)(e=>e??this._defaultTheme))}static{this.\u0275fac=function(t){return new(t||Ms)(i.\u0275\u0275inject(i.Injector))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Ms,factory:Ms.\u0275fac})}}class Nr{constructor(e,t){this.httpClient=e,this._serviceGetProfileEndpoint=`${t}/QueryProfile`,this._serviceSaveProfileEndpoint=`${t}/UserProfile`}_innerSaveProfile(e,t,n){const{requirejs:a,require:r}=window;r?.defined("profile")&&r("profile").addKey(e);const u={key:e,data:JSON.stringify(t)};return n&&(u.isDef=!0),a?.undef("profile!"+e),this.httpClient.post(this._serviceSaveProfileEndpoint,u).pipe((0,E.T)(p=>p))}getProfile(e){return this.httpClient.post(this._serviceGetProfileEndpoint,{key:e})}saveProfile(e,t){return this._innerSaveProfile(e,t,!1)}saveDefaultProfile(e,t){return this._innerSaveProfile(e,t,!0)}static{this.\u0275fac=function(t){return new(t||Nr)(i.\u0275\u0275inject(F.HttpClient),i.\u0275\u0275inject(_.otV))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Nr,factory:Nr.\u0275fac,providedIn:"root"})}}class Lo{getProfile(e){const t=localStorage.getItem(e);return(0,h.of)(JSON.parse(t))}saveProfile(e,t){return localStorage.setItem(e,JSON.stringify(t)),(0,h.of)(t)}saveDefaultProfile(e,t){return localStorage.setItem(e,JSON.stringify(t)),(0,h.of)(t)}static{this.\u0275fac=function(t){return new(t||Lo)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Lo,factory:Lo.\u0275fac})}}let Ud=[];_.Vvc;class qn{constructor(e){this.httpClient=e,this._destroyed$=new h.Subject,this._whiteListUrl="/rest/ACLService/GetWhitelist"}loadWhitelist(){return this.httpClient.get(this._whiteListUrl).pipe((0,E.T)(e=>(Ud=[...e],e)),(0,ue.W)(()=>(0,h.of)(null)),(0,_e.Q)(this._destroyed$))}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}static{this.\u0275fac=function(t){return new(t||qn)(i.\u0275\u0275inject(F.HttpClient))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:qn,factory:qn.\u0275fac,providedIn:"root"})}}i.APP_INITIALIZER,i.Injector;class Wn{constructor(e){this._userInfo=e.get(_.oqB),this._queryExecutor=e.get(Ae)}_mapToUserConsent(e,t){return{id:e.Id,dateOfConsent:e.CreatedOn,expirationDate:e.ExpirationDate,consentId:t}}getConsent(e){const t=new c.EntitySchemaQuery("Consent");return t.addSchemaColumn("Id"),t.addSchemaColumn("Name"),t.addSchemaColumn("ConsentText"),t.filters.addSchemaColumnFilterWithParameter(c.ComparisonType.Equal,"Code",e),this._queryExecutor.executeSelectQuery(t).pipe((0,E.T)(n=>{if(n&&n.length>0){const a=n[0];return{id:a.Id,consentText:a.ConsentText,name:a.Name,code:e}}return null}),(0,ue.W)(()=>{throw new Error("Error while getting user consent status")}))}getUserConsent(e,t){const n=new c.EntitySchemaQuery("UserConsentHistory");return n.addSchemaColumn("Id"),n.addSchemaColumn("CreatedOn"),n.addSchemaColumn("ExpirationDate"),n.filters.addSchemaColumnFilterWithParameter(c.ComparisonType.Equal,"ConsentCode",e),n.filters.addSchemaColumnFilterWithParameter(c.ComparisonType.Equal,"CreatedBy",t??this._userInfo.contactId),this._queryExecutor.executeSelectQuery(n).pipe((0,E.T)(a=>{if(!a.length)return null;if(a.some(u=>!!u.ExpirationDate)){const u=new Date,p=a.find(f=>{const S=f.ExpirationDate;return S&&new Date(S)>u});return p?this._mapToUserConsent(p,e):null}{const u=a[0];return this._mapToUserConsent(u,e)}}),(0,ue.W)(()=>{throw new Error("Error while getting user consent status")}))}giveUserConsent(e,t){return this.getConsent(e).pipe((0,Y.Z)(n=>n?this.getUserConsent(n.id).pipe((0,Y.Z)(a=>{if(!a){const r=new c.InsertQuery("UserConsentHistory");return r.addColumn("ConsentCode",n.id,c.DataValueType.Lookup),t&&r.addColumn("ExpirationDate",t,c.DataValueType.DateTime),(0,h.from)(this._queryExecutor.executeInsertQuery(r)).pipe((0,E.T)(()=>{}))}return(0,h.of)(void 0)})):(0,h.of)(void 0)))}static{this.\u0275fac=function(t){return new(t||Wn)(i.\u0275\u0275inject(i.Injector))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Wn,factory:Wn.\u0275fac})}}var ce=b(37222),be=b(26182),Ve=b(98961),mt=b(28498),he=b(14401),ve=b(73772),Ue=b(61971),Ei=b(58292),Ht=b(44933),Es=b(68351),nt=b(93769),_t=b(98278),St=b(52839),ui=b(56228),ra=b(97800),Xt=b(55837),hn=b(37974),di=b(50438),xi=b(66566),oa=b(45202),Or=b(31704),xs=b(39959),Be=b(9204),Mt=b(3126);function Ai(o,e=!1){return{macrosName:"PrimaryDataSourceName",macrosHandler:t=>{if(!t)throw new Error("Context is not defined");const n=e?o.getPrimaryDataSourceName():t.modelConfig.primaryDataSourceName;return(0,h.of)(n)}}}function Vr(o=!1,e){return{macrosName:"DataSourceModuleCaption",macrosHandler:(t,n)=>(0,_.vQX)(o).macrosHandler(t,n).pipe((0,z.n)(u=>e.getEntityData(u)),(0,E.T)(u=>u?.data?.moduleStructure?.moduleCaption))}}var Ge=b(15922),Ye=b(80841),Ri=b(50587),la=b(72319),As=b(77629),He=b(68642);const ca='Required parameter "{0}" not found in object',Pi='Instead of the "{0}" parameter, use "{1}',Fr='Item with value "{0}" of the "name" parameter already exists';function Jn(o,e,t){let n=!0;return(0,Ge.A)(o,(a,r)=>{if((0,Ye.A)(a)||(0,ye.A)(a)){const u=(0,Ye.A)(a)?a:[a];(0,Ge.A)(u,p=>{if(!Qe.isItemConfig(u[0]))return!1;const f=!1!==Jn(p,e,t),S={item:p,propertyName:r,parent:o,childIterationResult:f};return n=!1!==e.call(t,S)&&f})}return n}),n}class Qe{constructor(){this.features=(0,i.inject)(_.G2Y,{optional:!0}),this.properties={alias:{name:"name"}},this.sourceObject=null,this.operationsOptions=null,this._memoryStore=new Map,this._operationRequiredParameters={insert:[],set:["name","values"],merge:["name","values"],move:["name"],remove:["name"]},this._operationParameterName="operation",this._aliases=null,this.checkOperationNameRequiredParameters=!0}static isEmpty(e){return null==e||""===e||(0,Ye.A)(e)&&0===e.length}static isItemConfig(e){return(0,ye.A)(e)&&!Qe.isEmpty(e.name)}iterateChildItems(e,t,n){return Jn(e,t,n)}_isEmptyObject(e){return!e||0===Object.keys(e).length}_removeFromCache(e){this.iterateChildItems(e,function(t){const n=t.item;this._memoryStore.delete(n.name)},this),this._memoryStore.delete(e.name)}_findItemInfo(e,t){if(Qe.isEmpty(e))return null;const n=this._memoryStore.get(e);if(n)return n;const a=this._aliases,r=a&&a[e],u=r&&r.name;let p=null;return this.iterateChildItems(t,function(f){const S=f.item,w=u&&S[this.properties.alias.name]===u,O=S[this.properties.alias.name]===e||w;if(!f.childIterationResult||O){const te={item:S,parentName:f.parent[this.properties.alias.name],parentPath:f.parentPath,propertyName:f.propertyName};this._memoryStore.set(S[this.properties.alias.name],te),O&&(p=te)}return!O},this),p}_findItemInfoInSourceObject(e){const t={items:this.sourceObject};return this._findItemInfo(e,t)}_checkRequiredParameters(e,t){Qe.isEmpty(t)||(0,Ge.A)(t,n=>{if(!e[n]){const a=He.Qf.format(ca,n);throw new Error(a)}})}_getSplittedOperations(e){const t={merge:[],set:[],removeProperties:[],remove:[],move:[],insert:[]};return(0,Ge.A)(e,n=>{this._checkOperation(n);const a=n.operation;if(!this._isExcludeAliasOperation(n.name,a,n.properties))switch(a){case"merge":t.merge.push(n);break;case"set":t.set.push(n);break;case"insert":t.insert.push(n);break;case"move":t.move.push(n);break;case"remove":{const{properties:r}=n;r&&(0,Ye.A)(r)?t.removeProperties.push(n):t.remove.push(n);break}}}),t}_convertMoveOperationToRemove(e){let t={};const n=e.name,a=(0,Z.A)(this._findItemInfoInSourceObject(n));return a&&(t={parentName:a.parentName||a.nameTo,parentPath:a.parentPath,propertyName:a.propertyName,index:a.propertyName,operation:"remove",name:n}),t}_convertMoveOperationToInsert(e){let t={};const n=e.name,a=(0,Z.A)(this._findItemInfoInSourceObject(n));if(a){const r={values:a.item,operation:""};delete r.values.name,Object.assign(r,e),r.operation="insert",t=r}return t}_applyOperations(e){const t=this._getSplittedOperations(e);this._applyOperationGroup(this._merge,t.merge),this._applyChangePositionOperationGroup(t.remove,t.insert,t.move),this._applyOperationGroup(this._remove,t.removeProperties),this._applyOperationGroup(this._set,t.set)}_applyChangePositionOperationGroup(e,t,n){n=this._filterMoveOperation(e,n),e=e.concat(n);let a=[];(0,Ge.A)(e,f=>{const S=this._convertMoveOperationToRemove(f);this._isEmptyObject(S)?console.log("Element "+f.name+" was not moved."):a.push(S)}),a=this._getOperationsSequenceByPath(a,!1);const r=[],u=this._getObjectNameOperationsGroup(n);(0,Ge.A)(a,f=>{const S=u[f.name];(0,Ye.A)(S)&&S.forEach(w=>{const O=this._convertMoveOperationToInsert(w);this._isEmptyObject(O)?console.log("Element "+w.name+" was not moved."):r.push(O)}),this._remove(f)}),t=t.concat(r),t=this._getOperationsSequenceByPath(t,!0);const p=this._applyOperationGroup(this._insert,t);(0,Ye.A)(p)&&p.length>0&&this._applyUnsuccessfulInsertOperationGroup(p)}_applyUnsuccessfulInsertOperationGroup(e){e.forEach((t,n)=>{t.operation="move",this._findItemInfoInSourceObject(t.parentName)||e.splice(n,1)}),e.length>0&&this._applyChangePositionOperationGroup([],[],e)}_applyOperationGroup(e,t){const n=[];return(0,Ge.A)(t,a=>{e.call(this,a)||n.push(a)}),n}_getObjectNameOperationsGroup(e){const t={};return e.forEach(n=>{const a=n.name;t[a]=t[a]||[],t[a].push(n)}),t}_getOperationHierarchy(e){const t={};return e.forEach(n=>{const a=n.name,r=n.parentName||"_",u=n.propertyName||"_";t[a]={parentName:r,propertyName:u}}),t}_getOperationItemRelativePath(e,t,n=""){let a=n;if(t[e]){const r=t[e].parentName;a=r+"="+t[e].propertyName+"=="+a,a=this._getOperationItemPath(r,t,a)}return a}_getOperationItemFullPath(e,t,n=""){let a=n,r=t[e];if(r||(r=this._findItemInfoInSourceObject(e)),r){const u=r.parentName,p=r.propertyName;u&&(a=u+"="+p+"=="+a,a=this._getOperationItemPath(u,t,a))}return a}_getOperationItemPath(e,t,n=""){return!this.features?.DisableApplyMoveIfIndirectParentMoved&&this.operationsOptions?.applyMoveIfIndirectParentMoved?this._getOperationItemFullPath(e,t,n):this._getOperationItemRelativePath(e,t,n)}_addOperationItemPathInfo(e){const t=[],n=this._getOperationHierarchy(e);return e.forEach(a=>{a.__path=this._getOperationItemPath(a.name,n),t.push(a)}),t}_getOperationPathGroupsInfo(e,t){const n=t?1:-1,a={},r=[];return e.forEach(u=>{const p=u.__path;a[p]=a[p]||[],a[p].push(u),(0,Ri.A)(r,p)||r.push(p)}),{groups:a,order:r.sort(function(u,p){let f;return f=u.length===p.length?0:u.length>p.length?n:-1*n,f})}}_getOperationsSequenceByPath(e,t){e=this._addOperationItemPathInfo(e);const n=this._getOperationPathGroupsInfo(e,t),a=n.order,r=n.groups;let u=[];return a.forEach(p=>{const f=(0,la.A)(r[p],"index");t||f.reverse(),u=u.concat(f)}),u}_saveAlias(e){if(Qe.isEmpty(e.alias))return;const t=(0,Z.A)(e),n=t.alias;Qe.isEmpty(this._aliases)&&(this._aliases={});const a=n.name;n.name=t.name,this._aliases[a]=n}_resetAliases(){this._aliases=null}_excludeAliasProperties(e,t){let n=Object.keys(t);const a=this._aliases&&this._aliases[e],r=a&&a.excludeProperties;return r&&(n=(0,As.A)(n,r)),n}_isExcludeAliasOperation(e,t,n){if(n&&"remove"===t)return!1;const a=this._aliases&&this._aliases[e],r=a&&a.excludeOperations;return(0,Ri.A)(r,t)}findInsertItemInfo(e){const t=e.parentName;return this._findItemInfoInSourceObject(t)}_insert(e){let t=e.parentName;const n=e.name;e.nameTo&&(console.error(He.Qf.format(Pi,"nameTo","parentName")),t=e.nameTo);const a=this.findInsertItemInfo(e),r=!(!a&&e.parentName),u=e.values||{};this._saveAlias(e);const p=this.findInsertItemParent(a,e);if(Qe.isEmpty(n)?console.warn(He.Qf.format('The "{0}" parameter should no longer contain "{1}"',"nameTo","parentName")):Object.assign(u,{[this.properties.alias.name]:n}),(0,Ye.A)(p)){const f=Qe.isEmpty(e.index)?p.length:e.index;p.splice(f,0,u)}else{if(!(0,ye.A)(p))throw new Error(He.Qf.format('Item "{0}" is not a container for other items',t));a.item[e.propertyName]=u}return r}findInsertItemParent(e,t){return null===e?this.sourceObject:e.item[t.propertyName]}_set(e){let t=e.parentName;e.nameTo&&(console.error(He.Qf.format(Pi,"nameTo","parentName")),t=e.nameTo);const n=this._remove(e),a=!Qe.isEmpty(n);return a&&(e.index=n.index,e.nameTo=t,e.parentName=t,e.propertyName=n.propertyName),this._insert(e),a}findMergeOrRemoveItemInfo(e){return this._findItemInfoInSourceObject(e.name)}_merge(e){const t=this.findMergeOrRemoveItemInfo(e),n=!Qe.isEmpty(t);if(n){(0,Ge.A)(t.item,(r,u)=>{const p=(0,Ye.A)(r)?r[0]:r;if(Qe.isItemConfig(p)&&e.values.hasOwnProperty(u)){const f=He.Qf.format('Item "{0}" should not contain parameter "{1}"',e.name,u);console.warn(f),delete e.values[u]}});const a=this._excludeAliasProperties(e.name,e.values);(0,Ge.A)(a,r=>{t.item[r]=e.values[r]})}return n}findRemoveParentItemInfo(e,t){return this._findItemInfoInSourceObject(e)}_remove(e){let t={};const n=this.findMergeOrRemoveItemInfo(e);if(Qe.isEmpty(n))return null;const a=e.properties;if(a&&(0,Ye.A)(a)){const r=n.item;a.forEach(u=>{delete r[u]})}else{const r=n.item;let u=n.parentName;n.nameTo&&(console.error(He.Qf.format(Pi,"nameTo","parentName")),u=n.nameTo);const p=this.findRemoveParentItemInfo(u,n),f=p?p.item[n.propertyName]:this.sourceObject;let S=0;(0,Ye.A)(f)?(S=f.indexOf(r),f.splice(S,1)):delete p.item[n.propertyName],this._removeFromCache(r),t={index:S,item:r,nameTo:u,parentName:u,propertyName:n.propertyName}}return t}_checkOperation(e){const t=e.name,n=e.parentName;if(!Qe.isEmpty(t)&&n===t)throw new Error(He.Qf.format('Cyclic dependency exists for object "{0}". The parentName parameter cannot be equal to name',t));if(this._checkRequiredParameters(e,[this._operationParameterName]),this.checkOperationNameRequiredParameters){const a=e[this._operationParameterName];this._checkRequiredParameters(e,this._operationRequiredParameters[a])}}_filterMoveOperation(e,t){return(0,Ge.A)(e,n=>{t=t.filter(a=>n.name!==a.name)}),t}apply(e,t,n){let a;this.sourceObject=(0,Z.A)(e),this.operationsOptions=n,Qe.isEmpty(e)&&this._resetAliases();try{const r=(0,Z.A)(t);this._applyOperations(r),a=this.sourceObject}finally{this.sourceObject=null,this.operationsOptions={},this._memoryStore.clear()}return a}applyDiff(e,t,n=[]){let a=[...e];for(let r=0;r<t.length;r++){const u=t[r],p=n[r];a=this.apply(a,u,p)}return a}static{this.\u0275fac=function(t){return new(t||Qe)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Qe,factory:Qe.\u0275fac})}}var Pe,Oc=b(25782),ua=b(34975),pi=b(64619),da=b(1683);!function(o){o[o.INSERT=1]="INSERT",o[o.REMOVE=2]="REMOVE",o[o.MERGE=3]="MERGE",o[o.REMOVE_PROPERTY=4]="REMOVE_PROPERTY",o[o.CHANGE_POSITION=5]="CHANGE_POSITION",o[o.MOVE=6]="MOVE"}(Pe||(Pe={}));class Ni{constructor(){this._patch=null,this.objectProperties={parent:"parentName",parentPropertyName:"propertyName",index:"index",operationalName:"__operationalName",name:"name",root:"__root",patchDiffNodeTypeSymbol:"_t",initialId:"__initialId"},this.pathDelimiter="(#@",this.moveOperationProperties=["parentName","propertyName","index","__initialId"],this.flatIndexForObjects=!0;const e=Oc.create({objectHash:function(t,n){return(0,ua.A)(t.name)?t.name:"$$index:"+n}});this._patch=e}isEmpty(e){return null==e||""===e||(0,Ye.A)(e)&&0===e.length}needFlatten(e,t){let n=t||!1;return n=!this.isEmpty(e?.name),n||((0,Ye.A)(e)&&e.length>0?n=!this.isEmpty(e[0].name):(0,pi.A)(e)&&(0,Ge.A)(e,a=>{n=this.needFlatten(a,n)})),n}_getFlattenObjectKey(e,t,n){return n&&n.identifyItemByPath?e:t}_flattenObject(e,t,n,a,r,u){let S,p=t||{},f=n||"";if(this.isEmpty(e))p=null;else if((0,Ye.A)(e))for(let w=0,O=e.length;w<O;w++)S=this._getFlattenObjectKey(f,n,u),this._flattenObject(e[w],p,S,w,r,u);else{const w=(0,Z.A)(e),O=w.name,$=this.isEmpty(f)?"{1}":"{0}{1}";if(f+=He.Qf.format($,this.pathDelimiter,O),S=this._getFlattenObjectKey(f,O,u),this.isEmpty(S))throw new Error(He.Qf.format(ca,this.objectProperties.name));this.checkIfItemAlreadyExist(p,S,w),delete w.name,this.isEmpty(n)||(w.parentName=n),this.isEmpty(a)||(w.index=a),this.isEmpty(r)||(w.propertyName=r);const te=[],Fe=[];(0,Ge.A)(w,(Me,ai)=>{if(Me&&this.needFlatten(Me)){te.push(Me),Fe.push(ai);const Rt=w[ai];w[ai]=(0,Ye.A)(Rt)?[]:{}}}),p[S]=w;const ke=te.length;if(ke>0)for(let Me=0;Me<ke;Me++){const ai=(0,Ye.A)(e)||this.flatIndexForObjects?Me:null;this._flattenObject(te[Me],p,S,ai,Fe[Me],u)}}return p}checkIfItemAlreadyExist(e,t,n){const a=n.name;if(e[t])throw new Error(He.Qf.format(Fr,a))}_includeObjectOperations(e,t){let n=e||[];return t===Pe.REMOVE?n=[Pe.REMOVE]:this._include(n,t),n}_include(e,t){e.includes(t)||e.push(t)}_getObjectCollectionPropertyNames(e,t){const n=t||{},a=this.objectProperties,r=a.parentPropertyName,u=a.parent;return(0,Ge.A)(e,p=>{const f=p[r],S=p[u];!this.isEmpty(S)&&!this.isEmpty(f)&&(n[S]=n[S]||[],this._include(n[S],f))}),n}_getCollectionPropertyNames(){const e=this.operationalValues,t=e.flatPrimaryObject,n=e.flatModifiedObject;let a={};return a=this._getObjectCollectionPropertyNames(t,a),a=this._getObjectCollectionPropertyNames(n,a),a}getObjectOperations(e){const t=this.objectProperties,n=this.operationalValues.primaryObject,a=this.operationalValues.modifiedObject,r=this.operationalValues.flatModifiedObject,u=this.operationalValues.flatDelta,p=(0,Z.A)(a);this._addOperationalNames(p);const f=this.makeDiff(n,p);let S={};const w=this._getCollectionPropertyNames();return(0,Ge.A)(u,(O,$)=>{this.isAdded(O)?S[$]=this._includeObjectOperations(S[$],Pe.INSERT):this.isRemoved(O)?S[$]=this._includeObjectOperations(S[$],Pe.REMOVE):(0,Ge.A)(O,(te,Fe)=>{if([t.parent,t.parentPropertyName].includes(Fe))(this.isAdded(te)||this.isModified(te)||this.isRemoved(te))&&(S[$]=this._includeObjectOperations(S[$],Pe.MOVE));else if(Fe===t.index){if(this.isAdded(te)||this.isModified(te)||this.isRemoved(te)){const ke=r[$],Me=ke[t.parent]||t.root,ai=ke[t.parentPropertyName]||t.root,Rt=w[Me]||[];this._include(Rt,ai),w[Me]=Rt}}else this.isRemoved(te)?S[$]=this._includeObjectOperations(S[$],Pe.REMOVE_PROPERTY):S[$]=this._includeObjectOperations(S[$],Pe.MERGE)})}),S=this._getObjectChangePositionOperations(f,w,S,u,e),S}_getObjectChangePositionOperations(e,t,n,a,r){const u=n||{};let p=[];const f={};this._fillItemsOperations(e,f),(0,Ge.A)(t,(w,O)=>{let $;if(O===this.objectProperties.root)$=this._getChangePositionObjectName(e,a,O),p=(0,da.A)(p,$);else{const te=this._getModifiedObjectSimpleName(O),Fe=f[te];if(Fe){let ke=t[O].shift();for(;!this.isEmpty(ke);){const Me=Fe[ke];$=this._getChangePositionObjectName(Me,a,O,r),p=(0,da.A)(p,$),ke=t[O].shift()}}}});let S=p.shift();for(;!this.isEmpty(S);)u[S]=this._includeObjectOperations(u[S],Pe.CHANGE_POSITION),S=p.shift();return u}_getChangePositionObjectName(e,t,n,a){const r=[],u=this.objectProperties.patchDiffNodeTypeSymbol;return(0,Ge.A)(e,(p,f)=>{if(f!==u&&(0,ua.A)(f)&&f.indexOf("_")>=0&&this.isMoved(p)){const S=p[1],w=e[S];if(w){const O=w[this.objectProperties.operationalName][0],$=this._getChangePositionObjectPath(O,t,n,a);r.push($)}}}),r}_fillItemsOperations(e,t={}){const{operationalName:n}=this.objectProperties;Object.entries(e).forEach(([a,r])=>{if(a===n){const u=e[n][0];t[u]=e}else((0,Ye.A)(r)||(0,ye.A)(r))&&this._fillItemsOperations(r,t)})}_addOperationalNames(e){e.hasOwnProperty(this.objectProperties.name)&&(e[this.objectProperties.operationalName]=e[this.objectProperties.name]),((0,ye.A)(e)||(0,Ye.A)(e))&&(0,Ge.A)(e,t=>{t&&this._addOperationalNames(t)})}_getModifiedObjectSimpleName(e){return e.split(this.pathDelimiter).pop()}_getChangePositionObjectPath(e,t,n,a){return!0===a?.identifyItemByPath?`${n}${this.pathDelimiter}${e}`:e}getObjectResultOperations(e){const t=[];return(0,Ge.A)(e,(n,a)=>{for(let r=0,u=n.length;r<u;r++){const p=n[r],f={operation:this.getObjectModificationTypeName(p),name:this._getModifiedObjectSimpleName(a)};switch(p){case Pe.INSERT:Object.assign(f,this.getOperationValues(a,p)),Object.assign(f,this.getOperationMoveProperties(a)),t.push(f);break;case Pe.CHANGE_POSITION:case Pe.MOVE:Object.assign(f,this.getOperationMoveProperties(a)),t.push(f);break;case Pe.REMOVE_PROPERTY:Object.assign(f,this.getOperationRemovedProperties(a)),f.properties.length>0&&t.push(f);break;case Pe.MERGE:Object.assign(f,this.getOperationValues(a,p)),f.values&&t.push(f);break;default:t.push(f)}}}),t}getOperationMoveProperties(e){const t=this.operationalValues.flatModifiedObject[e],n={},a=this.moveOperationProperties;for(let r=0,u=a.length;r<u;r++){const p=a[r];let f=t[p];this.isEmpty(f)||("parentName"===p&&(f=this._getModifiedObjectSimpleName(f)),n[p]=f)}return n}getOperationRemovedProperties(e){const t=this.operationalValues.flatDelta,n={properties:null},a=[],r=t[e];return(0,Ge.A)(r,(u,p)=>{this.isRemoved(u)&&a.push(p)}),n.properties=a,n}getOperationValues(e,t){const n={},a={};switch(t){case Pe.INSERT:this._setInsertOperationValues(e,a);break;case Pe.MERGE:this._setMergeOperationValues(e,a)}return(0,Re.A)(a)||(n.values=a),n}_setMergeOperationValues(e,t){const n=this.operationalValues.flatDelta,a=this.operationalValues.flatModifiedObject,r=n[e];(0,Ge.A)(r,(u,p)=>{if(!this.moveOperationProperties.includes(p)&&!this.isRemoved(u)){let S;S="a"===u[this.objectProperties.patchDiffNodeTypeSymbol]||(0,ye.A)(u)&&!(0,Re.A)(u)?a[e][p]:this.isAdded(u)?u[0]:u[1],t[p]=S}})}_setInsertOperationValues(e,t){const a=this.operationalValues.flatModifiedObject[e];return(0,Ge.A)(a,(r,u)=>{this.moveOperationProperties.includes(u)||(t[u]=(0,Z.A)(r))}),a}getObjectModificationTypeName(e){let t;switch(e){case Pe.INSERT:t="insert";break;case Pe.REMOVE:case Pe.REMOVE_PROPERTY:t="remove";break;case Pe.MOVE:case Pe.CHANGE_POSITION:t="move";break;case Pe.MERGE:t="merge"}return t}isAdded(e){return 1===e.length}isModified(e){return 2===e.length}isMoved(e){return 3===e.length&&3===e[2]}isRemoved(e){return 3===e.length&&0===e[2]}makeDiff(e,t){if(!this._patch)throw new Error("jsondiffpatch module not found");return this._patch.diff(e,t)}getFlatObject(e,t){return this._flattenObject(e,null,null,null,null,t)||{}}getJsonDiff(e,t,n){let a=[];try{const r=this.makeDiff(e,t);if(r){const u=this.getFlatObject(e,n),p=this.getFlatObject(t,n),f=this.makeDiff(u,p);this.operationalValues={primaryObject:e,modifiedObject:t,delta:r,flatPrimaryObject:u,flatModifiedObject:p,flatDelta:f};const S=this.getObjectOperations(n);a=this.getObjectResultOperations(S)}}finally{(0,Ge.A)(this.operationalValues,(r,u)=>{delete this.operationalValues[u]}),this.operationalValues={}}return a}static{this.\u0275fac=function(t){return new(t||Ni)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Ni,factory:Ni.\u0275fac})}}var Ps=b(28024);class gn extends Ni{constructor(){super(...arguments),this.flatIndexForObjects=!1,this._fallbackRules={ifEveryArrayItemHasProperty:(e,t)=>e.every(n=>n[t])}}_getModifiedObjectPath(e,t){const n=t===Pe.REMOVE||t===Pe.REMOVE_PROPERTY?this.operationalValues.flatPrimaryObject:this.operationalValues.flatModifiedObject,a=n[e],r=[];return t===Pe.MERGE||t===Pe.REMOVE_PROPERTY?this._findParentPath(n,e,null,r):this._findParentPath(n,a?.parentName??e,a.propertyName,r),r.reverse(),"__root"===r[0]&&r.shift(),r}_findParentPath(e,t,n,a){if(t){let r=e[t];if(r?.__initialId)return void a.push(r.__initialId);if(n&&(r=r[n]),r?.__initialId)return void a.push(r.__initialId);const u=t.split(this.pathDelimiter),p=u.pop();a.push(r?.name||p),this._findParentPath(e,u.join(this.pathDelimiter),r?.propertyName,a)}}_convertRemovedNestedObjectsIntoSingleOperation(e){return Object.keys(e).reverse().forEach(t=>{if(this.isRemoved(e[t])){const n=e[t][0],a=e[n.parentName];a&&(this.isRemoved(a)||this.isRemoved(a[n.propertyName])||this.isModified(a[n.propertyName]))&&delete e[t]}}),e}_applyFallbackRulesToArrayItemWithoutName(e){return Object.keys(e).reverse().forEach(t=>{if(this.isRemoved(e[t])){const n=e[t][0];"a"===e[n.parentName]?.[n.propertyName]?.[this.objectProperties.patchDiffNodeTypeSymbol]&&delete e[t]}}),e}_convertAddedNestedObjectsIntoSingleOperation(e,t){return Object.keys(e).reverse().forEach(n=>{if(this.isAdded(e[n])){const a=e[n][0];if(void 0===a.index){const r=t[a.parentName];if(r[a.propertyName]){const u=(0,Ps.A)(Object.keys(a),...Object.values(this.objectProperties)).reduce((p,f)=>(p[f]=a[f],p),{});r[a.propertyName]=u}delete t[n]}}}),t}_isFlatArrayItem(e){const t=this.operationalValues.flatModifiedObject[e];return Number.isInteger(t?.index)}needFlatten(e,t){let n=t||!1;return n=!this.isEmpty(e?.name),n||((0,Ye.A)(e)&&e.length>0&&this._fallbackRules.ifEveryArrayItemHasProperty(e,"__initialId")?n=!this.isEmpty(e[0].name):(0,pi.A)(e)&&(0,Ge.A)(e,a=>{n=this.needFlatten(a,n)})),n}checkIfItemAlreadyExist(e,t,n){super.checkIfItemAlreadyExist(e,t,n);const a=n[this.objectProperties.initialId];if(a)for(const r in e)if(e[r][this.objectProperties.initialId]===a)throw new Error(He.Qf.format(Fr,a))}_eachObjDeep(e,t){(0,pi.A)(e)&&t?.call(this,e),(0,Ge.A)(e,n=>{(0,ye.A)(n)&&this._eachObjDeep(n,t)})}getOperationValues(e,t){const n=super.getOperationValues(e,t);return this._eachObjDeep(n,a=>{a.__initialName&&(a.name=a.__initialName,delete a.__initialName)}),n}getObjectResultOperations(e){const t=[];return(0,Ge.A)(e,(n,a)=>{for(let r=0,u=n.length;r<u;r++){const p=n[r],f={operation:this.getObjectModificationTypeName(p)};switch(p){case Pe.INSERT:f.name=this._getModifiedObjectSimpleName(a),f.path=this._getModifiedObjectPath(a,p),Object.assign(f,this.getOperationValues(a,p)),Object.assign(f,this.getOperationMoveProperties(a)),f.path.push(f.propertyName),delete f.propertyName,delete f.parentName,delete f.__initialId,delete f.values._id,t.push(f);break;case Pe.CHANGE_POSITION:case Pe.MOVE:f.name=this._getModifiedObjectSimpleName(a),f.path=this._getModifiedObjectPath(a,p),Object.assign(f,this.getOperationMoveProperties(a)),f.path.push(f.propertyName),delete f.propertyName,delete f.parentName,delete f.__initialId,t.push(f);break;case Pe.REMOVE_PROPERTY:this._isFlatArrayItem(a)?f.name=this._getModifiedObjectSimpleName(a):f.path=this._getModifiedObjectPath(a,p),Object.assign(f,this.getOperationRemovedProperties(a)),f.properties.length>0&&t.push(f);break;case Pe.MERGE:this._isFlatArrayItem(a)?f.name=this._getModifiedObjectSimpleName(a):f.path=this._getModifiedObjectPath(a,p),Object.assign(f,this.getOperationValues(a,p)),f.values&&t.push(f);break;default:f.name=this._getModifiedObjectSimpleName(a),t.push(f)}}}),t}setNameDeepByPathIfNeeded(e,t){Object.keys(e).length?(e.name&&(e.__initialName=e.name,delete e.name),e._id&&(e.name=e._id,e.__initialId=e._id),!e.name&&t&&(e.name=t),Object.keys(e).forEach(n=>{(0,pi.A)(e[n])?this.setNameDeepByPathIfNeeded(e[n],n):(0,Ye.A)(e[n])&&this._fallbackRules.ifEveryArrayItemHasProperty(e[n],"_id")&&this.setNameDeepByPathIfNeeded(e[n],null)})):(0,pi.A)(e)&&(e.name=t)}getJsonDiff(e,t,n){let a=[];try{const r=this.makeDiff(e,t);if(e=(0,Z.A)(e),t=(0,Z.A)(t),this.setNameDeepByPathIfNeeded(e,this.objectProperties.root),this.setNameDeepByPathIfNeeded(t,this.objectProperties.root),r){const u=this.getFlatObject(e,n);let p=this.getFlatObject(t,n),f=this.makeDiff(u,p);p=this._convertAddedNestedObjectsIntoSingleOperation(f,p),f=this.makeDiff(u,p),f=this._convertRemovedNestedObjectsIntoSingleOperation(f),f=this._applyFallbackRulesToArrayItemWithoutName(f),this.operationalValues={primaryObject:e,modifiedObject:t,delta:r,flatPrimaryObject:u,flatModifiedObject:p,flatDelta:f};const S=this.getObjectOperations(n);a=this.getObjectResultOperations(S)}}finally{(0,Ge.A)(this.operationalValues,(r,u)=>{delete this.operationalValues[u]}),this.operationalValues={}}return a}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(gn)))(n||gn)}})()}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:gn,factory:gn.\u0275fac})}}var en=b(66396),mi=b.n(en),Ct=b(78516);class ht extends Qe{constructor(){super(...arguments),this.properties={alias:{name:"_id"}},this.checkOperationNameRequiredParameters=!1}_findItemInfoInSourceObject(e){return this._findItemInfo(e,this.sourceObject)}findInsertItemParent(e,t){return null===e?this.sourceObject:e.item}findInsertItemInfo(e){const t=e.parentName;let n=this._findItemInfoInSourceObject(t);if(n?.item&&e.path)n={item:(0,Ct.A)(n.item,e.path)};else if(e.path){const a=[...e.path];if(n={item:(0,Ct.A)(this.sourceObject,a)},!n.item){const r=a.shift();n=this._findItemInfoInSourceObject(r),n?.item&&a.length&&(n={item:(0,Ct.A)(n.item,a)})}}return n}findMergeOrRemoveItemInfo(e){let t=this._findItemInfoInSourceObject(e.name);if(!t?.item){const n=[...e.path];if(t={item:(0,Ct.A)(this.sourceObject,n,n.length?void 0:this.sourceObject)},!t.item){const a=n.shift();t=this._findItemInfoInSourceObject(a),t?.item&&n.length&&(t={item:(0,Ct.A)(t.item,n)})}}return t}findRemoveParentItemInfo(e,t){let n=this._findItemInfoInSourceObject(e);if(!n){const a=[...t.parentPath];a.pop(),a.pop(),n={item:(0,Ct.A)(this.sourceObject,a)}}return n}_merge(e){const t=this.findMergeOrRemoveItemInfo(e),n=!ht.isEmpty(t);if(n){const r=this._excludeAliasProperties(e.name,e.values).reduce((f,S)=>(f[S]=e.values[S],f),{}),u={arrayMerge:(f,S)=>S},p=en.all([t.item,r],u);Object.keys(p).forEach(f=>{t.item[f]=p[f]})}return n}iterateChildItems(e,t,n,a=[]){let r=!0;return(0,Ge.A)(e,(u,p)=>{if((0,Ye.A)(u)||(0,ye.A)(u)){const f=(0,Ye.A)(u),S=f?u:[u];a.push(p),(0,Ge.A)(S,(w,O)=>{f&&a.push(O);const $=!1!==this.iterateChildItems(w,t,n,[...a]),te={item:w,propertyName:p,childIterationResult:$,parentPath:[...a],parent:e};return r=!1!==t.call(n,te)&&$,f&&r&&a.pop(),r}),r&&a.pop()}return r}),r}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(ht)))(n||ht)}})()}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:ht,factory:ht.\u0275fac})}}const On=o=>null!=o&&"object"==typeof o,Fo=o=>On(o)&&(o=>0===Object.keys(o).length)(o),Oi=o=>o instanceof Date;class Vi{deepObjectDiff(e,t){if(e===t)return{};if(Array.isArray(t))return JSON.stringify(e)===JSON.stringify(t)?{}:t;if(!On(e)||!On(t))return t;if(Oi(e)||Oi(t))return e?.valueOf()===t?.valueOf()?{}:t;const n=Object.fromEntries(Object.entries(t).filter(([,a])=>void 0===a));return Object.keys(t).reduce((a,r)=>{if(!((o,...e)=>Object.prototype.hasOwnProperty.call(o,...e))(e,r))return a[r]=t[r],a;const u=e[r],p=t[r],f=this.deepObjectDiff(u,p);return Fo(f)&&!Oi(f)&&(Fo(u)||!Fo(p))||(a[r]=f),a},n)}static{this.\u0275fac=function(t){return new(t||Vi)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Vi,factory:Vi.\u0275fac,providedIn:"root"})}}var Yn=b(9461),zd=b(48560);class Vn{constructor(){this._requireJsService=(0,i.inject)(_.urz),this._destroy$=new h.Subject}_replaceDeprecatedSchemaProperties(e){return"diff"in e?{...(0,Yn.A)(e,"diff"),viewConfigDiff:e.diff}:e}loadAmdSchemaList(e,t=!1){return new h.Observable(n=>{const a=[];this._requireJsService.allowToCacheCalls=t,this._requireJsService.load([e],r=>{r||(console.error(`${e} is undefined. Make sure that you defined ${e} AMD module in ${e} file. Empty schema will be used instead.`),r={});const u=this._replaceDeprecatedSchemaProperties(r);this._requireJsService.load([`${e}Structure`,`${e}Resources`],(p,f)=>{a.push({name:e,schema:u,structure:p,resources:f}),p?.parentSchemaName?this.loadAmdSchemaList(p.parentSchemaName,t).pipe((0,h.takeUntil)(this._destroy$)).subscribe(S=>{a.push(S),n.next((0,zd.A)(a)),n.complete()}):(n.next(a),n.complete())})})})}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}static{this.\u0275fac=function(t){return new(t||Vn)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Vn,factory:Vn.\u0275fac,providedIn:"root"})}}var Ns=b(54668);class Ha extends Ns.PH{getByName(e,t=this.root){let n=null;return this.traverseDepthFirstSearch(r=>{r.data.schemaName===e&&(n=r)},t),n}removeByName(e,t=this.root){let n=null;if(this.traverseDepthFirstSearch(r=>{r.data.schemaName===e&&(n=r)},t),n){const r=n.parent;n.children=[];const u=r.children.findIndex(p=>p===n);return r.children.splice(u,1),!0}return!1}containsByName(e,t=this.root){let n=null;return this.traverseDepthFirstSearch(r=>{r.data.schemaName===e&&(n=r)},t),!!n}}class hi{static bulkAdd(e,t){const n=t;for(const a of e)if(!n.containsByName(a.schemaName)){const r=n.get(a.parentSchemaUId);n.add({data:a,id:a.schemaUId},r)}return n}static initTree(e){return new Ha(e,e.schemaUId)}}class fn{constructor(){this._trees=[]}_filterExtendingSchemas(e){const t=[];for(let n=0;n<e.length;n++)if(e.find(a=>a.parentSchemaName===e[n].schemaName&&a.extendParent)){const a=e[n];do{n++}while(e.find(r=>r.parentSchemaName===e[n].schemaName&&r.extendParent));t.push({...e[n],parentSchemaName:a.parentSchemaName,parentSchemaUId:a.parentSchemaUId,schemaUId:a.schemaUId})}else t.push(e[n]);return t}add(...e){const t=this._filterExtendingSchemas([...e].map(r=>r.structure)),n=t.shift();let a=this._trees.find(r=>r.root.id===n.schemaUId);a?hi.bulkAdd(t,a):(a=hi.initTree(n),hi.bulkAdd(t,a),this._trees.push(a))}setCacheSnapshot(e){const{schemaName:t,hook:n,snapshot:a}=e;let r=0;for(;r<this._trees.length;){const u=this._trees[r].getByName(t);if(u)return void(u.data={...u.data,snapshots:{...u.data.snapshots,[n]:a}});r++}}setDataSchemaDepsToCache(e,t){let n=0;for(;n<this._trees.length;){const a=this._trees[n].getByName(e);if(a)return void(a.data={...a.data,dataSchemaDeps:t});n++}}isCached(e){return this._trees.some(t=>t.containsByName(e))}getSchemaSnapshots(e){let t=0;for(;t<this._trees.length;){const n=this._trees[t].getByName(e);if(n)return n.data.snapshots;t++}return null}invalidateClientUnitSchema(e){let t=0;for(;t<this._trees.length;){if(this._trees[t].root.data.schemaName===e)return void this._trees.splice(t,1);if(this._trees[t].removeByName(e))return;t++}}invalidateByDataSchemaName(e){let t=0;const n=a=>{a.data?.dataSchemaDeps&&a.data?.dataSchemaDeps.includes(e)&&(a.data.snapshots={[_.pAP.METADATA_INIT]:a.data.snapshots[_.pAP.METADATA_INIT]})};for(;t<this._trees.length;)this._trees[t].traverseDepthFirstSearch(n),t++}static{this.\u0275fac=function(t){return new(t||fn)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:fn,factory:fn.\u0275fac,providedIn:"platform"})}}class tn{constructor(){this._requireJsService=(0,i.inject)(_.urz),this._schemaChangeListenerService=(0,i.inject)(_.l2Q),this._destroy$=new h.Subject}init(){this._schemaChangeListenerService.schemaChanged$.pipe((0,se.p)(()=>this._requireJsService.allowToCacheCalls)).pipe((0,h.takeUntil)(this._destroy$)).subscribe(({name:e})=>{[e,`${e}Structure`,`${e}Resources`].forEach(t=>this._requireJsService.deleteCachedModule(t))})}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}static{this.\u0275fac=function(t){return new(t||tn)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:tn,factory:tn.\u0275fac,providedIn:"root"})}}class yn{}var Li=b(73866);const Os=[{schema:{viewModelConfig:{viewModelName:"Profile View model"}}}],ko=[{schema:{viewModelConfig:{viewModelName:"AMD View model"}}}],Vs={viewModelConfig:{attributes:{IsChanged:{value:!1},IsChangesTrackingEnabled:{value:!1},CardState:{},HeaderCaption:{value:"#ResourceString(DefaultHeaderCaption)#"},AttachmentList:{isCollection:!0,modelConfig:{path:"AttachmentListDS",sortingConfig:{default:[{columnName:"CreatedOn",direction:"desc"}],attributeName:"AttachmentListSorting"},pagingConfig:{rowCount:30}},viewModelConfig:{attributes:{AttachmentListDS_Name:{modelConfig:{path:"AttachmentListDS.Name"},properties:{readonly:{defaultValue:!1}}},AttachmentListDS_CreatedOn:{modelConfig:{path:"AttachmentListDS.CreatedOn"}},AttachmentListDS_CreatedBy:{modelConfig:{path:"AttachmentListDS.CreatedBy"}},AttachmentListDS_Size:{modelConfig:{path:"AttachmentListDS.Size"}},AttachmentListDS_Id:{modelConfig:{path:"AttachmentListDS.Id"}}}}},Id:{modelConfig:{path:"PDS.Id"}},Type:{modelConfig:{path:"PDS.Type"},businessRulesConfig:{businessRulesFilters:["Type_List_BusinessRule_Filter"]}},Owner:{modelConfig:{path:"PDS.Owner"},businessRulesConfig:{businessRulesFilters:["Owner_List_BusinessRule_Filter"]}},Dear:{modelConfig:{path:"PDS.Dear"}},Gender:{modelConfig:{path:"PDS.Gender"},businessRulesConfig:{businessRulesFilters:["Gender_List_BusinessRule_Filter"]}},SalutationType:{modelConfig:{path:"PDS.SalutationType"},businessRulesConfig:{businessRulesFilters:["SalutationType_List_BusinessRule_Filter"]}},Language:{modelConfig:{path:"PDS.Language"},businessRulesConfig:{businessRulesFilters:["Language_List_BusinessRule_Filter"]}},AddressList:{isCollection:!0,modelConfig:{path:"AddressListDS",filterAttributes:[{name:"AddressList_PredefinedFilter",loadOnChange:!0},{name:"AddressSearchFilter_AddressList",loadOnChange:!0}],pagingConfig:{rowCount:30},sortingConfig:{attributeName:"AddressListSorting"}},viewModelConfig:{attributes:{AddressListDS_AddressType:{modelConfig:{path:"AddressListDS.AddressType"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["AddressListDS_AddressType_List_BusinessRule_Filter"]}},AddressListDS_FullAddress:{modelConfig:{path:"AddressListDS.FullAddress"},properties:{readonly:{defaultValue:!1}}},AddressListDS_Primary:{modelConfig:{path:"AddressListDS.Primary"}},AddressListDS_Id:{modelConfig:{path:"AddressListDS.Id"}},AddressListDS_AddressType_List:{isCollection:!0,isLookup:!0},AddressListDS_AddressType_List_BusinessRule_Filter:{value:{}}}}},CareerList:{isCollection:!0,modelConfig:{path:"CareerListDS"},viewModelConfig:{attributes:{CareerListDS_Account:{modelConfig:{path:"CareerListDS.Account"}},CareerListDS_JobTitle:{modelConfig:{path:"CareerListDS.JobTitle"}},CareerListDS_Department:{modelConfig:{path:"CareerListDS.Department"}},CareerListDS_Current:{modelConfig:{path:"CareerListDS.Current"}},CareerListDS_StartDate:{modelConfig:{path:"CareerListDS.StartDate"}},CareerListDS_Id:{modelConfig:{path:"CareerListDS.Id"}}}}},Account:{modelConfig:{path:"PDS.Account"},businessRulesConfig:{businessRulesFilters:["Account_List_BusinessRule_Filter"]}},JobTitle:{modelConfig:{path:"PDS.JobTitle"}},MobilePhone:{modelConfig:{path:"PDS.MobilePhone"}},Email:{modelConfig:{path:"PDS.Email"}},AccountIndustry:{modelConfig:{path:"PDS.AccountIndustry"},businessRulesConfig:{businessRulesFilters:["AccountIndustry_List_BusinessRule_Filter"]}},AccountAccountCategory:{modelConfig:{path:"PDS.AccountAccountCategory"},businessRulesConfig:{businessRulesFilters:["AccountAccountCategory_List_BusinessRule_Filter"]}},AccountWeb:{modelConfig:{path:"PDS.AccountWeb"}},EventList:{isCollection:!0,modelConfig:{path:"EventListDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"EventListSorting"},filterAttributes:[{name:"EventSearchFilter_EventList",loadOnChange:!0}]},viewModelConfig:{attributes:{EventListDS_Event:{modelConfig:{path:"EventListDS.Event"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["EventListDS_Event_List_BusinessRule_Filter"]}},EventListDS_EventType:{modelConfig:{path:"EventListDS.EventType"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["EventListDS_EventType_List_BusinessRule_Filter"]}},EventListDS_EventResponse:{modelConfig:{path:"EventListDS.EventResponse"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["EventListDS_EventResponse_List_BusinessRule_Filter"]}},EventListDS_EventEndDate:{modelConfig:{path:"EventListDS.EventEndDate"},properties:{readonly:{defaultValue:!1}}},EventListDS_EventStartDate:{modelConfig:{path:"EventListDS.EventStartDate"},properties:{readonly:{defaultValue:!1}}},EventListDS_Id:{modelConfig:{path:"EventListDS.Id"}},EventListDS_Event_List:{isCollection:!0,isLookup:!0},EventListDS_Event_List_BusinessRule_Filter:{value:{}},EventListDS_EventType_List:{isCollection:!0,isLookup:!0},EventListDS_EventType_List_BusinessRule_Filter:{value:{}},EventListDS_EventResponse_List:{isCollection:!0,isLookup:!0},EventListDS_EventResponse_List_BusinessRule_Filter:{value:{}}}}},MrktLeadList:{isCollection:!0,modelConfig:{path:"MrktLeadListDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"MrktLeadListSorting"},filterAttributes:[{name:"MrktLeadSearchFilter_MrktLeadList",loadOnChange:!0}]},viewModelConfig:{attributes:{MrktLeadListDS_LeadName:{modelConfig:{path:"MrktLeadListDS.LeadName"},properties:{readonly:{defaultValue:!1}}},MrktLeadListDS_LeadType:{modelConfig:{path:"MrktLeadListDS.LeadType"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["MrktLeadListDS_LeadType_List_BusinessRule_Filter"]}},MrktLeadListDS_QualifyStatus:{modelConfig:{path:"MrktLeadListDS.QualifyStatus"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["MrktLeadListDS_QualifyStatus_List_BusinessRule_Filter"]}},MrktLeadListDS_Owner:{modelConfig:{path:"MrktLeadListDS.Owner"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["MrktLeadListDS_Owner_List_BusinessRule_Filter"]}},MrktLeadListDS_CreatedOn:{modelConfig:{path:"MrktLeadListDS.CreatedOn"},properties:{readonly:{defaultValue:!1}}},MrktLeadListDS_Id:{modelConfig:{path:"MrktLeadListDS.Id"}},MrktLeadListDS_LeadType_List:{isCollection:!0,isLookup:!0},MrktLeadListDS_LeadType_List_BusinessRule_Filter:{value:{}},MrktLeadListDS_QualifyStatus_List:{isCollection:!0,isLookup:!0},MrktLeadListDS_QualifyStatus_List_BusinessRule_Filter:{value:{}},MrktLeadListDS_Owner_List:{isCollection:!0,isLookup:!0},MrktLeadListDS_Owner_List_BusinessRule_Filter:{value:{}}}}},SubmittedFormList:{isCollection:!0,modelConfig:{path:"SubmittedFormListDS"},viewModelConfig:{attributes:{SubmittedFormListDS_CreatedOn:{modelConfig:{path:"SubmittedFormListDS.CreatedOn"}},SubmittedFormListDS_WebForm:{modelConfig:{path:"SubmittedFormListDS.WebForm"}},SubmittedFormListDS_WebFormExternalURL:{modelConfig:{path:"SubmittedFormListDS.WebFormExternalURL"}},SubmittedFormListDS_FullName:{modelConfig:{path:"SubmittedFormListDS.FullName"}},SubmittedFormListDS_Email:{modelConfig:{path:"SubmittedFormListDS.Email"}},SubmittedFormListDS_PhoneNumber:{modelConfig:{path:"SubmittedFormListDS.PhoneNumber"}},SubmittedFormListDS_Account:{modelConfig:{path:"SubmittedFormListDS.Account"}},SubmittedFormListDS_Country:{modelConfig:{path:"SubmittedFormListDS.Country"}},SubmittedFormListDS_Id:{modelConfig:{path:"SubmittedFormListDS.Id"}}}}},WebSessionList:{isCollection:!0,modelConfig:{path:"WebSessionListDS",filterAttributes:[{loadOnChange:!0,name:"WebSessionList_PredefinedFilter"}],sortingConfig:{default:[{direction:"asc",columnName:"StartDate"}]}},viewModelConfig:{attributes:{WebSessionListDS_StartDate:{modelConfig:{path:"WebSessionListDS.StartDate"}},WebSessionListDS_CountryStr:{modelConfig:{path:"WebSessionListDS.CountryStr"}},WebSessionListDS_CityStr:{modelConfig:{path:"WebSessionListDS.CityStr"}},WebSessionListDS_Source:{modelConfig:{path:"WebSessionListDS.Source"}},WebSessionListDS_Channel:{modelConfig:{path:"WebSessionListDS.Channel"}},WebSessionListDS_PageReferrer:{modelConfig:{path:"WebSessionListDS.PageReferrer"}},WebSessionListDS_Duration:{modelConfig:{path:"WebSessionListDS.Duration"}},WebSessionListDS_TouchActionTouchIdCountd3601bf8:{modelConfig:{path:"WebSessionListDS.TouchActionTouchIdCountd3601bf8"}},WebSessionListDS_Id:{modelConfig:{path:"WebSessionListDS.Id"}}}}},WebSessionList_PredefinedFilter:{value:null},WebActionList:{isCollection:!0,modelConfig:{path:"WebActionListDS",filterAttributes:[{name:"WebActionList_PredefinedFilter",loadOnChange:!0}],sortingConfig:{default:[{direction:"asc",columnName:"ActionDate"}]}},viewModelConfig:{attributes:{WebActionListDS_ActionDate:{modelConfig:{path:"WebActionListDS.ActionDate"}},WebActionListDS_Type:{modelConfig:{path:"WebActionListDS.Type"}},WebActionListDS_WebPage:{modelConfig:{path:"WebActionListDS.WebPage"}},WebActionListDS_WebPageUrl:{modelConfig:{path:"WebActionListDS.WebPageUrl"}},WebActionListDS_Id:{modelConfig:{path:"WebActionListDS.Id"}}}}},WebActionList_PredefinedFilter:{value:null},CasesList:{isCollection:!0,modelConfig:{path:"CasesListDS",sortingConfig:{default:[{direction:"desc",columnName:"RegisteredOn"}],attributeName:"CasesListSorting"},pagingConfig:{rowCount:30},filterAttributes:[{name:"CasesSearchFilter_CasesList",loadOnChange:!0}]},viewModelConfig:{attributes:{CasesListDS_Number:{modelConfig:{path:"CasesListDS.Number"},properties:{readonly:{defaultValue:!1}}},CasesListDS_Subject:{modelConfig:{path:"CasesListDS.Subject"},properties:{readonly:{defaultValue:!1}}},CasesListDS_RegisteredOn:{modelConfig:{path:"CasesListDS.RegisteredOn"},properties:{readonly:{defaultValue:!1}}},CasesListDS_Status:{modelConfig:{path:"CasesListDS.Status"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["CasesListDS_Status_List_BusinessRule_Filter"]}},CasesListDS_SolutionDate:{modelConfig:{path:"CasesListDS.SolutionDate"},properties:{readonly:{defaultValue:!1}}},CasesListDS_Id:{modelConfig:{path:"CasesListDS.Id"}},CasesListDS_Status_List:{isCollection:!0,isLookup:!0},CasesListDS_Status_List_BusinessRule_Filter:{value:{}}}}},ServiceAgreementsList:{isCollection:!0,modelConfig:{path:"ServiceAgreementsListDS",sortingConfig:{default:[{direction:"desc",columnName:"ServicePactNumber"}]}},viewModelConfig:{attributes:{ServiceAgreementsListDS_ServicePactNumber:{modelConfig:{path:"ServiceAgreementsListDS.ServicePactNumber"}},ServiceAgreementsListDS_ServicePact:{modelConfig:{path:"ServiceAgreementsListDS.ServicePact"}},ServiceAgreementsListDS_ServicePactStatus:{modelConfig:{path:"ServiceAgreementsListDS.ServicePactStatus"}},ServiceAgreementsListDS_ServicePactOwner:{modelConfig:{path:"ServiceAgreementsListDS.ServicePactOwner"}},ServiceAgreementsListDS_Id:{modelConfig:{path:"ServiceAgreementsListDS.Id"}}}}},CampaignList:{isCollection:!0,modelConfig:{path:"CampaignListDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"CampaignListSorting"},filterAttributes:[{name:"CampaignSearchFilter_CampaignList",loadOnChange:!0}]},viewModelConfig:{attributes:{CampaignListDS_Campaign:{modelConfig:{path:"CampaignListDS.Campaign"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["CampaignListDS_Campaign_List_BusinessRule_Filter"]}},CampaignListDS_CampaignCampaignStatus:{modelConfig:{path:"CampaignListDS.CampaignCampaignStatus"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["CampaignListDS_CampaignCampaignStatus_List_BusinessRule_Filter"]}},CampaignListDS_CampaignStartDate:{modelConfig:{path:"CampaignListDS.CampaignStartDate"},properties:{readonly:{defaultValue:!1}}},CampaignListDS_CampaignEndDate:{modelConfig:{path:"CampaignListDS.CampaignEndDate"},properties:{readonly:{defaultValue:!1}}},CampaignListDS_Status:{modelConfig:{path:"CampaignListDS.Status"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["CampaignListDS_Status_List_BusinessRule_Filter"]}},CampaignListDS_CampaignItem:{modelConfig:{path:"CampaignListDS.CampaignItem"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["CampaignListDS_CampaignItem_List_BusinessRule_Filter"]}},CampaignListDS_Id:{modelConfig:{path:"CampaignListDS.Id"}},CampaignListDS_Campaign_List:{isCollection:!0,isLookup:!0},CampaignListDS_Campaign_List_BusinessRule_Filter:{value:{}},CampaignListDS_CampaignCampaignStatus_List:{isCollection:!0,isLookup:!0},CampaignListDS_CampaignCampaignStatus_List_BusinessRule_Filter:{value:{}},CampaignListDS_Status_List:{isCollection:!0,isLookup:!0},CampaignListDS_Status_List_BusinessRule_Filter:{value:{}},CampaignListDS_CampaignItem_List:{isCollection:!0,isLookup:!0},CampaignListDS_CampaignItem_List_BusinessRule_Filter:{value:{}}}}},BulkEmailList:{isCollection:!0,modelConfig:{path:"BulkEmailListDS",sortingConfig:{default:[{direction:"asc",columnName:"BulkEmail"}],attributeName:"BulkEmailListSorting"},pagingConfig:{rowCount:30},filterAttributes:[{name:"BulkEmailSearchFilter_BulkEmailList",loadOnChange:!0}]},viewModelConfig:{attributes:{BulkEmailListDS_BulkEmail:{modelConfig:{path:"BulkEmailListDS.BulkEmail"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["BulkEmailListDS_BulkEmail_List_BusinessRule_Filter"]}},BulkEmailListDS_BulkEmailType:{modelConfig:{path:"BulkEmailListDS.BulkEmailType"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["BulkEmailListDS_BulkEmailType_List_BusinessRule_Filter"]}},BulkEmailListDS_BulkEmailResponse:{modelConfig:{path:"BulkEmailListDS.BulkEmailResponse"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["BulkEmailListDS_BulkEmailResponse_List_BusinessRule_Filter"]}},BulkEmailListDS_ResponseReason:{modelConfig:{path:"BulkEmailListDS.ResponseReason"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["BulkEmailListDS_ResponseReason_List_BusinessRule_Filter"]}},BulkEmailListDS_BulkEmailStartDate:{modelConfig:{path:"BulkEmailListDS.BulkEmailStartDate"},properties:{readonly:{defaultValue:!1}}},BulkEmailListDS_Id:{modelConfig:{path:"BulkEmailListDS.Id"}},BulkEmailListDS_BulkEmail_List:{isCollection:!0,isLookup:!0},BulkEmailListDS_BulkEmail_List_BusinessRule_Filter:{value:{}},BulkEmailListDS_BulkEmailType_List:{isCollection:!0,isLookup:!0},BulkEmailListDS_BulkEmailType_List_BusinessRule_Filter:{value:{}},BulkEmailListDS_BulkEmailResponse_List:{isCollection:!0,isLookup:!0},BulkEmailListDS_BulkEmailResponse_List_BusinessRule_Filter:{value:{}},BulkEmailListDS_ResponseReason_List:{isCollection:!0,isLookup:!0},BulkEmailListDS_ResponseReason_List_BusinessRule_Filter:{value:{}}}}},LeadList:{isCollection:!0,modelConfig:{path:"LeadListDS",filterAttributes:[{name:"LeadList_PredefinedFilter",loadOnChange:!0},{name:"LeadSearchFilter_LeadList",loadOnChange:!0}],pagingConfig:{rowCount:30},sortingConfig:{attributeName:"LeadListSorting"}},viewModelConfig:{attributes:{LeadListDS_LeadName:{modelConfig:{path:"LeadListDS.LeadName"},properties:{readonly:{defaultValue:!1}}},LeadListDS_LeadType:{modelConfig:{path:"LeadListDS.LeadType"}},LeadListDS_QualifyStatus:{modelConfig:{path:"LeadListDS.QualifyStatus"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["LeadListDS_QualifyStatus_List_BusinessRule_Filter"]}},LeadListDS_Owner:{modelConfig:{path:"LeadListDS.Owner"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["LeadListDS_Owner_List_BusinessRule_Filter"]}},LeadListDS_CreatedOn:{modelConfig:{path:"LeadListDS.CreatedOn"},properties:{readonly:{defaultValue:!1}}},LeadListDS_Id:{modelConfig:{path:"LeadListDS.Id"}},LeadListDS_labLeadProduct:{modelConfig:{path:"LeadListDS.labLeadProduct"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["LeadListDS_labLeadProduct_List_BusinessRule_Filter"]}},LeadListDS_labLeadProduct_List:{isCollection:!0,isLookup:!0},LeadListDS_labLeadProduct_List_BusinessRule_Filter:{value:{}},LeadListDS_QualifyStatus_List:{isCollection:!0,isLookup:!0},LeadListDS_QualifyStatus_List_BusinessRule_Filter:{value:{}},LeadListDS_Owner_List:{isCollection:!0,isLookup:!0},LeadListDS_Owner_List_BusinessRule_Filter:{value:{}}}}},RecommendedProductList:{isCollection:!0,modelConfig:{path:"RecommendedProductListDS",filterAttributes:[{name:"RecommendedProductList_PredefinedFilter",loadOnChange:!0}]},viewModelConfig:{attributes:{RecommendedProductListDS_Product:{modelConfig:{path:"RecommendedProductListDS.Product"}},RecommendedProductListDS_ProductPrice:{modelConfig:{path:"RecommendedProductListDS.ProductPrice"}},RecommendedProductListDS_Score:{modelConfig:{path:"RecommendedProductListDS.Score"}},RecommendedProductListDS_Status:{modelConfig:{path:"RecommendedProductListDS.Status"}},RecommendedProductListDS_CreatedOn:{modelConfig:{path:"RecommendedProductListDS.CreatedOn"}},RecommendedProductListDS_Id:{modelConfig:{path:"RecommendedProductListDS.Id"}}}}},OpportunityList:{isCollection:!0,modelConfig:{path:"OpportunityListDS",filterAttributes:[{name:"OpportunityList_PredefinedFilter",loadOnChange:!0},{name:"OpportunitySearchFilter_OpportunityList",loadOnChange:!0}],pagingConfig:{rowCount:30},sortingConfig:{attributeName:"OpportunityListSorting"}},viewModelConfig:{attributes:{OpportunityListDS_Title:{modelConfig:{path:"OpportunityListDS.Title"},properties:{readonly:{defaultValue:!1}}},OpportunityListDS_Stage:{modelConfig:{path:"OpportunityListDS.Stage"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["OpportunityListDS_Stage_List_BusinessRule_Filter"]}},OpportunityListDS_Probability:{modelConfig:{path:"OpportunityListDS.Probability"}},OpportunityListDS_Amount:{modelConfig:{path:"OpportunityListDS.Amount"}},OpportunityListDS_Owner:{modelConfig:{path:"OpportunityListDS.Owner"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["OpportunityListDS_Owner_List_BusinessRule_Filter"]}},OpportunityListDS_DueDate:{modelConfig:{path:"OpportunityListDS.DueDate"}},OpportunityListDS_Id:{modelConfig:{path:"OpportunityListDS.Id"}},OpportunityListDS_labProduct:{modelConfig:{path:"OpportunityListDS.labProduct"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["OpportunityListDS_labProduct_List_BusinessRule_Filter"]}},OpportunityListDS_Stage_List:{isCollection:!0,isLookup:!0},OpportunityListDS_Stage_List_BusinessRule_Filter:{value:{}},OpportunityListDS_labProduct_List:{isCollection:!0,isLookup:!0},OpportunityListDS_labProduct_List_BusinessRule_Filter:{value:{}},OpportunityListDS_Owner_List:{isCollection:!0,isLookup:!0},OpportunityListDS_Owner_List_BusinessRule_Filter:{value:{}}}}},BooleanAttribute_x93xacm:{modelConfig:{path:"PDS.labChecking"}},BooleanAttribute_zxwe0de:{modelConfig:{path:"PDS.labDigWallet"}},BooleanAttribute_gw4coby:{modelConfig:{path:"PDS.labLoans"}},BooleanAttribute_su3f9mb:{modelConfig:{path:"PDS.labSavings"}},BooleanAttribute_m9dea0s:{modelConfig:{path:"PDS.labExpPay"}},BooleanAttribute_ocq7m2i:{modelConfig:{path:"PDS.labOnBanking"}},LookupAttribute_zk0ksk2:{modelConfig:{path:"PDS.labEntryProd"},businessRulesConfig:{businessRulesFilters:["LookupAttribute_zk0ksk2_List_BusinessRule_Filter"]}},GridDetail_tvn7nvn:{isCollection:!0,modelConfig:{path:"GridDetail_tvn7nvnDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_tvn7nvnSorting"},filterAttributes:[{name:"GridDetailSearchFilter_0wrikix_GridDetail_tvn7nvn",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_tvn7nvnDS_labName:{modelConfig:{path:"GridDetail_tvn7nvnDS.labName"},properties:{readonly:{defaultValue:!1}}},GridDetail_tvn7nvnDS_labRefStat:{modelConfig:{path:"GridDetail_tvn7nvnDS.labRefStat"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_tvn7nvnDS_labRefStat_List_BusinessRule_Filter"]}},GridDetail_tvn7nvnDS_labDepartment:{modelConfig:{path:"GridDetail_tvn7nvnDS.labDepartment"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_tvn7nvnDS_labDepartment_List_BusinessRule_Filter"]}},GridDetail_tvn7nvnDS_CreatedOn:{modelConfig:{path:"GridDetail_tvn7nvnDS.CreatedOn"},properties:{readonly:{defaultValue:!1}}},GridDetail_tvn7nvnDS_Id:{modelConfig:{path:"GridDetail_tvn7nvnDS.Id"}},GridDetail_tvn7nvnDS_labRefStat_List:{isCollection:!0,isLookup:!0},GridDetail_tvn7nvnDS_labRefStat_List_BusinessRule_Filter:{value:{}},GridDetail_tvn7nvnDS_labDepartment_List:{isCollection:!0,isLookup:!0},GridDetail_tvn7nvnDS_labDepartment_List_BusinessRule_Filter:{value:{}}}}},GridDetail_qv2w59y:{isCollection:!0,modelConfig:{path:"GridDetail_qv2w59yDS",filterAttributes:[{loadOnChange:!0,name:"GridDetail_qv2w59y_PredefinedFilter"},{name:"GridDetailSearchFilter_3wx4p17_GridDetail_qv2w59y",loadOnChange:!0}],pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_qv2w59ySorting"}},viewModelConfig:{attributes:{GridDetail_qv2w59yDS_LeadName:{modelConfig:{path:"GridDetail_qv2w59yDS.LeadName"},properties:{readonly:{defaultValue:!1}}},GridDetail_qv2w59yDS_labLeadBranch:{modelConfig:{path:"GridDetail_qv2w59yDS.labLeadBranch"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_qv2w59yDS_labLeadBranch_List_BusinessRule_Filter"]}},GridDetail_qv2w59yDS_labLeadProduct:{modelConfig:{path:"GridDetail_qv2w59yDS.labLeadProduct"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_qv2w59yDS_labLeadProduct_List_BusinessRule_Filter"]}},GridDetail_qv2w59yDS_CreatedOn:{modelConfig:{path:"GridDetail_qv2w59yDS.CreatedOn"},properties:{readonly:{defaultValue:!1}}},GridDetail_qv2w59yDS_Id:{modelConfig:{path:"GridDetail_qv2w59yDS.Id"}},GridDetail_qv2w59yDS_labLeadBranch_List:{isCollection:!0,isLookup:!0},GridDetail_qv2w59yDS_labLeadBranch_List_BusinessRule_Filter:{value:{}},GridDetail_qv2w59yDS_labLeadProduct_List:{isCollection:!0,isLookup:!0},GridDetail_qv2w59yDS_labLeadProduct_List_BusinessRule_Filter:{value:{}}}}},GridDetail_qv2w59y_PredefinedFilter:{value:{items:{"960dff15-5cbd-4511-960f-28c93439df8c":{filterType:4,comparisonType:3,isEnabled:!0,trimDateTimeParameterToDate:!1,leftExpression:{expressionType:0,columnPath:"labLeadType"},isAggregative:!1,dataValueType:10,referenceSchemaName:"labLeadTypeLook",rightExpressions:[{expressionType:2,parameter:{dataValueType:10,value:{Name:"External referral",Id:"37f86a9d-47a3-4eff-99df-c6a7bfa36658",value:"37f86a9d-47a3-4eff-99df-c6a7bfa36658",displayValue:"External referral"}}}]}},logicalOperation:0,isEnabled:!0,filterType:6,rootSchemaName:"Lead"}},NumberAttribute_ujgyeek:{modelConfig:{path:"PDS.labRefCredits"}},StringAttribute_fugi19c:{modelConfig:{path:"PDS.labPromoCode"}},StringAttribute_yzjdef4:{modelConfig:{path:"PDS.INN"}},LookupAttribute_rnw265x:{modelConfig:{path:"PDS.ServiceLevel"},businessRulesConfig:{businessRulesFilters:["LookupAttribute_rnw265x_List_BusinessRule_Filter"]}},LookupAttribute_4kzy4zc:{modelConfig:{path:"PDS.Branch"},businessRulesConfig:{businessRulesFilters:["LookupAttribute_4kzy4zc_List_BusinessRule_Filter"]}},LookupAttribute_fad548g:{modelConfig:{path:"PDS.labHousehold"},businessRulesConfig:{businessRulesFilters:["LookupAttribute_fad548g_List_BusinessRule_Filter"]}},AccountType:{modelConfig:{path:"PDS.AccountType"},businessRulesConfig:{businessRulesFilters:["AccountType_List_BusinessRule_Filter"]}},AccountOwner:{modelConfig:{path:"PDS.AccountOwner"},businessRulesConfig:{businessRulesFilters:["AccountOwner_List_BusinessRule_Filter"]}},AccountPhone:{modelConfig:{path:"PDS.AccountPhone"}},DateTimeAttribute_3pyk1xn:{modelConfig:{path:"PDS.BirthDate"}},BooleanAttribute_cdtjpyl:{modelConfig:{path:"PDS.labPrequalified"}},StringAttribute_ipy5rkv:{modelConfig:{path:"PDS.PlaceOfBirth"}},LookupAttribute_3ge1lq2:{modelConfig:{path:"PDS.Citizenship"},businessRulesConfig:{businessRulesFilters:["LookupAttribute_3ge1lq2_List_BusinessRule_Filter"]}},NumberAttribute_j3teeye:{modelConfig:{path:"PDS.Age"}},LookupAttribute_zf5zinh:{modelConfig:{path:"PDS.labContTerr"},businessRulesConfig:{businessRulesFilters:["LookupAttribute_zf5zinh_List_BusinessRule_Filter"]}},GridDetail_7ryb0yc:{isCollection:!0,modelConfig:{path:"GridDetail_7ryb0ycDS"},viewModelConfig:{attributes:{GridDetail_7ryb0ycDS_CommunicationType:{modelConfig:{path:"GridDetail_7ryb0ycDS.CommunicationType"}},GridDetail_7ryb0ycDS_Number:{modelConfig:{path:"GridDetail_7ryb0ycDS.Number"}},GridDetail_7ryb0ycDS_Id:{modelConfig:{path:"GridDetail_7ryb0ycDS.Id"}}}}},GridDetail_rpob5tn:{isCollection:!0,modelConfig:{path:"GridDetail_rpob5tnDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_rpob5tnSorting"},filterAttributes:[{name:"GridDetailSearchFilter_e9rhpo0_GridDetail_rpob5tn",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_rpob5tnDS_AnniversaryType:{modelConfig:{path:"GridDetail_rpob5tnDS.AnniversaryType"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_rpob5tnDS_AnniversaryType_List_BusinessRule_Filter"]}},GridDetail_rpob5tnDS_Date:{modelConfig:{path:"GridDetail_rpob5tnDS.Date"},properties:{readonly:{defaultValue:!1}}},GridDetail_rpob5tnDS_Id:{modelConfig:{path:"GridDetail_rpob5tnDS.Id"}},GridDetail_rpob5tnDS_AnniversaryType_List:{isCollection:!0,isLookup:!0},GridDetail_rpob5tnDS_AnniversaryType_List_BusinessRule_Filter:{value:{}}}}},GridDetail_aev82uj:{isCollection:!0,modelConfig:{path:"GridDetail_aev82ujDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_aev82ujSorting"},filterAttributes:[{name:"GridDetailSearchFilter_hari1b2_GridDetail_aev82uj",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_aev82ujDS_labContact:{modelConfig:{path:"GridDetail_aev82ujDS.labContact"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_aev82ujDS_labContact_List_BusinessRule_Filter"]}},GridDetail_aev82ujDS_labMLModel:{modelConfig:{path:"GridDetail_aev82ujDS.labMLModel"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_aev82ujDS_labMLModel_List_BusinessRule_Filter"]}},GridDetail_aev82ujDS_labStatus:{modelConfig:{path:"GridDetail_aev82ujDS.labStatus"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_aev82ujDS_labStatus_List_BusinessRule_Filter"]}},GridDetail_aev82ujDS_labPredScore:{modelConfig:{path:"GridDetail_aev82ujDS.labPredScore"},properties:{readonly:{defaultValue:!1}}},GridDetail_aev82ujDS_Id:{modelConfig:{path:"GridDetail_aev82ujDS.Id"}},GridDetail_aev82ujDS_labContact_List:{isCollection:!0,isLookup:!0},GridDetail_aev82ujDS_labContact_List_BusinessRule_Filter:{value:{}},GridDetail_aev82ujDS_labMLModel_List:{isCollection:!0,isLookup:!0},GridDetail_aev82ujDS_labMLModel_List_BusinessRule_Filter:{value:{}},GridDetail_aev82ujDS_labStatus_List:{isCollection:!0,isLookup:!0},GridDetail_aev82ujDS_labStatus_List_BusinessRule_Filter:{value:{}}}}},GridDetail_kzffd99:{isCollection:!0,modelConfig:{path:"GridDetail_kzffd99DS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_kzffd99Sorting"},filterAttributes:[{name:"GridDetailSearchFilter_b3g2c6j_GridDetail_kzffd99",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_kzffd99DS_labHousehold:{modelConfig:{path:"GridDetail_kzffd99DS.labHousehold"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_kzffd99DS_labHousehold_List_BusinessRule_Filter"]}},GridDetail_kzffd99DS_labContact:{modelConfig:{path:"GridDetail_kzffd99DS.labContact"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_kzffd99DS_labContact_List_BusinessRule_Filter"]}},GridDetail_kzffd99DS_labPrdType:{modelConfig:{path:"GridDetail_kzffd99DS.labPrdType"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_kzffd99DS_labPrdType_List_BusinessRule_Filter"]}},GridDetail_kzffd99DS_labProduct:{modelConfig:{path:"GridDetail_kzffd99DS.labProduct"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_kzffd99DS_labProduct_List_BusinessRule_Filter"]}},GridDetail_kzffd99DS_labRelationship:{modelConfig:{path:"GridDetail_kzffd99DS.labRelationship"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_kzffd99DS_labRelationship_List_BusinessRule_Filter"]}},GridDetail_kzffd99DS_labProdCategory:{modelConfig:{path:"GridDetail_kzffd99DS.labProdCategory"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_kzffd99DS_labProdCategory_List_BusinessRule_Filter"]}},GridDetail_kzffd99DS_Id:{modelConfig:{path:"GridDetail_kzffd99DS.Id"}},GridDetail_kzffd99DS_labHousehold_List:{isCollection:!0,isLookup:!0},GridDetail_kzffd99DS_labHousehold_List_BusinessRule_Filter:{value:{}},GridDetail_kzffd99DS_labContact_List:{isCollection:!0,isLookup:!0},GridDetail_kzffd99DS_labContact_List_BusinessRule_Filter:{value:{}},GridDetail_kzffd99DS_labPrdType_List:{isCollection:!0,isLookup:!0},GridDetail_kzffd99DS_labPrdType_List_BusinessRule_Filter:{value:{}},GridDetail_kzffd99DS_labProduct_List:{isCollection:!0,isLookup:!0},GridDetail_kzffd99DS_labProduct_List_BusinessRule_Filter:{value:{}},GridDetail_kzffd99DS_labRelationship_List:{isCollection:!0,isLookup:!0},GridDetail_kzffd99DS_labRelationship_List_BusinessRule_Filter:{value:{}},GridDetail_kzffd99DS_labProdCategory_List:{isCollection:!0,isLookup:!0},GridDetail_kzffd99DS_labProdCategory_List_BusinessRule_Filter:{value:{}}}}},GridDetail_rz37ruw:{isCollection:!0,modelConfig:{path:"GridDetail_rz37ruwDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_rz37ruwSorting"},filterAttributes:[{name:"GridDetailSearchFilter_8ru8fou_GridDetail_rz37ruw",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_rz37ruwDS_labLookup1:{modelConfig:{path:"GridDetail_rz37ruwDS.labLookup1"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_rz37ruwDS_labLookup1_List_BusinessRule_Filter"]}},GridDetail_rz37ruwDS_labLookup2:{modelConfig:{path:"GridDetail_rz37ruwDS.labLookup2"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_rz37ruwDS_labLookup2_List_BusinessRule_Filter"]}},GridDetail_rz37ruwDS_Id:{modelConfig:{path:"GridDetail_rz37ruwDS.Id"}},GridDetail_rz37ruwDS_labLookup1_List:{isCollection:!0,isLookup:!0},GridDetail_rz37ruwDS_labLookup1_List_BusinessRule_Filter:{value:{}},GridDetail_rz37ruwDS_labLookup2_List:{isCollection:!0,isLookup:!0},GridDetail_rz37ruwDS_labLookup2_List_BusinessRule_Filter:{value:{}}}}},GridDetail_2gberl0:{isCollection:!0,modelConfig:{path:"GridDetail_2gberl0DS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_2gberl0Sorting"},filterAttributes:[{name:"GridDetailSearchFilter_zgf8jwn_GridDetail_2gberl0",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_2gberl0DS_BulkEmailType:{modelConfig:{path:"GridDetail_2gberl0DS.BulkEmailType"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_2gberl0DS_BulkEmailType_List_BusinessRule_Filter"]}},GridDetail_2gberl0DS_BulkEmailSubsStatus:{modelConfig:{path:"GridDetail_2gberl0DS.BulkEmailSubsStatus"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_2gberl0DS_BulkEmailSubsStatus_List_BusinessRule_Filter"]}},GridDetail_2gberl0DS_Id:{modelConfig:{path:"GridDetail_2gberl0DS.Id"}},GridDetail_2gberl0DS_BulkEmailType_List:{isCollection:!0,isLookup:!0},GridDetail_2gberl0DS_BulkEmailType_List_BusinessRule_Filter:{value:{}},GridDetail_2gberl0DS_BulkEmailSubsStatus_List:{isCollection:!0,isLookup:!0},GridDetail_2gberl0DS_BulkEmailSubsStatus_List_BusinessRule_Filter:{value:{}}}}},GridDetail_i8kds4l:{isCollection:!0,modelConfig:{path:"GridDetail_i8kds4lDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_i8kds4lSorting"},filterAttributes:[{name:"GridDetailSearchFilter_lxhotbi_GridDetail_i8kds4l",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_i8kds4lDS_Product:{modelConfig:{path:"GridDetail_i8kds4lDS.Product"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_i8kds4lDS_Product_List_BusinessRule_Filter"]}},GridDetail_i8kds4lDS_MLModel:{modelConfig:{path:"GridDetail_i8kds4lDS.MLModel"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_i8kds4lDS_MLModel_List_BusinessRule_Filter"]}},GridDetail_i8kds4lDS_Status:{modelConfig:{path:"GridDetail_i8kds4lDS.Status"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_i8kds4lDS_Status_List_BusinessRule_Filter"]}},GridDetail_i8kds4lDS_PredictionDate:{modelConfig:{path:"GridDetail_i8kds4lDS.PredictionDate"},properties:{readonly:{defaultValue:!1}}},GridDetail_i8kds4lDS_Score:{modelConfig:{path:"GridDetail_i8kds4lDS.Score"},properties:{readonly:{defaultValue:!1}}},GridDetail_i8kds4lDS_Id:{modelConfig:{path:"GridDetail_i8kds4lDS.Id"}},GridDetail_i8kds4lDS_Product_List:{isCollection:!0,isLookup:!0},GridDetail_i8kds4lDS_Product_List_BusinessRule_Filter:{value:{}},GridDetail_i8kds4lDS_MLModel_List:{isCollection:!0,isLookup:!0},GridDetail_i8kds4lDS_MLModel_List_BusinessRule_Filter:{value:{}},GridDetail_i8kds4lDS_Status_List:{isCollection:!0,isLookup:!0},GridDetail_i8kds4lDS_Status_List_BusinessRule_Filter:{value:{}}}}},GridDetail_j2e59o5:{isCollection:!0,modelConfig:{path:"GridDetail_j2e59o5DS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_j2e59o5Sorting"},filterAttributes:[{name:"GridDetailSearchFilter_9o47mn5_GridDetail_j2e59o5",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_j2e59o5DS_Number:{modelConfig:{path:"GridDetail_j2e59o5DS.Number"},properties:{readonly:{defaultValue:!1}}},GridDetail_j2e59o5DS_CreatedOn:{modelConfig:{path:"GridDetail_j2e59o5DS.CreatedOn"},properties:{readonly:{defaultValue:!1}}},GridDetail_j2e59o5DS_Status:{modelConfig:{path:"GridDetail_j2e59o5DS.Status"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_j2e59o5DS_Status_List_BusinessRule_Filter"]}},GridDetail_j2e59o5DS_Product:{modelConfig:{path:"GridDetail_j2e59o5DS.Product"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_j2e59o5DS_Product_List_BusinessRule_Filter"]}},GridDetail_j2e59o5DS_Id:{modelConfig:{path:"GridDetail_j2e59o5DS.Id"}},GridDetail_j2e59o5DS_Status_List:{isCollection:!0,isLookup:!0},GridDetail_j2e59o5DS_Status_List_BusinessRule_Filter:{value:{}},GridDetail_j2e59o5DS_Product_List:{isCollection:!0,isLookup:!0},GridDetail_j2e59o5DS_Product_List_BusinessRule_Filter:{value:{}}}}},GridDetail_li979xs:{isCollection:!0,modelConfig:{path:"GridDetail_li979xsDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_li979xsSorting"},filterAttributes:[{name:"GridDetailSearchFilter_p6ida3m_GridDetail_li979xs",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_li979xsDS_labName:{modelConfig:{path:"GridDetail_li979xsDS.labName"},properties:{readonly:{defaultValue:!1}}},GridDetail_li979xsDS_labLoanApp:{modelConfig:{path:"GridDetail_li979xsDS.labLoanApp"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_li979xsDS_labLoanApp_List_BusinessRule_Filter"]}},GridDetail_li979xsDS_labv:{modelConfig:{path:"GridDetail_li979xsDS.labv"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_li979xsDS_labv_List_BusinessRule_Filter"]}},GridDetail_li979xsDS_labLoanAm:{modelConfig:{path:"GridDetail_li979xsDS.labLoanAm"},properties:{readonly:{defaultValue:!1}}},GridDetail_li979xsDS_labCurrency:{modelConfig:{path:"GridDetail_li979xsDS.labCurrency"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_li979xsDS_labCurrency_List_BusinessRule_Filter"]}},GridDetail_li979xsDS_labLoanStatus:{modelConfig:{path:"GridDetail_li979xsDS.labLoanStatus"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_li979xsDS_labLoanStatus_List_BusinessRule_Filter"]}},GridDetail_li979xsDS_Id:{modelConfig:{path:"GridDetail_li979xsDS.Id"}},GridDetail_li979xsDS_labLoanApp_List:{isCollection:!0,isLookup:!0},GridDetail_li979xsDS_labLoanApp_List_BusinessRule_Filter:{value:{}},GridDetail_li979xsDS_labv_List:{isCollection:!0,isLookup:!0},GridDetail_li979xsDS_labv_List_BusinessRule_Filter:{value:{}},GridDetail_li979xsDS_labCurrency_List:{isCollection:!0,isLookup:!0},GridDetail_li979xsDS_labCurrency_List_BusinessRule_Filter:{value:{}},GridDetail_li979xsDS_labLoanStatus_List:{isCollection:!0,isLookup:!0},GridDetail_li979xsDS_labLoanStatus_List_BusinessRule_Filter:{value:{}}}}},GridDetail_8heyk4j:{isCollection:!0,modelConfig:{path:"GridDetail_8heyk4jDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_8heyk4jSorting"},filterAttributes:[{name:"GridDetailSearchFilter_cincz9x_GridDetail_8heyk4j",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_8heyk4jDS_BankAccountNumber:{modelConfig:{path:"GridDetail_8heyk4jDS.BankAccountNumber"},properties:{readonly:{defaultValue:!1}}},GridDetail_8heyk4jDS_Product:{modelConfig:{path:"GridDetail_8heyk4jDS.Product"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_8heyk4jDS_Product_List_BusinessRule_Filter"]}},GridDetail_8heyk4jDS_Type:{modelConfig:{path:"GridDetail_8heyk4jDS.Type"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_8heyk4jDS_Type_List_BusinessRule_Filter"]}},GridDetail_8heyk4jDS_Status:{modelConfig:{path:"GridDetail_8heyk4jDS.Status"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_8heyk4jDS_Status_List_BusinessRule_Filter"]}},GridDetail_8heyk4jDS_Id:{modelConfig:{path:"GridDetail_8heyk4jDS.Id"}},GridDetail_8heyk4jDS_Product_List:{isCollection:!0,isLookup:!0},GridDetail_8heyk4jDS_Product_List_BusinessRule_Filter:{value:{}},GridDetail_8heyk4jDS_Type_List:{isCollection:!0,isLookup:!0},GridDetail_8heyk4jDS_Type_List_BusinessRule_Filter:{value:{}},GridDetail_8heyk4jDS_Status_List:{isCollection:!0,isLookup:!0},GridDetail_8heyk4jDS_Status_List_BusinessRule_Filter:{value:{}}}}},GridDetail_i4bd2vv:{isCollection:!0,modelConfig:{path:"GridDetail_i4bd2vvDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_i4bd2vvSorting"},filterAttributes:[{name:"GridDetailSearchFilter_9nnxpsx_GridDetail_i4bd2vv",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_i4bd2vvDS_labName:{modelConfig:{path:"GridDetail_i4bd2vvDS.labName"},properties:{readonly:{defaultValue:!1}}},GridDetail_i4bd2vvDS_labProduct:{modelConfig:{path:"GridDetail_i4bd2vvDS.labProduct"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_i4bd2vvDS_labProduct_List_BusinessRule_Filter"]}},GridDetail_i4bd2vvDS_labStatus:{modelConfig:{path:"GridDetail_i4bd2vvDS.labStatus"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_i4bd2vvDS_labStatus_List_BusinessRule_Filter"]}},GridDetail_i4bd2vvDS_labAmount:{modelConfig:{path:"GridDetail_i4bd2vvDS.labAmount"},properties:{readonly:{defaultValue:!1}}},GridDetail_i4bd2vvDS_labDepBal:{modelConfig:{path:"GridDetail_i4bd2vvDS.labDepBal"},properties:{readonly:{defaultValue:!1}}},GridDetail_i4bd2vvDS_Id:{modelConfig:{path:"GridDetail_i4bd2vvDS.Id"}},GridDetail_i4bd2vvDS_labProduct_List:{isCollection:!0,isLookup:!0},GridDetail_i4bd2vvDS_labProduct_List_BusinessRule_Filter:{value:{}},GridDetail_i4bd2vvDS_labStatus_List:{isCollection:!0,isLookup:!0},GridDetail_i4bd2vvDS_labStatus_List_BusinessRule_Filter:{value:{}}}}},GridDetail_6k3851i:{isCollection:!0,modelConfig:{path:"GridDetail_6k3851iDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_6k3851iSorting"},filterAttributes:[{name:"GridDetailSearchFilter_rl732ka_GridDetail_6k3851i",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_6k3851iDS_Number:{modelConfig:{path:"GridDetail_6k3851iDS.Number"},properties:{readonly:{defaultValue:!1}}},GridDetail_6k3851iDS_BankCardType:{modelConfig:{path:"GridDetail_6k3851iDS.BankCardType"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_6k3851iDS_BankCardType_List_BusinessRule_Filter"]}},GridDetail_6k3851iDS_BankCardPaymentSystem:{modelConfig:{path:"GridDetail_6k3851iDS.BankCardPaymentSystem"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_6k3851iDS_BankCardPaymentSystem_List_BusinessRule_Filter"]}},GridDetail_6k3851iDS_BankCardCategory:{modelConfig:{path:"GridDetail_6k3851iDS.BankCardCategory"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_6k3851iDS_BankCardCategory_List_BusinessRule_Filter"]}},GridDetail_6k3851iDS_IsPrimary:{modelConfig:{path:"GridDetail_6k3851iDS.IsPrimary"}},GridDetail_6k3851iDS_BankCardStatus:{modelConfig:{path:"GridDetail_6k3851iDS.BankCardStatus"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_6k3851iDS_BankCardStatus_List_BusinessRule_Filter"]}},GridDetail_6k3851iDS_Id:{modelConfig:{path:"GridDetail_6k3851iDS.Id"}},GridDetail_6k3851iDS_BankCardType_List:{isCollection:!0,isLookup:!0},GridDetail_6k3851iDS_BankCardType_List_BusinessRule_Filter:{value:{}},GridDetail_6k3851iDS_BankCardPaymentSystem_List:{isCollection:!0,isLookup:!0},GridDetail_6k3851iDS_BankCardPaymentSystem_List_BusinessRule_Filter:{value:{}},GridDetail_6k3851iDS_BankCardCategory_List:{isCollection:!0,isLookup:!0},GridDetail_6k3851iDS_BankCardCategory_List_BusinessRule_Filter:{value:{}},GridDetail_6k3851iDS_BankCardStatus_List:{isCollection:!0,isLookup:!0},GridDetail_6k3851iDS_BankCardStatus_List_BusinessRule_Filter:{value:{}}}}},GridDetail_6jeoi45:{isCollection:!0,modelConfig:{path:"GridDetail_6jeoi45DS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_6jeoi45Sorting"},filterAttributes:[{name:"GridDetailSearchFilter_1jcvfml_GridDetail_6jeoi45",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_6jeoi45DS_labFinAccount:{modelConfig:{path:"GridDetail_6jeoi45DS.labFinAccount"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_6jeoi45DS_labFinAccount_List_BusinessRule_Filter"]}},GridDetail_6jeoi45DS_labActionItem:{modelConfig:{path:"GridDetail_6jeoi45DS.labActionItem"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_6jeoi45DS_labActionItem_List_BusinessRule_Filter"]}},GridDetail_6jeoi45DS_labOwner:{modelConfig:{path:"GridDetail_6jeoi45DS.labOwner"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_6jeoi45DS_labOwner_List_BusinessRule_Filter"]}},GridDetail_6jeoi45DS_labDueDate:{modelConfig:{path:"GridDetail_6jeoi45DS.labDueDate"},properties:{readonly:{defaultValue:!1}}},GridDetail_6jeoi45DS_labStatus:{modelConfig:{path:"GridDetail_6jeoi45DS.labStatus"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_6jeoi45DS_labStatus_List_BusinessRule_Filter"]}},GridDetail_6jeoi45DS_Id:{modelConfig:{path:"GridDetail_6jeoi45DS.Id"}},GridDetail_6jeoi45DS_labFinAccount_List:{isCollection:!0,isLookup:!0},GridDetail_6jeoi45DS_labFinAccount_List_BusinessRule_Filter:{value:{}},GridDetail_6jeoi45DS_labActionItem_List:{isCollection:!0,isLookup:!0},GridDetail_6jeoi45DS_labActionItem_List_BusinessRule_Filter:{value:{}},GridDetail_6jeoi45DS_labOwner_List:{isCollection:!0,isLookup:!0},GridDetail_6jeoi45DS_labOwner_List_BusinessRule_Filter:{value:{}},GridDetail_6jeoi45DS_labStatus_List:{isCollection:!0,isLookup:!0},GridDetail_6jeoi45DS_labStatus_List_BusinessRule_Filter:{value:{}}}}},GridDetail_xmrieqn:{isCollection:!0,modelConfig:{path:"GridDetail_xmrieqnDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_xmrieqnSorting"},filterAttributes:[{name:"GridDetailSearchFilter_m68l3fm_GridDetail_xmrieqn",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_xmrieqnDS_labActionItem:{modelConfig:{path:"GridDetail_xmrieqnDS.labActionItem"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_xmrieqnDS_labActionItem_List_BusinessRule_Filter"]}},GridDetail_xmrieqnDS_labDueDate:{modelConfig:{path:"GridDetail_xmrieqnDS.labDueDate"},properties:{readonly:{defaultValue:!1}}},GridDetail_xmrieqnDS_labOwner:{modelConfig:{path:"GridDetail_xmrieqnDS.labOwner"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_xmrieqnDS_labOwner_List_BusinessRule_Filter"]}},GridDetail_xmrieqnDS_labDepartment:{modelConfig:{path:"GridDetail_xmrieqnDS.labDepartment"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_xmrieqnDS_labDepartment_List_BusinessRule_Filter"]}},GridDetail_xmrieqnDS_labStatus:{modelConfig:{path:"GridDetail_xmrieqnDS.labStatus"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_xmrieqnDS_labStatus_List_BusinessRule_Filter"]}},GridDetail_xmrieqnDS_Id:{modelConfig:{path:"GridDetail_xmrieqnDS.Id"}},GridDetail_xmrieqnDS_labActionItem_List:{isCollection:!0,isLookup:!0},GridDetail_xmrieqnDS_labActionItem_List_BusinessRule_Filter:{value:{}},GridDetail_xmrieqnDS_labOwner_List:{isCollection:!0,isLookup:!0},GridDetail_xmrieqnDS_labOwner_List_BusinessRule_Filter:{value:{}},GridDetail_xmrieqnDS_labDepartment_List:{isCollection:!0,isLookup:!0},GridDetail_xmrieqnDS_labDepartment_List_BusinessRule_Filter:{value:{}},GridDetail_xmrieqnDS_labStatus_List:{isCollection:!0,isLookup:!0},GridDetail_xmrieqnDS_labStatus_List_BusinessRule_Filter:{value:{}}}}},GridDetail_oul85iz:{isCollection:!0,modelConfig:{path:"GridDetail_oul85izDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_oul85izSorting"},filterAttributes:[{name:"GridDetailSearchFilter_dz2oayf_GridDetail_oul85iz",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_oul85izDS_labName:{modelConfig:{path:"GridDetail_oul85izDS.labName"},properties:{readonly:{defaultValue:!1}}},GridDetail_oul85izDS_labMaintType:{modelConfig:{path:"GridDetail_oul85izDS.labMaintType"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_oul85izDS_labMaintType_List_BusinessRule_Filter"]}},GridDetail_oul85izDS_labMaintStatus:{modelConfig:{path:"GridDetail_oul85izDS.labMaintStatus"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_oul85izDS_labMaintStatus_List_BusinessRule_Filter"]}},GridDetail_oul85izDS_CreatedBy:{modelConfig:{path:"GridDetail_oul85izDS.CreatedBy"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_oul85izDS_CreatedBy_List_BusinessRule_Filter"]}},GridDetail_oul85izDS_CreatedOn:{modelConfig:{path:"GridDetail_oul85izDS.CreatedOn"},properties:{readonly:{defaultValue:!1}}},GridDetail_oul85izDS_Id:{modelConfig:{path:"GridDetail_oul85izDS.Id"}},GridDetail_oul85izDS_labMaintType_List:{isCollection:!0,isLookup:!0},GridDetail_oul85izDS_labMaintType_List_BusinessRule_Filter:{value:{}},GridDetail_oul85izDS_labMaintStatus_List:{isCollection:!0,isLookup:!0},GridDetail_oul85izDS_labMaintStatus_List_BusinessRule_Filter:{value:{}},GridDetail_oul85izDS_CreatedBy_List:{isCollection:!0,isLookup:!0},GridDetail_oul85izDS_CreatedBy_List_BusinessRule_Filter:{value:{}}}}},GridDetail_a4twh16:{isCollection:!0,modelConfig:{path:"GridDetail_a4twh16DS"},viewModelConfig:{attributes:{GridDetail_a4twh16DS_labName:{modelConfig:{path:"GridDetail_a4twh16DS.labName"}},GridDetail_a4twh16DS_Id:{modelConfig:{path:"GridDetail_a4twh16DS.Id"}}}}},DataGrid_h0jo4x2:{isCollection:!0,modelConfig:{path:"DataGrid_h0jo4x2DS",sortingConfig:{default:[{direction:"asc",columnName:"labPrequalDate"}],attributeName:"DataGrid_h0jo4x2Sorting"},pagingConfig:{rowCount:30},filterAttributes:[{name:"GridDetailSearchFilter_cbw5cs0_DataGrid_h0jo4x2",loadOnChange:!0}]},viewModelConfig:{attributes:{DataGrid_h0jo4x2DS_labProduct:{modelConfig:{path:"DataGrid_h0jo4x2DS.labProduct"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["DataGrid_h0jo4x2DS_labProduct_List_BusinessRule_Filter"]}},DataGrid_h0jo4x2DS_labStatus:{modelConfig:{path:"DataGrid_h0jo4x2DS.labStatus"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["DataGrid_h0jo4x2DS_labStatus_List_BusinessRule_Filter"]}},DataGrid_h0jo4x2DS_labPrequalDate:{modelConfig:{path:"DataGrid_h0jo4x2DS.labPrequalDate"},properties:{readonly:{defaultValue:!1}}},DataGrid_h0jo4x2DS_labPrequalScore:{modelConfig:{path:"DataGrid_h0jo4x2DS.labPrequalScore"},properties:{readonly:{defaultValue:!1}}},DataGrid_h0jo4x2DS_Id:{modelConfig:{path:"DataGrid_h0jo4x2DS.Id"}},DataGrid_h0jo4x2DS_labProduct_List:{isCollection:!0,isLookup:!0},DataGrid_h0jo4x2DS_labProduct_List_BusinessRule_Filter:{value:{}},DataGrid_h0jo4x2DS_labStatus_List:{isCollection:!0,isLookup:!0},DataGrid_h0jo4x2DS_labStatus_List_BusinessRule_Filter:{value:{}}}}},GridDetail_8fxxb7y:{isCollection:!0,modelConfig:{path:"GridDetail_8fxxb7yDS",filterAttributes:[{loadOnChange:!0,name:"GridDetail_8fxxb7y_PredefinedFilter"}]},viewModelConfig:{attributes:{GridDetail_8fxxb7yDS_Title:{modelConfig:{path:"GridDetail_8fxxb7yDS.Title"}},GridDetail_8fxxb7yDS_Id:{modelConfig:{path:"GridDetail_8fxxb7yDS.Id"}}}}},GridDetail_8fxxb7y_PredefinedFilter:{value:{items:{"dd33d3ed-bb83-4b83-9d8e-7f1654abeedc":{filterType:4,comparisonType:3,isEnabled:!0,trimDateTimeParameterToDate:!1,leftExpression:{expressionType:0,columnPath:"Type"},isAggregative:!1,dataValueType:10,referenceSchemaName:"ActivityType",rightExpressions:[{expressionType:2,parameter:{dataValueType:10,value:{Name:"Task",Id:"fbe0acdc-cfc0-df11-b00f-001d60e938c6",value:"fbe0acdc-cfc0-df11-b00f-001d60e938c6",displayValue:"Task"}}}]}},logicalOperation:0,isEnabled:!0,filterType:6,rootSchemaName:"Activity"}},DataGrid_5ytpfit:{isCollection:!0,modelConfig:{path:"DataGrid_5ytpfitDS"},viewModelConfig:{attributes:{DataGrid_5ytpfitDS_Title:{modelConfig:{path:"DataGrid_5ytpfitDS.Title"}},DataGrid_5ytpfitDS_Id:{modelConfig:{path:"DataGrid_5ytpfitDS.Id"}}}}},DataGrid_jzw7u0a:{isCollection:!0,modelConfig:{path:"DataGrid_jzw7u0aDS",sortingConfig:{default:[{direction:"asc",columnName:"Title"}],attributeName:"DataGrid_jzw7u0aSorting"},pagingConfig:{rowCount:30},filterAttributes:[{name:"GridDetailSearchFilter_amixsoz_DataGrid_jzw7u0a",loadOnChange:!0},{name:"SearchFilter_rxl83ud_DataGrid_jzw7u0a",loadOnChange:!0}]},viewModelConfig:{attributes:{DataGrid_jzw7u0aDS_Title:{modelConfig:{path:"DataGrid_jzw7u0aDS.Title"},properties:{readonly:{defaultValue:!1}}},DataGrid_jzw7u0aDS_StartDate:{modelConfig:{path:"DataGrid_jzw7u0aDS.StartDate"},properties:{readonly:{defaultValue:!1}}},DataGrid_jzw7u0aDS_Status:{modelConfig:{path:"DataGrid_jzw7u0aDS.Status"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["DataGrid_jzw7u0aDS_Status_List_BusinessRule_Filter"]}},DataGrid_jzw7u0aDS_Id:{modelConfig:{path:"DataGrid_jzw7u0aDS.Id"}},DataGrid_jzw7u0aDS_Status_List:{isCollection:!0,isLookup:!0},DataGrid_jzw7u0aDS_Status_List_BusinessRule_Filter:{value:{}}}}},DataGrid_ecoig1g:{isCollection:!0,modelConfig:{path:"DataGrid_ecoig1gDS",filterAttributes:[{loadOnChange:!0,name:"DataGrid_ecoig1g_PredefinedFilter"}],pagingConfig:{rowCount:30},sortingConfig:{attributeName:"DataGrid_ecoig1gSorting"}},viewModelConfig:{attributes:{DataGrid_ecoig1gDS_Title:{modelConfig:{path:"DataGrid_ecoig1gDS.Title"},properties:{readonly:{defaultValue:!1}}},DataGrid_ecoig1gDS_CreatedBy:{modelConfig:{path:"DataGrid_ecoig1gDS.CreatedBy"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["DataGrid_ecoig1gDS_CreatedBy_List_BusinessRule_Filter"]}},DataGrid_ecoig1gDS_CreatedOn:{modelConfig:{path:"DataGrid_ecoig1gDS.CreatedOn"},properties:{readonly:{defaultValue:!1}}},DataGrid_ecoig1gDS_Id:{modelConfig:{path:"DataGrid_ecoig1gDS.Id"}},DataGrid_ecoig1gDS_CreatedBy_List:{isCollection:!0,isLookup:!0},DataGrid_ecoig1gDS_CreatedBy_List_BusinessRule_Filter:{value:{}}}}},DataGrid_ecoig1g_PredefinedFilter:{value:{items:{"e4f9f008-bf68-4506-9761-f1f11109c661":{filterType:4,comparisonType:3,isEnabled:!0,trimDateTimeParameterToDate:!1,leftExpression:{expressionType:0,columnPath:"Type"},isAggregative:!1,dataValueType:10,referenceSchemaName:"ActivityType",rightExpressions:[{expressionType:2,parameter:{dataValueType:10,value:{Name:"Email",Id:"e2831dec-cfc0-df11-b00f-001d60e938c6",value:"e2831dec-cfc0-df11-b00f-001d60e938c6",displayValue:"Email"}}}]}},logicalOperation:0,isEnabled:!0,filterType:6,rootSchemaName:"Activity"}},GridDetail_x25mmsp:{isCollection:!0,modelConfig:{path:"GridDetail_x25mmspDS"},viewModelConfig:{attributes:{GridDetail_x25mmspDS_Caption:{modelConfig:{path:"GridDetail_x25mmspDS.Caption"}},GridDetail_x25mmspDS_Id:{modelConfig:{path:"GridDetail_x25mmspDS.Id"}}}}},DataGrid_y7eukvv:{isCollection:!0,modelConfig:{path:"DataGrid_y7eukvvDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"DataGrid_y7eukvvSorting"},filterAttributes:[{name:"GridDetailSearchFilter_lcebbc3_DataGrid_y7eukvv",loadOnChange:!0}]},viewModelConfig:{attributes:{DataGrid_y7eukvvDS_CreatedBy:{modelConfig:{path:"DataGrid_y7eukvvDS.CreatedBy"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["DataGrid_y7eukvvDS_CreatedBy_List_BusinessRule_Filter"]}},DataGrid_y7eukvvDS_CreatedOn:{modelConfig:{path:"DataGrid_y7eukvvDS.CreatedOn"},properties:{readonly:{defaultValue:!1}}},DataGrid_y7eukvvDS_Direction:{modelConfig:{path:"DataGrid_y7eukvvDS.Direction"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["DataGrid_y7eukvvDS_Direction_List_BusinessRule_Filter"]}},DataGrid_y7eukvvDS_CallerId:{modelConfig:{path:"DataGrid_y7eukvvDS.CallerId"},properties:{readonly:{defaultValue:!1}}},DataGrid_y7eukvvDS_CalledId:{modelConfig:{path:"DataGrid_y7eukvvDS.CalledId"},properties:{readonly:{defaultValue:!1}}},DataGrid_y7eukvvDS_Duration:{modelConfig:{path:"DataGrid_y7eukvvDS.Duration"},properties:{readonly:{defaultValue:!1}}},DataGrid_y7eukvvDS_Id:{modelConfig:{path:"DataGrid_y7eukvvDS.Id"}},DataGrid_y7eukvvDS_CreatedBy_List:{isCollection:!0,isLookup:!0},DataGrid_y7eukvvDS_CreatedBy_List_BusinessRule_Filter:{value:{}},DataGrid_y7eukvvDS_Direction_List:{isCollection:!0,isLookup:!0},DataGrid_y7eukvvDS_Direction_List_BusinessRule_Filter:{value:{}}}}},GridDetail_d5y3by3:{isCollection:!0,modelConfig:{path:"GridDetail_d5y3by3DS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_d5y3by3Sorting"},filterAttributes:[{name:"GridDetailSearchFilter_76kzn3h_GridDetail_d5y3by3",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_d5y3by3DS_Name:{modelConfig:{path:"GridDetail_d5y3by3DS.Name"},properties:{readonly:{defaultValue:!1}}},GridDetail_d5y3by3DS_Operator:{modelConfig:{path:"GridDetail_d5y3by3DS.Operator"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_d5y3by3DS_Operator_List_BusinessRule_Filter"]}},GridDetail_d5y3by3DS_Channel:{modelConfig:{path:"GridDetail_d5y3by3DS.Channel"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_d5y3by3DS_Channel_List_BusinessRule_Filter"]}},GridDetail_d5y3by3DS_Category:{modelConfig:{path:"GridDetail_d5y3by3DS.Category"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_d5y3by3DS_Category_List_BusinessRule_Filter"]}},GridDetail_d5y3by3DS_ChatDuration:{modelConfig:{path:"GridDetail_d5y3by3DS.ChatDuration"},properties:{readonly:{defaultValue:!1}}},GridDetail_d5y3by3DS_LastMessage:{modelConfig:{path:"GridDetail_d5y3by3DS.LastMessage"},properties:{readonly:{defaultValue:!1}}},GridDetail_d5y3by3DS_CreatedOn:{modelConfig:{path:"GridDetail_d5y3by3DS.CreatedOn"},properties:{readonly:{defaultValue:!1}}},GridDetail_d5y3by3DS_Id:{modelConfig:{path:"GridDetail_d5y3by3DS.Id"}},GridDetail_d5y3by3DS_Operator_List:{isCollection:!0,isLookup:!0},GridDetail_d5y3by3DS_Operator_List_BusinessRule_Filter:{value:{}},GridDetail_d5y3by3DS_Channel_List:{isCollection:!0,isLookup:!0},GridDetail_d5y3by3DS_Channel_List_BusinessRule_Filter:{value:{}},GridDetail_d5y3by3DS_Category_List:{isCollection:!0,isLookup:!0},GridDetail_d5y3by3DS_Category_List_BusinessRule_Filter:{value:{}}}}},GridDetail_x3cav3u:{isCollection:!0,modelConfig:{path:"GridDetail_x3cav3uDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_x3cav3uSorting"},filterAttributes:[{name:"GridDetailSearchFilter_ayoctrj_GridDetail_x3cav3u",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_x3cav3uDS_LeadName:{modelConfig:{path:"GridDetail_x3cav3uDS.LeadName"},properties:{readonly:{defaultValue:!1}}},GridDetail_x3cav3uDS_labLeadProduct:{modelConfig:{path:"GridDetail_x3cav3uDS.labLeadProduct"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_x3cav3uDS_labLeadProduct_List_BusinessRule_Filter"]}},GridDetail_x3cav3uDS_CreatedOn:{modelConfig:{path:"GridDetail_x3cav3uDS.CreatedOn"},properties:{readonly:{defaultValue:!1}}},GridDetail_x3cav3uDS_QualifyStatus:{modelConfig:{path:"GridDetail_x3cav3uDS.QualifyStatus"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_x3cav3uDS_QualifyStatus_List_BusinessRule_Filter"]}},GridDetail_x3cav3uDS_CreatedBy:{modelConfig:{path:"GridDetail_x3cav3uDS.CreatedBy"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_x3cav3uDS_CreatedBy_List_BusinessRule_Filter"]}},GridDetail_x3cav3uDS_Id:{modelConfig:{path:"GridDetail_x3cav3uDS.Id"}},GridDetail_x3cav3uDS_labLeadProduct_List:{isCollection:!0,isLookup:!0},GridDetail_x3cav3uDS_labLeadProduct_List_BusinessRule_Filter:{value:{}},GridDetail_x3cav3uDS_QualifyStatus_List:{isCollection:!0,isLookup:!0},GridDetail_x3cav3uDS_QualifyStatus_List_BusinessRule_Filter:{value:{}},GridDetail_x3cav3uDS_CreatedBy_List:{isCollection:!0,isLookup:!0},GridDetail_x3cav3uDS_CreatedBy_List_BusinessRule_Filter:{value:{}}}}},GridDetail_v0nminl:{isCollection:!0,modelConfig:{path:"GridDetail_v0nminlDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_v0nminlSorting"},filterAttributes:[{name:"GridDetailSearchFilter_2khf7nj_GridDetail_v0nminl",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_v0nminlDS_Title:{modelConfig:{path:"GridDetail_v0nminlDS.Title"},properties:{readonly:{defaultValue:!1}}},GridDetail_v0nminlDS_Stage:{modelConfig:{path:"GridDetail_v0nminlDS.Stage"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_v0nminlDS_Stage_List_BusinessRule_Filter"]}},GridDetail_v0nminlDS_labProduct:{modelConfig:{path:"GridDetail_v0nminlDS.labProduct"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_v0nminlDS_labProduct_List_BusinessRule_Filter"]}},GridDetail_v0nminlDS_CreatedOn:{modelConfig:{path:"GridDetail_v0nminlDS.CreatedOn"},properties:{readonly:{defaultValue:!1}}},GridDetail_v0nminlDS_Id:{modelConfig:{path:"GridDetail_v0nminlDS.Id"}},GridDetail_v0nminlDS_Stage_List:{isCollection:!0,isLookup:!0},GridDetail_v0nminlDS_Stage_List_BusinessRule_Filter:{value:{}},GridDetail_v0nminlDS_labProduct_List:{isCollection:!0,isLookup:!0},GridDetail_v0nminlDS_labProduct_List_BusinessRule_Filter:{value:{}}}}},GridDetail_3gt81gc:{isCollection:!0,modelConfig:{path:"GridDetail_3gt81gcDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_3gt81gcSorting"},filterAttributes:[{name:"GridDetailSearchFilter_xo35c4j_GridDetail_3gt81gc",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_3gt81gcDS_Number:{modelConfig:{path:"GridDetail_3gt81gcDS.Number"},properties:{readonly:{defaultValue:!1}}},GridDetail_3gt81gcDS_Type:{modelConfig:{path:"GridDetail_3gt81gcDS.Type"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_3gt81gcDS_Type_List_BusinessRule_Filter"]}},GridDetail_3gt81gcDS_StartDate:{modelConfig:{path:"GridDetail_3gt81gcDS.StartDate"},properties:{readonly:{defaultValue:!1}}},GridDetail_3gt81gcDS_State:{modelConfig:{path:"GridDetail_3gt81gcDS.State"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_3gt81gcDS_State_List_BusinessRule_Filter"]}},GridDetail_3gt81gcDS_Id:{modelConfig:{path:"GridDetail_3gt81gcDS.Id"}},GridDetail_3gt81gcDS_Type_List:{isCollection:!0,isLookup:!0},GridDetail_3gt81gcDS_Type_List_BusinessRule_Filter:{value:{}},GridDetail_3gt81gcDS_State_List:{isCollection:!0,isLookup:!0},GridDetail_3gt81gcDS_State_List_BusinessRule_Filter:{value:{}}}}},GridDetail_e9f5esh:{isCollection:!0,modelConfig:{path:"GridDetail_e9f5eshDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_e9f5eshSorting"},filterAttributes:[{name:"GridDetailSearchFilter_uicubtb_GridDetail_e9f5esh",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_e9f5eshDS_Number:{modelConfig:{path:"GridDetail_e9f5eshDS.Number"},properties:{readonly:{defaultValue:!1}}},GridDetail_e9f5eshDS_Type:{modelConfig:{path:"GridDetail_e9f5eshDS.Type"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_e9f5eshDS_Type_List_BusinessRule_Filter"]}},GridDetail_e9f5eshDS_Date:{modelConfig:{path:"GridDetail_e9f5eshDS.Date"},properties:{readonly:{defaultValue:!1}}},GridDetail_e9f5eshDS_State:{modelConfig:{path:"GridDetail_e9f5eshDS.State"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_e9f5eshDS_State_List_BusinessRule_Filter"]}},GridDetail_e9f5eshDS_Id:{modelConfig:{path:"GridDetail_e9f5eshDS.Id"}},GridDetail_e9f5eshDS_Type_List:{isCollection:!0,isLookup:!0},GridDetail_e9f5eshDS_Type_List_BusinessRule_Filter:{value:{}},GridDetail_e9f5eshDS_State_List:{isCollection:!0,isLookup:!0},GridDetail_e9f5eshDS_State_List_BusinessRule_Filter:{value:{}}}}},GridDetail_w2xsm9v:{isCollection:!0,modelConfig:{path:"GridDetail_w2xsm9vDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_w2xsm9vSorting"},filterAttributes:[{name:"GridDetailSearchFilter_tkug8ym_GridDetail_w2xsm9v",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_w2xsm9vDS_labName:{modelConfig:{path:"GridDetail_w2xsm9vDS.labName"},properties:{readonly:{defaultValue:!1}}},GridDetail_w2xsm9vDS_labIncType:{modelConfig:{path:"GridDetail_w2xsm9vDS.labIncType"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_w2xsm9vDS_labIncType_List_BusinessRule_Filter"]}},GridDetail_w2xsm9vDS_labIncStatus:{modelConfig:{path:"GridDetail_w2xsm9vDS.labIncStatus"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_w2xsm9vDS_labIncStatus_List_BusinessRule_Filter"]}},GridDetail_w2xsm9vDS_CreatedBy:{modelConfig:{path:"GridDetail_w2xsm9vDS.CreatedBy"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_w2xsm9vDS_CreatedBy_List_BusinessRule_Filter"]}},GridDetail_w2xsm9vDS_labIncLegEnt:{modelConfig:{path:"GridDetail_w2xsm9vDS.labIncLegEnt"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_w2xsm9vDS_labIncLegEnt_List_BusinessRule_Filter"]}},GridDetail_w2xsm9vDS_Id:{modelConfig:{path:"GridDetail_w2xsm9vDS.Id"}},GridDetail_w2xsm9vDS_labIncType_List:{isCollection:!0,isLookup:!0},GridDetail_w2xsm9vDS_labIncType_List_BusinessRule_Filter:{value:{}},GridDetail_w2xsm9vDS_labIncStatus_List:{isCollection:!0,isLookup:!0},GridDetail_w2xsm9vDS_labIncStatus_List_BusinessRule_Filter:{value:{}},GridDetail_w2xsm9vDS_CreatedBy_List:{isCollection:!0,isLookup:!0},GridDetail_w2xsm9vDS_CreatedBy_List_BusinessRule_Filter:{value:{}},GridDetail_w2xsm9vDS_labIncLegEnt_List:{isCollection:!0,isLookup:!0},GridDetail_w2xsm9vDS_labIncLegEnt_List_BusinessRule_Filter:{value:{}}}}},BooleanAttribute_8rteevs:{modelConfig:{path:"PDS.labIsNonGrata"}},BooleanAttribute_5akkqz8:{modelConfig:{path:"PDS.IsInBlackList"}},DateTimeAttribute_u8w7tmn:{modelConfig:{path:"PDS.labDateUpdate"}},DateTimeAttribute_2pg9927:{modelConfig:{path:"PDS.BlackListDate"}},StringAttribute_qprk1mr:{modelConfig:{path:"PDS.BlackListReason"}},LookupAttribute_ygg2rcf:{modelConfig:{path:"PDS.labFATCA"},businessRulesConfig:{businessRulesFilters:["LookupAttribute_ygg2rcf_List_BusinessRule_Filter"]}},StringAttribute_vljwl9a:{modelConfig:{path:"PDS.labFATCATIN"}},GridDetail_aea60u7:{isCollection:!0,modelConfig:{path:"GridDetail_aea60u7DS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_aea60u7Sorting"},filterAttributes:[{name:"GridDetailSearchFilter_teu5g4k_GridDetail_aea60u7",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_aea60u7DS_IsPrimary:{modelConfig:{path:"GridDetail_aea60u7DS.IsPrimary"}},GridDetail_aea60u7DS_RegDocumentType:{modelConfig:{path:"GridDetail_aea60u7DS.RegDocumentType"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_aea60u7DS_RegDocumentType_List_BusinessRule_Filter"]}},GridDetail_aea60u7DS_Series:{modelConfig:{path:"GridDetail_aea60u7DS.Series"},properties:{readonly:{defaultValue:!1}}},GridDetail_aea60u7DS_Number:{modelConfig:{path:"GridDetail_aea60u7DS.Number"},properties:{readonly:{defaultValue:!1}}},GridDetail_aea60u7DS_IssueDate:{modelConfig:{path:"GridDetail_aea60u7DS.IssueDate"},properties:{readonly:{defaultValue:!1}}},GridDetail_aea60u7DS_ValidUntil:{modelConfig:{path:"GridDetail_aea60u7DS.ValidUntil"},properties:{readonly:{defaultValue:!1}}},GridDetail_aea60u7DS_Id:{modelConfig:{path:"GridDetail_aea60u7DS.Id"}},GridDetail_aea60u7DS_RegDocumentType_List:{isCollection:!0,isLookup:!0},GridDetail_aea60u7DS_RegDocumentType_List_BusinessRule_Filter:{value:{}}}}},GridDetail_mgt5acd:{isCollection:!0,modelConfig:{path:"GridDetail_mgt5acdDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_mgt5acdSorting"},filterAttributes:[{name:"GridDetailSearchFilter_mi9f80u_GridDetail_mgt5acd",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_mgt5acdDS_labActive:{modelConfig:{path:"GridDetail_mgt5acdDS.labActive"}},GridDetail_mgt5acdDS_labValidated:{modelConfig:{path:"GridDetail_mgt5acdDS.labValidated"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_mgt5acdDS_labValidated_List_BusinessRule_Filter"]}},GridDetail_mgt5acdDS_labResult:{modelConfig:{path:"GridDetail_mgt5acdDS.labResult"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_mgt5acdDS_labResult_List_BusinessRule_Filter"]}},GridDetail_mgt5acdDS_CreatedOn:{modelConfig:{path:"GridDetail_mgt5acdDS.CreatedOn"},properties:{readonly:{defaultValue:!1}}},GridDetail_mgt5acdDS_Id:{modelConfig:{path:"GridDetail_mgt5acdDS.Id"}},GridDetail_mgt5acdDS_labValidated_List:{isCollection:!0,isLookup:!0},GridDetail_mgt5acdDS_labValidated_List_BusinessRule_Filter:{value:{}},GridDetail_mgt5acdDS_labResult_List:{isCollection:!0,isLookup:!0},GridDetail_mgt5acdDS_labResult_List_BusinessRule_Filter:{value:{}}}}},GridDetail_s74w3ph:{isCollection:!0,modelConfig:{path:"GridDetail_s74w3phDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_s74w3phSorting"},filterAttributes:[{name:"GridDetailSearchFilter_tapmy1u_GridDetail_s74w3ph",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_s74w3phDS_labActive:{modelConfig:{path:"GridDetail_s74w3phDS.labActive"}},GridDetail_s74w3phDS_labHQCountry:{modelConfig:{path:"GridDetail_s74w3phDS.labHQCountry"}},GridDetail_s74w3phDS_labResCountry:{modelConfig:{path:"GridDetail_s74w3phDS.labResCountry"}},GridDetail_s74w3phDS_CreatedOn:{modelConfig:{path:"GridDetail_s74w3phDS.CreatedOn"},properties:{readonly:{defaultValue:!1}}},GridDetail_s74w3phDS_Id:{modelConfig:{path:"GridDetail_s74w3phDS.Id"}}}}},SliderAttribute_lvul654:{modelConfig:{path:"PDS.labEngScore"}},StringAttribute_7wiyh13:{modelConfig:{path:"PDS.Phone"}},StringAttribute_un28j6b:{modelConfig:{path:"PDS.LinkedIn"}},GridDetail_uw745zj:{isCollection:!0,modelConfig:{path:"GridDetail_uw745zjDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_uw745zjSorting"},filterAttributes:[{name:"GridDetailSearchFilter_lgzyj6t_GridDetail_uw745zj",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_uw745zjDS_labSurvey:{modelConfig:{path:"GridDetail_uw745zjDS.labSurvey"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_uw745zjDS_labSurvey_List_BusinessRule_Filter"]}},GridDetail_uw745zjDS_CreatedOn:{modelConfig:{path:"GridDetail_uw745zjDS.CreatedOn"},properties:{readonly:{defaultValue:!1}}},GridDetail_uw745zjDS_labSurveyRespStatus:{modelConfig:{path:"GridDetail_uw745zjDS.labSurveyRespStatus"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_uw745zjDS_labSurveyRespStatus_List_BusinessRule_Filter"]}},GridDetail_uw745zjDS_Id:{modelConfig:{path:"GridDetail_uw745zjDS.Id"}},GridDetail_uw745zjDS_labSurvey_List:{isCollection:!0,isLookup:!0},GridDetail_uw745zjDS_labSurvey_List_BusinessRule_Filter:{value:{}},GridDetail_uw745zjDS_labSurveyRespStatus_List:{isCollection:!0,isLookup:!0},GridDetail_uw745zjDS_labSurveyRespStatus_List_BusinessRule_Filter:{value:{}}}}},GridDetail_7c5ohiu:{isCollection:!0,modelConfig:{path:"GridDetail_7c5ohiuDS",pagingConfig:{rowCount:30},sortingConfig:{attributeName:"GridDetail_7c5ohiuSorting"},filterAttributes:[{name:"GridDetailSearchFilter_842fhbw_GridDetail_7c5ohiu",loadOnChange:!0}]},viewModelConfig:{attributes:{GridDetail_7c5ohiuDS_SmrBulkSms:{modelConfig:{path:"GridDetail_7c5ohiuDS.SmrBulkSms"},properties:{readonly:{defaultValue:!1}},businessRulesConfig:{businessRulesFilters:["GridDetail_7c5ohiuDS_SmrBulkSms_List_BusinessRule_Filter"]}},GridDetail_7c5ohiuDS_CreatedOn:{modelConfig:{path:"GridDetail_7c5ohiuDS.CreatedOn"},properties:{readonly:{defaultValue:!1}}},GridDetail_7c5ohiuDS_Id:{modelConfig:{path:"GridDetail_7c5ohiuDS.Id"}},GridDetail_7c5ohiuDS_SmrBulkSms_List:{isCollection:!0,isLookup:!0},GridDetail_7c5ohiuDS_SmrBulkSms_List_BusinessRule_Filter:{value:{}}}}},GridDetail_rz37ruw_EditingCells:{value:null},GridDetail_2gberl0_EditingCells:{value:null},GridDetail_rpob5tn_EditingCells:{value:null},GridDetail_kzffd99_EditingCells:{value:null},GridDetail_aev82uj_EditingCells:{value:null},GridDetail_tvn7nvn_EditingCells:{value:null},GridDetail_qv2w59y_EditingCells:{value:null},GridDetail_i8kds4l_EditingCells:{value:null},GridDetail_j2e59o5_EditingCells:{value:null},GridDetail_li979xs_EditingCells:{value:null},GridDetail_8heyk4j_EditingCells:{value:null},GridDetail_i4bd2vv_EditingCells:{value:null},GridDetail_6k3851i_EditingCells:{value:null},GridDetail_6jeoi45_EditingCells:{value:null},GridDetail_xmrieqn_EditingCells:{value:null},GridDetail_oul85iz_EditingCells:{value:null},CasesList_EditingCells:{value:null},DataGrid_h0jo4x2_EditingCells:{value:null},DataGrid_jzw7u0a_EditingCells:{value:null},DataGrid_ecoig1g_EditingCells:{value:null},DataGrid_y7eukvv_EditingCells:{value:null},GridDetail_d5y3by3_EditingCells:{value:null},GridDetail_x3cav3u_EditingCells:{value:null},GridDetail_v0nminl_EditingCells:{value:null},GridDetail_3gt81gc_EditingCells:{value:null},GridDetail_e9f5esh_EditingCells:{value:null},GridDetail_uw745zj_EditingCells:{value:null},GridDetail_7c5ohiu_EditingCells:{value:null},GridDetail_w2xsm9v_EditingCells:{value:null},GridDetail_aea60u7_EditingCells:{value:null},GridDetail_mgt5acd_EditingCells:{value:null},GridDetail_s74w3ph_EditingCells:{value:null},AttachmentList_EditingCells:{value:null},GridDetail_rz37ruwSelectionState:{},GridDetail_2gberl0SelectionState:{},GridDetail_rpob5tnSelectionState:{},GridDetail_kzffd99SelectionState:{},GridDetail_aev82ujSelectionState:{},AddressListSelectionState:{},GridDetail_tvn7nvnSelectionState:{},GridDetail_qv2w59ySelectionState:{},GridDetail_i8kds4lSelectionState:{},GridDetail_j2e59o5SelectionState:{},GridDetail_li979xsSelectionState:{},GridDetail_8heyk4jSelectionState:{},GridDetail_i4bd2vvSelectionState:{},GridDetail_6k3851iSelectionState:{},GridDetail_6jeoi45SelectionState:{},GridDetail_xmrieqnSelectionState:{},GridDetail_oul85izSelectionState:{},CasesListSelectionState:{},LeadListSelectionState:{},OpportunityListSelectionState:{},DataGrid_h0jo4x2SelectionState:{},DataGrid_jzw7u0aSelectionState:{},DataGrid_ecoig1gSelectionState:{},DataGrid_y7eukvvSelectionState:{},GridDetail_d5y3by3SelectionState:{},GridDetail_x3cav3uSelectionState:{},GridDetail_v0nminlSelectionState:{},GridDetail_3gt81gcSelectionState:{},GridDetail_e9f5eshSelectionState:{},MrktLeadListSelectionState:{},GridDetail_uw745zjSelectionState:{},BulkEmailListSelectionState:{},EventListSelectionState:{},GridDetail_7c5ohiuSelectionState:{},CampaignListSelectionState:{},GridDetail_w2xsm9vSelectionState:{},GridDetail_aea60u7SelectionState:{},GridDetail_mgt5acdSelectionState:{},GridDetail_s74w3phSelectionState:{},AttachmentListSelectionState:{},GridDetail_rz37ruwSorting:{},GridDetail_2gberl0Sorting:{},GridDetail_rpob5tnSorting:{},GridDetail_kzffd99Sorting:{},GridDetail_aev82ujSorting:{},AddressListSorting:{},GridDetail_tvn7nvnSorting:{},GridDetail_qv2w59ySorting:{},GridDetail_i8kds4lSorting:{},GridDetail_j2e59o5Sorting:{},GridDetail_li979xsSorting:{},GridDetail_8heyk4jSorting:{},GridDetail_i4bd2vvSorting:{},GridDetail_6k3851iSorting:{},GridDetail_6jeoi45Sorting:{},GridDetail_xmrieqnSorting:{},GridDetail_oul85izSorting:{},CasesListSorting:{},LeadListSorting:{},OpportunityListSorting:{},DataGrid_h0jo4x2Sorting:{},DataGrid_jzw7u0aSorting:{},DataGrid_ecoig1gSorting:{},DataGrid_y7eukvvSorting:{},GridDetail_d5y3by3Sorting:{},GridDetail_x3cav3uSorting:{},GridDetail_v0nminlSorting:{},GridDetail_3gt81gcSorting:{},GridDetail_e9f5eshSorting:{},MrktLeadListSorting:{},GridDetail_uw745zjSorting:{},BulkEmailListSorting:{},EventListSorting:{},GridDetail_7c5ohiuSorting:{},CampaignListSorting:{},GridDetail_w2xsm9vSorting:{},GridDetail_aea60u7Sorting:{},GridDetail_mgt5acdSorting:{},GridDetail_s74w3phSorting:{},AttachmentListSorting:{},Account_List:{isCollection:!0,isLookup:!0},Account_List_BusinessRule_Filter:{value:{}},Type_List:{isCollection:!0,isLookup:!0},Type_List_BusinessRule_Filter:{value:{}},LookupAttribute_rnw265x_List:{isCollection:!0,isLookup:!0},LookupAttribute_rnw265x_List_BusinessRule_Filter:{value:{}},LookupAttribute_4kzy4zc_List:{isCollection:!0,isLookup:!0},LookupAttribute_4kzy4zc_List_BusinessRule_Filter:{value:{}},Owner_List:{isCollection:!0,isLookup:!0},Owner_List_BusinessRule_Filter:{value:{}},LookupAttribute_fad548g_List:{isCollection:!0,isLookup:!0},LookupAttribute_fad548g_List_BusinessRule_Filter:{value:{}},AccountType_List:{isCollection:!0,isLookup:!0},AccountType_List_BusinessRule_Filter:{value:{}},AccountOwner_List:{isCollection:!0,isLookup:!0},AccountOwner_List_BusinessRule_Filter:{value:{}},AccountAccountCategory_List:{isCollection:!0,isLookup:!0},AccountAccountCategory_List_BusinessRule_Filter:{value:{}},AccountIndustry_List:{isCollection:!0,isLookup:!0},AccountIndustry_List_BusinessRule_Filter:{value:{}},LookupAttribute_zk0ksk2_List:{isCollection:!0,isLookup:!0},LookupAttribute_zk0ksk2_List_BusinessRule_Filter:{value:{}},SalutationType_List:{isCollection:!0,isLookup:!0},SalutationType_List_BusinessRule_Filter:{value:{}},Language_List:{isCollection:!0,isLookup:!0},Language_List_BusinessRule_Filter:{value:{}},Gender_List:{isCollection:!0,isLookup:!0},Gender_List_BusinessRule_Filter:{value:{}},LookupAttribute_3ge1lq2_List:{isCollection:!0,isLookup:!0},LookupAttribute_3ge1lq2_List_BusinessRule_Filter:{value:{}},LookupAttribute_zf5zinh_List:{isCollection:!0,isLookup:!0},LookupAttribute_zf5zinh_List_BusinessRule_Filter:{value:{}},LookupAttribute_ygg2rcf_List:{isCollection:!0,isLookup:!0},LookupAttribute_ygg2rcf_List_BusinessRule_Filter:{value:{}},GridDetailSearchFilter_8ru8fouSearchValue:{value:""},GridDetailSearchFilter_8ru8fouSearchFilteredColumn:{value:""},GridDetailSearchFilter_8ru8fou_GridDetail_rz37ruw:{value:{}},GridDetailSearchFilter_zgf8jwnSearchValue:{value:""},GridDetailSearchFilter_zgf8jwnSearchFilteredColumn:{value:""},GridDetailSearchFilter_zgf8jwn_GridDetail_2gberl0:{value:{}},GridDetailSearchFilter_e9rhpo0SearchValue:{value:""},GridDetailSearchFilter_e9rhpo0SearchFilteredColumn:{value:""},GridDetailSearchFilter_e9rhpo0_GridDetail_rpob5tn:{value:{}},GridDetailSearchFilter_b3g2c6jSearchValue:{value:""},GridDetailSearchFilter_b3g2c6jSearchFilteredColumn:{value:""},GridDetailSearchFilter_b3g2c6j_GridDetail_kzffd99:{value:{}},GridDetailSearchFilter_hari1b2SearchValue:{value:""},GridDetailSearchFilter_hari1b2SearchFilteredColumn:{value:""},GridDetailSearchFilter_hari1b2_GridDetail_aev82uj:{value:{}},AddressSearchFilterSearchValue:{value:""},AddressSearchFilterSearchFilteredColumn:{value:""},AddressSearchFilter_AddressList:{value:{}},GridDetailSearchFilter_0wrikixSearchValue:{value:""},GridDetailSearchFilter_0wrikixSearchFilteredColumn:{value:""},GridDetailSearchFilter_0wrikix_GridDetail_tvn7nvn:{value:{}},GridDetailSearchFilter_3wx4p17SearchValue:{value:""},GridDetailSearchFilter_3wx4p17SearchFilteredColumn:{value:""},GridDetailSearchFilter_3wx4p17_GridDetail_qv2w59y:{value:{}},GridDetailSearchFilter_lxhotbiSearchValue:{value:""},GridDetailSearchFilter_lxhotbiSearchFilteredColumn:{value:""},GridDetailSearchFilter_lxhotbi_GridDetail_i8kds4l:{value:{}},GridDetailSearchFilter_9o47mn5SearchValue:{value:""},GridDetailSearchFilter_9o47mn5SearchFilteredColumn:{value:""},GridDetailSearchFilter_9o47mn5_GridDetail_j2e59o5:{value:{}},GridDetailSearchFilter_p6ida3mSearchValue:{value:""},GridDetailSearchFilter_p6ida3mSearchFilteredColumn:{value:""},GridDetailSearchFilter_p6ida3m_GridDetail_li979xs:{value:{}},GridDetailSearchFilter_cincz9xSearchValue:{value:""},GridDetailSearchFilter_cincz9xSearchFilteredColumn:{value:""},GridDetailSearchFilter_cincz9x_GridDetail_8heyk4j:{value:{}},GridDetailSearchFilter_rl732kaSearchValue:{value:""},GridDetailSearchFilter_rl732kaSearchFilteredColumn:{value:""},GridDetailSearchFilter_rl732ka_GridDetail_6k3851i:{value:{}},GridDetailSearchFilter_9nnxpsxSearchValue:{value:""},GridDetailSearchFilter_9nnxpsxSearchFilteredColumn:{value:""},GridDetailSearchFilter_9nnxpsx_GridDetail_i4bd2vv:{value:{}},GridDetailSearchFilter_1jcvfmlSearchValue:{value:""},GridDetailSearchFilter_1jcvfmlSearchFilteredColumn:{value:""},GridDetailSearchFilter_1jcvfml_GridDetail_6jeoi45:{value:{}},GridDetailSearchFilter_m68l3fmSearchValue:{value:""},GridDetailSearchFilter_m68l3fmSearchFilteredColumn:{value:""},GridDetailSearchFilter_m68l3fm_GridDetail_xmrieqn:{value:{}},GridDetailSearchFilter_dz2oayfSearchValue:{value:""},GridDetailSearchFilter_dz2oayfSearchFilteredColumn:{value:""},GridDetailSearchFilter_dz2oayf_GridDetail_oul85iz:{value:{}},CasesSearchFilterSearchValue:{value:""},CasesSearchFilterSearchFilteredColumn:{value:""},CasesSearchFilter_CasesList:{value:{}},LeadSearchFilterSearchValue:{value:""},LeadSearchFilterSearchFilteredColumn:{value:""},LeadSearchFilter_LeadList:{value:{}},OpportunitySearchFilterSearchValue:{value:""},OpportunitySearchFilterSearchFilteredColumn:{value:""},OpportunitySearchFilter_OpportunityList:{value:{}},GridDetailSearchFilter_cbw5cs0SearchValue:{value:""},GridDetailSearchFilter_cbw5cs0SearchFilteredColumn:{value:""},GridDetailSearchFilter_cbw5cs0_DataGrid_h0jo4x2:{value:{}},GridDetailSearchFilter_amixsozSearchValue:{value:""},GridDetailSearchFilter_amixsozSearchFilteredColumn:{value:""},GridDetailSearchFilter_amixsoz_DataGrid_jzw7u0a:{value:{}},SearchFilter_rxl83udSearchValue:{value:""},SearchFilter_rxl83udSearchFilteredColumn:{value:""},SearchFilter_rxl83ud_DataGrid_jzw7u0a:{value:{}},GridDetailSearchFilter_lcebbc3SearchValue:{value:""},GridDetailSearchFilter_lcebbc3SearchFilteredColumn:{value:""},GridDetailSearchFilter_lcebbc3_DataGrid_y7eukvv:{value:{}},GridDetailSearchFilter_76kzn3hSearchValue:{value:""},GridDetailSearchFilter_76kzn3hSearchFilteredColumn:{value:""},GridDetailSearchFilter_76kzn3h_GridDetail_d5y3by3:{value:{}},GridDetailSearchFilter_ayoctrjSearchValue:{value:""},GridDetailSearchFilter_ayoctrjSearchFilteredColumn:{value:""},GridDetailSearchFilter_ayoctrj_GridDetail_x3cav3u:{value:{}},GridDetailSearchFilter_uicubtbSearchValue:{value:""},GridDetailSearchFilter_uicubtbSearchFilteredColumn:{value:""},GridDetailSearchFilter_uicubtb_GridDetail_e9f5esh:{value:{}},GridDetailSearchFilter_xo35c4jSearchValue:{value:""},GridDetailSearchFilter_xo35c4jSearchFilteredColumn:{value:""},GridDetailSearchFilter_xo35c4j_GridDetail_3gt81gc:{value:{}},GridDetailSearchFilter_2khf7njSearchValue:{value:""},GridDetailSearchFilter_2khf7njSearchFilteredColumn:{value:""},GridDetailSearchFilter_2khf7nj_GridDetail_v0nminl:{value:{}},MrktLeadSearchFilterSearchValue:{value:""},MrktLeadSearchFilterSearchFilteredColumn:{value:""},MrktLeadSearchFilter_MrktLeadList:{value:{}},GridDetailSearchFilter_lgzyj6tSearchValue:{value:""},GridDetailSearchFilter_lgzyj6tSearchFilteredColumn:{value:""},GridDetailSearchFilter_lgzyj6t_GridDetail_uw745zj:{value:{}},BulkEmailSearchFilterSearchValue:{value:""},BulkEmailSearchFilterSearchFilteredColumn:{value:""},BulkEmailSearchFilter_BulkEmailList:{value:{}},EventSearchFilterSearchValue:{value:""},EventSearchFilterSearchFilteredColumn:{value:""},EventSearchFilter_EventList:{value:{}},GridDetailSearchFilter_842fhbwSearchValue:{value:""},GridDetailSearchFilter_842fhbwSearchFilteredColumn:{value:""},GridDetailSearchFilter_842fhbw_GridDetail_7c5ohiu:{value:{}},CampaignSearchFilterSearchValue:{value:""},CampaignSearchFilterSearchFilteredColumn:{value:""},CampaignSearchFilter_CampaignList:{value:{}},GridDetailSearchFilter_tkug8ymSearchValue:{value:""},GridDetailSearchFilter_tkug8ymSearchFilteredColumn:{value:""},GridDetailSearchFilter_tkug8ym_GridDetail_w2xsm9v:{value:{}},GridDetailSearchFilter_teu5g4kSearchValue:{value:""},GridDetailSearchFilter_teu5g4kSearchFilteredColumn:{value:""},GridDetailSearchFilter_teu5g4k_GridDetail_aea60u7:{value:{}},GridDetailSearchFilter_mi9f80uSearchValue:{value:""},GridDetailSearchFilter_mi9f80uSearchFilteredColumn:{value:""},GridDetailSearchFilter_mi9f80u_GridDetail_mgt5acd:{value:{}},GridDetailSearchFilter_tapmy1uSearchValue:{value:""},GridDetailSearchFilter_tapmy1uSearchFilteredColumn:{value:""},GridDetailSearchFilter_tapmy1u_GridDetail_s74w3ph:{value:{}}}}};Vs.viewModelConfig,Vs.viewModelConfig;class Ls extends yn{load(e){return(0,h.of)(ko).pipe((0,Li.c)(150))}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(Ls)))(n||Ls)}})()}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Ls,factory:Ls.\u0275fac})}}class Ln extends yn{constructor(e,t,n,a){super(),this.zone=e,this._schemaCacheService=t,this._featureService=n,this._measurePerformanceService=a,this._schemaCacheInvalidatorService=(0,i.inject)(tn),this._amdSchemaLoaderHelperService=(0,i.inject)(Vn),window.Terrasoft||(window.Terrasoft={configuration:{Structures:{}},SchemaType:{}},window.define("terrasoft",[],()=>window.Terrasoft)),this._schemaCacheInvalidatorService.init()}_loadAmdSchemaParts(e){return this._featureService.getFeatureState("AllowCachingRequireJS").pipe((0,z.n)(t=>this._amdSchemaLoaderHelperService.loadAmdSchemaList(e,t).pipe(this._measurePerformanceService.measure$(`AMDSchemaLoader.loadAmdSchemaList.${e}`))))}load(e){return this.zone.runOutsideAngular(()=>(0,h.forkJoin)([this._loadAmdSchemaParts(e),this._featureService.getFeatureState("DisableRuntimeSchemaCaching")]).pipe((0,h.tap)(([t,n])=>{if(!n){const r=[...(0,Z.A)(t)].reverse();this._schemaCacheService.add(...r)}}),(0,z.n)(([t])=>new h.Observable(n=>this.zone.run(()=>{n.next(t),n.complete()})))))}static{this.\u0275fac=function(t){return new(t||Ln)(i.\u0275\u0275inject(i.NgZone),i.\u0275\u0275inject(fn),i.\u0275\u0275inject(Gt),i.\u0275\u0275inject(_.gcc))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Ln,factory:Ln.\u0275fac})}}var Br=b(96934);class Kn{}class Fs extends Kn{constructor(e){super(),this._userSchemaProfileService=e,this._baseKey="Schema__"}getProfileKey(e){return this._baseKey+e}get(e){const t=this.getProfileKey(e);return this._userSchemaProfileService.getProfile(t).pipe((0,E.T)(n=>(0,Re.A)(n)?[]:n))}set(e,t){const n=this.getProfileKey(e);let a={name:t.name,schema:t.schema,localizableImages:t.localizableImages??{},localizableStrings:t.localizableStrings??{}};return a=this._schemaIsEmpty(a)?null:a,this._userSchemaProfileService.saveProfile(n,a,{sysAdminUnitIds:[t.name]}).pipe((0,E.T)(()=>t))}_schemaIsEmpty(e){const t=(0,Re.A)(e.localizableStrings)&&(0,Re.A)(e.localizableImages),n=Object.entries(e.schema).every(([,a])=>(0,Re.A)(a));return t&&n}static{this.\u0275fac=function(t){return new(t||Fs)(i.\u0275\u0275inject(An))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Fs,factory:Fs.\u0275fac})}}class Fi extends yn{constructor(e,t,n){super(),this._profileSchemaProvider=e,this._userInfo=t,this._measurePerformanceService=n}_getResourcesByCurrentCulture(e){const t=this._userInfo.cultureInfo.sysCultureName,n=Object.keys(e??{}).map(a=>{const r=e[a]??{};return[a,r[t]||Object.values(r).shift()]}).filter(([,a])=>void 0!==a);return Object.fromEntries(n)}load(e){return this._profileSchemaProvider.get(e).pipe(this._measurePerformanceService.measure$(`ProfileSchemaLoader.load.${e}`),(0,E.T)(t=>(0,Re.A)(t)?[]:(0,Br.A)(t,"name").map(n=>({...n,name:n.name??"",structure:{},resources:{localizableImages:this._getResourcesByCurrentCulture(n.localizableImages),localizableStrings:this._getResourcesByCurrentCulture(n.localizableStrings)}}))))}static{this.\u0275fac=function(t){return new(t||Fi)(i.\u0275\u0275inject(Kn),i.\u0275\u0275inject(_.oqB),i.\u0275\u0275inject(_.gcc))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Fi,factory:Fi.\u0275fac})}}class ks extends yn{load(e){return(0,h.of)(Os)}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(ks)))(n||ks)}})()}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:ks,factory:ks.\u0275fac})}}function Xe(o){return"string"==typeof o&&o.startsWith("$")&&o.length>1}function _n(o){return Xe(o)&&/^\$(\w+\.)*\w+$/.test(o)}function kc(o){return"string"==typeof o&&o.startsWith(`$${_.c2Z}.${_.ckl.string}.`)}function jo(o){return/^\$(?<AttributeName>.+):(?<PropertyName>.+?)(?=(?==(?<defValue>.*))|(?=$))/.test(o)}function Bo(o){return"string"==typeof o&&/@event\b/.test(o)}function Go(o){return!!o.match(/^'.*'$/)}function $d(o){return!isNaN(Number(o))&&!isNaN(parseFloat(o))}function Uo(o){return"true"===o||"false"===o}function pa(o){const e={expression:o},t=o.split("|").map(n=>n.trim());if(Xe(o)){const n=t.shift();e.binding=n,kc(n)&&(e.resourcePath=n.substring(1)),jo(n)&&(e.attributeProperty=n.substring(1)),_n(n)&&(e.attributePath=n.substring(1))}else if(Bo(o)){const n=t.shift();e.event=n.substring(7)}else if(!function gi(o){return"string"==typeof o&&/^([^\d.][\w.]+)(\s*:\s*[\w'".$]+)+.*$/.test(o)}(o))return e.value=o,e;return e.converters=t.map(n=>{const[a,...r]=n.split(":").map(u=>u.trim());return{type:a,parameters:r.map(u=>pa(u))}}),e}const zo=/\w+/,ki=/\w+/,Zd=new RegExp(`\\s*\\|\\s*(crt\\.ToCollectionFilters)\\s*:\\s*['"]${zo.source}['"](?:\\s*:\\s*\\$(${ki.source}))?`),Gr=new RegExp(`(\\s*\\|\\s*crt\\.SkipIfSelectionEmpty\\s*:\\s*\\$${ki.source})?`);new RegExp(`^\\$(${zo.source})${Zd.source}${Gr.source}`);class bn{static{this._actionAppliers=new Map}static register(e,t){bn._actionAppliers.set(e,t)}get(e){const t=bn._actionAppliers.get(e.typeName);if(!t)throw new Error(`Business rule applier for change type ${e.typeName} not found.`);return new t(e)}static{this.\u0275fac=function(t){return new(t||bn)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:bn,factory:bn.\u0275fac})}}function yi(o){return function(e){(0,c.checkTypeNameFormat)(o.type,"BusinessRulesActionApplierTypeName"),(0,c.checkCrtTypeNamePascalCase)(o.type),bn.register(o.type,e)}}var wt,nn;!function(o){o.Model="Model",o.ViewModel="ViewModel"}(wt||(wt={})),function(o){o.Unknown="Unknown",o.Init="Init",o.Create="Create",o.Copy="Copy",o.Update="Update"}(nn||(nn={}));class Fn{constructor(e){this.action=e}_logError(e){return console.error("Error when applying business rule",this.action),console.error(e),(0,h.of)(null)}apply(e,t){let n;try{n=this.innerApply(e,t)}catch(a){return this._logError(a)}return n.pipe((0,h.catchError)(a=>this._logError(a)))}}class Ho{static _getPrimaryDisplayAttributeName(e){return(0,A.A)(function*(){return(yield e.getSchema()).primaryDisplayAttributeName})()}static getLookupValue(e,t){var n=this;return(0,A.A)(function*(){const a=yield c.Model.create(e),r=yield a.getSchema(),u=[r.primaryAttributeName,r.primaryDisplayAttributeName];r.primaryColorAttributeName&&u.push(r.primaryColorAttributeName);const p=yield a.load({parameters:[{type:c.ModelParameterType.PrimaryColumnValue,value:t}],attributes:u});if(!p||0===p.length)throw new Error(`Can't find value for '${t}'`);if(p.length>1)throw new Error(`Load more than 1 data row for '${t}'`);const f=p[0],S=yield n._getPrimaryDisplayAttributeName(a),w={value:t,displayValue:f[S]};return r.primaryColorAttributeName&&(w.primaryColorValue=f[r.primaryColorAttributeName]),w})()}}let $a=class extends Fn{_getValue(e){const t=e.value,n=t.value;if(null==n)return(0,h.of)(n);const a=t.dataValueTypeName,u=Object.values(_.QSp).find(f=>f.name===a)?.type??c.DataValueType.Text,p=(0,_.ZNE)(n,u);return u===c.DataValueType.Lookup?(0,h.from)(Ho.getLookupValue(t.referenceSchemaName,t.value)):(0,h.of)(p)}_setValue(e,t,n){const a=this.action.path,r=e.getViewModelAttributePath(t,a);return r?e.setValue({[r]:n}):e.setModelValues(t,{[a]:n})}innerApply(e,t){const n=this.action,a=n.value;return!0===n.skip?(0,h.of)(null):this._getValue(n).pipe((0,h.switchMap)(r=>{if(t.type===wt.Model)return this._setValue(e,t.id,r);if(a.scope)return this._setValue(e,a.scope,r);const u=e.getAttributeNameByViewItemName(n.path);return u?e.setValue({[u]:r}):e.setValue({[n.path]:r})}))}};$a=(0,I.Cg)([yi({type:"crt.SetValue"})],$a);class ma extends Fn{_getAttributeNames(e,t,n){if(t.type===wt.Model)return e.getViewModelAttributePaths(t.id,n);let a=e.getAttributeNameByViewItemName(n);return a||(a=(0,_.WdJ)(n)),[a]}setAttributePropertyValue(e,t,n){e.setAttributePropertyValue(t,this.propertyName,n)}resetAttributePropertyValue(e,t){e.resetAttributePropertyValue(t,this.propertyName)}innerApply(e,t){const n=this.action.path;if(!n)return(0,h.of)(!0);const r=n.split(":")[0],u=this._getAttributeNames(e,t,r);return u&&u.forEach(p=>{this.action.resetToDefault?this.resetAttributePropertyValue(e,p):this.setAttributePropertyValue(e,p,this.action.value)}),(0,h.of)(!0)}}function qa(o,e){return Bi.apply(this,arguments)}function Bi(){return Bi=(0,A.A)(function*(o,e){let t=yield o[e];return t instanceof c.FilterGroup||(t=new c.FilterGroup,o[e]=t),t}),Bi.apply(this,arguments)}function Bs(o,e,t){return Qn.apply(this,arguments)}function Qn(){return Qn=(0,A.A)(function*(o,e,t){return(yield qa(o,e)).filters.get(t)||new c.FilterGroup(c.LogicalOperatorType.And)}),Qn.apply(this,arguments)}function Gi(o,e,t,n){return U.apply(this,arguments)}function U(){return U=(0,A.A)(function*(o,e,t,n){const a=yield qa(o,e);a.add(n,t),o[e]=a}),U.apply(this,arguments)}function y(o,e,t,n,a,r){return T.apply(this,arguments)}function T(){return T=(0,A.A)(function*(o,e,t,n,a,r){const u=function m(o,e,t){return o.getViewModelAttributePaths(e,t).map(r=>(0,_.KUn)(r)).map(r=>(0,_.aGE)(r))}(o,e,t);for(const p of u){const f=yield Bs(o,p,a);f.add(n,r),yield Gi(o,p,a,f)}}),T.apply(this,arguments)}let G=class extends Fn{_createLookupFilterGroup(e,t){const n=new c.FilterGroup(c.LogicalOperatorType.And),a=new c.CompareFilter(c.ComparisonType.Equal,new c.ColumnExpression({columnPath:e}),new c.ParameterExpression({value:t}));return n.add(a,"lookupFilter"),n}_setFilterForScope(e,t){const n=this.action,a=n.path;if(n.value){const{leftExpression:r,rightExpression:u}=n.value;return y(e,t,a,this._createLookupFilterGroup(r,u.value),n.businessRuleUId,n.actionUId)}return y(e,t,a,new c.FilterGroup,n.businessRuleUId,n.actionUId)}innerApply(e,t){const n=this._setFilterForScope(e,t.id);return(0,h.from)(n)}};G=(0,I.Cg)([yi({type:"crt.FilterLookup"})],G);let Q=class extends Fn{_getFilter(e){if(e){const t=e.value,n=JSON.parse(t);return c.FilterParser.fromJson(n)}return new c.FilterGroup}innerApply(e,t){const n=this.action,a=this._getFilter(n.value),r=y(e,t.id,n.path,a,n.businessRuleUId,n.actionUId);return(0,h.from)(r)}};Q=(0,I.Cg)([yi({type:"crt.SetFilter"})],Q);let Ie=class extends ma{constructor(){super(...arguments),this.propertyName="visible"}};Ie=(0,I.Cg)([yi({type:"crt.SetVisibilityPropertyActionApplier"})],Ie);let Et=class extends ma{constructor(){super(...arguments),this.propertyName="readonly"}_getPropertyName(e,t){return e.getInvariabilityPropertyName(t)??this.propertyName}setAttributePropertyValue(e,t,n){const a=this._getPropertyName(e,t);e.setAttributePropertyValue(t,a,n)}resetAttributePropertyValue(e,t){const n=this._getPropertyName(e,t);e.resetAttributePropertyValue(t,n)}};Et=(0,I.Cg)([yi({type:"crt.SetReadonlyPropertyActionApplier"})],Et);let Ke=class extends ma{constructor(){super(...arguments),this.propertyName="required"}};Ke=(0,I.Cg)([yi({type:"crt.SetRequiredPropertyActionApplier"})],Ke);class gt{constructor(e){this.typeName="Terrasoft.Core.BusinessRules.Models.Conditions.BaseBusinessRuleDesignCondition",this.uId=e?e?.uId:(0,c.generateGuid)()}toMetadata(){return{typeName:this.typeName,uId:this.uId}}copy(){return new gt({...this.toMetadata(),uId:(0,c.generateGuid)()})}isValid(){return!!this.uId}onDataSourceAttributeNameChanged(e,t,n){}isAttributeUsed(e,t){return!1}getWarningMessages(){return[]}}class Wa extends gt{}class xt{constructor(e){this.typeName="Terrasoft.Core.BusinessRules.Models.BusinessRuleAction",this.enabled=!0,this.uId=e?.uId||(0,c.generateGuid)(),e&&(this.enabled=e.enabled)}toMetadata(){return{typeName:this.typeName,uId:this.uId,enabled:this.enabled}}getTypeName(){return this.typeName}getApplicability(){return[]}isValid(){return!0}onDataSourceAttributeNameChanged(e,t,n){}isAttributeUsed(e,t){return!1}getAffectedItems(){return[]}getRequiredItems(){return[]}}class Sn{get dataValueTypeName(){return this._dataValueTypeName}set dataValueTypeName(e){this._dataValueTypeName=e}get isLookup(){return this.dataValueTypeName===_.QSp[c.DataValueType.Lookup].name}get referenceSchemaName(){return this._referenceSchemaName}set referenceSchemaName(e){this._referenceSchemaName!==e&&(this._referenceSchemaName=e)}constructor(e){this.typeName="Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleExpression",this._dataValueTypeName="",this._referenceSchemaName="",this.type=_.ZXh.Const,this.uId=e?.uId||(0,c.generateGuid)(),e&&(this._dataValueTypeName=e.dataValueTypeName??"",this.type=e.type||this.type,this._referenceSchemaName=e.referenceSchemaName??"")}toMetadata(){return{typeName:this.typeName,uId:this.uId,type:this.type,dataValueTypeName:this.dataValueTypeName,referenceSchemaName:this.referenceSchemaName}}copy(){return new Sn({...this.toMetadata(),uId:(0,c.generateGuid)()})}isValid(){return!!this.uId}onDataSourceAttributeNameChanged(e,t,n){}getAffectedItem(){return null}clear(){throw new Error(`clear not implemented for BusinessRuleDesignExpression ${this.constructor.name}`)}setValue(e){throw new Error(`setValue not implemented for BusinessRuleDesignExpression ${this.constructor.name}`)}getValue(){throw new Error(`getValue not implemented for BusinessRuleDesignExpression ${this.constructor.name}`)}isEmpty(){throw new Error(`isEmpty not implemented for BusinessRuleDesignExpression ${this.constructor.name}`)}isAttributeUsed(e,t){return!1}}class Ui{static{this._expressionsTypes=new Map}static register(e,t){this._expressionsTypes.set(e,t)}static _getExpressionType(e){return this._expressionsTypes.get(e)??null}get(e){if(!e)return new Sn;const t=Ui._getExpressionType(e.typeName);return t?new t(e):new Sn(e)}}function Ur(o,e){return o===e||Jd(o)&&Jd(e)}function Jd(o){return!o||"null"===o}function kn(o){return function(e){Ui.register(o.typeName,e)}}var Yd;let $o=Yd=class extends Sn{constructor(e){super(e),this.typeName="Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleAttributeExpression",this.path="",this.scopeId="",e&&(this.path=e.path,this.scopeId="null"===e.scopeId?"":e.scopeId)}toMetadata(){return{...super.toMetadata(),path:this.path,scopeId:this.scopeId}}copy(){return new Yd({...this.toMetadata(),uId:(0,c.generateGuid)()})}isValid(){return super.isValid()&&!!this.path}onDataSourceAttributeNameChanged(e,t,n){this.scopeId===e&&this.path===t&&(this.path=n)}getAffectedItem(){return{name:this.path}}isAttributeUsed(e,t){return this.path===t&&Ur(this.scopeId,e)}};$o=Yd=(0,I.Cg)([kn({typeName:"Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleAttributeExpression"}),(0,I.Sn)("design:paramtypes",[Object])],$o);class ha extends xt{constructor(e){super(e),this._expressionFactory=new Ui,this.typeName="Terrasoft.Core.BusinessRules.Models.BusinessRuleAction",this.executorName="",e&&(this.executorName=e.executorName,this.expression=new $o(e.expression),e.value&&(this.value=this._expressionFactory.get(e.value)))}getExpressionAffectedItems(){const e=this.expression?.getAffectedItem()??null;return e?[e]:[]}toMetadata(){return{...super.toMetadata(),executorName:this.executorName,expression:this.expression?.toMetadata(),value:this.value?.toMetadata()}}clone(){return new ha(this.toMetadata())}copy(){const e=new ha({...this.toMetadata(),uId:(0,c.generateGuid)()});return e.expression=this.expression?.copy(),e.value=this.value?.copy(),e}getApplicability(){if(!this.expression?.path)return[];const t=this.expression.path.split(".").shift();return t?[{path:t}]:[]}isValid(){return super.isValid()&&!!this.expression?.isValid()&&!!this.value?.isValid()}getAffectedItems(){const e=this.getExpressionAffectedItems();return[...super.getAffectedItems(),...e]}}class Ph extends xt{constructor(){super(...arguments),this.typeName="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionSetProperty"}}class Gs extends Ph{constructor(e){super(e),this.items=[],e&&(Array.isArray(e.items)?this.items=e.items:this.items=e.items?.length>0?e.items.split(","):[])}_getAffectedItems(){return(this.items??[]).map(t=>({name:t}))}toMetadata(){return{...super.toMetadata(),items:this.items?.length>0?this.items.join(","):""}}getApplicability(){return this.isValid()?this.items.map(e=>({path:e})):[]}isValid(){return super.isValid()&&this.items?.length>0}getAffectedItems(){return[...super.getAffectedItems(),...this._getAffectedItems()]}isAttributeUsed(e,t){return this.items.includes(t)}}class qo extends Gs{constructor(){super(...arguments),this.typeName="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionEditableElement"}clone(){return new qo(this.toMetadata())}copy(){return new qo({...this.toMetadata(),uId:(0,c.generateGuid)()})}}var Wo;let Bc=Wo=class extends Sn{constructor(e){super(e),this.typeName="Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleFilterLookupExpression",this.path="",this.filterExpression="",e&&(this.path=e.path,this.filterExpression="null"===e.filterExpression?"":e.filterExpression)}toMetadata(){return{...super.toMetadata(),path:this.path,filterExpression:this.filterExpression}}copy(){return new Wo({...this.toMetadata(),uId:(0,c.generateGuid)()})}isValid(){return super.isValid()&&!!this.path&&!!this.filterExpression}getAffectedItem(){return{name:this.path}}isAttributeUsed(e,t){return this.path===t}};Bc=Wo=(0,I.Cg)([kn({typeName:"Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleFilterLookupExpression"}),(0,I.Sn)("design:paramtypes",[Object])],Bc);class Gc extends ha{constructor(e){super(e),this.typeName="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionFilterLookup",this.clearValue=!1,this.populateValue=!1,e?(this.clearValue=e.clearValue??!1,this.populateValue=e.populateValue??!1):(this.clearValue=!0,this.populateValue=!0),this._processMetadata(e)}_isOldMetadataFormat(e){const t=!!e.expression?.path&&"null"!==e.expression.path,n=e.value,a=!!n?.value&&"null"!==n.value;return t&&a}_convertOldMetadata(e){const t={...e},n=e.expression?.path||"",r=e.value?.value,u={path:r,filterExpression:""},p={path:n,filterExpression:""};if(r.includes(".")){const[f,...S]=r.split(".");u.path=f,u.filterExpression=S.join(".")}return{...t,leftExpression:u,rightExpression:p}}_processMetadata(e){e&&(this._isOldMetadataFormat(e)&&(e=this._convertOldMetadata(e)),delete this.expression,delete this.value,this.leftExpression=new Bc(e?.leftExpression),this.rightExpression=new Bc(e?.rightExpression))}toMetadata(){return{...super.toMetadata(),leftExpression:this.leftExpression?.toMetadata(),rightExpression:this.rightExpression?.toMetadata(),clearValue:this.clearValue,populateValue:this.populateValue}}clone(){return new Gc({...this.toMetadata()})}copy(){return new Gc({...super.copy().toMetadata(),leftExpression:this.leftExpression?.toMetadata(),rightExpression:this.rightExpression?.toMetadata(),clearValue:this.clearValue,populateValue:this.populateValue})}getApplicability(){return this.leftExpression?.path?[{path:this.leftExpression.path}]:[]}isValid(){return!!this.leftExpression?.isValid()&&!!this.rightExpression?.path}getAffectedItems(){const e=this.leftExpression?.getAffectedItem()??null,t=[...super.getAffectedItems()];return e&&t.push(e),t}getRequiredItems(){return[this.rightExpression?.getAffectedItem()].filter(e=>e)}isAttributeUsed(e,t){return this.leftExpression.isAttributeUsed(e,t)||this.rightExpression.isAttributeUsed(e,t)}}class Zo extends Gs{constructor(){super(...arguments),this.typeName="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionHideElement"}clone(){return new Zo(this.toMetadata())}copy(){return new Zo({...this.toMetadata(),uId:(0,c.generateGuid)()})}}const Oh="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionOptionalElement";class zr extends Gs{constructor(){super(...arguments),this.typeName=Oh}clone(){return new zr(this.toMetadata())}copy(){return new zr({...this.toMetadata(),uId:(0,c.generateGuid)()})}}class Jo extends Gs{constructor(){super(...arguments),this.typeName="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionReadonlyElement"}clone(){return new Jo(this.toMetadata())}copy(){return new Jo({...this.toMetadata(),uId:(0,c.generateGuid)()})}}const Vh="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionRequiredElement";class Yo extends Gs{constructor(){super(...arguments),this.typeName=Vh}clone(){return new Yo(this.toMetadata())}copy(){return new Yo({...this.toMetadata(),uId:(0,c.generateGuid)()})}}var Qd;let Us=Qd=class extends Sn{get value(){return this._value}set value(e){this._value!==e&&(this._displayValueInitialized=!1,this._value=e)}get referenceSchemaName(){return super.referenceSchemaName}set referenceSchemaName(e){this.referenceSchemaName!==e&&(super.referenceSchemaName=e,this._displayValueInitialized=!1)}get displayValue(){return this.isLookup&&this.referenceSchemaName?this._displayValueInitialized?this._displayValue:null:(this._displayValue=this.value,this._displayValueInitialized=!0,this._displayValue)}set displayValue(e){this._displayValue=e??"",this._displayValueInitialized=null!=e}get dataValueTypeName(){return super.dataValueTypeName}set dataValueTypeName(e){this.dataValueTypeName!==e&&(super.dataValueTypeName=e,this._displayValueInitialized=!1)}constructor(e){super(e),this.typeName="Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleValueExpression",this._value="",this._displayValue="",this._displayValueInitialized=!1,e&&(this._value=e.value)}initDisplayValue(){var e=this;return(0,A.A)(function*(){if(e._displayValueInitialized)return Promise.resolve(e._displayValue);if(e.isLookup&&e.referenceSchemaName&&e._value){const t=yield Ho.getLookupValue(e.referenceSchemaName,e._value);e._displayValue=t.displayValue}else e._displayValue=e.value;return e._displayValueInitialized=!0,Promise.resolve(e._displayValue)})()}toMetadata(){return{...super.toMetadata(),value:this.value}}copy(){return new Qd({...this.toMetadata(),uId:(0,c.generateGuid)()})}isValid(){return!!super.isValid()&&(this.isLookup?(0,c.isGuid)(this.value):null!=this.value&&""!==this.value)}clear(){this._value="",this._displayValue="",this._displayValueInitialized=!1}setValue(e){e?(this.value=e.value,this.displayValue=e.displayValue):this.clear()}getValue(){return{value:this.value,displayValue:this.displayValue}}isEmpty(){return!this.value}};Us=Qd=(0,I.Cg)([kn({typeName:"Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleValueExpression"}),(0,I.Sn)("design:paramtypes",[Object])],Us);class Ko extends ha{constructor(e){super(e),this.typeName="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionSetFilter",e&&(this.value=new Us(e.value))}clone(){return new Ko(this.toMetadata())}copy(){return new Ko(super.copy().toMetadata())}getApplicability(){return this.expression?.path?[{path:this.expression.path}]:[]}isAttributeUsed(e,t){return this.expression.isAttributeUsed(e,t)}}class Uc extends ha{constructor(){super(...arguments),this.typeName="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionSetValue"}clone(){return new Uc(this.toMetadata())}copy(){return new Uc(super.copy().toMetadata())}}var zc;!function(o){o.DataSource="DataSource",o.Page="Page"}(zc||(zc={}));class Hr extends ha{constructor(e){super(e),this.typeName="Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleSetValueItem",this.scope=e?.scopeId??"","null"===this.scope&&(this.scope="")}clone(){return new Hr(this.toMetadata())}copy(){return new Hr({...super.copy().toMetadata(),scopeId:this.scope})}toMetadata(){return{...super.toMetadata(),scopeId:this.scope}}getApplicability(){if(!this.expression?.path)return[];const t=this.expression.path.split(".").shift();if(!t)return[];const n={path:t};return""!==this.scope&&(n.applicability=zc.DataSource,n.scope=this.scope),[n]}isAttributeUsed(e,t){return this.expression.path===t&&Ur(this.scope,e)}}class Hc extends ha{constructor(e){super(e),this.typeName="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionSetValues",this.items=[],e&&(this.items=e.items?.map(t=>new Hr(t)))}getExpressionAffectedItems(){return[]}clone(){return new Hc(this.toMetadata())}copy(){return new Hc({...super.copy().toMetadata(),items:this.items.map(e=>e.toMetadata())})}toMetadata(){const e={...super.toMetadata(),items:this.items?.length>0?this.items.map(t=>t.toMetadata()):[]};return this.items?.length>0&&(delete e.expression,delete e.value),e}getApplicability(){return this.items?.length?this.items.flatMap(e=>e.getApplicability()):[]}isValid(){return this.items?.length>0&&this.items.every(e=>e.isValid())}getAffectedItems(){const t=(this.items??[]).map(n=>n.getAffectedItems()).flat();return[...super.getAffectedItems(),...t]}getRequiredItems(){return this.getAffectedItems()}isAttributeUsed(e,t){return this.items.some(n=>n.isAttributeUsed(e,t))}}class Qo extends Gs{constructor(){super(...arguments),this.typeName="Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionShowElement"}clone(){return new Qo(this.toMetadata())}copy(){return new Qo({...this.toMetadata(),uId:(0,c.generateGuid)()})}}class zs{get(e){return"Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionShowElement"===e.typeName?new Qo(e):"Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionHideElement"===e.typeName?new Zo(e):"Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionReadonlyElement"===e.typeName?new Jo(e):"Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionEditableElement"===e.typeName?new qo(e):e.typeName===Oh?new zr(e):e.typeName===Vh?new Yo(e):"Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionFilterLookup"===e.typeName?new Gc(e):"Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionSetFilter"===e.typeName?new Ko(e):"Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionSetValue"===e.typeName?new Uc(e):"Terrasoft.Core.BusinessRules.Models.Actions.BusinessRuleActionSetValues"===e.typeName?new Hc(e):new ha(e)}static{this.\u0275fac=function(t){return new(t||zs)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:zs,factory:zs.\u0275fac,providedIn:"root"})}}const Xo="Terrasoft.Core.BusinessRules.Models.Conditions.BusinessRuleGroupCondition";class $r extends gt{constructor(e){super(e),this._businessRuleDesignExpressionFactory=new Ui,this.typeName="Terrasoft.Core.BusinessRules.Models.Conditions.BusinessRuleCondition",this.comparisonType=_.Uqx.IsNull,e&&(e.leftExpression&&(this.leftExpression=this._businessRuleDesignExpressionFactory.get(e.leftExpression)),e.rightExpression&&(this.rightExpression=this._businessRuleDesignExpressionFactory.get(e.rightExpression)),null!=e.comparisonType&&(this.comparisonType=e.comparisonType))}toMetadata(){return{...super.toMetadata(),leftExpression:this.leftExpression?.toMetadata(),rightExpression:this.rightExpression?.toMetadata(),comparisonType:this.comparisonType}}copy(){const e=new $r({...this.toMetadata(),uId:(0,c.generateGuid)()});return e.leftExpression=this.leftExpression?.copy(),e.rightExpression=this.rightExpression?.copy(),e}isValid(){if(!super.isValid()||null==this.comparisonType)return!1;const e=!!this.leftExpression?.isValid();switch(this.comparisonType){case _.Uqx.IsNull:case _.Uqx.IsNotNull:return e;case _.Uqx.Equal:case _.Uqx.NotEqual:return e&&!!this.rightExpression?.isValid();default:return!0}}onDataSourceAttributeNameChanged(e,t,n){this.leftExpression.onDataSourceAttributeNameChanged(e,t,n),this.rightExpression?.onDataSourceAttributeNameChanged(e,t,n)}_getAttributeExpressionWarningMessage(e){if(!e.dataValueTypeName)return null;const t=Object.values(_.QSp).find(n=>n.name===e.dataValueTypeName)?.type;return t===c.DataValueType.MAXSIZE_TEXT?{message:"BusinessRules.Errors.MaxSizeInConditionLimitedWarningMessage",type:"warn"}:t===c.DataValueType.RICH_TEXT||t===c.DataValueType.Image?{message:"BusinessRules.Errors.NotSupportedInConditionTypesWarningMessage",type:"error"}:null}getWarningMessages(){const e=[];if(this.comparisonType===_.Uqx.Equal||this.comparisonType===_.Uqx.NotEqual){if(this.leftExpression instanceof $o){const t=this._getAttributeExpressionWarningMessage(this.leftExpression);t&&e.push(t)}if(this.rightExpression instanceof $o){const t=this._getAttributeExpressionWarningMessage(this.rightExpression);t&&e.push(t)}}return e}isAttributeUsed(e,t){return this.leftExpression?.isAttributeUsed(e,t)||this.rightExpression?.isAttributeUsed(e,t)}}class el extends gt{constructor(e){super(e),this.typeName=Xo,this.logicalOperation=_.Dpk.And,this.conditions=[],e&&(this.logicalOperation=e.logicalOperation,this.conditions=e.conditions?.map(t=>t.typeName===Xo?new el(t):new $r(t))??[])}_copyConditions(){return this.conditions.map(e=>e.copy())}toMetadata(){return{...super.toMetadata(),logicalOperation:this.logicalOperation,conditions:this.conditions.map(e=>e.toMetadata())}}copy(){const e=new el({...this.toMetadata(),uId:(0,c.generateGuid)()});return e.conditions=this._copyConditions(),e}isValid(){return!(!super.isValid()||!this.conditions)&&(0===this.conditions.length||this.conditions.every(t=>t.isValid()))}onDataSourceAttributeNameChanged(e,t,n){this.conditions.forEach(a=>a.onDataSourceAttributeNameChanged(e,t,n))}isAttributeUsed(e,t){return this.conditions.some(n=>n.isAttributeUsed(e,t))}getWarningMessages(){return this.conditions.map(e=>e.getWarningMessages()).flat()}}class Wy{get(e){return e.typeName===Xo?new el(e):new $r(e)}}class $c{get actions(){return Object.freeze(this._actions)}constructor(e){this._businessRuleDesignActionFactory=new zs,this._businessRuleDesignConditionFactory=new Wy,this._typeName="Terrasoft.Core.BusinessRules.Models.BusinessRuleCase",this._actions=[],this.uId=e?.uId||(0,c.generateGuid)(),this.condition=e?.condition?this._businessRuleDesignConditionFactory.get(e.condition):new Wa,e?.actions?.forEach(t=>{this._actions.push(this._businessRuleDesignActionFactory.get(t))})}_getActionIndex(e){return this.actions.findIndex(t=>t.uId===e.uId)}_actionsUpdateMetadata(e){const t=[];e.actions.forEach(a=>{t.push(a.uId);const r=this._businessRuleDesignActionFactory.get(a);-1!==this._getActionIndex(r)?this.updateAction(r):this.addAction(r)}),this.actions.filter(a=>!t.includes(a.uId)).forEach(a=>this.deleteAction(a))}_getActionsMetadata(){return this.actions.map(e=>e.toMetadata())}_getConditionMetadata(){const e=this.condition;return!e||e instanceof Wa?null:e.toMetadata()}_copyActions(){return this.actions.map(e=>e.copy())}_setActions(e){this._actions=[...e]}_copyCondition(){const e=this.condition;return!e||e instanceof Wa?new Wa:e.copy()}toMetadata(){const e=this._getConditionMetadata(),t=this._getActionsMetadata();return{typeName:this._typeName,uId:this.uId,condition:e,actions:t}}updateFromMetadata(e){e.condition&&this.updateCondition(this._businessRuleDesignConditionFactory.get(e.condition)),this._actionsUpdateMetadata(e)}addAction(e){-1===this._getActionIndex(e)?this._actions=[...this._actions,e.clone()]:console.warn(`Action ${e.uId} already exists`)}updateAction(e){const t=this._getActionIndex(e);-1!==t?(this._actions=[...this._actions],this._actions.splice(t,1,e.clone())):console.warn(`Action ${e.uId} not found`)}deleteAction(e){const t=this._getActionIndex(e);t<0||(this._actions=[...this._actions],this._actions.splice(t,1))}updateCondition(e){this.condition=e}copy(){const e=new $c({...this.toMetadata(),uId:(0,c.generateGuid)()});return e._setActions(this._copyActions()),e.condition=this._copyCondition(),e}onDataSourceAttributeNameChanged(e,t,n){this.condition.onDataSourceAttributeNameChanged(e,t,n),this._actions.forEach(a=>a.onDataSourceAttributeNameChanged(e,t,n))}isAttributeUsed(e,t){return this.condition.isAttributeUsed(e,t)||this._actions.some(n=>n.isAttributeUsed(e,t))}}class qr{constructor(e){this._typeName="Terrasoft.Core.BusinessRules.Models.Trigger",this.name="",this.type=_.TEQ.ChangeAttributeValue,this.scopeId="",this.uId=e?.uId||(0,c.generateGuid)(),e&&(this.name=e.name,this.type=Object.values(_.TEQ)[e.type||0],this.scopeId=e.scopeId)}toMetadata(){const e=function Lh(o,e){return Object.values(o).indexOf(e)}(_.TEQ,this.type);return{typeName:this._typeName,uId:this.uId,name:this.name,type:e,scopeId:this.scopeId}}copy(){return new qr({...this.toMetadata(),uId:(0,c.generateGuid)()})}isAttributeUsed(e,t){return this.name===t&&Ur(this.scopeId,e)}}function Xd(){return`BusinessRule_${(0,c.generateGuid)().substring(0,7)}`}class zi{get hasWarnings(){return this.getWarningMessages().length>0}constructor(e,t,n,a,r){this.caption=t,this.schemaName=n,this.schemaCaption=a,this.applicabilityType=r,this._typeName="Terrasoft.Core.BusinessRules.BusinessRule",this.name="",this.enabled=!0,this.triggers=[],this.cases=[],this.needToSave=!1,this.parentUId="",this.parentActionUId="",this.uId=e.uId,this.updateFromMetadata(e)}_updateCase(e){const t=this.cases.find(n=>n.uId===e.uId);t?t.updateFromMetadata(e):this.addCase(new $c(e))}_casesUpdateMetadata(e){const t=[];e.cases?.forEach(n=>{t.push(n.uId),this._updateCase(n)}),this.cases=this.cases.filter(n=>t.includes(n.uId))}_copyCases(){return this.cases?.map(e=>e.copy())}_copyTriggers(){return this.triggers?.map(e=>e.copy())}_isValidCaption(){return this.caption.some(e=>e.value)}addTrigger(e,t,n=""){const a=Object.values(_.TEQ).indexOf(t),r=new qr({name:e,type:a,scopeId:n});return this.triggers.push(r),r.uId}addCase(e){this.cases.push(e)}getFirstCase(){let e=this.cases[0];return e||(e=new $c,this.addCase(e),this.getFirstCase())}updateFromMetadata(e){this.parentUId=e.parentUId??"",this.parentActionUId=e.parentActionUId??"",this.name=e.name,this.enabled=e.enabled,this._casesUpdateMetadata(e),this.triggers=e.triggers?.map(t=>new qr(t))??[]}toMetadata(){const e={typeName:this._typeName,uId:this.uId,cases:this.cases.map(t=>t.toMetadata()),triggers:this.triggers.map(t=>t.toMetadata()),name:this.name,enabled:this.enabled};return this.parentUId&&(e.parentUId=this.parentUId),this.parentActionUId&&(e.parentActionUId=this.parentActionUId),e}clone(){const e=new zi(this.toMetadata(),this.caption.clone(),this.schemaName,this.schemaCaption,this.applicabilityType);return e.needToSave=this.needToSave,e}copy(){const e=this.caption.clone();e.forEach(n=>{n.value&&(n.value=`Copy ${n.value}`)});const t=new zi({...this.toMetadata(),uId:(0,c.generateGuid)()},e,this.schemaName,this.schemaCaption,this.applicabilityType);return t.name=Xd(),t.cases=this._copyCases(),t.triggers=this._copyTriggers(),t}isValid(){if(!this._isValidCaption())return!1;const t=this.getFirstCase(),n=t?.condition,a=t?.actions;return n?.isValid()&&a?.length>0&&a.every(r=>r.isValid())}showInvalid(){return!!this.needToSave&&!this.isValid()}onDataSourceAttributeNameChanged(e,t,n){this.cases.forEach(a=>a.onDataSourceAttributeNameChanged(e,t,n))}getWarningMessages(){const e=[],n=this.getFirstCase()?.condition;return n&&e.push(...n.getWarningMessages()),e}isAttributeUsed(e,t){return this.cases.some(n=>n.isAttributeUsed(e,t))||this.triggers.some(n=>n.isAttributeUsed(e,t))}}var tl;let ep=tl=class extends Sn{constructor(e){super(e),this.typeName="Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleSysSettingExpression",this.sysSettingName="",e&&(this.sysSettingName=e.sysSettingName)}toMetadata(){return{...super.toMetadata(),sysSettingName:this.sysSettingName}}copy(){return new tl({...this.toMetadata(),uId:(0,c.generateGuid)()})}isValid(){return super.isValid()&&!!this.sysSettingName}};var nl;ep=tl=(0,I.Cg)([kn({typeName:"Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleSysSettingExpression"}),(0,I.Sn)("design:paramtypes",[Object])],ep);let Fh=nl=class extends Sn{constructor(e){super(e),this.typeName="Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleSysValueExpression",this.sysValueName="",e&&(this.sysValueName=e.sysValueName)}toMetadata(){return{...super.toMetadata(),sysValueName:this.sysValueName}}copy(){return new nl({...this.toMetadata(),uId:(0,c.generateGuid)()})}isValid(){return super.isValid()&&!!this.sysValueName}};var qc;Fh=nl=(0,I.Cg)([kn({typeName:"Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleSysValueExpression"}),(0,I.Sn)("design:paramtypes",[Object])],Fh);let tp=qc=class extends Sn{constructor(e){super(e),this.typeName="Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleFilterValueExpression",this.leftExpression="",e&&(this.leftExpression=e.leftExpression,this.rightExpression=new Us(e.rightExpression))}toMetadata(){return{...super.toMetadata(),leftExpression:this.leftExpression,rightExpression:this.rightExpression?.toMetadata()}}copy(){const e=new qc({...this.toMetadata(),uId:(0,c.generateGuid)()});return e.rightExpression=this.rightExpression.copy(),e}isValid(){return super.isValid()&&!!this.leftExpression&&!!this.rightExpression&&this.rightExpression.isValid()}getAffectedItem(){return{name:this.leftExpression}}};tp=qc=(0,I.Cg)([kn({typeName:"Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleFilterValueExpression"}),(0,I.Sn)("design:paramtypes",[Object])],tp);let kh=class extends Us{constructor(){super(...arguments),this.typeName="Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleEmptyValueExpression"}isValid(){return!0}};kh=(0,I.Cg)([kn({typeName:"Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleEmptyValueExpression"})],kh);class Hs{static{this.\u0275fac=function(t){return new(t||Hs)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:Hs})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[R.CommonModule]})}}var ip,Wr,il,ga,Hi,Zc,jh=b(39554);class Wc{constructor(e){this.uId=e?.uId??(0,c.generateGuid)(),this.name=e?.name??this.getDefaultName(),this.resourcesProvider=e?.resourcesProvider}getDefaultName(){return this._defaultName}fromMetadata(e){this.uId=e?.uId??(0,c.generateGuid)(),this.name=e?.name??this.getDefaultName()}toMetadata(){return{typeName:this._typeName,uId:this.uId,name:this.name}}getCaption(e){return this.resourcesProvider?.getCaption(e)??Promise.resolve(e)}}class np extends Wc{get _typeName(){return"Terrasoft.Core.ExpressionEngine.Schema.Parameters.ExpressionSchemaParameter"}get _defaultName(){return"Parameter"}constructor(e){super(e),this.dataValueType=e?.dataValueType??c.DataValueType.Text}fromMetadata(e){super.fromMetadata(e),this.dataValueType=c.DataValueType[e?.dataValueType??"Text"]}clone(){return new np(this)}toMetadata(){if(null==this.dataValueType)throw new Error("Data value type not specified");return{...super.toMetadata(),dataValueType:c.DataValueType[this.dataValueType]}}accept(e){var t=this;return(0,A.A)(function*(){yield e.visitParameter?.(t)})()}}class Zy{static create(e){if(!e)throw new Error("typeName is null or empty");if("Terrasoft.Core.ExpressionEngine.Schema.Parameters.ExpressionSchemaParameter"===e)return new np;throw new Error(`ExpressionSchemaParameter with type '${e}' not found`)}static createFromMetadata(e){const t=e.typeName,n=this.create(t);return n.fromMetadata(e),n}}class $s extends Wc{get _typeName(){return"Terrasoft.Core.ExpressionEngine.Schema.Variables.ExpressionSchemaVariableConfig"}get _defaultName(){return"VariableConfig"}constructor(e){super(e),this.value=e?.value??""}fromMetadata(e){super.fromMetadata(e),this.value=e?.value??""}clone(){return new $s(this)}toMetadata(){return{...super.toMetadata(),value:this.value}}getBoundParametersNames(){return[]}}!function(o){o.Column="Column",o.AggregationColumn="AggregationColumn"}(ip||(ip={})),function(o){o.Constant="Constant",o.Parameter="Parameter",o.SysSetting="SysSetting",o.SysValue="SysValue"}(Wr||(Wr={})),function(o){o.PowerFx="PowerFx"}(il||(il={})),function(o){o.SysSetting="SysSetting",o.SysValue="SysValue",o.Parameter="Parameter",o.Record="Record",o.Collection="Collection",o.EsqAggregation="EsqAggregation"}(ga||(ga={})),function(o){o.Entity="Entity",o.Custom="Custom"}(Hi||(Hi={})),function(o){o.None="None",o.Count="Count",o.Sum="Sum",o.Avg="Avg",o.Min="Min",o.Max="Max",o.TopOne="TopOne"}(Zc||(Zc={}));class Ja{constructor(e){this.type=e?.type??Wr.Constant,this.value=e?.value??""}fromMetadata(e){this.type=e?.type??Wr.Constant,this.value=e?.value??""}clone(){return new Ja(this)}toMetadata(){if(!this.type)throw new Error("Type not specified");return{type:this.type,value:this.value}}getBoundParametersNames(){return this.type===Wr.Parameter?[this.value]:[]}}class al extends $s{get _typeName(){return"Terrasoft.Core.ExpressionEngine.Schema.Variables.ExpressionSchemaRecordVariableConfig"}get _defaultName(){return"VariableConfig"}constructor(e){super(e),this.recordType=e?.recordType??Hi.Entity,this.primaryValue=e?.primaryValue.clone()??new Ja,this.fieldValues=e?.fieldValues.clone()??new Ja}fromMetadata(e){super.fromMetadata(e),this.recordType=e?.recordType??Hi.Entity;const t=new Ja;e?.primaryValue&&t.fromMetadata(e.primaryValue),this.primaryValue=t;const n=new Ja;e?.fieldValues&&n.fromMetadata(e.fieldValues),this.fieldValues=n}clone(){return new al(this)}toMetadata(){if(!this.recordType)throw new Error("Record type not specified");return{...super.toMetadata(),recordType:this.recordType,primaryValue:this.primaryValue.toMetadata(),fieldValues:this.fieldValues.toMetadata()}}getBoundParametersNames(){const e=[...super.getBoundParametersNames(),...this.primaryValue.getBoundParametersNames(),...this.fieldValues.getBoundParametersNames()];return[...new Set(e)]}}class Jc{static create(e){if(!e)throw new Error("typeName is null or empty");switch(e){case"Terrasoft.Core.ExpressionEngine.Schema.Variables.ExpressionSchemaVariableConfig":return new $s;case"Terrasoft.Core.ExpressionEngine.Schema.Variables.ExpressionSchemaRecordVariableConfig":return new al;default:throw new Error(`ExpressionSchemaVariableConfig with type '${e}' not found`)}}static createFromMetadata(e){const t=e.typeName,n=this.create(t);return n.fromMetadata(e),n}}class sl extends Wc{get _typeName(){return"Terrasoft.Core.ExpressionEngine.Schema.Variables.ExpressionSchemaVariable"}get _defaultName(){return"Variable"}constructor(e){super(e),this.dataValueType=e?.dataValueType??c.DataValueType.Text,this.variableType=e?.variableType??ga.Parameter,this.config=e?.config.clone()??new $s}fromMetadata(e){super.fromMetadata(e),this.dataValueType=c.DataValueType[e?.dataValueType??"Text"],this.variableType=e?.variableType??ga.Parameter,this.config=e?.config?Jc.createFromMetadata(e.config):new $s}clone(){return new sl(this)}toMetadata(){if(null==this.dataValueType)throw new Error("Data value type not specified");if(!this.variableType)throw new Error("Variable type not specified");return{...super.toMetadata(),dataValueType:c.DataValueType[this.dataValueType],variableType:this.variableType,config:this.config.toMetadata()}}accept(e){var t=this;return(0,A.A)(function*(){yield e.visitVariable?.(t)})()}getBoundParametersNames(){return this.config.getBoundParametersNames()}}class Yc{static create(e){if(!e)throw new Error("typeName is null or empty");if("Terrasoft.Core.ExpressionEngine.Schema.Variables.ExpressionSchemaVariable"===e)return new sl;throw new Error(`ExpressionSchemaVariable with type '${e}' not found`)}static createFromMetadata(e){const t=e?.typeName,n=this.create(t);return n.fromMetadata(e),n}}class Ya{constructor(e){this.uId=e?.uId??(0,c.generateGuid)(),this.name=e?.name??"",this.engineType=e?.engineType??il.PowerFx,this.expression=e?.expression??"",this.resultDataValueType=e?.resultDataValueType??c.DataValueType.Text,this.expressionVariables=(e?.expressionVariables??[]).map(t=>t.clone()),this.parameters=(e?.parameters??[]).map(t=>t.clone())}static fromMetadata(e){const t=new Ya;return t.fromMetadata(e),t}accept(e){var t=this;return(0,A.A)(function*(){yield e.visitSchema?.(t);for(const n of t.expressionVariables)yield n.accept(e);for(const n of t.parameters)yield n.accept(e)})()}fromMetadata(e){this.uId=e?.uId??(0,c.generateGuid)(),this.name=e?.name??"",this.engineType=e?.engineType??il.PowerFx,this.expression=e?.expression??"",this.resultDataValueType=c.DataValueType[e?.resultDataValueType??"Text"],this.expressionVariables=(e?.expressionVariables??[]).map(t=>Yc.createFromMetadata(t)),this.parameters=(e?.parameters??[]).map(t=>Zy.createFromMetadata(t))}findExpressionVariable(e){return this.expressionVariables.find(t=>t.name===e)??null}getExpressionVariable(e){const t=this.findExpressionVariable(e);if(null==t)throw new Error(`Can not find expression variable: ${e}`);return t}findExpressionParameter(e){return this.parameters.find(t=>t.name===e)??null}getExpressionParameter(e){const t=this.findExpressionParameter(e);if(null==t)throw new Error(`Can not find parameter: ${e}`);return t}addExpressionVariable(e){this.expressionVariables.push(e)}addExpressionParameter(e){this.parameters.push(e)}removeExpressionParameterByName(e){const t=this.getExpressionParameter(e),n=this.parameters.indexOf(t);return this.parameters.splice(n,1),t}removeExpressionVariableByName(e){const t=this.getExpressionVariable(e),n=this.expressionVariables.indexOf(t);return this.expressionVariables.splice(n,1),t}clone(){return new Ya(this)}toMetadata(){const e=this.expressionVariables.map(n=>n.toMetadata()),t=this.parameters.map(n=>n.toMetadata());return{uId:this.uId,name:this.name,engineType:this.engineType,expression:this.expression,resultDataValueType:c.DataValueType[this.resultDataValueType],expressionVariables:e,parameters:t}}getExpressionVariablesPaths(e=null){const t=this.expression??"",n=new RegExp("#(?<name>\\w+?)(?:\\.(?<path>.+?))*?#","g"),a=[...t.matchAll(n)].map(r=>{const u=r.groups?.path,p=r.groups?.name;return{path:u,variableName:p}}).filter(({variableName:r})=>!e||this.expressionVariables.find(p=>p.name===r).variableType===e);return Object.entries((0,jh.A)(a,r=>r.variableName)).map(([r,u])=>({variableName:r,paths:(0,Un.A)(u.map(p=>p.path))}))}}class $i{constructor(e){this._expressionFactory=new Ui,this.typeName="Terrasoft.Core.BusinessRules.Models.Expressions.ParameterMapping",this.parameterName="",this.expression=null,this.uId=e?.uId||(0,c.generateGuid)(),this.parameterName=e?.parameterName??"",this.expression=this._expressionFactory.get(e?.expression)}toMetadata(){return{typeName:this.typeName,uId:this.uId,expression:this.expression.toMetadata(),parameterName:this.parameterName}}copy(){return new $i({...this.toMetadata(),uId:(0,c.generateGuid)()})}isValid(){return""!==this.parameterName&&this.expression.isValid()}}var Zr;let rl=Zr=class extends Sn{constructor(e){super(e),this.typeName="Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleFormulaExpression",this.parameterMappings=[],this.type=_.ZXh.Formula,this.expressionSchema=new Ya;const t=e?.parameterMappings??[];this.parameterMappings=t.map(n=>new $i(n)),this.expressionSchema=Ya.fromMetadata(e?.expressionSchema)}toMetadata(){return{...super.toMetadata(),parameterMappings:this.parameterMappings.map(e=>e.toMetadata()),expressionSchema:this.expressionSchema.toMetadata()}}copy(){return new Zr({...this.toMetadata(),uId:(0,c.generateGuid)()})}clear(){this.expressionSchema=new Ya,this.parameterMappings=[]}setValue(e){const t=e?.value;this.expressionSchema=t?t.expressionSchema.clone():new Ya,this.parameterMappings=t?t.mappings.map(n=>{const a=new $i;return a.parameterName=n.parameterName,a.expression=n.mapping.copy(),a}):[]}getValue(){const e=this.parameterMappings.map(t=>({parameterName:t.parameterName,mapping:t.expression}));return{value:{expressionSchema:this.expressionSchema,mappings:e},displayValue:"Formula"}}isEmpty(){return!this.expressionSchema}};var Kc;rl=Zr=(0,I.Cg)([kn({typeName:"Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleFormulaExpression"}),(0,I.Sn)("design:paramtypes",[Object])],rl);let sp=Kc=class extends Sn{constructor(){super(...arguments),this.typeName="Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleContextExpression"}copy(){return new Kc({...this.toMetadata(),uId:(0,c.generateGuid)()})}};sp=Kc=(0,I.Cg)([kn({typeName:"Terrasoft.Core.BusinessRules.Models.Expressions.BusinessRuleContextExpression"})],sp);new i.InjectionToken("BusinessRulesRepository");var fa;function ol(o){return o&&"path"in o?o.path:""}function Gh(o){if(qs(o))return function Jr(o){const e=[];return o.conditions&&o.conditions.forEach(t=>{const n=Gh(t);e.push(...n)}),e}(o);const e=o;return[ol(e.leftExpression),ol(e.rightExpression)].filter(t=>t)}function qs(o){return o.typeName===Xo}function zh(o){return o.map(e=>Gh(e)).flat().filter(e=>null!=e)}function Qc(o){return o.map(e=>function $h(o){return o.cases&&0!==o.cases.length?o.cases.map(e=>e.condition).filter(e=>null!=e):[]}(e)).flat()}!function(o){o[o.Condition=0]="Condition",o[o.Action=1]="Action",o[o.Trigger=2]="Trigger",o[o.Context=3]="Context",o[o.Unknown=4]="Unknown"}(fa||(fa={}));var _i=b(63547);const qh=[_.ZXh.Const,_.ZXh.SysValue,_.ZXh.SysSetting],Xc=new Set(qh);function ll(o){return!o||!!o.type&&Xc.has(o.type)}function cl(o){if(!o)return!1;if(qs(o))return function Jy(o){return!!o.conditions&&o.conditions.every(e=>cl(e))}(o);const e=o;return(!(0,_i.A)(e.leftExpression)||!(0,_i.A)(e.rightExpression))&&(ll(e.leftExpression)&&ll(e.rightExpression))}function ul(o){return o.some(e=>e.type===_.TEQ.ContextReady)}class Ws{_canExecuteByConditionsAttributePaths(e,t){const n=e.filter(r=>r.type!==_.TEQ.DataLoaded).map(r=>r.name);if(!n||0===n.length)return!1;const a=new Set(zh(t));return n.some(r=>a.has(r))}canExecute(e,t){if(!t||0===t.length)return!1;const n=Qc(t),a=function eu(o,e){return!!ul(o)&&e.some(t=>cl(t))}(e.triggers,n),r=function Wh(o,e){return!!ul(o)&&e.some(t=>t.cases?.some(n=>!n.condition))}(e.triggers,t);return!(!a&&!r)||this._canExecuteByConditionsAttributePaths(e.triggers,n)}static{this.\u0275fac=function(t){return new(t||Ws)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Ws,factory:Ws.\u0275fac})}}class dl{}class ya extends dl{constructor(e,t){super(),this._httpClient=e,this.dbService=t,this._cachedLoadScopesRequests=new Map,this.serviceEndpoint="/ServiceModel/BusinessRulesManagerService.svc/",this.getBusinessRulesConfigMethodName="GetBusinessRules"}_getCachedBusinessRulesScopes(e){const t=e.map(n=>{const a=this._getContextCacheKey(n.scopeType,n.scopeName);return this.dbService.getByKey("business-rules",a).pipe((0,h.map)(r=>r?{rules:r.data,scopeName:n.scopeName,scopeType:n.scopeType}:null))});return t.length?(0,h.forkJoin)(t):(0,h.of)([])}_getScopeType(e){return"Model"===e?wt.Model:wt.ViewModel}_mapResponseToBusinessRules(e){return e?.businessRules&&0!==e.businessRules.length?e.businessRules.map(t=>{const n=JSON.parse(t.businessRulesConfig);return{scopeName:t.schemaName,scopeType:this._getScopeType(t.type),rules:n}}):[]}_getContextsScopeNames(e){return e.map(t=>t.scopeName)}_getContextCacheKey(e,t){return`Type:#${e}#-Name:#${t}#`}_getContextsScopeNamesRequestKey(e){return e.map(n=>this._getContextCacheKey(n.scopeType,n.scopeName)).join("_")}_getCachedLoadScopesRequest(e){const t=e.map(a=>this._getContextCacheKey(a.scopeType,a.scopeName)),n=[...this._cachedLoadScopesRequests.keys()].find(a=>t.every(r=>a.includes(r)));return this._cachedLoadScopesRequests.get(n)}_getNotLoadedBusinessRulesScopes(e){if(0===e.length)return(0,h.of)([]);const t=this._getContextsScopeNames(e),n=this._getCachedLoadScopesRequest(e);if(n)return n.request$.pipe((0,h.map)(p=>p.filter(f=>t.includes(f.scopeName))));const a=`${this.serviceEndpoint}${this.getBusinessRulesConfigMethodName}`,r={scopes:e.map(p=>({name:p.scopeName,type:p.scopeType,modelType:p.modelType}))},u=this._httpClient.post(a,r).pipe((0,h.map)(p=>this._mapResponseToBusinessRules(p)),(0,h.switchMap)(p=>{const f=p.map(S=>{const w=this._getContextCacheKey(S.scopeType,S.scopeName);return this.dbService.add("business-rules",{data:S.rules,key:w})});return f.length?(0,h.forkJoin)(f).pipe((0,h.map)(()=>p)):(0,h.of)(p)}),(0,h.tap)(()=>{const p=this._getContextsScopeNamesRequestKey(e);this._cachedLoadScopesRequests.delete(p)}),(0,h.share)());return this._cachedLoadScopesRequests.set(this._getContextsScopeNamesRequestKey(e),{request$:u,scopeNames:t}),u}getBusinessRulesByContexts(e){const t=e.filter(n=>n.scopeName&&"crt.PageParametersDataSource"!==n.modelType);return this._getCachedBusinessRulesScopes(t).pipe((0,h.switchMap)(n=>{const a=t.filter(u=>!n?.some(p=>p?.scopeName===u.scopeName&&p.scopeType===u.scopeType));return this._getNotLoadedBusinessRulesScopes(a).pipe((0,h.map)(u=>[...n,...u].filter(Boolean)),(0,h.catchError)(u=>{const p=t?.map(f=>f.scopeName).join(", ");return console.warn(`An error occurred during getting business rules execution for scopes: ${p}.`,u),(0,h.of)([])}))}))}clearCachedBusinessRules(){return this.dbService.clear("business-rules")}static{this.\u0275fac=function(t){return new(t||ya)(i.\u0275\u0275inject(F.HttpClient),i.\u0275\u0275inject(_.wqQ,8))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:ya,factory:ya.\u0275fac,providedIn:"root"})}}const Zs=new Map([[0,_.TEQ.ChangeAttributeValue],[1,_.TEQ.ChangeAttributeProperty],[2,_.TEQ.DataLoaded]]);function Js(o){return Zs.has(o)?Zs.get(o):_.TEQ.DataLoaded}class an{constructor(e,t){this._businessRulesManager=e,this._businessRuleDesignActionFactory=t,this._scopeAttributes=[]}_filterTriggers(e,t){const n=t.filter(u=>u.scopeName===e.parentScopeId),r=t.find(u=>u.scopeName===e.scopeName&&u.scopeType===e.scopeType)?.rules.map(u=>u.triggers).flat();return e.triggers.filter(u=>{if(u.type===_.TEQ.ContextReady||u.type===_.TEQ.DataLoaded)return!0;const p=r?.some(w=>w&&w.name===u.name&&Js(w.type)===u.type),S=n.flatMap(w=>w.rules.flatMap(O=>O.triggers)).some(w=>w.name===u.name&&Js(w.type)===u.type);return p||S})}_filterAttributes(e){const n=this._scopeAttributes.filter(u=>u.scopeName===e.scopeName).map(u=>u.attributes).flat(),a=this._scopeAttributes.filter(u=>u.scopeName!==e.scopeName).flatMap(u=>[...u.attributes]);return e.attributes.filter(u=>n.includes(u.attributeName)||a.includes(u.attributeName)||u.isSignificant)}_cacheUsedAttributes(e){e.forEach(t=>{if(!this._scopeAttributes.find(n=>n.scopeName===t.scopeName&&n.scopeType===t.scopeType)){const a=zh(Qc(t.rules)),r=function Hh(o,e){return o.flatMap(t=>t.cases.flatMap(n=>function Uh(o,e){return o.flatMap(t=>e.get(t).getRequiredItems()).map(t=>t.name)}(n.actions,e)))}(t.rules,this._businessRuleDesignActionFactory),u=t.rules.flatMap(p=>p.triggers?.map(f=>f.name)).filter(Boolean);this._scopeAttributes.push({scopeName:t.scopeName,scopeType:t.scopeType,attributes:[...a,...r,...u]})}})}_hasActiveRules(e,t){return(t.find(u=>u.scopeName===e.scopeName&&u.scopeType===e.scopeType)?.rules??[]).filter(u=>!0===u.enabled).length>0}clearCachedScopeAttributes(){this._scopeAttributes=[]}filter(e){return this._businessRulesManager.getBusinessRulesByContexts(e).pipe((0,h.tap)(t=>this._cacheUsedAttributes(t)),(0,h.map)(t=>e.map(a=>({...a,attributes:this._filterAttributes(a),triggers:this._filterTriggers(a,t)})).filter(a=>!!this._hasActiveRules(a,t)||a.attributes.length>0)))}static{this.\u0275fac=function(t){return new(t||an)(i.\u0275\u0275inject(ya),i.\u0275\u0275inject(zs))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:an,factory:an.\u0275fac,providedIn:"root"})}}class Lt{canExecute(e,t,n){const a=n.map(r=>r.triggers).flat();return 0!==a.length&&a.some(r=>{const u=Js(r.type);if(u===_.TEQ.DataLoaded&&e.scopeType===wt.Model)return e.triggers.some(f=>f.type===_.TEQ.DataLoaded);if(!r.scopeId)return e.triggers.some(f=>f.name===r.name&&f.type===u);const p=t.find(f=>f.scopeId===r.scopeId);return null!=p&&p.triggers.some(f=>f.name===r.name&&f.type===u)})}static{this.\u0275fac=function(t){return new(t||Lt)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Lt,factory:Lt.\u0275fac})}}class Ft{constructor(e,t,n,a,r,u,p){this._businessRulesManager=e,this._businessRulesTriggerExecutor=t,this._businessRulesConditionExecutor=n,this._httpClient=a,this._messageChannelService=r,this._featureService=u,this._contextFilter=p,this._businessRulesResponseEventName="BusinessRuleExecutionResponse",this._serviceUrl="ServiceModel/BusinessRulesEngineService.svc/Execute",this._businessRulesRequestEventName="BusinessRuleExecutionRequest",this._businessRuleDesignActionFactory=new zs,this._configurationStructureChangedSubscribe()}_configurationStructureChangedSubscribe(){this._messageChannelService.getMessages("ConfigurationStructureChanged").pipe((0,z.n)(()=>(this._contextFilter.clearCachedScopeAttributes(),this._businessRulesManager.clearCachedBusinessRules()))).subscribe()}_featureStates(){return(0,h.from)(this._featureService.getFeaturesState(["BRules-UseWebSocketChannel","BRules-DisableContextOptimization"])).pipe((0,E.T)(([e,t])=>({useHttpChannel:!e,disableContextOptimization:t})))}_sendWebSocketMessage(e){const t=(0,c.generateGuid)();return e.businessRulesSessionId=t,new h.Observable(n=>{const a=this._messageChannelService.messageEvent$.pipe((0,E.T)(r=>r.body),(0,se.p)(r=>null!=r),(0,se.p)(r=>r.eventName===this._businessRulesResponseEventName),(0,se.p)(r=>r.businessRulesSessionId===t),(0,E.T)(r=>r.payload)).subscribe({next:r=>{a.unsubscribe(),r.success?n.next(r.businessRulesResponse):(console.error("An error occurred during business rules execution. "+r.errorInfo.errorCode+": "+r.errorInfo.message),n.next([])),n.complete()},error:r=>{a.unsubscribe(),console.error("An error occurred during business rules execution. "+r.errorCode+": "+r.message),n.next([]),n.complete()},complete:()=>{a.unsubscribe(),n.error("WebSocket channel closed")}});this._messageChannelService.sendMessage(e,c.MessageChannelType.PTP).pipe((0,h.take)(1)).subscribe()})}_createWebSocketRequest(e){return{eventName:this._businessRulesRequestEventName,contexts:e}}_executeUsingWebSocket(e){const t=this._createWebSocketRequest(e);return this._sendWebSocketMessage(t)}_logErrorMessageAndReturnDefBusinessRuleResponse(e){return console.error("An error occurred during business rules execution. "+e.errorCode+": "+e.message),(0,h.of)([])}_executeUsingHttp(e){return this._httpClient.post(this._serviceUrl,{contexts:e},{headers:new F.HttpHeaders({"Content-Type":"application/json"})}).pipe((0,Y.Z)(t=>t.success?(0,h.of)(t.businessRulesResponse):this._logErrorMessageAndReturnDefBusinessRuleResponse(t.errorInfo)),(0,ue.W)(t=>this._logErrorMessageAndReturnDefBusinessRuleResponse(t)))}_canExecuteBusinessRulesByContexts(e){return this._businessRulesManager.getBusinessRulesByContexts(e).pipe((0,E.T)(t=>{const n=t.filter(a=>a.rules&&a.rules.length>0);return 0!==n.length&&n.some(a=>{const r=e.find(S=>S.scopeName===a.scopeName&&S.scopeType===a.scopeType),u=e.filter(S=>S.parentScopeId===r.scopeId),p=this._businessRulesTriggerExecutor.canExecute(r,u,a.rules),f=this._businessRulesConditionExecutor.canExecute(r,a.rules);return p||f})}))}_getContextsWithScope(e){return e.filter(t=>t.scopeName&&t.scopeId)}_getBusinessRuleActions(e){return e.cases.map(t=>t.actions).flat().filter(t=>t.enabled).map(t=>this._businessRuleDesignActionFactory.get(t))}_getBusinessRuleAffectedAttributes(e){return this._getBusinessRuleActions(e).map(n=>n.getAffectedItems()).flat()}_getAffectedAttributes(e){let t=e.rules.filter(n=>n.enabled).map(n=>this._getBusinessRuleAffectedAttributes(n)).flat();return t=this._getUniqueAffectedAttributes(t),t.forEach(n=>{n.scopeName=e.scopeName}),t}_getUniqueAffectedAttributes(e){const t=e.map(a=>[a.name,a]);return[...new Map(t).values()]}_execute(e){return this._featureStates().pipe((0,z.n)(({useHttpChannel:t,disableContextOptimization:n})=>(0,h.forkJoin)({useHttpChannel:(0,h.of)(t),executionContexts:n?(0,h.of)(e):this._contextFilter.filter(e)})),(0,z.n)(({useHttpChannel:t,executionContexts:n})=>(t?this._executeUsingHttp(n):this._executeUsingWebSocket(n)).pipe((0,E.T)(a=>({executionResults:a,executionContexts:n})))),(0,z.n)(({executionResults:t,executionContexts:n})=>this._logUnsuccessfulBusinessRulesExecution(t,n).pipe((0,E.T)(()=>t))))}_logUnsuccessfulBusinessRulesExecution(e,t){const n=e?.filter(a=>a?.errors?.length>0).map(a=>a.errors).flat();return 0===n?.length?(0,h.of)(void 0):(0,h.from)(this._featureService.getFeatureState("BRules-ShowChildRules")).pipe((0,z.n)(a=>this._businessRulesManager.getBusinessRulesByContexts(t).pipe((0,E.T)(r=>r.map(u=>u.rules).flat()),(0,P.M)(r=>{n.map(u=>this._getUnsuccessfulBusinessRuleExecutionMessage(u,r,a)).forEach(u=>{console.error(u)})}),(0,E.T)(()=>{}))))}_getUnsuccessfulBusinessRuleExecutionMessage(e,t,n){const a="Business rule execution error: ",r=`Error message: "${e.message}"`,u=e.type===fa.Unknown?"":`The error occurred in the business rule ${fa[e.type]?.toLocaleLowerCase()}s.`;let p=t.find($=>$.uId===e.businessRuleId);if(!p)return`${a}Rule id - "${e.businessRuleId}". ${r}. ${u}`;!(0,c.isEmptyGuid)(p.parentUId)&&!n&&(p=t.find($=>$.uId===p.parentUId));return`${a}${`Rule Title - "${p.caption||""}"`}, ${`Rule Code - "${p.name}"`}. ${r}. ${u}`}execute(e){const t=this._getContextsWithScope(e);return 0===t.length?(0,h.of)([]):this._canExecuteBusinessRulesByContexts(e).pipe((0,z.n)(n=>n?this._execute(t):(0,h.of)([])),(0,ue.W)(n=>(console.warn(`An error occurred during business rules execution for scopes: ${e?.map(a=>a.scopeName).join(", ")}.`,n),(0,h.of)([]))))}getAffectedAttributes(e){var t=this;return(0,A.A)(function*(){if(0===e.length)return[];const n=e.filter(u=>null!=u.scopeName),r=(yield(0,h.firstValueFrom)(t._businessRulesManager.getBusinessRulesByContexts(n))).filter(u=>u.rules&&u.rules.length>0);return 0===r.length?[]:r.map(u=>t._getAffectedAttributes(u)).flat()})()}static{this.\u0275fac=function(t){return new(t||Ft)(i.\u0275\u0275inject(ya),i.\u0275\u0275inject(Lt),i.\u0275\u0275inject(Ws),i.\u0275\u0275inject(F.HttpClient),i.\u0275\u0275inject(_.Awl),i.\u0275\u0275inject(c.FeatureService),i.\u0275\u0275inject(an))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Ft,factory:Ft.\u0275fac})}}class Yr{constructor(e){this._actionApplierFactory=e}_applyBusinessRuleAction(e,t,n){const a=this._actionApplierFactory.get(n);return(0,h.firstValueFrom)(a.apply(e,t))}_applyBusinessRule(e,t){var n=this;return(0,A.A)(function*(){const a={id:t.scopeId,name:t.scopeName,type:t.scopeType,triggers:t.triggers};if(0===t.actions.length)return Promise.resolve(null);const r=[];for(const u of t.actions){const p=yield n._applyBusinessRuleAction(e,a,u);r.push(p)}return r})()}_applyBusinessRules(e,t){var n=this;return(0,A.A)(function*(){const a=[];for(const r of t){const u=yield n._applyBusinessRule(e,r);a.push(u)}return a})()}applyRules(e,t){return t&&t.length>0?(0,h.from)(this._applyBusinessRules(e,t)):(0,h.of)(null)}static{this.\u0275fac=function(t){return new(t||Yr)(i.\u0275\u0275inject(bn))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Yr,factory:Yr.\u0275fac})}}class pl{constructor(e){this._storageService=e,this._isBusinessRulesPropertiesPanelExpandedKey="isBusinessRulesPropertiesPanelExpanded",this._isBusinessRulePropertiesPanelExpanded=!0;const t=this._storageService.get(this._isBusinessRulesPropertiesPanelExpandedKey);this._isBusinessRulePropertiesPanelExpanded="true"===t,this.businessRulesPropertiesPanelExpandedChanged$=new h.BehaviorSubject(this._isBusinessRulePropertiesPanelExpanded)}changeBusinessRulePropertiesPanelExpandedState(e){void 0===e&&(e=!this._isBusinessRulePropertiesPanelExpanded),this._isBusinessRulePropertiesPanelExpanded=e,this._storageService.set(this._isBusinessRulesPropertiesPanelExpandedKey,`${e}`),this.businessRulesPropertiesPanelExpandedChanged$.next(e)}static{this.\u0275fac=function(t){return new(t||pl)(i.\u0275\u0275inject(_.n$i))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:pl,factory:pl.\u0275fac})}}function Xn(o){return(0,A.A)(function*(){const e=o.get(_.myf,null),t=o.get(_.wqQ,null);if(e&&t)try{const a=(yield(0,h.lastValueFrom)(e.loadApplicationInfo())).applicationInfo?.configurationContentHash,r="business-rules";if(a){const u="business-rules-hash",p="common",f=yield(0,h.firstValueFrom)(t.getByKey(p,u));f?.data!==a&&(yield(0,h.lastValueFrom)(t.clear(r)),f?yield(0,h.lastValueFrom)(t.update(p,{id:f.id,key:u,data:a})):yield(0,h.lastValueFrom)(t.add(p,{key:u,data:a})))}else yield(0,h.lastValueFrom)(t.clear(r))}catch(n){console.error("Error initializing business rules cache db",n)}else console.warn("ApplicationInfoService or CrtIndexedDBService not provided for businessRulesDBInitializerFactory")})}class jn{static{this.\u0275fac=function(t){return new(t||jn)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:jn})}static{this.\u0275inj=i.\u0275\u0275defineInjector({providers:[Ft,Yr,bn,Lt,Ws,{provide:i.APP_INITIALIZER,useFactory:Xn,deps:[i.Injector],multi:!0}]})}}var qi=b(66550),Wi=b(20965),Zh=b(54995),_a=b(46347),Ca=b(73793),Ys=b(82290);_.M1n;const Ka=Symbol("InternalViewModelInjector"),Kr="HasUnsavedData",Ks="IsChanged",nu="PrimaryModelMode",iu="BusinessRulesActivated",ml="State",hl=new i.InjectionToken("SCOPE_NAME"),gl=new i.InjectionToken("VIEW_EVENT_ZONE_NAME"),rp=new i.InjectionToken("INJECTION_CONTEXT");var ft;!function(o){o.ChangeAttributeValue="change-attribute-value",o.ModelDataLoaded="model-data-loaded-event",o.BeforeModelLoad="before-model-load",o.LoadDefaultValues="load-default-values",o.StartLoadModelAttributes="start-load-model-attributes",o.FinishLoadModelAttributes="finish-load-model-attributes",o.ViewEvent="view-event"}(ft||(ft={}));class sn extends Array{constructor(...e){return super(),this._itemsChanged=new h.Subject,this._itemAttributeChanged=new h.Subject,this._destroyed$=new h.Subject,this._changed=new h.Subject,this._trackChanges=!0,this._createdItems=[],this._deletedItems=[],this._isDestroyed=!1,"number"==typeof e[0]?new Array(e[0]):([this._viewModelGenerator,this._viewModelConfig={},this._model,this._host,this._hostAttributeName]=e,this._measurePerformanceService=this._host?.[Ka]?.get(_.gcc,null,{optional:!0}),this._featureValues=this._host?.[Ka]?.get(_.G2Y,{},{optional:!0})??{},this._ngZone=this._host?.[Ka]?.get(i.NgZone,null,{optional:!0}),Object.setPrototypeOf(this,Object.create(sn.prototype)),this._subscribeItemsModelModesChanges(),this._subscribeItemsAttributesChanges(),new Proxy(this,{set:(t,n,a,r)=>{const u=t[n];return t[n]=a,this._trackChanges&&("length"===n&&a!==u?this._onItemsChanged():isNaN(parseInt(n))||this._onItemsChanged()),!0}}))}get changed(){return this._changed.asObservable().pipe((0,W.BV)(this._ngZone),(0,_e.Q)(this._destroyed$))}get itemAttributeChanged(){return this._itemAttributeChanged.asObservable().pipe((0,_e.Q)(this._destroyed$))}get isChanged(){return this.getChangedItems().length>0}get formApiModel(){return this._formApiModel||this._updateFormApiModelValues({emitEvent:!1}),this._formApiModel}_isItemPrimaryAttributeEqual(e,t){return(0,A.A)(function*(){if(!e)return!1;const n=yield e[e.primaryAttributeName];return t.includes(n)})()}_insertItem(e,t){"number"!=typeof t&&(t=this.length),t=Math.max(t,0),t=Math.min(t,this.length),this.splice(t,0,e)}_generateItem(e){const t=()=>{const n=this._model?.createCollectionItemModel(_.btv.Create),a=this._host?.[Ka],r=this._viewModelGenerator.generate({viewModelConfig:this._viewModelConfig,modelConfig:n?{primaryDataSourceName:n.name}:void 0,models:n?[n]:void 0,parentViewModel:this._host,businessRulesActive:e.businessRulesActive??!1},a?i.Injector.create({providers:[{provide:hl,useValue:null}],parent:a}):null).pipe((0,P.M)(u=>{n?.name&&(u.dataSchemas[n.name]=this._host.dataSchemas[n.name])}),(0,z.n)(u=>n?.name?u.create(n.name,e.initialModelValues).pipe((0,E.T)(()=>u)):(0,h.of)(u)),(0,P.M)(u=>{Object.entries(e.initialAttributeValues??{}).forEach(([p,f])=>u[p]=f),u._markAsPristine(e.initialAttributeValues??{}),this._model?.childrenChange()}));return(0,h.lastValueFrom)(r)};return this._measurePerformanceService?this._measurePerformanceService.measureCallback("ViewModelCollection.generateItem",()=>t()):t()}_mergeItems(e,t){const n=()=>{const a=(e[0]||t[0])?.primaryAttributeName;for(const r of t){const u=e.findIndex(p=>{const f=p.attributes?.[a],S=r.attributes?.[a];return f&&f===S});-1===u?e.push(r):e.splice(u,1,r)}return e};return this._measurePerformanceService?this._measurePerformanceService.measure("ViewModelCollection.mergeItems",()=>n()):n()}_triggerChangesAfter(e){this._trackChanges=!1;const t=e.call(this);return this._trackChanges=!0,this._isDestroyed||this._onItemsChanged(),t}_onItemsChanged(){const e=this.map(t=>({item:t,itemModelMode:t?.getPrimaryModelMode?.()}));this._updateCollectionState(e,!0)}_subscribeItemsModelModesChanges(){this._itemsChanged.pipe((0,z.n)(()=>this._getItemsModelModesChanges()),(0,P.M)(e=>this._updateCollectionState([e],!1)),(0,_e.Q)(this._destroyed$)).subscribe()}_subscribeItemsAttributesChanges(){this._itemsChanged.pipe((0,z.n)(()=>this._getItemsAttributesChanges()),(0,se.p)(e=>!e.payload.silent),(0,P.M)(()=>this._itemAttributeChanged.next()),(0,_e.Q)(this._destroyed$)).subscribe()}_getItemsAttributesChanges(){const e=this.map(t=>t?.events$?.pipe((0,se.p)(n=>n.type===ft.ChangeAttributeValue))).filter(Boolean);return e.length?(0,h.merge)(...e):h.EMPTY}_getItemsModelModesChanges(){const e=[...this,...this._deletedItems].map(t=>t?._getPrimaryModelModeChanges?.()?.pipe((0,E.T)(n=>({item:t,itemModelMode:n})))).filter(Boolean);return e.length?(0,h.merge)(...e):h.EMPTY}_updateCollectionState(e,t){this._trackChanges=!1;const n=e.map(a=>this._onItemModelModeChanged(a)).some(a=>!!a);this._trackChanges=!0,(t||n)&&(this._updateFormApiModelValues(),this._updateFormApiModelPristineState(),this._changed.next(),this._itemsChanged.next())}_onItemModelModeChanged(e){const{item:t,itemModelMode:n}=e;if(!t||null==n)return!1;switch(n){case _.btv.Create:return this._onCreateItem(t);case _.btv.Update:return this._onUpdateItem(t);case _.btv.Delete:return this._onDeleteItem(t);default:return!1}}_onCreateItem(e){const t=this._deletedItems.indexOf(e);return-1!==t?(this._deletedItems.splice(t,1),!0):(-1===this._createdItems.indexOf(e)&&this._createdItems.push(e),!1)}_onUpdateItem(e){const t=this._createdItems.indexOf(e);if(-1!==t)return this._createdItems.splice(t,1),!1;const n=this._deletedItems.indexOf(e);if(-1!==n){const a=this._deletedItems.splice(n,1);super.push(...a)}return!0}_onDeleteItem(e){const t=this._createdItems.indexOf(e),n=this._deletedItems.indexOf(e);return-1!==t?this._createdItems.splice(t,1):-1===n&&this._deletedItems.push(e),super.splice(this.indexOf(e),1),!0}_updateFormApiModelValues(e){if(this._featureValues.DisableBaseViewModelCollectionOptimization)return this._formApiModel??=new ce.Yp([]),this._formApiModel.clear({emitEvent:!1}),this.filter(n=>n?.formApiModel).forEach(n=>{this._formApiModel.push(n.formApiModel,{emitEvent:!1})}),void(!1!==e?.emitEvent&&this._formApiModel.updateValueAndValidity());if(this._formApiModel&&this._formApiModel.length)this._formApiModel.clear({emitEvent:!1}),this.filter(n=>n?.formApiModel).forEach(n=>{this._formApiModel.push(n.formApiModel,{emitEvent:!1})}),!1!==e?.emitEvent&&this._formApiModel.updateValueAndValidity();else{const n=new ce.Yp(this.filter(a=>a?.formApiModel)?.map(a=>a.formApiModel));this._formApiModel||(this._formApiModel=n),this._formApiModel.length||this._host?.formApiModel?.setControl(this._hostAttributeName,n)}}_updateFormApiModelPristineState(){const e=this.formApiModel.pristine,t=this.some(n=>n?.formApiModel?.dirty);t&&e?this.formApiModel.markAsDirty():!t&&!e&&this.formApiModel.markAsPristine()}_reload(e){const t=()=>{for(const r of[...this._deletedItems,...this])this.removeChildModel(r,{triggerNotification:!1});this._model?.childrenChange();const n=[],a=r=>n.push(r.destroy());return this._createdItems.forEach(a),this._createdItems.splice(0,this._createdItems.length),this._deletedItems.forEach(a),this._deletedItems.splice(0,this._deletedItems.length),this.forEach(a),this.splice(0,this.length,...e),(0,h.forkJoin)(n).pipe((0,Ys.U)(void 0),(0,E.T)(()=>{}))};return this._measurePerformanceService?this._measurePerformanceService.measure("ViewModelCollection.reload",()=>t()):t()}removeChildModel(e,t){const n=t?.triggerNotification??!0,a=this._model?.name,r=e.getModelByName(a);this._model?.removeChild(r),n&&this._model?.childrenChange()}copyWithin(e,t,n){return this._triggerChangesAfter(()=>super.copyWithin(e,t,n))}fill(e,t,n){return this._triggerChangesAfter(()=>super.fill(e,t,n))}push(...e){return this._triggerChangesAfter(()=>super.push(...e))}reverse(){return this._triggerChangesAfter(()=>super.reverse())}shift(){return this._triggerChangesAfter(()=>super.shift())}sort(e){return this._triggerChangesAfter(()=>super.sort(e))}splice(e,t,...n){return this._triggerChangesAfter(()=>super.splice(e,t,...n))}unshift(...e){return this._triggerChangesAfter(()=>super.unshift(...e))}getChangedItems(){const e=[...this._deletedItems];return this.filter(n=>{if(n.attributes.IsChanged)return!0;const a=n.getPrimaryModelMode();return a&&a!==_.btv.Update}).concat(e)}createItem(e){var t=this;const n=function(){var a=(0,A.A)(function*(){const r=yield t._generateItem(e||{});return t._insertItem(r,e?.index),r});return function(){return a.apply(this,arguments)}}();return this._measurePerformanceService?this._measurePerformanceService.measureCallback("ViewModelCollection.createItem",()=>n()):n()}getPrimaryAttributeValues(){return Promise.all(this.map(e=>e?.[e?.primaryAttributeName]))}findByPrimaryAttribute(e){var t=this;return(0,A.A)(function*(){for(const n of t)if(yield t._isItemPrimaryAttributeEqual(n,[e]))return n})()}filterByPrimaryAttributes(e){var t=this;return(0,A.A)(function*(){const n=[];for(const a of t)(yield t._isItemPrimaryAttributeEqual(a,e))&&n.push(a);return n})()}merge(e){const t=()=>{this._triggerChangesAfter(()=>{const n=this._mergeItems([...this],e);super.splice(0,this.length,...n),this._createdItems.splice(0,this._createdItems.length),e instanceof sn&&this._mergeItems(this._deletedItems,e._deletedItems)})};return this._measurePerformanceService?this._measurePerformanceService.measure("ViewModelCollection.merge",()=>t()):t()}reload(e){return(0,h.lastValueFrom)(this._reload(e))}remove(e){const[t,n]="number"==typeof e?[e,this[e]]:[this.indexOf(e),e];if(t>=0&&t<this.length)return this.splice(t,1),(0,h.lastValueFrom)(n.destroy())}clear(){return this.reload([])}moveTo(e,t){if(t>=this.length)throw new c.ArgumentOutOfRangeException("Target index cannot be greater than collection length");const n=this.indexOf(e);n===t||t<0||this._triggerChangesAfter(()=>{super.splice(t,0,super.splice(n,1)[0])})}destroy(){this._isDestroyed=!0,this._host=null;const e=this._reload([]);return this._formApiModel.clear({emitEvent:!1}),this._itemAttributeChanged.complete(),this._itemsChanged.complete(),this._destroyed$.next(),this._destroyed$.complete(),(0,h.lastValueFrom)(e)}}class op{constructor(e,t,n=!1){this.name=e,this._value=t,this._locked=n,this._isValueInitialized=!1,this._pendingValue=void 0,this._onChanged=new i.EventEmitter,this._hasInitialValue=!1,null!=t&&(this._isValueInitialized=!0,this._hasInitialValue=!0,this._initialValue=t)}get onChanged(){return this._onChanged}get value(){return this.getValue()}set value(e){this.setValue(e)}get initialValue(){return this._initialValue}set initialValue(e){this.setInitialValue(e)}get hasInitialValue(){return this._hasInitialValue}get isLocked(){return this._locked}emitValueChanged(e){this.onChanged.emit(e)}areValuesEqual(e,t){return(0,j.A)(e,t)}getValue(){return this._value}setValue(e,t=!1){if(this._locked||(this._isValueInitialized=!0,this._pendingValue=e,this.areValuesEqual(this._value,e)))return;const n=(0,Z.A)(this._value);this._value=(0,Z.A)(e),!t&&this.emitValueChanged({name:this.name,value:e,oldValue:n})}resetValue(){this.hasInitialValue&&this.setValue(this.initialValue)}setInitialValue(e){this._hasInitialValue=!0,this._initialValue=e,this._isValueInitialized||this.setValue(e,!0)}setPending(e){const t=typeof this._pendingValue>"u"?this.value:this._pendingValue;this.value=e,this._pendingValue=t}resetPending(){this.value=this._pendingValue,this._pendingValue=void 0}}class au extends op{constructor(e,t,n,a,r=!1){super(e,t,r),this._validatorTypeResolver=n,this._injectionContext=a,this._onValidatorChanged=new i.EventEmitter}get onValidatorChanged(){return this._onValidatorChanged}_createValidatorInfo(){return{name:this.validatorTypeName,instance:this._validatorTypeResolver.getValidator(this.validatorTypeName,{injectionContext:this._injectionContext}),disabled:!0}}emitValueChanged(e){super.emitValueChanged(e),this.hasValidator&&this.updateValidator(e)&&this._onValidatorChanged.emit()}get hasValidator(){return!1}updateValidator(e){return!1}setValidatorInfo(e,t=!1){this.validatorInfo=e}initializeValidator(e,t=!1){if(!this.hasValidator||null==this._validatorTypeResolver)return[...e];let n=e.find(r=>r.name===this.validatorTypeName),a=!1;return null==n&&(n=this._createValidatorInfo(),a=!0),this.setValidatorInfo(n,t),a?[...e,n]:[...e]}}class lp{static{this._properties=new Map}static _get(e){if(!e)return au;if(this._properties.has(e))return this._properties.get(e);throw new Error(`CrtControlProperty with type ${e} doesn't registered`)}static register(e,t){this._properties.set(e,t)}static create(e){return new(this._get(e.typeName))(e.name,e.value,e.validatorTypeResolver,e.injectionContext,!0===e.locked)}}let cp=class extends au{constructor(){super(...arguments),this.validatorTypeName="crt.Required"}get hasValidator(){return!0}updateValidator(e){return this.validatorInfo&&(this.validatorInfo.disabled=!e.value),!0}setValidatorInfo(e,t=!1){super.setValidatorInfo(e,t),this.initialValue=!e.disabled,this.setValue(!e.disabled,t)}};cp=(0,I.Cg)([function $t(o){return function(e){(0,c.checkTypeNameFormat)(o.name,"PropertyName"),lp.register(o.name,e)}}({name:"crt.Required"})],cp);class Kh{}class fl{constructor(e){this.injector=e}}let vn=class extends c.BaseValidator{constructor(e){super(),this.injector=e}defaultValidationError(e){const t=this.injector?.get(v.c$),n=e??{},a=t?.instant(this.i18nMessageKey,n);return{message:e?.message||a||""}}};vn=(0,I.Cg)([(0,c.CrtValidator)(),(0,I.Sn)("design:paramtypes",[i.Injector])],vn);class Qs extends op{get propertiesConfig(){return[{name:"visible",defaultValue:!0},{name:"displayColor"},{name:"required",typeName:"crt.Required",defaultValue:!1}]}get formControl(){return this._formControl||(this._formControl=new ce.MJ(this.value),this._subscribeOnFormControl(this._formControl)),this._formControl}set formControl(e){this._formControl=e,this._subscribeOnFormControl(this._formControl)}get properties(){return this._properties}get onPropertyChanged(){return this._onPropertyChanged}get visible(){return this.getPropertyByName("visible").getValue()}set visible(e){this.getPropertyByName("visible").value=e}get required(){return this.getPropertyByName("required").getValue()}set required(e){this.getPropertyByName("required").value=e}get displayColor(){return this.getPropertyByName("displayColor").getValue()}set displayColor(e){this.getPropertyByName("displayColor").value=e}get isDirty(){return this.formControl.dirty}constructor(e=null,t=null,n=!1,a="",r=[],u,p,f,S){super(a,e),this.validationState=t,this.disabled=n,this._subscription=new h.Subscription,this._onPropertyChanged=new i.EventEmitter,this._crtControlStateAdapter=u,this._validatorTypeResolver=p,this._injectionContext=S,this._initProperties(r),this._subscribeOnPropertiesEvents(),this._initializeValidators(f??[],!0)}static create(e){return new Qs(e.value,null,!1,e.name,e.propertiesConfig??[],e.crtControlStateAdapter,e.validatorTypeResolver,e.validatorInfo,e.injectionContext)}_subscribeOnFormControl(e){this._formControlSubscription?.unsubscribe(),this._formControlSubscription=e.valueChanges.pipe((0,Wi.Z)(e.value),(0,Ca.F)((t,n)=>this.areValuesEqual(t,n))).subscribe(t=>{this.setValue(t)})}_initProperties(e){const t=[...this.propertiesConfig,...e];this._properties=new Map,t.forEach(n=>{const a=lp.create({typeName:n.typeName,name:n.name,value:n.defaultValue,locked:!0===n.locked,validatorTypeResolver:this._validatorTypeResolver,injectionContext:this._injectionContext});this._properties.set(n.name,a)})}_subscribeOnPropertyEvents(e){this._subscription.add(e.onChanged.subscribe(({name:t,value:n,oldValue:a})=>{this.onPropertyChanged.emit({name:t,value:n,oldValue:a})})),this._subscription.add(e.onValidatorChanged.subscribe(()=>{this._refreshValidators()}))}_subscribeOnPropertiesEvents(){this.properties.forEach(e=>{this._subscribeOnPropertyEvents(e)})}_initializeValidators(e,t=!1){this._validatorInfo=e,this._properties.forEach(n=>{this._validatorInfo=n.initializeValidator(this._validatorInfo,t)}),this._refreshValidators()}_getEnabledValidatorFns(e=!1){return this._validatorInfo.filter(t=>!t.disabled&&t.instance.isAsync===e).map(t=>this._crtControlStateAdapter.transform(t))??[]}_refreshValidators(){const e=this._getEnabledValidatorFns();this.formControl.setValidators(e);const t=this._getEnabledValidatorFns(!0);this.formControl.setAsyncValidators(t),this.formControl.updateValueAndValidity()}_updateValidator(e,t=!1){const n=this._validatorInfo.find(a=>a.name===e);if(!n)throw new Error(`Validator ${e} does not exist on ${this.name} attribute.`);n.disabled!==t&&(n.disabled=t,this._refreshValidators())}setValue(e,t){const n=this.formControl;this.areValuesEqual(e,n.value)||(n.dirty||n.markAsDirty(),n.setValue(e,{onlySelf:!!t})),super.setValue(e,t)}findPropertyByName(e){return this.properties.has(e)?this.properties.get(e):null}enableValidator(e){this._updateValidator(e,!1)}disableValidator(e){this._updateValidator(e,!0)}change(e){this.setValue(e)}getPropertyByName(e,t=!1){let n=this.findPropertyByName(e);return!n&&t&&(n=new au(e,null,this._validatorTypeResolver,this._injectionContext),this._properties.set(e,n),this._subscribeOnPropertyEvents(n)),n}hasPropertyValue(e){return!!this.getPropertyByName(e)}getPropertyValue(e){const t=this.getPropertyByName(e);return t?t.getValue():null}setPropertyValue(e,t,n=!1){this.getPropertyByName(e,!0).setValue(t,n)}setPropertyInitialValue(e,t){this.getPropertyByName(e,!0).setInitialValue(t)}getPropertyInitialValue(e){return this.getPropertyByName(e)?.initialValue}getValue(){return this._formControl?this._formControl.value:super.getValue()}destroy(){this._formControlSubscription?.unsubscribe(),this._subscription.unsubscribe()}getInvariabilityPropertyName(){const e=this.getPropertyValue(c.ViewElementProperty.Readonly),t=this.getPropertyValue(c.ViewElementProperty.Disabled);return e??t}toggle(e){const t=this.getInvariabilityPropertyName(),n=this.getPropertyByName(t);n&&(e?n.resetPending():n.setPending(!0))}}class Zi{get attributesMap(){return this._attributesMap}get mappedViewModelAttributes(){return this._mappedViewModelAttributes}get isCollection(){return this._isCollection}get collectionViewModelAttributeName(){return this._collectionViewModelAttributeName}constructor(e){this._attributesMap=new Map,this._mappedViewModelAttributes=new Set,this.attributes=[],this.includePrimaryAttributes=!0,this.name=e}static _getDataSourceInfo(e,t){if(!e.has(t)){const n=new Zi(t);return e.set(t,n),n}return e.get(t)}static _extractViewModelAttributeMapInfo(e){const t=e.split(".");return{dataSourceName:t.shift(),dataSourceAttributePath:t.join(".")}}static _getByDefaultAttribute(e,t,n,a=""){const r=t.modelConfig;if(!r||!r.path)return;const u=this._extractViewModelAttributeMapInfo(r.path);if(!u.dataSourceAttributePath)return void this._getByViewModelCollectionAttribute(e,t,n);if(a&&a!==u.dataSourceName)throw new Error(`Attribute '${e}' mapped on a few DataSources`);const p=this._getDataSourceInfo(n,u.dataSourceName),f=r.aggregationConfig?.aggregationFunction?(0,_.F8E)(u.dataSourceAttributePath):u.dataSourceAttributePath;p.attributes.push({path:f,type:r.type,functionConfig:r.functionConfig,aggregationConfig:r.aggregationConfig}),p._mappedViewModelAttributes.add(e),p._attributesMap.set(e,u.dataSourceAttributePath)}static _getByInlineViewModelAttribute(e,t,n,a=""){const r=t.viewModelConfig||{};Object.entries(r.attributes||{}).forEach(([u,p])=>{const f=`${e}.${u}`;this._processViewModelAttribute(f,p,n,a)})}static _getByViewModelCollectionAttribute(e,t,n){const a=t.modelConfig;if(!a||!a.path)return;const u=this._extractViewModelAttributeMapInfo(a.path).dataSourceName,p=this._getDataSourceInfo(n,u);p._isCollection=!0,p._collectionViewModelAttributeName=e,p._pagingConfig=a.pagingConfig,p._sortingConfig=a.sortingConfig,p._filteringConfig=a.filterAttributes,p.includePrimaryAttributes=void 0===a.includePrimaryAttributes||a.includePrimaryAttributes;const f=t?.viewModelConfig;Object.entries(f?.attributes||{}).forEach(([S,w])=>{this._processViewModelAttribute(`${e}.${S}`,w,n,u)})}static _processViewModelAttribute(e,t,n,a=""){"viewModelConfig"in t||"viewModelName"in t?t.isCollection?this._getByViewModelCollectionAttribute(e,t,n):this._getByInlineViewModelAttribute(e,t,n,a):"from"in t||this._getByDefaultAttribute(e,t,n,a)}static getFromViewModelConfig(e,t=[]){const n=new Map;return Object.entries(e?.attributes||{}).forEach(([a,r])=>{this._processViewModelAttribute(a,r,n)}),t.filter(a=>!n.has(a.name)).forEach(({name:a})=>{const r=new Zi(a);n.set(a,r)}),n}static getLookupListDataSourceInfo(e,t){const n=new Zi("");return n._isCollection=!0,n._collectionViewModelAttributeName=e,Object.entries(t).forEach(([a,r])=>{n.attributes.push({path:r}),n._mappedViewModelAttributes.add(a),n._attributesMap.set(a,r)}),n}_getRowModelDto(e){const t=e.length>0?e[0]:{},n={};return Object.entries(t).forEach(([a,r])=>{this.getMappedAttributeNames(a).forEach(p=>{const f=p.split(".");this.isCollection&&f.length>1&&f.shift(),(0,Ar.A)(n,f.join("."),r)})}),n}_getCollectionModelDto(e){return{[this._collectionViewModelAttributeName]:e.map(a=>this._getRowModelDto([a]))}}getMappedAttributes(){return Array.from(this._mappedViewModelAttributes.values())}getMappedAttributeNames(e){return Array.from(this._attributesMap.entries()).filter(([,t])=>t===e).map(([t])=>t)}getDataSourceAttributePath(e){return this._attributesMap.has(e)?this._attributesMap.get(e):""}getIsMapOnCollection(e){return this._isCollection&&this._collectionViewModelAttributeName===e}getPagingConfig(){return this._pagingConfig}getSortingConfig(){return this._sortingConfig}getFilteringConfig(){return this._filteringConfig||[]}getModelDto(e){return this._isCollection?this._getCollectionModelDto(e):this._getRowModelDto(e)}addNewAttribute(e,t,n){const a=new Map;a.set(this.name,this),Zi._getByDefaultAttribute(e,t,a,n)}getIsDataSourceAttributePathExists(e){return void 0!==this.attributes.find(t=>t.path===e)}}let yl=class extends vn{constructor(){super(...arguments),this.i18nMessageKey="Validators.Required.Message",this.async=!1}validateLczValue(e){return!!e&&!!e.find(t=>t.value&&t.value.trim())}validate(e,t){const n=e.value;return("string"==typeof n?e&&e.value?.trim():this.validateLczValue(n))?null:{required:this.defaultValidationError(t)}}};yl=(0,I.Cg)([(0,c.CrtValidator)({type:"crt.EmptyOrWhiteSpace"})],yl);let up=class extends yl{constructor(e,t){super(e),this.injector=e,this._userInfo=t}validateLczValue(e){return!!e&&!!e.find(t=>t.cultureName===this._userInfo.cultureInfo.sysCultureName&&t.value&&t.value.trim())}};var su;up=(0,I.Cg)([(0,c.CrtValidator)({type:"crt.EmptyOrWhiteLczSpace"}),(0,I.Sn)("design:paramtypes",[i.Injector,_.oqB])],up),function(o){o.Attachments="efbf3a0d-d780-465a-8e4b-8c0765197cfb"}(su||(su={}));let ru=class extends vn{constructor(){super(...arguments),this.i18nMessageKey="Validators.Max.Message",this.async=!1}validate(e,t){const a=ce.k0.max(t.max)(e);return a?{max:this.defaultValidationError({...t,...a.max})}:null}};function dp(o){Object.values(o.controls||{}).forEach(e=>{e instanceof ce.gE||e instanceof ce.Yp?dp(e):e.updateValueAndValidity({onlySelf:!0})})}function ou(o){o?.markAsPristine(),o?.markAsUntouched(),o?.updateValueAndValidity()}function pp(o){return o.statusChanges.pipe((0,Wi.Z)(o.status),(0,rt.$)(()=>"pending"!==o.status.toLowerCase()),(0,E.T)(()=>{}))}function Xs(o,e){return Qa.apply(this,arguments)}function Qa(){return Qa=(0,A.A)(function*(o,e){const t="string"==typeof e?e.split("."):e;let n=t.shift(),a=o;for(;n;)a=yield a[n],n=t.shift();return a}),Qa.apply(this,arguments)}ru=(0,I.Cg)([(0,c.CrtValidator)({type:"crt.Max"})],ru);const t__Chat="Chat",Qr=new Map([["Chat","326bba59-302a-4a5e-857c-2576e1a38ab0"],["API","5f2dc095-4543-4972-b6bc-6599bf6bc3fd"]]),_l=new Map([["InDevelopment","4670b068-ad03-4364-9350-6cc61efd1b7f"],["Active","1d73b111-07a9-49e2-aa15-c9415cce7470"],["Deactivated","2c547e71-7a05-42e1-8b65-2bf63f200156"]]),mp={System:{value:"35f3b644-4fa3-4d1e-8e62-5c3fdc4d3e52",displayValue:"System",primaryColorValue:"#22AC14"},Skill:{value:"6d940b75-21c8-4a90-89ab-9867e6e4a045",displayValue:"Skill",primaryColorValue:"#7848EE"},Agent:{value:"a8fbe253-be1b-4ec4-bc58-65b8047013da",displayValue:"Agent",primaryColorValue:"#E67E22"}};function Ji(o){for(;o?.parent;)o=o.parent;return o}function ct(o){return o?.getDataSource()?.scope===c.DataSourceScope.Page}class cu{static{this._dataCache=new WeakMap}static _getDataSourceColumns(e){const t={};let n=!1;for(const[a,r]of Object.entries(e.dataSourceConfig.config.attributes)){const u=r.path;t[(0,_.F8E)(a)]=u,"Id"===u&&(n=!0)}return!n&&!1!==e.includePrimaryAttributes&&(t.Id="Id"),t}static _createAttributesConfigMap(e,t,n,a,r){const u={},p=this.getAttributeDataSourceOldName(e,a);for(const[f]of Object.entries(t)){const S=r.config?.useOriginalAttributesName?`${f}`:`${p}_${f}`,w=r.config.attributes[f],O={path:`${n}.${f}`,type:w?.type,functionConfig:w?.functionConfig,aggregationConfig:w?.aggregationConfig};u[S]={modelConfig:O}}return u}static _createAttributePagingConfig(e){return e.pagingConfig||{rowCount:30}}static _createAttributeSortingConfig(e){return e.sortingConfig||{attributeName:e.attributeName+"Sorting"}}static _createAttributeFiltersConfig(e){return e.filtersConfig?.map(t=>{const n={...t};return delete n.value,n})||[]}static _getDataSourceNameForDynamicModel(e,t){return e.getBoundDataSourceNameByAttributePath(t)||this._getAttributeDataSourceDefaultName(t)}static _getDynamicDataSourceNamePrefix(){return"DYN_"}static _isDynamicDataSourceName(e){return e.startsWith(this._getDynamicDataSourceNamePrefix())}static _getAttributeDataSourceDefaultName(e){return`${e}DS`}static _getLoadData(e,t,n,a){let r;return this._dataCache.has(e)?r=this._dataCache.get(e):(r=t.load(n,[]).pipe((0,ie.u)(),(0,P.M)(()=>this._dataCache.delete(e))),this._dataCache.set(e,r)),(0,h.lastValueFrom)(r.pipe((0,h.map)(()=>a())),{defaultValue:null})}static createAttributeConfig(e,t,n){const a=n.attributeName,r=n.dataSourceConfig,u=this._getDataSourceColumns(n),p=this._createAttributesConfigMap(e,u,t,a,r);return{isCollection:!0,modelConfig:{path:t,pagingConfig:this._createAttributePagingConfig(n),sortingConfig:this._createAttributeSortingConfig(n),filterAttributes:this._createAttributeFiltersConfig(n)},viewModelConfig:{attributes:p}}}static getAttributeDataSourceOldName(e,t){let n=this._getDataSourceNameForDynamicModel(e,t);return(!n||this._isDynamicDataSourceName(n))&&(n=this._getAttributeDataSourceDefaultName(t)),n}static createDynamicDataSourceNameFromAttributeName(e,t){const n=this._getDynamicDataSourceNamePrefix(),a=this._getDataSourceNameForDynamicModel(e,t);return this._isDynamicDataSourceName(a)?a:`${n}${a}`}static defineAsyncAttribute(e,t,n,a,r){const u=n.modelConfig?.path?.split(".")[0],p=e.getModelByName(u),f="isLookup"in n&&n.isLookup,S="isCollection"in n&&n.isCollection;Object.defineProperty(e,t,{get:()=>p&&S&&!f&&!p?.isLoaded?this._getLoadData(p,e,u,a):Promise.resolve(a()),set:r,configurable:!0})}}class In{static _trimValueIfNeeded(e,t){return t?.trimValue&&!In.isEmptyInputValue(e)&&(0,_.KgX)(e)?e.trim():e}static isEmptyInputValue(e){return null==e||("string"==typeof e||Array.isArray(e))&&0===e.length}static hasValidLength(e){return null!=e&&"number"==typeof e.length}static getControlValueAndTrimIfNeeded(e,t){return In._trimValueIfNeeded(e.value,t)}}class bt{static _setImageLookupTypeUrl(e,t){const n=e[t],a=n?.value;a&&(n.url=(0,_.Mcf)(a))}static _setBlobTypeUrl(e,t,n){const a=t[n];if(a){const r=t.Id;t[n]={value:a,url:(0,_.Mcf)(r,e,n)}}}static _addImageUrl(e,t,n){t.forEach(a=>{switch(a.dataValueType){case c.DataValueType.IMAGELOOKUP:this._setImageLookupTypeUrl(n,a.name);break;case c.DataValueType.Image:this._setBlobTypeUrl(e,n,a.name)}})}static serializeRecordPrimaryAttributesValues(e){return e.map(t=>`${t.name}:${t.value}`).join(";")}static getModelPrimaryAttributeValues(e,t){const n=e.getPrimaryAttributesNames();return t.map(a=>n.map(r=>({name:r,value:a[r]})))}static getOwnColumnsValues(e,t){const n=t??{};if(e.attributes.length){const a=e.attributes.filter(r=>r.attributeType===c.DataSchemaAttributeType.OwnAttribute).map(r=>r.name).filter(r=>!(0,et.A)(n[r])).map(r=>[r,n[r]]);return Object.fromEntries(a)}return n}static getPrimaryAttributeValuesFromParameters(e,t){const n=t.filter(a=>a.type===c.ModelParameterType.PrimaryColumnValue);return n.length?n.map(a=>({[e.primaryAttributeName]:a.value})):[]}static getPrimaryAttributeValuesFromData(e,t){const n=e.getPrimaryAttributesNames();return n.length?n.filter(a=>t[a]).map(a=>({[a]:t[a]})):[]}static getPrimaryAttributeValues(e,t,n){const a=this.getPrimaryAttributeValuesFromData(e,t);return a.length?a:this.getPrimaryAttributeValuesFromParameters(e,n)}static getDataSourceLoadOptions(e){const t={loadType:e?.loadType||c.DataSourceLoadType.Load};return e?.pagingConfig&&(t.pagingConfig=e.pagingConfig),e?.sortingConfig&&(t.sortingConfig=e.sortingConfig),e?.isDistinct&&(t.isDistinct=e.isDistinct),t}static getImageAttributes(e,t){const n=[];return(t||[]).forEach(a=>{const r=e.findAttributeByName(a);r?.isImage&&n.push(r)}),n}static processImageData(e,t,n){const a=bt.getImageAttributes(e,n);return a.length>0&&t.forEach(r=>this._addImageUrl(e.name,a,r)),t}static removeNotRequestedData(e,t){return Object.keys(t).forEach(n=>{e.includes(n)||delete t[n]}),t}static getLoadRequestSignature(e,t,n,a){return JSON.stringify(e)+JSON.stringify(t)+JSON.stringify(n)+JSON.stringify(a)}}var Ze,Xa;function Cl(o,e){return!!o?.some(t=>t.relationPath.split(".").shift()===e)}function bl(o){return o.dataValueType===c.DataValueType.Guid}function Sl(o,e){return bl(e)&&o.primaryAttributeName===e.name}function hp(o,e,t,n){const a=t.findAttributeByName(n),r=o.findAttributeByName(e);return(r.isLookup||bl(r))&&Sl(t,a)?Ze.OneToMany:Sl(o,r)&&a.isLookup?Ze.ManyToOne:Ze.ManyToMany}!function(o){o.None="None",o.OneToMany="OneToMany",o.ManyToOne="ManyToOne",o.ManyToMany="ManyToMany",o.CircularDependency="CircularDependency"}(Ze||(Ze={})),function(o){o.ForTheSelectedPage="ForTheSelectedPage",o.RegardlessOfThePage="RegardlessOfThePage",o.ForTheSelectedRecords="ForTheSelectedRecords"}(Xa||(Xa={}));let ba=class extends vn{constructor(){super(...arguments),this.i18nMessageKey="Validators.MaxLength.Message",this.async=!1}_maxLengthValidator(e,t){return In.hasValidLength(e)&&e.length>t.maxLength?{maxlength:this.defaultValidationError({...t,requiredLength:t.maxLength,actualLength:e.length})}:null}validate(e,t){const n=In.getControlValueAndTrimIfNeeded(e,t);return this._maxLengthValidator(n,t)}};ba=(0,I.Cg)([(0,c.CrtValidator)({type:"crt.MaxLength"})],ba);let Sa=class extends vn{constructor(){super(...arguments),this.i18nMessageKey="Validators.Min.Message",this.async=!1}validate(e,t){const a=ce.k0.min(t.min)(e);return a?{min:this.defaultValidationError({...t,...a.min})}:null}};Sa=(0,I.Cg)([(0,c.CrtValidator)({type:"crt.Min"})],Sa);let va=class extends vn{constructor(){super(...arguments),this.i18nMessageKey="Validators.MinLength.Message",this.async=!1}_minLengthValidator(e,t){return In.isEmptyInputValue(e)||!In.hasValidLength(e)?null:e.length<t.minLength?{minlength:this.defaultValidationError({...t,requiredLength:t.minLength,actualLength:e.length})}:null}validate(e,t){const n=In.getControlValueAndTrimIfNeeded(e,t);return this._minLengthValidator(n,t)}};va=(0,I.Cg)([(0,c.CrtValidator)({type:"crt.MinLength"})],va);let eo=class extends vn{constructor(){super(...arguments),this.i18nMessageKey="Validators.RegExp.Message",this.async=!1}validate(e,t){"string"==typeof t.regex&&(t.regex=new RegExp(t.regex));const n=t.regex.test(e.value);return this.i18nMessageKey=t.message||this.i18nMessageKey,n?null:{[t.errorCode]:this.defaultValidationError({...t})}}};eo=(0,I.Cg)([(0,c.CrtValidator)({type:"crt.RegExp"})],eo);let tr=class extends vn{constructor(){super(...arguments),this.i18nMessageKey="Validators.Required.Message",this.async=!1}_requiredValidator(e,t){return In.isEmptyInputValue(e)?{required:this.defaultValidationError(t)}:null}validate(e,t){const n=In.getControlValueAndTrimIfNeeded(e,t);return this._requiredValidator(n,t)}};tr=(0,I.Cg)([(0,c.CrtValidator)({type:"crt.Required"})],tr);let Ia=class extends vn{constructor(e){super(e),this.injector=e,this._messageKey="Validators.SchemaNamePrefix.",this.async=!0,this._sysSettingsService=e.get(c.SysSettingsService)}_getSchemaNamePrefix(){var e=this;return(0,A.A)(function*(){return(yield e._sysSettingsService.getByCode("SchemaNamePrefix")).value})()}validate(e,t){var n=this;return(0,A.A)(function*(){if((0,ye.A)(e.value))return null;const a=In.getControlValueAndTrimIfNeeded(e,{trimValue:!0}),r=yield n._getSchemaNamePrefix();if(r){const u=!a?.startsWith(r);if(u||a===r)return n.i18nMessageKey=u?n._messageKey+"NoSchemaNamePrefixMessage":n._messageKey+"OnlySchemaNamePrefixMessage",{namePrefixError:n.defaultValidationError({...t,schemaNamePrefix:r})}}return null})()}};Ia=(0,I.Cg)([(0,c.CrtValidator)({type:"crt.SchemaNamePrefix"}),(0,I.Sn)("design:paramtypes",[i.Injector])],Ia);let uu=class extends eo{constructor(){super(...arguments),this._params={regex:/^[a-zA-Z]+[a-zA-Z0-9-_]*$/,errorCode:"allowedSymbolsErrorCode"},this.i18nMessageKey="Validators.SchemaNameAllowedSymbols.Message",this.async=!1}validate(e){return super.validate(e,this._params)}};uu=(0,I.Cg)([(0,c.CrtValidator)({type:"crt.SchemaNameAllowedSymbols"})],uu);let es=class extends vn{constructor(){super(...arguments),this.i18nMessageKey="Validators.UniqueCodeColumnValue.Message",this.async=!1,this._windowCodeList="_copilotCodeList"}validate(e,t){const n=e.value;if(!n)return null;const a=window[this._windowCodeList];return a&&a.filter(u=>u===n).length>1?{uniqueColumnValue:this.defaultValidationError({...t,controlValue:n})}:null}};es=(0,I.Cg)([(0,c.CrtValidator)({type:"crt.UniqueCodeColumnValue"})],es);c.BaseValidator;const gp="calculated";class ts{resolveModelConfig(e){return null}static{this.\u0275fac=function(t){return new(t||ts)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:ts,factory:ts.\u0275fac,providedIn:"root"})}}class to{constructor(){this.account={attributes:{Name:{},Ships:{isCollection:!0,viewModelConfig:"ship"},Employee:{viewModelConfig:"employee"}}},this.ship={attributes:{Id:{}}},this.employee={attributes:{Name:{},Age:{}}}}resolveModelConfig(e){return(0,h.of)(this[e]).pipe((0,Li.c)(50))}static{this.\u0275fac=function(t){return new(t||to)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:to,factory:to.\u0275fac,providedIn:"root"})}}class ns{constructor(e){this.injector=e,this.initDependencies()}initDependencies(){this.repository=this.injector.get(ts),this.ngZone=this.injector.get(i.NgZone)}static{this.\u0275fac=function(t){return new(t||ns)(i.\u0275\u0275inject(i.Injector))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:ns,factory:ns.\u0275fac})}}class Ci{transform(e){return function(t){const{instance:n,params:a}=e,r={value:t.value};return n.validate(r,a)}}static{this.\u0275fac=function(t){return new(t||Ci)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Ci,factory:Ci.\u0275fac,providedIn:"root"})}}const fp=b(42281);class no{sort(e,t){const n=[];let a=[];Object.entries(e||{}).forEach(([u,p])=>{if((0,_.tCF)(p)){let f=p.from;f=Array.isArray(f)?f:[f];const S=f.map(w=>[u,w]);a=a.concat(S)}else n.push(u)});const r=fp(a).reverse();return[...n,...r].filter(Boolean).filter((u,p,f)=>f.indexOf(u)===p).map(u=>[u,r.includes(u)?e[u]??t[u]:e[u]])}static{this.\u0275fac=function(t){return new(t||no)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:no,factory:no.\u0275fac,providedIn:"root"})}}const nr=new i.InjectionToken("View model attribute creator factory");class io{constructor(e,t,n,a,r,u,p){this._crtControlStateAdapter=e,this._validatorTypeResolver=t,this._viewModelGenerator=n,this._attributeCreator=a,this._viewModelRepository=r,this._attributesTopologicalSorting=u,this._injector=p,this._featureValues=this._injector.get(_.G2Y,null,{optional:!0}),this._measurePerformanceService=this._injector.get(_.gcc)}_generateAttributes(e,t,n){const a=this._attributesTopologicalSorting.sort(t,e._attributeConfigs);return Promise.all(a.map(([r,u])=>e._systemAttributes.includes(r)?(console.warn(`Overriding of system attributes is denied. Attribute name:"${r}"`),Promise.resolve()):(n.disableDefaultConfig||(u??={}),e._attributeConfigs[r]=u,u?"viewModelConfig"in u||"viewModelName"in u?u.isCollection?this._generateNestedModelCollectionAttribute(e,r,u,n):this._generateNestedModelAttribute(e,r,u,n):(0,_.tCF)(u)?this._generateCalculatedAttribute(e,r,u,n):this._generateModelAttribute(e,r,u,n):this._removeViewModelAttribute(e,r))))}_generateNestedModelCollectionAttribute(e,t,n,a){var r=this;return this._measurePerformanceService.measureCallback(`BaseViewModelAttributeGenerator.nestedCollectionAttribute.${t}`,(0,A.A)(function*(){const u=e.getBoundDataSourceNameByAttributePath(t),p=e.getModelByName(u),f="viewModelConfig"in n?n.viewModelConfig:yield(0,h.lastValueFrom)(r._viewModelRepository.resolveModelConfig(n.viewModelName)),S=new sn(r._viewModelGenerator,f,p,e,t);r._registerOrSetFormControl(e.formApiModel,t,S.formApiModel);const w=e.attributes[t];e.attributes[t]=S,r._defineNestedModelAttribute(e,t,n,a),r._subscribeOnCollectionChanged(e,t,S,a),void 0!==w&&a.onChangeAttributeValue(t,S,w)}))}_defineNestedModelAttribute(e,t,n,a){cu.defineAsyncAttribute(e,t,n,()=>e.attributes[t],p=>{const f=e.attributes[t];e.attributes[t]=p,f instanceof sn&&p instanceof sn&&this._subscribeOnCollectionChanged(e,t,p,a),a.onChangeAttributeValue(t,p,f)})}_generateNestedModelAttribute(e,t,n,a){return this._measurePerformanceService.measureCallback(`BaseViewModelAttributeGenerator.nestedModelAttribute.${t}`,()=>{const r="viewModelConfig"in n?n.viewModelConfig:n.viewModelName,u=e?.[Ka];return(0,h.lastValueFrom)(this._viewModelGenerator.generate({viewModelConfig:r,parentViewModel:e},u?i.Injector.create({providers:[{provide:hl,useValue:null}],parent:u}):null).pipe((0,h.map)(p=>{this._registerOrSetFormControl(e.formApiModel,t,p.formApiModel);const f=e.attributes[t];e.attributes[t]=p,this._defineNestedModelAttribute(e,t,n,a),void 0!==f&&a.onChangeAttributeValue(t,p,f)})))})}_subscribeOnCollectionChanged(e,t,n,a){if(e._collectionSubscription.has(t)){const u=e._collectionSubscription.get(t);u.unsubscribe(),e._subscriptions.remove(u)}const r=new h.Subscription;r.add(n.changed.subscribe(()=>{a.onChangeAttributeValue(t,n,null)})),r.add(n.itemAttributeChanged.subscribe(()=>{a.onChangeAttributeValue(t,n,null)})),e._collectionSubscription.set(t,r),e._subscriptions.add(r)}_generateCalculatedAttribute(e,t,n,a){this._measurePerformanceService.measure(`BaseViewModelAttributeGenerator.generateCalculatedAttribute.${t}`,()=>{this._attributeCreator.create(gp)?.defineAttribute({viewModel:e,attribute:t,attributeConfig:n,generateOptions:a})})}_addDataValueTypePropertyConfig(e,t){t.dataValueTypeName&&e.push({name:"DataValueType",defaultValue:c.DataValueType[t.dataValueTypeName]})}_disableSystemAttributes(e,t,n){if(!0!==this._featureValues?.DisableBlockingSystemColumns&&e.getBoundDataSchemaAttributeByAttributePath(t)?.isSystem){let r=n.find(u=>"readonly"===u.name);r||(r={name:"readonly"},n.push(r)),r.locked=!0,r.defaultValue=!0}}_getCrtControlPropertiesConfig(e,t,n){const a=Object.entries(n.properties??[]).map(([r,u])=>({name:r,defaultValue:u.defaultValue,locked:!0===u.locked}));return this._addDataValueTypePropertyConfig(a,n),this._disableSystemAttributes(e,t,a),a}_generateModelAttribute(e,t,n,a){this._measurePerformanceService.measure(`BaseViewModelAttributeGenerator.generateModelAttribute.${t}`,()=>{const r=e.attributes[t],u=n?.value,p=this._getCrtControlPropertiesConfig(e,t,n),f=Qs.create({name:t,value:u,crtControlStateAdapter:this._crtControlStateAdapter,validatorTypeResolver:this._validatorTypeResolver,validatorInfo:e._validators[t],propertiesConfig:p,injectionContext:e._injectionContext??Ji(e)?._injectionContext});e._subscriptions.add(f.onChanged.subscribe(O=>{e.attributes[t]=O.value,a.onChangeAttributeValue(O.name,O.value,O.oldValue)})),e._subscriptions.add(f.onPropertyChanged.subscribe(({name:O,value:$,oldValue:te})=>{a.onChangeAttributeValue(`${t}:${O}`,$,te)})),e._crtControls.set(t,f),this._registerOrSetFormControl(e.formApiModel,t,f.formControl),e.attributes[t]=u??null;const S=e._getDataSourceAttributeDataValueType(t);this._attributeCreator.create(S).defineAttribute({viewModel:e,attribute:t,attributeConfig:n,control:f}),void 0!==r&&a.onChangeAttributeValue(t,u,r)})}_registerOrSetFormControl(e,t,n){this._measurePerformanceService.measure(`BaseViewModelAttributeGenerator.registerOrSetFormControl.${t}`,()=>{this._featureValues?.DisableAttributeOnlyRegisteringControl||e.contains(t)?e.setControl(t,n):e.registerControl(t,n)})}_removeViewModelAttribute(e,t){return delete e._attributeConfigs[t],delete e.attributes[t],delete e[t],Promise.resolve()}generate(e,t,n){var a=this;return this._measurePerformanceService.measureCallback("BaseViewModelAttributeGenerator.generateAttributes",(0,A.A)(function*(){yield a._generateAttributes(e,t,n),!a._featureValues?.DisableAttributeOnlyRegisteringControl&&e.formApiModel.updateValueAndValidity()}))}static{this.\u0275fac=function(t){return new(t||io)(i.\u0275\u0275inject(Ci),i.\u0275\u0275inject(fl),i.\u0275\u0275inject(ns),i.\u0275\u0275inject(nr),i.\u0275\u0275inject(ts),i.\u0275\u0275inject(no),i.\u0275\u0275inject(i.Injector))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:io,factory:io.\u0275fac,providedIn:"root"})}}class ao{_defineResourceAttribute(e,t,n,a,r){return new h.Observable(u=>{const p=e._getDataSourceAttributeCaption(a,r);if(this._defineResourceProperty(t,n,p),a.includes(".")){const f=a.split(".")[1];this._defineResourceProperty(t,f,p)}u.next(),u.complete()})}_defineResourceProperty(e,t,n){e[t]||Object.defineProperty(e,t,{get:()=>Promise.resolve(n??""),configurable:!0})}_getResourceNameByPath(e){const t=e.split(".");return t.length>1?t.join("_"):e}generate(e,t){return Object.entries(t||{}).map(([n,a])=>{const r=e[_.c2Z][_.ckl.string],u=this._getResourceNameByPath(n);return this._defineResourceAttribute(e,r,u,n,a)})}static{this.\u0275fac=function(t){return new(t||ao)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:ao,factory:ao.\u0275fac,providedIn:"root"})}}var du,qt,is,yp,so,ut;!function(o){o[o.None=0]="None",o[o.Count=1]="Count",o[o.Sum=2]="Sum",o[o.Avg=3]="Avg",o[o.Min=4]="Min",o[o.Max=5]="Max",o[o.TopOne=6]="TopOne"}(du||(du={})),function(o){o.Create="create",o.Update="update",o.Delete="delete"}(qt||(qt={})),function(o){o.Begin="begin",o.End="end"}(is||(is={})),function(o){o.AllSections="BaseGridSectionTemplate",o.AllCards="BasePageTemplate",o.AllMiniCards="BaseMiniPageTemplate",o.AllLookupSelectionWindows="BaseLookupPageTemplate"}(yp||(yp={})),function(o){o.Paused="Paused",o.Active="Active"}(so||(so={})),function(o){o.DebouncingBusinessRules="DebouncingBusinessRules",o.RunningBusinessRules="RunningBusinessRules",o.ProcessingAttributeChangeRequest="ProcessingAttributeChangeRequest",o.AttributeLoading="AttributeLoading"}(ut||(ut={}));class Yi{get attributes(){return this._parent?[...this._parent.attributes,...this._attributes]:[...this._attributes]}get parent(){return this._parent}constructor(e){if(null!=e){this.name=e.name,this.type=e.type,e.caption&&(this.caption="string"==typeof e.caption?e.caption:{...e.caption}),this.primaryAttributeName=e.primaryAttributeName,this.primaryDisplayAttributeName=e.primaryDisplayAttributeName,this.primaryColorAttributeName=e.primaryColorAttributeName,this.hierarchyAttributeName=e.hierarchyAttributeName,this.createdByAttributeName=e.createdByAttributeName,this.createdOnAttributeName=e.createdOnAttributeName,this.modifiedByAttributeName=e.modifiedByAttributeName,this.modifiedOnAttributeName=e.modifiedOnAttributeName,e.dataSourceConfig&&(this.dataSourceConfig={...e.dataSourceConfig,config:{...e.dataSourceConfig.config}}),this._parent=e.parent;const t=e.attributes??[];this._attributes=[],t.forEach(n=>{this._parent&&this._parent.findAttributeByName(n.name)||this._attributes.push(n.clone())})}else this._attributes=[]}clearAttributes(){this._attributes=[]}addAttribute(e){this._parent&&this._parent.findAttributeByName(e.name)||this._attributes.push(e)}findAttributeByName(e){return this.attributes.find(t=>t.name===e)??null}getPrimaryAttributesNames(){return[this.primaryAttributeName]}getPrimaryLoadAttributes(){const e=[];return this.primaryAttributeName&&e.push(this.primaryAttributeName),this.primaryDisplayAttributeName&&e.push(this.primaryDisplayAttributeName),e}clone(){return new Yi(this)}createChild(){const e=new Yi;return e.name=this.name,e.type=this.type,this.caption&&(e.caption="string"==typeof this.caption?this.caption:{...this.caption}),e.primaryAttributeName=this.primaryAttributeName,e.primaryDisplayAttributeName=this.primaryDisplayAttributeName,e.primaryColorAttributeName=this.primaryColorAttributeName,e.hierarchyAttributeName=this.hierarchyAttributeName,e.createdByAttributeName=this.createdByAttributeName,e.createdOnAttributeName=this.createdOnAttributeName,e.modifiedByAttributeName=this.modifiedByAttributeName,e.modifiedOnAttributeName=this.modifiedOnAttributeName,this.dataSourceConfig&&(e.dataSourceConfig={...this.dataSourceConfig,config:{...this.dataSourceConfig.config}}),e._attributes=[],e._parent=this,e}}class ir{get isDate(){return this.dataValueType===c.DataValueType.Date||this.dataValueType===c.DataValueType.DateTime||this.dataValueType===c.DataValueType.Time}get isImage(){return this.dataValueType===c.DataValueType.IMAGELOOKUP||this.dataValueType===c.DataValueType.Image}get isLookup(){return this.dataValueType===c.DataValueType.Lookup}set isSystem(e){this._isSystem=e}get isSystem(){return this._isSystem}get isAggregate(){return this.attributeType===c.DataSchemaAttributeType.AggregationAttribute||this.attributeType===c.DataSchemaAttributeType.FunctionAttribute&&"aggregation"===this.functionConfig?.type}constructor(e){if(this._isSystem=!1,null!=e){this.name=e.name,this.caption=e.caption,this.path=e.path,this.dataValueType=e.dataValueType,e.validators&&(this.validators={...e.validators||{}});const t=e.defaultValue;t&&(t instanceof h.Observable?this.defaultValue=t.pipe((0,E.T)(n=>this._getConvertDefaultValue(n))):this.defaultValue=(0,h.of)(this._getConvertDefaultValue(t))),this.defaultValueSchema=e.defaultValueSchema,this.isValueCloneable=e.isValueCloneable,this.attributeType=e.attributeType,this.referenceSchemaName=e.referenceSchemaName,this.functionConfig=e.functionConfig,this.aggregationConfig=e.aggregationConfig,this.isMasked=e.isMasked,this.isFormatValidated=e.isFormatValidated,this.isSensitiveData=e.isSensitiveData,this.usageType=e.usageType,this.isRequired=e.isRequired,this.lookupMode=e.lookupMode,this.isSystem=!!e.isSystem}}_getConvertDefaultValue(e){if(this.isDate){if(e instanceof Date){const t=new Date;return t.setTime(e.getTime()),t}return e}return"object"==typeof e?{...e}:e}clone(){return new ir(this)}addDefaultValidators(){const e=this.validators??{};this.isRequired&&(e["crt.Required"]={type:"crt.Required"}),!this.validators&&Object.keys(e).length>0&&(this.validators=e)}}class vl{addColumnCaption(e,t){const{name:n,caption:a}=t;if(!a)return;const r=e.findColumn(n);r&&r.withCaption(a)}addColumn(e,t){!e||!t||(this.addColumnInternal(e,t),this.addColumnCaption(e,t))}}class Tn extends vl{addColumnInternal(e,t){const{name:n,path:a,aggregationConfig:r}=t;e.addAggregationSubQueryColumn(a,(0,c.toAggregationType)(r?.aggregationFunction),r,n)}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(Tn)))(n||Tn)}})()}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Tn,factory:Tn.\u0275fac,providedIn:"root"})}}class ar extends vl{addColumnInternal(e,t){e.addSchemaColumn(t.path,t.name)}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(ar)))(n||ar)}})()}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:ar,factory:ar.\u0275fac,providedIn:"root"})}}class as extends vl{addColumnInternal(e,t){const{name:n,path:a}=t||{},r=t?.functionConfig;e.addAggregationFunctionColumn(a,(0,c.toAggregationType)(r?.aggregation),n,(0,c.toAggregationEvalType)(r?.aggregationEval))}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(as)))(n||as)}})()}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:as,factory:as.\u0275fac,providedIn:"root"})}}class sr extends vl{addColumnInternal(e,t){const{name:n,path:a}=t||{},r=t?.functionConfig;e.addDatePartFunctionColumn(a,(0,c.toDatePartType)(r?.datePart),n)}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(sr)))(n||sr)}})()}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:sr,factory:sr.\u0275fac,providedIn:"root"})}}var ss,pu=b(30721);class mu{constructor(e=null,t){this._dataSchema=null==e?new Yi:t?.useClone?e.clone():e.createChild()}_createDataSchemaAttributeByConfig(e){const t=new ir;return t.name=e.name,t.caption=e.caption,t.path=e.path,t.dataValueType=e.dataValueType,t.validators={...e.validators||{}},t.defaultValue=(0,h.of)("object"==typeof e.defaultValue?{...e.defaultValue}:e.defaultValue),t.defaultValueSchema=e.defaultValueSchema,t.isValueCloneable=e.isValueCloneable,t.attributeType=e.attributeType,t.referenceSchemaName=e.referenceSchemaName,t.functionConfig=e.functionConfig,t.aggregationConfig=e.aggregationConfig,t.usageType=e.usageType,t.isMasked=e.isMasked,t.isFormatValidated=e.isFormatValidated,t.isSensitiveData=e.isSensitiveData,t.isRequired=e.isRequired,t.lookupMode=e.lookupMode,t.isSystem=e.isSystem??!1,t}setEntitySchemaColumnValidators(e,t){return e.isRequired&&this.setAttributeRequiredValidator(t),this.setAttributeTextDataValueTypeValidator(t,e.dataValueType).setAttributeNumberDataValueTypeValidator(t,e.dataValueType).setAttributePhoneDataValueTypeValidator(t,e)}setAttributeValidator(e,t,n){const a=this._dataSchema.attributes.find(u=>u.name===e),r=a.validators||{};return r[t]=n,a.validators=r,this}setAttributeRequiredValidator(e){return this.setAttributeValidator(e,"crt.Required",{type:"crt.Required"})}setAttributeMaxLengthValidator(e,t){return this.setAttributeValidator(e,"crt.MaxLength",{type:"crt.MaxLength",params:{maxLength:t}})}setAttributeTextDataValueTypeValidator(e,t){const n=(0,_.Rb9)(t);return n?this.setAttributeMaxLengthValidator(e,n.maxLength):this}setAttributeMinValueValidator(e,t){return this.setAttributeValidator(e,"crt.Min",{type:"crt.Min",params:{min:t}})}setAttributeMaxValueValidator(e,t){return this.setAttributeValidator(e,"crt.Max",{type:"crt.Max",params:{max:t}})}setAttributeMinMaxValidator(e,t,n){return this.setAttributeMinValueValidator(e,t).setAttributeMaxValueValidator(e,n)}setAttributeNumberDataValueTypeValidator(e,t){const n=(0,_.Bi4)(t);return n&&this.setAttributeMinMaxValidator(e,n.minValue,n.maxValue),this}setAttributePhoneDataValueTypeValidator(e,t){return[c.DataValueType.PHONE_TEXT].includes(t.dataValueType)&&t.isMasked&&this.setAttributeRegExpValidator(e,{regex:/^((?!_).)*$/,errorCode:"phoneMaskValidator"}),this}setAttributeRegExpValidator(e,t){return this.setAttributeValidator(e,"crt.RegExp",{type:"crt.RegExp",params:t})}setAttributesDefaultValue(e){return this._dataSchema.attributes.forEach(t=>{t.defaultValue=e.pipe((0,E.T)(n=>n[t.name]))}),this}addAttribute(e,t){const{name:n,caption:a,dataValueType:r,isValueCloneable:u,referenceSchemaName:p,isMasked:f,isFormatValidated:S,usageType:w,isRequired:O,isSensitiveData:$}=e,te=new ir;return te.name=t.attributeName||n,te.path=t.attributePath||n,te.caption=a,te.dataValueType=r,te.isValueCloneable=!!u,te.attributeType=t.attributeType||c.DataSchemaAttributeType.OwnAttribute,te.referenceSchemaName=p,te.validators={},te.isMasked=f,te.isFormatValidated=S,te.isSensitiveData=$,te.usageType=w,te.isRequired=O,te.defaultValueSchema=e.defaultValueSchema,te.lookupMode=e.lookupMode,te.isSystem=(0,pu.A)([this._dataSchema.createdByAttributeName,this._dataSchema.createdOnAttributeName,this._dataSchema.modifiedByAttributeName,this._dataSchema.modifiedOnAttributeName,this._dataSchema.primaryAttributeName,"ProcessListeners"]).includes(te.name),this._dataSchema.addAttribute(te),t.attributeType===c.DataSchemaAttributeType.OwnAttribute&&this.setEntitySchemaColumnValidators(e,te.name),t.attributeType===c.DataSchemaAttributeType.AggregationAttribute&&(te.aggregationConfig=t.aggregationConfig),t.attributeType===c.DataSchemaAttributeType.FunctionAttribute&&(te.functionConfig=t.functionConfig),this}addOwnAttribute(e){return this.addAttribute(e,{attributeType:c.DataSchemaAttributeType.OwnAttribute})}setEntitySchema(e){return this._dataSchema.dataSourceConfig={type:"crt.EntityDataSource",config:{entitySchemaName:e.name}},this._dataSchema.name=e.name,this._dataSchema.type=c.DataSchemaType.Entity,this._dataSchema.primaryAttributeName=e.getPrimaryColumn()?.name,this._dataSchema.primaryDisplayAttributeName=e.getPrimaryDisplayColumn()?.name,this._dataSchema.primaryColorAttributeName=e.getPrimaryColorColumn()?.name,this._dataSchema.hierarchyAttributeName=e.getHierarchyColumn()?.name,this._dataSchema.caption=e.caption,this._dataSchema.createdByAttributeName=e.columns.find(t=>t.uId===e.createdByColumnUId)?.name,this._dataSchema.createdOnAttributeName=e.columns.find(t=>t.uId===e.createdOnColumnUId)?.name,this._dataSchema.modifiedByAttributeName=e.columns.find(t=>t.uId===e.modifiedByColumnUId)?.name,this._dataSchema.modifiedOnAttributeName=e.columns.find(t=>t.uId===e.modifiedOnColumnUId)?.name,this._dataSchema.clearAttributes(),e.columns.forEach(t=>{this.addOwnAttribute(t)}),this}setDataSchemaConfig(e){return this._dataSchema.name=e.name,this._dataSchema.type=e.type,this._dataSchema.caption="string"==typeof e.caption?e.caption:{...e.caption},this._dataSchema.primaryAttributeName=e.primaryAttributeName,this._dataSchema.primaryDisplayAttributeName=e.primaryDisplayAttributeName,this._dataSchema.dataSourceConfig={...e.dataSourceConfig,config:{...e.dataSourceConfig?.config}},(e.attributes||[]).forEach(n=>{const a=this._createDataSchemaAttributeByConfig(n);this._dataSchema.addAttribute(a)}),this}build(){return this._dataSchema.clone()}}!function(o){o[o.None=0]="None",o[o.Self=1]="Self",o[o.ExplicitEntry=2]="ExplicitEntry",o[o.Delegated=4]="Delegated",o[o.FuncRoleFromOrgRole=8]="FuncRoleFromOrgRole",o[o.UpHierarchy=16]="UpHierarchy",o[o.AsManager=32]="AsManager",o[o.All=63]="All"}(ss||(ss={}));var hu=b(41327);class Il extends Error{get isCritical(){return!0}constructor(e,t){super(t),this.dataSource=e}}class gu extends Il{constructor(e,t){super(e,t)}}class rs extends Il{get isCritical(){return!1}constructor(e,t){super(e,t)}}class fu{constructor(e,t){this.dataSourceName=e,this.injector=t,this._errors=[]}get scope(){return this._scope}get hasErrors(){return 0!==this._errors.length}get hasCriticalErrors(){return this._errors.some(e=>e.isCritical)}get affectedAttributes(){return[]}get isForceUpdateUnchangedData(){return!1}getLastError(){return this.hasErrors?this._errors[this._errors.length-1]:null}get isAggregate(){return!1}getEmptySchema(){return new Yi}init(e,t){return this.initialConfig=e,this._scope=t,(0,h.of)(this)}load(e,t,n){return this.innerLoad(e,t,n)}save(e,t){return this.innerSave(e,t)}insert(e){return this.innerInsert(e)}delete(e){return this.innerDelete(e)}getSchema(){return this.dataSchema?(0,h.of)(this.dataSchema):this.innerGetSchema().pipe((0,P.M)(e=>{this.dataSchema=e}))}getLookupDataSchema(e){return this.innerGetLookupDataSchema(e)}getDefaultValues(){return this.innerGetDefaultValues()}canEdit(e){return this.innerCanEdit(e)}canDelete(e){return this.innerCanDelete(e)}canCreate(e){return this.innerCanCreate(e)}getOwnLoadParameters(){return null}getAllowCopyingRecords(){return!1}}class ng extends gu{get entitySchemaName(){return this._entitySchemaName}constructor(e,t){super(e,`Entity schema with name '${t}' not found.`),this._entitySchemaName=t}}class os extends gu{constructor(e){super(e,`Entity schema name for data source ${e.dataSourceName} is not provided`)}}class ro{constructor(e){this._dataSchemaRepository=e}_getDataSchema(e){var t=this;return(0,A.A)(function*(){const n=yield(0,h.firstValueFrom)(t._dataSchemaRepository.get(e));if(!n)throw new Error(`Can not find DataSchema with name '${e}'`);return n})()}_getDataSchemaAttribute(e,t){var n=this;return(0,A.A)(function*(){const a=e instanceof Yi?e:yield n._getDataSchema(e),r=a.findAttributeByName(t);if(!r)throw new Error(`Can not find column '${t}' in Schema '${a.name}'`);return r})()}_getDataSchemaPrimaryAttribute(e){var t=this;return(0,A.A)(function*(){const n=yield t._getDataSchema(e);return t._getDataSchemaAttribute(n,n.primaryAttributeName)})()}_createRelationPathItemFromForwardPathItem(e,t){var n=this;return(0,A.A)(function*(){const a=yield n._getDataSchemaAttribute(e,t);let r=null,u=null;const p=a.dataValueType===c.DataValueType.Lookup;return p&&(r=a.referenceSchemaName,u=(yield n._getDataSchema(r)).primaryAttributeName),{isJoin:p,referenceSchemaName:r,referenceAttributeName:u,ownSchemaAttributeName:t,ownSchemaName:e}})()}_createRelationPathItemFromJoinPathItem(e,t,n,a){var r=this;return(0,A.A)(function*(){const u=n?yield r._getDataSchemaAttribute(t,n):yield r._getDataSchemaPrimaryAttribute(t);return{isJoin:!0,referenceSchemaName:t,referenceAttributeName:u.name,ownSchemaAttributeName:a,ownSchemaName:e}})()}_createRelationPathItem(e,t){const a=/(?<joinType>.*)\[(?<refSchema>.*?):(?<ownColumn>.*?)(?::(?<refColumn>.*))?]/.exec(t);if(a){const r=a.groups;return this._createRelationPathItemFromJoinPathItem(e,r.refSchema,r.refColumn,r.ownColumn)}return this._createRelationPathItemFromForwardPathItem(e,t)}_getReverseRelationPath(e){const t=[...e],n=[];let a;for(;null!=(a=t.pop());)n.push({isJoin:!0,ownSchemaName:a.referenceSchemaName,ownSchemaAttributeName:a.referenceAttributeName,referenceSchemaName:a.ownSchemaName,referenceAttributeName:a.ownSchemaAttributeName});return n}_buildRelationPath(e,t){var n=this;return(0,A.A)(function*(){const a=t.split("."),r=[];let u=e;for(const p of a){const f=yield n._createRelationPathItem(u,p);u=f.referenceSchemaName,r.push(f)}return r})()}_getRelationPathToSourceSchema(e,t){const n=[...e],a=n.pop(),r=t.split("."),u={isJoin:!0,ownSchemaName:a.isJoin?a.referenceSchemaName:a.ownSchemaName,ownSchemaAttributeName:a.isJoin?a.referenceAttributeName:a.ownSchemaAttributeName,referenceSchemaName:null,referenceAttributeName:r.pop()};return[...n,...a.isJoin?[a]:[],u]}_buildRelationDataFromPath(e){return e.map(t=>({attributeName:t.ownSchemaAttributeName,referenceAttributeName:t.referenceAttributeName,referenceSchemaName:t.referenceSchemaName}))}_getDataSourceParameterRelationData(e){var t=this;return(0,A.A)(function*(){const n=yield t._buildRelationPath(e.dataSchemaName,e.relationPath),a=t._getRelationPathToSourceSchema(n,e.attributePath),r=t._getReverseRelationPath(a);return t._buildRelationDataFromPath(r)})()}_convertEntityDataSourceParameter(e){var t=this;return(0,A.A)(function*(){if(!e.relationsConfigs||0===e.relationsConfigs.length)return e;const n=[];for(const a of e.relationsConfigs){const r=yield t._getDataSourceParameterRelationData(a);n.push({...a,relationData:r})}return{...e,relationsConfigs:n}})()}convert(e,t=!1){return 0===e.length?Promise.resolve([]):t?Promise.resolve(e):Promise.all(e.map(n=>this._convertEntityDataSourceParameter(n)))}}class _p{_getExpressionColumnPath(e,t){const a=e.relationData.map(S=>He.Qf.format("[{referenceSchemaName}:{referenceAttributeName}:{attributeName}]",S)).join("."),r=e.attributePath.split("."),u=r.length>1?"{ownColumnPath}.{relationString}.{columnPath}":"{relationString}.{columnPath}";r.pop();const f={ownColumnPath:r.join("."),relationString:a,columnPath:t};return He.Qf.format(u,f)}_updateFilterLeftExpression(e,t){switch(e.expressionType){case c.ExpressionType.SchemaColumn:case c.ExpressionType.SubQuery:e.columnPath=this._getExpressionColumnPath(t,e.columnPath);break;case c.ExpressionType.Function:e.functionType!==c.FunctionType.Macros&&this._updateFilterLeftExpression(e.functionArgument,t)}}_updateRelatedFilterGroup(e,t){e instanceof c.FilterGroup?this._updateRelatedFilterGroupInstance(e,t):this._updateRelatedFilterGroupObject(e,t)}_updateRelatedFilterGroupObject(e,t){Object.values(e.items).forEach(n=>{this._updateRelatedFilter(n,t)})}_updateRelatedFilterGroupInstance(e,t){e.filters.forEach(n=>this._updateRelatedFilter(n,t))}_updateRelatedFilter(e,t){if(e.filterType!==c.FilterType.FilterGroup){const n=e.leftExpression;n&&this._updateFilterLeftExpression(n,t)}else this._updateRelatedFilterGroup(e,t)}convertToRelatedFilter(e,t=[]){if(!e)return e;let n;if(e instanceof c.BaseFilter)n=e.clone();else{const a=JSON.stringify(e);n=JSON.parse(a)}return[...t].reverse().forEach(a=>{a.relationData&&0!==a.relationData.length&&this._updateRelatedFilter(n,a)}),n}}class Dn{constructor(e,t){this._entitySchemaRepository=e,this._broadcastChannelFactory=t,this._dataSchemas=new Map,this._subscribeOnChangesInDesigner()}_subscribeOnChangesInDesigner(){this._broadcastChannelFactory.createInstance("invalidate-data-schema-cache").messages$.subscribe(({schemaName:e})=>{this._removeCachedSchema(e)})}_createEntityDataSchema(e){const t=new mu;return t.setEntitySchema(e),(0,h.of)(t.build())}_getEntityDataSchema(e){return this._entitySchemaRepository.getSchemaByName(e).pipe((0,z.n)(t=>this._createEntityDataSchema(t)))}_removeCachedSchema(e){this._dataSchemas.has(e)&&(this._dataSchemas.delete(e),this._entitySchemaRepository.clearSchemaCacheByName(e))}get(e){return this._dataSchemas.has(e)?(0,h.of)(this._dataSchemas.get(e)):this._getEntityDataSchema(e).pipe((0,P.M)(t=>this._dataSchemas.set(e,t)))}getByEntitySchema(e){const t=e.name;return this._dataSchemas.has(t)?(0,h.of)(this._dataSchemas.get(t)):this._createEntityDataSchema(e).pipe((0,P.M)(n=>this._dataSchemas.set(t,n)))}static{this.\u0275fac=function(t){return new(t||Dn)(i.\u0275\u0275inject(_.vp2),i.\u0275\u0275inject(W.Vx))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Dn,factory:Dn.\u0275fac,providedIn:"platform"})}}class bi{_createPrimaryColumnValueFilter(e,t){const r=(t.relationsConfigs||[])[0]?.dataSchemaName??e;return this._dataSchemaRepository.get(r).pipe((0,h.map)(u=>{const p=new c.ColumnExpression({columnPath:u.primaryAttributeName}),f=new c.ParameterExpression({value:t.value});return new c.CompareFilter(c.ComparisonType.Equal,p,f)}))}_createColumnValueFilter(e){const t=e.value.attributePath,n=e.value.attributeValue,a=new c.ColumnExpression({columnPath:t}),r=new c.ParameterExpression({value:n}),u=new c.CompareFilter(c.ComparisonType.Equal,a,r);return(0,h.of)(u)}_createPrimaryDisplayValueFilter(e,t){const r=(t.relationsConfigs||[])[0]?.dataSchemaName??e;return this._dataSchemaRepository.get(r).pipe((0,h.map)(u=>{const p=new c.ColumnExpression({columnPath:u.primaryDisplayAttributeName}),f=new c.ParameterExpression({value:t.value});return new c.CompareFilter(t.comparisonType,p,f)}))}_createCustomFilter(e){let t={};return e.value&&(t="string"==typeof e.value?JSON.parse(e.value):e.value),(0,h.of)(t)}_createEmptyParameterFiler(e){const t=e.relationsConfigs||[];if(0===t.length)return(0,h.of)({});const n=t[0];return this._dataSchemaRepository.get(n.dataSchemaName).pipe((0,h.map)(a=>a.primaryAttributeName),(0,h.map)(a=>{const r=new c.ColumnExpression({columnPath:a});return new c.ExistsFilter(r,null)}))}_createEsqFilter(e,t){switch(t.type){case c.ModelParameterType.PrimaryColumnValue:return this._createPrimaryColumnValueFilter(e,t);case c.ModelParameterType.ColumnValue:return this._createColumnValueFilter(t);case c.ModelParameterType.PrimaryDisplayValueFilter:return this._createPrimaryDisplayValueFilter(e,t);case c.ModelParameterType.Filter:return this._createCustomFilter(t);case c.ModelParameterType.Empty:return this._createEmptyParameterFiler(t)}}constructor(e){this._dataSchemaRepository=e}applyParameters(e,t){if(0===e.length)return(0,h.of)(t);const n=e.map(a=>this._createEsqFilter(t.rootSchemaName,a).pipe((0,h.map)(r=>(new _p).convertToRelatedFilter(r,a.relationsConfigs))));return(0,h.forkJoin)(n).pipe((0,h.tap)(a=>{a.forEach(r=>{(0,Re.A)(r)||t.filters.add(r)})}),(0,h.map)(()=>t))}convertToEntityDataSourceParameters(e,t=!1){const n=new ro(this._dataSchemaRepository);return(0,h.from)(n.convert(e,t))}static{this.\u0275fac=function(t){return new(t||bi)(i.\u0275\u0275inject(Dn))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:bi,factory:bi.\u0275fac,providedIn:"root"})}}const Tl=new i.InjectionToken("A factory of data schema to data source attribute converter"),rr=new i.InjectionToken("A factory of entity schema column appender");class Ta{constructor(e,t,n){this.entitySchemaQueryUtils=e,this._entitySchemaColumnAppenderFactory=t,this._dataSchemaToDataSourceAttributeConverter=n}_addPagingToEsq(e,t){t&&(e.rowsOffset=t.rowsOffset,e.rowCount=t.rowCount)}_addSortingToEsq(e,t){t&&t.columns.forEach((n,a)=>{const r=e.findColumn(n.columnName),u=(0,_.x4i)(n.direction);r?r.withOrdering(u,a):e.addSchemaColumn(n.columnName).withOrdering(u,a)})}_addIsDistinctToEsq(e,t){t&&(e.isDistinct=!0)}_addColumnToEsq(e,t){t.filter(Boolean).forEach(n=>{this._entitySchemaColumnAppenderFactory.create(n).addColumn(e,n)})}_prepareAttributePairsForLoad(e,t){return t.map(n=>{if("string"==typeof n){const a=n,r=e.attributes.find(u=>u.name===a);return r?this._dataSchemaToDataSourceAttributeConverter.create(r.attributeType).convert(r):{name:a,path:a}}return n})}build(e,t,n,a){if(n.some(r=>r.type===c.ModelParameterType.Never))throw new Error('Failed to build entity schema query: parameters contains "Never" model parameter.');return(0,h.forkJoin)([this.entitySchemaQueryUtils.convertToEntityDataSourceParameters(n),(0,h.of)(this._prepareAttributePairsForLoad(e,t))]).pipe((0,h.map)(([r,u])=>({esq:new c.EntitySchemaQuery(e.name),esqParameters:r,dataSourceAttributes:u})),(0,h.tap)(({esq:r,dataSourceAttributes:u})=>this._addColumnToEsq(r,u)),(0,h.tap)(({esq:r})=>this._addSortingToEsq(r,a?.sortingConfig)),(0,h.tap)(({esq:r})=>this._addPagingToEsq(r,a?.pagingConfig)),(0,h.tap)(({esq:r})=>this._addIsDistinctToEsq(r,a?.isDistinct)),(0,h.switchMap)(({esq:r,esqParameters:u})=>this.entitySchemaQueryUtils.applyParameters(u,r)))}static{this.\u0275fac=function(t){return new(t||Ta)(i.\u0275\u0275inject(bi),i.\u0275\u0275inject(rr),i.\u0275\u0275inject(Tl))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Ta,factory:Ta.\u0275fac,providedIn:"root"})}}const oo=o=>{switch(o){case c.DataValueType.Guid:return c.DataValueType.Guid;case c.DataValueType.Text:case c.DataValueType.SHORT_TEXT:case c.DataValueType.PHONE_TEXT:case c.DataValueType.WEB_TEXT:case c.DataValueType.EMAIL_TEXT:case c.DataValueType.MEDIUM_TEXT:case c.DataValueType.MAXSIZE_TEXT:case c.DataValueType.LONG_TEXT:case c.DataValueType.HASH_TEXT:case c.DataValueType.SECURE_TEXT:case c.DataValueType.RICH_TEXT:return c.DataValueType.Text;case c.DataValueType.Integer:case c.DataValueType.Enum:return c.DataValueType.Integer;case c.DataValueType.Float:case c.DataValueType.FLOAT1:case c.DataValueType.FLOAT2:case c.DataValueType.FLOAT3:case c.DataValueType.FLOAT4:case c.DataValueType.FLOAT8:case c.DataValueType.Money:return c.DataValueType.Float;case c.DataValueType.DateTime:case c.DataValueType.Date:case c.DataValueType.Time:return c.DataValueType.DateTime;case c.DataValueType.Lookup:case c.DataValueType.IMAGELOOKUP:return c.DataValueType.Lookup;case c.DataValueType.Boolean:return c.DataValueType.Boolean;case c.DataValueType.Blob:return c.DataValueType.Blob;case c.DataValueType.Image:return c.DataValueType.Image;case c.DataValueType.Color:return c.DataValueType.Color;default:throw new Error(`Type ${o} not implemented`)}};class lo extends fu{get isForceUpdateUnchangedData(){return!!this.initialConfig?.isForceUpdateUnchangedData}constructor(e,t){super(e,t),this.dataSourceName=e,this.injector=t,this._affectedAttributes=[],this._errorReferenceAttributes=[],this.type=_.M1n,this._featureValues=t.get(_.G2Y),this._queryExecutor=t.get(Ae),this._entitySchemaService=t.get(_.eut),this._httpClient=this.injector.get(F.HttpClient),this._rightsService=this.injector.get(xn),this.dataSchemaRepository=this.injector.get(Dn),this._entitySchemaRepository=this.injector.get(_.vp2),this._entitySchemaQueryBuilder=this.injector.get(Ta),this._entitySchemaQueryUtils=this.injector.get(bi),this._window=this.injector.get(W.ZP),this._measurePerformanceService=this.injector.get(_.gcc);const n=this.injector.get(_.oqB);this._entityDefaultValuesUrl=n.isSSP?"/ssp/rest/EntitySchemaService/GetEntityDefaultValues":"/rest/EntitySchemaService/GetEntityDefaultValues"}_buildSelectEsq(e,t,n){return this.getSchema().pipe((0,z.n)(a=>this._entitySchemaQueryBuilder.build(a,e,t,n)),(0,E.T)(a=>(!0!==this._featureValues["DataSource-DisableRecordDeactivation"]&&(a.useRecordDeactivation=this.initialConfig.useRecordDeactivation),a.adminUnitRoleSources=this._getEsqAdminUnitRoleSources(),a)))}_getEsqAdminUnitRoleSources(){let e;const t=this.initialConfig.adminUnitRoleSources;return(0,hu.A)(t)?t:((0,Ye.A)(t)&&t.forEach(n=>{const a=ss[n];(0,hu.A)(a)&&(e|=a)}),e)}_normalizeValue(e,t){switch(t){case c.DataValueType.Lookup:return e||null;case c.DataValueType.Date:case c.DataValueType.Time:case c.DataValueType.DateTime:return e instanceof Date?(0,c.encodeDate)(e):"string"==typeof e&&Date.parse(e)>0?`"${e}"`:e;default:return e}}_buildUpdateEsq(e,t){return this._entitySchemaQueryUtils.convertToEntityDataSourceParameters(e,!0).pipe((0,E.T)(n=>({updateQuery:new c.UpdateQuery(this._entitySchemaName),esqParameters:n})),(0,P.M)(({updateQuery:n})=>{n.isForceUpdate=!!this.initialConfig.isForceUpdate,Object.keys(t).forEach(a=>{const r=this._findEntitySchemaColumn(a);if(!r)throw new Error(`Column ${a} not found`);const u=t[a];this._isEntityColumnValue(u)&&n.addColumn(r.name,this._normalizeValue(u,r.dataValueType),oo(r.dataValueType))})}),(0,z.n)(({updateQuery:n,esqParameters:a})=>this._entitySchemaQueryUtils.applyParameters(a,n)),(0,ue.W)(n=>(0,h.throwError)(()=>n)))}_buildInsertEsq(e){const t=new c.InsertQuery(this._entitySchemaName);return Object.keys(e).forEach(n=>{const a=this._findEntitySchemaColumn(n);if(!a)throw new Error(`Column ${n} not found`);const r=e[n];this._isEntityColumnValue(r)&&t.addColumn(a.name,this._normalizeValue(r,a.dataValueType),oo(a.dataValueType))}),t}_buildDeleteEsq(e){return this._entitySchemaQueryUtils.convertToEntityDataSourceParameters(e,!0).pipe((0,z.n)(t=>{const n=new c.DeleteQuery(this._entitySchemaName);return this._entitySchemaQueryUtils.applyParameters(t,n)}))}_checkOwnAttributes(e){return this.getSchema().pipe((0,z.n)(t=>{const n=t.attributes.filter(a=>a.attributeType!==c.DataSchemaAttributeType.OwnAttribute).filter(a=>!(0,et.A)(e[a.name]));return 0!==n.length?(0,h.throwError)(()=>new Error(`Not valid attributes for this data source: ${n.map(a=>a.name).join(",")}`)):(0,h.of)(null)}))}_findEntitySchemaColumn(e){return this._entitySchema.columns.find(t=>t.name===e)}_isEntityColumnValue(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||"bigint"==typeof e||e instanceof Date||"object"==typeof(n=e)&&(null===n||"value"in n);var n}_parseDefaultValues(e,t){const n=new Map(e.attributes.map(a=>[a.name,a.dataValueType]));return t.reduce((a,r)=>{const{defaultValue:u,name:p}=r;if((0,_i.A)(u.value))return a;if(u.displayValue)return{...a,[p]:u};const f=(0,_.ZNE)(u.value,n.get(p));return{...a,[p]:f}},{})}_getDefaultValues(e){const t=`${this._entityDefaultValuesUrl}?entityName=${e}`;return this._httpClient.get(t).pipe((0,ue.W)(n=>this._catchErrorResponse(n)),(0,E.T)(n=>n.GetEntityDefaultValuesResult),(0,Y.Z)(n=>this.getSchema().pipe((0,P.M)(a=>{let r=this._window.defaultValueStorage;const u=n?.find(p=>p.name===a.primaryAttributeName)?.defaultValue?.value;if(r=r||{},u){r[`${e}_${u}`]=n,this._window.defaultValueStorage=r}}),(0,E.T)(a=>this._parseDefaultValues(a,n)))))}_catchErrorResponse(e){return console.log(e),(0,h.of)({GetEntityDefaultValuesResult:[]})}_requestEntitySchemaColumnsInfo(e){const t=e.map(n=>n.attributePath);return this._entitySchemaService.getEntitySchemaColumnsInformationByPathsArray(this._entitySchema.uId,t).pipe((0,E.T)(n=>e.map(a=>({column:n[a.attributePath],config:a}))))}_getEntitySchemaForwardReferenceColumnsInfo(e){const t={name:this._entitySchemaName,loadLookupColumns:!1,forwardReferencePaths:e.map(n=>n.attributePath)};return this._entitySchemaRepository.getSchemes([t]).pipe((0,E.T)(()=>e.map(n=>{const a=n.attributePath.split("."),r=this._entitySchemaRepository.findEntitySchemaColumnByPath(this._entitySchemaName,a);return{column:new _.PYA(r),config:n}})))}_createReferenceAttributes(e,t){return 0===t.length?(0,h.of)(e):(0,h.of)(this._featureValues["DataSource-DontUseOneRequestForEntitySchemes"]).pipe((0,z.n)(n=>n?this._requestEntitySchemaColumnsInfo(t):this._getEntitySchemaForwardReferenceColumnsInfo(t))).pipe((0,P.M)(n=>{n.forEach(({column:a,config:r})=>{r.attributeType===c.DataSchemaAttributeType.AggregationAttribute&&r.aggregationConfig?.aggregationFunction===c.AggregationFunction.Count&&(a.dataValueType=c.DataValueType.Integer),e.addAttribute(a,r)})}),(0,E.T)(()=>e))}_createAttributesFromInitialConfig(e,t={}){const n=[];return Object.entries(t).forEach(([a,r])=>{const u=r;u.type===c.DataSchemaAttributeType.ForwardReferenceAttribute&&n.push({attributeName:a,attributeType:c.DataSchemaAttributeType.ForwardReferenceAttribute,attributePath:u.path}),u.type===c.DataSchemaAttributeType.AggregationAttribute&&n.push({attributeName:a,attributeType:c.DataSchemaAttributeType.AggregationAttribute,attributePath:u.path,aggregationConfig:u.aggregationConfig}),u.type===c.DataSchemaAttributeType.FunctionAttribute&&n.push({attributeName:a,attributeType:c.DataSchemaAttributeType.FunctionAttribute,attributePath:u.path,functionConfig:u.functionConfig})}),this._createReferenceAttributes(e,n).pipe((0,ue.W)(a=>{const r=a.message&&a.toString(),u=new rs(this,r);return this._errors.push(u),n.forEach(p=>{this._errorReferenceAttributes.push(p)}),(0,h.of)(e)}))}_shouldSkipLoad(e){return e.some(t=>t.type===c.ModelParameterType.Never)}_setValidValuesForLookupAttributes(e,t){return Object.keys(t).forEach(n=>{const a=e.attributes.find(r=>r.name===n);a&&(a.dataValueType===c.DataValueType.Lookup||a.dataValueType===c.DataValueType.IMAGELOOKUP)&&""===t[n]&&(t[n]=null)}),t}_throwErrorResponse(e){const t="string"==typeof e?e:e?.message;return(0,h.throwError)(()=>({success:!1,rowsAffected:0,errorInfo:t}))}_mapOperationResult(e){return{success:e.success,rowsAffected:e.rowsAffected}}get affectedAttributes(){return[...this._affectedAttributes]}get isAggregate(){return!!this.dataSchema&&this.dataSchema.attributes.some(t=>t.isAggregate)}_getIsAffectedAttributeStored(e){return this._affectedAttributes.some(t=>t.path===e.path&&t.schemaName===e.schemaName)}_collectUsedAttributes(e){let t=e._getUsedColumns();t=t.filter(n=>!this._getIsAffectedAttributeStored(n)),this._affectedAttributes.push(...t)}_findErrorReferenceAttribute(e){const t="string"==typeof e?e:e.name;return this._errorReferenceAttributes.find(n=>n.attributeName===t)}innerLoad(e,t,n){if(this.hasErrors){if(this.hasCriticalErrors)return(0,h.throwError)(()=>this.getLastError());if(0!==e.length&&e.every(r=>null!=this._findErrorReferenceAttribute(r)))return(0,h.throwError)(()=>this.getLastError())}return this._shouldSkipLoad(t)?(0,h.of)([]):this._buildSelectEsq(e,t,n||{}).pipe((0,P.M)(a=>this._collectUsedAttributes(a)),(0,z.n)(a=>this._queryExecutor.executeSelectQuery(a,{throttled:n?.throttled}).pipe(this._measurePerformanceService.measure$(`EntityDataSource.load.executeSelectQuery.${this.dataSourceName}`),(0,ue.W)(()=>(0,h.throwError)(()=>{const r=this.injector.get(v.c$);return new Error(r.instant("BaseViewModel.LoadingModelErrorMessage"))})))),(0,E.T)(a=>a),(0,Y.Z)(a=>this.getSchema().pipe((0,E.T)(r=>(r.attributes&&a.forEach(u=>{this._setValidValuesForLookupAttributes(r,u)}),a)))))}innerSave(e,t){return this.hasCriticalErrors?(0,h.throwError)(()=>this.getLastError()):this._checkOwnAttributes(t).pipe((0,z.n)(()=>this._buildUpdateEsq(e,t)),(0,z.n)(n=>this._queryExecutor.executeUpdateQuery(n)),(0,E.T)(n=>this._mapOperationResult(n)),(0,ue.W)(n=>this._throwErrorResponse(n)))}innerInsert(e){return this.hasCriticalErrors?(0,h.throwError)(()=>this.getLastError()):this._checkOwnAttributes(e).pipe((0,E.T)(()=>this._buildInsertEsq(e)),(0,z.n)(t=>(0,h.forkJoin)({response:this._queryExecutor.executeInsertQuery(t),dataSchema:this.getSchema()})),(0,E.T)(({response:t,dataSchema:n})=>({...this._mapOperationResult(t),primaryAttributes:[{[n.primaryAttributeName]:t.id}]})),(0,ue.W)(t=>this._throwErrorResponse(t)))}innerDelete(e){return this.hasCriticalErrors?(0,h.throwError)(()=>this.getLastError()):this._buildDeleteEsq(e).pipe((0,z.n)(t=>this._queryExecutor.executeDeleteQuery(t)),(0,E.T)(t=>this._mapOperationResult(t)),(0,ue.W)(t=>this._throwErrorResponse(t)))}innerGetSchema(){return this.hasCriticalErrors?(0,h.throwError)(()=>this.getLastError()):this.dataSchemaRepository.get(this._entitySchemaName).pipe((0,E.T)(e=>new mu(e)),(0,z.n)(e=>this._createAttributesFromInitialConfig(e,this.initialConfig.attributes)),(0,P.M)(e=>{const t=this._getDefaultValues(this._entitySchemaName).pipe((0,Tt.t)({bufferSize:1,refCount:!0}));e.setAttributesDefaultValue(t)}),(0,E.T)(e=>e.build()))}innerGetLookupDataSchema(e){if(this.hasCriticalErrors)return(0,h.throwError)(()=>this.getLastError());const n=e.split(".")[0],a=this._findEntitySchemaColumn(n);return a?a.dataValueType!==c.DataValueType.Lookup?(0,h.throwError)(()=>new Error(`DataValueType for column '${n}' isn't lookup`)):a.referenceSchemaName?this.dataSchemaRepository.get(a.referenceSchemaName):(0,h.throwError)(()=>new Error(`referenceSchemaName for column '${n}' is absent`)):(0,h.throwError)(()=>new Error(`Can't find column with name '${n}'`))}innerGetDefaultValues(){return this.hasCriticalErrors?(0,h.throwError)(()=>this.getLastError()):this._getDefaultValues(this._entitySchemaName)}innerCanDelete(e){return this.hasCriticalErrors?(0,h.of)({result:!1}):this._rightsService.getCanDelete({schemaName:this.initialConfig.entitySchemaName,primaryColumnValue:e.primaryColumnValue})}innerCanCreate(e){if(this.hasCriticalErrors)return(0,h.of)({result:!1});const t={isNew:!0,schemaName:this.initialConfig.entitySchemaName};return this._rightsService.getCanEdit(t)}innerCanEdit(e){if(this.hasCriticalErrors)return(0,h.of)({result:!1});const t={primaryColumnValue:e.primaryColumnValue,isNew:!1,schemaName:this.initialConfig.entitySchemaName};return this._rightsService.getCanEdit(t)}getEmptySchema(){return this._entitySchemaName?new Yi({name:this._entitySchemaName}):super.getEmptySchema()}init(e,t){return super.init(e,t).pipe((0,Y.Z)(n=>{if(!this.initialConfig.entitySchemaName){const a=new os(this);return this._errors.push(a),(0,h.throwError)(()=>a)}return(0,h.of)(n)}),(0,P.M)(()=>this._entitySchemaName=this.initialConfig.entitySchemaName),(0,Y.Z)(n=>this._entitySchemaRepository.getSchemaByName(this.initialConfig.entitySchemaName).pipe((0,P.M)(a=>this._entitySchema=a),(0,ue.W)(()=>{this._entitySchema=new _.t6X,this._entitySchema.name=this._entitySchemaName,this._entitySchema.columns=[];const a=new ng(this,this._entitySchemaName);return this._errors.push(a),(0,h.throwError)(()=>a)}),(0,E.T)(()=>n))))}getOwnLoadParameters(){return this.initialConfig?.loadParameters}getAllowCopyingRecords(){return this.initialConfig?.allowCopyingRecords}}class yu{convert(e){const{name:t,path:n,caption:a,dataValueType:r}=e||{};return{name:t,path:n||t,caption:a,dataValueType:r}}}class ls extends yu{convert(e){const{aggregationConfig:t}=e||{};return{...super.convert(e),type:"aggregation",aggregationConfig:{filter:t?.filter,aggregationFunction:t?.aggregationFunction,sortByColumn:t?.sortByColumn,sortByDirection:t?.sortByDirection}}}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(ls)))(n||ls)}})()}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:ls,factory:ls.\u0275fac,providedIn:"root"})}}class or extends yu{convert(e){return{...super.convert(e),type:"default"}}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(or)))(n||or)}})()}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:or,factory:or.\u0275fac,providedIn:"root"})}}class Si extends yu{convert(e){const{functionConfig:t}=e||{};return{...super.convert(e),type:"function",functionConfig:t}}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(Si)))(n||Si)}})()}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Si,factory:Si.\u0275fac,providedIn:"root"})}}const Da="PrimaryValue",co="DisplayValue";class Dl{constructor(e){this._queryExecutor=e}_getInFilter(e){const t=new c.MacrosFunctionExpression({macrosType:c.QueryMacrosType.PrimaryColumn});return new c.InFilter(c.ComparisonType.Equal,t,e.map(n=>new c.ParameterExpression({value:n})))}_getEsq(e,t){const n=new c.EntitySchemaQuery(e);n.addMacrosFunctionColumn(c.QueryMacrosType.PrimaryColumn,Da),n.addMacrosFunctionColumn(c.QueryMacrosType.PrimaryDisplayColumn,co);const a=this._getInFilter(t);return n.filters.add(a),n}_getSchemaLookupData(e,t){const n={};for(let a=0;a<t.length;a++){const r=t[a],[u,p]=e[a];n[u]={};for(const f of p){const S=r.find(w=>w[Da]===f);n[u][f]=S?S[co]:null}}return n}load(e){const t=Object.entries(e),n=t.map(([a,r])=>this._getEsq(a,r));return this._queryExecutor.executeBatchSelectQuery(n).pipe((0,E.T)(a=>this._getSchemaLookupData(t,a)))}static{this.\u0275fac=function(t){return new(t||Dl)(i.\u0275\u0275inject(Ae))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Dl,factory:Dl.\u0275fac,providedIn:"root"})}}class Ml{constructor(e){this._intentStatuses=_l,this._intentModes=Qr,this._columnLookupValuesService=e.get(_.Ik6)}convertToDataSourceModel(e){return(0,h.combineLatest)([this._columnLookupValuesService.getColumnLookupValues("CopilotIntentStatus"),this._columnLookupValuesService.getColumnLookupValues("CopilotIntentMode"),(0,h.of)(Object.values(mp))]).pipe((0,h.map)(([t,n,a])=>{const r=this._intentStatuses.get(e.Status),u=t.find(w=>w.value===r),p=this._intentModes.get(e.Mode)??this._intentModes.get(t__Chat),f=n.find(w=>w.value===p),S=a.find(w=>w.displayValue===e.Type);return{Id:e.UId,Code:e.Code,Description:e.Description,Prompt:e.Prompt,Type:S,Name:e.Title,Status:u,PackageUId:e.PackageUId,Mode:f}}))}convertToModel(e){const t={};return Object.entries(e).forEach(([n,a])=>{"Name"===n&&(n="Title"),"Id"===n&&(n="UId"),"Status"===n&&(a=[...this._intentStatuses].filter(([,r])=>r===e.Status.value).map(([r])=>r).shift()),"Mode"===n&&(a=[...this._intentModes].filter(([,r])=>r===e.Mode.value).map(([r])=>r).shift()),"Type"===n&&(a=Object.values(mp).filter(r=>r.value===e.Type.value).map(r=>r.displayValue).shift()),t[n]=a}),t}static{this.\u0275fac=function(t){return new(t||Ml)(i.\u0275\u0275inject(i.Injector))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Ml,factory:Ml.\u0275fac,providedIn:"root"})}}class Ki{convertToDataSourceModel(e){return(0,h.of)({Id:e.UId,Intent:e.Intent,Code:e.Code,Name:e.Name,Description:e.Description,SourceCollection:e.SourceCollection,DataValueTypeUId:e.DataValueTypeUId})}convertToModel(e){const t={};return Object.entries(e).forEach(([n,a])=>{"Id"===n&&(n="UId"),t[n]=a}),t}static{this.\u0275fac=function(t){return new(t||Ki)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Ki,factory:Ki.\u0275fac,providedIn:"root"})}}const cs=W.gX.create({token:Tl,mappings:[{predicate:c.DataSchemaAttributeType.AggregationAttribute,injectable:ls},{predicate:c.DataSchemaAttributeType.FunctionAttribute,injectable:Si}],default:{injectable:or}}),wl=W.gX.create({token:rr,mappings:[{predicate:o=>"aggregation"===o.type,injectable:Tn},{predicate:o=>"function"===o.type&&"aggregation"===o.functionConfig?.type,injectable:as},{predicate:o=>"function"===o.type&&"datePart"===o.functionConfig?.type,injectable:sr}],default:{injectable:ar}});class Ma{constructor(){this._designItems=new Map,console.warn("CopilotIntentDesignItemRepositoryService created")}getDesignItem(e){return this._designItems.get(e)}getDesignItems(){return Array.from(this._designItems.values())}setDesignItem(e){this._designItems.set(e.UId,e)}static{this.\u0275fac=function(t){return new(t||Ma)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Ma,factory:Ma.\u0275fac})}}const _u=new i.InjectionToken("COPILOT_INTENT_REPOSITORY_TOKEN");class Bn{constructor(){this._copilotActionCodeMaxLength=41,this._defaultNewActionCode="Action",this._sysSettingsService=(0,i.inject)(c.SysSettingsService)}_checkCodeIsUnique(e,t){return!e||!e.includes(t)}_generateCode(e){if(e.generateFromName){const t=e.name;if(!_.qFg.isTextUsableForCodeGeneration(t))return null;const n=e.prefix+this._defaultNewActionCode;return n+_.qFg.generateCode(t,this._copilotActionCodeMaxLength-n.length)}return W.$A.generateUnique(this._defaultNewActionCode,e.prefix)}generate(e,t=null){const n={generateFromName:!!t,name:t,prefix:null};return(0,h.from)(this._sysSettingsService.getByCode("SchemaNamePrefix")).pipe((0,h.map)(a=>a.value),(0,h.tap)(a=>n.prefix=a),(0,h.repeat)(n.generateFromName?1:void 0),(0,h.map)(()=>this._generateCode(n)),(0,h.filter)(a=>this._checkCodeIsUnique(e,a)),(0,h.take)(1),(0,h.defaultIfEmpty)(null))}static{this.\u0275fac=function(t){return new(t||Bn)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Bn,factory:Bn.\u0275fac})}}class ei{constructor(){this._copilotSkillCodeMaxLength=41,this._defaultNewSkillCode="Skill",this._sysSettingsService=(0,i.inject)(c.SysSettingsService)}_checkCodeIsUnique(e,t){return!e||!e.includes(t)}_generateCode(e){if(e.generateFromName){const t=e.name;if(!_.qFg.isTextUsableForCodeGeneration(t))return null;const n=e.prefix+this._defaultNewSkillCode;return n+_.qFg.generateCode(t,this._copilotSkillCodeMaxLength-n.length)}return W.$A.generateUnique(this._defaultNewSkillCode,e.prefix)}generate(e,t=null){const n={generateFromName:!!t,name:t,prefix:null};return(0,h.from)(this._sysSettingsService.getByCode("SchemaNamePrefix")).pipe((0,h.map)(a=>a.value),(0,h.tap)(a=>n.prefix=a),(0,h.repeat)(n.generateFromName?1:void 0),(0,h.map)(()=>this._generateCode(n)),(0,h.filter)(a=>this._checkCodeIsUnique(e,a)),(0,h.take)(1),(0,h.defaultIfEmpty)(null))}static{this.\u0275fac=function(t){return new(t||ei)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:ei,factory:ei.\u0275fac})}}class Mn{constructor(){this._repository=(0,i.inject)(_u),this._actionCodeGenerator=(0,i.inject)(Bn),this._skillCodeGenerator=(0,i.inject)(ei),this._designRepository=(0,i.inject)(Ma)}_loadIntentUIdByActionUId(e){return(0,h.from)(c.Model.create("CopilotAction")).pipe((0,h.switchMap)(t=>t.load({attributes:["Intent"],parameters:[{type:c.ModelParameterType.Filter,value:new c.CompareFilter(c.ComparisonType.Equal,new c.ColumnExpression({columnPath:"Id"}),new c.ParameterExpression({value:e}))}]})),(0,h.map)(t=>{const n=t[0]||{};return(0,Re.A)(n)?null:n.Intent?.value}))}_applyActionToIntent(e,t){const a=(e.Actions||[]).findIndex(u=>u.Id===t.Id);if(-1===a)return!1;const r=e.Actions[a];return e.Actions.splice(a,1,{...r,...t}),!0}_applyParameterToIntent(e,t){const n="InputParameters"===t.SourceCollection?e.InputParameters:e.OutputParameters,a=n.findIndex(r=>r.UId===t.UId);return-1!==a&&(n.splice(a,1,{...n[a],...t}),!0)}_getSuccessResponse(){return{success:!0}}_getSuccessResponseObservable(){return(0,h.of)(this._getSuccessResponse())}_getDesignIntent(e){return(0,h.of)(this._designRepository.getDesignItem(e))}_getDesignIntents(){return Array.from(this._designRepository.getDesignItems())}_setDesignIntent(e){this._designRepository.setDesignItem(e)}_getIntentByParameterUId(e){for(const t of this._getDesignIntents()){if(t.InputParameters.find(r=>r.UId===e))return(0,h.of)({intent:t,sourceCollection:"InputParameters"});if(t.OutputParameters.find(r=>r.UId===e))return(0,h.of)({intent:t,sourceCollection:"OutputParameters"})}return(0,h.of)({})}getIntent(e){return this._repository.get(e).pipe((0,h.tap)(t=>{this._setDesignIntent(t)}))}getAllSkills(){return this._repository.getAllCodes()}getIntentParameter(e){return this._getIntentByParameterUId(e).pipe((0,h.map)(({intent:t,sourceCollection:n})=>"InputParameters"===n?t.InputParameters:t.OutputParameters),(0,h.map)(t=>t.find(n=>n.UId===e)))}getIntentParameters(e,t){return this._getDesignIntent(e).pipe((0,h.map)(n=>"InputParameters"===t?n.InputParameters:n.OutputParameters))}updateIntentParameter(e){return this._getIntentByParameterUId(e.UId).pipe((0,h.switchMap)(({intent:t,sourceCollection:n})=>(e.SourceCollection=n,this._applyParameterToIntent(t,e),this._getSuccessResponseObservable())))}createIntentParameter(e){return this._getDesignIntent(e.Intent.value).pipe((0,h.map)(t=>(("InputParameters"===e.SourceCollection?t.InputParameters:t.OutputParameters).push(e),this._getSuccessResponse())))}deleteIntentParameter(e){return this._getIntentByParameterUId(e).pipe((0,h.map)(({intent:t,sourceCollection:n})=>{const a="InputParameters"===n?t?.InputParameters:t?.OutputParameters,r=(a??[]).findIndex(u=>u.UId===e);return-1!==r&&a.splice(r,1),t}),(0,h.switchMap)(t=>this._repository.update(t)))}createIntent(e){return this._repository.create(e.UId).pipe((0,h.map)(t=>(t.UId=e.UId,t.Title=e.Title,t.Code=e.Code,t.Status=e.Status,t.Description=e.Description,t.Prompt=e.Prompt,t.Mode=e.Mode,t)),(0,h.switchMap)(t=>this._repository.update(t)))}updateIntent(e){return(0,h.forkJoin)([this._getDesignIntent(e.UId),this._repository.get(e.UId)]).pipe((0,h.map)(([t,n])=>{const a={...n,...t,...e};return this._setDesignIntent(a),a}),(0,h.switchMap)(t=>this._repository.update(t)))}createAction(e){return this._repository.get(e.Intent.value).pipe((0,h.map)(t=>(t.Actions.push(e),t)),(0,h.switchMap)(t=>this._repository.update(t)))}getActionByUId(e){return this._loadIntentUIdByActionUId(e).pipe((0,h.switchMap)(t=>t?this._repository.get(t).pipe((0,h.map)(n=>n.Actions.filter(a=>a.Id===e)),(0,h.map)(n=>n[0])):(0,h.of)({})))}getIntentByActionUId(e){return this.getActionByUId(e).pipe((0,h.switchMap)(t=>t?.Intent?this.getIntent(t.Intent.value):(0,h.of)({})))}updateAction(e){return this._loadIntentUIdByActionUId(e.Id).pipe((0,h.switchMap)(t=>this._repository.get(t).pipe((0,h.switchMap)(n=>this._applyActionToIntent(n,e)?this._repository.update(n):(0,h.of)({})))))}generateActionCode(e,t=null){return this._actionCodeGenerator.generate(e,t)}generateSkillCode(e,t=null){return this._skillCodeGenerator.generate(e,t)}deleteAction(e,t){return this._repository.get(e).pipe((0,h.map)(n=>(n.Actions=n.Actions.filter(a=>a.Id!==t),n)),(0,h.switchMap)(n=>this._repository.update(n)))}static{this.\u0275fac=function(t){return new(t||Mn)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Mn,factory:Mn.\u0275fac})}}const g_={"zh-TW":JSON.parse('{"Dialog":{"ProcessSchemaSavedWithValidationError":"The process schema saved successfully, but validation errors prevent it from running."}}'),"zh-CN":JSON.parse('{"Dialog":{"ProcessSchemaSavedWithValidationError":"The process schema saved successfully, but validation errors prevent it from running."}}'),"vi-VN":JSON.parse('{"Dialog":{"ProcessSchemaSavedWithValidationError":"The process schema saved successfully, but validation errors prevent it from running."}}'),"tr-TR":JSON.parse('{"Dialog":{"ProcessSchemaSavedWithValidationError":"\u0130\u015flem \u015femas\u0131 ba\u015far\u0131l\u0131 bir \u015fekilde kaydedildi, ancak do\u011frulama hatalar\u0131 \xe7al\u0131\u015fmas\u0131n\u0131 engelliyor."}}'),"th-TH":JSON.parse('{"Dialog":{"ProcessSchemaSavedWithValidationError":"The process schema saved successfully, but validation errors prevent it from running."}}'),"sv-SE":JSON.parse('{"Dialog":{"ProcessSchemaSavedWithValidationError":"The process schema saved successfully, but validation errors prevent it from running."}}'),"sq-AL":JSON.parse('{"Dialog":{"ProcessSchemaSavedWithValidationError":"Procesi i skem\xebs u ruajt me sukses, por gabimet e miratimit nuk e lejojn\xeb t\xeb vazhdoj\xeb."}}'),"ro-RO":JSON.parse('{"Dialog":{"ProcessSchemaSavedWithValidationError":"Schema de proces a fost salvat\u0103 cu succes, dar erorile de validare o \xeempiedic\u0103 s\u0103 ruleze."}}'),"pt-PT":JSON.parse('{"Dialog":{"ProcessSchemaSavedWithValidationError":"The process schema saved successfully, but validation errors prevent it from running."}}'),"pt-BR":JSON.parse('{"Dialog":{"ProcessSchemaSavedWithValidationError":"O esquema do processo foi salvo com \xeaxito, mas erros de valida\xe7\xe3o impedem sua execu\xe7\xe3o."}}'),"pl-PL":JSON.parse('{"Dialog":{"ProcessSchemaSavedWithValidationError":"Schemat procesu zapisany pomy\u015blnie, ale b\u0142\u0119dy walidacji uniemo\u017cliwiaj\u0105 jego uruchomienie."}}'),"nl-NL":JSON.parse('{"Dialog":{"ProcessSchemaSavedWithValidationError":"Het proceschema is succesvol opgeslagen, maar validatiefouten voorkomen dat het wordt uitgevoerd."}}'),"lv-LV":JSON.parse('{"Dialog":{"ProcessSchemaSavedWithValidationError":"Sh\u0113ma ir veiksm\u012bgi saglab\u0101ta, bet valid\u0101cijas k\u013c\u016bdas ne\u013cauj tai tikt izpild\u012btai."}}'),"ko-KR":JSON.parse('{"Dialog":{"ProcessSchemaSavedWithValidationError":"The process schema saved successfully, but validation errors prevent it from running."}}'),"ja-JP":JSON.parse('{"Dialog":{"ProcessSchemaSavedWithValidationError":"The process schema saved successfully, but validation errors prevent it from running."}}'),"it-IT":JSON.parse('{"Dialog":{"ProcessSchemaSavedWithValidationError":"Lo schema del processo \xe8 stato salvato con successo, ma gli errori di convalida impediscono l\'esecuzione."}}'),"id-ID":JSON.parse('{"Dialog":{"ProcessSchemaSavedWithValidationError":"Skema proses berhasil disimpan, tetapi kesalahan validasi mencegahnya untuk dijalankan."}}'),"hu-HU":JSON.parse('{"Dialog":{"ProcessSchemaSavedWithValidationError":"The process schema saved successfully, but validation errors prevent it from running."}}'),"hr-HR":JSON.parse('{"Dialog":{"ProcessSchemaSavedWithValidationError":"Shema procesa je uspje\u0161no spremljena, ali validacijske pogre\u0161ke sprje\u010davaju njezvo izvr\u0161avanje."}}'),"he-IL":JSON.parse('{"Dialog":{"ProcessSchemaSavedWithValidationError":"\u05e1\u05db\u05de\u05ea \u05d4\u05ea\u05d4\u05dc\u05d9\u05da \u05e0\u05e9\u05de\u05e8\u05d4 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4, \u05d0\u05da \u05e9\u05d2\u05d9\u05d0\u05d5\u05ea \u05d0\u05d9\u05de\u05d5\u05ea \u05de\u05d5\u05e0\u05e2\u05d5\u05ea \u05de\u05de\u05e0\u05d4 \u05dc\u05e4\u05e2\u05d5\u05dc."}}'),"fr-FR":JSON.parse('{"Dialog":{"ProcessSchemaSavedWithValidationError":"Le sch\xe9ma de processus a \xe9t\xe9 enregistr\xe9 avec succ\xe8s, mais des erreurs de validation emp\xeachent son ex\xe9cution."}}'),"es-ES":JSON.parse('{"Dialog":{"ProcessSchemaSavedWithValidationError":"El esquema de proceso se guard\xf3 correctamente, pero los errores de validaci\xf3n impiden que se ejecute."}}'),"de-DE":JSON.parse('{"Dialog":{"ProcessSchemaSavedWithValidationError":"Das Prozessschema wurde erfolgreich gespeichert, aber Validierungsfehler verhindern, dass es ausgef\xfchrt wird."}}'),"cs-CZ":JSON.parse('{"Dialog":{"ProcessSchemaSavedWithValidationError":"The process schema saved successfully, but validation errors prevent it from running."}}'),"bg-BG":JSON.parse('{"Dialog":{"ProcessSchemaSavedWithValidationError":"\u0421\u0445\u0435\u043c\u0430\u0442\u0430 \u043d\u0430 \u043f\u0440\u043e\u0446\u0435\u0441\u0430 \u0435 \u0437\u0430\u043f\u0430\u0437\u0435\u043d\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e, \u043d\u043e \u0433\u0440\u0435\u0448\u043a\u0438 \u043f\u0440\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430\u0442\u0430 \u043d\u0435 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0432\u0430\u0442 \u0438\u0437\u043f\u044a\u043b\u043d\u0435\u043d\u0438\u0435\u0442\u043e \u0439."}}'),"ar-SA":JSON.parse('{"Dialog":{"ProcessSchemaSavedWithValidationError":"\u062a\u0645 \u062d\u0641\u0638 \u0645\u062e\u0637\u0637 \u0627\u0644\u0639\u0645\u0644\u064a\u0629 \u0628\u0646\u062c\u0627\u062d\u060c \u0648\u0644\u0643\u0646 \u062a\u0645\u0646\u0639 \u0623\u062e\u0637\u0627\u0621 \u0627\u0644\u062a\u062d\u0642\u0642 \u0645\u0646 \u062a\u0634\u063a\u064a\u0644\u0647."}}'),"en-US":JSON.parse('{"Dialog":{"ProcessSchemaSavedWithValidationError":"The process schema saved successfully, but validation errors prevent it from running."}}'),"uk-UA":JSON.parse('{"Dialog":{"ProcessSchemaSavedWithValidationError":"\u0421\u0445\u0435\u043c\u0430 \u043f\u0440\u043e\u0446\u0435\u0441\u0443 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u0430 \u0443\u0441\u043f\u0456\u0448\u043d\u043e, \u0430\u043b\u0435 \u043f\u043e\u043c\u0438\u043b\u043a\u0438 \u0432\u0430\u043b\u0456\u0434\u0430\u0446\u0456\u0457 \u043f\u0435\u0440\u0435\u0448\u043a\u043e\u0434\u0436\u0430\u044e\u0442\u044c \u0457\u0457 \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u043d\u044e."}}'),"ru-RU":JSON.parse('{"Dialog":{"ProcessSchemaSavedWithValidationError":"\u0421\u0445\u0435\u043c\u0430 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430, \u043e\u0434\u043d\u0430\u043a\u043e \u043e\u0448\u0438\u0431\u043a\u0438 \u0432\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u0438 \u043f\u0440\u0435\u043f\u044f\u0442\u0441\u0442\u0432\u0443\u044e\u0442 \u0435\u0433\u043e \u0437\u0430\u043f\u0443\u0441\u043a\u0443."}}')};b(24961);class Su{static{this.\u0275fac=function(t){return new(t||Su)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:Su})}static{this.\u0275inj=i.\u0275\u0275defineInjector({providers:[Bn,ei,Ma,Mn],imports:[R.CommonModule,W.h1.forRoot({i18n:g_})]})}}class f_ extends lo{constructor(e,t){super(e,t),this.dataSourceName=e,this.injector=t,this.type="crt.CopilotActionDataSource",this._intentManager=this.injector.get(Mn)}_getActionUId(e){return e.filter(n=>n.type===c.ModelParameterType.PrimaryColumnValue)[0]?.value}innerDelete(e){return(0,h.of)(void 0)}innerInsert(e){const t=e;return(0,h.forkJoin)([this._intentManager.createAction(t),this.getSchema()]).pipe((0,h.map)(([n,a])=>({success:n.success,rowsAffected:1,errorInfo:n.errorInfo?.message,primaryAttributes:n.success?[{[a.primaryAttributeName]:t.Id}]:null})))}innerLoad(e,t,n){const a=this._getActionUId(t);return a?this._intentManager.getActionByUId(a).pipe((0,h.map)(r=>[r])):(0,h.of)([])}innerSave(e,t){const n=this._getActionUId(e),a=t;return a.Id=n,this._intentManager.updateAction(a).pipe((0,h.map)(r=>({success:r.success,rowsAffected:1,errorInfo:r.errorInfo?.message})))}}class Nl extends lo{constructor(e,t){super(e,t),this.dataSourceName=e,this.injector=t,this.type="crt.CopilotIntentDataSource",this._intentManager=this.injector.get(Mn),this._copilotIntentDataSourceModelConvertor=this.injector.get(Ml)}innerGetDefaultValues(){return this._copilotIntentDataSourceModelConvertor.convertToDataSourceModel({UId:(0,c.generateGuid)(),Status:"InDevelopment",Mode:"Chat",Type:"Skill"})}innerInsert(e){const t=this._copilotIntentDataSourceModelConvertor.convertToModel({...e});return(0,h.forkJoin)([this._intentManager.createIntent(t),this.getSchema()]).pipe((0,h.map)(([n,a])=>({success:n.success,rowsAffected:n.success?1:0,errorInfo:n.errorInfo?.message,primaryAttributes:[{[a.primaryAttributeName]:n.schemaUid}]})),(0,z.n)(n=>n.success?(0,h.of)(n):(0,h.throwError)(()=>n)))}innerLoad(e,t,n){const a=t.filter(r=>r.type===c.ModelParameterType.PrimaryColumnValue);if(a.length)return this._intentManager.getIntent(a[0].value).pipe((0,z.n)(r=>this._copilotIntentDataSourceModelConvertor.convertToDataSourceModel(r).pipe((0,h.map)(u=>[u]))))}innerSave(e,t){const a=e.filter(u=>u.type===c.ModelParameterType.PrimaryColumnValue)[0].value,r=this._copilotIntentDataSourceModelConvertor.convertToModel({...t});return r.UId=a,this._intentManager.updateIntent(r).pipe((0,h.map)(u=>({success:u.success,rowsAffected:u.success?1:0,errorInfo:u.errorInfo?.message})),(0,z.n)(u=>u.success?(0,h.of)(u):(0,h.throwError)(()=>u)))}}class cg extends lo{constructor(e,t){super(e,t),this.dataSourceName=e,this.injector=t,this.type="crt.CopilotIntentParameterDataSource",this._intentManager=this.injector.get(Mn),this._modelConvertor=this.injector.get(Ki)}_getPrimaryColumnParameter(e){return e.find(t=>t.type===c.ModelParameterType.PrimaryColumnValue&&(0,c.isGuid)(t.value))}_getIsIntentUIdParameter(e){return(e.relationsConfigs??[]).some(t=>"CopilotIntent"===t.dataSchemaName&&"Intent"===t.attributePath)}_getSourceCollectionFilterValue(e){const t=e.find(r=>r.type===c.ModelParameterType.Filter);if(!t?.value)return null;let a;return c.FilterParser.fromJson(t.value).filters.forEach(r=>{r instanceof c.CompareFilter&&r.leftExpression instanceof c.ColumnExpression&&"SourceCollection"===r.leftExpression.columnPath&&r.rightExpression instanceof c.ParameterExpression&&(a=r.rightExpression.value)}),a}innerGetDefaultValues(){return this._modelConvertor.convertToDataSourceModel({UId:(0,c.generateGuid)()})}innerInsert(e){const t=this._modelConvertor.convertToModel({...e});return this._intentManager.createIntentParameter(t).pipe((0,h.map)(n=>({success:n.success,rowsAffected:n.success?1:0,errorInfo:n.errorInfo?.message,primaryAttributes:[{Id:t.UId}]})),(0,h.switchMap)(n=>n.success?(0,h.of)(n):(0,h.throwError)(()=>n)))}innerLoad(e,t,n){const a=this._getPrimaryColumnParameter(t),r=this._getSourceCollectionFilterValue(t)??"InputParameters";return a?(this._getIsIntentUIdParameter(a)?this._intentManager.getIntentParameters(a.value,r):this._intentManager.getIntentParameter(a.value).pipe((0,h.map)(p=>[p]))).pipe((0,h.mergeMap)(p=>(0,h.from)(p).pipe((0,h.mergeMap)(f=>this._modelConvertor.convertToDataSourceModel(f)),(0,h.toArray)())),(0,h.catchError)(()=>(0,h.of)([]))):(0,h.of)([])}innerSave(e,t){const n=this._getPrimaryColumnParameter(e)?.value,a=this._modelConvertor.convertToModel({...t});return a.UId=n,this._intentManager.updateIntentParameter(a).pipe((0,h.map)(r=>({success:r.success,rowsAffected:r.success?1:0,errorInfo:r.errorInfo?.message})),(0,h.switchMap)(r=>r.success?(0,h.of)(r):(0,h.throwError)(()=>r)))}innerDelete(e){const t=this._getPrimaryColumnParameter(e)?.value;return this._intentManager.deleteIntentParameter(t).pipe((0,h.map)(n=>({success:n.success,rowsAffected:n.success?1:0,errorInfo:n.errorInfo?.message})),(0,h.switchMap)(n=>n.success?(0,h.of)(n):(0,h.throwError)(()=>n)))}}class ug extends lo{innerDelete(e){return(0,h.of)(null)}innerInsert(e){return(0,h.of)(null)}innerLoad(e,t){return(0,h.of)([])}innerSave(e,t){return(0,h.of)(null)}innerGetLookupDataSchema(e){return(0,h.of)(null)}innerGetDefaultValues(){return(0,h.of)(null)}innerCanDelete(e){return(0,h.of)(null)}innerCanEdit(e){return(0,h.of)(null)}innerCanCreate(e){return(0,h.of)(null)}}const po=window;class mo{constructor(){this._event$=new h.Subject}static get instance(){return po.__modelEventNotificationService||(po.__modelEventNotificationService=new mo),po.__modelEventNotificationService}get event$(){return this._event$.asObservable()}notify(e){this._event$.next(e)}}class Ol{constructor(){this.changedValues$=new h.Subject,this._valuesStore={}}setValues(e){if(e){const t={};Object.entries(e).forEach(([n,a])=>{const r=this._valuesStore[n]!==a;this._valuesStore[n]=(0,Z.A)(a),r&&(t[n]=this._valuesStore[n])}),(0,Re.A)(t)||this.changedValues$.next(t)}}get values(){return this._valuesStore}static{this.\u0275fac=function(t){return new(t||Ol)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Ol,factory:Ol.\u0275fac})}}class y_ extends fu{constructor(e,t){super(e,t),this.dataSourceName=e,this._injector=t,this.type=_.zRA,this._schemaParametersStore=this._injector.get(Ol),this._lookupDataLoadService=this._injector.get(Dl),this._featureValues=this._injector.get(_.G2Y),this._featureValues.DisableCommunicationBetweenSchemas||this._subscribeParametersChanged()}_subscribeParametersChanged(){this._schemaParametersStore.changedValues$.subscribe(e=>{mo.instance.notify({modelId:(0,c.generateGuid)(),dataSchemaName:this.dataSchema.name,type:qt.Update,payload:{primaryAttributesValues:null,changedAttributes:Object.keys(e)}})})}_getCanSuccessfullyExecuteOperationResult(){return(0,h.of)({result:!0})}_fillLookupValues(e,t,n){Object.entries(n).forEach(([a,r])=>{(t[a]||[]).forEach(p=>{e[p]={value:a,displayValue:r}})})}_fillSchemaParameterValueNameMap(e,t,n,a){const r=a;let u=e[t];u||(u={},e[t]=u);let p=u[r];p||(p=[],u[r]=p),p.push(n)}_fillSchemaNamePrimaryValuesMap(e,t,n){const a=n;let r=e[t];r||(r=[],e[t]=r),r.push(a)}_isLookupValue(e){return!!e?.value}_shouldFillSchemaLookupValueMaps(e,t){return e&&t&&t.referenceSchemaName&&!this._isLookupValue(e)}_load(e,t){const n={},a=this._schemaParametersStore.values,r=t.attributes,u={},p={};for(const S of e){const w=a[S],O=r.find($=>$.name===S);this._shouldFillSchemaLookupValueMaps(w,O)?(this._fillSchemaNamePrimaryValuesMap(p,O.referenceSchemaName,w),this._fillSchemaParameterValueNameMap(u,O.referenceSchemaName,S,w)):n[S]=w??null}return 0===Object.keys(p).length?(0,h.of)([n]):this._lookupDataLoadService.load(p).pipe((0,h.map)(S=>{for(const[w,O]of Object.entries(S)){const $=u[w];this._fillLookupValues(n,$,O)}return[n]}))}_getValuesForStore(e){const t={};return Object.entries(e).forEach(([n,a])=>{const r=this.initialConfig.parameters[n];r&&((0,_.aPb)(r.dataValueTypeName)===c.DataValueType.Lookup?t[n]=a?.value:t[n]=a)}),t}innerLoad(e,t,n){return this.getSchema().pipe((0,h.switchMap)(a=>this._load(e,a)))}innerSave(e,t){const n=this._getValuesForStore(t);return this._schemaParametersStore.setValues(n),(0,h.of)({success:!0,rowsAffected:1})}innerInsert(e){const t=this._getValuesForStore(e);return this._schemaParametersStore.setValues(t),(0,h.of)({success:!0,rowsAffected:1,primaryAttributes:[]})}innerDelete(e){return(0,h.of)({success:!0,rowsAffected:1})}innerGetSchema(){const e=[],t=this.initialConfig.parameters;return t&&Object.entries(t).forEach(([n,a])=>{const r=new ir({name:n,caption:a.caption,dataValueType:(0,_.aPb)(a.dataValueTypeName),attributeType:c.DataSchemaAttributeType.OwnAttribute,path:n,isRequired:!!a.isRequired,referenceSchemaName:a.referenceSchemaName,isMasked:!1,isFormatValidated:!0});r.addDefaultValidators(),e.push(r)}),(0,h.of)(new Yi({name:this.initialConfig.schemaName,type:c.DataSchemaType.ClientUnit,attributes:e}))}innerGetLookupDataSchema(e){return(0,h.of)(null)}innerGetDefaultValues(){return(0,h.of)({})}innerCanEdit(e){return this._getCanSuccessfullyExecuteOperationResult()}innerCanDelete(e){return this._getCanSuccessfullyExecuteOperationResult()}innerCanCreate(e){return this._getCanSuccessfullyExecuteOperationResult()}}class Sp extends fu{constructor(){super(...arguments),this.type="crt.WebServiceDataSource"}innerLoad(e,t,n){throw new Error("Method not implemented.")}innerSave(e,t){throw new Error("Method not implemented.")}innerInsert(e){throw new Error("Method not implemented.")}innerDelete(e){throw new Error("Method not implemented.")}innerGetSchema(){throw new Error("Method not implemented.")}innerGetLookupDataSchema(e){throw new Error("Method not implemented.")}innerGetDefaultValues(){throw new Error("Method not implemented.")}innerCanDelete(e){throw new Error("Method not implemented.")}innerCanEdit(e){throw new Error("Method not implemented.")}innerCanCreate(e){throw new Error("Method not implemented.")}}class ho{resolve(e){let t=null;switch(e){case _.M1n:t=lo;break;case _.zRA:t=y_;break;case"crt.WebServiceDataSource":t=Sp;break;case"crt.CopilotIntentDataSource":t=Nl;break;case"crt.CopilotIntentParameterDataSource":t=cg;break;case"crt.CopilotActionDataSource":t=f_;break;case"crt.DashboardDataSource":t=ug}return(0,h.of)(t)}static{this.\u0275fac=function(t){return new(t||ho)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:ho,factory:ho.\u0275fac})}}class Qi{constructor(e,t){this.injector=e,this.resolver=t}create(e,t,n){const{type:a,scope:r,config:u}=t;return this.resolver.resolve(a).pipe((0,z.n)(f=>f?new f(e,n||this.injector).init(u,r):(0,h.throwError)(()=>new Error(`Data source type '${a}' not supported.`))),(0,ue.W)(f=>f instanceof gu?(0,h.of)(f.dataSource):(0,h.throwError)(()=>f)))}static{this.\u0275fac=function(t){return new(t||Qi)(i.\u0275\u0275inject(i.Injector),i.\u0275\u0275inject(ho))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Qi,factory:Qi.\u0275fac})}}class dg{}class Xi extends dg{processRequest(e,t){return(0,A.A)(function*(){const{model:n,payload:a}=t??{},r={...e,model:n&&c.Model[c._from](n),payload:a};return yield c.HandlerChainService.instance.process(r)})()}onBeforeLoad(e){return this.processRequest({type:"crt.HandleBeforeModelLoadRequest",previousPayload:e?.previousPayload},e)}onAfterLoad(e){var t=this;return(0,A.A)(function*(){yield t.processRequest({type:"crt.HandleAfterModelLoadRequest",previousPayload:e?.previousPayload},e)})()}onBeforeInsert(e){return this.processRequest({type:"crt.HandleBeforeModelInsertRequest"},e)}onAfterInsert(e){var t=this;return(0,A.A)(function*(){yield t.processRequest({type:"crt.HandleAfterModelInsertRequest"},e)})()}onBeforeUpdate(e){return this.processRequest({type:"crt.HandleBeforeModelUpdateRequest"},e)}onAfterUpdate(e){var t=this;return(0,A.A)(function*(){yield t.processRequest({type:"crt.HandleAfterModelUpdateRequest"},e)})()}onBeforeDelete(e){return this.processRequest({type:"crt.HandleBeforeModelDeleteRequest"},e)}onAfterDelete(e){var t=this;return(0,A.A)(function*(){yield t.processRequest({type:"crt.HandleAfterModelDeleteRequest"},e)})()}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(Xi)))(n||Xi)}})()}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Xi,factory:Xi.\u0275fac,providedIn:"root"})}}class Vl extends Xi{processRequest(e,t){return super.processRequest({...e,$context:this._context?.deref()},t)}setContext(e){this._context=new WeakRef(e)}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(Vl)))(n||Vl)}})()}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Vl,factory:Vl.\u0275fac})}}const pg={[_.btv.Init]:[_.btv.Create,_.btv.Copy,_.btv.Update,_.btv.Delete],[_.btv.Copy]:[_.btv.Delete,_.btv.Update],[_.btv.Create]:[_.btv.Copy,_.btv.Delete,_.btv.Update],[_.btv.Delete]:[_.btv.Copy,_.btv.Create,_.btv.Update,_.btv.Init],[_.btv.Update]:[_.btv.Delete],[_.btv.Unknown]:[]};function vu(o){const e={success:!1,rowsAffected:0,errorInfo:""};return"string"==typeof o?Object.assign(e,{errorInfo:o}):o instanceof Error?Object.assign(e,{errorInfo:o.message}):Object.assign(e,"object"==typeof o?o:{errorInfo:o})}class vi{get _children(){return this._children$.value}static get instance(){return this._instance||(this._instance=new vi(null,null)),this._instance}constructor(e,t){this._injector=e,this.dataSource=t,this._lookupDataSourceName="lookupDataSource",this._id=(0,c.generateGuid)(),this._modeChanges=new h.Subject,this._destroyed$=new h.Subject,this._children$=new h.BehaviorSubject([]),this._childrenDirty$=new h.BehaviorSubject(!1),this._childrenModes$=new h.BehaviorSubject([]),this._isCollectionModel=!1,this._isCollectionItemModel=!1,this._mode=_.btv.Init,this._isInitialized=!1,this._isLoaded=!1,this._dirtyAttributes=new Set,this._newLoadingRequestArrived=new h.Subject,this._attributesMap=[],this._selfDirty$=new h.BehaviorSubject(!1),this._isLoading=!1,this._destroyed=!1,this._dirty$=(0,h.combineLatest)([this._selfDirty$,this._childrenDirty$,this._childrenModes$]).pipe((0,E.T)(([n,a,r])=>n||a||r.includes(_.btv.Copy)||r.includes(_.btv.Create)),(0,Ca.F)()),this._loadedData=new Set,this._injector&&(this._dataSourceFactory=this._injector.get(Qi),this._lifecycleHookNotificationService=this._injector.get(dg,null,{optional:!0}),this._measurePerformanceService=this._injector.get(_.gcc,null,{optional:!0}))}static create(e){return(0,h.from)(this.instance._create({type:"crt.EntityDataSource",config:{entitySchemaName:e}},""))}get name(){return this.dataSource?this.dataSource.dataSourceName:""}get mode(){return this._isCollectionModel?_.btv.Unknown:this._mode}get _modeChanges$(){return this._modeChanges.asObservable()}get _isChanged(){return!!this._dirtyAttributes?.size}set _isCollection(e){this._isCollectionModel=e,this._isCollectionModel&&(this._mode=_.btv.Unknown)}get isLoaded(){return this._isLoaded}get event$(){return mo.instance.event$.pipe((0,se.p)(()=>this._isInitialized),(0,se.p)(()=>!this._isCollectionItemModel),(0,se.p)(({dataSchemaName:e})=>e===this._dataSchemaName),(0,P.M)(({type:e,modelId:t,payload:n})=>this._updateLoadedData(e,t,n)),(0,se.p)(({modelId:e})=>e!==this._id&&!this._isChild(e)),(0,E.T)(e=>({event:e,ownPrimaryAttributesValues:e.payload?.primaryAttributesValues?.filter(t=>{const n=bt.serializeRecordPrimaryAttributesValues(t);return this._loadedData.has(n)})})),(0,se.p)(({event:e,ownPrimaryAttributesValues:t})=>e.type!==qt.Update&&e.type!==qt.Delete||(!t||0!==t.length)),(0,E.T)(({event:e,ownPrimaryAttributesValues:t})=>({event:e,primaryAttributesValues:e.type===qt.Create?e.payload.primaryAttributesValues:t})),(0,E.T)(({event:e,primaryAttributesValues:t})=>({modelId:e.modelId,dataSchemaName:e.dataSchemaName,type:e.type,payload:{...e.payload,primaryAttributesValues:t}})),(0,_e.Q)(this._destroyed$))}get dataSchemaName(){return this._dataSchemaName}get allowSync(){return!this._disableSync}get disableSync(){return this._disableSync}set disableSync(e){this._disableSync=e}get isLoading(){return this._isLoading}get hasErrors(){return!this.dataSource||this.dataSource.hasErrors}get hasCriticalErrors(){return!this.dataSource||this.dataSource.hasCriticalErrors}get affectedAttributes(){return this.dataSource?this.dataSource.affectedAttributes:[]}get isAggregate(){return!!this.dataSource&&this.dataSource.isAggregate}get isCollectionItemModel(){return this._isCollectionItemModel}get isInitialized(){return this._isInitialized}_isChild(e){return this._children.some(t=>t?._id===e)}_subscribeChildrenModeChanges(){this._children$.pipe((0,E.T)(e=>e.map(t=>(0,h.merge)((0,h.of)(t.mode),t._modeChanges$))),(0,z.n)(e=>e?.length?(0,h.combineLatest)(e):(0,h.of)([])),(0,P.M)(e=>this._childrenModes$.next(e)),(0,_e.Q)(this._destroyed$)).subscribe()}_subscribeChildrenDirtyChanges(){this._children$.pipe((0,E.T)(e=>e.map(t=>t._dirty$)),(0,z.n)(e=>e?.length?(0,h.combineLatest)(e):(0,h.of)([])),(0,E.T)(e=>e.some(t=>t)),(0,P.M)(e=>this._childrenDirty$.next(e)),(0,_e.Q)(this._destroyed$)).subscribe()}_updateLoadedData(e,t,n){this._isCollectionModel&&e===qt.Create&&this._isChild(t)&&n.primaryAttributesValues.forEach(a=>{const r=bt.serializeRecordPrimaryAttributesValues(a);this._loadedData.add(r)})}_setMode(e){if(this._mode===e)return;if(!pg[this._mode]?.includes(e))throw Error(`Unable to mark model with '${this._mode}' mode for '${e}'.`);const n=this._mode;this._mode=e,e===_.btv.Delete&&this._selfDirty$.next(n!==_.btv.Create)}_markForNotCollection(e){this._isCollectionModel||this.markFor(e)}_registerPrimaryAttributeValues(e){e.forEach(t=>{this._loadedData.add(bt.serializeRecordPrimaryAttributesValues(t))})}_getDependentAttributesNames(e){return this._attributesMap.filter(t=>e.includes(t.name)).filter(t=>0!==t.dependentAttributes.length).map(t=>t.dependentAttributes).flat()}_getDefaultLoadAttributes(){return this.getSchema().pipe((0,E.T)(e=>e.getPrimaryLoadAttributes()))}_checkAttributesInDataSchema(e){return this.getSchema().pipe((0,P.M)(t=>{const n=e.filter(a=>null==t.findAttributeByName(a));if(n.length>0)throw new Error(`data has unknown attributes names: ${n.join(", ")}`)}))}_createDataSource(e,t,n=null){const a=n??t.dataSourceConfig;return this._dataSourceFactory.create(e,a)}_notifyEventByParameters(e,t){return this.getSchema().pipe((0,E.T)(n=>bt.getPrimaryAttributeValuesFromParameters(n,e)),(0,Y.Z)(n=>this._notifyDataChange(n,t)))}_notifyDataChange(e,t){return this.getSchema().pipe((0,E.T)(n=>bt.getModelPrimaryAttributeValues(n,e)),(0,P.M)(n=>{mo.instance.notify({modelId:this._id,dataSchemaName:this._dataSchemaName,type:t,payload:{primaryAttributesValues:n}})}),(0,E.T)(()=>null))}_mapSaveResult(e,t,n){return this.getSchema().pipe((0,E.T)(a=>({result:e,actionType:qt.Update,data:bt.getPrimaryAttributeValues(a,t,n)})))}_mapInsertResult(e){return{data:e.primaryAttributes??[],result:e,actionType:qt.Create}}_getLoadAttributes(e){if(e&&0!==e.length){let t=null;if(e.every(a=>(0,ua.A)(a)))return t=this._getDependentAttributesNames(e),(0,h.of)([...e,...t]);{const a=e.map(r=>r.name);return t=this._getDependentAttributesNames(a),this.getSchema().pipe((0,E.T)(r=>(t=t.map(u=>r.findAttributeByName(u)).map(u=>({name:u.name,path:u.path,caption:u.caption,dataValueType:u.dataValueType,aggregationConfig:u.aggregationConfig})),[...e,...t])))}}return this._getDefaultLoadAttributes()}_getChangedAttributesValues(e){return this._persistedState?Object.entries({...this._persistedState,...e}).filter(([t])=>this._dirtyAttributes.has(t)).reduce((t,[n,a])=>Object.assign(t,{[n]:a}),{}):e}_load(e,t,n,a=_.btv.Update){const r={attributes:e,parameters:t,options:n,mode:a},u=(0,Z.A)(this._lastRequestPayload),p=(0,j.A)((0,Yn.A)(r,"options.loadType"),(0,Yn.A)(u,"options.loadType"));return this._loadingRequest&&p||(this._lastRequestPayload&&!p&&(this._newLoadingRequestArrived.next(null),this._newLoadingRequestArrived=new h.Subject),this._lastRequestPayload=r,this._loadingRequest=this._getLoadAttributes(e).pipe((0,W.pR)(()=>this._onBeforeLoad(r,u)),(0,z.n)(f=>this.dataSource.load(f,t,n)),(0,_e.Q)(this._newLoadingRequestArrived),(0,P.M)(()=>this._markForNotCollection(a)),(0,W.BB)(()=>this.getSchema()),(0,P.M)(([f,S])=>{this._registerPrimaryAttributeValues(bt.getModelPrimaryAttributeValues(S,f))}),(0,P.M)(()=>this._persistedState={}),(0,E.T)(([f,S])=>bt.processImageData(S,f,e)),(0,P.M)(()=>this._isLoaded=!0),(0,W.pR)(()=>this._onAfterLoad(r,u)),(0,ue.W)(f=>(this._isLoaded=!1,(0,h.throwError)(()=>f))),(0,P.M)(()=>{this._markAsPristine(),this._loadingRequest=null}),(0,ie.u)())),this._loadingRequest}_updateAttributesDependencies(){this._attributesMap.forEach(t=>t.dependentAttributes=[]),this._attributesMap.filter(t=>t.attributeType!==c.DataSchemaAttributeType.OwnAttribute).forEach(t=>{const n=t.path.split(".");if(1===n.length)return;const a=n.shift(),r=this._attributesMap.find(u=>u.path===a);r?.dependentAttributes.push(t.name)})}_buildAttributesMap(e){const t=e.attributes??[];this._attributesMap=t.map(n=>({name:n.name,path:n.path,attributeType:n.attributeType,dependentAttributes:[],isSchemaAttribute:!0})),this._updateAttributesDependencies()}_loadDependentDataForCreate(e){return this.getSchema().pipe((0,E.T)(t=>t.attributes.filter(n=>n.dataValueType===c.DataValueType.Lookup).filter(n=>n.name in e).map(n=>n.name)),(0,z.n)(t=>{if(0===t.length)return(0,h.of)([]);const n=t.map(a=>this.reloadDependentData(a,e[a]));return(0,h.forkJoin)(n)}),(0,E.T)(t=>{let n={};return t.forEach(a=>{n={...n,...a[0]||{}}}),{...n,...e}}))}_getDependentAttributesInfo(e){return this.getSchema().pipe((0,E.T)(t=>e.map(n=>{const a=t.findAttributeByName(n),r=a?.path??n,u=a?.name??n,p=a?.aggregationConfig??null,f=a?.dataValueType??null,S=a?.attributeType??null,w=r.split(".");w.shift();const O=1===w.length?w[0]:u;let $;return $=S===c.DataSchemaAttributeType.AggregationAttribute?c.DataSchemaAttributeType.AggregationAttribute:1===w.length?c.DataSchemaAttributeType.OwnAttribute:c.DataSchemaAttributeType.ForwardReferenceAttribute,{alias:O,attributeName:u,config:{path:w.join("."),aggregationConfig:p,dataValueType:f,type:$},type:$}})))}_markAsPristine(){this._selfDirty$.next(!1)}_onBeforeLoad(e,t){return this._lifecycleHookNotificationService?.onBeforeLoad?(0,h.from)(this._lifecycleHookNotificationService.onBeforeLoad({model:this,payload:{attributes:e?.attributes,options:e?.options,parameters:e?.parameters},previousPayload:{attributes:t?.attributes,options:t?.options,parameters:t?.parameters}})).pipe((0,E.T)(n=>{if(!1===n)throw Error('Loading is disallowed by a "OnBeforeLoad" model lifecycle event')})):(0,h.of)(void 0)}_onAfterLoad(e,t){return this._lifecycleHookNotificationService?.onAfterLoad?(0,h.from)(this._lifecycleHookNotificationService.onAfterLoad({model:this,payload:{attributes:e?.attributes,options:e?.options,parameters:e?.parameters},previousPayload:{attributes:t?.attributes,options:t?.options,parameters:t?.parameters}})):(0,h.of)(void 0)}_onBeforeInsert(e){return this._lifecycleHookNotificationService?.onBeforeInsert?this.getSchema().pipe((0,E.T)(t=>bt.getModelPrimaryAttributeValues(t,[e])),(0,E.T)(t=>t.pop()),(0,z.n)(t=>this._lifecycleHookNotificationService.onBeforeInsert({model:this,payload:{data:e,primaryAttributesValues:t}})),(0,E.T)(t=>{if(!1===t)throw Error('Inserting is disallowed by a "OnBeforeInsert" model lifecycle event')})):(0,h.of)(void 0)}_innerInsert(e){return this.dataSource.insert(e).pipe((0,E.T)(t=>this._mapInsertResult(t)),(0,P.M)(()=>this._persistedState={}),(0,P.M)(()=>this._markAsPristine()),(0,P.M)(()=>this._markForNotCollection(_.btv.Update)),(0,W.BB)(()=>this.getSchema()),(0,P.M)(([,t])=>{this._registerPrimaryAttributeValues(bt.getModelPrimaryAttributeValues(t,[e]))}),(0,E.T)(([t])=>t),(0,W.hk)(({data:t,actionType:n})=>this._notifyDataChange(t,n)),(0,E.T)(({result:t})=>t))}_onAfterInsert(e){return this._lifecycleHookNotificationService?.onAfterInsert?(0,h.from)(this._lifecycleHookNotificationService.onAfterInsert({model:this,payload:{data:e}})):(0,h.of)(void 0)}_onBeforeUpdate(e,t){return this._lifecycleHookNotificationService?.onBeforeUpdate?(0,h.from)(this._lifecycleHookNotificationService.onBeforeUpdate({model:this,payload:{data:e,parameters:t}})).pipe((0,E.T)(n=>{if(!1===n)throw Error('Updating is disallowed by a "OnBeforeUpdate" model lifecycle event')})):(0,h.of)(void 0)}_innerUpdate(e,t){return this.dataSource.save(t,e).pipe((0,Y.Z)(n=>this._mapSaveResult(n,e,t)),(0,W.hk)(()=>this._notifyEventByParameters(t,qt.Update)),(0,E.T)(({result:n})=>n),(0,P.M)(()=>this.setLoadedState()))}_onAfterUpdate(e,t){return this._lifecycleHookNotificationService?.onAfterUpdate?(0,h.from)(this._lifecycleHookNotificationService.onAfterUpdate({model:this,payload:{data:e,parameters:t}})):(0,h.of)(void 0)}_onBeforeDelete(e){return this._lifecycleHookNotificationService?.onBeforeDelete?(0,h.from)(this._lifecycleHookNotificationService.onBeforeDelete({model:this,payload:{parameters:e}})).pipe((0,E.T)(t=>{if(!1===t)throw Error('Deleting is disallowed by a "OnBeforeDelete" model lifecycle event')})):(0,h.of)(void 0)}_innerDelete(e){return this.dataSource.delete(e).pipe((0,P.M)(()=>this._markAsPristine()),(0,P.M)(()=>this._markForNotCollection(_.btv.Init)),(0,W.hk)(()=>this._notifyEventByParameters(e,qt.Delete)))}_onAfterDelete(e){return this._lifecycleHookNotificationService?.onAfterDelete?(0,h.from)(this._lifecycleHookNotificationService.onAfterDelete({model:this,payload:{parameters:e}})):(0,h.of)(void 0)}init(){return this.getSchema().pipe((0,P.M)(e=>this._dataSchemaName=e.name),(0,P.M)(e=>this._buildAttributesMap(e)),(0,E.T)(()=>this),(0,P.M)(()=>this._isInitialized=!this.hasCriticalErrors),(0,P.M)(()=>{this._subscribeChildrenModeChanges(),this._subscribeChildrenDirtyChanges()}),(0,Ne.s)(1))}getSchema(){if(!this.dataSource)return(0,h.of)(null);if(this.hasCriticalErrors)return(0,h.of)(this.dataSource.getEmptySchema());const e=this.dataSource.getSchema();return this._measurePerformanceService?e.pipe(this._measurePerformanceService.measure$(`model.getSchema.${this.name}`)):e}getDataSource(){return this.dataSource}load(e){if(this._destroyed)return(0,h.of)([]);this._isLoading=!0;const t=e?.attributes,n=e?.parameters||[],a=bt.getDataSourceLoadOptions(e?.options);return this._load(t,n,a).pipe((0,P.M)(()=>this._isLoading=!1),(0,ue.W)(r=>(this._isLoading=!1,(0,h.throwError)(()=>r))))}updateDependentAttributes(e){this._attributesMap=this._attributesMap.filter(a=>a.isSchemaAttribute);const t=this._attributesMap.map(a=>a.name),n=e.filter(a=>!t.includes(a.path)).map(a=>({name:a.path,path:a.path,attributeType:a.type??c.DataSchemaAttributeType.ForwardReferenceAttribute,dependentAttributes:[],isSchemaAttribute:!1}));this._attributesMap.push(...n),this._updateAttributesDependencies()}canReloadDependentData(e){return 0!==this._getDependentAttributesNames([e]).length}getDependentAttributesNames(e){return this._getDependentAttributesNames([e])}reloadDependentData(e,t){const n=this._getDependentAttributesNames([e]);if(0===n.length)return(0,h.of)([]);if(null==t)return(0,h.of)([Object.fromEntries(n.map(u=>[u,null]))]);const a=[{type:c.ModelParameterType.PrimaryColumnValue,value:t}],r=new Map;return(0,h.forkJoin)([this._getDependentAttributesInfo(n),this.dataSource.getLookupDataSchema(e)]).pipe((0,z.n)(([u,p])=>{const f=u.filter(w=>w.type!==c.DataSchemaAttributeType.OwnAttribute).map(w=>[w.alias,w.config]),S={type:p.dataSourceConfig.type,config:{...p.dataSourceConfig.config,attributes:Object.fromEntries(f)}};return u.forEach(w=>{r.set(w.alias,w.attributeName)}),this._createDataSource(`${this.name}_reloadData`,p,S)}),(0,z.n)(u=>u.load([...r.keys()],a,{throttled:!0})),(0,E.T)(u=>u.map(p=>{const f={};return r.forEach((S,w)=>{f[S]=p[w]}),f})))}create(e={}){return this._isLoading=!0,this.getSchema().pipe((0,E.T)(t=>bt.getOwnColumnsValues(t,e)),(0,z.n)(t=>(0,h.forkJoin)([(0,h.of)(t),this.dataSource.getDefaultValues()])),(0,P.M)(()=>this._markForNotCollection(_.btv.Create)),(0,E.T)(([t,n])=>(this._persistedState={...n,...t},this._persistedState)),(0,z.n)(t=>this._loadDependentDataForCreate(t)),(0,P.M)(()=>this._isLoading=!1))}copy(e,t={}){return this._isLoading=!0,this.getSchema().pipe((0,E.T)(n=>({schema:n,attributes:n.attributes.filter(a=>a.attributeType===c.DataSchemaAttributeType.OwnAttribute&&a.isValueCloneable).map(a=>a.name),parameters:"string"==typeof e?[{type:c.ModelParameterType.PrimaryColumnValue,value:e}]:n.getPrimaryAttributesNames().filter(a=>e[a]).map(a=>({type:c.ModelParameterType.PrimaryColumnValue,value:{[a]:e[a]}}))})),(0,Y.Z)(({schema:n,attributes:a,parameters:r})=>this._load(a,r,{},_.btv.Copy).pipe((0,P.M)(()=>{this._isLoaded=!1}),(0,P.M)(u=>{if(u.length>1)throw new Error("More than one record loaded for copy");if(0===u.length)throw new Error("No records loaded for copy")}),(0,E.T)(u=>bt.removeNotRequestedData(a,{...u[0]})),(0,E.T)(u=>{n.getPrimaryAttributesNames().forEach(f=>delete u[f]);const p=bt.getOwnColumnsValues(n,t);return{...u,...p}}),(0,z.n)(u=>this.dataSource.getDefaultValues().pipe((0,E.T)(p=>({...p,...u})))),(0,P.M)(u=>{this._persistedState={...u}}),(0,z.n)(u=>this._loadDependentDataForCreate(u)),(0,P.M)(()=>{this._isLoaded=!0,this._isLoading=!1}),(0,ue.W)(u=>(this._isLoading=!1,this._markForNotCollection(_.btv.Update),(0,h.throwError)(()=>new Error(u)))))))}insert(e){return this.getSchema().pipe((0,E.T)(n=>({dataSchema:n,data:{...this._persistedState??{},...e}})),(0,E.T)(({data:n,dataSchema:a})=>bt.getOwnColumnsValues(a,n))).pipe((0,W.pR)(n=>this._onBeforeInsert(n)),(0,W.DH)(n=>this._innerInsert(n)),(0,W.pR)(([n])=>this._onAfterInsert(n)),(0,E.T)(([,n])=>n),(0,P.M)(()=>{this._isLoaded=!0}),(0,ue.W)(n=>(0,h.of)(vu(n))))}update(e,t){return this.getSchema().pipe((0,E.T)(a=>bt.getOwnColumnsValues(a,e)),(0,E.T)(a=>this._getChangedAttributesValues(a))).pipe((0,W.pR)(a=>this._onBeforeUpdate(a,t)),(0,W.DH)(a=>this._innerUpdate(a,t)),(0,W.pR)(([a])=>this._onAfterUpdate(a,t)),(0,E.T)(([,a])=>a),(0,ue.W)(a=>(0,h.of)(vu(a))))}insertOrUpdate(e,t){return this._mode===_.btv.Update?this.update(e,t):this.insert(e)}delete(e){return this._onBeforeDelete(e).pipe((0,z.n)(()=>this._innerDelete(e)),(0,W.pR)(()=>this._onAfterDelete(e)),(0,ue.W)(t=>(0,h.of)(vu(t))))}setValue(e){const t=Object.keys(e);return this._checkAttributesInDataSchema(t).pipe((0,P.M)(()=>{t.length>0&&(this._dirtyAttributes=new Set([...this._dirtyAttributes,...t]),this._persistedState={...this._persistedState??{},...e})}),(0,E.T)(()=>null))}_getPersistedState(){return{...this._persistedState??{}}}markFor(e){this.mode!==e&&(this._setMode(e),this._modeChanges.next(e))}resetMode(){this._mode!==_.btv.Init&&(this._mode=_.btv.Init,this._modeChanges.next(this._mode))}loadLookupList(e,t,n={}){if(!this.dataSource)throw Error("DataSource is null");return this.dataSource.getLookupDataSchema(e).pipe((0,z.n)(a=>{const r=a.getPrimaryLoadAttributes();return this._createDataSource(this._lookupDataSourceName,a).pipe((0,z.n)(u=>u.load(r,t,n)),(0,E.T)(u=>({primaryAttributeName:a.primaryAttributeName,primaryDisplayAttributeName:a.primaryDisplayAttributeName,data:u})))}))}canDelete(e){return(0,h.lastValueFrom)(this.dataSource.canDelete(e),{defaultValue:null})}canSave(e){switch(this._mode){case _.btv.Init:return Promise.resolve({result:!1});case _.btv.Create:case _.btv.Copy:return(0,h.lastValueFrom)(this.dataSource.canCreate(e),{defaultValue:null});case _.btv.Update:return(0,h.lastValueFrom)(this.dataSource.canEdit(e),{defaultValue:null});case _.btv.Delete:return this.canDelete(e);default:throw Error(`Unable to verify the possibility of operation executing: the '${this._mode}' is not supported.`)}}attributeChanged(e,t){t||this._selfDirty$.next(!0),this._dirtyAttributes.add(e)}setLoadedState(){this._dirtyAttributes=new Set,this._markAsPristine()}createCollectionItemModel(e){const t=new vi(this._injector,this.dataSource);return t._isCollectionItemModel=!0,t._isLoaded=!0,t._isInitialized=!0,t._persistedState={},t._dataSchemaName=this._dataSchemaName,t._attributesMap=this._attributesMap,null!=e&&(t._setMode(e),t._selfDirty$.next(!1)),this._children.push(t),t}childrenChange(){this._children$.next(this._children)}removeChild(e){const t=e?._id,n=this._children.findIndex(a=>a?._id===t);-1!==n&&this._children.splice(n,1)}_getAsyncResult(e){return(0,h.firstValueFrom)(e)}getLastError(){return this.dataSource?this.dataSource.getLastError():new Error("DataSource is null")}destroy(){this._isInitialized=!1,this._destroyed$.next(),this._destroyed$.complete(),this._selfDirty$.complete(),this._children$.complete(),this._childrenDirty$.complete(),this._childrenModes$.complete(),this._destroyed=!0}getOwnLoadParameters(){return this.dataSource.getOwnLoadParameters()}getAllowCopyingRecords(){return this.dataSource.getAllowCopyingRecords()}}(0,I.Cg)([(0,c.ImplementUsingHandlerChain)({requestType:"crt.ModelGenerator",methodName:"generateOne"}),(0,I.Sn)("design:type",Function)],vi.prototype,"_create",void 0);let go=class fh{constructor(e,t,n,a){this.dataSourceFactory=e,this.entitySchemaRepository=t,this._featureValues=n,this._injector=a}_createModel(e=null,t=!1,n){const a=new vi(n||this._injector,e);return a.disableSync=t,a.init()}_validateModelConfig(e){if(e.primaryDataSourceName&&!e.dataSources[e.primaryDataSourceName])throw new Error(`Data source "${e.primaryDataSourceName}" cannot be primary data source. Data source "${e.primaryDataSourceName}" not found in model config.`);if(e.primaryDataSourceName&&e.dataSources[e.primaryDataSourceName]?.scope===c.DataSourceScope.ViewElement)throw new Error(`Data source "${e.primaryDataSourceName}" with scope "viewElement" cannot be primary. Only data sources with scope "page" can be primary`)}_getEntitySchemesRequest(e){return e.map(([,t])=>t).filter(t=>"crt.EntityDataSource"===t.type).map(t=>t.config).filter(t=>!!t.entitySchemaName).map(t=>{let n=[];return t.attributes&&(n=Object.entries(t.attributes).filter(([,a])=>a.type===c.DataSchemaAttributeType.ForwardReferenceAttribute).map(([,a])=>a.path)),{name:t.entitySchemaName,loadLookupColumns:!0,forwardReferencePaths:n}})}_generateFromConfig(e,t){let n,a;const r=t?.get(_.gcc,null,{optional:!0});return r?(n=Object.entries(e?.dataSources||{}).filter(([u,p])=>!!p.type||(console.warn(`Data source ${u} without type not supported.`),!1)),0===n.length?(0,h.of)([]):(this._validateModelConfig(e),a=n.map(([u,p])=>this.generateOne(p,u,t)),this.preInitializeDataSources(n).pipe(r.measure$("modelGenerator.generateFromConfig"),(0,h.switchMap)(()=>(0,h.forkJoin)(a))))):(n=Object.entries(e?.dataSources||{}).filter(([u,p])=>!!p.type||(console.warn(`Data source ${u} without type not supported.`),!1)),0===n.length?(0,h.of)([]):(this._validateModelConfig(e),a=n.map(([u,p])=>this.generateOne(p,u,t)),this.preInitializeDataSources(n).pipe((0,h.switchMap)(()=>(0,h.forkJoin)(a)))))}preInitializeDataSources(e){if(this._featureValues["DataSource-DontUseOneRequestForEntitySchemes"])return(0,h.of)(null);const t=this._getEntitySchemesRequest(e);return this.entitySchemaRepository.getSchemes(t).pipe((0,ue.W)(n=>(0,h.of)([])),(0,E.T)(n=>null))}generate(e,t){return this._generateFromConfig(e,t)}generateOne(e,t,n){const a=n?.get(_.gcc,null,{optional:!0});return a?this.dataSourceFactory.create(t,e,n).pipe(a.measure$(`modelGenerator.generateOne.${t}`),(0,Y.Z)(r=>this._createModel(r,e.disableSync,n))):this.dataSourceFactory.create(t,e,n).pipe((0,Y.Z)(r=>this._createModel(r,e.disableSync,n)))}static{this.\u0275fac=function(t){return new(t||fh)(i.\u0275\u0275inject(Qi),i.\u0275\u0275inject(_.vp2),i.\u0275\u0275inject(_.G2Y),i.\u0275\u0275inject(i.Injector))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:fh,factory:fh.\u0275fac})}};go=(0,I.Cg)([(0,W.op)({requestType:"crt.ModelGenerator"}),(0,I.Sn)("design:paramtypes",[Qi,_.vp2,_.xRQ,i.Injector])],go);var lr=b(97993),vp=b(4258);class ea{constructor(e,t,n){this._sysSettingsService=e,this._dataSchemaRepository=t,this._featureValues=n,this._searchComparisonTypeSysSettingCode="StringColumnSearchComparisonType"}_getParameterValue(e,t,n){if("string"==typeof t){if(t.startsWith("@requestPayload")){const a=t.replace("@requestPayload.","");return(0,Ct.A)(n,a)}if(t.startsWith("$"))return e.attributes[t.substring(1)];if(e.attributes[t])return e.attributes[t]}return t}_applyFilterMacros(e,t){let n=null;switch(typeof t){case"object":n=JSON.stringify((0,lr._P)(t));break;case"string":n=t;break;default:return t}let r=!1;return[...n.matchAll(/##ViewModelMacro\.\$([^#]+)##/g)].forEach(u=>{const p=u[1],f=(0,Ct.A)(e.attributes,p);let S=f?.toString();"object"==typeof f&&(r=!0,S=JSON.stringify(f)),n=n.replace(u[0],S)}),"object"==typeof t||r?JSON.parse(n):n}_createPrimaryDisplayColumnValueFilter(e){var t=this;return(0,A.A)(function*(){const n=t._searchComparisonTypeSysSettingCode,r=1===(yield t._sysSettingsService.getByCode(n))?.value?c.ComparisonType.Contain:c.ComparisonType.Start_with;return{type:c.ModelParameterType.PrimaryDisplayValueFilter,value:e,comparisonType:r}})()}_createColumnValueFilter(e,t,n){const a=t;return Promise.resolve({type:c.ModelParameterType.ColumnValue,value:{attributePath:a.attributePath,attributeValue:this._getParameterValue(e,a.attributeValue,n)}})}_getOwnLoadParameters(e,t){return e.getModelByName(t)?.getOwnLoadParameters()}_getDataSourceFilteringParameters(e,t){const a=e._dataSourcesInfos.get(t).getFilteringConfig();return e._checkFilteringAttributes(t,a),0===a.length?Promise.resolve([]):Promise.all(a.map(r=>e[r.name])).then(r=>r.map(u=>({type:c.ModelParameterType.Filter,value:u})))}_getDataSourceOwnFilteringParameters(e,t){return this._getOwnLoadParameters(e,t)?.parameters??[]}_getPrimaryAttributeName(e,t){var n=this;return(0,A.A)(function*(){if(!t)return null;let a=Object.values(e.dataSchemas).find(r=>r.name===t);return a||(a=yield(0,h.lastValueFrom)(n._dataSchemaRepository.get(t))),a?.primaryAttributeName})()}_getParameterRelationsConfigs(e){return e.relationsConfigs||[]}_createRelationParameter(e,t){const n={...e},a=this._getParameterRelationsConfigs(n);return n.relationsConfigs=[{dataSchemaName:t.dataSchemaName,attributePath:t.attributePath,relationPath:t.relationPath},...a],n}_validateAllowedRelations(e,t,n){const r=n?.relationPath?.split(".")?.shift(),u=e.dataSchemas[t],p=u?.findAttributeByName(r);if(u&&p&&u.primaryAttributeName!==r&&p.dataValueType!==c.DataValueType.Lookup&&!this._featureValues.DataSourceAllowRelationsByNonLookupColumn){const f="Filtration of data sources by page data is currently supported by lookup and primaryAttribute fields only",S=new Error(`${f}, please see the console for more details`);throw S.stack=`${f} , data source name: ${t}, relation config: ${JSON.stringify(n)}`,S}}_createRelationParameterWithAttributeValue(e,t,n,a){var r=this;return(0,A.A)(function*(){const u={...n},p=r._getParameterRelationsConfigs(u),f=e.dataSchemas[t],S=a.relationPath.split("."),w=S.shift(),O=f.findAttributeByName(w);if(f.primaryAttributeName!==w&&O.dataValueType!==c.DataValueType.Lookup&&r._featureValues.DataSourceAllowRelationsByNonLookupColumn)return u.type=c.ModelParameterType.ColumnValue,u.value={attributePath:a.attributePath,attributeValue:a.value},u.relationsConfigs=p,u;const $={dataSchemaName:a.dataSchemaName,attributePath:a.attributePath,relationPath:a.relationPath};u.value=a.value,u.type=c.ModelParameterType.PrimaryColumnValue,f.primaryAttributeName!==w&&($.dataSchemaName=O.referenceSchemaName);const te=f.type!==c.DataSchemaType.Entity?$.dataSchemaName:a.dataSchemaName;return $.relationPath=0===S.length?yield r._getPrimaryAttributeName(e,te):S.join("."),u.relationsConfigs=[$,...p],u})()}_convertToRelationParameters(e,t,n,a){var r=this;return(0,A.A)(function*(){const u=[];r._validateAllowedRelations(e,t,a);for(const p of n){const f=a.useAttributeValue?yield r._createRelationParameterWithAttributeValue(e,t,p,a):r._createRelationParameter(p,a);u.push(f)}return u})()}getLoadParametersByRelation(e,t,n,a){const r=t.relationPath.split("."),u=r.shift(),p=e.dataSchemas[u],f={dataSchemaName:p.name,attributePath:t.attributePath,relationPath:r.join(".")},S=r.shift(),O=e._dataSourcesInfos.get(u).getMappedAttributeNames(S)?.[0]??null,$=e.getModelMode(u),te=a?.[u]?.[f.relationPath];if(e.getModelByName(n)?.getAllowCopyingRecords()&&te)f.value=te,f.useAttributeValue=!0;else{const ke=e.getIsDirty(O)||$===_.btv.Create||$===_.btv.Copy||p.type!==c.DataSchemaType.Entity;if(O&&ke){f.useAttributeValue=!0;const Me=e.attributes[O];f.value=Me?.value?Me.value:Me}}return this._getModelLoadParameters(e,u,null,null,!0,!1).then(ke=>this._convertToRelationParameters(e,u,ke,f))}_getRelationParameters(e,t,n){const a=e._modelDependencies[t]||[];if(0===a.length)return Promise.resolve([]);const r=a.map(u=>this.getLoadParametersByRelation(e,u,t,n));return Promise.all(r).then(u=>u.flat())}_getPagingConfigRowCount(e,t){return"string"==typeof t?(0,_i.A)(e.attributes[t])?0:e.attributes[t]:t}_getPagingConfigRowsOffset(e,t,n,a){const r=e._dataSourcesInfos.get(a).collectionViewModelAttributeName,u=e.attributes[r]?.length??0;if("number"==typeof t)throw new Error("Rows offset parameter cannot be set to number");return t||n!==c.DataSourceLoadType.LoadNext?t||n!==c.DataSourceLoadType.Reload?(e.attributes[t]=(0,_i.A)(e.attributes[t])?0:e.attributes[t],n===c.DataSourceLoadType.Reload?e.attributes[t]:e.attributes[t]+u):0:u}_getModelPagingConfig(e,t,n,a){if(!t){const r=this._getOwnLoadParameters(e,a);return Promise.resolve(r?.options?.pagingConfig??null)}return Promise.resolve({rowCount:this._getPagingConfigRowCount(e,t.rowCount),rowsOffset:this._getPagingConfigRowsOffset(e,t.rowsOffset,n,a)})}_mergeSorting(e,t){return(0,vp.A)(e??[],t??[],"columnName")??null}_getModelSortingConfig(e,t,n){const r=this._getOwnLoadParameters(e,n)?.options?.sortingConfig,u=t?.attributeName;return u&&e.attributes[u]?Promise.all(e.attributes[u].map(function(){var p=(0,A.A)(function*(f){return{columnName:yield f.columnName,direction:yield f.direction}});return function(f){return p.apply(this,arguments)}}())).then(p=>({columns:this._mergeSorting(p,r?.columns)})):r?Promise.resolve(r):Promise.resolve(null)}_updateLastEventLoadParameters(e,t,n,a){n&&0!==n.length?e._lastEventLoadParameters.set(t,n):!0!==a&&e._lastEventLoadParameters.set(t,[{type:c.ModelParameterType.Empty,value:""}])}_getModelLoadParameters(e,t,n,a,r,u,p){const f=this.getModelParameters(e,n,a).then(S=>(!0!==u&&this._updateLastEventLoadParameters(e,t,S,r),!0!==r?S:e._lastEventLoadParameters.get(t)||[{type:c.ModelParameterType.Never,value:""}]));return Promise.all([f,this._getDataSourceFilteringParameters(e,t),this._getDataSourceOwnFilteringParameters(e,t),this._getRelationParameters(e,t,p)]).then(([S,w,O,$])=>[...S,...O,...w,...$])}getModelParameters(e,t,n){if(n?.parameters&&(t=[...t,...n.parameters]),!t||0===t.length)return Promise.resolve([]);const a=t.map(r=>{switch(r.type){case c.ModelParameterType.PrimaryColumnValue:return Promise.resolve({type:r.type,value:this._getParameterValue(e,r.value,n)});case c.ModelParameterType.Filter:return Promise.resolve({type:r.type,value:this._applyFilterMacros(e,r.value)});case c.ModelParameterType.PrimaryDisplayValueFilter:return this._createPrimaryDisplayColumnValueFilter(this._getParameterValue(e,r.value,n));case c.ModelParameterType.ColumnValue:return this._createColumnValueFilter(e,r.value,n)}});return Promise.all(a)}getModelLoadParameters(e,t,n,a=c.DataSourceLoadType.Load,{payload:r,useLastLoadParameters:u,doNotUpdateLastLoadParameters:p,modelLoadConfiguration:f}={}){const S=t.name,w=a??c.DataSourceLoadType.Load,O=w===c.DataSourceLoadType.Load?null:t.getPagingConfig(),$=t.getSortingConfig();return Promise.all([this._getModelLoadParameters(e,S,n,r,u,p,f),this._getModelPagingConfig(e,O,w,S),this._getModelSortingConfig(e,$,S)])}static{this.\u0275fac=function(t){return new(t||ea)(i.\u0275\u0275inject(c.SysSettingsService),i.\u0275\u0275inject(Dn),i.\u0275\u0275inject(_.G2Y))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:ea,factory:ea.\u0275fac,providedIn:"root"})}}class ta{static{this._skippedProperties=["schedule","then"]}constructor(e,t,n,a,r,u,p,f){this.viewModelGenerator=e,this.injector=t,this.viewModelConfig=n,this.resources=a,this._eventScopes=u,this._modelsInitConfig=p,this._defaultPrimaryAttributeName="Id",this._models$=new h.BehaviorSubject([]),this._businessRulesActive=!0,this._dropdownPageSizeSettingsCode="DropdownPageSize",this._dataSourcesInfos=new Map,this._attributesToDataSourceNameMap=new Map,this._dropdownPageSize=null,this._replayEvents$=new h.ReplaySubject,this._loadedDataSources=new Set,this._conflictedModels=[],this.__destroyed=!1,this._disableViewModelWaitingForAsyncTasks=!1,this._disableViewModelLoadUnblockingThread=!1,this._blockFieldsAffectedByBusinessRules=!1,this._asyncTasksExecutingSubject=new h.BehaviorSubject(new Set),this._modelsRequestedToLoad=new Set,this._attributesAffectedByBusinessRules=[],this._businessRulesAreActivated=!1,this._destroySubject=new h.Subject,this._modelSourceRecordId={},this._modelLoaded$=new h.Subject,this._viewModelAttributeChangeEventOptions=new _.fTc({preventAttributeChangeRequest:!1,preventStateChange:!0,preventRunBusinessRules:!0}),this._attributeConfigs={},this._eventsSubject$=new h.Subject,this._collectionSubscription=new Map,this._crtControls=new Map,this._subscriptions=new h.Subscription,this._destroy$=this._destroySubject.asObservable(),this._businessRulesActivated$=new h.BehaviorSubject(!1),this.attributes={},this.dataSchemas={},this.events$=(0,h.merge)(this._eventsSubject$,this._replayEvents$),this._systemAttributes=[],this.getAttributeViewModelConfig=w=>this._attributeConfigs[w]?.viewModelConfig?.attributes,this.initDependencies(),this._subscribeModelsChanges(),this.handlerChain=c.HandlerChainService.instance,this.formApiModel=r||this.formBuilder.group({}),this.parent=f;const S=this._appInfo?.isDebugEnabled?this._createProxy(this):this;return this._viewModelDataDelayerService&&!this.parent&&this._viewModelDataDelayerService.setViewModel(S),S}_createProxy(e){return new Proxy(e,{get:(t,n)=>(!("string"==typeof n)||n in t||ta._skippedProperties.includes(n)||console.debug(`Attribute ${n} not found.`),t[n])})}get IsChanged(){return Promise.resolve(this.attributes[Ks])}set IsChanged(e){}get HasUnsavedData(){return Promise.resolve(this.attributes[Kr])}set HasUnsavedData(e){}set BusinessRulesActivated(e){}get BusinessRulesActivated(){return Promise.resolve(this._businessRulesAreActivated)}get _isChanged(){return console.warn("Warning: The `_isChanged` property of the view-model is deprecated. It will be removed in future versions. Use `IsChanged` or `HasUnsavedData` attribute instead."),Object.keys(this._attributeConfigs).filter(e=>!(0,Re.A)(this._attributeConfigs[e].modelConfig)).some(e=>this.formApiModel.controls[e]?.dirty)}get _scopes(){return[...this._eventScopes??[]]}get _injectionContext(){return this._context}get[Ka](){return this.injector}get primaryAttributeName(){if(!this._primaryModelName)return this._defaultPrimaryAttributeName in this._attributeConfigs?this._defaultPrimaryAttributeName:null;const t=this.dataSchemas[this._primaryModelName].primaryAttributeName,n=this._dataSourcesInfos.get(this._primaryModelName);return this._getMappedAttributeName(n,t)}get PrimaryModelMode(){return this.getPrimaryModelMode()}get State(){return Ji(this).attributes[ml]}get _destroyed(){return this.__destroyed}get models(){return this._models$.value}_executeWithOptions(e,t){let n;try{return n=this._viewModelAttributeChangeEventOptions.getOptions(),this._viewModelAttributeChangeEventOptions.setOptions(t),e()}finally{this._viewModelAttributeChangeEventOptions.setOptions(n)}}_setSystemAttributeValue(e,t){const n=this.attributes[e];this.attributes[e]=t,this._executeWithOptions(()=>{this._fireChangeAttributeEvent({type:ft.ChangeAttributeValue,payload:{attributeName:e,oldValue:n,value:t}})},{preventStateChange:!0,preventRunBusinessRules:!0})}_fireChangeAttributeEvent(e){e.payload.silent??=this._viewModelAttributeChangeEventOptions.getAsSilent(),Object.assign(e.payload,this._viewModelAttributeChangeEventOptions.getOptions()),this._eventsSubject$.next(e)}_getViewModelValidators(e){const t=this.viewModelConfig.attributes[e]??{};return("validators"in t&&t.validators)??{}}_initDataSourceValidators(){return this._measurePerformanceService?.measure(`ViewModel.initDataSourceValidators.${this._injectionContext?.id}.parent.${!!this.parent}`,()=>(this._validators={},this._dataSourcesInfos.forEach(e=>{e.attributesMap.forEach((t,n)=>{const a=this.viewModelConfig.attributes[n]??{};if("modelConfig"in a&&a.modelConfig?.ignoreValidators)return;this._validators[n]=this._validators[n]||[];const r=this._getDataSourceAttributeSchema(e,t);if(r?.validators)for(const[u,p]of Object.entries(r.validators))if(p?.type){const f=this._injectionContext??Ji(this)?._injectionContext,S=this.validatorTypeResolver.getValidator(p.type,{validationParameters:p?.params,injectionContext:f}),w=this._getViewModelValidators(n),O=Object.values(w).find($=>$.type===p.type);this._validators[n].push({name:u,instance:S,disabled:!!O?.disabled,params:p?.params})}})}),(0,h.of)(null)))}_initSchemaValidators(e){this._measurePerformanceService.measure(`ViewModel.initSchemaValidators.${this._injectionContext?.id}.parent.${!!this.parent}`,()=>{Object.entries(e||{}).forEach(([t])=>{const n=this._getViewModelValidators(t);this._validators[t]=this._validators[t]||[];for(const[a,r]of Object.entries(n))if(r?.type){const u=this._injectionContext??Ji(this)?._injectionContext,p=this.validatorTypeResolver.getValidator(r.type,{validationParameters:r.params,injectionContext:u});this._validators[t].push({name:a,instance:p,disabled:r.disabled,params:r?.params})}})})}_waitAsyncValidation(){return(0,h.from)(this.waitAsyncTasksFinish()).pipe((0,z.n)(()=>this.formApiModel.statusChanges.pipe((0,Wi.Z)(this.formApiModel.status),(0,se.p)(e=>"pending"!==e.toLowerCase()),(0,rt.$)(),(0,E.T)(()=>null))))}_getDataSourceAttributeCaption(e,t){let n=this.resourceFinderService.findLocalizableValue(t);const a=this._getDataSourceInfoByViewModelAttributePath(e);if(null==n&&a){const r=a.getDataSourceAttributePath(e),u=r?this._getDataSourceAttributeSchema(a,r):"";n=u?u.caption:this._translateService.instant("BaseViewModel.DataSourceAttributeRemoved")}return n}_getResourcesStrings(){const e=this.resources?.strings??{};return{...e,...this._getResourceStringsByAttributes(e)}}_getChangedResourcesStrings(e){const t=Object.entries(e).reduce((a,[r,u])=>{const p=this.resources?.strings[r]||{};return{...a,[r]:u&&{...p,...u}}},{}),n={...this.resources?.strings,...t};return JSON.parse(JSON.stringify(n))}_generateResourceAttribute(){this[_.c2Z]={},this[_.c2Z][_.ckl.string]={};const e=this._getResourcesStrings();return this._attributeResourceGenerator.generate(this,e)}_getBoundAttributeNames(){const e=new Set;return this._dataSourcesInfos.forEach(t=>{for(const n of t.mappedViewModelAttributes)e.add(n)}),Array.from(e.values())}_getDataSourceInfoByViewModelAttributePath(e){const t=this.getBoundDataSourceNameByAttributePath(e);return this._dataSourcesInfos.has(t)?this._dataSourcesInfos.get(t):null}_getResourceStringsByAttributes(e){const t=Object.keys(e);return this._getBoundAttributeNames().filter(a=>!t.includes(a)).reduce((a,r)=>(a[r]={},a),{})}_getDataSourceAttributeSchema(e,t){return this.dataSchemas[e.name]?.attributes?.find(n=>n.name===t)}_generatePrimaryAttributes(){return this._measurePerformanceService.measure(`ViewModel.generatePrimaryAttributes.${this._injectionContext?.id}.parent.${!!this.parent}`,()=>{const e=Array.from(this._dataSourcesInfos.values()).map(t=>{const n=t.name,a=this.dataSchemas[n],u=(t.includePrimaryAttributes?[a?.primaryAttributeName,a?.primaryDisplayAttributeName]:[]).filter(p=>p&&!t.getIsDataSourceAttributePathExists(p)).map(p=>{const f=(0,c.generateGuid)(),S=`${n}_${p}_${f}`,w=a.findAttributeByName(p),O={modelConfig:{path:`${n}.${p}`},dataValueTypeName:c.DataValueType[w.dataValueType]};return this._attributeConfigs[S]=O,t.addNewAttribute(S,O),this._attributeGenerate({[S]:O})});return 0===u.length?(0,h.of)(null):(0,h.forkJoin)(u)});return 0===e.length?(0,h.of)(null):(0,h.forkJoin)(e).pipe(this._measurePerformanceService.measure$(`ViewModel.generatePrimaryAttributes.forkJoin.${this._injectionContext?.id}.parent.${!!this.parent}`))})}_getDataSourceDto(e){const t={},n=this._dataSourcesInfos.get(e);return n.attributesMap.forEach((a,r)=>{if(!n.getIsMapOnCollection(r)){const u=this.attributes[r],p=this._getDataSourceAttributeSchema(n,a);u||p?.dataValueType!==c.DataValueType.Lookup?t[a]=u:t[a]=null}}),(0,h.of)(t)}_checkFilteringAttributes(e,t){if(t.some(a=>(0,_i.A)(a.name)))throw new Error(`Filtering attributes for ${e} are not valid!`)}_attributeGenerate(e,t){return this._attributeGenerator.generate(this,e,{...t,onChangeAttributeValue:(n,a,r)=>{this._fireChangeAttributeEvent({type:ft.ChangeAttributeValue,payload:{attributeName:n,value:a,oldValue:r,silent:this._viewModelAttributeChangeEventOptions.getAsSilent()}})}})}_getDataSourceNamesAffectedByFilteringAttribute(e){return[...this._dataSourcesInfos.entries()].filter(([,t])=>t.isCollection).filter(([t])=>{const n=this.getModelByName(t);return this._modelsRequestedToLoad?.has(n?.name)||n?.isLoaded||n?.isLoading}).filter(([t,n])=>{const a=n.getFilteringConfig(),r=a.some(u=>u?.name===e&&u?.loadOnChange);return r&&this._checkFilteringAttributes(t,a),r}).map(([t])=>t)}_createRequestsForReloadingDataSources(e){return e.map(t=>({type:"crt.LoadDataRequest",$context:this,dataSourceName:t,config:{loadType:c.DataSourceLoadType.Reload}}))}_dispatchStartLoadModelAttributes(e){const t=`${ut.AttributeLoading}_${this._context?.id}_${Object.keys(e)}`;this._measurePerformancePageLoadService?.addTask(t,{targetTask:!0}),this._replayEvents$.next({type:ft.StartLoadModelAttributes,payload:e})}_dispatchFinishLoadModelAttributes(e){const t=`${ut.AttributeLoading}_${this._context?.id}_${Object.keys(e)}`;this._measurePerformancePageLoadService?.removeTask(t,{targetTask:!0}),this._replayEvents$.next({type:ft.FinishLoadModelAttributes,payload:e})}_processEmptyLoadDataForCollection(e,t){var n=this;return(0,A.A)(function*(){if(!e.isCollection||!e.collectionViewModelAttributeName)return;const a=t.find(f=>f.type===c.ModelParameterType.PrimaryColumnValue);if(!a)return;const r=a.value?.value,u=n.attributes[e.collectionViewModelAttributeName];if(!r||!u)return;const p=yield u.findByPrimaryAttribute(r);p&&u.remove(p)})()}_loadDynamicModel(e){const t=e.attributeName,n=e.dataSourceConfig,a=e.dataSourceName||cu.createDynamicDataSourceNameFromAttributeName(this,t),r=cu.createAttributeConfig(this,a,e),u=this._createAndSetDataSourceInfo(a,t,r);return this._defineOrUpdateAttribute(t,r),this._setupSortingAttribute(e.sortingConfig),this._setupFiltersAttributes(e.filtersConfig),this._modelGenerator.generateOne(n,a).pipe((0,P.M)(p=>this._markModelAsCollection(p,u)),(0,P.M)(p=>this._upsertModel(a,p)),(0,P.M)(p=>this._addModelDependencies(p,e.dependencies)),(0,z.n)(p=>(0,h.forkJoin)([(0,h.of)(p),this._addDataSchemaToDataSchemas(p)])),(0,z.n)(([p])=>(0,h.forkJoin)([(0,h.of)(p),(0,h.of)(this._replaceAttributesToDataSourceNameMap(u))])),(0,z.n)(([p])=>(0,h.forkJoin)([(0,h.of)(p),this._reGenerateResourcesAttributes()])),(0,z.n)(([p])=>this._loadModelData({model:p,dataSourceInfo:u,parametersConfig:[],loadType:c.DataSourceLoadType.Reload,useLastLoadParameters:e.useLastLoadParameters}).pipe(this._measurePerformanceService.measure$(`ViewModel.loadDynamicModel.${this._injectionContext?.id}.parent.${!!this.parent}.datasourceName.${e.dataSourceName}`))))}_defineOrUpdateAttribute(e,t){this.attributes[e]?this._attributeConfigs[e]=t:this._attributeGenerate({[e]:t})}_createAndSetDataSourceInfo(e,t,n){const r=Zi.getFromViewModelConfig({attributes:{[t]:n}}).get(e);return this._dataSourcesInfos.set(e,r),r}_setupSortingAttribute(e){if(!e?.default)return;const t=e.attributeName;this.attributes[t]=e.default}_setupFiltersAttributes(e){e?.forEach(t=>{if(!t.value)return;const n=t.name,a=t.value;this[n]=a.value||a})}_addModelDependencies(e,t){this._modelDependencies[e.name]=t||[]}_addDataSchemaToDataSchemas(e){return e.getSchema().pipe((0,P.M)(t=>this.dataSchemas[e.name]=t))}_reGenerateResourcesAttributes(){return(0,h.forkJoin)([...this._generateResourceAttribute(),(0,h.of)(null)])}_replaceAttributesToDataSourceNameMap(e){const t=this._getDataSourceAttributesMap(e),n=[...Array.from(this._attributesToDataSourceNameMap.entries()),...t];this._initializeAttributesToDataSourceNameMap(n)}_getMappedAttributeName(e,t){if(!e)return"";const n=e.getMappedAttributeNames(t);return n&&0!==n.length?n[0]:""}_getMappedAttributeNames(e,t){return e?e.getMappedAttributeNames(t):[]}_getModelAttributesToLoad(e,t){const n=this._dataSourcesInfos.get(e.name);if(t?.attributes){const a=t.attributes.filter(r=>{const u=this._getMappedAttributeName(n,r);return!this.getIsDirty(u)});return this._getModelDependentAttributes(e,a)}return n.attributes.map(a=>a.path)}_loadStaticModel(e,t,n,a,r,u){const p=this.getModelByName(e),f=this._dataSourcesInfos.get(p.name);return this._loadModelData({model:p,dataSourceInfo:f,parametersConfig:t,loadType:n,payload:a,useLastLoadParameters:r,doNotUpdateLastLoadParameters:u})}_waitDataDelay(e){return this._viewModelDataDelayerService?.shouldBeDelayed()?(0,h.of)(e).pipe((0,Zh.o)(()=>this._viewModelDataDelayerService.loadTrigger$)):(0,h.of)(e)}_updateTrackedAttributes(e){const t=this._modelDependencies[e.name];if(!t||!e.isAggregate)return;const n=/^.{0,2}\[\w+:\w+(:\w+)?]/;t.forEach(a=>{const r=a.relationPath.split(".")[0],u=this.getModelByName(r),p=e.affectedAttributes.filter(S=>S.schemaName===u.dataSchemaName).map(S=>S.path.split(".")[0]).filter(S=>!n.test(S)),f=new Set([...a.trackByAttributes??[],...p]);a.trackByAttributes=[...f.values()]})}_getDependOnModelsNames(e){const t=this._modelDependencies[e];if(!t)return[];const n=t.map(a=>a.relationPath.split(".")[0]);return[...new Set(n)]}_waitForModelLoad(e){var t=this;return(0,A.A)(function*(){const n=t.getModelByName(e);!n||n?.isLoaded||n.mode===_.btv.Create||n.mode===_.btv.Copy||(yield(0,h.firstValueFrom)(t._modelLoaded$.pipe((0,se.p)(a=>a===e),(0,Ne.s)(1))))})()}_waitForModelsLoad(e){var t=this;return(0,A.A)(function*(){if(0===e.length||t._isDesignTime)return;const n=e.map(a=>t._waitForModelLoad(a));yield Promise.all(n)})()}_getAffectedAttributes(e,t,n){const r=this.dataSchemas[e].primaryAttributeName,u=[...t];return r&&!t.includes(r)&&n?.length>0&&n?.[0][r]&&u.push(r),u}_getModelLoadParameters(e,t,n,a,r,u){return this._modelParametersBuilder.getModelLoadParameters(this,e,t,n,{payload:a,useLastLoadParameters:r,doNotUpdateLastLoadParameters:u}).catch(p=>(console.error(p),this._showNotification({message:p.message}),[[{type:c.ModelParameterType.Never}],{},{}]))}_isRootModelAndDependsOnPrimaryDSByOneToManyRelation(e){if(!this._featureValues.AllowMultipleDataSources)return!1;const t=this._modelDependencies[e],n=ct(this.getModelByName(e));if(1!==t?.length||!this._primaryModelName||!n)return!1;const a=this.dataSchemas[this._primaryModelName],r=t[0],u=r.relationPath.split("."),p=u.shift(),f=u.shift(),S=p!==this._primaryModelName,w=f!==a.primaryAttributeName;return!S&&!w&&hp(this.dataSchemas[e],r.attributePath,a,f)===Ze.OneToMany}_getOneToManyRelationDefaultValues(e){const t=this._modelDependencies[e]?.[0],n=this.dataSchemas[this._primaryModelName],a=Object.keys(this._attributeConfigs).find(r=>this._attributeConfigs[r]?.modelConfig?.path===`${this._primaryModelName}.${n.primaryAttributeName}`);return{[t.attributePath]:this.attributes[a]}}_getDependOnModelLoadConfiguration(e){const t=this._getDependOnModelsNames(e),n={};return t.forEach(a=>{this._modelSourceRecordId[a]&&(n[a]={[this.dataSchemas[a].primaryAttributeName??"Id"]:this._modelSourceRecordId[a]})}),n}_checkAndProcessPageDataSourceData(e,t){if(!this._featureValues.AllowMultipleDataSources||!this._isRootModelAndDependsOnPrimaryDSByOneToManyRelation(e.name)||0!==t.length)return(0,h.of)(t);e.resetMode();const r=this._getOneToManyRelationDefaultValues(e.name);if(this.PrimaryModelMode===_.btv.Copy){const u=this.dataSchemas[e.name].primaryAttributeName??"Id",p=this._getDependOnModelLoadConfiguration(e.name);return(0,h.from)(this.getDataSourceLoadParameters(e.name,p)).pipe((0,z.n)(({parameters:f,options:S})=>e.load({attributes:[u],parameters:f,options:{loadType:c.DataSourceLoadType.Reload,pagingConfig:S.pagingConfig,sortingConfig:S.sortingConfig}})),(0,z.n)(f=>{e.resetMode();const S=f?.length?f[0][u]:null;return S?this.copy(e.name,S,r):this.create(e.name,r)}),(0,E.T)(()=>t))}return this.create(e.name,r).pipe((0,E.T)(()=>t))}_loadModelData({model:e,dataSourceInfo:t,parametersConfig:n,loadType:a,payload:r,useLastLoadParameters:u,doNotUpdateLastLoadParameters:p}){const f=e.name;this._modelsRequestedToLoad.add(f);const S=this._getModelAttributesToLoad(e,r),w=r?.attributes;if(w&&0===S.length)return(0,h.of)([]);if(this._conflictedModels.includes(f))return(0,h.of)([]);const O=this._getDataSourceMappingAttributes(t,S),$=this._getLoadTypeForDataSource(t,a);if($===c.DataSourceLoadType.LoadNext&&this._loadedDataSources.has(f))return(0,h.of)([]);this._dispatchStartLoadModelAttributes(O);const te=!this._isSyncForModelAllowed(e)||null===w||e.mode===_.btv.Init,Fe=this._getDependOnModelsNames(f);return this._checkAndLoadUnloadedDependOnModels(Fe),(0,h.from)(this._waitForModelsLoad(Fe)).pipe((0,z.n)(ke=>this._getModelLoadParameters(t,n,$,r,u,p)),(0,Y.Z)(ke=>this._waitDataDelay(ke)),(0,z.n)(([ke,Me,ai])=>e.load({attributes:S,parameters:ke,options:{loadType:a,pagingConfig:Me,sortingConfig:ai}}).pipe(this._measurePerformanceService.measure$(`ViewModel.loadStaticModel.model.load.${this._injectionContext?.id}.parent.${!!this.parent}.modelName.${f}`),(0,ue.W)(Rt=>this._handleLoadErrorResponse(Rt,[])),(0,P.M)(()=>this._updateTrackedAttributes(e)),(0,P.M)(Rt=>{Rt.length<Me?.rowCount?this._loadedDataSources.add(f):this._loadedDataSources.delete(f)}),(0,P.M)(Rt=>{0===Rt.length&&this._dispatchFinishLoadModelAttributes(O)}),(0,Y.Z)(Rt=>0===Rt.length?(0,h.from)(this._processEmptyLoadDataForCollection(t,ke)).pipe((0,E.T)(()=>Rt)):(0,h.of)(Rt)),(0,z.n)(Rt=>this._checkAndProcessPageDataSourceData(e,Rt)))),(0,E.T)(ke=>({data:ke,viewModelAttributes:t.getModelDto(ke)})),(0,z.n)(({data:ke,viewModelAttributes:Me})=>this.setValue(Me,{collectionLoadType:$===c.DataSourceLoadType.Reload?_.jjK.Reload:_.jjK.Merge,silent:!0}).pipe((0,P.M)(()=>{!t.isCollection||!Me||Object.keys(Me).forEach(ai=>{this.attributes[ai]?.forEach(Oy=>{Oy.formApiModel.updateValueAndValidity()})})}),(0,P.M)(()=>this._markAsPristine(Me)),(0,E.T)(()=>ke))),(0,P.M)(()=>this._modelLoaded$.next(f)),(0,z.n)(ke=>this._runBusinessRulesForModel(e,ke)),(0,P.M)(ke=>{if(te)return;const Me=this._getAffectedAttributes(f,S,ke);this._reloadDependentModels(e,Me)}),(0,P.M)(()=>{e.setLoadedState(),this._dispatchFinishLoadModelAttributes(O)}))}_checkAndLoadUnloadedDependOnModels(e){const t=e.filter(n=>{const a=!this._modelsRequestedToLoad.has(n),r=!ct(this.getModelByName(n));return a&&r});this._requestReloadModels(t)}_createChangeAttributeTriggers(e){return e.map(t=>({type:_.TEQ.ChangeAttributeValue,name:t,scopeId:""}))}_runBusinessRulesForModel(e,t,n=!1,a=[]){const r=this._dataSourcesInfos.get(e.name);if(r.isCollection||!this._businessRulesProcessingEnabled||!this._businessRulesActive)return(0,h.of)(t);const u=t[0]??{},p=n?[...r.mappedViewModelAttributes]:Object.keys(u).flatMap(O=>this._getMappedAttributeNames(r,O)).filter(O=>null!=O),f=this._createChangeAttributeTriggers(p),S={type:_.TEQ.DataLoaded,name:e.name,scopeId:""},w=this.models.filter(O=>O!==e).filter(O=>O.mode!==_.btv.Init).filter(O=>O.getDataSource().scope===c.DataSourceScope.Page).map(O=>this._getModelBusinessRuleContext(O.name,[]));return(0,h.forkJoin)([this._getModelBusinessRuleContext(r.name,[S,...a]),...w,(0,h.of)(this._getViewModelBusinessRuleContext([...f,...a,S]))]).pipe(this._measurePerformanceService.measure$(`ViewModel.runBusinessRulesForModel.${this._injectionContext?.id}.parent.${!!this.parent}`),(0,z.n)(O=>this._runBusinessRulesForContexts(O)),(0,E.T)(()=>t))}_runInitialBusinessRules(){if(!this._businessRulesProcessingEnabled||!this._businessRulesActive)return(0,h.of)(null);const e={type:_.TEQ.ContextReady,name:null,scopeId:""};return this._prepareBusinessRulesContexts([e]).pipe(this._measurePerformanceService.measure$(`ViewModel.runInitialBusinessRules.${this._injectionContext?.id}.parent.${!!this.parent}`),(0,Y.Z)(t=>0===t.length?(0,h.of)(null):this._runBusinessRulesForContexts(t)))}_createViewModelAttributesValues(e,t){const n=Object.entries(this.dataSchemas),[,a]=n.find(([u])=>u===e),r={};for(const u of a.attributes){const p=t[u.name],f=this.getViewModelAttributePath(e,u.name);f&&(r[f]=p??null)}return r}_createModelData(e,t){const n=this._dataSourcesInfos.get(e),a=this._getDataSourceMappingAttributes(n);this._dispatchStartLoadModelAttributes(a);const r=this.getModelByName(e),u=r.disableSync,p=this._getModelAttributesToLoad(r,null);return r.disableSync=!0,r.create(t).pipe((0,z.n)(f=>{const S=this._createViewModelAttributesValues(e,f),w=this._isRootModelAndDependsOnPrimaryDSByOneToManyRelation(e)?{silent:!0}:null;return this.setValue(S,w).pipe((0,P.M)(()=>this._forEachControl(S,O=>{O.markAsPristine(),O.markAsUntouched()})))}),(0,P.M)(()=>{r.disableSync=u,this._modelLoaded$.next(e)}),(0,z.n)(()=>this._runBusinessRulesForModel(r,[],!0)),(0,P.M)(()=>{this._isSyncForModelAllowed(r)&&this._reloadDependentModels(r,p)}),(0,P.M)(()=>{this._dispatchFinishLoadModelAttributes(a),r.setLoadedState()}),(0,E.T)(()=>null))}_copyModelData(e,t,n){const a=this._dataSourcesInfos.get(e),r=this._getDataSourceMappingAttributes(a);this._dispatchStartLoadModelAttributes(r);const p=this.getModelByName(e),f=this._getModelAttributesToLoad(p,null),S=p.disableSync;return p.disableSync=!0,this._modelSourceRecordId[e]=t,p.copy(t,n).pipe((0,ue.W)(w=>this._handleLoadErrorResponse(w,{})),(0,E.T)(w=>({data:[w],viewModelAttributes:a.getModelDto([w])})),(0,z.n)(({data:w,viewModelAttributes:O})=>this.setValue(O).pipe((0,P.M)(()=>this._markAsPristine(O)),(0,E.T)(()=>w))),(0,P.M)(()=>{p.disableSync=S,this._modelLoaded$.next(e)}),(0,z.n)(w=>this._runBusinessRulesForModel(p,w,!0)),(0,P.M)(()=>{this._isSyncForModelAllowed(p)&&this._reloadDependentModels(p,f)}),(0,P.M)(()=>{this._dispatchFinishLoadModelAttributes(r),p.setLoadedState()}),(0,Y.Z)(()=>(0,h.of)(undefined)))}_getDataSourceMappingAttributes(e,t=null){const n=t??e.attributes.map(r=>r.path),a=Object.fromEntries(n.map(r=>[this._getMappedAttributeName(e,r),!0]));return e.collectionViewModelAttributeName&&(a[e.collectionViewModelAttributeName]=!0),a}_handleLoadErrorResponse(e,t){return console.error(e),this._showNotification({message:e.message,duration:1e4}),(0,h.of)(t)}_canExecuteBusinessRulesByModelAttributeValue(e,t,n){return!t||!e||this._isModelAttributeValueValid(e,t,n)}_canExecuteBusinessRulesByViewModelAttributeValue(e,t){const n=this._getDataSourceInfoByViewModelAttributePath(e);if(n){const a=n.getDataSourceAttributePath(e);return this._canExecuteBusinessRulesByModelAttributeValue(n,a,t)}return!0}_getContextAttributeValue(e){return e instanceof Date?(0,c.toLocalISOString)(e):e}_getNormalizedContextAttributeValue(e,t,n){const a=e;return c.DataValueType[t]===c.DataValueType.Lookup||a?.displayValue?a?.value??e:!0!==n&&t?[c.DataValueType.RICH_TEXT,c.DataValueType.Image].includes(c.DataValueType[t])?null:c.DataValueType[t]===c.DataValueType.MAXSIZE_TEXT&&e?e.slice(0,500):e:e}_getHasValueContextAttributeValue(e,t){return!!(t&&c.DataValueType[t]===c.DataValueType.Boolean||null!=e&&""!==e)}_getViewModelAttributeInfos(e,t,n){return Object.keys(t).filter(a=>!(t[a]instanceof sn)).map(a=>{if(t[a]instanceof ta)return this._getViewModelAttributeInfos(e?`${e}.${a}`:a,t[a]?.attributes??{},n);const r=this._attributeConfigs[a]?.dataValueTypeName,u=this._getContextAttributeValue(t[a]),p=this._getNormalizedContextAttributeValue(u,r,n);return{name:e?`${e}.${a}`:a,value:p??null,displayValue:t[a]?.displayValue,dataValueTypeName:r,hasValue:this._getHasValueContextAttributeValue(u,r)}}).flat()}_runBusinessRulesForContexts(e){const t=`${ut.RunningBusinessRules}-${(0,c.generateGuid)()}`;return this._onAsyncTaskStarted(t),(0,h.of)(e).pipe(this._measurePerformanceService.measure$(`ViewModel.runBusinessRules.${this._injectionContext?.id}.parent.${!!this.parent}`),(0,E.T)(n=>n?.filter(a=>!(0,_i.A)(a))??[]),(0,Y.Z)(n=>{if(0===n.length)return(0,h.of)(null);const a=n.map(r=>({scopeName:r.scopeName,scopeId:r.scopeId,scopeType:r.scopeType,triggers:r.triggers}));return this._toggleControlsAffectedByBusinessRules(!1,a),this._businessRulesEngine.execute(n).pipe(this._measurePerformanceService.measure$(`ViewModel.runBusinessRules.execute.${this._injectionContext?.id}.parent.${!!this.parent}`),(0,P.M)(r=>{r.forEach(u=>{const p=a.find(f=>f.scopeId===u.scopeId&&f.scopeName===u.scopeName&&f.scopeType===u.scopeType);u.triggers=p?.triggers??[]})}),(0,z.n)(r=>r?this._businessRulesApplier.applyRules(this,r):(0,h.of)(null)),(0,P.M)(()=>{this._toggleControlsAffectedByBusinessRules(!0,a)}))}),(0,P.M)(()=>this._onAsyncTaskFinished(t)))}_createViewModelContext(e,t){return{scopeType:wt.ViewModel,scopeName:this._scopeName,scopeId:this._scopeName,scopeState:nn.Unknown,parentScopeId:null,attributes:t,triggers:e}}_getViewModelBusinessRuleContext(e){const t=this._featureValues["BRules-EnableCompareLargeAttributeValues"],n=this._getViewModelAttributeInfos(null,this.attributes,t);return this._createViewModelContext(e,[...n].map(a=>({attributeName:a.name,value:a.value,displayValue:a.displayValue,dataValueTypeName:a.dataValueTypeName,hasValue:a.hasValue})))}_prepareModelBusinessRuleTrigger(e,t){return t.map(n=>{if(n.type===_.TEQ.DataLoaded||n.type===_.TEQ.ContextReady)return n;const a=this._getDataSourceInfoByViewModelAttributePath(n.name);return a&&a.name===e?{type:_.TEQ.ChangeAttributeValue,name:a.getDataSourceAttributePath(n.name),scopeId:""}:null}).filter(n=>null!=n)}_getModelContextScopeStateType(e){switch(e.mode){case _.btv.Init:return nn.Init;case _.btv.Create:return nn.Create;case _.btv.Copy:return nn.Copy;case _.btv.Update:return nn.Update;default:return nn.Unknown}}_getModelBusinessRuleContext(e,t){const n=this._dataSourcesInfos.get(e),a=this.getModelByName(e),r=this.dataSchemas[e],u=this._prepareModelBusinessRuleTrigger(e,t),p=this._getModelContextScopeStateType(a);return this._getDataSourceDto(e).pipe((0,E.T)(f=>({...a._getPersistedState(),...f})),(0,E.T)(f=>({enableCompareLargeAttributeValues:this._featureValues["BRules-EnableCompareLargeAttributeValues"],modelDto:f})),(0,E.T)(({enableCompareLargeAttributeValues:f,modelDto:S})=>Object.entries(S).map(([w,O])=>{let $;const te=this._getMappedAttributeName(n,w);if(te)$=this._attributeConfigs[te]?.dataValueTypeName;else{const Me=r.findAttributeByName(w);$=c.DataValueType[Me.dataValueType]}const Fe=this._getContextAttributeValue(O);return{attributeName:w,value:this._getNormalizedContextAttributeValue(Fe,$,f),displayValue:O?.displayValue,dataValueTypeName:$,hasValue:this._getHasValueContextAttributeValue(Fe,$),isSignificant:w===r.primaryAttributeName}})),(0,E.T)(f=>({scopeType:wt.Model,scopeName:a.dataSchemaName,scopeId:e,scopeState:p,parentScopeId:this._scopeName,attributes:f,triggers:u,modelType:a.getDataSource()?.type})))}_prepareDataSourceNamesForBusinessRules(){return 0===this._modelsMap.size?[]:[...this._modelsMap.values()].filter(e=>!this._dataSourcesInfos.get(e.name).isCollection).map(e=>e.name)}_getModelsBusinessRuleContexts(e){return this._prepareDataSourceNamesForBusinessRules().map(n=>n?this._getModelBusinessRuleContext(n,e):(0,h.of)(null))}_prepareBusinessRulesContexts(e){const t=this._getModelsBusinessRuleContexts(e);if(!this._scopeName)return 0===t.length?(0,h.of)([]):(0,h.forkJoin)([...t]);const a=[(0,h.of)(this._getViewModelBusinessRuleContext(e)),...t];return 0===a.length?(0,h.of)([]):(0,h.forkJoin)(a)}_isAttributeChange(e){return!e.attributeName?.includes(":")}_businessRulesSubscribeOnChangeAttributes(){if(!this._businessRulesProcessingEnabled)return;const e=this.events$.pipe((0,se.p)(n=>n.type===ft.ChangeAttributeValue),(0,se.p)(n=>this._isAttributeChange(n.payload)),(0,se.p)(n=>!n.payload.silent),(0,se.p)(n=>!n.payload?.preventRunBusinessRules),(0,se.p)(n=>{const a=n.payload;return this._canExecuteBusinessRulesByViewModelAttributeValue(a.attributeName,a.value)}),(0,se.p)(()=>this._businessRulesActive),(0,E.T)(n=>n.payload.attributeName)),t=e.pipe((0,P.M)(()=>this._onAsyncTaskStarted(ut.DebouncingBusinessRules)),(0,me.r)(e.pipe((0,tt.B)(500))),(0,E.T)(n=>Array.from(new Set(n))),(0,E.T)(n=>this._createChangeAttributeTriggers(n)),(0,Y.Z)(n=>this._prepareBusinessRulesContexts(n)),(0,P.M)(()=>this._onAsyncTaskFinished(ut.DebouncingBusinessRules)),(0,se.p)(n=>n.length>0),(0,Y.Z)(n=>this._runBusinessRulesForContexts(n)));this._subscriptions.add(t.subscribe())}_subscribeOnChangeAttributes(){const e=this.events$.pipe((0,se.p)(t=>t.type===ft.ChangeAttributeValue),(0,P.M)(t=>{const n=t,a=n.payload.attributeName,r=this.getBoundDataSourceName(a),u=this.getModelByName(r),f=this._dataSourcesInfos.get(r)?.attributesMap.get(a);f&&u?.attributeChanged(f,n.payload?.preventStateChange??n.payload?.silent)}));this._subscriptions.add(e.subscribe())}_getHasRelation(e,t,n){return 0!==e.map(r=>{const u=r.relationPath.split("."),p=r.trackByAttributes??[],f=u.shift(),S=u.shift();return p.push(S),{rootModelName:f,trackedAttributes:p}}).filter(({rootModelName:r})=>r===t).filter(({trackedAttributes:r})=>!!this._dataSourcesInfos.get(t).isCollection||n.some(u=>r.includes(u))).length}_getDependentModelsNames(e,t=[]){return e?Object.entries(this._modelDependencies).filter(([n])=>n!==e).filter(([,n])=>this._getHasRelation(n,e,t)).map(([n])=>n).map(n=>[n,...this._getDependentModelsNames(n)]).flat():[]}_getIsModelDataChanged(e){if(!this.getModelByName(e)?.isLoaded)return!1;const n=this._dataSourcesInfos.get(e);if(n.isCollection){const r=n.collectionViewModelAttributeName,u=this.attributes[r];return!!u&&u.isChanged}return n.getMappedAttributes().some(r=>this.getIsDirty(r))}_requestReloadModels(e){this._createRequestsForReloadingDataSources(e).forEach(n=>{this._ngZone.runOutsideAngular(()=>this.processRequest(n))})}_isModelAttributeValueValid(e,t,n){return this._getDataSourceAttributeSchema(e,t)?.dataValueType!==c.DataValueType.Lookup||(0,_.oXd)(n)}_canReloadModelDependentData(e,t){return!!e.canReloadDependentData(t)||!this._conflictedModels.includes(e.name)&&this._getDependentModelsNames(e.name,[t]).length>0}_getModelDependentAttributes(e,t){return[...t,...t.map(n=>e.getDependentAttributesNames(n)).flat()]}_getChangedModelsNames(e){return e.filter(t=>this._getIsModelDataChanged(t))}_showNotification(e){this._ngZone.runOutsideAngular(()=>this.processRequest({type:"crt.NotificationRequest",$context:this,...e}))}_isSyncForModelAllowed(e){return e.allowSync}_subscribeOnReloadDataEvents(){const e=this.events$.pipe((0,se.p)(()=>this._modelSynchronizationEnabled),(0,se.p)(t=>t.type===ft.ChangeAttributeValue),(0,se.p)(t=>!0!==t.payload.silent),(0,E.T)(t=>({modelName:this.getBoundDataSourceNameByAttributePath(t.payload.attributeName),attributeName:t.payload.attributeName,attributeValue:t.payload.value})),(0,se.p)(({modelName:t})=>null!=t),(0,E.T)(({modelName:t,attributeName:n,attributeValue:a})=>{const r=this._dataSourcesInfos.get(t),u=r?.attributesMap.get(n);return{model:this.getModelByName(t),dataSourceInfo:r,modelAttribute:u,attributeValue:a}})).pipe((0,se.p)(({model:t})=>null!=t),(0,se.p)(({dataSourceInfo:t})=>!t.isCollection),(0,se.p)(({model:t})=>this._isSyncForModelAllowed(t)),(0,se.p)(({dataSourceInfo:t,modelAttribute:n,attributeValue:a})=>this._isModelAttributeValueValid(t,n,a)),(0,se.p)(({model:t,modelAttribute:n})=>this._canReloadModelDependentData(t,n))).pipe((0,P.M)(({model:t,dataSourceInfo:n,modelAttribute:a,attributeValue:r})=>{const u=this._getModelDependentAttributes(t,[a]),p=Object.fromEntries(u.map(f=>[this._getMappedAttributeName(n,f),!0]));this._dispatchStartLoadModelAttributes(p),t.reloadDependentData(a,r).pipe((0,z.n)(f=>{if(0===f.length)return(0,h.of)(f);const S=n.getModelDto(f);return this.setValue(S,{silent:!0}).pipe((0,z.n)(()=>this._runBusinessRulesForModel(t,f)))}),(0,P.M)(()=>this._reloadDependentModels(t,[a])),(0,P.M)(()=>this._dispatchFinishLoadModelAttributes(p))).subscribe()}));this._subscriptions.add(e.subscribe())}_subscribeOnChangeRequests(){const e=this.events$.pipe((0,se.p)(t=>t.type===ft.ChangeAttributeValue),(0,Y.Z)(t=>{const n=t.payload.attributeName,a=this._attributeConfigs[n];return Array.isArray(a?.change)?a.change:[a?.change]}),(0,se.p)(t=>null!=t),(0,E.T)(t=>({type:t.request,$context:this,scopes:this._scopeName?[this._scopeName]:[],...t.params})),(0,P.M)(t=>this._ngZone.runOutsideAngular(()=>this.handlerChain.process(t))));this._subscriptions.add(e.subscribe())}_subscribeOnFilteringEvents(){const e=this.events$.pipe((0,se.p)(t=>t.type===ft.ChangeAttributeValue),(0,E.T)(t=>{const n=t.payload.attributeName;return this._getDataSourceNamesAffectedByFilteringAttribute(n)}),(0,E.T)(t=>this._createRequestsForReloadingDataSources(t)),(0,P.M)(t=>{t.forEach(n=>{this._ngZone.runOutsideAngular(()=>this.processRequest(n))})}));this._subscriptions.add(e.subscribe())}_saveModel(e,t,n){const a="MODEL_SAVING";this.maskService.showMask(a,this);const r=this._getBoundDataSourceAttributeControls(e);return Object.keys(r).forEach(u=>this.formApiModel.controls[u].updateValueAndValidity()),this._saveModelAndGetDataSourceSaveResult(e,t).pipe((0,_a.j)(()=>this.maskService.hideMask(a,this)),(0,ue.W)(u=>{const p="string"==typeof u?u:u?.message||u?.errorInfo;return!0===n?.silent?(0,h.of)({success:!1,rowsAffected:0,errorInfo:p}):(0,h.throwError)(()=>new Error(p))}))}_saveModelAndGetDataSourceSaveResult(e,t){return(0,h.from)(this.isValid(e)).pipe((0,z.n)(n=>{if(!n){const u=this.injector.get(v.c$);return(0,h.of)({success:!1,rowsAffected:0,errorInfo:u.instant("HomePage.DialogMessages.RequiredFieldsAreNotFilled")})}const a=this.getModelByName(e),r=a.mode;return(0,h.forkJoin)({parameters:this._modelParametersBuilder.getModelParameters(this,t),dto:this._getDataSourceDto(e)}).pipe((0,Y.Z)(({parameters:u,dto:p})=>(0,h.forkJoin)({result:a.insertOrUpdate(p,u),dto:(0,h.of)(p)})),(0,P.M)(({result:u,dto:p})=>{const f=r===_.btv.Create||r===_.btv.Copy,S=this.dataSchemas[e],w=S.dataSourceConfig?.type===_.olg.EntityDataSource;if(u.success&&f&&w){const $=p[S.primaryAttributeName];this._loadedDataSources.add(e),this._lastEventLoadParameters.set(e,[{type:c.ModelParameterType.PrimaryColumnValue,value:$}])}}),(0,E.T)(({result:u})=>u))}))}_deleteModel(e,t,n){return(0,h.from)(this._modelParametersBuilder.getModelParameters(this,t,n?.payload)).pipe((0,Y.Z)(a=>this.getModelByName(e).delete(a)))}_initSubscriptions(){return this._measurePerformanceService.measure(`ViewModel.initSubscriptions.${this._injectionContext?.id}.parent.${!!this.parent}`,()=>(this._subscribeOnFilteringEvents(),this._subscribeModelsEvents(),this._subscribeOnChangeAttributes(),this._subscribeOnChangeRequests(),this._subscribeOnReloadDataEvents(),this._businessRulesSubscribeOnChangeAttributes(),(0,h.of)(null)))}_getDataSchemas(){if(this.models&&0!==this.models.length){const e=this.models.map(t=>t.getSchema().pipe((0,E.T)(n=>[t.name,n])));return(0,h.combineLatest)(e).pipe((0,Ne.s)(1),(0,E.T)(t=>Object.fromEntries(t)))}return(0,h.of)({})}_setAttributesDefaultValues(e){var t=this;return(0,h.from)((0,A.A)(function*(){let n=Object.entries(t.dataSchemas);e&&(n=n.filter(([a])=>a===e));for(const[a,r]of n){const u={};for(const p of r.attributes){const f=yield(0,h.lastValueFrom)(p.defaultValue,{defaultValue:null});if(!(0,_i.A)(f)){const S=t.getViewModelAttributePath(a,p.name);S&&(u[S]=f)}}t.setValue(u).subscribe()}})())}_generateDataSourcesInfo(){return this._dataSourcesInfos=Zi.getFromViewModelConfig(this.viewModelConfig,this.models),(0,h.of)(this._dataSourcesInfos)}_generateAttributesToDataSourceNameMap(e){const t=Array.from(e.values()).map(n=>this._getDataSourceAttributesMap(n)).flat();return this._initializeAttributesToDataSourceNameMap(t),(0,h.of)(this._attributesToDataSourceNameMap)}_initializeAttributesToDataSourceNameMap(e){this._attributesToDataSourceNameMap=new Map(e)}_getDataSourceAttributesMap(e){const n=e.getMappedAttributes().map(a=>[a,e.name]);return e.isCollection&&n.push([e.collectionViewModelAttributeName,e.name]),n}_checkDataSourceName(e){if(!e)throw new Error("Data source name is not provided")}_getDataSourceLoadType(e){return e?e||c.DataSourceLoadType.Reload:null}_getLoadTypeForDataSource(e,t){if(t===c.DataSourceLoadType.Load)return t;const n=e.getPagingConfig();return!t&&n?c.DataSourceLoadType.LoadNext:t}_loadDefaultSorting(e){this._measurePerformanceService.measure(`ViewModel.mergeCollectionModels.${this._injectionContext?.id}.parent.${!!this.parent}.dsNames.${e?.toString()}`,()=>{Array.from(this._dataSourcesInfos.entries()).filter(([t])=>!e?.length||e.includes(t)).map(([,t])=>t.getSortingConfig()).filter(t=>!!t?.default).map(t=>({[t.attributeName]:t.default})).forEach(t=>this.setValue(t,{silent:!0}).subscribe())})}_getDropdownPageSize(){var e=this;return(0,A.A)(function*(){if(!(0,Re.A)(e._dropdownPageSize))return e._dropdownPageSize;const t=yield e.sysSettingsService.getByCode(e._dropdownPageSizeSettingsCode);return e._dropdownPageSize={pagingConfig:{rowCount:t?.value,rowsOffset:0}},e._dropdownPageSize})()}_mergeCollectionModels(e,t){this._measurePerformanceService.measure(`ViewModel.mergeCollectionModels.${this._injectionContext?.id}.parent.${!!this.parent}.collection.${e}`,()=>{const n=this.attributes[e];this._featureValues.DisableBaseViewModelCollectionOptimization||n.length?n.merge(t):n.push(...t)})}_getEmbeddedModels(){const e=Object.entries(this.viewModelConfig?.attributes??{}).filter(([,a])=>a&&"embeddedModel"in a&&a.embeddedModel).map(([a,r])=>({attributeName:a,embeddedModel:r.embeddedModel}));if(0===e.length)return(0,h.of)([]);const t={},n=[];if(e.forEach(({attributeName:a,embeddedModel:{name:r,config:u}})=>{r?t[r]&&n.push(`Duplicated embedded model : ${r}.`):n.push(`Embedded model name is not provided for ${a}.`),t[r]=u}),n.length>0)throw new Error(n.join(" "));return this._modelGenerator.generate({dataSources:t},this.injector)}_concatModelsWithEmbedded(e=null){return this._getEmbeddedModels().pipe((0,E.T)(t=>{const n=[...e??[],...t??[]],a=n.map(r=>r.name).filter((r,u,p)=>p.indexOf(r)!==u);if(a.length>0)throw new Error(`Duplicated model names found : ${a.join(",")}.`);return n}))}_updateModelsMap(){const e=this.models.map(t=>[t.name,t]);this._modelsMap=new Map(e)}_subscribeModelsChanges(){this._subscriptions.add(this._models$.subscribe(()=>this._updateModelsMap()))}_subscribeModelsEvents(){this.models.forEach(e=>this._subscribeModelEvents(e))}_subscribeModelEvents(e){this._subscriptions.add(e.event$.pipe((0,Y.Z)(t=>this._waitDataDelay(t)),(0,Y.Z)(t=>this._ngZone.runOutsideAngular(()=>this.processRequest({type:"crt.HandleModelEventRequest",$context:this,scopes:this._eventScopes,modelName:e.name,modelEvent:t})),1)).subscribe())}initDependencies(){this.formBuilder=this.injector.get(ce.ok),this.resourceFinderService=this.injector.get(_.Qhy),this.validatorTypeResolver=this.injector.get(fl),this.maskService=this.injector.get(_.VMq),this.sysSettingsService=this.injector.get(c.SysSettingsService),this.crtControlStateAdapter=this.injector.get(Ci),this._businessRulesEngine=this.injector.get(Ft),this._businessRulesApplier=this.injector.get(Yr),this._featureValues=this.injector.get(_.G2Y),this._modelGenerator=this.injector.get(go),this._ngZone=this.injector.get(i.NgZone),this._translateService=this.injector.get(v.c$),this._scopeName=this.injector.get(hl,null),this._attributeGenerator=this.injector.get(io),this._attributeResourceGenerator=this.injector.get(ao),this._crtZoneService=this.injector.get(_.pge),this._viewEventZoneName=this.injector.get(gl,_.Rav.Root),this._modelParametersBuilder=this.injector.get(ea),this._context=this.injector.get(rp,null),this._crtInjectionContextService=this.injector.get(_.KaY),this._viewModelDataDelayerService=this.injector.get(Kh,null),this._isDesignTime=this.injector.get(_.w9C,null),this._measurePerformanceService=this.injector.get(_.gcc,null),this._measurePerformancePageLoadService=this.injector.get(_.b2z),this._appInfo=this.injector.get(_.zXC,null)}processRequest(e){return this.handlerChain.process(e)}_upsertModel(e,t){const n=[...this.models],a=n.findIndex(({name:r})=>r===e);-1===a?n.push(t):n.splice(a,1,t).forEach(r=>r.destroy()),this._subscribeModelEvents(t),this._models$.next(n)}_replaceDataSourceInfo(e,t){!e||!t||(this._loadedDataSources.has(e)&&this._loadedDataSources.delete(e),this._dataSourcesInfos.set(e,t),this._replaceAttributesToDataSourceNameMap(t))}_updateModels(e){e.forEach((t,n)=>{const a=this.getModelByName(n);a&&(this._markModelAsCollection(a,t),this._updateModelDependentAttributes(a,t))})}_markModelAsCollection(e,t){t.isCollection&&(e._isCollection=!0)}_updateModelDependentAttributes(e,t){const n=t.attributes.map(a=>({path:a.path,type:a.type}));e.updateDependentAttributes(n)}_initIsChangedAttribute(){this._systemAttributes.push(Ks),this.attributes[Ks]=!1;const e=this._models$.pipe((0,z.n)(t=>t?.length?(0,h.combineLatest)(t.map(n=>n._dirty$)):(0,h.of)([])),(0,E.T)(t=>t.some(n=>n)),(0,se.p)(()=>!this._viewModelAttributeChangeEventOptions.getOptions().preventStateChange),(0,Ca.F)()).subscribe(t=>{this._setSystemAttributeValue(Ks,t)});this._subscriptions.add(e)}_initHasUnsavedDataAttribute(){this._systemAttributes.push(Kr),this.attributes[Kr]=!1;const e=this.events$.pipe((0,se.p)(u=>u?.type===ft.ChangeAttributeValue&&u.payload?.attributeName===Ks),(0,E.T)(u=>u.payload.value)),t=(0,h.merge)(this.IsChanged,e),a=this._models$.pipe((0,E.T)(u=>u.map(p=>p._modeChanges$.pipe((0,E.T)(f=>({mode:f,name:p.name})),(0,Wi.Z)({mode:p.mode,name:p.name})))),(0,z.n)(u=>u?.length?(0,h.combineLatest)(u):(0,h.of)([]))).pipe((0,E.T)(u=>u.some(({mode:p,name:f})=>(p===_.btv.Create||p===_.btv.Copy)&&!this._isRootModelAndDependsOnPrimaryDSByOneToManyRelation(f)))),r=(0,h.combineLatest)([t,a]).pipe((0,E.T)(([u,p])=>!(!u&&!p)),(0,Ca.F)()).subscribe(u=>{this._setSystemAttributeValue(Kr,u)});this._subscriptions.add(r)}_initPrimaryModelModeAttribute(){const e=this._getPrimaryModelModeChanges();if(!e)return;this._systemAttributes.push(nu),this.attributes[nu]=this.getPrimaryModelMode();const t=e.pipe((0,Wi.Z)(this.getPrimaryModelMode())).subscribe(n=>this._setSystemAttributeValue(nu,n));this._subscriptions.add(t)}_initStateAttribute(){this._systemAttributes.push(ml),this.attributes[ml]=so.Active}_initBusinessRulesActivatedAttribute(){if(this._systemAttributes.push(iu),this.attributes[iu]=this._businessRulesAreActivated,this._businessRulesAreActivated)return;const e=this._businessRulesActivated$.pipe((0,se.p)(t=>!0===t)).subscribe(t=>{this._setSystemAttributeValue(iu,t)});this._subscriptions.add(e)}_initSystemAttributes(){var e=this;return(0,A.A)(function*(){yield e._measurePerformanceService.measureCallback(`ViewModel.initSystemAttributes.${e._injectionContext?.id}.parent.${!!e.parent}`,()=>(e._initIsChangedAttribute(),e._initPrimaryModelModeAttribute(),e._initHasUnsavedDataAttribute(),e._featureValues.DisableDelayingModelEvents||e._initStateAttribute(),e._initBusinessRulesActivatedAttribute(),Promise.resolve()))})()}_handleCircularDependencies(){const e=(0,_.IU9)(this._modelDependencies);if(e.hasCycles){const t=this._translateService.instant("BaseViewModel.WarningModelsWithCircularDependencies");this._showNotification({message:t,duration:1e4}),console.warn(t,e.cycledModelsNames)}this._conflictedModels=e?.cycledModelsNames}_forEachControl(e,t){Object.keys(e).forEach(a=>{if(this.attributes[a]instanceof sn){const r=this.attributes[a],u=e[a];r.forEach(p=>{const f=p.primaryAttributeName,S=p.attributes[f],w=u.find(O=>O[f]===S);w&&p._forEachControl(w,t)})}else if(this.attributes[a]instanceof ta)this.attributes[a]._forEachControl(e[a],t);else{const r=this.getControl(a);t(r.formControl)}})}_getModelsErrors(e){return(e??[]).filter(t=>!t.isCollectionItemModel&&t.hasErrors).map(t=>t.getLastError())}_notifyAboutModelsErrors(e){const t=this._getModelsErrors(e);if(t.length>0){const n=t.map(a=>a.message).join(" ");this._showNotification({message:n})}}_initFeaturesStates(){this._disableViewModelWaitingForAsyncTasks=this._featureValues.DisableViewModelWaitingForAsyncTasks,this._disableViewModelLoadUnblockingThread=this._featureValues.DisableViewModelLoadUnblockingThread,this._blockFieldsAffectedByBusinessRules=this._featureValues.BlockFieldsWhileRunBusinessRules,this._modelSynchronizationEnabled=!this._featureValues.ModelSynchronizationDisabled}_handleAsyncTasksCycle(e){let t=null;const a=Array.from(e).filter(r=>r.startsWith(ut.ProcessingAttributeChangeRequest));if(e.size&&a.length)return a.length&&(t=setTimeout(()=>{console.warn("[ViewModel]: Clearing executing tasks by exceeded timeout",a),a.forEach(r=>e.delete(r)),this._asyncTasksExecutingSubject.next(e)},100)),t}_getAffectedViewModelAttributes(e,t){return this.models.filter(a=>a.dataSchemaName===e).map(a=>a.name).flatMap(a=>this.getViewModelAttributePaths(a,t))}_toggleControlsAffectedByBusinessRules(e,t){this._blockFieldsAffectedByBusinessRules&&this._attributesAffectedByBusinessRules?.filter(a=>function Rh(o,e,t){if(e.scopeName===o){if(function Za(o,e){return!!e?.find(n=>!n.scopeId&&n.triggers.find(a=>a.name===o.name))}(e,t))return!1}else if(function Ah(o,e){return!!e?.find(n=>n.scopeName===o.scopeName&&n.triggers?.find(a=>a.name===o.name))}(e,t))return!1;return!0}(this._scopeName,a,t))?.forEach(a=>{a.scopeName===this._scopeName?this.getControl(a.name).toggle(e):this._getAffectedViewModelAttributes(a.scopeName,a.name).forEach(u=>{this.getControl(u).toggle(e)})})}_initAttributesAffectedByBusinessRules(){var e=this;return(0,A.A)(function*(){const n=e._prepareDataSourceNamesForBusinessRules().filter(r=>!!r).map(r=>e.getModelByName(r)).map(r=>({scopeId:r.name,scopeName:r.dataSchemaName,scopeType:wt.Model,modelType:r.getDataSource()?.type})),a={scopeName:e._scopeName,scopeType:wt.ViewModel,scopeId:e._scopeName};e._attributesAffectedByBusinessRules=yield e._businessRulesEngine.getAffectedAttributes([a,...n])})()}_initBusinessRules(){var e=this;return(0,A.A)(function*(){return e._measurePerformanceService.measureCallback(`ViewModel.initBusinessRules.${e._injectionContext?.id}.parent.${!!e.parent}`,(0,A.A)(function*(){e._businessRulesProcessingEnabled=!e._featureValues.BusinessRulesProcessingDisabled,yield e._initAttributesAffectedByBusinessRules(),e._businessRulesAreActivated=e._businessRulesProcessingEnabled&&!1!==e._businessRulesActive,e._businessRulesActivated$.next(e._businessRulesAreActivated)}))})()}_attributeGenerate$(e,t){return(0,h.of)(this._featureValues.UseDesignerHotSwapViewModel).pipe((0,z.n)(n=>n&&this._isDesignTime?this._initDataSourceValidators().pipe((0,P.M)(()=>{this._initSchemaValidators(e)}),(0,z.n)(()=>this._attributeGenerate(e,t))):this._attributeGenerate(e,t)))}_validateByDataSourceName(e){var t=this;return(0,A.A)(function*(){const n={},a=t._getBoundDataSourceAttributeControls(e);return yield Promise.all(Object.entries(a).map(([r,u])=>(u.markAsTouched(),u.updateValueAndValidity(),(0,h.lastValueFrom)(pp(u).pipe((0,P.M)(()=>{u.errors&&(n[r]=u.errors)})))))),n})()}_validateAll(){var e=this;return(0,A.A)(function*(){const t={};return e.formApiModel.markAllAsTouched(),e.formApiModel.updateValueAndValidity(),dp(e.formApiModel),yield(0,h.lastValueFrom)(pp(e.formApiModel).pipe((0,P.M)(()=>{Object.entries(e.formApiModel.controls).forEach(([a,r])=>{r.errors&&(t[a]=r.errors)})}))),t})()}runInitFlow(e=null){return this._concatModelsWithEmbedded(e).pipe(this._measurePerformanceService.measure$(`ViewModel.runInitFlow.${this._injectionContext?.id}.parent.${!!this.parent}`),(0,P.M)(t=>this._notifyAboutModelsErrors(t)),(0,P.M)(t=>this._models$.next(t)),(0,P.M)(()=>this._initFeaturesStates()),(0,Y.Z)(()=>this._generateDataSourcesInfo()),(0,P.M)(t=>this._updateModels(t)),(0,Y.Z)(t=>this._generateAttributesToDataSourceNameMap(t)),(0,Y.Z)(t=>this._getDataSchemas()),(0,P.M)(t=>this.dataSchemas=t),(0,Y.Z)(()=>this._initDataSourceValidators()),(0,z.n)(()=>this._initBusinessRules()),(0,P.M)(()=>{this._initSchemaValidators(this.viewModelConfig.attributes)}),(0,Y.Z)(()=>(0,h.forkJoin)([...this._generateResourceAttribute(),this._initSystemAttributes(),this._attributeGenerate(this.viewModelConfig.attributes),(0,h.of)(this),this._initSubscriptions()])),(0,Y.Z)(()=>this._generatePrimaryAttributes()),(0,P.M)(()=>this._loadDefaultSorting()),(0,Y.Z)(()=>this._runInitialBusinessRules()),(0,P.M)(()=>this._viewModelAttributeChangeEventOptions.reset())).pipe((0,z.n)(()=>(0,h.of)(this)))}get modelInitConfigs(){return this._modelsInitConfig}init(e,t){return this._primaryModelName=t?.primaryModelName,this._modelDependencies=t?.modelDependencies||{},this._modelsLoadingConfig=t?.modelsLoadingConfig||{},this._lastEventLoadParameters=new Map,t?.businessRulesActive||this.deactivateBusinessRules(),this._modelDependencies&&this._handleCircularDependencies(),this._ngZone.runOutsideAngular(()=>this.runInitFlow(e))}setValue(e,t){const n=[],a=[];for(const r of Object.keys(this._attributeConfigs))"viewModelConfig"in this._attributeConfigs[r]||"viewModelName"in this._attributeConfigs[r]?a.push(r):n.push(r);return this._executeWithOptions(()=>{this._measurePerformanceService.measure(`ViewModel.setValue.updateViewModelModelAttributes.${this._injectionContext?.id}.parent.${!!this.parent}.data.${Object.keys(e).toString()}`,()=>{for(const r in e)n.includes(r)&&(this[r]=e[r])})},t),(0,h.forkJoin)([...a.filter(r=>e&&e[r]).map(r=>{if(this.attributes[r]instanceof ta)return this.attributes[r].setValue(e[r],{silent:t?.silent,preventAttributeChangeRequest:t?.preventAttributeChangeRequest,preventStateChange:t?.preventStateChange,preventRunBusinessRules:t?.preventRunBusinessRules});{const u=this._attributeConfigs[r].viewModelConfig||this._attributeConfigs[r].viewModelName,p=!this._featureValues.DisableDataGridEditingMode,f=(e[r]||[]).map(S=>{const w=this.getBoundDataSourceName(r),$=this._getDataSourceInfoByViewModelAttributePath(r)?.isCollection&&this.getModelByName(w)?.createCollectionItemModel(_.btv.Update);return this.viewModelGenerator.generate({viewModelConfig:u,modelConfig:p&&$?{primaryDataSourceName:$.name}:void 0,models:p&&$?[$]:void 0,parentViewModel:this,businessRulesActive:!1},i.Injector.create({providers:[{provide:hl,useValue:null}],parent:this.injector})).pipe(this._measurePerformanceService.measure$(`ViewModel.setValue.generateViewModel.${this._injectionContext?.id}.parent.${!!this.parent}.modelName.${$?.name}`),(0,P.M)(te=>{w&&(te.dataSchemas[w]=this.dataSchemas[w])}),(0,P.M)(te=>{te.deactivateBusinessRules()}),(0,z.n)(te=>te.setValue(S,{silent:t?.silent,preventAttributeChangeRequest:t?.preventAttributeChangeRequest,preventStateChange:t?.preventStateChange,preventRunBusinessRules:t?.preventRunBusinessRules}).pipe((0,P.M)(()=>$&&$.setLoadedState()),(0,E.T)(()=>te))))});return!f.length&&t?.collectionLoadType===_.jjK.Reload&&this.attributes[r].clear(),0===f.length?(0,h.of)(null):(0,h.forkJoin)([...f]).pipe((0,P.M)(S=>{const w=this.getBoundDataSourceName(r);this.getModelByName(w)?.childrenChange(),this._executeWithOptions(()=>{t?.collectionLoadType!==_.jjK.Reload&&t?.collectionLoadType?this.getBoundDataSchema(r)?this._mergeCollectionModels(r,S):this.attributes[r].push(...S):this.attributes[r].reload(S)},t)}))}}),(0,h.of)(this)])}deactivateBusinessRules(){this._businessRulesActive=!1}activateBusinessRules(){const e=this._businessRulesActive;if(this._businessRulesActive=!0,e)return(0,h.of)(null);const t=this.models.filter(n=>n.isLoaded);if(t.length>0){const n={type:_.TEQ.ContextReady,name:null,scopeId:""};return(0,h.forkJoin)(t.map(a=>this._runBusinessRulesForModel(a,[],!0,[n]))).pipe((0,P.M)(()=>this._businessRulesAreActivated=this._businessRulesProcessingEnabled),(0,P.M)(()=>this._businessRulesActivated$.next(this._businessRulesAreActivated)))}}_getModelDependencies(e){return this._modelDependencies[e]??[]}_getIsAffectedByBusinessRules(e){if(!this._businessRulesProcessingEnabled)return Promise.resolve(!1);const t=e.name,n=this._attributesAffectedByBusinessRules;if(0===n.length||!t)return Promise.resolve(!1);const a=n.some(f=>f.name===t),r=this.getBoundDataSchemaByAttributePath(t),u=this.getBoundDataSchemaAttributeByAttributePath(t);if(!u)return Promise.resolve(a);const p=n.filter(f=>f.scopeName===r.name).some(f=>f.name===u.name);return Promise.resolve(p||a)}executeRequest(e){return e.scopes=e.scopes||this._eventScopes,this._crtZoneService.runInZone(this._viewEventZoneName,()=>this.processRequest(e))}getAttributeControl(e){let t=this.formApiModel;Xs(this,e).then(qi.A);for(const n of e.split("."))t=t.get(n);return t??new ce.MJ}loadLookupList(e,t=[],n){const a=e.control,r=e.items,u=this._getDataSourceInfoByViewModelAttributePath(r);if(u){const p=this._ngZone.runOutsideAngular(()=>this.processRequest({type:"crt.LoadDataRequest",$context:this,dataSourceName:u.name,parameters:t,config:{payload:n}}));Promise.resolve(p)}else{const p=this._getDataSourceInfoByViewModelAttributePath(a);if(p){const f=p.getDataSourceAttributePath(a);(0,h.forkJoin)([this._getDropdownPageSize(),this._modelParametersBuilder.getModelParameters(this,t,n)]).pipe((0,Y.Z)(([S,w])=>this.getModelByName(p.name).loadLookupList(f,w,S)),(0,E.T)(S=>Zi.getLookupListDataSourceInfo(r,{value:S.primaryAttributeName,displayValue:S.primaryDisplayAttributeName}).getModelDto(S.data)),(0,Y.Z)(S=>this.setValue(S,{silent:!0}))).subscribe()}}}load(...e){const t=this._disableViewModelLoadUnblockingThread?(0,h.of)(null):(0,h.timer)(0,h.asyncScheduler);if("string"==typeof e[0]){const a=e[0],r=e[1],u=e[2];this._checkDataSourceName(a);const p=this._getDataSourceLoadType(u?.loadType);return t.pipe((0,z.n)(()=>this._loadStaticModel(a,r,p,u?.payload,u?.useLastLoadParameters,u?.doNotUpdateLastLoadParameters).pipe(this._measurePerformanceService.measure$(`ViewModel.loadStaticModel.${this._injectionContext?.id}.parent.${!!this.parent}.datasourceName.${a}`))))}const n=e[0];return t.pipe((0,z.n)(()=>this._loadDynamicModel(n).pipe(this._measurePerformanceService.measure$(`ViewModel.loadDynamicModel.${this._injectionContext?.id}.parent.${!!this.parent}.model.${n.dataSourceName}`))))}setSorting(e,t){const a=this._dataSourcesInfos.get(e).getSortingConfig(),r=a&&a.attributeName;return r&&(this[r]=t),(0,h.of)(null)}create(e,t){return this._checkDataSourceName(e),this._createModelData(e,t)}copy(e,t,n){return this._checkDataSourceName(e),this._copyModelData(e,t,n)}loadDefaultValues(e){return this._setAttributesDefaultValues(e)}save(e,t,n){return(0,h.from)(this.waitAsyncTasksFinish()).pipe((0,z.n)(()=>(this._checkDataSourceName(e),this.getModelMode(e)===_.btv.Delete?this.delete(e,t,n):this._saveModel(e,t,n))))}delete(e,t,n){return this._checkDataSourceName(e),this._deleteModel(e,t,n)}resume(){return(0,h.of)(void 0)}pause(){return(0,h.of)(void 0)}destroy(){this._subscriptions.unsubscribe(),Array.from(this._collectionSubscription.values()).forEach(t=>t.unsubscribe()),this._collectionSubscription.clear(),this._crtControls.forEach(t=>{t.destroy()}),this.models?.forEach(t=>t.destroy()),this._crtControls.clear(),this._eventsSubject$.complete(),this._replayEvents$.complete(),this._modelLoaded$.complete();const e=[];for(const t of Object.values(this.attributes))t instanceof ta&&e.push(t.destroy()),t instanceof sn&&e.push((0,h.from)(t.destroy()));return(0,h.forkJoin)(e).pipe((0,Ys.U)(void 0),(0,E.T)(()=>{}),(0,_a.j)(()=>{this.parent||(this._crtInjectionContextService.removeContext(this._injectionContext?.id),(0,c.callOnContextDestroyHooks)(this._injectionContext),this._context=null,this._viewModelDataDelayerService?.destroy(),this._viewModelDataDelayerService=null),this._asyncTasksExecutingSubject.complete(),this._dataSourcesInfos.clear(),this.__destroyed=!0,this._destroySubject.next(),this._destroySubject.complete()}))}getBoundDataSourceName(e){if(this._attributesToDataSourceNameMap.has(e))return this._attributesToDataSourceNameMap.get(e);const t=Array.from(this._attributesToDataSourceNameMap.keys()).find(n=>n.includes(".")&&n.split(".")[1]===e);return this._attributesToDataSourceNameMap.has(t)?this._attributesToDataSourceNameMap.get(t):null}_getBoundDataSourceAttributeControls(e){return Object.fromEntries(Array.from(this._attributesToDataSourceNameMap.entries()).filter(([t,n])=>n===e).map(([t])=>[t,this.getAttributeControl(t)]))}getBoundDataSourceAttributeControls(e){return Object.values(this._getBoundDataSourceAttributeControls(e))}getBoundDataSourceNameByAttributePath(e){return this._attributesToDataSourceNameMap.has(e)?this._attributesToDataSourceNameMap.get(e):null}getBoundDataSchema(e){return this.dataSchemas[this.getBoundDataSourceName(e)]}getBoundDataSchemaByAttributePath(e){return this.dataSchemas[this.getBoundDataSourceNameByAttributePath(e)]??null}getBoundDataSchemaAttributeByAttributePath(e){const t=this.getBoundDataSourceNameByAttributePath(e),n=this.getBoundDataSchemaByAttributePath(e);if(!t||!n)return null;const r=this._getDataSourceInfoByViewModelAttributePath(e).getDataSourceAttributePath(e);return n.findAttributeByName(r)}getPrimaryModelName(){return Promise.resolve(this._primaryModelName)}getPrimaryDataSchema(){return this.getPrimaryModelName().then(e=>this.dataSchemas[e])}isValid(e){const t=this._waitAsyncValidation().pipe((0,E.T)(()=>e?this.getBoundDataSourceAttributeControls(e).every(n=>!n.invalid):this.formApiModel.valid));return(0,h.lastValueFrom)(t)}validate(e){return this._ngZone.run(()=>e?this._validateByDataSourceName(e):this._validateAll())}getViewModelAttributePath(e,t){const n=this._dataSourcesInfos.get(e);return this._getMappedAttributeName(n,t)}getViewModelAttributePaths(e,t){return this._dataSourcesInfos.get(e)?.getMappedAttributeNames(t)}getCollectionViewModelAttributePath(e){return this._dataSourcesInfos.get(e)?.collectionViewModelAttributeName}canDelete(e,t){var n=this;return(0,A.A)(function*(){return n.getModelByName(e).canDelete(t)})()}canSave(e,t){var n=this;return(0,A.A)(function*(){return n.getModelByName(e).canSave(t)})()}enableAttributeValidator(e,t){this.getControl(e).enableValidator(t)}disableAttributeValidator(e,t){this.getControl(e).disableValidator(t)}_hotSwap(e){return this._measurePerformanceService.measure(`ViewModel.generatePrimaryAttributes.${this._injectionContext?.id}.parent.${!!this.parent}.hotSwap`,()=>{const t=e?.attributes?.changed||[],n=(0,Re.A)(e.resources?.strings);if((0,Re.A)(t)&&n)return(0,h.of)(!1);n||(this.resources={strings:this._getChangedResourcesStrings(e.resources.strings)}),this.viewModelConfig=e.actualViewModelConfig;const a=Zi.getFromViewModelConfig(this.viewModelConfig),r=Object.fromEntries(t.map(O=>[O,this.viewModelConfig.attributes[O]])),u=e?.models?.changed??[],p=u.map(O=>O.name),f=this.models.filter(O=>O.isLoaded||O.isLoading).filter(O=>p.includes(O.name)).map(O=>O.name),S=u.map(O=>{const $=a.get(O.name);return this._upsertModel(O.name,O),this._replaceDataSourceInfo(O.name,$),this._addDataSchemaToDataSchemas(O)}),w=this._attributeGenerate$(r,{disableDefaultConfig:!0});return(0,h.forkJoin)([...S,w]).pipe(this._measurePerformanceService.measure$(`ViewModel.generatePrimaryAttributes.${this._injectionContext?.id}.parent.${!!this.parent}.hotSwap.forkJoin`),(0,z.n)(()=>this._reGenerateResourcesAttributes()),(0,P.M)(()=>this._loadDefaultSorting(p)),(0,P.M)(()=>this._requestReloadModels(f)),(0,E.T)(()=>!0))})}_setAttributeValue(e,t,n){this._executeWithOptions(()=>this[e]=t,n)}set(e,t,n){return this._setAttributeValue(e,t,n),Promise.resolve()}_markAsPristine(e){this._forEachControl(e,t=>t.markAsPristine())}getAttributeNameByViewItemName(e){return Object.keys(this._attributeConfigs).find(t=>this._attributeConfigs[t].viewItemName===e)}getControl(e){return this._crtControls.has(e)?this._crtControls.get(e):Qs.create({name:e,value:null,propertiesConfig:[]})}getAttributePropertyValue(...e){let t,n;if(2===e.length)t=e[0],n=e[1];else{if(1!==e.length)throw new Error("ArgumentException");{const r=e[0].split(":");t=r[0],n=r[1]}}return this.getControl(t).getPropertyValue(n)}setAttributePropertyValue(...e){let t,n,a;if(3===e.length)t=e[0],n=e[1],a=e[2];else{if(2!==e.length)throw new Error("ArgumentException");{const u=e[0].split(":");t=u[0],n=u[1],a=e[1]}}return this.getControl(t).setPropertyValue(n,a)}resetAttributePropertyValue(...e){let t,n;if(1===e.length)[t,n]=e[0].split(":");else{if(2!==e.length)throw new Error("ArgumentException");t=e[0],n=e[1]}this.getControl(t).getPropertyByName(n)?.resetValue()}getInvariabilityPropertyName(e){return this.getControl(e).getInvariabilityPropertyName()}setModelValues(e,t){return this.getModelByName(e).setValue(t)}_getBoundAttributesNames(e){const t=this.getBoundDataSourceNameByAttributePath(e);if(!t)return null;const n=this._dataSourcesInfos.get(t),a=n.attributesMap.get(e);return Array.from(n.attributesMap.entries()).filter(([r,u])=>u===a&&r!==e).map(([r])=>r)}_getAttributeDataValueTypeName(e){return this._attributeConfigs[e].dataValueTypeName}getDataSourceLoadParameters(e,t){const n=this._dataSourcesInfos.get(e);return n?this._modelParametersBuilder.getModelLoadParameters(this,n,[],c.DataSourceLoadType.Load,{modelLoadConfiguration:t}).then(([a,r,u])=>({parameters:a,options:{pagingConfig:r,sortingConfig:u}})):null}isDataSourceForCollection(e){return!!this._dataSourcesInfos.get(e)?.isCollection}_getDataSourceAttributeDataValueType(e){const t=this._getDataSourceInfoByViewModelAttributePath(e);let n=null;if(t){const a=t.getDataSourceAttributePath(e);a&&(n=this._getDataSourceAttributeSchema(t,a)?.dataValueType)}return n}_getModelNamesByLoadType(e){return Object.entries(this._modelsLoadingConfig).filter(([t,n])=>n.type===e).map(([t,n])=>t)}_reloadDependentModels(e,t=[]){const n=this._getDependentModelsForLoad(e,t);this._requestReloadModels(n)}_getDependentModelsForLoad(e,t=[]){const n=this._getDependentModelsNames(e.name,t),a=this._getChangedModelsNames(n).filter(r=>!ct(this.getModelByName(r)));return 0!==a.length&&this._showNotification({message:"BaseViewModel.RefreshModelDataConflict"}),n.filter(r=>!a.includes(r)).filter(r=>this._modelsRequestedToLoad.has(r)||ct(this.getModelByName(r)))}getIsDirty(e){return this.getControl(e).isDirty}getModelByName(e){return this._modelsMap.get(e)}getModelMode(e){return this.getModelByName(e)?.mode}getPrimaryModelMode(){return this.getModelMode(this._primaryModelName)}_getModelModeChanges(e){return this.getModelByName(e)?._modeChanges$}_getPrimaryModelModeChanges(){return this._getModelModeChanges(this._primaryModelName)}markModelFor(e,t){this.getModelByName(e)?.markFor(t)}markPrimaryModelFor(e){this.markModelFor(this._primaryModelName,e)}_setStateAttribute(e){this._setSystemAttributeValue(ml,e)}_onAsyncTaskStarted(e){if(this._disableViewModelWaitingForAsyncTasks)return;const t=this._asyncTasksExecutingSubject.value;t.add(e),this._asyncTasksExecutingSubject.next(t)}_onAsyncTaskFinished(e){if(this._disableViewModelWaitingForAsyncTasks)return;const t=this._asyncTasksExecutingSubject.value;t.delete(e),this._asyncTasksExecutingSubject.next(t)}waitAsyncTasksFinish(){let e;return(0,h.firstValueFrom)(this._asyncTasksExecutingSubject.pipe((0,P.M)(t=>{clearTimeout(e),e=this._handleAsyncTasksCycle(t)}),(0,se.p)(t=>0===t.size),(0,Ne.s)(1),(0,E.T)(()=>{})))}}class yo{static{this.\u0275fac=function(t){return new(t||yo)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:yo,factory:yo.\u0275fac})}}const ds=new i.InjectionToken("A factory of expression interpreter");let _o=class extends c.BaseRequestHandler{constructor(e){super(),this._ngZone=e}_validateRequest(e){const{$context:t,collectionAttributeName:n}=e;if(!t)throw new Error('The "$context" request property is not specified.');if(!n)throw new Error('The "collectionAttributeName" request property is not specified.');const a=t._attributeConfigs[n];if(!("viewModelConfig"in a)&&!("viewModelName"in a)||!a.isCollection)throw new Error(`There is no view model collection for the specified "${n}" attribute.`)}_canCancelPrimaryDataChanges(e,t){var n=this;return(0,A.A)(function*(){if(!t)return!0;const a=yield n._getPrimaryAttributeValue(e);return t.includes(a)})()}_getPrimaryAttributeValue(e){return(0,A.A)(function*(){const t=yield e.getPrimaryModelName(),n=yield e.getPrimaryDataSchema(),a=e.getViewModelAttributePath(t,n.primaryAttributeName);return e[a]})()}_resetFormApiModel(e){this._ngZone.run((0,A.A)(function*(){const t=yield e.getPrimaryModelName();e.getBoundDataSourceAttributeControls(t)?.forEach(a=>{ou(a)})}))}_cancelPrimaryDataChanges(e){var t=this;return(0,A.A)(function*(){try{const n={type:"crt.CancelPrimaryDataChangesRequest",$context:e};return yield t.handlerChain.process(n)}catch(n){return[{success:!1,errorInfo:n?.message}]}})()}handle(e){var t=this;return(0,A.A)(function*(){t._validateRequest(e);const{$context:n,collectionAttributeName:a,primaryAttributeValues:r}=e??{},u=yield n.attributes[a],p=u.getChangedItems(),f=[];for(const w of p)(yield t._canCancelPrimaryDataChanges(w,r))&&f.push(t._cancelPrimaryDataChanges(w));for(const w of u)p.includes(w)||t._resetFormApiModel(w);return(yield Promise.all(f)).flat()})()}};_o=(0,I.Cg)([(0,c.CrtRequestHandler)({type:"crt.CancelCollectionPrimaryDataHandler",requestType:"crt.CancelCollectionPrimaryDataChangesRequest"}),(0,I.Sn)("design:paramtypes",[i.NgZone])],_o);let Fl=class extends c.BaseRequestHandler{_validateRequest(e){const{$context:t}=e;if(!t)throw new Error('The "$context" request property is not specified.')}_cancelCurrentDataChanges(e){var t=this;return(0,A.A)(function*(){const n=e.getPrimaryModelMode();if(n===_.btv.Create){const a=yield e.getPrimaryModelName();return e.getModelByName(a).getDataSource().scope===c.DataSourceScope.ViewElement&&e.markPrimaryModelFor(_.btv.Delete),Promise.resolve({success:!0})}return n===_.btv.Delete&&e.markPrimaryModelFor(_.btv.Update),(yield e.IsChanged)?t._reloadCurrentDataChanges(e):Promise.resolve({success:!0})})()}_reloadCurrentDataChanges(e){var t=this;return(0,A.A)(function*(){try{return yield t._loadPrimaryData(e),yield t._onSuccessCancelPrimaryData(e),{success:!0}}catch(n){const a=n?.message;return t._onFailCancelPrimaryData(e,a),{success:!1,errorInfo:a}}})()}_loadPrimaryData(e){var t=this;return(0,A.A)(function*(){const n=yield e.getPrimaryModelName(),a=yield e.getPrimaryDataSchema(),r=e.getViewModelAttributePath(n,a.primaryAttributeName);yield t.handlerChain.process({type:"crt.LoadDataRequest",$context:e,dataSourceName:n,parameters:[{type:c.ModelParameterType.PrimaryColumnValue,value:r}]})})()}_onFailCancelPrimaryData(e,t){e.formApiModel.setErrors({cancel:{message:t}})}_onSuccessCancelPrimaryData(e){return(0,A.A)(function*(){const t=yield e.getPrimaryModelName();e.getBoundDataSourceAttributeControls(t)?.forEach(a=>{ou(a)})})()}_cancelNestedDataChanges(e){var t=this;return(0,A.A)(function*(){const n=[],a=Object.entries(e._attributeConfigs);for(const[u,p]of a)if("viewModelConfig"in p||"viewModelName"in p)if(p.isCollection)n.push(t._cancelPrimaryDataSafely(()=>t._cancelCollectionPrimaryDataChanges(e,u)));else{const f=yield e[u];n.push(t._cancelPrimaryDataSafely(()=>t._cancelPrimaryDataChanges(f)))}return(yield Promise.all(n)).flat()})()}_cancelPrimaryDataChanges(e){var t=this;return(0,A.A)(function*(){const n={type:"crt.CancelPrimaryDataChangesRequest",$context:e};return yield t.handlerChain.process(n)})()}_cancelCollectionPrimaryDataChanges(e,t){var n=this;return(0,A.A)(function*(){const a={type:"crt.CancelCollectionPrimaryDataChangesRequest",$context:e,collectionAttributeName:t};return yield n.handlerChain.process(a)})()}_cancelPrimaryDataSafely(e){return e().catch(t=>[{success:!1,errorInfo:t?.message}])}handle(e){var t=this;return(0,A.A)(function*(){t._validateRequest(e);const n=e.$context,a=yield t._cancelNestedDataChanges(n);return[yield t._cancelCurrentDataChanges(n),...a]})()}};Fl=(0,I.Cg)([(0,c.CrtRequestHandler)({type:"crt.CancelPrimaryDataChangesHandler",requestType:"crt.CancelPrimaryDataChangesRequest"})],Fl);let Iu=class extends c.BaseRequest{constructor(){super(...arguments),this.type="crt.ChangeViewModelAttributeValueRequest"}};Iu=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.ChangeViewModelAttributeValueRequest"})],Iu);let g=class extends c.BaseRequestHandler{handle(e){return(0,A.A)(function*(){const{$context:t,attributeName:n,attributeValue:a}=e||{};if(!t||!n)return;const r=t;return yield(0,h.lastValueFrom)(r.setValue({[n]:a}),{defaultValue:null}),a})()}};g=(0,I.Cg)([(0,c.CrtRequestHandler)({type:"crt.ChangeViewModelAttributeValueHandler",requestType:"crt.ChangeViewModelAttributeValueRequest"})],g);let s=class extends c.BaseRequestHandler{_validateRequest(e){const{$context:t,collectionAttributeName:n}=e;if(!t)throw new Error('The "$context" request property is not specified.');if(!n)throw new Error('The "collectionAttributeName" request property is not specified.');const a=t._attributeConfigs[n];if(!("viewModelConfig"in a)&&!("viewModelName"in a)||!a.isCollection)throw new Error(`There is no view model collection for the specified "${n}" attribute.`)}_canSavePrimaryData(e,t){var n=this;return(0,A.A)(function*(){if(!t)return!0;const a=yield n._getPrimaryAttributeValue(e);return t.includes(a)})()}_getPrimaryAttributeValue(e){return(0,A.A)(function*(){const t=yield e.getPrimaryModelName(),n=yield e.getPrimaryDataSchema(),a=e.getViewModelAttributePath(t,n.primaryAttributeName);return e[a]})()}_savePrimaryData(e){var t=this;return(0,A.A)(function*(){try{const n={type:"crt.SavePrimaryDataRequest",$context:e};return yield t.handlerChain.process(n)}catch(n){return[{success:!1,rowsAffected:0,errorInfo:n?.message}]}})()}handle(e){var t=this;return(0,A.A)(function*(){t._validateRequest(e);const{$context:n,collectionAttributeName:a,primaryAttributeValues:r}=e??{},p=n.attributes[a].getChangedItems(),f=[];for(const S of p)(yield t._canSavePrimaryData(S,r))&&f.push(yield t._savePrimaryData(S));return f.flat()})()}};function l(o,e){if(!o||!e)return h.EMPTY;const t=e.events$.pipe((0,se.p)(n=>n.type===ft.ChangeAttributeValue),(0,se.p)(n=>n.payload.attributeName===o),(0,z.n)(()=>e[o]));return new h.Observable(n=>(o in e?(0,h.merge)((0,h.from)(e[o]),t):t).subscribe(n))}s=(0,I.Cg)([(0,c.CrtRequestHandler)({type:"crt.SaveCollectionPrimaryDataHandler",requestType:"crt.SaveCollectionPrimaryDataRequest"})],s);class d{}class C extends d{getChanges(e,t,n){const a=e.map(r=>l(r,n));return(0,h.combineLatest)(a)}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(C)))(n||C)}})()}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:C,factory:C.\u0275fac})}}class D{constructor(e){this._converterExpressionInterpreter=e?.create("converter")}_getConverterFn(e,t,n){if(!e||!this._converterExpressionInterpreter)return(0,h.of)(n);const a={viewModel$:(0,h.of)(t),parent:null};return this._converterExpressionInterpreter.evaluate(e,a)}evaluate(e){const{args:t,expression:n,context:a,defaultEvaluationFn:r}=e;return this._getConverterFn(n,a,r).pipe((0,z.n)(u=>{const p=u(t);return p instanceof Promise?p:Promise.resolve(p)}))}static{this.\u0275fac=function(t){return new(t||D)(i.\u0275\u0275inject(ds,8))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:D,factory:D.\u0275fac})}}function N(o,e){if(!o||!e)return h.EMPTY;const t=new h.ReplaySubject(1),n=c.HandlerChainService.instance.subscribe(a=>{a.type===o&&t.next(a)},e);return e._subscriptions.add(n),t}class J extends d{constructor(e){super(),this._converterEvaluator=e}_accumulateRequests(e,t,n){const a=new h.BehaviorSubject([]),r=this._accumulateRequestsCombinations(e,a,t,n).subscribe();return new h.Observable(u=>(a.complete(),r.unsubscribe(),this._findAcceptableRequestsCombination(a.value,t,n).pipe((0,z.n)(p=>p?(0,h.merge)((0,h.of)(p),e):e)).subscribe(u)))}_accumulateRequestsCombinations(e,t,n,a){return e.pipe((0,E.T)(r=>[r,...t.value]),(0,z.n)(r=>r.length<100?(0,h.of)(r):this._findAcceptableRequestsCombination(r,n,a).pipe((0,E.T)(u=>u?[u]:[]))),(0,P.M)(r=>t.next(r)),(0,E.T)(()=>{}))}_findAcceptableRequestsCombination(e,t,n){if(!e.length)return(0,h.of)(null);const{filter:a,originalFrom:r}=t;return(0,h.from)(e).pipe((0,W.Ny)(u=>this._converterEvaluator.evaluate({args:Array.isArray(r)?u:u[0],context:n,expression:a})),(0,rt.$)(([,u])=>!!u,[null]),(0,E.T)(([u])=>u))}getChanges(e,t,n){const a=e.map(u=>N(u,n)),r=(0,h.combineLatest)(a);return t.filter?this._accumulateRequests(r,t,n):r}static{this.\u0275fac=function(t){return new(t||J)(i.\u0275\u0275inject(D))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:J,factory:J.\u0275fac})}}const pe=new i.InjectionToken("Represents a factory of calculated attribute source changes providers"),De=W.gX.create({token:pe,mappings:[{predicate:o=>o.every(e=>c.RequestRegistryService.requestsRegistrationInfos.has(e)),injectable:J}],default:{injectable:C}});class qe{}class Gn extends qe{constructor(e){super(),this._converterEvaluator=e}getTrigger(e,t){return this.getTriggerInternal(e,t).pipe((0,W.Ny)(n=>this._converterEvaluator.evaluate({args:n,expression:e?.filter,context:t,defaultEvaluationFn:()=>!0})),(0,se.p)(([,n])=>!!n),(0,E.T)(()=>{}))}}class ti extends Gn{constructor(e){super(e)}getTriggerInternal(e,t){return l(e?.attribute,t)}static{this.\u0275fac=function(t){return new(t||ti)(i.\u0275\u0275inject(D))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:ti,factory:ti.\u0275fac})}}class kt extends Gn{constructor(e){super(e)}getTriggerInternal(e,t){return new h.Observable(n=>N(e?.request,t).subscribe(n))}static{this.\u0275fac=function(t){return new(t||kt)(i.\u0275\u0275inject(D))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:kt,factory:kt.\u0275fac})}}const Tp=new i.InjectionToken("Represents a factory of calculated attribute trigger providers");function C_(o){return!!o&&"attribute"in o&&!!o.attribute}function b_(o){return!!o&&"request"in o&&!!o.request}function GS(o){const e=function kS(o){let e=[];return"string"==typeof o&&(e=[o]),Array.isArray(o)&&(e=o),e.map(t=>"string"==typeof t&&t?.trim()).filter(Boolean)}(o.from),t=function jS(o){return(o??[]).filter(e=>b_(e)||C_(e))}(o.triggers),{from:n,filter:a,converter:r,change:u,triggersOptions:p}=o;return 0===e.length&&0===t.length?(console.error(`Both 'from' and 'triggers' properties of calculated attribute cannot be empty: ${JSON.stringify(o)}.`),null):0!==e.length||r?function BS(o){const e=o.map(a=>c.RequestRegistryService.requestsRegistrationInfos.has(a)),t=e.includes(!0),n=e.includes(!1);return t&&n}(e)?(console.error(`Simultaneous specification of attributes and request in the "from" property of calculated attribute is not supported: ${JSON.stringify(o)}.`),null):(0===e.length&&a&&console.warn(`Filter is skipped in a calculated attribute if there are 'triggers' and no 'from': ${JSON.stringify(o)}.`),{from:e,originalFrom:n,filter:e.length?a:void 0,converter:r,triggers:t,triggersOptions:{debounce:p?.debounce??0},change:u}):(console.error(`Converter is required in a calculated attribute if there are 'triggers' and no 'from': ${JSON.stringify(o)}.`),null)}const US=W.gX.create({token:Tp,mappings:[{predicate:C_,injectable:ti},{predicate:b_,injectable:kt}]});var mg=b(54807),S_=b(63626);const zS=o=>!0,HS=o=>o;class kl{constructor(e,t,n,a){this._converterEvaluator=e,this._attributeSourcesChangesProviderFactory=t,this._attributeTriggerProviderFactory=n,this._measurePerformanceService=a}_createCalculateAttributeValueFn(e,t){const{viewModel:n,attribute:a,generateOptions:r}=e,{originalFrom:u,filter:p,converter:f}=t,S=Array.isArray(u);return w=>w.pipe((0,E.T)(O=>S?O:O?.[0]),(0,W.Ny)(O=>this._converterEvaluator.evaluate({args:O,expression:p,context:n,defaultEvaluationFn:zS})),(0,se.p)(([,O])=>!!O),(0,mg.H)(([O])=>this._converterEvaluator.evaluate({args:O,expression:f,context:n,defaultEvaluationFn:HS})),(0,E.T)(O=>{const $=n.attributes[a];return[(0,Z.A)(O),(0,Z.A)($)]}),(0,se.p)(([O,$])=>!(0,j.A)(O,$)),(0,P.M)(([O,$])=>{n.attributes[a]=O,r?.onChangeAttributeValue(a,O,$)}),(0,E.T)(([O])=>O))}_createGetAttributeValueFn(e){const{viewModel:t,attributeName:n,attributeConfig:a,calculateAttributeFn:r}=e;let u;const p=this._getAttributeSourcesStream(a,t);return()=>{const f=n in t.attributes;return u?f?(0,h.of)(t.attributes[n]):u:(u=r(p).pipe((0,Tt.t)({bufferSize:1,refCount:!0})),t._subscriptions.add(u.subscribe()),u)}}_getAttributeSourcesStream(e,t){const n=this._getAttributeTriggers(e,t),a=this._getAttributeSourcesChanges(e,t);if(!n)return a;const r=e.triggersOptions.debounce;return a?(0,h.merge)(n.pipe((0,tt.B)(r)),a).pipe((0,S_.E)(a),(0,E.T)(([,u])=>u)):n.pipe((0,Wi.Z)(void 0),(0,tt.B)(r))}_getAttributeTriggers(e,t){const{triggers:n}=e,a=n.map(r=>this._attributeTriggerProviderFactory.create(r)?.getTrigger(r,t)).filter(Boolean);return 0===a.length?null:(0,h.merge)(...a)}_getAttributeSourcesChanges(e,t){const{from:n}=e;return 0===n.length?null:this._attributeSourcesChangesProviderFactory.create(n).getChanges(n,e,t)}_defineCalculatedAttribute(e,t,n){Object.defineProperty(n,e,{get:()=>(0,h.firstValueFrom)(t(),{defaultValue:null}),configurable:!0})}defineAttribute(e){this._measurePerformanceService.measure(`CalculatedAttributeCreator.defineAttribute.${e.attribute}`,()=>{const{viewModel:t,attribute:n,attributeConfig:a}=e,r=GS(a);if(null===r)return;const u=this._createCalculateAttributeValueFn(e,r),p=this._createGetAttributeValueFn({attributeName:n,attributeConfig:r,calculateAttributeFn:u,viewModel:t});this._defineCalculatedAttribute(n,p,t)})}static{this.\u0275fac=function(t){return new(t||kl)(i.\u0275\u0275inject(D),i.\u0275\u0275inject(pe),i.\u0275\u0275inject(Tp),i.\u0275\u0275inject(_.gcc))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:kl,factory:kl.\u0275fac,providedIn:"root"})}}class Dp{static{this.\u0275fac=function(t){return new(t||Dp)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:Dp})}static{this.\u0275inj=i.\u0275\u0275defineInjector({providers:[kl,D,ti,kt,C,J,De,US]})}}class jl{constructor(e,t){this.ngZone=e,this.measurePerformanceService=t}innerDefineAttribute(e,t){this.measurePerformanceService.measure(`DefaultAttributeCreator.defineAttribute.${e.attribute}`,()=>{const n=e.viewModel,a=n.attributes,r=e.attribute,u=e.attributeConfig,p=e.control;cu.defineAsyncAttribute(n,r,u,()=>p.value,w=>{a[r]=w,this.ngZone.run(()=>{const O=n._viewModelAttributeChangeEventOptions?.getAsSilent();p.setValue(w,O),t?.call(this,w)})})})}defineAttribute(e){this.innerDefineAttribute(e)}static{this.\u0275fac=function(t){return new(t||jl)(i.\u0275\u0275inject(i.NgZone),i.\u0275\u0275inject(_.gcc))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:jl,factory:jl.\u0275fac,providedIn:"root"})}}class Tu extends jl{constructor(e,t){super(e,t)}defineAttribute(e){this.innerDefineAttribute(e,t=>{e?.viewModel?.setAttributePropertyValue(e?.attribute,"displayColor",t?.primaryColorValue)})}static{this.\u0275fac=function(t){return new(t||Tu)(i.\u0275\u0275inject(i.NgZone),i.\u0275\u0275inject(_.gcc))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Tu,factory:Tu.\u0275fac,providedIn:"root"})}}class Co extends fl{constructor(e){super(e)}getValidator(e,t){const n=c.ValidatorRegistry.items.get(e);if(!n)throw new Error(`Validator '${e}' was not registered`);if(n.lazy&&!n.instantiate)throw new Error(`Lazy module with ${e} validator is not loaded`);return n.instantiate(t?.injectionContext)}static{this.\u0275fac=function(t){return new(t||Co)(i.\u0275\u0275inject(i.Injector))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Co,factory:Co.\u0275fac})}}class Du{constructor(e){this.injector=e,this._schemaValidators=new Map}register(e,t){if((0,c.checkTypeNameFormat)(e.type,"ValidatorTypeName"),(0,c.checkCrtTypeNamePascalCase)(e.type),this._schemaValidators.has(e.type))throw new Error(`Error when register ${e.type} type. Element with this type has already exist`);this._schemaValidators.set(e.type,{instanceType:t,instanceConfig:e})}clearSchemaValidators(){this._schemaValidators.clear()}has(e){return this._schemaValidators.has(e)}get(e,t){const a=this._schemaValidators.get(e)?.instanceType;if(!a)throw new Error(`Validator '${e}' was not registered`);return new a(this.injector)}static{this.\u0275fac=function(t){return new(t||Du)(i.\u0275\u0275inject(i.Injector))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Du,factory:Du.\u0275fac})}}class Mp extends Co{constructor(e,t){super(t),this._schemaValidatorRegistry=e}getValidator(e,t){return this._schemaValidatorRegistry.has(e)?this._schemaValidatorRegistry.get(e,t?.validationParameters):super.getValidator(e,t)}static{this.\u0275fac=function(t){return new(t||Mp)(i.\u0275\u0275inject(Du),i.\u0275\u0275inject(i.Injector))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Mp,factory:Mp.\u0275fac})}}class $S extends vn{constructor(){super(...arguments),this.async=!1}validate(e){return null}}class wp extends Co{constructor(e){super(e)}getValidator(e,t){try{return super.getValidator(e,t)}catch{return new $S(this.injector)}}static{this.\u0275fac=function(t){return new(t||wp)(i.\u0275\u0275inject(i.Injector))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:wp,factory:wp.\u0275fac})}}class Bl{constructor(e){this._translateService=e}_getAttributesCaptions(e,t){const n=t.map(a=>{const r=e._attributeConfigs[a];return r&&r.caption?Promise.resolve(r.caption):e[_.c2Z][_.ckl.string][a].then(u=>u||a)});return Promise.all(n)}_getFirstValidationError(e){const t=Object.entries(e??{});if(0===t.length)return null;const n=t[0][1];return Object.entries(n)[0]}getValidationErrorMessage(e,t){var n=this;return(0,A.A)(function*(){const a=n._getFirstValidationError(t);if(!a)return"";const r=a[0],u=a[1].message,f=Object.entries(t).filter(([O,$])=>Object.keys($).includes(r)).map(([O,$])=>O),S=(yield n._getAttributesCaptions(e,f)).map(O=>`"${O}"`),w=1===f.length?n._translateService.instant("BaseViewModel.ValidationErrorMessageSingleErrorField"):n._translateService.instant("BaseViewModel.ValidationErrorMessageSeveralErrorFields");return He.Qf.format(w,S.join(", "),u)})()}static{this.\u0275fac=function(t){return new(t||Bl)(i.\u0275\u0275inject(v.c$))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Bl,factory:Bl.\u0275fac})}}class Mu{constructor(e){this._injector=e,this._subscription=new h.Subscription,this._handlerRegisterMap=new Map;for(const[,t]of c.InternalRequestHandlerRegistry.requestHandlersMap)this._registerHandler(t);this._subscription.add(c.InternalRequestHandlerRegistry.onAddRequestHandler((t,n)=>{this._registerHandler(n)})),this._subscription.add(c.InternalRequestHandlerRegistry.onRemoveRequestHandler((t,n)=>{this._removeHandler(n)}))}_registerHandler(e){const{type:t,scopes:n,requestType:a,createHandler:r,lazy:u,lazyModuleRef:p,source:f}=e.instanceConfig;this._handlerRegisterMap.has(t)?c.HandlerChainService.instance.update({type:t,createHandler:r}):this._handlerRegisterMap.set(t,c.HandlerChainService.instance.register({type:t,requestType:a,scopes:[...n??[]],source:f,createHandler:r,lazy:u,lazyModuleRef:p}))}_removeHandler(e){const{type:t}=e.instanceConfig;this._handlerRegisterMap.get(t)()}ngOnDestroy(){this._subscription.unsubscribe(),this._handlerRegisterMap.forEach(e=>{e()})}static{this.\u0275fac=function(t){return new(t||Mu)(i.\u0275\u0275inject(i.Injector))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Mu,factory:Mu.\u0275fac,providedIn:"root"})}}i.APP_INITIALIZER;class qS{create(e){const{validator:t,...n}=e,a=n.params.map(({name:r})=>r);return class extends vn{constructor(r){super(r),this.async=n.async}_getMessageFromParams(r){return{[n.type]:{message:r.message}}}_setParamsProxy(r){return new Proxy(r,{get(u,p){if(a.includes(p))return u[p];throw new Error(`Property ${p} is not defined in validator params config`)}})}_toPromise(r){let u;return u=r instanceof Promise?r:r instanceof h.Observable?(0,h.lastValueFrom)(r,{defaultValue:null}):Promise.resolve(r),u}validate(r,u){let p=u;u&&(p=this._setParamsProxy(u));const S=t(p)(r,p);return this.isAsync?this._toPromise(S).then(w=>w&&p?.message?this._getMessageFromParams(p):w):p?.message&&S?this._getMessageFromParams(p):S}}}}var hg=b(37169);class Ep{constructor(e,t){this._modelGenerator=e,this._measurePerformanceService=t}_getSchemaDiff(e,t){return{changedAttributesDiff:(0,hg.A)(e?.viewModelConfig??{},t?.viewModelConfig??{}),changedModelDiff:(0,hg.A)(e?.modelConfig??{},t?.modelConfig??{}),changedResourcesDiff:(0,hg.A)(e?.resources??{},t?.resources??{})}}diff(e,t,n){return this._measurePerformanceService.measure("ViewModelDiffPatch.diff",()=>{const{changedAttributesDiff:a,changedModelDiff:r,changedResourcesDiff:u}=this._getSchemaDiff(e,t);if((0,Re.A)(a)&&(0,Re.A)(r))return(0,h.of)({actualViewModelConfig:t?.viewModelConfig,resources:u});a.attributes=a.attributes||{},r.dataSources=r.dataSources||{};let p=Object.keys(a.attributes);const f=Object.keys(r.dataSources),S=Object.keys(t.viewModelConfig?.attributes??{}).filter(O=>{const $=t.viewModelConfig.attributes[O]??{};if((0,_.o7N)($))return f.includes($.modelConfig?.path)||p.includes($.modelConfig?.sortingConfig?.attributeName)});p=(0,Un.A)([...p,...S]);const w=p.map(O=>{const $=t.viewModelConfig.attributes[O]??{};if((0,_.o7N)($))return $?.modelConfig?.path?.split(".")[0]}).filter(Boolean);return this._modelGenerator.generate(t.modelConfig,n).pipe(this._measurePerformanceService.measure$("ViewModelDiffPatch.diff.modelGenerate"),(0,E.T)(O=>({actualViewModelConfig:t?.viewModelConfig,attributes:{changed:p},resources:u,models:{changed:O.filter($=>w.includes($.name))}})))})}static{this.\u0275fac=function(t){return new(t||Ep)(i.\u0275\u0275inject(go),i.\u0275\u0275inject(_.gcc))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Ep,factory:Ep.\u0275fac})}}class wu{constructor(e){this._messageChannelService=e,this._subscribeEntityChanged()}get liveEditingEvent$(){return this._messageChannelService.messageEvent$.pipe((0,se.p)(e=>"LiveEditingNotifier"===e.header.sender),(0,E.T)(e=>{const t=e.body;return{entitySchemaName:t.EntitySchemaName,columnNames:t.ColumnNames,primaryColumnValue:t.PrimaryColumnValue,eventType:this._getLiveEditingEventType(t.EventType),primaryColumnName:t.PrimaryColumnName,connectedLiveSchemaColumns:t.ConnectedLiveSchemaColumns}}))}_subscribeEntityChanged(){this.liveEditingEvent$.subscribe(e=>{this._notifyModel(e)})}_notifyModel(e){mo.instance.notify({modelId:(0,c.generateGuid)(),dataSchemaName:e.entitySchemaName,type:e.eventType,payload:{primaryAttributesValues:[[{name:e.primaryColumnName,value:e.primaryColumnValue}]],changedAttributes:e.columnNames}})}_getLiveEditingEventType(e){switch(e){case 0:return qt.Create;case 1:return qt.Update;case 2:return qt.Delete}}static{this.\u0275fac=function(t){return new(t||wu)(i.\u0275\u0275inject(_.Awl))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:wu,factory:wu.\u0275fac,providedIn:"root"})}}i.APP_INITIALIZER;class Gl{constructor(){}_getDataSchema(e,t){return e.dataSchemas[t]}_getRelationData(e,t){const n=t.attributePath;if(1!==n.split(".").length)throw new Error(["Transition relation is not allowed.",`Model name: '${e}', attribute path: '${n}'`].join(" "));const a=t.relationPath.split(".");if(2!==a.length)throw new Error(["Transition relation is not allowed.",`Model name: '${e}', relation path: '${t.relationPath}'`].join(" "));const[r,u]=a;return{modelAttributeName:n,dependOnModelName:r,dependOnModelAttributeName:u}}_mergeRelationTypes(e,t){return e===Ze.None?t:t===Ze.None?e:e===Ze.CircularDependency||t===Ze.CircularDependency?Ze.CircularDependency:e===t?e:e===Ze.OneToMany&&t===Ze.ManyToOne||e===Ze.ManyToOne&&t===Ze.OneToMany?Ze.CircularDependency:e===Ze.ManyToMany||t===Ze.ManyToMany?Ze.ManyToMany:void 0}_saveBefore(e,t,n){const a=n.find(r=>r.name===t);a.dependsOn.includes(e)||a.dependsOn.push(e)}_saveAfter(e,t,n){const a=n.find(r=>r.name===e);a.dependsOn.includes(t)||a.dependsOn.push(t)}_sort(e,t){const n=t.map(a=>({name:a,dependsOn:[]}));return t.forEach(a=>{const r=e._getModelDependencies(a);if(!r||0===r.length)return;const u=new Map;for(const p of r){const{modelAttributeName:f,dependOnModelName:S,dependOnModelAttributeName:w}=this._getRelationData(a,p),O=hp(this._getDataSchema(e,a),f,this._getDataSchema(e,S),w);let $=u.get(S)??Ze.None;$=this._mergeRelationTypes($,O),u.set(S,$)}u.forEach((p,f)=>{switch(p){case Ze.ManyToOne:this._saveBefore(a,f,n);break;case Ze.OneToMany:this._saveAfter(a,f,n);break;case Ze.ManyToMany:throw new Error("Many-to-many relation is not supported");case Ze.CircularDependency:throw new Error("Circular dependency detected")}})}),(0,W.Bo)(n)}sort(e,t){return t.every(a=>e.getModelMode(a)===_.btv.Update)?t:this._sort(e,t).flat()}static{this.\u0275fac=function(t){return new(t||Gl)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Gl,factory:Gl.\u0275fac})}}let gg=class extends c.BaseRequestHandler{constructor(e,t,n){super(),this._baseViewModelProcessValidationResultService=e,this.modelSaveOrderSorterService=t,this._featureValues=n}_validateRequest(e){const{$context:t}=e;if(!t)throw new Error('The "$context" request property is not specified.')}_saveModel(e,t){var n=this;return(0,A.A)(function*(){const a=e.dataSchemas[t],r=e.getViewModelAttributePath(t,a.primaryAttributeName);try{const u=yield n._saveData(e,t,r);return u.success&&n._onSuccessSaveRootData(e,t,u),u}catch(u){const p=u?.message;return n._createFailedSaveResult(p)}})()}_validateModel(e,t){var n=this;return(0,A.A)(function*(){if(!(yield e.isValid(t))){const r=yield e.validate(t),u=yield n._baseViewModelProcessValidationResultService.getValidationErrorMessage(e,r);return n._createFailedSaveResult(u)}return null})()}_getModels(e){var t=this;return(0,A.A)(function*(){const n=yield e.getPrimaryModelName();let a=function eg(o){const e=[];return o?._modelsMap.forEach((t,n)=>{ct(t)&&e.push(n)}),e}(e);return a=a.filter(r=>e.getModelMode(r)!==_.btv.Init),n&&!a.includes(n)&&a.unshift(n),t._featureValues.AllowMultipleDataSources&&(a=t.modelSaveOrderSorterService.sort(e,a)),a})()}_canSaveDataResult(e,t){var n=this;return(0,A.A)(function*(){const a=e.dataSchemas[t],r=e.getViewModelAttributePath(t,a.primaryAttributeName),u=yield n._canSaveData(e,t,r);if(u&&!u?.result)return n._createFailedSaveResult(u.message)})()}_checkPdsGroupValidationResults(e,t){var n=this;return(0,A.A)(function*(){const a=yield Promise.all(t.map(u=>n._validateModel(e,u)));if(a.some(u=>u&&!u.success))return a;const r=yield Promise.all(t.map(u=>n._canSaveDataResult(e,u)));return r.some(u=>u&&!u.success)?r:[]})()}_saveModelChanges(e,t){var n=this;return(0,A.A)(function*(){let a;return(yield n._shouldSkipUnchangedDependentPageModel(e,t))||(a=yield n._saveModel(e,t)),a})()}_saveRootData(e){var t=this;return(0,A.A)(function*(){const n=yield t._getModels(e),a=yield e.getPrimaryModelName();let r=[a,...n.filter(S=>Cl(e._getModelDependencies(S),a))];t._featureValues.AllowMultipleDataSources||(r=[]);const u=n.filter(S=>!r.includes(S));let p=yield t._checkPdsGroupValidationResults(e,r);if(!p.length)for(const S of r)p.push(yield t._saveModelChanges(e,S));for(const S of u){const w=yield t._validateModel(e,S),O=yield t._canSaveDataResult(e,S);w||O?p.push(w||O):p.push(yield t._saveModelChanges(e,S))}p=p.filter(Boolean);const f=p.filter(S=>!S.success).map(S=>S.errorInfo);return f.length&&t._onFailSaveRootData(e,f.join(", ")),p})()}_shouldSkipUnchangedDependentPageModel(e,t){var n=this;return(0,A.A)(function*(){if(!n._featureValues.AllowMultipleDataSources)return!1;const a=e.getModelByName(t);if(a?.getDataSource()?.isForceUpdateUnchangedData)return!1;const u=yield e.getPrimaryModelName(),p=Cl(e._getModelDependencies(t),u),f=a?._isChanged;return p&&!f})()}_canSaveData(e,t,n){return(0,A.A)(function*(){const r={primaryColumnValue:yield e[n]};return e.canSave(t,r)})()}_saveData(e,t,n){var a=this;return(0,A.A)(function*(){const r={type:"crt.SaveDataRequest",$context:e,parameters:[{type:c.ModelParameterType.PrimaryColumnValue,value:n}],dataSourceName:t};return yield a.handlerChain.process(r)})()}_onFailSaveRootData(e,t){e.formApiModel.setErrors({save:{message:t}})}_updateAttributesOnSaveResult(e,t,n){if(n?.primaryAttributes?.length)for(const a of n.primaryAttributes)for(const[r,u]of Object.entries(a)){const p=e.getViewModelAttributePath(t,r);e[p]=u}}_onSuccessSaveRootData(e,t,n){this._updateAttributesOnSaveResult(e,t,n),e.getBoundDataSourceAttributeControls(t)?.forEach(r=>{ou(r)})}_saveNestedData(e,t){var n=this;return(0,A.A)(function*(){const a=[],r=Object.entries(e._attributeConfigs);for(const[p,f]of r)if("viewModelConfig"in f||"viewModelName"in f)if(f.isCollection)a.push(n._saveDataSafely(()=>n._saveInnerViewModelCollection(e,p,t)));else{const S=yield e[p];a.push(n._saveDataSafely(()=>n._saveInnerViewModel(S)))}return(yield Promise.all(a)).flat()})()}_saveInnerViewModel(e){var t=this;return(0,A.A)(function*(){const n={type:"crt.SavePrimaryDataRequest",$context:e};return yield t.handlerChain.process(n)})()}_saveInnerViewModelCollection(e,t,n){var a=this;return(0,A.A)(function*(){const r={type:"crt.SaveCollectionPrimaryDataRequest",$context:e,collectionAttributeName:t,scopes:n};return yield a.handlerChain.process(r)})()}_saveDataSafely(e){return e().catch(t=>[this._createFailedSaveResult(t?.message)])}_createFailedSaveResult(e){return{success:!1,rowsAffected:0,errorInfo:e}}handle(e){var t=this;return(0,A.A)(function*(){t._validateRequest(e);const n=e.$context,a=yield t._saveRootData(n);if(a.some(u=>!u.success))return a;const r=yield t._saveNestedData(n,e.scopes);return[...a,...r]})()}};gg=(0,I.Cg)([(0,c.CrtRequestHandler)({type:"crt.SavePrimaryDataHandler",requestType:"crt.SavePrimaryDataRequest"}),(0,I.Qj)(2,(0,i.Inject)(_.G2Y)),(0,I.Qj)(2,(0,c.CrtInject)(_.G2Y)),(0,I.Sn)("design:paramtypes",[Bl,Gl,_.xRQ])],gg);let v_=class extends c.BaseRequest{};v_=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.LoadLookupListRequest"})],v_);let fg=class extends c.BaseRequestHandler{handle(e){const t={control:e.valueAttributeName,items:e.itemsAttributeName},n=e.filterValue??null,a=[{type:c.ModelParameterType.PrimaryDisplayValueFilter,value:"@requestPayload.lookupFilterValue"},...e.parameters||[]],r={...e.payload,lookupFilterValue:n};return e.$context.loadLookupList(t,a,r),Promise.resolve()}};fg=(0,I.Cg)([(0,c.CrtRequestHandler)({type:"crt.LoadLookupListHandler",requestType:"crt.LoadLookupListRequest"})],fg);let yg=class extends c.BaseRequestHandler{constructor(e,t){super(),this._translateService=e,this._featureValues=t}_isDynamicDS(e){const t=e.config||{};return!(!t.dataSourceConfig||!t.attributeName)}_loadDynamicDS(e){const t=e.$context,n=e.config;return(0,h.lastValueFrom)(t.load(n),{defaultValue:null})}_load(e){if(!e.dataSourceName)return;const t=e.$context;let n=e.parameters;n=this._addPrimaryDisplayValueFilterIfNeed(e,n);const a=e.config;return this._trySubscribeToLoadedData(e),(0,h.lastValueFrom)(t.load(e.dataSourceName,n,a),{defaultValue:null})}_trySubscribeToLoadedData(e){if(this._featureValues.DisableShowSuccessMessageAfterLoadDataRequest||!e?.showSuccessMessage)return;const t=e.$context,n=t._modelsMap.get(e.dataSourceName),a=n.affectedAttributes.map(S=>S.path),u=[...t._getDependentModelsForLoad(n,a),e.dataSourceName],p=new Set,f=t._modelLoaded$.subscribe(S=>{if(u.includes(S)&&p.add(S),p.size===u.length){f.unsubscribe();const w={$context:e.$context,type:"crt.NotificationRequest",message:this._translateService.instant("LoadDataRequest.SuccessMessage")};this.handlerChain.process(w)}})}_addPrimaryDisplayValueFilterIfNeed(e,t){return e.primaryDisplayFilterValue?(t=t||[],[...t,{type:c.ModelParameterType.PrimaryDisplayValueFilter,value:e.primaryDisplayFilterValue}]):t}handle(e){if(!e.$context)throw new Error("Property '$context' should be specified");return this._isDynamicDS(e)?this._loadDynamicDS(e):this._load(e)}};yg=(0,I.Cg)([(0,c.CrtRequestHandler)({type:"crt.LoadDataSourceHandler",requestType:"crt.LoadDataRequest"}),(0,I.Qj)(1,(0,i.Inject)(_.G2Y)),(0,I.Qj)(1,(0,c.CrtInject)(_.G2Y)),(0,I.Sn)("design:paramtypes",[v.c$,_.xRQ])],yg);let I_=class extends c.DataRequest{};I_=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.LoadDefaultValuesRequest"})],I_);let _g=class extends c.BaseRequestHandler{handle(e){const t=e.$context;return(0,h.lastValueFrom)(t.loadDefaultValues(e.dataSourceName),{defaultValue:null})}};_g=(0,I.Cg)([(0,c.CrtRequestHandler)({type:"crt.LoadDefaultValuesHandler",requestType:"crt.LoadDefaultValuesRequest"})],_g);let T_=class extends c.DataRequest{};T_=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.SaveDataRequest"})],T_);let Cg=class extends c.BaseRequestHandler{handle(e){const t=e.$context,{dataSourceName:n,options:a,parameters:r}=e,u=t.save(n,r,a);return(0,h.lastValueFrom)(u,{defaultValue:null})}};Cg=(0,I.Cg)([(0,c.CrtRequestHandler)({type:"crt.SaveDataHandler",requestType:"crt.SaveDataRequest"})],Cg);let D_=class extends c.DataRequest{};D_=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.DeleteDataRequest"})],D_);let bg=class extends c.BaseRequestHandler{handle(e){const t=e.$context;return(0,h.lastValueFrom)(t.delete(e.dataSourceName,e.parameters,e.config),{defaultValue:null})}};bg=(0,I.Cg)([(0,c.CrtRequestHandler)({type:"crt.DeleteDataHandler",requestType:"crt.DeleteDataRequest"})],bg);let M_=class extends c.DataRequest{};M_=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.CopyDataRequest"})],M_);let Sg=class extends c.BaseRequestHandler{handle(e){const t=e.$context,{dataSourceName:n,recordId:a,copiedValues:r}=e;return(0,h.lastValueFrom)(t.copy(n,a,r),{defaultValue:null})}};Sg=(0,I.Cg)([(0,c.CrtRequestHandler)({type:"crt.CopyDataHandler",requestType:"crt.CopyDataRequest"})],Sg);let w_=class extends c.DataRequest{};w_=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.SortDataRequest"})],w_);let vg=class extends c.BaseRequestHandler{handle(e){const t=e.$context;return(0,h.lastValueFrom)(t.setSorting(e.dataSourceName,e.config),{defaultValue:null})}};vg=(0,I.Cg)([(0,c.CrtRequestHandler)({type:"crt.SortDataHandler",requestType:"crt.SortDataRequest"})],vg);let E_=class extends c.BaseRequestHandler{handle(e){var t=this;return(0,A.A)(function*(){const n=e.$context,a=n._injectionContext;n._injectionContext?.id&&t.handlerChain.clearContextedHandlersCache(a.id),yield t.next?.handle(e)})()}};E_=(0,I.Cg)([(0,c.CrtRequestHandler)({requestType:"crt.HandleViewModelDestroyRequest",type:"crt.ClearContextedHandlersCacheHandler"})],E_);let x_=class extends c.DataRequest{};x_=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.GetDataSourceLoadFiltersRequest"})],x_);let Ig=class extends c.BaseRequestHandler{constructor(e){super(),this._entitySchemaQueryBuilder=e}handle(e){var t=this;return(0,A.A)(function*(){const n=e.$context;if(!n)throw new Error("Property '$context' should be specified");const a=e.dataSourceName;if(!a)throw new Error("Property 'dataSourceName' should be specified");const r=n.dataSchemas[a];if(!r)throw new Error(`Schema for data source with name ${a} not found`);const u=yield n.getDataSourceLoadParameters(a);return u.parameters.some(p=>p.type===c.ModelParameterType.Never)?null:(0,h.lastValueFrom)(t._entitySchemaQueryBuilder.build(r,[],u.parameters).pipe((0,h.map)(p=>p.getMetadata().filters)))})()}};Ig=(0,I.Cg)([(0,c.CrtRequestHandler)({type:"crt.GetDataSourceLoadFiltersHandler",requestType:"crt.GetDataSourceLoadFiltersRequest"}),(0,I.Sn)("design:paramtypes",[Ta])],Ig);class Ul{selectData(){return null}static{this.\u0275fac=function(t){return new(t||Ul)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Ul,factory:Ul.\u0275fac,providedIn:"root"})}}class zl extends Ul{constructor(){super(...arguments),this._elon={FirstName:"Elon",Account:{Name:"SpaceX",Ships:[{Id:"Falcon 9"},{Id:"Falcon Heavy"}],Employee:{Name:"Mask",Age:49}},Employees:["Elon"]}}selectData(){return(0,h.of)(this._elon).pipe((0,Li.c)(50))}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(zl)))(n||zl)}})()}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:zl,factory:zl.\u0275fac,providedIn:"root"})}}let Tg=class{convert(e,t){const n={type:"crt.ExecuteExpressionRequest",$context:t,metadata:e};return c.HandlerChainService.instance.process(n).then(a=>a).catch(a=>({success:!1,result:null,errorInfo:a}))}};Tg=(0,I.Cg)([(0,c.CrtConverter)({type:"crt.ToExpressionResult"})],Tg);class Hl{_getDataValueTypeName(e){switch(e){case c.DataValueType.FLOAT1:return"Float1";case c.DataValueType.FLOAT2:return"Float2";case c.DataValueType.FLOAT3:return"Float3";case c.DataValueType.FLOAT4:return"Float4";case c.DataValueType.FLOAT8:return"Float8";case c.DataValueType.CUSTOM_OBJECT:return"Object";case c.DataValueType.COMPOSITE_OBJECT_LIST:return"CompositeObjectList";default:return c.DataValueType[e]}}_getRequestParameterValueDto(e){const t=e.value;if(Array.isArray(t)){const n=t[0];return Array.isArray(n)?t.map(a=>a.map(r=>({...r,value:this._encodeValue(r.value,r.dataValueType),dataValueType:this._getDataValueTypeName(r.dataValueType)}))):t.map(a=>({...a,value:this._encodeValue(a.value,a.dataValueType),dataValueType:this._getDataValueTypeName(a.dataValueType)}))}return this._encodeValue(t,e.dataValueType)}_encodeValue(e,t){return[c.DataValueType.Date,c.DataValueType.Time,c.DataValueType.DateTime].includes(t)?(0,c.toLocalISOString)(e):e}decodeValue(e,t){return[c.DataValueType.Date,c.DataValueType.Time,c.DataValueType.DateTime].includes(t)?new Date(e):e}getExecutionMetadata(e){const t=e.parameters.map(a=>({...a,dataValueType:this._getDataValueTypeName(a.dataValueType),value:this._getRequestParameterValueDto(a)})),n=e.expressionVariables.map(a=>({...a,dataValueType:this._getDataValueTypeName(a.dataValueType)}));return JSON.stringify({...e,parameters:t,expressionVariables:n,resultDataValueType:this._getDataValueTypeName(e.resultDataValueType)})}static{this.\u0275fac=function(t){return new(t||Hl)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Hl,factory:Hl.\u0275fac,providedIn:"root"})}}class $l{constructor(e,t,n,a){this._httpClient=e,this._featureService=t,this._sysSettingsService=n,this._expressionMetadataAdapter=a,this._expressionEngineEndpoint="ServiceModel/ExpressionService.svc/Execute",this._expressionsEngineEndpoint="ServiceModel/ExpressionService.svc/ExecuteMany",this._expressionEngineValidationEndpoint="ServiceModel/ExpressionService.svc/Validate",this._defaultDebounceTime=200,this._defaultBundleCount=20,this._debounceTimeSysSettingName="ExpressionEngineDebounceTime",this._bundleCountSysSettingName="ExpressionEngineBundleCount",this._requests=new h.Subject}_executeImmediate(e){const t={metadata:e};return(0,h.lastValueFrom)(this._httpClient.post(this._expressionEngineEndpoint,t,{headers:new F.HttpHeaders({"Content-Type":"application/json"})}))}_getBundleSettings(){var e=this;return(0,A.A)(function*(){const{values:t}=yield e._sysSettingsService.getByCodes([e._debounceTimeSysSettingName,e._bundleCountSysSettingName]);return{executionDebounceTime:t[e._debounceTimeSysSettingName]?.value||e._defaultDebounceTime,bundleCount:t[e._bundleCountSysSettingName]?.value||e._defaultBundleCount}})()}_prepareDebouncedResponsesStream(){var e=this;return(0,A.A)(function*(){const{executionDebounceTime:t,bundleCount:n}=yield e._getBundleSettings();if(e._responses)return;const a=new h.BehaviorSubject(0),r=(0,h.merge)(a.pipe((0,h.filter)(u=>u>=n)),e._requests.pipe((0,h.tap)(()=>{a.next(a.value+1)}),(0,h.debounceTime)(t)));e._responses=e._requests.pipe((0,h.buffer)(r),(0,h.filter)(({length:u})=>!!u),(0,h.mergeMap)(u=>(a.next(0),e._httpClient.post(e._expressionsEngineEndpoint,u,{headers:new F.HttpHeaders({"Content-Type":"application/json"})}))),(0,h.share)())})()}_executeThrottled(e){var t=this;return(0,A.A)(function*(){yield t._prepareDebouncedResponsesStream();const n=(0,c.generateGuid)(),a=(0,h.firstValueFrom)(t._responses.pipe((0,h.filter)(r=>r.some(u=>u.executionId===n)),(0,h.map)(r=>r.find(u=>u.executionId===n).result)));return t._requests.next({executionId:n,metadata:e}),a})()}safeExecute(e,t={immediate:!1}){var n=this;return(0,A.A)(function*(){try{return yield n.execute(e,t)}catch(a){return{success:!1,errorInfo:a instanceof F.HttpErrorResponse?{errorCode:a.name,message:a.message,stackTrace:a.url}:a,result:null}}})()}execute(e,t={immediate:!1}){var n=this;return(0,A.A)(function*(){let a;const r=n._expressionMetadataAdapter.getExecutionMetadata(e),u=yield n._featureService.getFeatureState("ExpressionEngineDisableBundling");return a=t.immediate||u?yield n._executeImmediate(r):yield n._executeThrottled(r),a.success?{...a,result:n._expressionMetadataAdapter.decodeValue(a.result,e.resultDataValueType)}:Promise.reject(a.errorInfo)})()}validate(e){const t={metadata:this._expressionMetadataAdapter.getExecutionMetadata(e)};return(0,h.lastValueFrom)(this._httpClient.post(this._expressionEngineValidationEndpoint,t))}static{this.\u0275fac=function(t){return new(t||$l)(i.\u0275\u0275inject(F.HttpClient),i.\u0275\u0275inject(c.FeatureService),i.\u0275\u0275inject(c.SysSettingsService),i.\u0275\u0275inject(Hl))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:$l,factory:$l.\u0275fac,providedIn:"root"})}}let A_=class extends c.BaseRequest{constructor(){super(...arguments),this.type="crt.ExecuteExpressionRequest"}};A_=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.ExecuteExpressionRequest"})],A_);let Dg=class extends c.BaseRequestHandler{constructor(e){super(),this._engine=e}handle(e){return this._engine.safeExecute(e.metadata)}};Dg=(0,I.Cg)([(0,c.CrtRequestHandler)({type:"crt.ExecuteExpressionHandler",requestType:"crt.ExecuteExpressionRequest"}),(0,I.Sn)("design:paramtypes",[$l])],Dg);let xp=class Ly{static{this.\u0275fac=function(t){return new(t||Ly)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:Ly})}static{this.\u0275inj=i.\u0275\u0275defineInjector({providers:[$l,Hl],imports:[R.CommonModule,Hs,Hs]})}};xp=(0,I.Cg)([(0,c.CrtModule)({converters:[Tg],requestHandlers:[Dg]})],xp);const ZS=W.gX.create({token:nr,mappings:[{predicate:c.DataValueType.Lookup,injectable:Tu},{predicate:gp,injectable:kl}],default:{injectable:jl}});let R_=class extends c.BaseRequest{};R_=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.AddCommunicationOptionsRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.Add\u0421ommunicationOptionsRequest",propertiesPanelComponentTypeName:"crt.AddCommunicationOptionsRequestPropertiesPanel",position:740})],R_);class P_ extends c.BaseRequest{}class N_ extends P_{}let O_=class extends N_{};O_=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.AddRecordsInStaticFoldersRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.AddRecordsInStaticFoldersRequest",propertiesPanelComponentTypeName:"crt.AddRecordsInStaticFoldersRequestPropertiesPanel",position:706,compatibleAPIs:{[c.PlatformAPIs.Selection]:!0}})],O_);class V_ extends c.BaseRequest{}let L_=class extends V_{};L_=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.AddTagsInRecordRequest"})],L_);class F_ extends P_{}let k_=class extends F_{};k_=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.AddTagsInRecordsRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.AddTagsInRecordsRequest",propertiesPanelComponentTypeName:"crt.AddTagsInRecordsRequestPropertiesPanel",position:703,compatibleAPIs:{[c.PlatformAPIs.Selection]:!0}})],k_);class j_ extends c.BaseRequest{}let B_=class extends c.BaseRequest{constructor(){super(...arguments),this.type="crt.CancelCollectionPrimaryDataChangesRequest"}};B_=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.CancelCollectionPrimaryDataChangesRequest"})],B_);let G_=class extends c.BaseRequest{constructor(){super(...arguments),this.type="crt.CancelPrimaryDataChangesRequest"}};G_=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.CancelPrimaryDataChangesRequest"})],G_);let U_=class extends c.BaseRequest{constructor(){super(...arguments),this.type="crt.CancelRecordChangesRequest"}};U_=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.CancelRecordChangesRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.CancelRecordChangesRequest",position:500})],U_);let z_=class extends c.BaseRequest{constructor(){super(...arguments),this.type="crt.CancelRecordsChangesRequest"}};z_=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.CancelRecordsChangesRequest"})],z_);let H_=class extends c.BaseRequest{constructor(){super(...arguments),this.type="crt.ClosePageRequest"}};H_=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.ClosePageRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.ClosePageRequest",position:600})],H_);let Mg=class extends c.DataRequest{};Mg=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.LoadDataRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.LoadDataRequest",propertiesPanelComponentTypeName:"crt.LoadDataRequestPropertiesPanel",position:500})],Mg);let $_=class extends Mg{};$_=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.ComboboxLoadDataRequest"})],$_);let q_=class extends c.BaseRequest{};q_=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.ContinueInOtherPageRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.ContinueInOtherPageRequest",position:1e3})],q_);let W_=class extends c.BaseRequest{};W_=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.CopilotActionRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.CopilotActionRequest",propertiesPanelComponentTypeName:"crt.CopilotActionRequestPropertiesPanelComponent",position:3001})],W_);let Z_=class extends c.BaseRequest{};Z_=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.CreateCollectionItemsRequest"})],Z_);let J_=class extends c.BaseRequest{};J_=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.CreateRecordRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.CreateRecordRequest",propertiesPanelComponentTypeName:"crt.CreateRecordRequestPropertiesPanel",position:200})],J_);let Y_=class extends c.BaseRequest{};Y_=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.DeleteClientUnitSchemaRequest"})],Y_);let Ap=class extends c.BaseRequest{};Ap=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.DeleteRecordRequest"})],Ap);let K_=class extends Ap{};K_=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.DeleteFileRequest"})],K_);let Q_=class extends Ap{};Q_=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.DeleteOldTagRecordRequest"})],Q_);let X_=class extends c.BaseRequest{};X_=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.DeleteRecordsRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.DeleteRecordsRequest",propertiesPanelComponentTypeName:"crt.DeleteRecordsRequestPropertiesPanel",position:701,compatibleAPIs:{[c.PlatformAPIs.Selection]:!0}})],X_);let eC=class extends V_{};eC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.DeleteTagInRecordRequest"})],eC);let tC=class extends c.BaseRequest{};tC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.DetailChangedRequest"})],tC);let nC=class extends c.BaseRequest{};nC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.EmailLinkClickRequest"})],nC);let iC=class extends c.BaseRequest{};iC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.ExportChartDataGridToExcelRequest"})],iC);let aC=class extends c.BaseRequest{};aC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.ExportDataGridToExcelRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.ExportDataGridToExcelRequest",propertiesPanelComponentTypeName:"crt.ExportDataGridToExcelRequestPropertiesPanel",position:800,compatibleAPIs:{[c.PlatformAPIs.Selection]:!0}})],aC);class ps extends c.BaseRequest{}class sC extends ps{}let wg=class extends sC{};wg=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.AddFolderDataRequest"})],wg);let rC=class extends sC{};rC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.CopyFolderDataRequest"})],rC);let oC=class extends ps{};oC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.DeleteFolderDataRequest"})],oC);let lC=class extends ps{};lC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.FolderTreeActiveFolderChangedRequest"})],lC);let cC=class extends ps{};cC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.FolderTreeVisibleRequest"})],cC);let uC=class extends ps{};uC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.FolderTreeMoveRequest"})],uC);let dC=class extends ps{};dC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.FolderTreeRenameRequest"})],dC);let pC=class extends ps{};pC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.ToggleFolderFavoriteRequest"})],pC);let mC=class extends ps{};mC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.FolderTreeUpdateFiltersRequest"})],mC);let hC=class extends ps{};hC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.FolderTreeExpandedItemsRequest"})],hC);let gC=class extends wg{};gC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.ConvertToStaticFolderRequest"})],gC);let fC=class extends c.BaseRequest{};fC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.BaseImageListItemClickRequest"})],fC);let yC=class extends c.BaseRequest{constructor(e,t){super(),this.event=e,this.$context=t,this.type="crt.HandleKeyboardHotkeysRequest"}};yC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.HandleKeyboardHotkeysRequest"}),(0,I.Sn)("design:paramtypes",[KeyboardEvent,Object])],yC);let _C=class extends c.BaseRequest{constructor(){super(...arguments),this.type="crt.HandleModelEventRequest"}};_C=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.HandleModelEventRequest"})],_C);let Eg=class extends c.BaseRequest{constructor(){super(...arguments),this.type="crt.HandleViewModelDestroyRequest"}};Eg=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.HandleViewModelDestroyRequest"})],Eg);let xg=class extends c.BaseRequest{constructor(){super(...arguments),this.type="crt.HandleViewModelInitRequest"}};xg=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.HandleViewModelInitRequest"})],xg);let Ag=class extends c.BaseRequest{constructor(){super(...arguments),this.type="crt.HandleViewModelPauseRequest"}};Ag=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.HandleViewModelPauseRequest"})],Ag);let Rg=class extends c.BaseRequest{constructor(){super(...arguments),this.type="crt.HandleViewModelResumeRequest"}};Rg=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.HandleViewModelResumeRequest"})],Rg);let CC=class extends c.BaseRequest{};CC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.ImportDataRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.ImportDataRequest",propertiesPanelComponentTypeName:"crt.ImportDataRequestPropertiesPanel",position:750})],CC);class cr extends c.BaseRequest{}let bC=class extends cr{constructor(){super(...arguments),this.type="crt.HandleAfterModelDeleteRequest"}};bC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.HandleAfterModelDeleteRequest"})],bC);let SC=class extends cr{constructor(){super(...arguments),this.type="crt.HandleAfterModelInsertRequest"}};SC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.HandleAfterModelInsertRequest"})],SC);let vC=class extends cr{constructor(){super(...arguments),this.type="crt.HandleAfterModelLoadRequest"}};vC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.HandleAfterModelLoadRequest"})],vC);let IC=class extends cr{constructor(){super(...arguments),this.type="crt.HandleAfterModelUpdateRequest"}};IC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.HandleAfterModelUpdateRequest"})],IC);let TC=class extends cr{constructor(){super(...arguments),this.type="crt.HandleBeforeModelDeleteRequest"}};TC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.HandleBeforeModelDeleteRequest"})],TC);let DC=class extends cr{constructor(){super(...arguments),this.type="crt.HandleBeforeModelInsertRequest"}};DC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.HandleBeforeModelInsertRequest"})],DC);let MC=class extends cr{constructor(){super(...arguments),this.type="crt.HandleBeforeModelLoadRequest"}};MC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.HandleBeforeModelLoadRequest"})],MC);let wC=class extends cr{constructor(){super(...arguments),this.type="crt.HandleBeforeModelUpdateRequest"}};wC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.HandleBeforeModelUpdateRequest"})],wC);let EC=class extends c.BaseRequest{};var xC;EC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.MoveSelectedItemsRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.MoveSelectedItemsRequest",propertiesPanelComponentTypeName:"crt.MoveSelectedItemsRequestPropertiesPanel",position:1e3,compatibleAPIs:{[c.PlatformAPIs.Selection]:!0}})],EC),function(o){o.Root="root",o.Item="item",o.Const="const"}(xC||(xC={}));let AC=class extends c.BaseRequest{constructor(){super(...arguments),this.type="crt.NotificationRequest"}};AC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.NotificationRequest"})],AC);let RC=class extends c.BaseRequest{};RC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.OpenDuplicatesPageRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.OpenDuplicatesPageRequest",propertiesPanelComponentTypeName:"crt.OpenDuplicatesPageRequestPropertiesPanel",position:360})],RC);let PC=class extends c.BaseRequest{};PC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.OpenOldTagMiniPageRequest"})],PC);let NC=class extends c.BaseRequest{};NC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.OpenPageRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.OpenPageRequest",propertiesPanelComponentTypeName:"crt.OpenPageRequestPropertiesPanel",position:350})],NC);let OC=class extends c.BaseRequest{};OC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.OpenPositionedPageRequest"})],OC);let VC=class extends c.BaseRequest{};VC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.PhoneLinkClickRequest"})],VC);let LC=class extends c.BaseRequest{};LC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.PrintablesRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.PrintablesRequest",propertiesPanelComponentTypeName:"crt.PrintablesRequestPropertiesPanel",position:3e3,compatibleAPIs:{[c.PlatformAPIs.Selection]:!0}})],LC);let FC=class extends c.BaseRequest{};FC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.RemoveCollectionItemsRequest"})],FC);let kC=class extends N_{};kC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.RemoveRecordsInStaticFoldersRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.RemoveRecordsInStaticFoldersRequest",propertiesPanelComponentTypeName:"crt.RemoveRecordsInStaticFoldersRequestPropertiesPanel",position:705,compatibleAPIs:{[c.PlatformAPIs.Selection]:!0}})],kC);let jC=class extends F_{};jC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.RemoveTagsInRecordsRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.RemoveTagsInRecordsRequest",propertiesPanelComponentTypeName:"crt.RemoveTagsInRecordsRequestPropertiesPanel",position:704,compatibleAPIs:{[c.PlatformAPIs.Selection]:!0}})],jC);let BC=class extends c.BaseRequest{};BC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.RunBusinessProcessRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.RunBusinessProcessRequest",propertiesPanelComponentTypeName:"crt.RunBusinessProcessRequestPropertiesPanel",position:700,compatibleAPIs:{[c.PlatformAPIs.Selection]:!0}})],BC);let GC=class extends c.BaseRequest{constructor(){super(...arguments),this.type="crt.SaveCollectionPrimaryDataRequest"}};GC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.SaveCollectionPrimaryDataRequest"})],GC);let UC=class extends c.BaseRequest{constructor(){super(...arguments),this.type="crt.SavePrimaryDataRequest"}};UC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.SavePrimaryDataRequest"})],UC);let Pg=class extends c.BaseRequest{};Pg=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.SaveRecordRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.SaveRecordRequest",propertiesPanelComponentTypeName:"crt.SaveRecordRequestPropertiesPanel",position:400})],Pg);let zC=class extends Pg{};zC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.SaveRecordWithErrorRequest"})],zC);let HC=class extends c.BaseRequest{constructor(){super(...arguments),this.type="crt.SaveRecordsRequest"}};HC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.SaveRecordsRequest"})],HC);let $C=class extends j_{};$C=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.SearchFilterColumnsGroupsRequest"})],$C);let qC=class extends j_{};qC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.SearchFilterRequest"})],qC);let WC=class extends c.BaseRequest{constructor(){super(...arguments),this.multiple=!0,this.displayErrors=!1}};WC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.SelectFileRequest"})],WC);let ZC=class extends c.BaseRequest{};ZC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.SelectLookupPageRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.SelectLookupPageRequest",propertiesPanelComponentTypeName:"crt.SelectLookupPageRequestPropertiesPanel",scopes:["BaseLookupPageTemplate"],position:2e3})],ZC);let JC=class extends c.BaseRequest{};JC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.SetRecordRightsRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.SetRecordRightsRequest",propertiesPanelComponentTypeName:"crt.SetRecordRightsRequestPropertiesPanel",position:800})],JC);let YC=class extends c.BaseRequest{constructor(){super(...arguments),this.type="crt.SetTopRecordRequest"}};YC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.SetTopRecordRequest"})],YC);let KC=class extends c.BaseRequest{};KC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.ShowRelationshipsRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.ShowRelationshipsRequest",propertiesPanelComponentTypeName:"crt.ShowRelationshipsRequestPropertiesPanel",position:900})],KC);let QC=class extends c.BaseRequest{};QC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.UpdateRecordRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.UpdateRecordRequest",propertiesPanelComponentTypeName:"crt.UpdateRecordRequestPropertiesPanel",position:300})],QC);let XC=class extends c.BaseRequest{};XC=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.UploadFileRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.UploadFileRequest",propertiesPanelComponentTypeName:"crt.UploadFileRequestPropertiesPanel",position:702})],XC);let eb=class extends c.BaseRequest{constructor(){super(...arguments),this.awaitResponse=!1}};eb=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.UploadImageRequest"})],eb);let tb=class extends c.BaseRequest{};tb=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.WorkplaceNavigationPanelCloseRequest"})],tb);let nb=class extends c.BaseRequest{};nb=(0,I.Cg)([(0,c.CrtRequest)({type:"crt.OpenChangeLogRequest",title:"InterfaceDesigner.PropertiesPages.ViewElementEventPropertiesPanel.Requests.OpenChangeLogRequest",propertiesPanelComponentTypeName:"crt.OpenChangeLogRequestPropertiesPanel",position:370})],nb);class ql{constructor(){this.viewModelConstructor=ta}static useClass(e){return new class extends ql{constructor(){super(...arguments),this.viewModelConstructor=e}}}create(e,t,n,a,r,u,p,f){return new this.viewModelConstructor(e,t,n,a,r,u,p,f)}static{this.\u0275fac=function(t){return new(t||ql)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:ql,factory:ql.\u0275fac,providedIn:"root"})}}class Wl extends ns{constructor(){super(...arguments),this._lifecycleHooksRequests={init:xg,resume:Rg,pause:Ag,destroy:Eg},this.handlerChain=c.HandlerChainService.instance}_processRequest(e,t,n){return this.ngZone.runOutsideAngular(()=>this.sendRequest({...e,scopes:n,$context:t}))}_processViewModelAttributeChanges(e,t){e.events$.pipe((0,se.p)(n=>n.type===ft.ChangeAttributeValue&&!n.payload?.preventAttributeChangeRequest)).subscribe({next:n=>{const a=`${ut.ProcessingAttributeChangeRequest}-${(0,c.generateGuid)()}`;e._onAsyncTaskStarted(a),this._processRequest(new c.HandleViewModelAttributeChangeRequest(n.payload),e,t).then(()=>e._onAsyncTaskFinished(a))}})}initDependencies(){super.initDependencies(),this.viewModelFactory=this.injector.get(ql)}generateLifecycleHooks(e,t){Object.entries(this._lifecycleHooksRequests).forEach(([n,a])=>{e[n]=new Proxy(e[n],{apply:(r,u,p)=>{const f=r.apply(u,p);if(!(f instanceof h.Observable))throw new Error(`Method ${n} should return Observable`);return f.pipe((0,z.n)(S=>(0,h.from)(this._processRequest(new a,e,t.scopes)).pipe((0,h.map)(()=>S))))}})})}_generateFromConfig(e,t){const n=t||this.injector,{viewModelConfig:a,modelConfig:r,resources:u,models:p,scopes:f,modelInitConfigs:S,modelConfig:{primaryDataSourceName:w}={},parentViewModel:O,businessRulesActive:$}=e,te=this.viewModelFactory.create(this,n,this._trimEmptyAttributes(a),u,null,f,S,O);return this.generateLifecycleHooks(te,e),this._processViewModelAttributeChanges(te,f),te.init(p,{modelDependencies:r?.dependencies,primaryModelName:w,modelsLoadingConfig:r?.loadingConfig,businessRulesActive:$})}_trimEmptyAttributes(e){const t=e?.attributes??{};return Object.keys(t).forEach(n=>{t[n]||delete t[n]}),{...e,attributes:t}}_generateFromString(e,t){return this.repository.resolveModelConfig(e.viewModelConfig).pipe((0,z.n)(n=>this._generateFromConfig({...e,viewModelConfig:n},t)))}sendRequest(e){return this.handlerChain.process(e)}generate(e,t){const n=t?.get(_.gcc);return"string"==typeof e.viewModelConfig?n?this._generateFromString(e,t).pipe(n.measure$("viewModelGenerator.generateFromString")):this._generateFromString(e,t):n?this._generateFromConfig(e,t).pipe(n.measure$("viewModelGenerator.generateFromConfig")):this._generateFromConfig(e,t)}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(Wl)))(n||Wl)}})()}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Wl,factory:Wl.\u0275fac,providedIn:"root"})}}const JS={"hr-HR":JSON.parse('{"Validators":{"Autocomplete":{"Message":"Molimo odaberite vrijednost iz popisa","SelectionWindowMessage":"Molimo odaberite vrijednost iz popisa ili pretra\u017eite koriste\u0107i prozor za pretra\u017eivanje"},"Required":{"Message":"Unesite vrijednost"},"MaxLength":{"Message":"Prema\u0161ena maksimalna duljina teksta ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimalna duljina teksta nije dosegnuta ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Neispravan format datuma i vremena"},"DatePickerSyntax":{"Message":"Neispravan format datuma"},"TimePickerSyntax":{"Message":"Neispravan format vremena"},"RegExp":{"Message":"Neispravan format vrijednosti"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Kod mora zapo\u010deti prefiksom {{schemaNamePrefix}}.","OnlySchemaNamePrefixMessage":"Unesite barem jedan znak."},"SchemaNameAllowedSymbols":{"Message":"Koristite simbole: a-z, A-Z, 0-9, donja crta ili crtica. Samo slova mogu biti prva."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Stupac uklonjen","ValidationErrorMessageSingleErrorField":"Polje: {0}. Gre\u0161ka: {1}","ValidationErrorMessageSeveralErrorFields":"Polja: {0}. Gre\u0161ka: {1}","RefreshModelDataConflict":"Creatio ima nove podatke za trenutnu stranicu. Kako biste ih vidjeli, spremite ili poni\u0161tite svoje promjene i osvje\u017eite stranicu.","WarningModelsWithCircularDependencies":"Neki modeli imaju cikli\u010dke ovisnosti i nisu u\u010ditani","LoadingModelErrorMessage":"Do\u0161lo je do gre\u0161ke tijekom izvr\u0161avanja upita"}}'),"hu-HU":JSON.parse('{"Validators":{"Autocomplete":{"Message":"K\xe9rj\xfck, v\xe1lassza ki az \xe9rt\xe9ket a list\xe1b\xf3l","SelectionWindowMessage":"K\xe9rj\xfck, v\xe1lasszon \xe9rt\xe9ket a list\xe1b\xf3l, vagy keressen a keres\u0151ablak seg\xedts\xe9g\xe9vel"},"Required":{"Message":"Adj meg egy \xe9rt\xe9ket"},"MaxLength":{"Message":"A maxim\xe1lis sz\xf6veghossz t\xfall\xe9pve ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Nem \xe9rte el a minim\xe1lis sz\xf6veghosszt ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"\xc9rv\xe9nytelen d\xe1tum- \xe9s id\u0151form\xe1tum"},"DatePickerSyntax":{"Message":"\xc9rv\xe9nytelen d\xe1tumform\xe1tum"},"TimePickerSyntax":{"Message":"\xc9rv\xe9nytelen id\u0151form\xe1tum"},"RegExp":{"Message":"\xc9rv\xe9nytelen \xe9rt\xe9kform\xe1tum"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Code must start with the {{schemaNamePrefix}} prefix.","OnlySchemaNamePrefixMessage":"Enter at least one more symbol."},"SchemaNameAllowedSymbols":{"Message":"Use symbols: a-z, A-Z, 0-9, underscore or dash. Only letters can be first."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Oszlop elt\xe1vol\xedtva","ValidationErrorMessageSingleErrorField":"Mez\u0151: {0}. Hiba: {1}","ValidationErrorMessageSeveralErrorFields":"Mez\u0151k: {0}. Hiba: {1}","RefreshModelDataConflict":"A Creatio \xfaj adatokkal rendelkezik az aktu\xe1lis oldalhoz. A megtekint\xe9s\xe9hez mentse vagy vonja vissza a m\xf3dos\xedt\xe1sokat, \xe9s friss\xedtse az oldalt.","WarningModelsWithCircularDependencies":"Egyes modellek k\xf6rk\xf6r\xf6s f\xfcgg\u0151s\xe9ggel rendelkeznek, \xe9s nincsenek bet\xf6ltve","LoadingModelErrorMessage":"Error occurred during the query execution"}}'),"zh-CN":JSON.parse('{"Validators":{"Autocomplete":{"Message":"\u8bf7\u4ece\u5217\u8868\u4e2d\u9009\u62e9\u503c","SelectionWindowMessage":"Please select value from the list or search using the lookup window"},"Required":{"Message":"\u8f93\u5165\u503c"},"MaxLength":{"Message":"\u8d85\u8fc7\u6587\u672c\u957f\u5ea6\u9650\u5236({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"\u672a\u8fbe\u6587\u672c\u6700\u5c0f\u9650\u5236({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"\u65e5\u671f\u548c\u65f6\u95f4\u683c\u5f0f\u65e0\u6548"},"DatePickerSyntax":{"Message":"\u65e5\u671f\u683c\u5f0f\u65e0\u6548"},"TimePickerSyntax":{"Message":"\u65f6\u95f4\u683c\u5f0f\u65e0\u6548"},"RegExp":{"Message":"Invalid value format"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Code must start with the {{schemaNamePrefix}} prefix.","OnlySchemaNamePrefixMessage":"Enter at least one more symbol."},"SchemaNameAllowedSymbols":{"Message":"Use symbols: a-z, A-Z, 0-9, underscore or dash. Only letters can be first."}},"BaseViewModel":{"DataSourceAttributeRemoved":"\u5217\u5df2\u79fb\u9664","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}","RefreshModelDataConflict":"Creatio \u5f53\u524d\u9875\u9762\u6570\u636e\u5df2\u66f4\u6539\u3002\u8bf7\u4fdd\u5b58\u6216\u53d6\u6d88\u540e\uff0c\u518d\u5237\u65b0\u672c\u9875\u9762\u4ee5\u67e5\u770b","WarningModelsWithCircularDependencies":"\u6709\u4e9b\u6a21\u578b\u6709\u5faa\u73af\u4f9d\u8d56\u5173\u7cfb\u5e76\u4e14\u6ca1\u6709\u88ab\u52a0\u8f7d","LoadingModelErrorMessage":"Error occurred during the query execution"}}'),"uk-UA":JSON.parse('{"BaseViewModel":{"RefreshModelDataConflict":"Creatio \u043c\u0430\u0454 \u043d\u043e\u0432\u0456 \u0434\u0430\u043d\u0456 \u0434\u043b\u044f \u043f\u043e\u0442\u043e\u0447\u043d\u043e\u0457 \u0441\u0442\u043e\u0440\u0456\u043d\u043a\u0438. \u0429\u043e\u0431 \u043f\u0435\u0440\u0435\u0433\u043b\u044f\u043d\u0443\u0442\u0438 \u0457\u0457, \u0437\u0431\u0435\u0440\u0435\u0436\u0456\u0442\u044c \u0430\u0431\u043e \u0441\u043a\u0430\u0441\u0443\u0439\u0442\u0435 \u0432\u0430\u0448\u0456 \u0437\u043c\u0456\u043d\u0438 \u0456 \u043e\u043d\u043e\u0432\u0456\u0442\u044c \u0441\u0442\u043e\u0440\u0456\u043d\u043a\u0443.","WarningModelsWithCircularDependencies":"\u0414\u0435\u044f\u043a\u0456 \u043c\u043e\u0434\u0435\u043b\u0456 \u043c\u0430\u044e\u0442\u044c \u0446\u0438\u043a\u043b\u0456\u0447\u043d\u0456 \u0437\u0430\u043b\u0435\u0436\u043d\u043e\u0441\u0442\u0456 \u0456 \u043d\u0435 \u0431\u0443\u043b\u0438 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u0456","DataSourceAttributeRemoved":"\u041a\u043e\u043b\u043e\u043d\u043a\u0443 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e","ValidationErrorMessageSingleErrorField":"\u041f\u043e\u043b\u0435: {0}. \u041f\u043e\u043c\u0438\u043b\u043a\u0430: {1}","ValidationErrorMessageSeveralErrorFields":"\u041f\u043e\u043b\u044f: {0}. \u041f\u043e\u043c\u0438\u043b\u043a\u0430: {1}","LoadingModelErrorMessage":"\u0421\u0442\u0430\u043b\u0430\u0441\u044f \u043f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0456\u0434 \u0447\u0430\u0441 \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u043d\u044f \u0437\u0430\u043f\u0438\u0442\u0443"},"Validators":{"Autocomplete":{"Message":"\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u043e\u0431\u0435\u0440\u0456\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f \u0437\u0456 \u0441\u043f\u0438\u0441\u043a\u0443","SelectionWindowMessage":"\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0432\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f \u0437\u0456 \u0441\u043f\u0438\u0441\u043a\u0443 \u0430\u0431\u043e \u0441\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u0439\u0442\u0435\u0441\u044f \u043f\u043e\u0448\u0443\u043a\u043e\u043c \u0437\u0430 \u0434\u043e\u043f\u043e\u043c\u043e\u0433\u043e\u044e \u0432\u0456\u043a\u043d\u0430 \u0434\u043e\u0432\u0456\u0434\u043d\u0438\u043a\u0430"},"Required":{"Message":"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f"},"MaxLength":{"Message":"\u041f\u0435\u0440\u0435\u0432\u0438\u0449\u0435\u043d\u043e \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u0443 \u0434\u043e\u0432\u0436\u0438\u043d\u0443 \u0442\u0435\u043a\u0441\u0442\u0443 ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"\u041d\u0435 \u0434\u043e\u0441\u044f\u0433\u043d\u0443\u0442\u043e \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e\u0457 \u0434\u043e\u0432\u0436\u0438\u043d\u0438 \u0442\u0435\u043a\u0441\u0442\u0443 ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u0438\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0434\u0430\u0442\u0438 \u0456 \u0447\u0430\u0441\u0443"},"DatePickerSyntax":{"Message":"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u0438\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0434\u0430\u0442\u0438"},"TimePickerSyntax":{"Message":"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u0438\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0447\u0430\u0441\u0443"},"RegExp":{"Message":"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u0438\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"\u041a\u043e\u0434 \u043c\u0430\u0454 \u043f\u043e\u0447\u0438\u043d\u0430\u0442\u0438\u0441\u044f \u0437 \u043f\u0440\u0435\u0444\u0456\u043a\u0441\u0443 {{schemaNamePrefix}}.","OnlySchemaNamePrefixMessage":"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u0440\u0438\u043d\u0430\u0439\u043c\u043d\u0456 \u043e\u0434\u0438\u043d \u0441\u0438\u043c\u0432\u043e\u043b."},"SchemaNameAllowedSymbols":{"Message":"\u0412\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u043e\u0432\u0443\u0439\u0442\u0435 \u0441\u0438\u043c\u0432\u043e\u043b\u0438: a-z, A-Z, 0-9, \u043f\u0456\u0434\u043a\u0440\u0435\u0441\u043b\u0435\u043d\u043d\u044f \u0430\u0431\u043e \u0442\u0438\u0440\u0435. \u0421\u043f\u043e\u0447\u0430\u0442\u043a\u0443 \u043c\u043e\u0436\u0443\u0442\u044c \u0431\u0443\u0442\u0438 \u043b\u0438\u0448\u0435 \u043b\u0456\u0442\u0435\u0440\u0438."}},"LoadDataRequest":{"SuccessMessage":"\u0414\u0430\u043d\u0456 \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043e"}}'),"sq-AL":JSON.parse('{"Validators":{"Autocomplete":{"Message":"T\xeb lutem p\xebrzgjidh vler\xebn nga lista","SelectionWindowMessage":"T\xeb lutem p\xebrzgjidh vler\xeb nga lista ose k\xebrko duke p\xebrdorur dritaren e k\xebrkimit"},"Required":{"Message":"Vendos vler\xebn"},"MaxLength":{"Message":"\xcbsht\xeb tejkaluar gjat\xebsia maksimale e tekstit ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Gjat\xebsia minimale e tekstit nuk \xebsht\xeb arritur ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Format i pavlefsh\xebm i dat\xebs dhe or\xebs"},"DatePickerSyntax":{"Message":"Format i pavlefsh\xebm i dat\xebs"},"TimePickerSyntax":{"Message":"Format i pavlefsh\xebm i or\xebs"},"RegExp":{"Message":"Formati i vler\xebs i pavlefsh\xebm"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Kodi duhet t\xeb filloj\xeb me prefiksin {{schemaNamePrefix}}.","OnlySchemaNamePrefixMessage":"Vendos t\xeb pakt\xebn nj\xeb simbol m\xeb shum\xeb."},"SchemaNameAllowedSymbols":{"Message":"P\xebrdor simbolet: a-z, A-Z, 0-9, n\xebnvij\xebzim ose vij\xebzim. Vet\xebm shkronja mund t\xeb vendoset n\xeb fillim."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Kolonat u hoq\xebn","ValidationErrorMessageSingleErrorField":"Fusha: {0}. Gabim: {1}","ValidationErrorMessageSeveralErrorFields":"Fushat: {0}. Gabim: {1}","RefreshModelDataConflict":"Creatio ka t\xeb dh\xebna t\xeb reja p\xebr faqen aktuale. P\xebr t\xeb pare, ruajtur apo anuluar ndryshimet e tua dhe p\xebr t\xeb rifreskuar faqen.","WarningModelsWithCircularDependencies":"Disa modele kan\xeb var\xebsi ciklike dhe nuk jan\xeb ngarkuar","LoadingModelErrorMessage":"Error occurred during the query execution"}}'),"en-GB":JSON.parse('{"Validators":{"Autocomplete":{"Message":"Please select value from the list"},"Required":{"Message":"Enter a value"},"MaxLength":{"Message":"Maximum text length exceeded ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimum text length not reached ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Invalid date and time format"},"DatePickerSyntax":{"Message":"Invalid date format"},"TimePickerSyntax":{"Message":"Invalid time format"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}"}}'),"bg-BG":JSON.parse('{"Validators":{"Autocomplete":{"Message":"\u041c\u043e\u043b\u044f, \u0438\u0437\u0431\u0435\u0440\u0438 \u0441\u0442\u043e\u0439\u043d\u043e\u0441\u0442 \u043e\u0442 \u0441\u043f\u0438\u0441\u044a\u043a\u0430","SelectionWindowMessage":"\u041c\u043e\u043b\u044f, \u0438\u0437\u0431\u0435\u0440\u0438 \u0441\u0442\u043e\u0439\u043d\u043e\u0441\u0442 \u043e\u0442 \u0441\u043f\u0438\u0441\u044a\u043a\u0430 \u0438\u043b\u0438 \u043f\u043e\u0442\u044a\u0440\u0441\u0438 \u0441 \u043f\u043e\u043c\u043e\u0449\u0442\u0430 \u043d\u0430 \u043f\u0440\u043e\u0437\u043e\u0440\u0435\u0446\u0430 \u0437\u0430 \u0441\u043f\u0440\u0430\u0432\u043a\u0430"},"Required":{"Message":"\u0412\u044a\u0432\u0435\u0434\u0438 \u0441\u0442\u043e\u0439\u043d\u043e\u0441\u0442"},"MaxLength":{"Message":"\u041f\u0440\u0435\u0432\u0438\u0448\u0435\u043d\u0430 \u0435 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u043d\u0430\u0442\u0430 \u0434\u044a\u043b\u0436\u0438\u043d\u0430 \u043d\u0430 \u0442\u0435\u043a\u0441\u0442\u0430 ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u043d\u0430\u0442\u0430 \u0434\u044a\u043b\u0436\u0438\u043d\u0430 \u043d\u0430 \u0442\u0435\u043a\u0441\u0442\u0430 \u043d\u0435 \u0435 \u0434\u043e\u0441\u0442\u0438\u0433\u043d\u0430\u0442\u0430 ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"\u041d\u0435\u0432\u0430\u043b\u0438\u0434\u0435\u043d \u0444\u043e\u0440\u043c\u0430\u0442 \u0437\u0430 \u0434\u0430\u0442\u0430 \u0438 \u0447\u0430\u0441"},"DatePickerSyntax":{"Message":"\u041d\u0435\u0432\u0430\u043b\u0438\u0434\u0435\u043d \u0444\u043e\u0440\u043c\u0430\u0442 \u043d\u0430 \u0434\u0430\u0442\u0430\u0442\u0430"},"TimePickerSyntax":{"Message":"\u041d\u0435\u0432\u0430\u043b\u0438\u0434\u0435\u043d \u0444\u043e\u0440\u043c\u0430\u0442 \u043d\u0430 \u0447\u0430\u0441\u0430"},"RegExp":{"Message":"\u041d\u0435\u0432\u0430\u043b\u0438\u0434\u0435\u043d \u0444\u043e\u0440\u043c\u0430\u0442 \u043d\u0430 \u0441\u0442\u043e\u0439\u043d\u043e\u0441\u0442\u0442\u0430"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"\u041a\u043e\u0434\u044a\u0442 \u0442\u0440\u044f\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u043f\u043e\u0447\u0432\u0430 \u0441 \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u0430 {{schemaNamePrefix}}.","OnlySchemaNamePrefixMessage":"\u0412\u044a\u0432\u0435\u0434\u0438 \u043f\u043e\u043d\u0435 \u043e\u0449\u0435 \u0435\u0434\u0438\u043d \u0441\u0438\u043c\u0432\u043e\u043b."},"SchemaNameAllowedSymbols":{"Message":"\u0418\u0437\u043f\u043e\u043b\u0437\u0432\u0430\u0439 \u0441\u0438\u043c\u0432\u043e\u043b\u0438: a-z, A-Z, 0-9, \u0434\u043e\u043b\u043d\u0430 \u0447\u0435\u0440\u0442\u0430 \u0438\u043b\u0438 \u0442\u0438\u0440\u0435. \u041f\u044a\u0440\u0432\u0438 \u043c\u043e\u0433\u0430\u0442 \u0434\u0430 \u0431\u044a\u0434\u0430\u0442 \u0441\u0430\u043c\u043e \u0431\u0443\u043a\u0432\u0438."}},"BaseViewModel":{"DataSourceAttributeRemoved":"\u041a\u043e\u043b\u043e\u043d\u0430\u0442\u0430 \u0435 \u043f\u0440\u0435\u043c\u0430\u0445\u043d\u0430\u0442\u0430","ValidationErrorMessageSingleErrorField":"\u041f\u043e\u043b\u0435: {0}. \u0413\u0440\u0435\u0448\u043a\u0430: {1}","ValidationErrorMessageSeveralErrorFields":"\u041f\u043e\u043b\u0435\u0442\u0430: {0}. \u0413\u0440\u0435\u0448\u043a\u0430: {1}","RefreshModelDataConflict":"Creatio \u0438\u043c\u0430 \u043d\u043e\u0432\u0438 \u0434\u0430\u043d\u043d\u0438 \u0437\u0430 \u0442\u0435\u043a\u0443\u0449\u0430\u0442\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430. \u0417\u0430 \u0434\u0430 \u0433\u043e \u0432\u0438\u0434\u0438\u0448, \u0437\u0430\u043f\u0430\u0437\u0438 \u0438\u043b\u0438 \u0430\u043d\u0443\u043b\u0438\u0440\u0430\u0439 \u043f\u0440\u043e\u043c\u0435\u043d\u0438\u0442\u0435 \u0441\u0438 \u0438 \u043e\u043f\u0440\u0435\u0441\u043d\u0438 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430\u0442\u0430.","WarningModelsWithCircularDependencies":"\u041d\u044f\u043a\u043e\u0438 \u043c\u043e\u0434\u0435\u043b\u0438 \u0438\u043c\u0430\u0442 \u043a\u0440\u044a\u0433\u043e\u0432\u0438 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u0438 \u043d\u0435 \u0441\u0430 \u0437\u0430\u0440\u0435\u0434\u0435\u043d\u0438","LoadingModelErrorMessage":"\u0412\u044a\u0437\u043d\u0438\u043a\u043d\u0430 \u0433\u0440\u0435\u0448\u043a\u0430 \u043f\u043e \u0432\u0440\u0435\u043c\u0435 \u043d\u0430 \u0438\u0437\u043f\u044a\u043b\u043d\u0435\u043d\u0438\u0435 \u043d\u0430 \u0437\u0430\u044f\u0432\u043a\u0430\u0442\u0430"}}'),"zh-TW":JSON.parse('{"Validators":{"Autocomplete":{"Message":"\u8acb\u5f9e\u6e05\u55ae\u4e2d\u9078\u64c7\u503c","SelectionWindowMessage":"\u8acb\u5f9e\u5217\u8868\u4e2d\u9078\u64c7\u503c\u6216\u4f7f\u7528\u67e5\u8a62\u503c\u8996\u7a97\u9032\u884c\u641c\u7d22\u3002"},"Required":{"Message":"\u8f93\u5165\u503c"},"MaxLength":{"Message":"\u8d85\u8fc7\u6587\u672c\u957f\u5ea6\u9650\u5236({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"\u672a\u8fbe\u6587\u672c\u6700\u5c0f\u9650\u5236({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"\u65e5\u671f\u548c\u65f6\u95f4\u683c\u5f0f\u65e0\u6548"},"DatePickerSyntax":{"Message":"\u65e5\u671f\u683c\u5f0f\u65e0\u6548"},"TimePickerSyntax":{"Message":"\u65f6\u95f4\u683c\u5f0f\u65e0\u6548"},"RegExp":{"Message":"\u7121\u6548\u503c\u683c\u5f0f"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"\u4ee3\u78bc\u5fc5\u9808\u4ee5{{schemaNamePrefix}} \u524d\u7db4\u958b\u59cb","OnlySchemaNamePrefixMessage":"\u6700\u5c11\u8f38\u51651\u500b\u7b26\u865f"},"SchemaNameAllowedSymbols":{"Message":"\u4f7f\u7528\u7b26\u865f\uff1aa-z\u3001A-Z\u30010-9\u3001\u5e95\u7dda\u6216\u7834\u6298\u865f\u3002\u9996\u5b57\u7b26\u50c5\u53ef\u70ba\u5b57\u6bcd\u3002"}},"BaseViewModel":{"DataSourceAttributeRemoved":"\u5217\u5df2\u79fb\u9664","ValidationErrorMessageSingleErrorField":"\u6b04\u4f4d: {0}. \u932f\u8aa4: {1}","ValidationErrorMessageSeveralErrorFields":"\u6b04\u4f4d: {0}. \u932f\u8aa4: {1}","RefreshModelDataConflict":"Creatio \u5f53\u524d\u9875\u9762\u6570\u636e\u5df2\u66f4\u6539\u3002\u8bf7\u4fdd\u5b58\u6216\u53d6\u6d88\u540e\uff0c\u518d\u5237\u65b0\u672c\u9875\u9762\u4ee5\u67e5\u770b","WarningModelsWithCircularDependencies":"\u6709\u4e9b\u6a21\u578b\u6709\u5faa\u73af\u4f9d\u8d56\u5173\u7cfb\u5e76\u4e14\u6ca1\u6709\u88ab\u52a0\u8f7d","LoadingModelErrorMessage":"Error occurred during the query execution"}}'),"no-NO":JSON.parse('{"Validators":{"Autocomplete":{"Message":"Vennligst velg verdi fra listen"},"Required":{"Message":"Angi en verdi"},"MaxLength":{"Message":"Maksimal tekstlengde er overskredet ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minste tekstlengde ikke n\xe5dd ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Ugyldig dato og klokkeslett format"},"DatePickerSyntax":{"Message":"Ugyldig datoformat"},"TimePickerSyntax":{"Message":"Ugyldig tidsformat"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Kolonne fjernet","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}"}}'),"ko-KR":JSON.parse('{"Validators":{"Autocomplete":{"Message":"\ubaa9\ub85d\uc5d0\uc11c \uac12\uc744 \uc120\ud0dd\ud558\uc2ed\uc2dc\uc624.","SelectionWindowMessage":"\ubaa9\ub85d\uc5d0\uc11c \uac12\uc744 \uc120\ud0dd\ud558\uac70\ub098 \uc870\ud68c \ucc3d\uc744 \uc0ac\uc6a9\ud558\uc5ec \uac80\uc0c9\ud558\uc2ed\uc2dc\uc624"},"Required":{"Message":"\uac12\uc744 \uc785\ub825\ud569\ub2c8\ub2e4"},"MaxLength":{"Message":"\ucd5c\ub300 \ud14d\uc2a4\ud2b8 \uae38\uc774 \ucd08\uacfc({actualLength}/{maxLength})"},"MinLength":{"Message":"\ucd5c\uc18c \ud14d\uc2a4\ud2b8 \uae38\uc774({{actualLength}/{{minLength}})\uc5d0 \ub3c4\ub2ec\ud558\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4."},"DatetimePickerSyntax":{"Message":"\uc798\ubabb\ub41c \ub0a0\uc9dc \ubc0f \uc2dc\uac04 \ud615\uc2dd"},"DatePickerSyntax":{"Message":"\uc798\ubabb\ub41c \ub0a0\uc9dc \ud615\uc2dd"},"TimePickerSyntax":{"Message":"\uc798\ubabb\ub41c \uc2dc\uac04 \ud615\uc2dd"},"RegExp":{"Message":"\uc798\ubabb\ub41c \uac12 \ud615\uc2dd"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Code must start with the {{schemaNamePrefix}} prefix.","OnlySchemaNamePrefixMessage":"Enter at least one more symbol."},"SchemaNameAllowedSymbols":{"Message":"Use symbols: a-z, A-Z, 0-9, underscore or dash. Only letters can be first."}},"BaseViewModel":{"DataSourceAttributeRemoved":"\uc5f4 \uc81c\uac70","ValidationErrorMessageSingleErrorField":"\ud544\ub4dc: {0}. \uc624\ub958: {1}","ValidationErrorMessageSeveralErrorFields":"\ud544\ub4dc: {0}. \uc624\ub958: {1}","RefreshModelDataConflict":"Creatio\uc5d0\ub294 \ud604\uc7ac \ud398\uc774\uc9c0\uc5d0 \ub300\ud55c \uc0c8 \ub370\uc774\ud130\uac00 \uc788\uc2b5\ub2c8\ub2e4. \uc774 \ub370\uc774\ud130\ub97c \ubcf4\ub824\uba74 \ubcc0\uacbd \uc0ac\ud56d\uc744 \uc800\uc7a5\ud558\uac70\ub098 \ucde8\uc18c\ud558\uace0 \ud398\uc774\uc9c0\ub97c \uc0c8\ub85c \uace0\uce69\ub2c8\ub2e4.","WarningModelsWithCircularDependencies":"\uc77c\ubd80 \ubaa8\ub378\uc5d0 \uc6d0\ud615 \uc885\uc18d\uc131\uc774 \uc788\uc5b4 \ub85c\ub4dc\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4","LoadingModelErrorMessage":"Error occurred during the query execution"}}'),"ja-JP":JSON.parse('{"Validators":{"Autocomplete":{"Message":"\u30ea\u30b9\u30c8\u304b\u3089\u9805\u76ee\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044","SelectionWindowMessage":"\u30ea\u30b9\u30c8\u304b\u3089\u5024\u3092\u9078\u629e\u3059\u308b\u304b\u3001\u691c\u7d22\u7a93\u3088\u308a\u691c\u7d22\u3057\u3066\u304f\u3060\u3055\u3044"},"Required":{"Message":"\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"},"MaxLength":{"Message":"\u6700\u5927\u6587\u5b57\u6570\u3092\u8d85\u3048\u307e\u3057\u305f ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"\u6700\u5c0f\u6587\u5b57\u6570\u306b\u9054\u3057\u3066\u3044\u307e\u305b\u3093 ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"\u65e5\u4ed8\u3068\u6642\u523b\u306e\u5f62\u5f0f\u304c\u6b63\u3057\u304f\u3042\u308a\u307e\u305b\u3093"},"DatePickerSyntax":{"Message":"\u7121\u52b9\u306a\u65e5\u4ed8\u30d5\u30a9\u30fc\u30de\u30c3\u30c8"},"TimePickerSyntax":{"Message":"\u7121\u52b9\u306a\u6642\u9593\u5f62\u5f0f\u3067\u3059"},"RegExp":{"Message":"\u5024\u306e\u5f62\u5f0f\u304c\u7121\u52b9\u3067\u3059"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Code must start with the {{schemaNamePrefix}} prefix.","OnlySchemaNamePrefixMessage":"Enter at least one more symbol."},"SchemaNameAllowedSymbols":{"Message":"Use symbols: a-z, A-Z, 0-9, underscore or dash. Only letters can be first."}},"BaseViewModel":{"DataSourceAttributeRemoved":"\u5217\u304c\u524a\u9664\u3055\u308c\u307e\u3057\u305f","ValidationErrorMessageSingleErrorField":"\u30d5\u30a3\u30fc\u30eb\u30c9: {0}. \u30a8\u30e9\u30fc: {1}","ValidationErrorMessageSeveralErrorFields":"\u30d5\u30a3\u30fc\u30eb\u30c9: {0}. \u30a8\u30e9\u30fc: {1}","RefreshModelDataConflict":"Creatio\u306b\u306f\u73fe\u5728\u306e\u30da\u30fc\u30b8\u306b\u65b0\u3057\u3044\u30c7\u30fc\u30bf\u304c\u3042\u308a\u307e\u3059\u3002 \u5909\u66f4\u3092\u8868\u793a\u3059\u308b\u306b\u306f\u3001\u4fdd\u5b58\u307e\u305f\u306f\u30ad\u30e3\u30f3\u30bb\u30eb\u3057\u3066\u30da\u30fc\u30b8\u3092\u66f4\u65b0\u3057\u3066\u304f\u3060\u3055\u3044\u3002","WarningModelsWithCircularDependencies":"\u4e00\u90e8\u306e\u30e2\u30c7\u30eb\u306b\u306f\u5faa\u74b0\u4f9d\u5b58\u95a2\u4fc2\u304c\u3042\u308a\u3001\u8aad\u307f\u8fbc\u307e\u308c\u3066\u3044\u307e\u305b\u3093","LoadingModelErrorMessage":"Error occurred during the query execution"}}'),"fr-CA":JSON.parse('{"Validators":{"Autocomplete":{"Message":"Merci de s\xe9lectionner la valeur dans la liste"},"Required":{"Message":"Saisir une valeur"},"MaxLength":{"Message":"Longueur maximale du texte d\xe9pass\xe9e ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Longueur de texte minimale non atteinte ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Format de date et d\'heure non valide"},"DatePickerSyntax":{"Message":"Format de date invalide"},"TimePickerSyntax":{"Message":"Format d\'heure non valide"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed"}}'),zh:JSON.parse('{"Validators":{"Autocomplete":{"Message":"Please select value from the list"},"Required":{"Message":"Enter a value"},"MaxLength":{"Message":"Maximum text length exceeded ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimum text length not reached ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Invalid date and time format"},"DatePickerSyntax":{"Message":"Invalid date format"},"TimePickerSyntax":{"Message":"Invalid time format"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed"}}'),"vi-VN":JSON.parse('{"Validators":{"Autocomplete":{"Message":"Vui l\xf2ng ch\u1ecdn gi\xe1 tr\u1ecb t\u1eeb danh s\xe1ch","SelectionWindowMessage":"Please select value from the list or search using the lookup window"},"Required":{"Message":"Nh\u1eadp m\u1ed9t gi\xe1 tr\u1ecb"},"MaxLength":{"Message":"Maximum text length exceeded ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimum text length not reached ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Invalid date and time format"},"DatePickerSyntax":{"Message":"Invalid date format"},"TimePickerSyntax":{"Message":"Invalid time format"},"RegExp":{"Message":"Invalid value format"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Code must start with the {{schemaNamePrefix}} prefix.","OnlySchemaNamePrefixMessage":"Enter at least one more symbol."},"SchemaNameAllowedSymbols":{"Message":"Use symbols: a-z, A-Z, 0-9, underscore or dash. Only letters can be first."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}","RefreshModelDataConflict":"Creatio has new data for the current page. To view it, save or cancel your changes and refresh the page.","WarningModelsWithCircularDependencies":"Some models have circular dependencies and have not been loaded","LoadingModelErrorMessage":"Error occurred during the query execution"}}'),"tr-TR":JSON.parse('{"Validators":{"Autocomplete":{"Message":"L\xfctfen listeden de\u011fer se\xe7in","SelectionWindowMessage":"L\xfctfen listeden de\u011fer se\xe7in veya arama penceresini kullanarak aray\u0131n"},"Required":{"Message":"De\u011fer girin"},"MaxLength":{"Message":"Maksimum metin uzunlu\u011fu a\u015f\u0131ld\u0131 ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimum metin uzunlu\u011funa ula\u015f\u0131lamad\u0131 ({{ActuAlghength}}/{{MinLength}})"},"DatetimePickerSyntax":{"Message":"Ge\xe7ersiz Tarih ve Saat Bi\xe7imi"},"DatePickerSyntax":{"Message":"Ge\xe7ersiz tarih bi\xe7imi"},"TimePickerSyntax":{"Message":"Ge\xe7ersiz Zaman Bi\xe7imi"},"RegExp":{"Message":"Ge\xe7ersiz de\u011fer bi\xe7imi"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Kod {{schemanameprefix}} \xf6neki ile ba\u015flamal\u0131d\u0131r.","OnlySchemaNamePrefixMessage":"En az bir sembol daha girin."},"SchemaNameAllowedSymbols":{"Message":"Sembolleri kullan\u0131n: A-Z, A-Z, 0-9, alt \xe7izgi veya \xe7izgi.\u0130lk \xf6nce sadece harfler olabilir."}},"BaseViewModel":{"DataSourceAttributeRemoved":"S\xfctun kald\u0131r\u0131ld\u0131","ValidationErrorMessageSingleErrorField":"Alan: {0}.Hata: {1}","ValidationErrorMessageSeveralErrorFields":"Alanlar: {0}.Hata: {1}","RefreshModelDataConflict":"Creatio, ge\xe7erli sayfa i\xe7in yeni verilere sahiptir.G\xf6r\xfcnt\xfclemek i\xe7in de\u011fi\u015fikliklerinizi kaydedin veya iptal edin ve sayfay\u0131 yenileyin.","WarningModelsWithCircularDependencies":"Baz\u0131 modellerin dairesel ba\u011f\u0131ml\u0131l\u0131klar\u0131 vard\u0131r ve y\xfcklenmemi\u015ftir","LoadingModelErrorMessage":"Sorgu y\xfcr\xfctme s\u0131ras\u0131nda hata olu\u015ftu"}}'),"th-TH":JSON.parse('{"Validators":{"Autocomplete":{"Message":"Please select value from the list","SelectionWindowMessage":"Please select value from the list or search using the lookup window"},"Required":{"Message":"\u0e1b\u0e49\u0e2d\u0e19\u0e04\u0e48\u0e32"},"MaxLength":{"Message":"Maximum text length exceeded ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimum text length not reached ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Invalid date and time format"},"DatePickerSyntax":{"Message":"Invalid date format"},"TimePickerSyntax":{"Message":"Invalid time format"},"RegExp":{"Message":"Invalid value format"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Code must start with the {{schemaNamePrefix}} prefix.","OnlySchemaNamePrefixMessage":"Enter at least one more symbol."},"SchemaNameAllowedSymbols":{"Message":"Use symbols: a-z, A-Z, 0-9, underscore or dash. Only letters can be first."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}","RefreshModelDataConflict":"Creatio has new data for the current page. To view it, save or cancel your changes and refresh the page.","WarningModelsWithCircularDependencies":"Some models have circular dependencies and have not been loaded","LoadingModelErrorMessage":"Error occurred during the query execution"}}'),"sv-SE":JSON.parse('{"Validators":{"Autocomplete":{"Message":"V\xe4nligen v\xe4lj v\xe4rde ur listan","SelectionWindowMessage":"Please select value from the list or search using the lookup window"},"Required":{"Message":"Ange ett v\xe4rde"},"MaxLength":{"Message":"Maximum text length exceeded ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimum text length not reached ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Invalid date and time format"},"DatePickerSyntax":{"Message":"Invalid date format"},"TimePickerSyntax":{"Message":"Invalid time format"},"RegExp":{"Message":"Invalid value format"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Code must start with the {{schemaNamePrefix}} prefix.","OnlySchemaNamePrefixMessage":"Enter at least one more symbol."},"SchemaNameAllowedSymbols":{"Message":"Use symbols: a-z, A-Z, 0-9, underscore or dash. Only letters can be first."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}","RefreshModelDataConflict":"Creatio has new data for the current page. To view it, save or cancel your changes and refresh the page.","WarningModelsWithCircularDependencies":"Some models have circular dependencies and have not been loaded","LoadingModelErrorMessage":"Error occurred during the query execution"}}'),"ro-RO":JSON.parse('{"Validators":{"Autocomplete":{"Message":"V\u0103 rug\u0103m s\u0103 selecta\u021bi valoarea din list\u0103","SelectionWindowMessage":"V\u0103 rug\u0103m s\u0103 selecta\u0163i valoarea din list\u0103 sau s\u0103 c\u0103uta\u0163i folosind fereastra lookup-ului"},"Required":{"Message":"Introdu o valoare"},"MaxLength":{"Message":"Lungimea maxim\u0103 a textului a fost dep\u0103\u0219it\u0103 ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Lungimea minim\u0103 a textului nu a fost atins\u0103 ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Format dat\u0103 \u0219i or\u0103 invalid"},"DatePickerSyntax":{"Message":"Format dat\u0103 invalid"},"TimePickerSyntax":{"Message":"Format orar invalid"},"RegExp":{"Message":"Format valoare invalid"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Codul trebuie s\u0103 \xeenceap\u0103 cu {{schemaNamePrefix}}  prefix.","OnlySchemaNamePrefixMessage":"Introduce\u021bi cel pu\u021bin \xeenc\u0103 un simbol."},"SchemaNameAllowedSymbols":{"Message":"Folosi\u021bi simbolurile: a-z, A-Z, 0-9, underscore sau dash. Doar litere pot fi primul."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Coloan\u0103 eliminat\u0103","ValidationErrorMessageSingleErrorField":"C\xe2mp: {0}. Eroare: {1}","ValidationErrorMessageSeveralErrorFields":"C\xe2mpuri: {0}. Eroare: {1}","RefreshModelDataConflict":"Creatio are date noi pentru pagina curent\u0103. Pentru a o vizualiza, salva\u021bi sau anula\u021bi modific\u0103rile \u0219i re\xeemprosp\u0103ta\u021bi pagina.","WarningModelsWithCircularDependencies":"Unele modele au dependen\u021be circulare \u0219i nu au fost \xeenc\u0103rcate","LoadingModelErrorMessage":"A ap\u0103rut o eroare \xeen timpul execut\u0103rii interog\u0103rii"}}'),"pt-PT":JSON.parse('{"Validators":{"Autocomplete":{"Message":"Selecione um valor da lista","SelectionWindowMessage":"Please select value from the list or search using the lookup window"},"Required":{"Message":"Insira um valor"},"MaxLength":{"Message":"Limite m\xe1ximo de texto excedido ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Limite m\xednimo de texto n\xe3o alcan\xe7ado ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Formado de data e hora inv\xe1lido"},"DatePickerSyntax":{"Message":"Formato de data inv\xe1lido"},"TimePickerSyntax":{"Message":"Formato de hora inv\xe1lido"},"RegExp":{"Message":"Invalid value format"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Code must start with the {{schemaNamePrefix}} prefix.","OnlySchemaNamePrefixMessage":"Enter at least one more symbol."},"SchemaNameAllowedSymbols":{"Message":"Use symbols: a-z, A-Z, 0-9, underscore or dash. Only letters can be first."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Coluna removida","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}","RefreshModelDataConflict":"Creatio has new data for the current page. To view it, save or cancel your changes and refresh the page.","WarningModelsWithCircularDependencies":"Some models have circular dependencies and have not been loaded","LoadingModelErrorMessage":"Error occurred during the query execution"}}'),"pt-BR":JSON.parse('{"Validators":{"Autocomplete":{"Message":"Favor, selecionar um valor da lista","SelectionWindowMessage":"Selecionar o valor na lista ou pesquisar utilizando a janela de pesquisas"},"Required":{"Message":"Inserir um valor"},"MaxLength":{"Message":"Comprimento m\xe1ximo de texto excedido ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Comprimento m\xednimo do texto n\xe3o atingido ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Formato de data e hora inv\xe1lido"},"DatePickerSyntax":{"Message":"Formato de data inv\xe1lido"},"TimePickerSyntax":{"Message":"Formato de hora inv\xe1lido"},"RegExp":{"Message":"Formato de valor inv\xe1lido"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"O c\xf3digo deve come\xe7ar com o prefixo \\"{{schemaNamePrefix}}\\"","OnlySchemaNamePrefixMessage":"Inserir ao menos mais um s\xedmbolo."},"SchemaNameAllowedSymbols":{"Message":"Usar os s\xedmbolos: a-z, A-Z, 0-9, sublinhados ou tra\xe7os. Apenas letras podem vir primeiramente."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Coluna removida","ValidationErrorMessageSingleErrorField":"Campo: {0}. Erro: {1}","ValidationErrorMessageSeveralErrorFields":"Campos: {0}. Erro: {1}","RefreshModelDataConflict":"Creatio tem novos dados para a p\xe1gina atual. Para visualiz\xe1-los, salvar ou cancelar as suas altera\xe7\xf5es e atualizar a p\xe1gina.","WarningModelsWithCircularDependencies":"Alguns modelos t\xeam depend\xeancias circulares e n\xe3o foram carregadas","LoadingModelErrorMessage":"Ocorreu um erro durante a execu\xe7\xe3o da query"}}'),"pl-PL":JSON.parse('{"Validators":{"Autocomplete":{"Message":"Wybierz warto\u015b\u0107 z listy","SelectionWindowMessage":"Prosz\u0119 wybra\u0107 warto\u015b\u0107 z listy lub wyszuka\u0107 za pomoc\u0105 okna wyszukiwania"},"Required":{"Message":"Wpisz warto\u015b\u0107"},"MaxLength":{"Message":"Przekroczono maksymaln\u0105 d\u0142ugo\u015b\u0107 tekstu ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimalna d\u0142ugo\u015b\u0107 tekstu nie zosta\u0142a osi\u0105gni\u0119ta ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Nieprawid\u0142owy format daty i godziny"},"DatePickerSyntax":{"Message":"Nieprawid\u0142owy format daty"},"TimePickerSyntax":{"Message":"Nieprawid\u0142owy format czasu"},"RegExp":{"Message":"Nieprawid\u0142owy format warto\u015bci"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Kod musi zaczyna\u0107 si\u0119 od prefiksu \\"{{schemaNamePrefix}}\\"","OnlySchemaNamePrefixMessage":"Wprowad\u017a co najmniej jeden dodatkowy symbol."},"SchemaNameAllowedSymbols":{"Message":"U\u017cyj symboli: a-z, A-Z, 0-9, podkre\u015blenie lub my\u015blnik. Tylko litery mog\u0105 by\u0107 pierwsze."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Kolumna usuni\u0119ta","ValidationErrorMessageSingleErrorField":"Pola: {0}. B\u0142\u0105d: {1}","ValidationErrorMessageSeveralErrorFields":"Pola: {0}. B\u0142\u0105d: {1}","RefreshModelDataConflict":"Creatio ma nowe dane dla bie\u017c\u0105cej strony. Aby je wy\u015bwietli\u0107, zapisz lub anuluj zmiany i od\u015bwie\u017c stron\u0119.","WarningModelsWithCircularDependencies":"Niekt\xf3re modele maj\u0105 cykliczne zale\u017cno\u015bci i nie zosta\u0142y za\u0142adowane","LoadingModelErrorMessage":"Wyst\u0105pi\u0142 b\u0142\u0105d podczas wykonywania zapytania"}}'),no:JSON.parse('{"Validators":{"Autocomplete":{"Message":"Please select value from the list"},"Required":{"Message":"Enter a value"},"MaxLength":{"Message":"Maximum text length exceeded ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimum text length not reached ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Invalid date and time format"},"DatePickerSyntax":{"Message":"Invalid date format"},"TimePickerSyntax":{"Message":"Invalid time format"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed"}}'),"nl-NL":JSON.parse('{"Validators":{"Autocomplete":{"Message":"Selecteer een waarde uit de lijst","SelectionWindowMessage":"Please select value from the list or search using the lookup window"},"Required":{"Message":"Voer een waarde in"},"MaxLength":{"Message":"Maximum text length exceeded ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimum text length not reached ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Invalid date and time format"},"DatePickerSyntax":{"Message":"Invalid date format"},"TimePickerSyntax":{"Message":"Invalid time format"},"RegExp":{"Message":"Invalid value format"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"De code moet beginnen met het prefix {{schemaNamePrefix}}.","OnlySchemaNamePrefixMessage":"Voer minstens nog \xe9\xe9n symbool in."},"SchemaNameAllowedSymbols":{"Message":"Gebruik symbolen: a-z, A-Z, 0-9, underscore of dash. Alleen letters kunnen eerst komen."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}","RefreshModelDataConflict":"Creatio has new data for the current page. To view it, save or cancel your changes and refresh the page.","WarningModelsWithCircularDependencies":"Some models have circular dependencies and have not been loaded","LoadingModelErrorMessage":"Error occurred during the query execution"}}'),"lv-LV":JSON.parse('{"Validators":{"Autocomplete":{"Message":"L\u016bdzu, izv\u0113lieties v\u0113rt\u012bbu no saraksta","SelectionWindowMessage":"L\u016bdzu, izv\u0113lieties v\u0113rt\u012bbu no saraksta vai mekl\u0113jiet, izmantojot logu"},"Required":{"Message":"Ievadiet v\u0113rt\u012bbu"},"MaxLength":{"Message":"P\u0101rsniegts maksim\u0101lais teksta garums ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minim\u0101lais teksta garums nav sasniegts ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Neder\u012bgs datuma un laika form\u0101ts"},"DatePickerSyntax":{"Message":"Neder\u012bgs datu form\u0101ts"},"TimePickerSyntax":{"Message":"Neder\u012bgs laika form\u0101ts"},"RegExp":{"Message":"Neder\u012bgs v\u0113rt\u012bbu form\u0101ts"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Kodam j\u0101s\u0101kas ar \\"{{schemaNamePrefix}}\\" prefiksu.","OnlySchemaNamePrefixMessage":"Ievadiet vismaz vienu simbolu."},"SchemaNameAllowedSymbols":{"Message":"Izmantojiet simbolus: a-z, A-Z, 0-9, pasv\u012btrojums vai domuz\u012bme. Tikai burti var b\u016bt pirmie."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Kolonna no\u0146emta","ValidationErrorMessageSingleErrorField":"Lauka: {0}. K\u013c\u016bda: {1}","ValidationErrorMessageSeveralErrorFields":"Lauki: {0}. K\u013c\u016bda: {1}","RefreshModelDataConflict":"Creatio ir jauni dati pa\u0161reiz\u0113jai lapai. Lai tos apskat\u012btu, saglab\u0101jiet vai atceliet savas izmai\u0146as un atjaunojiet lapu.","WarningModelsWithCircularDependencies":"Da\u017eiem mode\u013ciem ir apa\u013cas atkar\u012bbas un tie nav iel\u0101d\u0113ti","LoadingModelErrorMessage":"K\u013c\u016bda notika vaic\u0101juma izpildes laik\u0101"}}'),"kk-KZ":JSON.parse('{"Validators":{"Autocomplete":{"Message":"Please select value from the list"},"Required":{"Message":"Enter a value"},"MaxLength":{"Message":"Maximum text length exceeded ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimum text length not reached ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Invalid date and time format"},"DatePickerSyntax":{"Message":"Invalid date format"},"TimePickerSyntax":{"Message":"Invalid time format"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}"}}'),"it-IT":JSON.parse('{"Validators":{"Autocomplete":{"Message":"Seleziona il valore dalla lista","SelectionWindowMessage":"Seleziona il valore dalla lista o cercalo usando la finestra di lookup"},"Required":{"Message":"Inserisci un valore"},"MaxLength":{"Message":"Lunghezza massima del testo superata ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Lunghezza minima del testo non raggiunta ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Formato data e ora non valido"},"DatePickerSyntax":{"Message":"Formato data non valido"},"TimePickerSyntax":{"Message":"Formato orario non valido"},"RegExp":{"Message":"Formato valore non valido"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Il codice deve iniziare con il prefisso {{schemaNamePrefix}}.","OnlySchemaNamePrefixMessage":"Inserisci almeno un altro simbolo."},"SchemaNameAllowedSymbols":{"Message":"Usa i simboli: a-z, A-Z, 0-9, trattino basso o trattino. Solo le lettere possono essere le prime."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Colonna rimossa","ValidationErrorMessageSingleErrorField":"Campo: {0}. Errore: {1}","ValidationErrorMessageSeveralErrorFields":"Campi: {0}. Errore: {1}","RefreshModelDataConflict":"Creatio ha nuovi dati per la pagina corrente. Per visualizzarli, salva o annulla le modifiche e aggiorna la pagina.","WarningModelsWithCircularDependencies":"Alcuni modelli hanno dipendenze circolari e non sono stati caricati","LoadingModelErrorMessage":"Errore durante l\'esecuzione della query"}}'),"id-ID":JSON.parse('{"Validators":{"Autocomplete":{"Message":"Silakan pilih nilai dari daftar","SelectionWindowMessage":"Pilih nilai dari daftar atau cari menggunakan jendela pencarian"},"Required":{"Message":"Masukkan nilai"},"MaxLength":{"Message":"Panjang teks maksimum terlampaui ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Panjang teks minimum tidak tercapai ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Format tanggal dan waktu tidak valid"},"DatePickerSyntax":{"Message":"Format tanggal tidak valid"},"TimePickerSyntax":{"Message":"Format waktu tidak valid"},"RegExp":{"Message":"Format nilai tidak valid"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Kode harus dimulai dengan awalan {{schemaNamePrefix}}.","OnlySchemaNamePrefixMessage":"Masukkan minimal satu simbol lagi."},"SchemaNameAllowedSymbols":{"Message":"Gunakan simbol: a-z, A-Z, 0-9, garis bawah atau tanda hubung. Hanya huruf yang bisa menjadi yang pertama."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Kolom dihapus","ValidationErrorMessageSingleErrorField":"Bidang {0}. Kesalahan: {1}","ValidationErrorMessageSeveralErrorFields":"Bidang {0}. Kesalahan: {1}","RefreshModelDataConflict":"Creatio memiliki data baru untuk halaman saat ini. Untuk melihatnya, simpan atau batalkan perubahan Anda dan perbarui halaman.","WarningModelsWithCircularDependencies":"Beberapa model memiliki referensi melingkar dan belum dimuat","LoadingModelErrorMessage":"Error occurred during the query execution"}}'),"he-IL":JSON.parse('{"Validators":{"Autocomplete":{"Message":"\u05d0\u05e0\u05d0 \u05d1\u05d7\u05e8 \u05e2\u05e8\u05da \u05de\u05d4\u05e8\u05e9\u05d9\u05de\u05d4","SelectionWindowMessage":"Please select value from the list or search using the lookup window"},"Required":{"Message":"\u05d4\u05d6\u05df \u05e2\u05e8\u05da"},"MaxLength":{"Message":"\u05d7\u05e8\u05d9\u05d2\u05d4 \u05de\u05d0\u05d5\u05e8\u05da \u05d4\u05d8\u05e7\u05e1\u05d8 \u05d4\u05de\u05e8\u05d1\u05d9 ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"\u05dc\u05d0 \u05d4\u05d5\u05e9\u05d2 \u05d0\u05d5\u05e8\u05da \u05d4\u05d8\u05e7\u05e1\u05d8 \u05d4\u05de\u05d9\u05e0\u05d9\u05de\u05dc\u05d9 ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"\u05e4\u05d5\u05e8\u05de\u05d8 \u05ea\u05d0\u05e8\u05d9\u05da \u05d5\u05e9\u05e2\u05d4 \u05dc\u05d0 \u05d7\u05d5\u05e7\u05d9"},"DatePickerSyntax":{"Message":"\u05e4\u05d5\u05e8\u05de\u05d8 \u05ea\u05d0\u05e8\u05d9\u05da \u05dc\u05d0 \u05e0\u05db\u05d5\u05df"},"TimePickerSyntax":{"Message":"\u05e4\u05d5\u05e8\u05de\u05d8 \u05d6\u05de\u05df \u05dc\u05d0 \u05d7\u05d5\u05e7\u05d9"},"RegExp":{"Message":"Invalid value format"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"\u05d4\u05e7\u05d5\u05d3 \u05d7\u05d9\u05d9\u05d1 \u05dc\u05d4\u05ea\u05d7\u05d9\u05dc \u05e2\u05dd \u05d4\u05e7\u05d9\u05d3\u05d5\u05de\u05ea {{schemaNamePrefix}}.","OnlySchemaNamePrefixMessage":"\u05d4\u05d6\u05df \u05dc\u05e4\u05d7\u05d5\u05ea \u05ea\u05d5 \u05e0\u05d5\u05e1\u05e3 \u05d0\u05d7\u05d3."},"SchemaNameAllowedSymbols":{"Message":"\u05d4\u05e9\u05ea\u05de\u05e9 \u05d1\u05e1\u05de\u05dc\u05d9\u05dd: a-z, A-Z, 0-9, \u05e7\u05d5 \u05ea\u05d7\u05ea\u05d9 \u05d0\u05d5 \u05de\u05e7\u05e3. \u05e8\u05e7 \u05d0\u05d5\u05ea\u05d9\u05d5\u05ea \u05d9\u05db\u05d5\u05dc\u05d5\u05ea \u05dc\u05d4\u05d9\u05d5\u05ea \u05e8\u05d0\u05e9\u05d5\u05e0\u05d5\u05ea."}},"BaseViewModel":{"DataSourceAttributeRemoved":"\u05d4\u05e2\u05de\u05d5\u05d3\u05d4 \u05d4\u05d5\u05e1\u05e8\u05d4","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}","RefreshModelDataConflict":"Creatio has new data for the current page. To view it, save or cancel your changes and refresh the page.","WarningModelsWithCircularDependencies":"Some models have circular dependencies and have not been loaded","LoadingModelErrorMessage":"\u05d0\u05d9\u05e8\u05e2\u05d4 \u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05de\u05d4\u05dc\u05da \u05d1\u05d9\u05e6\u05d5\u05e2 \u05d4\u05e9\u05d0\u05d9\u05dc\u05ea\u05d4"}}'),"fr-FR":JSON.parse('{"Validators":{"Autocomplete":{"Message":"Merci de s\xe9lectionner la valeur dans la liste","SelectionWindowMessage":"Merci de s\xe9lectionner une valeur dans la liste ou rechercher \xe0 l\'aide de la fen\xeatre de recherche"},"Required":{"Message":"Saisir une valeur"},"MaxLength":{"Message":"Longueur maximale du texte d\xe9pass\xe9e ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Longueur de texte minimale non atteinte ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Format de date et d\'heure non valide"},"DatePickerSyntax":{"Message":"Format de date invalide"},"TimePickerSyntax":{"Message":"Format d\'heure non valide"},"RegExp":{"Message":"Format de valeur invalide"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Le code doit commencer par le pr\xe9fixe \\"{{schemaNamePrefix}}\\"","OnlySchemaNamePrefixMessage":"Entrez au moins un symbole de plus."},"SchemaNameAllowedSymbols":{"Message":"Utilisez des symboles : a-z, A-Z, 0-9, tiret bas ou tiret. Seules les lettres peuvent \xeatre en premier."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Colonne supprim\xe9e","ValidationErrorMessageSingleErrorField":"Champ: {0}. Erreur: {1}","ValidationErrorMessageSeveralErrorFields":"Champs : {0}. Erreur: {1}","RefreshModelDataConflict":"Creatio a de nouvelles donn\xe9es pour la page en cours. Pour les visualiser, enregistrez ou annulez vos modifications et actualisez la page.","WarningModelsWithCircularDependencies":"Certains mod\xe8les disposent de d\xe9pendances circulaires et n\'ont pas \xe9t\xe9 charg\xe9s","LoadingModelErrorMessage":"Une erreur s\'est produite lors de l\'ex\xe9cution de la requ\xeate"}}'),"fa-IR":JSON.parse('{"Validators":{"Autocomplete":{"Message":"Please select value from the list"},"Required":{"Message":"\u06cc\u06a9 \u0645\u0642\u062f\u0627\u0631 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"},"MaxLength":{"Message":"Maximum text length exceeded ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimum text length not reached ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Invalid date and time format"},"DatePickerSyntax":{"Message":"Invalid date format"},"TimePickerSyntax":{"Message":"Invalid time format"}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}"}}'),"es-ES":JSON.parse('{"Validators":{"Autocomplete":{"Message":"Seleccione un valor de la lista","SelectionWindowMessage":"Por favor, seleccione el valor de la lista o busque usando la ventana de b\xfasqueda"},"Required":{"Message":"Ingrese valor"},"MaxLength":{"Message":"Se super\xf3 la longitud m\xe1xima del texto ({{actualLength}} / {{maxLength}})"},"MinLength":{"Message":"No se alcanz\xf3 la longitud m\xednima del texto ({{actualLength}} / {{minLength}})"},"DatetimePickerSyntax":{"Message":"Formato de fecha y hora inv\xe1lido"},"DatePickerSyntax":{"Message":"Formato de fecha inv\xe1lido"},"TimePickerSyntax":{"Message":"Formato de hora inv\xe1lido"},"RegExp":{"Message":"Formato de valor inv\xe1lido"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"El c\xf3digo debe comenzar con el prefijo \\"{{schemaNamePrefix}}\\".","OnlySchemaNamePrefixMessage":"Ingrese al menos un s\xedmbolo m\xe1s."},"SchemaNameAllowedSymbols":{"Message":"Use s\xedmbolos: a-z, A-Z, 0-9, guion bajo o guion. Solo las letras pueden ser las primeras."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Columna eliminada","ValidationErrorMessageSingleErrorField":"Campo: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Campos: {0}. Error: {1}","RefreshModelDataConflict":"Creatio tiene nuevos datos para la p\xe1gina actual. Para verlo, guarde o cancele los cambios y actualice la p\xe1gina.","WarningModelsWithCircularDependencies":"Algunos modelos tienen dependencias circulares y no han sido cargados","LoadingModelErrorMessage":"Se produjo un error durante la ejecuci\xf3n de la consulta"}}'),"de-DE":JSON.parse('{"Validators":{"Autocomplete":{"Message":"Bitte w\xe4hlen Sie einen Wert aus der Liste","SelectionWindowMessage":"Bitte w\xe4hlen Sie den Wert aus der Liste oder suchen Sie im Suchfenster"},"Required":{"Message":"Wert eingeben"},"MaxLength":{"Message":"Maximale Textl\xe4nge \xfcberschritten ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimale Textl\xe4nge nicht erreicht ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Ung\xfcltiges Datums- und Zeitformat"},"DatePickerSyntax":{"Message":"Ung\xfcltiges Datumsformat"},"TimePickerSyntax":{"Message":"Ung\xfcltiges Zeitformat"},"RegExp":{"Message":"Ung\xfcltiges Wertformat"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Code muss mit dem {{schemaNamePrefix}} Pr\xe4fix beginnen.","OnlySchemaNamePrefixMessage":"Geben Sie mindestens ein weiteres Zeichen ein."},"SchemaNameAllowedSymbols":{"Message":"Symbole verwenden: a-z, A-Z, 0-9, Unterstrich oder Bindestrich. Das erste Zeichen muss ein Buchstabe sein."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Spalte entfernt","ValidationErrorMessageSingleErrorField":"Felder: {0}. Fehler: {1}","ValidationErrorMessageSeveralErrorFields":"Felder: {0}. Fehler: {1}","RefreshModelDataConflict":"Creatio hat neue Daten f\xfcr die aktuelle Seite. Um sie anzuzeigen, speichern oder l\xf6schen Sie Ihre \xc4nderungen und aktualisieren Sie die Seite.","WarningModelsWithCircularDependencies":"Einige Modelle haben zirkul\xe4re Abh\xe4ngigkeiten und wurden nicht geladen","LoadingModelErrorMessage":"Fehler bei der Ausf\xfchrung der Abfrage"}}'),"cs-CZ":JSON.parse('{"Validators":{"Autocomplete":{"Message":"Vyberte pros\xedm hodnotu ze seznamu","SelectionWindowMessage":"Please select value from the list or search using the lookup window"},"Required":{"Message":"Zadejte hodnotu"},"MaxLength":{"Message":"Byla p\u0159ekro\u010dena maxim\xe1ln\xed d\xe9lka textu ({{Aktu\xe1ln\xedD\xe9lka}}/{{Maxim\xe1ln\xedD\xe9lka}})"},"MinLength":{"Message":"Nebyla dosa\u017eena minim\xe1ln\xed d\xe9lka textu ({{Aktu\xe1ln\xedD\xe9lka}}/{{Minim\xe1ln\xedD\xe9lka}})"},"DatetimePickerSyntax":{"Message":"Neplatn\xfd form\xe1t data a \u010dasu"},"DatePickerSyntax":{"Message":"Neplatn\xfd form\xe1t data"},"TimePickerSyntax":{"Message":"Neplatn\xfd form\xe1t \u010dasu"},"RegExp":{"Message":"Invalid value format"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Code must start with the {{schemaNamePrefix}} prefix.","OnlySchemaNamePrefixMessage":"Enter at least one more symbol."},"SchemaNameAllowedSymbols":{"Message":"Use symbols: a-z, A-Z, 0-9, underscore or dash. Only letters can be first."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}","RefreshModelDataConflict":"Creatio has new data for the current page. To view it, save or cancel your changes and refresh the page.","WarningModelsWithCircularDependencies":"Some models have circular dependencies and have not been loaded","LoadingModelErrorMessage":"Error occurred during the query execution"}}'),"ar-SA":JSON.parse('{"Validators":{"Autocomplete":{"Message":"\u064a\u0631\u062c\u0649 \u062a\u062d\u062f\u064a\u062f \u0642\u064a\u0645\u0629 \u0645\u0646 \u0627\u0644\u0642\u0627\u0626\u0645\u0629","SelectionWindowMessage":"\u064a\u0631\u062c\u0649 \u062a\u062d\u062f\u064a\u062f \u0642\u064a\u0645\u0629 \u0645\u0646 \u0627\u0644\u0642\u0627\u0626\u0645\u0629 \u0623\u0648 \u0627\u0644\u0628\u062d\u062b \u0628\u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0646\u0627\u0641\u0630\u0629 \u0627\u0644\u0628\u062d\u062b"},"Required":{"Message":"\u0627\u062f\u062e\u0644 \u0642\u064a\u0645\u0629"},"MaxLength":{"Message":"\u062a\u062c\u0627\u0648\u0632 \u0627\u0644\u062d\u062f \u0627\u0644\u0623\u0642\u0635\u0649 \u0644\u0637\u0648\u0644 \u0627\u0644\u0646\u0635 ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"\u0644\u0645 \u064a\u062a\u0645 \u0628\u0644\u0648\u063a \u0627\u0644\u062d\u062f \u0627\u0644\u0623\u062f\u0646\u0649 \u0644\u0637\u0648\u0644 \u0627\u0644\u0646\u0635 ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"\u062a\u0646\u0633\u064a\u0642 \u0627\u0644\u062a\u0627\u0631\u064a\u062e \u0648\u0627\u0644\u0648\u0642\u062a \u063a\u064a\u0631 \u0635\u0627\u0644\u062d"},"DatePickerSyntax":{"Message":"\u062a\u0646\u0633\u064a\u0642 \u0627\u0644\u062a\u0627\u0631\u064a\u062e \u063a\u064a\u0631 \u0635\u0627\u0644\u062d"},"TimePickerSyntax":{"Message":"\u062a\u0646\u0633\u064a\u0642 \u0627\u0644\u0648\u0642\u062a \u063a\u064a\u0631 \u0635\u0627\u0644\u062d"},"RegExp":{"Message":"\u062a\u0646\u0633\u064a\u0642 \u0627\u0644\u0642\u064a\u0645\u0629 \u063a\u064a\u0631 \u0635\u0627\u0644\u062d"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"\u064a\u062c\u0628 \u0623\u0646 \u064a\u0628\u062f\u0623 \u0627\u0644\u0631\u0645\u0632 \u0628\u0628\u0627\u062f\u0626\u0629 {{schemaNamePrefix}}.","OnlySchemaNamePrefixMessage":"\u0623\u062f\u062e\u0644 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644 \u0631\u0645\u0632 \u0625\u0636\u0627\u0641\u064a \u0648\u0627\u062d\u062f."},"SchemaNameAllowedSymbols":{"Message":"\u0627\u0633\u062a\u062e\u062f\u0645 \u0627\u0644\u0631\u0645\u0648\u0632: a-z\u060c \u0623\u0648 A-Z \u0623\u0648 0-9 (_) \u0623\u0648 (-). \u0648\u064a\u0645\u0643\u0646 \u0641\u0642\u0637 \u0644\u0644\u062d\u0631\u0648\u0641 \u0623\u0646 \u062a\u0643\u0648\u0646 \u0623\u0648\u0644\u064b\u0627."}},"BaseViewModel":{"DataSourceAttributeRemoved":"\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0639\u0645\u0648\u062f","ValidationErrorMessageSingleErrorField":"\u0627\u0644\u062d\u0642\u0644: {0}. \u0627\u0644\u062e\u0637\u0623: {1}","ValidationErrorMessageSeveralErrorFields":"\u0627\u0644\u062d\u0642\u0648\u0644: {0}. \u0627\u0644\u062e\u0637\u0623: {1}","RefreshModelDataConflict":"\u0644\u062f\u0649 Creatio \u0628\u064a\u0627\u0646\u0627\u062a \u062c\u062f\u064a\u062f\u0629 \u0644\u0644\u0635\u0641\u062d\u0629 \u0627\u0644\u062d\u0627\u0644\u064a\u0629. \u0644\u0639\u0631\u0636\u0647\u0627\u060c \u064a\u062c\u0628 \u062d\u0641\u0638 \u0623\u0648 \u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u062a\u063a\u064a\u064a\u0631\u0627\u062a \u0627\u0644\u062e\u0627\u0635\u0629 \u0628\u0643 \u0648\u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0635\u0641\u062d\u0629.","WarningModelsWithCircularDependencies":"\u0628\u0639\u0636 \u0627\u0644\u0646\u0645\u0627\u0630\u062c \u0644\u0647\u0627 \u062a\u0628\u0639\u064a\u0627\u062a \u062f\u0627\u0626\u0631\u064a\u0629 \u0648\u0644\u0645 \u064a\u062a\u0645 \u062a\u062d\u0645\u064a\u0644\u0647\u0627","LoadingModelErrorMessage":"Error occurred during the query execution"}}'),"en-US":JSON.parse('{"Validators":{"Autocomplete":{"Message":"Please select value from the list","SelectionWindowMessage":"Please select value from the list or search using the lookup window"},"Required":{"Message":"Enter a value"},"MaxLength":{"Message":"Maximum text length exceeded ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"Minimum text length not reached ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"Invalid date and time format"},"DatePickerSyntax":{"Message":"Invalid date format"},"TimePickerSyntax":{"Message":"Invalid time format"},"RegExp":{"Message":"Invalid value format"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"Code must start with the {{schemaNamePrefix}} prefix.","OnlySchemaNamePrefixMessage":"Enter at least one more symbol."},"SchemaNameAllowedSymbols":{"Message":"Use symbols: a-z, A-Z, 0-9, underscore or dash. Only letters can be first."},"UniqueCodeColumnValue":{"Message":"The value \'{{controlValue}}\' already exists in the \'Code\' column."}},"BaseViewModel":{"DataSourceAttributeRemoved":"Column removed","ValidationErrorMessageSingleErrorField":"Field: {0}. Error: {1}","ValidationErrorMessageSeveralErrorFields":"Fields: {0}. Error: {1}","RefreshModelDataConflict":"Creatio has new data for the current page. To view it, save or cancel your changes and refresh the page.","WarningModelsWithCircularDependencies":"Some models have circular dependencies and have not been loaded","LoadingModelErrorMessage":"Error occurred during the query execution"},"LoadDataRequest":{"SuccessMessage":"Data has been refreshed"}}'),"ru-RU":JSON.parse('{"Validators":{"Autocomplete":{"Message":"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430","SelectionWindowMessage":"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430 \u0438\u043b\u0438 \u043e\u043a\u043d\u0430 \u0432\u044b\u0431\u043e\u0440\u0430"},"Required":{"Message":"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435"},"MaxLength":{"Message":"\u041f\u0440\u0435\u0432\u044b\u0448\u0435\u043d\u0430 \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u0430\u044f \u0434\u043b\u0438\u043d\u0430 \u0442\u0435\u043a\u0441\u0442\u0430 ({{actualLength}}/{{maxLength}})"},"MinLength":{"Message":"\u041d\u0435 \u0434\u043e\u0441\u0442\u0438\u0433\u043d\u0443\u0442\u0430 \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u0430\u044f \u0434\u043b\u0438\u043d\u0430 \u0442\u0435\u043a\u0441\u0442\u0430 ({{actualLength}}/{{minLength}})"},"DatetimePickerSyntax":{"Message":"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0434\u0430\u0442\u044b \u0438 \u0432\u0440\u0435\u043c\u0435\u043d\u0438"},"DatePickerSyntax":{"Message":"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0434\u0430\u0442\u044b"},"TimePickerSyntax":{"Message":"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0432\u0440\u0435\u043c\u0435\u043d\u0438"},"RegExp":{"Message":"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f"},"SchemaNamePrefix":{"NoSchemaNamePrefixMessage":"\u041a\u043e\u0434 \u0434\u043e\u043b\u0436\u0435\u043d \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f \u0441 \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u0430 {{schemaNamePrefix}}.","OnlySchemaNamePrefixMessage":"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0445\u043e\u0442\u044f \u0431\u044b \u0435\u0449\u0435 \u043e\u0434\u0438\u043d \u0441\u0438\u043c\u0432\u043e\u043b."},"SchemaNameAllowedSymbols":{"Message":"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 a-z, A-Z, 0-9, \u043d\u0438\u0436\u043d\u0435\u0435 \u043f\u043e\u0434\u0447\u0435\u0440\u043a\u0438\u0432\u0430\u043d\u0438\u0435 \u0438\u043b\u0438 \u0442\u0438\u0440\u0435. \u0422\u043e\u043b\u044c\u043a\u043e \u0431\u0443\u043a\u0432\u044b \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u043f\u0435\u0440\u0432\u044b\u043c\u0438."},"UniqueCodeColumnValue":{"Message":"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \'{{controlValue}}\' \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0432 \u043a\u043e\u043b\u043e\u043d\u043a\u0435 \'\u041a\u043e\u0434\'."}},"BaseViewModel":{"DataSourceAttributeRemoved":"\u041a\u043e\u043b\u043e\u043d\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0430","ValidationErrorMessageSingleErrorField":"\u041f\u043e\u043b\u0435: {0}. \u041e\u0448\u0438\u0431\u043a\u0430: {1}","ValidationErrorMessageSeveralErrorFields":"\u041f\u043e\u043b\u044f: {0}. \u041e\u0448\u0438\u0431\u043a\u0430: {1}","RefreshModelDataConflict":"\u0412 \u0441\u0438\u0441\u0442\u0435\u043c\u0435 \u0435\u0441\u0442\u044c \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b. \u0427\u0442\u043e\u0431\u044b \u0438\u0445 \u043e\u0442\u043e\u0431\u0440\u0430\u0437\u0438\u0442\u044c. \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u0435 \u0438\u043b\u0438 \u043e\u0442\u043c\u0435\u043d\u0438\u0442\u0435 \u0432\u043d\u0435\u0441\u0435\u043d\u043d\u044b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0438 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443.","WarningModelsWithCircularDependencies":"\u041d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0434\u0435\u043b\u0438 \u0438\u043c\u0435\u044e\u0442 \u0446\u0438\u043a\u043b\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u0438 \u043d\u0435 \u0431\u044b\u043b\u0438 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u044b","LoadingModelErrorMessage":"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0430"},"LoadDataRequest":{"SuccessMessage":"\u0414\u0430\u043d\u043d\u044b\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b"}}')};let ib=class Fy{static{this.\u0275fac=function(t){return new(t||Fy)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:Fy})}static{this.\u0275inj=i.\u0275\u0275defineInjector({providers:[Qi,ho,go,Ci,c.FeatureService,{provide:ns,useClass:Wl},{provide:ts,useClass:to},{provide:Ul,useClass:zl},_.vnp,Dn,_.Qhy,qS,{provide:fl,useClass:Co},{provide:gl,useValue:_.Rav.Root},{provide:_.ViS,useValue:_.V_I.instance},ZS,Bl,Gl,cs,wl],imports:[R.CommonModule,ce.X1,Dp,W.h1.forRoot({i18n:JS}),jn,xp]})}};ib=(0,I.Cg)([(0,c.CrtModule)({includes:[xp],requestHandlers:[_o,Fl,fg,yg,_g,Cg,s,gg,bg,Sg,vg,Ig],validators:[yl,ru,ba,Sa,va,eo,tr,Ia,uu,es]})],ib);const YS=new i.InjectionToken("CRT_DESIGN_TIME_METADATA_POSTPROCESSOR");class Rp{constructor(e){this._postprocessors=e??[]}onMetaDataChanged(e){var t=this;return(0,A.A)(function*(){let n=(0,Z.A)(e);for(const a of t._postprocessors)"crtOnMetaDataChanged"in a&&(n=yield a.crtOnMetaDataChanged(n));return n})()}static{this.\u0275fac=function(t){return new(t||Rp)(i.\u0275\u0275inject(YS,8))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Rp,factory:Rp.\u0275fac,providedIn:"root"})}}class KS{constructor(e,t){this._injector=e,this._preprocessors=t,this._featureValues=this._injector.get(_.G2Y),this._measurePerformanceService=this._injector.get(_.gcc)}onMetaDataInit(e){var t=this;return(0,A.A)(function*(){return t._measurePerformanceService.measureCallback(`MetadataPreprocessorsRunner.OnMetadataInit.${e?.name}`,(0,A.A)(function*(){let n=t._featureValues?.DisableCloneDeepMetaData?e:(0,Z.A)(e);for(const a of t._preprocessors)"crtOnMetaDataInit"in a&&(n=yield a.crtOnMetaDataInit(n));return n}))})()}onModelInit(e,t){var n=this;return(0,A.A)(function*(){return n._measurePerformanceService.measureCallback(`MetadataPreprocessorsRunner.onModelInit.${e?.name}`,(0,A.A)(function*(){for(const a of n._preprocessors)"crtOnModelInit"in a&&(e=yield a.crtOnModelInit(e,t));return e}))})()}onViewModelInit(e,t,n){var a=this;return(0,A.A)(function*(){return a._measurePerformanceService.measureCallback(`MetadataPreprocessorsRunner.onViewModelInit.${e?.name}`,(0,A.A)(function*(){for(const r of a._preprocessors)"crtOnViewModelInit"in r&&(e=yield r.crtOnViewModelInit(e,t,n));return e}))})()}getIsPreventCaching(){var e=this;return(0,A.A)(function*(){for(const t of e._preprocessors)if("crtGetIsPreventCaching"in t&&(yield t.crtGetIsPreventCaching()))return Promise.resolve(!0);return Promise.resolve(!1)})()}}class Pp{constructor(e){this._injector=e}createRunner(e){return new KS(this._injector,e)}static{this.\u0275fac=function(t){return new(t||Pp)(i.\u0275\u0275inject(i.Injector))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Pp,factory:Pp.\u0275fac,providedIn:"root"})}}const bo="__preprocessed";class Np{addProperty(e,t,n){this._setMutation(e,t,{operationType:"added"}),e[t]=n}updateProperty({source:e,keys:t,value:n}){if(t.includes(bo))return;const a=t.pop(),r=0===t.length?e:(0,_.EVD)(e,t);r&&(this._setMutation(r,a,{operationType:"modified",input:r[a],output:n}),r[a]=n)}removeProperty(e,t){this._setMutation(e,t,{operationType:"deleted",input:e[t]}),delete e[t]}_forEachWithMutationsInObject(e,t){e&&e[bo]&&t(e);for(const n in e){const a=e[n];"object"==typeof a&&this._forEachWithMutationsInObject(a,t)}}revert(e){const t=e;return this._forEachWithMutationsInObject(t,n=>{this._revertMutations(n)}),e}_setMutation(e,t,n){e[bo]||(e[bo]={}),e[bo][t]=n}_revertMutations(e){const t=e[bo]??{};Object.entries(t).forEach(([n,a])=>{const r=a.operationType;switch(a.operationType){case"added":delete e[n];break;case"modified":(0,j.A)(e[n],a.output)&&(e[n]=a.input);break;case"deleted":e[n]=a.input;break;default:throw new Error(`mutation with type: ${r} not supported`)}}),delete e[bo]}static{this.\u0275fac=function(t){return new(t||Np)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Np,factory:Np.\u0275fac,providedIn:"root"})}}new i.InjectionToken("CRT_METADATA_NAVIGATION_PREPROCESSOR"),new i.InjectionToken("CRT_METADATA_LOOKUP_PREPROCESSOR");class Op{static{this._recordSchemaNameColumnName="RecordSchemaName"}static _getMasterRecordEntitySchemaName(e,t,n){if(!e?.startsWith("$"))return Promise.resolve(null);const a=e.substring(1),r=t.viewModelConfig.attributes?.[a];if(!r)return Promise.resolve(null);let u="";r&&(0,_.o7N)(r)&&(u=r.modelConfig?.path??"");const p=u?.split("."),f=p?.shift()??"",S=p?.pop()??"";return Op.getDataSchemaName({models:n,schema:t,dataSourceName:f,attributeName:S})}static _findRelatedPath(e,t){const n=e.split(".");if(2!==n.length)return;const a=n[0],r=n[1],S=t.modelConfig?.dataSources?.[a]?.config?.attributes?.[r];return S?.path?`${a}.${S.path}`:void 0}static _getRelativeAttributePath(e,t){const a=(t.viewModelConfig.attributes??{})[e]??{};if(!(0,_.o7N)(a)||!a.modelConfig?.path)return;const r=a.modelConfig.path;return this._findRelatedPath(r,t)??r}static _createDependency(e,t){return[{attributePath:t,relationPath:e}]}static _getReferenceColumnName(e){return e.masterRecordColumnName??e.recordColumnName}static getDataSchemaName(e){var t=this;return(0,A.A)(function*(){const n=yield t.getDataSchema(e.models,e.dataSourceName);return n?e.attributeName?n?.attributes.find(r=>r.name===e.attributeName)?.referenceSchemaName??n?.name:n?.name:e.schema.modelConfig?.dataSources?.[e.dataSourceName]?.config?.entitySchemaName})()}static getDataSchema(e,t){const n=e.find(a=>a.getDataSource()?.dataSourceName===t);return(0,h.firstValueFrom)(n?.getSchema()??(0,h.of)(null))}static getDataSourcePrimaryAttribute(e,t="Id"){const n=e.modelConfig?.primaryDataSourceName;if(!n)return"";const a=e.viewModelConfig?.attributes;return a&&!a[t]&&(a[t]={modelConfig:{path:`${n}.${t}`}}),t}static getDataSourceNameByAttribute(e){if(!e?.startsWith("$"))return null;const t=e.substring(1);return this.getAttributeDSName(t)}static getAttributeDSName(e){return`${e}DS`}static createDataSourceConfig(e){return{type:"crt.EntityDataSource",scope:c.DataSourceScope.ViewElement,config:{entitySchemaName:e}}}static getRecordEntitySchemaName(e,t,n,a){var r=this;return(0,A.A)(function*(){const u=Op.getDataSourceNameByAttribute(e);return u&&(yield Op.getDataSchema(a,u))?.findAttributeByName(r._recordSchemaNameColumnName)?r._getMasterRecordEntitySchemaName(t,n,a):Promise.resolve(null)})()}static addDependencies(e,t,n){const a=e.modelConfig?.dependencies??{};if(!a[n]&&t.masterRecordColumnValue){const r=t.masterRecordColumnValue.split("$")[1];if(!r)return;const u=this._getRelativeAttributePath(r,e);if(!u)return;const p=this._getReferenceColumnName(t);if(!p)return;a[n]=this._createDependency(u,p),e.modelConfig=e.modelConfig??{},e.modelConfig.dependencies=a}}static pushDependencies(e,t,n){const a=e.modelConfig?.dependencies??{};a[t]=[...a[t]??[],...n??[]],e.modelConfig=e.modelConfig??{},e.modelConfig.dependencies=a}}class XS{constructor(e){this.injector=e}}class rb{constructor(){this.viewElements=new Set,this.requests=new Set,this.converters=new Set,this.validators=new Set}}function ob(o,e,t=[]){for(const n in o){const a=o[n];"string"==typeof a?e(t.concat(n),a):"object"==typeof a&&null!==a&&(t.push(n),ob(a,e,t),t.pop())}}function e0(o,e,t){const n=(0,_.gPl)(o.type)??[];for(const a of n){const r=o[a];Array.isArray(r)&&Og(o[a]??[],t)}}function Ng(o,e){pa(o).converters?.forEach(t=>e.converters.add(t.type))}function lb(o,e){const t=Array.isArray(o)?o:[o];for(const n of t)e.requests.add(n.request),n.params&&ob(n.params,(a,r)=>{Xe(r)&&Ng(r,e)})}function Og(o,e){for(const t of o){e.viewElements.add(t.type);const n=c.ViewElementRegistry.viewElements.get(t.type);if(n)for(const[a,r]of Object.entries(t))n.inputs&&a in n.inputs&&Xe(r)&&Ng(r,e),r&&n.outputs&&a in n.outputs&&lb(r,e);e0(t,0,e)}}function Vp(o,e,t){e?.lazy&&(!t||t(e))&&o.add(e.lazyModuleRef)}function ub(...o){const e=new rb;return Og(o,e),e}function a0(o,e){const t=new Set,{viewElements:n,requests:a,converters:r,validators:u}=o;for(const S of n)Vp(t,c.ViewElementRegistry.viewElements.get(S));for(const S of r)Vp(t,c.ConverterRegistry.find(S));for(const S of u)Vp(t,c.ValidatorRegistry.items.get(S));const p=function*n0(o){for(const e of o){const t=c.InternalRequestHandlerRegistry.handlersByRequestMap.get(e);if(t)for(const n of t.values())yield n}}(a),f=e?.requestScopes?S=>(0,c.matchScopes)(S.scopes,e.requestScopes):void 0;for(const S of p)Vp(t,S.instanceConfig,f);return t}function db(o){if(!o.modelConfig)return null;if(o.modelConfig.primaryDataSourceName)return o.modelConfig.primaryDataSourceName;if(!o.modelConfig.dataSources)return null;const e=Object.entries(o.modelConfig.dataSources).find(([,t])=>!t?.hiddenInPageDesigner&&t?.scope!==c.DataSourceScope.ViewElement&&t.type!==_.zRA);return e?e[0]:null}var Eu,Lp,pb,jt;!function(o){o[o.Merge=0]="Merge",o[o.Override=1]="Override"}(Eu||(Eu={})),function(o){o[o.Insert=0]="Insert",o[o.Remove=1]="Remove",o[o.Update=2]="Update",o[o.Move=3]="Move",o[o.MoveToIndex=4]="MoveToIndex",o[o.MoveToContainer=5]="MoveToContainer",o[o.CreateDataSource=6]="CreateDataSource",o[o.Rename=7]="Rename",o[o.ParameterChanged=8]="ParameterChanged",o[o.AttributeChanged=9]="AttributeChanged",o[o.DataSourceConfigChanged=10]="DataSourceConfigChanged"}(Lp||(Lp={})),function(o){o.OnlyText="only-text",o.LeftIcon="left-icon",o.RightIcon="right-icon",o.OnlyIcon="only-icon"}(pb||(pb={})),function(o){o.None="none",o.Default="default",o.ExtraSmall="extra-small",o.Small="small",o.Medium="medium",o.Large="large",o.ExtraLarge="extra-large"}(jt||(jt={}));const o0=Object.values(jt);function Fp(o){return!!o&&"string"==typeof o&&o0.includes(o.toLowerCase())}var mb;!function(o){o.Input="crt.Input",o.NumberInput="crt.NumberInput",o.Checkbox="crt.Checkbox",o.Combobox="crt.ComboBox",o.DateTime="crt.DateTimePicker",o.Slider="crt.Slider",o.FileList="crt.FileList",o.Color="crt.ColorPicker",o.RichInput="crt.RichTextEditor",o.PhoneInput="crt.PhoneInput",o.EmailInput="crt.EmailInput",o.WebInput="crt.WebInput",o.ImageLink="crt.ImageInput",o.Timer="crt.Timer",o.LocalTime="crt.LocalTime",o.FileInput="crt.FileInput",o.Timeline="crt.Timeline"}(mb||(mb={}));const m0={name:"",schema:{viewConfigDiff:[],viewModelConfig:{},viewModelConfigDiff:[],modelConfig:{}},structure:{},resources:{localizableImages:{},localizableStrings:{}}};class So{constructor(){this.deepMergeOptions={arrayMerge:this.overwriteArrayMerge},this.jsonPathApplierService=(0,i.inject)(ht)}overwriteArrayMerge(e,t,n){return t}getViewModelConfig(e){return e.reduce((t,n)=>n.viewModelConfigDiff?.length?this.jsonPathApplierService.apply(t,n.viewModelConfigDiff)||{}:(0,en.all)([t,n.viewModelConfig||{}],{...this.deepMergeOptions})||{},{})}getModelConfig(e){return e.reduce((t,n)=>n.modelConfigDiff?.length?this.jsonPathApplierService.apply(t,n.modelConfigDiff)||{}:(0,en.all)([t,n.modelConfig||{}],{...this.deepMergeOptions})||{},{})}getEmptySchemaPart(){return{...m0,schema:{viewConfigDiff:[],viewModelConfig:{attributes:{}},viewModelConfigDiff:[],modelConfig:{dataSources:{[_.cIp]:{type:_.zRA,config:{}}}}}}}static{this.\u0275fac=function(t){return new(t||So)}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:So})}}const h0={tag:"test",viewModelConfig:{attributes:{FirstName:{},Account:{viewModelName:"account"},LastName:{}}},viewConfig:[{name:"Main",type:"crt.FlexContainer",classes:["container"],items:[{name:"ChangeLanguage",type:"crt.Button",caption:"$Resources.Strings.ChangeLanguage",clicked:"$onChangeLanguage"},{id:"Button1",name:"Button",type:"crt.Button",caption:"$FirstName",clicked:"$buttonClick"},{id:"Button2",name:"Button2",type:"crt.Button",caption:"$FirstName"},{name:"Input",type:"crt.DeprecatedInput",caption:"$Resources.Strings.FirstName",value:"$FirstName",enterKeyDown:"$enterKeyDown"},{name:"ViewModelConfigJSONInput",type:"crt.DeprecatedInput",value:"$FirstName"},{name:"resourcesJSONInput",type:"crt.DeprecatedInput",value:"$Account.Name"},{name:"Input4",type:"crt.DeprecatedInput",value:"This is const value"},{name:"Button3",type:"crt.Button",caption:"$Account.Name"},{name:"Button5",type:"crt.Button",caption:"$Account.Employee.Name"},{name:"List2",type:"crt.ComponentList",models:"$Account.Ships",itemViewConfig:{name:"Label",type:"crt.Label",label:"$Account.Ships.Id"}},{name:"List2",type:"crt.ComponentList",models:"$Account.Ships",itemViewConfig:{name:"Input",type:"crt.DeprecatedInput",value:"$Account.Ships.Id"}},{name:"List2",type:"crt.ComponentList",models:"$Account.Ships",itemViewConfig:{type:"crt.FlexContainer",name:"container",items:[{name:"Label",type:"crt.Label",label:"$Resources.Strings.ModelName"},{name:"Label",type:"crt.Label",label:"$Account.Ships.Id"},{name:"Input",type:"crt.DeprecatedInput",value:"$Account.Ships.Id"}]}}]}],resources:{strings:{ChangeLanguage:{"ru-Ru":"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u044f\u0437\u044b\u043a","en-US":"Change language"},FirstName:{"ru-Ru":"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435","en-US":"Name"},ModelName:{"ru-Ru":"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u043e\u0434\u0435\u043b\u0438:","en-US":"Model name:"}}},modelConfig:{dataSources:{}},handlers:[{request:"crt.HandleViewModelInitRequest",handler:o=>new Promise(e=>{o.$context.LastName="Mask",e(5)}),source:{schemaName:"Test",packageName:"Custom"}}],converters:{"crt.Test":o=>"[converted] "+o},validators:{"crt.ShouldEqual":{type:"crt.ShouldEqual",validator:o=>e=>e.value===o.value?null:{ShouldEqual:{message:"ShouldEqual Error"}},params:[{name:"value"}],async:!1}},styles:["test css"]};class xu extends So{build(e){return(0,h.of)(h0)}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(xu)))(n||xu)}})()}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:xu,factory:xu.\u0275fac})}}class ur extends So{constructor(e,t,n){super(),this.jsonApplierService=e,this.userInfo=t,this._featureService=n,this._canUseClientUnitSchemaRequestHandlers=new h.ReplaySubject(1),this._canUseClientUnitSchemaConverters=new h.ReplaySubject(1),this._canUseClientUnitSchemaValidators=new h.ReplaySubject(1),(0,h.lastValueFrom)(this._featureService.getFeaturesState(["DisableClientUnitSchemaRequestHandlers","DisableClientUnitSchemaConverters","DisableClientUnitSchemaValidators"]),{defaultValue:null}).then(([a,r,u])=>{this._canUseClientUnitSchemaRequestHandlers.next(!a),this._canUseClientUnitSchemaConverters.next(!r),this._canUseClientUnitSchemaValidators.next(!u)})}_mergeResources(e){const t={strings:{}},n=this.userInfo.cultureInfo.sysCultureName;for(const{localizableStrings:a}of e)Object.entries(a).forEach(([r,u])=>{t.strings[r]=t.strings[r]||{},t.strings[r][n]=u});return(0,h.of)(t)}_getParameterResources(e){let t={};for(const{parametersLocalizableStrings:n}of e)n&&(t=Object.assign(t,n));return t}_mergeParameters(e,t){let n={};for(const a of e)n={...n,...a};return Object.keys(n).forEach(a=>{n[a].caption=t[a]}),(0,h.of)(n)}_getOptionalProperties(e){return function p0(o){const e=new Map;return o.forEach(t=>{t.forEach(n=>{e.set(n.key,n)})}),Array.from(e.values())}(e.map(t=>t.structure.optionalProperties||[]))}_getHandlers(e){return this._canUseClientUnitSchemaRequestHandlers.pipe((0,rt.$)(),(0,E.T)(t=>t?e.flatMap(n=>n.schema.handlers?.map(a=>({...a,source:{schemaName:n.name,packageName:n.structure.packageName}}))).filter(Boolean):[]))}_getConverters(e){return this._canUseClientUnitSchemaConverters.pipe((0,rt.$)(),(0,E.T)(t=>t?e.reduce((n,a)=>({...n,...a.schema.converters||{}}),{}):{}))}_getValidators(e){return this._canUseClientUnitSchemaValidators.pipe((0,rt.$)(),(0,E.T)(t=>t?e.reduce((n,a)=>{if(a.schema?.validators){const r=Object.entries(a.schema?.validators).map(([u,p])=>({[u]:{...p,type:u}})).reduce((u,p)=>({...u,...p}),{});return{...n,...r}}return{...n}},{}):{}))}_getStructureValue(e,t){let n="";return e.forEach(a=>{const r=t(a?.structure);r&&(n=r)}),n}getSchemaNames(e){return this._getStructureValue(e,t=>t.schemaName)}getSchemaCaption(e){return this._getStructureValue(e,t=>t.schemaCaption)}build(e){const t=[this.getEmptySchemaPart(),...e],n=this._getHandlers(t),a=this._getConverters(t),r=this._mergeResources(t.map(Me=>Me.resources)),u=this._getParameterResources(t.map(Me=>Me.resources)),p=this._mergeParameters(t.map(Me=>Me.structure?.parameters),u),f=this._getOptionalProperties(t),S=this._getValidators(t),w=t.map(Me=>Me.name),O=this.getSchemaNames(t),$=this.getSchemaCaption(t),te=t.map(Me=>Me.schema),Fe=this.getViewModelConfig(te),ke=this.getModelConfig(te);return(0,h.forkJoin)([n,a,r,p,S]).pipe((0,E.T)(([Me,ai,Rt,Oy,jD])=>({viewConfig:this.jsonApplierService.applyDiff([],t.map(kd=>kd.schema.viewConfigDiff||[]),t.map(kd=>({applyMoveIfIndirectParentMoved:kd.structure.schemaVersion>=1}))),viewModelConfig:Fe,modelConfig:ke,styles:(0,en.all)(t.map(kd=>kd.schema.styles||[])),handlers:Me,converters:ai,resources:Rt,validators:jD,parameters:Oy,tag:w.join("."),name:O,caption:$,optionalProperties:f})))}static{this.\u0275fac=function(t){return new(t||ur)(i.\u0275\u0275inject(Qe),i.\u0275\u0275inject(_.oqB),i.\u0275\u0275inject(Gt))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:ur,factory:ur.\u0275fac})}}class Zl extends ur{constructor(e,t,n,a){super(e,t,n),this._schemaChangeListenerService=a,this._bundles=new Map,this._destroyed$=new h.Subject,this._schemaChangeListenerService.schemaChanged$.pipe((0,_e.Q)(this._destroyed$)).subscribe(r=>{r.schemaType===_.L8V.ClientUnitSchema&&Array.from(this._bundles.entries()).filter(([,{schemaName:u}])=>r.name===u).forEach(([u])=>this._bundles.delete(u))})}build(e,t){const n=this.getSchemaNames(e),a=t?.tryGetFromCache??!0,r=e.map(S=>S.name).join("."),u=a&&this._bundles.has(r);let p=null,f=!1;if(u&&(p=this._bundles.get(r),f=e.length===p.parts.length&&(0,j.A)(e,p.parts)),u&&f){const S=p.bundle;return(0,h.of)(S)}return super.build(e).pipe((0,P.M)(w=>{this._bundles.set(r,{bundle:w,schemaName:n,parts:e})}))}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}static{this.\u0275fac=function(t){return new(t||Zl)(i.\u0275\u0275inject(Qe),i.\u0275\u0275inject(_.oqB),i.\u0275\u0275inject(Gt),i.\u0275\u0275inject(_.l2Q))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Zl,factory:Zl.\u0275fac})}}class Jl{constructor(e,t,n){this._jsonDifferService=e,this._jsonObjectDifferService=t,this._jsonPathDifferService=n,this._featureValues=(0,i.inject)(_.G2Y)}_getJsonPathDiff(e,t){return this._jsonPathDifferService.getJsonDiff(e,t,{identifyItemByPath:!0})}getDiff(e,t){const n=e??{viewConfig:{},viewModelConfig:{},modelConfig:{},localizableStrings:{},localizableImages:{}},a=t??{viewConfig:{},viewModelConfig:{},modelConfig:{},localizableStrings:{},localizableImages:{}},u={schema:{viewConfigDiff:this._jsonDifferService.getJsonDiff(n.viewConfig,a.viewConfig,{identifyItemByPath:!0})}};this._setModelConfigDiff(u,n,a),this._setViewModelConfigDiff(u,n,a);const p=this._jsonObjectDifferService.deepObjectDiff(n.localizableStrings,a.localizableStrings);(0,Re.A)(p)||(u.localizableStrings=p);const f=this._jsonObjectDifferService.deepObjectDiff(n.localizableImages,a.localizableImages);return(0,Re.A)(f)||(u.localizableImages=f),u}_setViewModelConfigDiff(e,t,n){this._featureValues?.EnableViewModelConfigDiff?e.schema.viewModelConfigDiff=this._getJsonPathDiff(t.viewModelConfig,n.viewModelConfig):e.schema.viewModelConfig=this._jsonObjectDifferService.deepObjectDiff(t.viewModelConfig,n.viewModelConfig)}_setModelConfigDiff(e,t,n){this._featureValues?.EnableModelConfigDiff?e.schema.modelConfigDiff=this._getJsonPathDiff(t.modelConfig,n.modelConfig):e.schema.modelConfig=this._jsonObjectDifferService.deepObjectDiff(t.modelConfig,n.modelConfig)}static{this.\u0275fac=function(t){return new(t||Jl)(i.\u0275\u0275inject(Ni),i.\u0275\u0275inject(Vi),i.\u0275\u0275inject(gn))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Jl,factory:Jl.\u0275fac})}}var hb=b(61432),g0=b(36164),f0=b(76594);class Vg{}class Yl extends Vg{create(e){const{path:t,entitySchemaName:n,aggregationConfig:a}=e||{};return{type:"Aggregation",path:t,entitySchemaName:n,aggregationConfig:{filter:a?.filter,aggregationFunction:a?.aggregationFunction,sortByColumn:a?.sortByColumn,sortByDirection:a?.sortByDirection}}}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(Yl)))(n||Yl)}})()}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Yl,factory:Yl.\u0275fac,providedIn:"any"})}}class Kl extends Vg{create(e){const{type:t,path:n}=e||{};return{type:/\./.test(n)?c.DataSchemaAttributeType.ForwardReferenceAttribute:t,path:n}}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(Kl)))(n||Kl)}})()}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Kl,factory:Kl.\u0275fac,providedIn:"any"})}}class Ql extends Vg{create(e){const{path:t,functionConfig:n}=e||{};return{type:"Function",path:t,functionConfig:n}}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(Ql)))(n||Ql)}})()}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Ql,factory:Ql.\u0275fac,providedIn:"any"})}}const gb=new i.InjectionToken("A factory of entity data source attribute config creator"),fb=W.gX.create({token:gb,mappings:[{predicate:o=>o.type===c.DataSchemaAttributeType.AggregationAttribute,injectable:Yl},{predicate:o=>o.type===c.DataSchemaAttributeType.FunctionAttribute,injectable:Ql}],default:{injectable:Kl}}),yb=new i.InjectionToken("data source config applier"),_b=new i.InjectionToken("data source instance config");class Au{constructor(e,t,n){this._config=e,this._configApplyFn=t,this._entityDataSourceAttributeConfigCreatorFactory=n}_createAttributeName(e){return(0,_.F8E)(e)}_createAttribute(e){return this._entityDataSourceAttributeConfigCreatorFactory.create(e).create(e)}_getAttributes(){return this._config.attributes||{}}_getAttributeByPath(e){return Object.values(this._getAttributes()).find(t=>t.path===e)}_getAttribute(e){const t=e.name;if(t)return this._getAttributes()[t];const n=e.path;return n?this._getAttributeByPath(n):void 0}_setAttributes(e){this._config.attributes=e}setAttributes(e){const t=e.reduce((n,a)=>{const r=this._createAttributeName(a.name);let u;return a.type===c.DataSchemaAttributeType.AggregationAttribute?(u=this._getAttribute({name:r})||this._createAttribute(a),u.aggregationConfig=a.aggregationConfig,u.entitySchemaName=a.entitySchemaName):u=this._getAttribute({name:r})||this._getAttribute({path:a.path})||this._createAttribute(a),n[r]=u,n},{});return this._setAttributes(t),this}getAttributeNames(){return Object.keys(this._getAttributes())}apply(){this._configApplyFn(this._config)}static{this.\u0275fac=function(t){return new(t||Au)(i.\u0275\u0275inject(_b),i.\u0275\u0275inject(yb),i.\u0275\u0275inject(gb))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Au,factory:Au.\u0275fac,providedIn:"any"})}}class ms{constructor(e){this.injector=e,this._entityDataSourceConfigServices=new Map,this._primaryDataSourceNameMacros="#PrimaryDataSourceName()#",this.featureValues=this.injector.get(_.G2Y,null),this.schemaChanged$=new h.Subject,this.schemaLoaded$=new h.ReplaySubject(null)}get schema(){return this.featureValues?.EnableSchemaDeepCloning?(0,Z.A)(this._schema):this._schema}get schemaName(){return this._schema.name}get schemaCaption(){return this._schema.caption}get resources(){return this._schema.resources}_isViewConfigInfoBindedByPropertyValues(e,t){const n=Object.values(e);for(const a of n)if(t.some(r=>Xe(r)?!!a?.toString()?.startsWith(r):a===r))return!0;return!1}_getDataSourceAttributePath(e,t){return`${e}.${t}`}_getViewModelAttributeConfig(e,t,n=!1){const a={};return!e[t]&&n&&(e[t]=a),e[t]||a}_getModelConfig(e,t=!1){const n={};return!e.modelConfig&&t&&(e.modelConfig=n),e.modelConfig||n}_getCollectionItemViewModelConfig(e,t=!1){const n={attributes:{}};return!e.viewModelConfig&&t&&(e.viewModelConfig=n),e.viewModelConfig||n}_getDataSourcesConfig(){return this._schema?.modelConfig?.dataSources}_initModelConfig(){this._schema?.modelConfig||(this._schema.modelConfig={dataSources:{}}),this._schema.modelConfig.dataSources||(this._schema.modelConfig.dataSources={})}_setModelConfigPath(e,t,n){this._getModelConfig(e,!0).path=this._getDataSourceAttributePath(t,n)}_onDataSourceInstanceConfigChange(e){const t=this._schema.modelConfig.dataSources[e];if(t&&"crt.EntityDataSource"===t.type){const n=t.config||{},a=u=>this.bindDataSource(e,u),r=i.Injector.create({providers:[{provide:_b,useValue:n},{provide:yb,useValue:a},fb],parent:this.injector});this._entityDataSourceConfigServices.set(e,r.get(Au))}}_initializeSchemaDataSourceInstanceServices(){const e=this._schema.modelConfig?.dataSources;if((0,hb.he)(e))for(const t of Object.keys(e))this._onDataSourceInstanceConfigChange(t)}_removeDataSourceDependencies(e,t){void 0!==t?.dependencies?.[e]&&delete t.dependencies[e]}_removeDependedRelationConfigs(e,t){!e||!t||Object.keys(t).forEach(n=>{t[n]=t[n].filter(a=>!this._isRelatedOnDataSource(e,a))})}_isRelatedOnDataSource(e,t){return(t.relationPath.split(".").shift()??"")===e}_setPrimaryDataSourceIfNotSet(e){this._schema.modelConfig.primaryDataSourceName||this.setPrimaryDataSource(e)}_setPageDataSourceLoadingConfig(e,t){t.scope===c.DataSourceScope.Page&&this._schema.modelConfig.primaryDataSourceName!==e&&this.setDataSourceLoadingConfig(e,_.YJq.OnInit)}getViewModelAttributesConfig(e=!1){const t=this.getViewModelConfig(e);return!t.attributes&&e&&(t.attributes={}),t.attributes||{}}updateModelConfig(e){e&&(this._schema.modelConfig={...e},this._entityDataSourceConfigServices.clear(),this._initializeSchemaDataSourceInstanceServices())}updateSchemaViewModelConfig(e){e&&(this._schema.viewModelConfig={...e})}getViewModelConfig(e=!1){return _.uSH.getViewModelConfig(this._schema,e)}getModelConfig(e=!1){return!this._schema.modelConfig&&e&&(this._schema.modelConfig={}),this._schema.modelConfig||{}}init(e){this._schema=e;const t=this.getPrimaryDataSourceName();t&&this._setPrimaryDataSourceIfNotSet(t),this._initializeSchemaDataSourceInstanceServices(),this.schemaLoaded$.next(e)}setModelDependencies(e){this._initModelConfig(),this._schema.modelConfig.dependencies=Object.fromEntries(Object.entries(e??{}).filter(([,t])=>t?.filter(Boolean).length>0)),(0,Re.A)(this._schema.modelConfig.dependencies)&&delete this._schema.modelConfig.dependencies}upsertModelDependencies(e){const t={...this.getModelDependencies(),...e};this.setModelDependencies(t)}getModelDependencies(){return this._initModelConfig(),this._schema.modelConfig.dependencies||{}}setModelDependency(e,t){const n=this.getModelDependencies();n[e]=t,this.setModelDependencies(n)}getDependentModelsNames(e,t){return _.uSH.getDependentModelsNames(this.getModelDependencies(),e,t)}setPrimaryDataSource(e){const t=this._schema.modelConfig.dataSources[e].scope;if(t===c.DataSourceScope.ViewElement)throw new Error(`Data source ${e} with scope ${t} cannot be set primary. Only page scope data sources could be primary.`);this._schema.modelConfig.primaryDataSourceName=e}createDataSource(e,t){if(this._initModelConfig(),this._schema.modelConfig.dataSources[e])throw new Error(`Data source '${e}' already exists`);this._schema.modelConfig.dataSources[e]=t,t.scope===c.DataSourceScope.Page&&this._setPrimaryDataSourceIfNotSet(e),this._setPageDataSourceLoadingConfig(e,t),t.hiddenInPageDesigner||this.schemaChanged$.next({schema:this._schema,changes:{viewConfig:this._schema.viewConfig,operation:Lp.CreateDataSource}}),this._onDataSourceInstanceConfigChange(e)}getPrimaryDataSourceName(){return db(this._schema)}getIsPrimaryDataSourceAttributePath(e){const t=this.getPrimaryDataSourceName();return e.split(".")[0]===t}toPrimaryDataSourceMacrosAttributePath(e){const t=e.split(".");return t.length>1&&t.shift(),[this._primaryDataSourceNameMacros,...t].join(".")}isViewModelAttributeExists(e){return null!=this.getViewModelAttributesConfig()[e]}getViewConfigInfoByName(e){return _.uSH.getViewConfigInfoByName(this._schema,e)}getViewConfigInfoByFilter(e){return _.uSH.getViewConfigInfoByFilter(e,this._schema?.viewConfig)}getViewConfigsByViewModelAttribute(e){return this.getViewConfigInfoByProperty("control","$"+e)}getViewConfigInfoByProperty(e,t){return _.uSH.getViewConfigInfoByProperty(e,t,this._schema?.viewConfig)}getViewConfigPathByPropertyValue(e,t){return _.uSH.getViewConfigPathByPropertyValue(e,t,this._schema?.viewConfig)}getViewConfigInfoByPropertyValues(e){const t=Object.entries(this.getViewModelAttributesConfig()),n=e.map(a=>Xe(a)?t.filter(([u,p])=>p?.from?.includes(a.slice(1))).map(([u])=>`$${u}`).concat([a]):a).flat();return _.uSH.getViewConfigInfoByFilter(a=>this._isViewConfigInfoBindedByPropertyValues(a,n),this._schema?.viewConfig)}setViewModelAttribute(e,t){this.getViewModelAttributesConfig(!0)[e]=t}updateViewModelAttribute(e,t){if(!this.isViewModelAttributeExists(e))throw new Error(`ViewModel does not contain attribute with name '${e}'`);const n=this.getViewModelAttributesConfig(),a=(0,Z.A)(n[e]);n[e]=(0,g0.A)(a,t,(r,u)=>(0,f0.cy)(u)?u:void 0)}generateUniqueAttributeNameByType(e){return W.$A.generateUnique(e)}getMappedDataSourceAttributePath(e){const t=this.getViewModelAttributesConfig(!0),n=this._getViewModelAttributeConfig(t,e);return this._getModelConfig(n,!0).path}getBoundValueAttribute(e){const t=this.getViewConfigInfoByName(e);if(!t||!t.viewConfig)throw new Error(`ViewItem with name '${e}' not found in schema`);const n=c.ViewElementRegistry.getFormControlRelatesAttribute(t.viewConfig.type),a=t.viewConfig[n];return a?.startsWith("$")?a.slice(1):null}getDataSourceConfigAttributePath(e,t){const n=this.getDataSourceConfigByName(e);return n?.attributes?n.attributes[t]?.path:null}removeDataSourceAttributePath(e){const t=this.getViewModelAttributesConfig(!0),n=this._getViewModelAttributeConfig(t,e);(0,_.o7N)(n)&&n.modelConfig&&delete n.modelConfig}removeViewModelAttribute(e){return delete this.getViewModelAttributesConfig(!0)[e],Promise.resolve(!0)}removeUnboundDataSource(e){if(!e||this.isDataSourceBound(e))return;const t=this.getModelConfig();void 0!==t?.dataSources?.[e]&&delete t.dataSources[e],this._removeDependedRelationConfigs(e,t?.dependencies),this._removeDataSourceDependencies(e,t),this.removeDataSourceLoadingConfig(e)}removeDependedRelationConfigs(e){const t=this.getModelConfig();this._removeDependedRelationConfigs(e,t.dependencies)}removeDataSourceDependencies(e){const t=this.getModelConfig();this._removeDataSourceDependencies(e,t)}removeDataSourceLoadingConfig(e){const t=this.getModelConfig();void 0!==t?.loadingConfig?.[e]&&delete t.loadingConfig[e]}setDataSourceLoadingConfig(e,t){const n=this.getModelConfig(!0);n.loadingConfig={...n.loadingConfig??{},[e]:{type:t}}}removeFilterBindings(e){const t=this.getViewModelAttributesConfig(!0);Object.values(t).forEach(n=>{let a=[];(0,_.o7N)(n)&&(a=n.modelConfig?.filterAttributes),a?.length&&(n.modelConfig.filterAttributes=a.filter(r=>r.name!==e))})}createViewModelAttribute(e,t){if(this.isViewModelAttributeExists(e))throw new Error(`ViewModel already contain attribute with name '${e}'`);this.getViewModelAttributesConfig(!0)[e]=t}createDefaultAttribute(e){this.createViewModelAttribute(e,{})}findAttributeByDataSourceAttributePath(e){const t=this.findAllAttributesByDataSourceAttributePath(e);return t&&t.length>0?t[0]:null}findAllAttributesByDataSourceAttributePath(e){return _.uSH.findAllAttributesByDataSourceAttributePath(this._schema,e)}getOrAddViewModelAttribute(e,t=""){const n=`${t=t||this.getPrimaryDataSourceName()}.${e}`;let a=this.findAttributeByDataSourceAttributePath(n);if(!a){const r=e.replace(/\./g,"_");a=this.generateUniqueAttributeNameByType(r),this.createViewModelAttribute(a,{modelConfig:{path:n}})}return a}createAndBindViewModelAttribute(e,t,n){this.bindViewModelAttribute(e,t,n,!0)}bindViewModelAttribute(e,t,n,a){if(!this.isViewModelAttributeExists(e)&&!a)throw new Error(`ViewModel has no attribute with name '${e}'`);const r=this.getViewModelAttributesConfig(!0),u=this._getViewModelAttributeConfig(r,e,a);this._getModelConfig(u,!0).path=this._getDataSourceAttributePath(t,n),this.setViewModelAttribute(e,u)}bindViewModelAttributeCollection(e,t,n,a="",r=Eu.Merge){if(!this.isViewModelAttributeExists(e))throw new Error(`ViewModel has no attribute with name '${e}'`);const u=this.getViewModelAttributesConfig(!0),p=this._getViewModelAttributeConfig(u,e);this._getModelConfig(p,!0).path=t;const S=this._getCollectionItemViewModelConfig(p,!0);r===Eu.Merge?n.forEach(w=>{const O=this._getViewModelAttributeConfig(S.attributes,`${a}${w}`,!0);this._setModelConfigPath(O,t,w)}):r===Eu.Override&&(S.attributes=n.reduce((w,O)=>{const $=this._getViewModelAttributeConfig(S.attributes,`${a}${O}`,!0);return this._setModelConfigPath($,t,O),w[`${a}${O}`]=$,w},{}))}isDataSourceExists(e){const t=this._getDataSourcesConfig();return t&&null!=t[e]}getDataSourceConfigByName(e){const t=this._getDataSourcesConfig();return t?t[e]?.config:null}bindDataSource(e,t){let n=this._getDataSourcesConfig();n||(this._initModelConfig(),n=this._getDataSourcesConfig()),this.isDataSourceExists(e)&&(n[e].config=t,this.schemaChanged$.next({schema:this._schema,changes:{viewConfig:this._schema.viewConfig,operation:Lp.DataSourceConfigChanged}})),this._onDataSourceInstanceConfigChange(e)}getDataSources(){const e=this._getDataSourcesConfig(),t=[];return e&&Object.keys(e).forEach(n=>{t.push(e[n])}),t}removeDataSourcesFilterAttributeBinding(e){const t=this.getViewModelAttributesConfig(!0);Object.values(t).forEach(n=>{let a=[];(0,_.o7N)(n)&&(a=n.modelConfig?.filterAttributes),a?.length&&(n.modelConfig.filterAttributes=a.filter(r=>r.name!==e))})}getEntityDataSourceConfigService(e){return this._entityDataSourceConfigServices.get(e)}getViewModelAttribute(e){return _.uSH.getViewModelAttribute(this._schema,e)}removeUnboundViewModelAttribute(e){if(!1===this.isViewModelAttributeBound(e))return this.removeViewModelAttribute(e)}isViewModelAttributeBound(e){return _.uSH.isViewModelAttributeBound(this._schema,e)}isDataSourceBound(e){const t=this.getViewModelAttributesConfig();return Object.values(t).some(n=>n?.modelConfig?.path?.split(".")?.shift()===e)}findBoundDataSources(e,t){const n={};for(const[a,r]of Object.entries(e)){const u=Xe(r)&&pa(r).attributePath;if(!u)continue;const p=this.getViewModelAttribute(u),f=p?.modelConfig?.path;!f||t?.collectionsOnly&&!p?.isCollection||(n[a]=f)}return n}getDataSourceLoadParameters(e){const t=this.getDataSourceConfigByName(e);if(!t)throw new Error(`Data source with name '${e}' not found`);return t.loadParameters??null}setDataSourceLoadParameters(e,t){const n=this.getDataSourceConfigByName(e);if(!n)throw new Error(`Data source with name '${e}' not found`);n.loadParameters=t}getAllowCopyingRecordsParameter(e){const t=this.getDataSourceConfigByName(e);if(!t)throw new Error(`Data source with name '${e}' not found`);return t.allowCopyingRecords}setAllowCopyingRecordsParameter(e,t){const n=this.getDataSourceConfigByName(e);if(!n)throw new Error(`Data source with name '${e}' not found`);n.allowCopyingRecords=t}ngOnDestroy(){this.schemaChanged$.complete(),this.schemaLoaded$.complete()}static{this.\u0275fac=function(t){return new(t||ms)(i.\u0275\u0275inject(i.Injector))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:ms,factory:ms.\u0275fac,providedIn:"platform"})}}var Cb=b(81934),Xl=b(47868),y0=b(36091);class bb{}class _0{}class Ru extends bb{constructor(e){super(),this._clientParentSchemaService=e,this._requireJs=window.requirejs}_getParentSchemaFromService(e){return this._clientParentSchemaService.getParentSchemasLocalizableStrings(e)}_getParentSchemasLocalizableResources(e){const t=[];return this._getParentSchemaFromService(e).pipe((0,h.map)(n=>{n.values?.map(a=>{const r={};a.lczList?.map(u=>{const p={};u.values?.map(f=>{p[f.cultureName]=f.value}),r[u.name]=p}),t.push([a?.schemaName,{localizableImages:{},localizableStrings:r}])})}),(0,h.mergeMap)(()=>(0,h.of)(t)))}loadResources(e){return new h.Observable(t=>this._requireJs([e],()=>{this._requireJs([`${e}Structure`],n=>{t.next(n.schemaUId),t.complete()})})).pipe((0,h.mergeMap)(t=>this._getParentSchemasLocalizableResources(t)),(0,h.map)(t=>t.reverse()))}static{this.\u0275fac=function(t){return new(t||Ru)(i.\u0275\u0275inject(_0))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Ru,factory:Ru.\u0275fac,providedIn:"root"})}}class Pu extends bb{constructor(e,t){super(),this._profileSchemaProvider=e,this._userInfo=t}_getSchemaPartKeys(){return this._userInfo.isSSP?[_.J$r,_.vZG,""]:[_.J$r,""]}_appendValuesForCurrentCulture(e){const t=this._userInfo.cultureInfo.sysCultureName;return Object.keys(e).forEach(n=>{const a=e[n]??{};a[t]??=Object.values(a).shift()}),e}_createTranslationPartByKey(e,t){const n=e.find(a=>a.name?.toUpperCase()===t.toUpperCase());return[t.toUpperCase(),{localizableImages:this._appendValuesForCurrentCulture(n?.localizableImages??{}),localizableStrings:this._appendValuesForCurrentCulture(n?.localizableStrings??{})}]}loadResources(e){const t=this._getSchemaPartKeys();return this._profileSchemaProvider.get(e).pipe((0,E.T)(n=>t.map(a=>this._createTranslationPartByKey(n,a))))}static{this.\u0275fac=function(t){return new(t||Pu)(i.\u0275\u0275inject(Kn),i.\u0275\u0275inject(_.oqB))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Pu,factory:Pu.\u0275fac,providedIn:"root"})}}class Nu{get resourcesDiff(){return(0,Z.A)(this._resourcesDiff)}get resources(){return(0,Z.A)(this._resources)}constructor(e){this._amdSchemaLocalizationService=e.get(Ru),this._profileSchemaLocalizationService=e.get(Pu),this._jsonObjectDifferService=e.get(Vi)}init(e){return this._schemaName=e.schemaName,this._partName=e.partName,this._resources$=(0,h.forkJoin)([this._amdSchemaLocalizationService.loadResources(this._schemaName),this._profileSchemaLocalizationService.loadResources(this._schemaName)]).pipe((0,E.T)(t=>t.flat()),(0,E.T)(t=>{const n=t.findIndex(([a])=>a===this._partName);return-1===n?t:t.slice(0,n+1)}),(0,z.n)(t=>(0,h.from)(t)),(0,E.T)(([,t])=>t),(0,y0.T)((t,n)=>(0,Xl.A)(t,n),{}),(0,P.M)(t=>this._resources=t),(0,ie.u)()),Promise.resolve(void 0)}loadResources(){return(0,h.lastValueFrom)(this._resources$)}upsertResources(e){var t=this;return(0,A.A)(function*(){t._resources||(yield t.loadResources()),t._resourcesDiff=t._jsonObjectDifferService.deepObjectDiff(t._resources,e),t._resources=mi()(t._resources,e)})()}static{this.\u0275fac=function(t){return new(t||Nu)(i.\u0275\u0275inject(i.Injector))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Nu,factory:Nu.\u0275fac})}}const Sb=()=>{const o=(0,i.inject)(i.Injector);return()=>new Nu(o)},vb=new i.InjectionToken("Factory of SchemaLocalizationService",{providedIn:"root",factory:Sb}),C0=new i.InjectionToken("Factory of SchemaService",{providedIn:"root",factory:()=>{const o=(0,i.inject)(i.Injector);return()=>new ms(o)}}),Ib={name:"",schema:{viewConfigDiff:[],viewModelConfigDiff:[],modelConfigDiff:[]},structure:{},resources:{localizableImages:{},localizableStrings:{}}};class Ou{get _cultureName(){return this._userInfo.cultureInfo.sysCultureName}constructor(e,t,n,a,r,u,p,f){this._amdSchemaLoaderService=e,this._profileSchemaLoader=t,this._schemaBuilder=n,this._schemaDifferService=a,this._profileSchemaProvider=r,this._userInfo=u,this._injector=p,this._measurePerformanceService=f,this._initialized$=new h.BehaviorSubject(null),this._applyingOperationsQueue$=new h.BehaviorSubject([]),this._partsChangedCallBacks=new Map}_queueOperation(e){const t=[...this._applyingOperationsQueue$.value,e];this._applyingOperationsQueue$.next(t)}_removeOperation(e){const t=this._applyingOperationsQueue$.value.filter(n=>n!==e);(0,j.A)(this._applyingOperationsQueue$.value,t)||this._applyingOperationsQueue$.next(t)}_waitOperation(e){return this._applyingOperationsQueue$.pipe((0,E.T)(t=>t[0]),(0,se.p)(t=>null==t||t===e),(0,E.T)(()=>{}))}_findSchemaPartIndex(e){return this._state.schemaParts.findIndex(t=>t.name===e)}_getPreviousSchemaPartKey(e){const{schemaParts:t}=this._state,n=this._findSchemaPartIndex(e);return-1===n||0===n?null:t[n-1].name}_actualizeSchemaPartsStartsFrom(e){var t=this;return(0,A.A)(function*(){const n=t._findSchemaPartIndex(e);if(-1===n)return;const a=t._state.schemaParts.slice(n).map(r=>r.name);for(const r of a)yield t._actualizeSchemaPart(r)})()}_actualizeSchemaPart(e){var t=this;return(0,A.A)(function*(){const{schemaParts:n,changedParts:a,schemaBundles:r}=t._state,u=t._getPreviousSchemaPartKey(e);if(!u)return void a.add(u);const p=r[u]??(yield(0,h.lastValueFrom)(t._buildSchemaBundle(u))),f=t._findSchemaPartIndex(e),S=t._schemaDifferService.getDiff(p,r[e]),w={...n[f],schema:S.schema,resources:{localizableImages:(0,_.a$i)(S.localizableImages,t._cultureName),localizableStrings:(0,_.a$i)(S.localizableStrings,t._cultureName)},localizableImages:S.localizableImages,localizableStrings:S.localizableStrings};(0,j.A)(t._normalizeSchemaPart(n[f]),t._normalizeSchemaPart(w))||a.add(e),n[f]=w,n[f].name??=e})()}_actualizeSchemaBundleResources(e,t,n){const{resources:a,resourcesDiff:r}=n;if((0,Re.A)(r))return;const u=this._findSchemaPartIndex(e),p=this._state.schemaParts[u],f=mi()(p,r);t.resources={strings:(0,_.n_g)(a.localizableStrings,this._cultureName)},t.localizableStrings=(0,_.Wv3)(f.localizableStrings),t.localizableImages=(0,_.Wv3)(f.localizableImages)}init(e){return this._state={schemaName:e,schemaParts:[],schemaBundles:{},changedParts:new Set,packagePartKey:null},this._initialized$.next({schemaName:e,ready:!1}),(0,h.zip)(this._amdSchemaLoaderService.load(e),this._profileSchemaLoader.load(e)).pipe((0,E.T)(([t,n])=>{const a=(0,Cb.A)(t),r=(0,Cb.A)(n);return this._setParts(a,r)}),(0,z.n)(()=>this._build()),this._measurePerformanceService.measure$(`SchemaPartsService.init.${e}`),(0,P.M)(()=>this._initialized$.next({schemaName:e,ready:!0})))}getState(){return this._state}restoreState(e){this._state=e,this._initialized$.next({schemaName:e.schemaName,ready:!0})}subscribeOnPartsChanged(e){const t=(0,c.generateGuid)();return this._partsChangedCallBacks.set(t,e),()=>this._partsChangedCallBacks.delete(t)}use(e){var t=this;const n=this._normalizeSchemaPartKey(e),a=this._initialized$.pipe((0,se.p)(({ready:r,schemaName:u})=>u===this._state.schemaName&&r),(0,Ne.s)(1),(0,z.n)(()=>this._buildSchemaBundle(n)),(0,z.n)(function(){var r=(0,A.A)(function*(u){return[yield t._createSchemaService(u),yield t._createSchemaLocalizationService(n)]});return function(u){return r.apply(this,arguments)}}()));return(0,h.lastValueFrom)(a)}apply(e,t="USER"){var n=this;const a=(0,c.generateGuid)(),r=this._normalizeSchemaPartKey(t);return(0,h.lastValueFrom)(this._initialized$.pipe((0,se.p)(({ready:u,schemaName:p})=>p===this._state.schemaName&&u),(0,P.M)(()=>this._queueOperation(a)),(0,z.n)(()=>this._waitOperation(a)),(0,Ne.s)(1),(0,z.n)(()=>{const u=this._findSchemaPartIndex(r);if(-1===u)throw new Error(`schema part "${t}" not found`);const f=[...this._state.schemaParts].slice(u,this._state.schemaParts.length).map(S=>(0,h.forkJoin)([(0,h.of)(S.name),this._buildSchemaBundle(S.name)]));return(0,h.forkJoin)(f).pipe((0,z.n)(function(){var S=(0,A.A)(function*(w){for(const[O,$]of w)yield n._apply($,e,O)});return function(w){return S.apply(this,arguments)}}()))}),(0,ue.W)(()=>(0,h.of)(void 0)),(0,P.M)(()=>this._removeOperation(a))),{defaultValue:void 0})}commit(e={silent:!0}){var t=this;return(0,h.lastValueFrom)(this._initialized$.pipe((0,se.p)(({ready:n,schemaName:a})=>a===this._state.schemaName&&n),(0,z.n)(()=>this._waitOperation(void 0)),(0,Ne.s)(1),(0,E.T)(()=>[...this._state.schemaParts].pop().name),(0,E.T)(n=>this._state.schemaBundles[n]),(0,z.n)(function(){var n=(0,A.A)(function*(a){for(const[,r]of t._partsChangedCallBacks)yield r?.({bundle:a,silent:!!e?.silent});return a});return function(a){return n.apply(this,arguments)}}()),(0,z.n)(()=>this._saveParts()),(0,P.M)(()=>this._state.changedParts.clear())),{defaultValue:null})}_apply(e,t,n){var a=this;return(0,A.A)(function*(){const r=yield a._createSchemaService(e),u=yield a._createSchemaLocalizationService(n);yield t([r,u]);const p={...r.schema};a._actualizeSchemaBundleResources(n,p,u),a._state.schemaBundles[n]=p,yield a._actualizeSchemaPartsStartsFrom(n)})()}_build(){const e=[...this._state.schemaParts].pop().name;return this._buildSchemaBundle(e,{tryGetFromCache:!0}).pipe(this._measurePerformanceService.measure$(`SchemaPartsService.build.${this._state.schemaName}`))}_setParts(e,t){this._state.packagePartKey=[...e].pop()?.name,t=this._normalizeProfileParts(t),this._state.schemaParts=[...e,...t]}_normalizeProfileParts(e){const t={...Ib,name:this._getAllEmployeePartCode()},n={...Ib};return e&&0!==e.length?(!1===e.some(a=>a.name===t.name)&&(e=[t,...e]),!1===e.some(a=>a.name===n.name)&&(e=[...e,n]),e):[t,n]}_normalizeSchemaPart(e){const{localizableImages:t,localizableStrings:n,...a}=e;return{...a,...t?{localizableImages:t}:{},...n?{localizableStrings:n}:{}}}_normalizeSchemaPartKey(e){switch(e){case"PACKAGE":return this._state.packagePartKey;case"ALL_EMPLOYERS":return this._getAllEmployeePartCode();case"USER":return"";default:return e??""}}_getAllEmployeePartCode(){return this._userInfo?.isSSP?_.vZG.toUpperCase():_.J$r.toUpperCase()}_buildSchemaBundle(e,t={tryGetFromCache:!1}){const n=this._combineSchemaParts(e);return this._schemaBuilder.build(n,t).pipe((0,P.M)(a=>a.localizableStrings=this._buildLocalizableStrings(n)),(0,P.M)(a=>this._state.schemaBundles[e]=a))}_buildLocalizableStrings(e){return mi().all(e.map(t=>t.localizableStrings||{}),{arrayMerge:(t,n,a)=>n})}_combineSchemaParts(e){const t=this._findSchemaPartIndex(e);return this._state.schemaParts.slice(0,t+1)}_createSchemaService(e){const t=this._injector.get(C0)();return t.init((0,Z.A)(e)),Promise.resolve(t)}_saveParts(){const{schemaName:e,schemaParts:t,changedParts:n,packagePartKey:a}=this._state,r=this._findSchemaPartIndex(a),u=t.slice(r+1,t.length).filter(w=>n.has(w.name)),p=u.find(w=>w.name?.toUpperCase()===_.J$r.toUpperCase());if(p&&u.push({...p,name:_.vZG.toUpperCase()}),!u.length)return Promise.resolve([]);if(this._savePartsPromise)return this._savePartsPromise;const f=u.map(w=>this._profileSchemaProvider.set(e,w)),S=(0,h.forkJoin)(f).pipe((0,P.M)(()=>this._savePartsPromise=null));return this._savePartsPromise=(0,h.lastValueFrom)(S,{defaultValue:[]}),this._savePartsPromise}_createSchemaLocalizationService(e){var t=this;return(0,A.A)(function*(){const n=t._injector.get(vb)();return yield n.init({schemaName:t._state.schemaName,partName:e}),n})()}static{this.\u0275fac=function(t){return new(t||Ou)(i.\u0275\u0275inject(Ln),i.\u0275\u0275inject(Fi),i.\u0275\u0275inject(So),i.\u0275\u0275inject(Jl),i.\u0275\u0275inject(Kn),i.\u0275\u0275inject(_.oqB),i.\u0275\u0275inject(i.Injector),i.\u0275\u0275inject(_.gcc))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Ou,factory:Ou.\u0275fac})}}class kp{constructor(e){this._schemaService=e,this._forPropertyName="for"}getRelatedFor(e){const a=(this._schemaService.getViewConfigInfoByName(e).viewConfig||{})[this._forPropertyName];return(0,h.of)(a)}getRelatedForViewConfig(e){return this.getRelatedFor(e).pipe((0,h.switchMap)(t=>t?(0,h.of)(this._schemaService.getViewConfigInfoByName(t).viewConfig):(0,h.of)(null)))}getRelatedToViewElementConfig(e){const t=this._schemaService.getViewConfigInfoByProperty(this._forPropertyName,e).map(n=>n?.viewConfig);return(0,h.of)(t)}static{this.\u0275fac=function(t){return new(t||kp)(i.\u0275\u0275inject(ms))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:kp,factory:kp.\u0275fac,providedIn:"root"})}}class b0{constructor(e,t,n){this._schema=e,this._resourceFinderService=t,this._macrosService=n}getElements(e){const t=_.uSH.getViewConfigInfoByFilter(n=>e.includes(n.type),this._schema?.viewConfig);return this._macrosService.handleResourceMacros(t,this._schema.resources)}getResourceValue(e){if(_n(e)&&kc(e)){return this._resourceFinderService.findValueFromResource(e,this._schema.resources)||e}return e}getDataSources(){return(0,h.of)(this._schema.modelConfig.dataSources??{})}}class jp{constructor(e,t,n,a,r){this._loader=e,this._builder=t,this._schemaService=n,this._macrosService=a,this._resourceFinderService=r}createSchemaMetadataQuery(e){return this._loader.load(e).pipe((0,z.n)(t=>this._builder.build(t.reverse())),(0,E.T)(t=>(this._schemaService.init(t),new b0(t,this._resourceFinderService,this._macrosService))))}static{this.\u0275fac=function(t){return new(t||jp)(i.\u0275\u0275inject(Ln),i.\u0275\u0275inject(ur),i.\u0275\u0275inject(ms),i.\u0275\u0275inject(_.dFt),i.\u0275\u0275inject(_.Qhy))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:jp,factory:jp.\u0275fac,providedIn:"root"})}}class Bp{_generateConverterMetadata(e,t,n){const{converter:a,args:r}=t,u=(r??[]).map((S,w)=>[`${e}_${n}_Arg_${w}`,{value:S}]);if(0===u.length)return{converterExpression:a,converterArgsAttributes:{}};const p={};u.forEach(([S,w])=>{p[S]=w});return{converterExpression:`${a} : ${u.map(([S])=>`$${S}`).join(" : ")}`,converterArgsAttributes:p}}generate(e){const{attribute:t,converters:n}=e??{};if(!t)return null;const a=(n??[]).filter(p=>p?.converter).map((p,f)=>this._generateConverterMetadata(t,p,f));if(0===a.length)return null;return{converterExpression:a.map(({converterExpression:p})=>p).join(" | "),converterArgsAttributes:a.map(({converterArgsAttributes:p})=>p).reduce((p,f)=>({...p,...f}),{})}}static{this.\u0275fac=function(t){return new(t||Bp)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Bp,factory:Bp.\u0275fac})}}class Gp{get schemaApi(){throw new Error("Not implemented")}init(e){this._schema=e}static{this.\u0275fac=function(t){return new(t||Gp)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Gp,factory:Gp.\u0275fac,providedIn:"root"})}}new i.InjectionToken("Represents a filter view element options modifier for specified view element type"),new i.InjectionToken("Represents a factory of filter view element options modifiers");class Vu{constructor(e){this._schemaService=e}_isSelectionViewConfig(e){return!!e?._selectionOptions}getSelectionStateAttributeName(e){return function s0(o){const{attribute:e}=o??{};return e?"string"==typeof e?e:e.expose?.attribute||null:null}(e)}getSourceSelectionStateAttributeName(e){return function r0(o){const{attribute:e}=o??{};return e?"string"==typeof e?e:e.from||null:null}(e)}isModelBoundToSelectionViewElement(e){return this.getModelBoundSelectionViewElementsConfigs(e).length>0}getModelBoundSelectionViewElementsConfigs(e){if(!e)return[];const t=this._schemaService.findAttributeByDataSourceAttributePath(e);return t?(this._schemaService.getViewConfigInfoByPropertyValues([`$${t}`])??[]).map(a=>a?.viewConfig).filter(a=>this._isSelectionViewConfig(a)):[]}findModelBoundParentSelectionViewConfig(e){const n=this._schemaService.getViewConfigPathByPropertyValue("name",e)?.find(this._isSelectionViewConfig);return n?{viewConfig:n,boundModels:this._schemaService.findBoundDataSources(n,{collectionsOnly:!0})}:null}static{this.\u0275fac=function(t){return new(t||Vu)(i.\u0275\u0275inject(ms))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Vu,factory:Vu.\u0275fac})}}class Up{constructor(){this._contextParts=new Map}setContextPart(e){if(!e)return;const t=(0,c.generateGuid)();return this._contextParts.set(t,e),t}getContext(){var e=this;return(0,A.A)(function*(){const n=Array.from(e._contextParts).map(([r,u])=>u.getContext());return(yield Promise.all(n)).filter(Boolean)})()}removeContextPart(e){this._contextParts.get(e)?.destroy(),this._contextParts.delete(e)}static{this.\u0275fac=function(t){return new(t||Up)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Up,factory:Up.\u0275fac,providedIn:"platform"})}}class zp{static{this.\u0275fac=function(t){return new(t||zp)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:zp})}static{this.\u0275inj=i.\u0275\u0275defineInjector({providers:[_.dFt,{provide:_.vkI,useFactory:Ai,deps:[ms,[new i.Optional,_.w9C]],multi:!0},{provide:_.vkI,useFactory:Vr,deps:[[new i.Optional,_.w9C],Yt],multi:!0}],imports:[R.CommonModule]})}}class Lg{static{this.\u0275fac=function(t){return new(t||Lg)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:Lg})}static{this.\u0275inj=i.\u0275\u0275defineInjector({providers:[{provide:So,useFactory:(e,t)=>e.DisabledAmdSchemaCacheBuilder?t.get(ur):t.get(Zl),deps:[[new i.Inject(_.G2Y)],i.Injector]},{provide:Kn,useClass:Fs},Ln,ur,Zl,Fi,Qe,ht,Ni,gn,c.FeatureService,Jl,Ou,tn,Vu,fb],imports:[R.CommonModule,F.HttpClientModule,zp,_.atF]})}}class S0{constructor(){this.active$=new h.BehaviorSubject(!0)}}const Fg=new i.InjectionToken("BINDING_ACTIVATOR"),Tb=new i.InjectionToken("PRESERVED_CONTENT_BINDING_ACTIVATOR");let kg=class{constructor(e){this._formatValuePipe=e}convert(e,t,n){return this._formatValuePipe.transform(e,n)}};kg=(0,I.Cg)([(0,c.CrtConverter)({type:"crt.FormatValue"}),(0,I.Sn)("design:paramtypes",[_.L3o])],kg);let jg=class{convert(e){return!e}};jg=(0,I.Cg)([(0,c.CrtConverter)({type:"crt.InvertBooleanValue"})],jg);let Bg=class{convert(e){return!!e}};Bg=(0,I.Cg)([(0,c.CrtConverter)({type:"crt.ToBoolean"})],Bg);let Gg=class{convert(e){return e?`mailTo: ${e}`:""}};Gg=(0,I.Cg)([(0,c.CrtConverter)({type:"crt.ToEmailLink"})],Gg);let Ug=class{convert(e){return e?`tel: ${e}`:""}};Ug=(0,I.Cg)([(0,c.CrtConverter)({type:"crt.ToPhoneLink"})],Ug);let zg=class{convert(e,t,n,a=null){const r=e&&e[n];return null==r||""===r?a:r}};zg=(0,I.Cg)([(0,c.CrtConverter)({type:"crt.ToObjectProp"})],zg);let Hg=class{_tryGetLookupValueFromCollection(e,t,{primaryAttributeName:n,primaryDisplayAttributeName:a,primaryColorAttributeName:r}){const u=t.find(S=>S.attributes[n]===e);if(!u)return null;const p=u.attributes[a];if(a&&!p)return null;const f=u.attributes[r];return r&&!f?null:{value:e,displayValue:p,primaryColorValue:f}}_getAttributeValue(e,t){let n=e;for(const a of t){if(!n?.attributes||!(a in n.attributes))return;n=n.attributes[a]}return n}_getCollectionForSearch(e,t){const n=e.dataSchemas[t],a=e.getViewModelAttributePath(t,n.primaryAttributeName).split(".").slice(0,-1);let r;const u=this._getAttributeValue(e,a);if(u instanceof ta)r=[u];else{if(!(u instanceof sn&&u.length))return null;r=u}const p=r[0].getViewModelAttributePath(t,n.primaryAttributeName),f=r[0].getViewModelAttributePath(t,n.primaryDisplayAttributeName);if(n.primaryDisplayAttributeName&&!f)return null;const S=r[0].getViewModelAttributePath(t,n.primaryColorAttributeName);return n.primaryColorAttributeName&&!S?null:{collection:r,keys:{primaryAttributeName:p,primaryDisplayAttributeName:f,primaryColorAttributeName:S}}}_getModelsBoundToEntity(e,t){const n=e.dataSchemas;return Object.entries(n).filter(([,a])=>a.name===t).map(([a])=>a)}_getFilterByPrimaryValues(e,t){const n=new c.EntitySchemaQuery("tempTable"),a=new c.ColumnExpression({columnPath:e}),r=t.map(f=>new c.ParameterExpression({value:f})),u=new c.InFilter(c.ComparisonType.Equal,a,r);return n.filters.add(u),n.getMetadata().filters}_getLookupValuesFromDataSource(e,t){var n=this;return(0,A.A)(function*(){if(!e.length)return[];const a=yield c.Model.create(t),r=yield a.getSchema(),{primaryAttributeName:u,primaryDisplayAttributeName:p,primaryColorAttributeName:f}=r,S=n._getFilterByPrimaryValues(u,e),w=[u,p,f].filter(Boolean),O=yield a.load({attributes:w,parameters:[{type:c.ModelParameterType.Filter,value:S}]});return e.map($=>{const te=O.find(Fe=>Fe[u]===$);return te?{value:te[u],displayValue:te[p],primaryColorValue:te[f]}:{value:$}})})()}getLookupValuesFromContext(e,t,n){const a=()=>({lookupValues:[],notFound:e.slice()});if(!e.length)return a();const r=this._getModelsBoundToEntity(t,n);if(!r.length)return a();const u=r.map(f=>this._getCollectionForSearch(t,f)).filter(Boolean);if(!u.length)return a();const p={lookupValues:[],notFound:[]};return e.forEach(f=>{let S;for(let w=0;!S&&w<u.length;w++){const{collection:O,keys:$}=u[w];S=this._tryGetLookupValueFromCollection(f,O,$)}S?p.lookupValues.push(S):p.notFound.push(f)}),p}convert(e,t,n){var a=this;return(0,A.A)(function*(){const r=Array.isArray(e),u=r?e:[e],p=u.filter(c.isGuid),f=a.getLookupValuesFromContext(p,t,n),{lookupValues:S,notFound:w}=f,O=yield a._getLookupValuesFromDataSource(w,n),$=u.map(te=>S.find(Fe=>Fe.value===te)??O.find(Fe=>Fe.value===te)??te);return r?$:$[0]})()}};Hg=(0,I.Cg)([(0,c.CrtConverter)({type:"crt.ToLookup"})],Hg);let $g=class{constructor(){this._fileServicePath="rest/FileService/"}_getFilePath(e){const t=this._fileServicePath+R.Location.joinWithSlash("Download",e);return(0,_.cIr)()+t}convert(e,t,n){return n?R.Location.joinWithSlash(this._getFilePath(n),e):""}};$g=(0,I.Cg)([(0,c.CrtConverter)({type:"crt.ToFileLink"})],$g);let qg=class{convert(e,t){return e?"string"==typeof e?e:(0,_.Mcf)(e.value):""}};qg=(0,I.Cg)([(0,c.CrtConverter)({type:"crt.ToImageLink"})],qg);let Wg=class{_isEncodedUri(e){return/%[0-9A-Fa-f]{2}/g.test(e)}_getEncodedUri(e){return this._isEncodedUri(e)?e:encodeURI(e)}convert(e){return(0,Re.A)(e)?"":(e=e.trim(),this._getEncodedUri(e.startsWith("http://")||e.startsWith("https://")?e:`//${e}`))}};Wg=(0,I.Cg)([(0,c.CrtConverter)({type:"crt.LinkPrefix"})],Wg);let Hp=class{convert(e,t,n){return(0,j.A)(e,n)}};Hp=(0,I.Cg)([(0,c.CrtConverter)({type:"crt.IsEqual"})],Hp);let Zg=class{_normalizePrimaryAttributeValues(e){return e?Array.isArray(e)?e:[e]:[]}_getFilteredPrimaryAttributeValues(e,t,n){return(0,A.A)(function*(){const{filterByPrimaryAttributeValues:a}=n??{},r=yield e.getPrimaryAttributeValues();return!1===a?r:t.filter(u=>r.includes(u))})()}_getViewModelAttributeName(e,t,n){const r=e.getBoundDataSchemaByAttributePath(t)?.attributes?.find(({path:S})=>S===n);if(!r)return null;const p=e.getBoundDataSourceNameByAttributePath(t);return e.getViewModelAttributePath(p,r.name).split(".").pop()}_getValuesFromCollection(e,t){var n=this;return(0,A.A)(function*(){const{context:a,collectionAttributeName:r,primaryAttributeValues:u,dataSourceAttributePath:p}=t,f=n._getViewModelAttributeName(a,r,p);if(!f)return null;const S=yield e.filterByPrimaryAttributes(u),w=`${r}.${f}`;return(yield Promise.all(S.map($=>$[f]))).filter($=>n._isAttributeValueValid(a,w,$))})()}_isAttributeValueValid(e,t,n){return e._getDataSourceAttributeDataValueType(t)!==c.DataValueType.Lookup||(0,_.oXd)(n)}_loadValuesByCollection(e){return(0,A.A)(function*(){const{context:t,collectionAttributeName:n,primaryAttributeValues:a,dataSourceAttributePath:r}=e,u=t.getBoundDataSchemaByAttributePath(n),p=yield c.Model.create(u.name),f=new c.InFilter(c.ComparisonType.Equal,new c.ColumnExpression({columnPath:u.primaryAttributeName}),a.map(w=>new c.ParameterExpression({value:w}))),S=yield p.load({attributes:[r],parameters:[{type:c.ModelParameterType.Filter,value:(0,lr._P)(f)}]});return S?S.map(w=>w[r]):[]})()}convert(e,t,n,a,r){var u=this;return(0,A.A)(function*(){const[p,f]=e??[];if(!(p&&n&&a&&t))return[];const S=u._normalizePrimaryAttributeValues(f),w=!1!==r?.filterByPrimaryAttributeValues;if(!S?.length&&w)return[];const O=yield u._getFilteredPrimaryAttributeValues(p,S,r);if(!O?.length)return[];const $={context:t,primaryAttributeValues:O,collectionAttributeName:n,dataSourceAttributePath:a};return(yield u._getValuesFromCollection(p,$))||u._loadValuesByCollection($)})()}};Zg=(0,I.Cg)([(0,c.CrtConverter)({type:"crt.ToValuesFromCollection"})],Zg);let Jg=class{convert(e){return e?.displayValue||e?.value||e}};Jg=(0,I.Cg)([(0,c.CrtConverter)({type:"crt.ToDisplayValue"})],Jg);let Yg=class{constructor(e){this._toEmptyPlaceholder=e}convert(e,t,n){return this._toEmptyPlaceholder.transform(e,n)}};Yg=(0,I.Cg)([(0,c.CrtConverter)({type:"crt.ToEmptyPlaceholder"}),(0,I.Sn)("design:paramtypes",[_.erT])],Yg);let Kg=class{constructor(e){this._injector=e,this._httpClient=this._injector.get(F.HttpClient)}_getDcmStagesList(e){return this._httpClient.post("/rest/PlaybookStageService/GetDcmStages",{dcmId:e}).pipe((0,h.map)(n=>n.stageValues))}convert(e){return e?(0,h.lastValueFrom)(this._getDcmStagesList(e.value)):Promise.resolve([])}};Kg=(0,I.Cg)([(0,c.CrtConverter)({type:"crt.ToDcmStageValue"}),(0,I.Sn)("design:paramtypes",[i.Injector])],Kg);let Qg=class{convert(e,t,n,...a){return He.Qf.format(n,e,...a)}};Qg=(0,I.Cg)([(0,c.CrtConverter)({type:"crt.InterpolateString"})],Qg);let Xg=class extends Hp{convert(e,t,n){const a=Array.isArray(e)?e:[e];return!a.length||a.every(r=>super.convert(r,t,n))}};var ef;Xg=(0,I.Cg)([(0,c.CrtConverter)({type:"crt.IsEveryEqualTo"})],Xg),function(o){o.Sum="sum"}(ef||(ef={}));let tf=class{_summarize(e){let t=0;return Array.isArray(e)||Number.isNaN(e)?(e.map(n=>t+=Number(n)),t):e}convert(e,t,n){return e&&n===ef.Sum?this._summarize(e):0}};tf=(0,I.Cg)([(0,c.CrtConverter)({type:"crt.ToAggregatedValue"})],tf);let nf=class{constructor(e){this._lookupFormatPipe=e}convert(e){return this._lookupFormatPipe.transform(e)}};nf=(0,I.Cg)([(0,c.CrtConverter)({type:"crt.ToLookupDisplayValue"}),(0,I.Sn)("design:paramtypes",[_.e2c])],nf);let af=class{convert(e,t,n,a){return e?n:a}};af=(0,I.Cg)([(0,c.CrtConverter)({type:"crt.IfElse"})],af);let sf=class{constructor(e){this._translateService=e}_getEmptyDisplayValue(){return this._translateService.instant("LookupFormat.EmptyDisplayValue")}convert(e){if(!e)return this._getEmptyDisplayValue();const t=Object.values(_.QSp).find(n=>n.id===e)?.translateKey;return t?this._translateService.instant(t):this._getEmptyDisplayValue()}};sf=(0,I.Cg)([(0,c.CrtConverter)({type:"crt.ToDataValueTypeDisplayValue"}),(0,I.Sn)("design:paramtypes",[v.c$])],sf);let rf=class{constructor(e){this._translateService=e}convert(e){if(!e)return null;const t=Object.values(_.QSp).find(n=>n.id===e);return t?{value:t.id,displayValue:this._translateService.instant(t.translateKey)}:null}};rf=(0,I.Cg)([(0,c.CrtConverter)({type:"crt.ToDataValueTypeLookupValue"}),(0,I.Sn)("design:paramtypes",[v.c$])],rf);let lf=class{convert(e,t,n){return(0,A.A)(function*(){return(e?.shift()||t.attributes[n])?.length?{}:{display:"none"}})()}};lf=(0,I.Cg)([(0,c.CrtConverter)({type:"crt.HideComponentWithNoItems"})],lf);const Db=new i.InjectionToken("CRT_BINDING_CONTEXT_DESIGN_TIME"),dr=new i.InjectionToken("CRT_BINDING_CONTEXT"),vo=new i.InjectionToken("CRT_VIEW_ELEMENT_CONFIG"),v0=new i.InjectionToken("Ignore view elements not found warning"),Mb=new i.InjectionToken("VIEW_ELEMENT_COMPONENT_CREATOR"),I0=new i.InjectionToken("Add delay before enabling skeleton loader");class Wt extends XS{set shape(e){this._shape=e;const t=this._classes.indexOf("crt-component-rounded");"rounded"===this.shape?-1===t&&this._classes.push("crt-component-rounded"):t>=0&&this._classes.splice(t,1)}get shape(){return this._shape}get classes(){return this.getClasses()}set classes(e){this.setClasses(e)}get loading(){return this._loading$.value}set loading(e){this._loading$.next(!!e),"boolean"==typeof e&&(e?this.handleStartLoadViewModelAttributes():this.handleFinishLoadViewModelAttributes())}constructor(e){super(e),this.injector=e,this._loading$=new h.BehaviorSubject(!1),this._classes=[],this.destroyed$=new h.Subject,this.loaderVisible=!1,this.documentDirection=null,this.documentDirection="rtl"===e.get(Mt.dS)?.value?"rtl":null,this.changeDetectorRef=this.injector.get(i.ChangeDetectorRef),this.directionality=this.injector.get(Mt.dS),this.elementRef=this.injector.get(i.ElementRef),this._subscribeLoadingChanges()}_subscribeLoadingChanges(){const e=this.injector.get(I0,0,{optional:!0});this._loading$.pipe((0,z.n)(t=>t?(0,h.of)(t).pipe((0,h.delay)(e)):(0,h.of)(t)),(0,P.M)(t=>{this.loaderVisible=t,this.changeDetectorRef.markForCheck()}),(0,_e.Q)(this.destroyed$)).subscribe()}handleStartLoadViewModelAttributes(){}handleFinishLoadViewModelAttributes(){}setClasses(e){this._classes=e||[]}getClasses(){return this._classes}toggleClass(e,t,n){const a=e.indexOf(n);t&&-1===a&&e.push(n),!t&&a>=0&&e.splice(a,1)}switchClass(e,t,n){n.forEach(([a,r])=>{this.toggleClass(e,a===t,r)})}setValuesFromConfig(e,t=[]){const n=(0,Yn.A)(e,["id","name","type",...t]);Object.entries(n).forEach(([a,r])=>{this[a]=r})}detectChanges(){this.changeDetectorRef.detectChanges()}isRtl(){return"rtl"===this.directionality.value}focus(){this.elementRef?.nativeElement.focus()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}static{this.\u0275fac=function(t){return new(t||Wt)(i.\u0275\u0275directiveInject(i.Injector))}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:Wt,hostVars:2,hostBindings:function(t,n){2&t&&i.\u0275\u0275attribute("element-name",n.name)("dir",n.documentDirection)},inputs:{name:"name",id:"id",tabIndex:"tabIndex",styles:"styles",shape:"shape",classes:"classes",loading:"loading"},features:[i.\u0275\u0275InheritDefinitionFeature]})}}(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",String)],Wt.prototype,"name",void 0),(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",String)],Wt.prototype,"id",void 0),(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",Number)],Wt.prototype,"tabIndex",void 0),(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",Object)],Wt.prototype,"styles",void 0),(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",String),(0,I.Sn)("design:paramtypes",[String])],Wt.prototype,"shape",null),(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",Array),(0,I.Sn)("design:paramtypes",[Array])],Wt.prototype,"classes",null),(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",Boolean),(0,I.Sn)("design:paramtypes",[Boolean])],Wt.prototype,"loading",null);class Lu{static{this.\u0275fac=function(t){return new(t||Lu)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:Lu})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[R.CommonModule,be.m_]})}}class $p{constructor(e,t){this.caption="",e.addSvgIconLiteral("placeholder",t.bypassSecurityTrustHtml(b(49967)))}static{this.\u0275fac=function(t){return new(t||$p)(i.\u0275\u0275directiveInject(be.tp),i.\u0275\u0275directiveInject(x.DomSanitizer))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:$p,selectors:[["crt-view-element-placeholder"]],inputs:{caption:"caption"},decls:4,vars:1,consts:[[1,"placeholder-container"],["svgIcon","placeholder",1,"icon"]],template:function(t,n){1&t&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275element(1,"mat-icon",1),i.\u0275\u0275elementStart(2,"span"),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd()()),2&t&&(i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(n.caption))},dependencies:[be.An],styles:[".placeholder-container[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;align-content:center;justify-content:center;border-radius:8px;position:relative;overflow:hidden}.placeholder-container[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{height:100%;max-height:64px;width:72px;align-self:center}.placeholder-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;top:50%;left:8px;right:8px;transform:translateY(-50%);overflow:hidden;width:calc(100% - 16px);text-overflow:ellipsis}@supports (background: -webkit-named-image(i)){.placeholder-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:initial;height:initial}}"]})}}var cf=b(66497);class Bt{constructor(e=new h.Subscription,t=Promise.resolve()){this._subscription=e,this.ready=t}static all(e){const t=(0,_.B8u)(e.map(a=>a._subscription)),n=Promise.all(e.map(a=>a.ready)).then(()=>{});return new Bt(t,n)}static subscribe(e,t,n=!1){const a=(e=e.pipe((0,ie.u)())).subscribe({next:t}),r=n?(0,h.lastValueFrom)(e.pipe((0,rt.$)(),(0,E.T)(()=>{})),{defaultValue:null}):Promise.resolve();return new Bt(a,r)}unsubscribe(){this._subscription.unsubscribe()}}function qp(o,e){if(!o)return e;if(!e.startsWith(o))throw new Error(`Attribute path '${e}' should start with '${o}'`);return e.substring(o.length+1)}function wb(o){if(!Xe(o))throw new Error(`'${o}' is not binding expression`);const e=o.indexOf("|");return e>-1&&(o=o.substring(0,e).trimEnd()),o.substring(1)}function uf(o,e){return df.apply(this,arguments)}function df(){return df=(0,A.A)(function*(o,e){const t=e.match(/^(?:(?<attributeHostPath>.+)\.)?(?<attributeName>[^.]+)$/),{attributeHostPath:n,attributeName:a}=t.groups;return{attributeName:a,attributeHost:n?yield Xs(o,n):o}}),df.apply(this,arguments)}function ec(o){for(;o.parent;)o=o.parent;return o}function Wp(o,e){const t=o.split(".").slice(0,-1),n=Eb(e),a=n.map(r=>r.viewModel$.pipe((0,Ne.s)(1)));return(0,h.forkJoin)(a).pipe((0,E.T)(r=>{const u=[];let p=n.length-1,f=[];for(const S of t)if(u.push(S),T0(r[p],u)&&(f=[...u],p--,p<0))return null;return{context:n[p],contextPath:f.join(".")}}))}function Eb(o){const e=[o];return o.parent&&e.push(...Eb(o.parent)),e}function T0(o,e){let t=o;for(const n of e)t=t?.attributes?t.attributes[n]:t?.[n];return t instanceof sn}class xb{getAttributeValuesStream(e,t){return e?e.events$.pipe((0,se.p)(n=>n.type===ft.ChangeAttributeValue),(0,se.p)(n=>n?.payload?.attributeName===t),(0,z.n)(n=>t in e?Promise.resolve(e[t]):Promise.resolve(n.payload.value)),(0,ie.u)()):(0,h.of)(null)}getAttributeInitialValueStream(e,t,n){return e?(0,h.from)(Xs(e,t)).pipe((0,_e.Q)(n)):(0,h.of)(null)}getAttributeLocationChanges(e,t){return Wp(e,t).pipe((0,P.M)(n=>{if(!n)throw new Error(`Target binding context for attribute "${e} was not found"`)}),(0,z.n)(({context:n,contextPath:a})=>(0,h.combineLatest)([n.viewModel$,(0,h.of)(qp(a,e))])),(0,z.n)(([n,a])=>n?uf(n,a):(0,h.of)({attributeName:void 0,attributeHost:void 0})))}evaluate(e,t){const n=e.slice(1);return this.getAttributeLocationChanges(n,t).pipe((0,z.n)(a=>this.getAttributeValueChanges(a)))}}class wa extends xb{getAttributeValueChanges({attributeHost:e,attributeName:t}){const n=this.getAttributeValuesStream(e,t),a=this.getAttributeInitialValueStream(e,t,n);return(0,h.merge)(a,n)}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(wa)))(n||wa)}})()}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:wa,factory:wa.\u0275fac})}}class tc extends xb{constructor(e){super(),this._featureService=e,this._readonlyProperties=["readonly","disabled"]}getAttributeValueChangesInHybridMode(e,t,n,a){const r=e.getControl(t),u=a.slice(1);return this._getValuesStream(e,t,n,()=>{const p=this.getAttributeValuesStream(e,u).pipe((0,P.M)(w=>r.setPropertyValue(n,w))),f=this.getAttributeValuesStream(e,`${t}:${n}`).pipe((0,se.p)(()=>{const w=Object.getOwnPropertyDescriptor(e,u);return!(!!w?.get&&!!!w?.set)}),(0,P.M)(w=>e[u]=w)),S=(0,h.from)(Xs(e,u)).pipe((0,P.M)(w=>r.setPropertyValue(n,w,!0)),(0,_e.Q)(p));return(0,h.merge)(S,p,f)})}_getDefaultValue(e){if(!e)return null;try{return JSON.parse(e)}catch{return e}}_getValuesStream(e,t,n,a){return this._readonlyProperties.includes(n)?(0,h.forkJoin)({disableAttributeDeactivation:this._featureService.getFeatureState("DisableAttributeDeactivationUntilBRulesExecution"),hasBRulesAffectingAttribute:e._getIsAffectedByBusinessRules({name:t})}).pipe((0,z.n)(({disableAttributeDeactivation:r,hasBRulesAffectingAttribute:u})=>r||!0!==u?a():e._businessRulesActivated$.pipe((0,z.n)(p=>p?a():(0,h.of)(!0))))):a()}getAttributeValueChanges(e){const{attributeHost:t}=e;if(!t)return(0,h.of)(null);const[n,a]=e.attributeName.split(":"),[r,u]=a.split("="),p=t.getControl(n),f=this._getDefaultValue(u);if("string"==typeof f&&f?.startsWith("$"))return this.getAttributeValueChangesInHybridMode(t,n,r,f);if(null!=f){const S=p.getPropertyByName(r,!0);S.hasInitialValue||S.setInitialValue(f)}return this._getValuesStream(t,n,r,()=>{const S=this.getAttributeValuesStream(t,`${n}:${r}`),w=(0,h.of)(p.getPropertyValue(r)).pipe((0,se.p)(O=>null!=O),(0,_e.Q)(S));return(0,h.merge)(w,S)})}static{this.\u0275fac=function(t){return new(t||tc)(i.\u0275\u0275inject(Gt))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:tc,factory:tc.\u0275fac})}}class pr extends wa{removeConvertersFromExpression(e){const t=e.indexOf("|");return-1===t?e:(console.warn(`Cannot use converters in control binding expression: ${e}`),e.substring(0,t).trimEnd())}evaluate(e,t){const n=(e=this.removeConvertersFromExpression(e)).slice(1);return this.getAttributeLocationChanges(n,t).pipe((0,E.T)(({attributeHost:a,attributeName:r})=>a?a.getAttributeControl(r):new ce.MJ(null)))}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(pr)))(n||pr)}})()}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:pr,factory:pr.\u0275fac})}}class nc{_getStringValue(e){return e.match(/^'(.*)'$/)[1]}_getBooleanValue(e){if("true"===e)return!0;if("false"===e)return!1;throw new Error(`${e} is not Boolean value`)}evaluate(e){if(Go(e))return(0,h.of)(this._getStringValue(e));if($d(e))return(0,h.of)(parseFloat(e));if(Uo(e))return(0,h.of)(this._getBooleanValue(e));throw new Error(`Failed to parse primitive value binding expression: ${e}`)}static{this.\u0275fac=function(t){return new(t||nc)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:nc,factory:nc.\u0275fac})}}class mr extends wa{_getViewModelCollectionValue(e,t){if(!t.length)return Promise.resolve(e);const n=Array.from(e).map(a=>this._getObjectProp(a,t));return Promise.all(n)}_getObjectProp(e,t){var n=this;return(0,A.A)(function*(){const a=t.shift();return a?(e=yield e[a])instanceof ta?n._getObjectProp(e,t):e instanceof sn?n._getViewModelCollectionValue(e,t):n._getObjectProp(e,t):e})()}evaluate(e,t){const n=e.slice(1);return Wp(n,t).pipe((0,E.T)(a=>a??{context:ec(t),contextPath:""}),(0,z.n)(a=>(0,h.combineLatest)([a.context.viewModel$,(0,h.of)(qp(a.contextPath,n))])),(0,z.n)(([a,r])=>a?this._getObjectProp(a,r.split(".")):(0,h.of)(null)),(0,Ne.s)(1))}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(mr)))(n||mr)}})()}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:mr,factory:mr.\u0275fac})}}class Fu{constructor(){this._converterRegistry=c.ConverterRegistry,this._injector=(0,i.inject)(i.Injector)}get(e,t){return this._converterRegistry.get(e).instantiate(t)}register(e,t){throw new Error("NotImplemented")}clear(){this._converterRegistry.clear()}static{this.\u0275fac=function(t){return new(t||Fu)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Fu,factory:Fu.\u0275fac,providedIn:"root"})}}class hr extends yo{constructor(e,t,n,a=!1){super(),this._convertersRegistry=e,this._objectPropBindingExpressionInterpreter=t,this._fixedValueBindingExpressionInterpreter=n,this._isDesignTime=a}_evaluateParam(e,t){if(function qd(o){return Go(o)||$d(o)||Uo(o)}(e))return this._fixedValueBindingExpressionInterpreter.evaluate(e);if(Xe(e))return this._objectPropBindingExpressionInterpreter.evaluate(e,t);throw new Error(`Cannot parse parameter expression: ${e}`)}_evaluateParams(e,t){const n=e.map(a=>this._evaluateParam(a,t).pipe((0,rt.$)()));return(0,h.forkJoin)(n).pipe((0,Ys.U)([]))}_getConverters(e,t){return e.split("|").map(a=>a.trim()).map(a=>{const[r,...u]=a.split(":").map(S=>S.trim()),p=this._evaluateParams(u,t),f=t.viewModel$.pipe((0,rt.$)());return(0,h.forkJoin)([f,p]).pipe((0,E.T)(([S,w])=>O=>{if(!S)return null;const $=S._injectionContext;return this._convertersRegistry.get(r,$).convert(O,S,...w)}))})}_applyConverters(e,t){for(const[n,a]of Object.entries(t))if((e=a(e))instanceof Promise){const r=parseInt(n,10)+1;return this._applyAsyncConverters(e,[...t].slice(r))}return e}_applyAsyncConverters(e,t){return(0,A.A)(function*(){let n=yield e;for(const a of t)n=a(n),n instanceof Promise&&(n=yield n);return n})()}evaluate(e,t){if(this._isDesignTime||(0,Re.A)(e))return(0,h.of)(a=>a);const n=this._getConverters(e,t);return(0,h.forkJoin)(n).pipe((0,E.T)(a=>r=>this._applyConverters(r,a)))}static{this.\u0275fac=function(t){return new(t||hr)(i.\u0275\u0275inject(Fu),i.\u0275\u0275inject(mr),i.\u0275\u0275inject(nc),i.\u0275\u0275inject(_.w9C,8))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:hr,factory:hr.\u0275fac})}}class ic{evaluate(e,t){const n=e.slice(1);return ec(t).viewModel$.pipe((0,z.n)(a=>a?Xs(a,n):(0,h.of)(null)))}static{this.\u0275fac=function(t){return new(t||ic)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:ic,factory:ic.\u0275fac})}}class hs{constructor(e,t,n,a){this._attributeBindingExpressionInterpreter=e,this._attributePropertyBindingExpressionInterpreter=t,this._resourceBindingExpressionInterpreter=n,this._converterExpressionInterpreter=a}_applyConverter(e,t){return(0,A.A)(function*(){return(e=t(e))instanceof Promise&&(e=yield e),e})()}evaluateInputValueExpression(e,t){return kc(e)?this._resourceBindingExpressionInterpreter.evaluate(e,t):jo(e)?this._attributePropertyBindingExpressionInterpreter.evaluate(e,t):this._attributeBindingExpressionInterpreter.evaluate(e,t)}evaluate(e,t){const[a,r]=e.split(/\|(.*)/).map(f=>f.trim()),u=this.evaluateInputValueExpression(a,t),p=this._converterExpressionInterpreter.evaluate(r,t);return u.pipe((0,z.n)(f=>p.pipe((0,z.n)(S=>this._applyConverter(f,S)))))}static{this.\u0275fac=function(t){return new(t||hs)(i.\u0275\u0275inject(wa),i.\u0275\u0275inject(tc),i.\u0275\u0275inject(ic),i.\u0275\u0275inject(hr))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:hs,factory:hs.\u0275fac})}}class ac extends hs{constructor(e,t){super(null,null,null,t),this._objectPropBindingExpressionInterpreter=e}_evaluateEventBindingExpression(e,t){const n=t.initialEvent,a=e.replace(/@event\.?/,"");return(0,h.of)(a?(0,Ct.A)(n,a):n)}evaluateInputValueExpression(e,t){return Bo(e)?this._evaluateEventBindingExpression(e,t):this._objectPropBindingExpressionInterpreter.evaluate(e,t)}static{this.\u0275fac=function(t){return new(t||ac)(i.\u0275\u0275inject(mr),i.\u0275\u0275inject(hr))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:ac,factory:ac.\u0275fac})}}class sc{constructor(e){this._requestParamBindingExpressionInterceptor=e}_evaluate(e,t){var n=this;return(0,A.A)(function*(){const a={};for(const[r,u]of Object.entries(e))a[r]=yield n._evaluateConfigValue(u,t);return a})()}_evaluateConfigValue(e,t){return Array.isArray(e)?Promise.all(e.map(n=>this._evaluateConfigValue(n,t))):Xe(e)||Bo(e)?(0,h.lastValueFrom)(this._requestParamBindingExpressionInterceptor.evaluate(e,t),{defaultValue:null}):e&&"object"==typeof e?this._evaluate(e,t):Promise.resolve(e)}evaluate(e,t){return(0,h.from)(this._evaluate(e,t))}static{this.\u0275fac=function(t){return new(t||sc)(i.\u0275\u0275inject(ac))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:sc,factory:sc.\u0275fac})}}class gr{constructor(e){this._requestParamsBindingConfigInterpreter=e}_evaluateParams(e,t){return e?this._requestParamsBindingConfigInterpreter.evaluate(e,t):(0,h.of)({})}_getRequestBindingContext(e,t){return e.useRelativeContext?t:ec(t)}evaluate(e,t){return this._evaluateParams(e.params,t).pipe((0,S_.E)(this._getRequestBindingContext(e,t).viewModel$),(0,E.T)(([n,a])=>({type:e.request,$context:a,...n})),(0,rt.$)())}static{this.\u0275fac=function(t){return new(t||gr)(i.\u0275\u0275inject(sc))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:gr,factory:gr.\u0275fac})}}class fr extends wa{_getValidationStateChanges(e,t){const n=t.attributeHost.getAttributeControl(t.attributeName);return(0,h.merge)(e,n.statusChanges).pipe((0,E.T)(()=>({value:n.value,validationInfo:(0,le.A)(n,"valid","errors","dirty","touched")})),(0,Ca.F)(j.A))}evaluate(e,t){const n=e.slice(1);return this.getAttributeLocationChanges(n,t).pipe((0,z.n)(a=>a.attributeHost?this._getValidationStateChanges(super.evaluate(e,t),a):(0,h.of)({value:null,validationInfo:{valid:!0,errors:null,dirty:!1,touched:!1}})))}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(fr)))(n||fr)}})()}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:fr,factory:fr.\u0275fac})}}const Zp=[wa,tc,pr,hs,hr,mr,nc,gr,ac,sc,ic,fr,W.gX.create({token:ds,mappings:[{predicate:"converter",injectable:hr}]})],pf="Change",Jp="ValidationInfo";function ku(o,e){return!!c.ViewElementRegistry.viewElements.get(o)?.inputs?.[e]}function ju(o,e){return!!c.ViewElementRegistry.viewElements.get(o)?.outputs?.[e]}function Bu(o){return o+pf}function Ab(o){return o+Jp}function Yp(o,e){const t=e+Jp;return!!c.ViewElementRegistry.viewElements.get(o)?.validationInputs?.[t]}function Rb(o,e,t){return hf.apply(this,arguments)}function hf(){return hf=(0,A.A)(function*(o,e,t){const n=yield(0,h.firstValueFrom)(Wp(o,t)),a=yield(0,h.firstValueFrom)(n.context.viewModel$);if(!a)return;const r=qp(n.contextPath,o),{attributeHost:u,attributeName:p}=yield uf(a,r);u.getAttributeControl(p).markAsDirty(),u[p]=e}),hf.apply(this,arguments)}function Pb(o,e){return gf.apply(this,arguments)}function gf(){return gf=(0,A.A)(function*(o,e){const t=yield(0,h.firstValueFrom)(Wp(o,e)),n=yield(0,h.firstValueFrom)(t.context.viewModel$);if(!n)return;const a=qp(t.contextPath,o),{attributeHost:r,attributeName:u}=yield uf(n,a),p=r.getAttributeControl(u);p.touched||(p.markAsTouched(),p.updateValueAndValidity())}),gf.apply(this,arguments)}class Ob{constructor(e){this.injector=e,this._loadingAttributeName="loading",this.bindingExpressionInterpreter=e.get(hs),this.attrCtrlExpInterpreter=e.get(pr),this.requestBindingConfigInterpreter=e.get(gr),this.validationBindingInterpreter=e.get(fr),this._bindingContext=e.get(dr,null),this._macrosHandlerService=e.get(_.dFt),this._isDesignTime=e.get(_.w9C,!1);const t=e.get(_.G2Y);this._isSafeBinding=!t.DisableSafePropertiesBinding}_useMacros(e,t){if(!this._bindingContext)return t(e);let n;const a=new h.Subject,r=this._bindingContext.viewModel$.pipe((0,z.n)(u=>this._macrosHandlerService.handleResourceMacros(e,u)),(0,E.T)((u,p)=>{n?.unsubscribe(),n=t(u),0===p&&n.ready.then(()=>{a.next(),a.complete()})}),(0,_a.j)(()=>n?.unsubscribe())).subscribe();return new Bt(r,(0,h.lastValueFrom)(a,{defaultValue:null}))}_bindLoadingProperty(e,t){if(Object.keys(e).some(p=>p===this._loadingAttributeName))return new Bt;const a=(0,cf.A)(e).entries().filter(([p,f])=>this.isInputBinding(p,f,t,e)&&Xe(f)).value();if(!a.length)return new Bt;const r=a.map(([p,f])=>wb(f)),u=ec(this._bindingContext).viewModel$.pipe((0,z.n)(p=>{if(!p)return(0,h.of)();let f=[];const S=p.events$.pipe((0,se.p)(O=>O.type===ft.StartLoadModelAttributes),(0,se.p)(O=>{const $=Object.keys(O.payload);return r.some(te=>$.includes(te))}),(0,P.M)(O=>{f=Object.keys(O.payload)}),(0,P.M)(()=>t.setPropertyValue("loading",!0))),w=p.events$.pipe((0,se.p)(O=>O.type===ft.FinishLoadModelAttributes),(0,se.p)(O=>{const $=Object.keys(O.payload);return f.every(te=>$.includes(te))}),(0,P.M)(()=>t.setPropertyValue("loading",!1)),(0,P.M)(()=>f=[]));return(0,h.merge)(S,w)})).subscribe();return new Bt(u)}_isControlProperty(e,t){return e===c.ViewElementRegistry.getFormControlRelatesAttribute(t.type)}_getViewElementInputProperties(e){const t=c.ViewElementRegistry.viewElements.get(e.type);return t?[...Object.keys(t.inputs??{}).filter(n=>t.inputs[n].propertyBindable)]:["visible"]}_getViewElementEntries(e,t){const n=c.ViewElementRegistry.getFormControlRelatesAttribute(t.type),a=e.find(([u])=>"bindTo"===u);let r=e.filter(([u])=>"bindTo"!==u);if(a){const[,u]=a;if(!u)return r;this._getViewElementInputProperties(t).forEach(f=>{if(f!==n){let S=u;S=`${S}:${f}`;const w=t[f];null!=w&&(S+=`=${w}`),r=r.filter(([O])=>O!==f),r.push([f,S])}})}return r}_bindInputWithValidation(e,t,n){const a=this.validationBindingInterpreter.evaluate(t,this._bindingContext).pipe((0,Wi.Z)(null),(0,h.pairwise)()),r=Ab(e);return Bt.subscribe(a,([p,f])=>{p?.value!==f?.value&&n.setPropertyValue(e,f.value),n.setPropertyValue(r,f?.validationInfo)})}_bindFocusout(e,t){const n=t.getEvent("focusout"),a=e.slice(1);return Bt.subscribe(n,()=>Pb(a,this._bindingContext))}_bindInputs(e,t){const[n,a]=(0,cf.A)(e).entries().filter(([f,S])=>this.isInputBinding(f,S,t,e)&&!this.isTwoWayBinding(f,S,t,e)).partition(([,f])=>Xe(f)).value();a.forEach(([f,S])=>{S=this._isControlProperty(f,e)?new ce.MJ(S):S,t.setPropertyValue(f,S)});const u=this._getViewElementEntries(n,e).map(([f,S])=>{const $=(this._isControlProperty(f,e)?this.attrCtrlExpInterpreter:this.bindingExpressionInterpreter).evaluate(S,this._bindingContext);if(Yp(e.type,f)&&_n(S))return this._bindInputWithValidation(f,S,t);{const te=Fe=>t.setPropertyValue(f,Fe);return Bt.subscribe($,te,!1)}}),p=this._bindLoadingProperty(e,t);return Bt.all([...u,p])}_createRequest(e,t){const n={...this._bindingContext,initialEvent:t};return this.requestBindingConfigInterpreter.evaluate(e,n).pipe((0,E.T)(a=>({...a,$initialEvent:t})))}_bindOutputSafely(e,t,n){const a=e.getEvent(t),r=ec(this._bindingContext).viewModel$.pipe((0,z.n)(p=>p._destroy$));return Bt.subscribe(a,p=>(0,h.lastValueFrom)(this._createRequest(n,p).pipe((0,z.n)(f=>f.$context.executeRequest(f)),(0,_e.Q)(r))).catch(()=>null))}_bindOutputUnsafely(e,t,n){const a=e.getEvent(t).pipe((0,z.n)(u=>this._createRequest(n,u)));return Bt.subscribe(a,u=>u.$context.executeRequest(u))}_bindOutput(e,t,n){return this._isSafeBinding?this._bindOutputSafely(e,t,n):this._bindOutputUnsafely(e,t,n)}_bindOutputs(e,t){const a=Object.entries(e).filter(([r,u])=>this.isOutputBinding(r,u,t,e)).map(([r,u])=>this._bindOutput(t,r,u));return Bt.all(a)}_bindTwoWays(e,t){const n=Object.entries(e).filter(([r,u])=>this.isTwoWayBinding(r,u,t,e)),a=[];return n.forEach(([r,u])=>{const p=this.bindingExpressionInterpreter.evaluate(u,this._bindingContext);Yp(e.type,r)&&_n(u)?a.push(this._bindInputWithValidation(r,u,t)):a.push(Bt.subscribe(p,ke=>t.setPropertyValue(r,ke)));const S=u.slice(1),w=Bu(r),O=this.getViewEventsStream(t,w),te=Bt.subscribe(O,ke=>Rb(S,ke,this._bindingContext));a.push(te);const Fe=this._bindFocusout(u,t);a.push(Fe)}),Bt.all(a)}isInputBinding(e,t,n,a){return ku(a.type,e)}isOutputBinding(e,t,n,a){return ju(a.type,e)}isTwoWayBinding(e,t,n,a){const r=Bu(e);return _n(t)&&ku(a.type,e)&&ju(a.type,r)&&!(r in a)}bind(e,t){const n=a=>Bt.all([this._bindInputs(a,e),this._bindOutputs(a,e),this._bindTwoWays(a,e)]);return this._isDesignTime?this._useMacros(t,n):n(t)}}class Vb extends Ob{isInputBinding(e,t,n,a){return super.isInputBinding(e,t,n,a)||!this.isOutputBinding(e,t,n,a)}isOutputBinding(e,t,n,a){return super.isOutputBinding(e,t,n,a)||n.getPropertyValue(e)instanceof i.EventEmitter}getViewEventsStream(e,t){return e.getEvent(t)}}class w0 extends Ob{getViewEventsStream(e,t){return e.getEvent(t).pipe((0,h.map)(n=>n.detail))}}class Lb{constructor(e,t,n,a,r,u,p){this._componentRef=e,this._inputs=t,this._ngZone=a,this._changeDetectorRef=r,this.nativeElement=u,this.hostView=p,this._propertyValues=new Map,this.instance=n;const f=this._componentRef.injector.get(_.G2Y,null);this._enableInstanceValueSetFeature=f?.["ComponentViewElementRef.EnableInstanceValueSet"]}setValue(e,t){if(this._inputs?.[e])this._componentRef.setInput(e,t);else if(this._enableInstanceValueSetFeature)(0,Ar.A)(this.instance,e,t);else{const n=["selected","layoutConfig","dragging","currentLayoutConfig"];if(e in this.instance&&!n.includes(e)){let r=`Can't set value of the '${e}' input on the '${this._componentRef.componentType.name}' component. `;r+=`Make sure that the '${e}' property is annotated with @Input() or a mapped @Input('${e}') exists.`,console.error(r)}}this._changeDetectorRef.detectChanges()}getPropertyValue(e){return(0,Ct.A)(this.instance,e)}getEvent(e){const t=this.getPropertyValue(e);return!t&&this.nativeElement?(0,h.fromEvent)(this.nativeElement,e):t}on(e,t){const a=this.getEvent(e).subscribe(t);return()=>{a.unsubscribe()}}setPropertyValue(e,t){(!this._propertyValues.has(e)||t!==this._propertyValues.get(e))&&(this._propertyValues.set(e,t),this._ngZone.run(()=>this.setValue(e,t)))}destroy(){this.hostView?.destroy(),this._componentRef?.destroy(),this.nativeElement=null}}class E0{constructor(e){this._propertyValues=new Map,this.instance=e}getPropertyValue(e){return this.instance[e]}getEvent(e){return(0,h.fromEvent)(this.instance,e)}on(e,t){return this.instance.addEventListener(e,t),()=>this.instance.removeEventListener(e,t)}setPropertyValue(e,t){(!this._propertyValues.has(e)||t!==this._propertyValues.get(e))&&(this._propertyValues.set(e,t),this.instance[e]=t)}destroy(){}}class x0{constructor(e,t){this._ngZone=t,this._propertyValues=new Map,this.instance=e}setValue(e,t){(0,Ar.A)(this.instance,e,t)}getPropertyValue(e){return(0,Ct.A)(this.instance,e)}getEvent(e){return this.getPropertyValue(e)}on(e,t){const a=this.getPropertyValue(e).subscribe(t);return()=>{a.unsubscribe()}}setPropertyValue(e,t){(!this._propertyValues.has(e)||t!==this._propertyValues.get(e))&&(this._propertyValues.set(e,t),this._ngZone.run(()=>this.setValue(e,t)))}destroy(){this.instance=null}}class Fb{constructor(e){this.injector=e}}class wn{canResolve(e){return c.ViewElementRegistry.viewElements.has(e)}getViewElementRegistryItem(e){return c.ViewElementRegistry.viewElements.get(e)}getViewElementType(e){const t=this.getViewElementRegistryItem(e.type);return this.getViewElementTypeByRegistryItem(t)}getCrtInputs(e){return this.getViewElementRegistryItem(e)?.inputs}getSelector(e){const t=this.getViewElementRegistryItem(e);return this.getSelectorByRegistryItem(t)}getSelectorByRegistryItem(e){return e&&"selector"in e?e.selector:null}getViewElementTypeByRegistryItem(e){return e&&"typeRef"in e?e.typeRef:null}static{this.\u0275fac=function(t){return new(t||wn)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:wn,factory:wn.\u0275fac})}}class Gu extends wn{_getItemRenderConfigByType(e,t){const n=c.DesignTimeViewElementRegistry.infos.get(e);let a=this._getRenderConfigFromViewElement(n);if(!a){const r=c.InterfaceDesignerItemRegistry.get(t);a=this._getRenderConfigFromViewElement(r)}return a??{renderStrategy:c.ViewElementRenderStrategy.OnViewport,placeholderSize:{height:c.VIEW_ELEMENT_DEFAULT_HEIGHT}}}_getRenderConfigFromViewElement(e){if(e&&"renderStrategy"in e)return e.renderStrategy===c.ViewElementRenderStrategy.Default?{renderStrategy:c.ViewElementRenderStrategy.Default}:{renderStrategy:c.ViewElementRenderStrategy.OnViewport,placeholderSize:e.placeholderSize}}canResolve(e){return c.ViewElementRegistry.viewElements.has(e)||c.DesignTimeViewElementRegistry.infos.has(e)}getViewElementType(e){const t=e.type,n=c.DesignTimeViewElementRegistry.getByOverriddenType(t);if(n&&!e?.sealed)return n.typeRef;const a=c.ViewElementRegistry.viewElements.get(t);return a&&"typeRef"in a?a.typeRef:c.DesignTimeViewElementRegistry.infos.has(t)?c.DesignTimeViewElementRegistry.infos.get(t).typeRef:null}getViewElementRegistryItem(e){const t=c.DesignTimeViewElementRegistry.getByOverriddenType(e);let n=null;t&&(n=c.DesignTimeViewElementRegistry.infos.get(t.type)),n||(n=super.getViewElementRegistryItem(e));const a=this._getItemRenderConfigByType(t?.type,e);return{...n,...a}}getCrtInputs(e){const t=c.DesignTimeViewElementRegistry.getByOverriddenType(e);return t?t?.inputs:c.ViewElementRegistry.viewElements.get(e)?.inputs}getSelector(e){if(c.DesignTimeViewElementRegistry.getByOverriddenType(e))return null;const t=c.ViewElementRegistry.viewElements.get(e);return t&&"selector"in t?t.selector:null}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(Gu)))(n||Gu)}})()}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Gu,factory:Gu.\u0275fac})}}class Kp{_setDefaultToolbarConfigValues(e){const t=e.toolbarConfig;t&&(t instanceof Array?t:[t]).forEach(a=>{a.groupType||(a.groupType=e.viewElementGroupType),a.caption||(a.caption=e.typeCaption)})}getDesignViewElementConfigs(){const e=new Map;return c.InterfaceDesignerItemRegistry.interfaceDesignerItemRegistrationInfos.forEach((t,n)=>{const a=t.toolbarConfig;a&&(this._setDefaultToolbarConfigValues(t),e.set(n,a))}),e}static{this.\u0275fac=function(t){return new(t||Kp)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Kp,factory:Kp.\u0275fac})}}class kb extends Fb{createComponent(e){const t=this.injector.get(wn),n=this.injector.get(vo),a=t.getViewElementType(n);if(!a)throw new Error(`Component for type ${n.type} not found`);const r=this.injector.get(i.ViewContainerRef),u=this.injector.get(i.Renderer2),p=t.getCrtInputs(n.type),f=r.createComponent(a,{index:0,injector:this.injector});e?.forEach(({name:$,value:te})=>{u.setAttribute(f.location.nativeElement,$,te)});const S=f.injector.get(i.ChangeDetectorRef),w=f.injector.get(i.ElementRef).nativeElement;f.changeDetectorRef.detectChanges();const O=this.injector.get(i.NgZone);return new Lb(f,p,f.instance,O,S,w,f.hostView)}}class A0 extends Fb{createComponent(e){const t=this.injector.get(wn),n=this.injector.get(i.Renderer2),a=this.injector.get(i.ViewContainerRef),r=this.injector.get(vo),u=t.getSelector(r.type),p=document.createElement(u);return e?.forEach(({name:f,value:S})=>{n.setAttribute(p,f,S)}),n.appendChild(a.element.nativeElement.parentElement,p),this._initDirectionality(p),new E0(p)}_initDirectionality(e){"rtl"===this.injector.get(Mt.dS)?.value&&e.setAttribute("dir","rtl")}}class R0{}class jb extends R0{constructor(e){super(),this.injector=e,this.viewElementConfig=this.injector.get(vo),this.featureValues=this.injector.get(_.G2Y,{optional:!0}),this.measurePerformanceService=this.injector.get(_.gcc),this._componentCreator=this.injector.get(Mb)}_getElementName(){return`${this.viewElementConfig.type.split(".")?.[1]} ${this.viewElementConfig.name}`}_getDOMAttributes(){const e=[];return this.featureValues?.UseViewElementDataItemMarker&&e.push({name:"data-item-marker",value:this.viewElementConfig.dataItemMarker||this.viewElementConfig.name}),e}createComponent(e){return this._componentCreator.createComponent(e)}getComponentRef(){const e=this._getElementName(),t=this._getDOMAttributes();return this.measurePerformanceService.measure(e,()=>this.createComponent(t))}show(){const e=this.getComponentRef();return(0,h.of)(e)}hide(){}}class P0 extends jb{constructor(e,t,n){super(e),this.injector=e,this._creator=t,this._destroyed=n,this._renderer=this.injector.get(i.Renderer2),this._container=this.injector.get(i.ViewContainerRef),this._resolver=this.injector.get(wn),this._initMinHeight(),this._subscribeDestroyed()}get _parentElement(){return this._container.element.nativeElement.parentElement}_handleIntersection(e,t){if(this._parentElement){if(e&&!this._componentRef?.hostView)return this._initResizeObservable(),t.next(this.getComponentRef()),void t.complete();this._componentRef?.hostView&&(e?this._showElement():this._hideElement())}}_initIntersectionObserver(e){let t=this.viewElementConfig.selected;this._intersectionObserver=new IntersectionObserver(n=>{n.forEach(a=>{t?t=!1:this._handleIntersection(a.isIntersecting,e)})}),this._intersectionObserver.observe(this._parentElement),t&&this._handleIntersection(!0,e)}_initResizeObservable(){this._resizeObserver||(this._resizeObserver=new ResizeObserver(e=>{const{height:t,width:n}=e[0].contentRect;this._minHeight=`${t}px`,this._minWidth=`${n}px`}),this._resizeObserver.observe(this._parentElement))}_showElement(){this._display?this._renderer.setStyle(this._componentRef.nativeElement,"display",this._display):this._renderer.removeStyle(this._componentRef.nativeElement,"display"),this._removeMinSize()}_hideElement(){this._applyMinSize(),this._display=this._componentRef.nativeElement?.style.display,this._renderer.setStyle(this._componentRef.nativeElement,"display","none")}_removeMinSize(){this._renderer.removeStyle(this._parentElement,"min-height"),this._minWidth&&this._renderer.removeStyle(this._parentElement,"min-width")}_applyMinSize(){this._renderer.setStyle(this._parentElement,"min-height",this._minHeight),this._minWidth&&this._renderer.setStyle(this._parentElement,"min-width",this._minWidth)}_initMinHeight(){const e=this._resolver.getViewElementRegistryItem(this.viewElementConfig.type);e?e.renderStrategy===c.ViewElementRenderStrategy.OnViewport&&(this._minHeight=e.placeholderSize.height):console.warn(`View element with type "${this.viewElementConfig.type}" not found`)}_subscribeDestroyed(){this._destroyed?.subscribe(()=>{const e=this._componentRef?.hostView;e&&!e.destroyed&&(e.detach(),e.destroy()),this._componentRef&&(this._componentRef.instance=null),this._componentRef=null,this._container.detach(),this._container.clear(),this._container=null,this._resizeObserver?.disconnect(),this._intersectionObserver?.disconnect()})}createComponent(e){return this._componentRef=this._creator.createComponent(e),this._removeMinSize(),this._componentRef}show(){return this._applyMinSize(),new h.Observable(e=>{this._initIntersectionObserver(e)})}hide(){this._resizeObserver?.disconnect(),this._intersectionObserver?.disconnect()}}const Bb=new i.InjectionToken("COMPONENT_PROPERTIES_BINDER"),Gb=new i.InjectionToken("DIRECTIVE_PROPERTIES_BINDER"),Ub=new i.InjectionToken("VIEW_ELEMENT_RENDER_STRATEGY"),ff=new i.InjectionToken("VIEW_ELEMENT_RENDER_STRATEGY_VALUE"),yf=function(o){return!!function(o){const e=o.get(vo);return o.get(wn).getSelector(e.type)}(o)},L0=function(o){return yf(o)?new w0(o):new Vb(o)},F0=function(o){return yf(o)?new A0(o):new kb(o)},zb=function(o){return new jb(o)},B0=function(o){return function(o){return o.get(_.G2Y,{optional:!0})}(o).UseLazyComponentCreationInDesignTime},U0=function(o,e){const t=function(o){const e=o.get(vo);return o.get(wn).getViewElementRegistryItem(e.type)?.renderStrategy===c.ViewElementRenderStrategy.Default}(o),n=B0(o),a=yf(o),r=!function(o){return o.get(_.w9C,!1)}(o);return t||a||r||!n?zb(o):new P0(o,new kb(o),e)};class Ea{constructor(e,t,n,a,r,u){this._resolver=e,this.parentDirective=t,this.injector=n,this._container=a,this._isDesignTime=r,this._ngZone=u,this._ownProperties=[{property:"visible",defaultValue:!0,omitForViewModelBinding:!0},{property:"bindTo",defaultValue:null,omitForViewModelBinding:!1}],this._destroyed$=new h.Subject,this._showElementSubscription=new h.Subscription,this._bindingContext=null,this._isCreating=!1,this._visible=!1,this.nested=[],this.total=0,this.viewElementShow=new i.EventEmitter,this._featureValues=(0,i.inject)(_.G2Y,{optional:!0}),this._shouldLoadLazyModules=!this._featureValues.DisableLoadingLazyModulesFromViewElementDirective,this._measurePerformanceService=(0,i.inject)(_.gcc),this._directiveRef=new x0(this,this._ngZone)}get visible(){return this._visible}set visible(e){this._visible=e,this._setViewElementVisibility(e||this._isDesignTime)}_bindSelfToViewModel(){const e=this._ownProperties.reduce((t,{property:n,defaultValue:a})=>({...t,[n]:this.viewElementConfig[n]??a}),{});this._ngZone.runOutsideAngular(()=>this.bindDirectiveProperties(e))}_bindComponentToViewModel(){const e=(0,Yn.A)(this.viewElementConfig,...this._ownProperties.filter(({omitForViewModelBinding:t})=>!0===t).map(({property:t})=>t));this._ngZone.runOutsideAngular(()=>this.bindComponentProperties(e))}_setViewElementVisibility(e){e&&!this.componentRef?this._showViewElement():!e&&this.componentRef&&this._hideViewElement()}_showViewElement(){const e=this.viewElementConfig.type;if(this._typeName=e,this._typeName)if(this._resolver.canResolve(e))this._showComponent();else{if(this.injector.get(v0,!1))return;const n=this._container.createComponent($p);n.instance.caption=e;const a=n.injector.get(i.ElementRef).nativeElement,r=this._resolver.getCrtInputs(e);console.warn(`View element with type "${e}" not found`),this.componentRef=new Lb(n,r,n.instance,this._ngZone,n.changeDetectorRef,a,n.hostView)}}_getLazyModuleRefs(e){return this._measurePerformanceService.measure("ViewElementDirective.SEARCHING_SCHEMA_LAZY_ITEMS",()=>a0(ub(this.viewElementConfig),{requestScopes:e?._scopes}))}_getInjectionContext(e){const t=e;return t._injectionContext||Ji(t)._injectionContext}_addLazyModulesToContext(e,t){const n=this._getInjectionContext(e);for(const a of t)n.addLazyModule(a);(0,c.callOnContextUpdateHooks)(n)}_loadLazyModules(){return this._shouldLoadLazyModules?this._featureValues.DisableFreedomUiLazyLoading?(0,h.from)(c.LazyModulesManager.instance.loadAll()):(this._bindingContext?.viewModel$??(0,h.of)(null)).pipe((0,z.n)(t=>{const n=this._getLazyModuleRefs(t);if(0===n.size)return(0,h.of)(void 0);const a=(0,h.from)(Promise.all(Array.from(n,r=>r.loadAndBootstrap())));return t?a.pipe((0,E.T)(r=>(0,c.getDeepModuleDependencies)(r)),(0,P.M)(r=>this._addLazyModulesToContext(t,r))):a}),(0,Ne.s)(1),this._measurePerformanceService.measure$("ViewElementDirective.LOADING_SCHEMA_LAZY_ITEMS")):(0,h.of)(void 0)}_showComponent(){this._isCreating||(this._isCreating=!0,this._renderStrategyInstance&&this._renderStrategyInstance.hide(),this._renderStrategyInstance=this.injector.get(Ub),this._showElementSubscription.add(this._loadLazyModules().pipe((0,z.n)(()=>this._renderStrategyInstance.show()),(0,se.p)(e=>!!e)).subscribe(e=>{this.componentRef=e,this._measurePerformanceService.measure(`binding ${this.viewElementConfig.name}`,()=>this._bindComponentToViewModel()),this.viewElementShow.emit(this),this._isCreating=!1,this._featureValues?.UseMeasurePerformanceTools&&this._measurePerformanceService.rendering$.next()})))}_hideViewElement(){this._componentBinding?.unsubscribe(),this._showElementSubscription.unsubscribe(),this._renderStrategyInstance.hide(),this._container.clear(),this.componentRef?.destroy(),this.componentRef=null}bindDirectiveProperties(e){this._directiveBinding?.unsubscribe(),this._directiveBinding=this._directivePropertiesBinder.bind(this._directiveRef,e)}bindComponentProperties(e){this._componentBinding?.unsubscribe(),this.componentRef&&(this._componentBinding=this._componentPropertiesBinder.bind(this.componentRef,e))}updateViewElementConfig(e){this.viewElementConfig=e,this._bindSelfToViewModel(),this._bindComponentToViewModel()}ngOnInit(){this._shouldLoadLazyModules&&(this._bindingContext=this.injector.get(dr,null)),this._directivePropertiesBinder=this.injector.get(Gb),this._componentPropertiesBinder=this.injector.get(Bb),this.parentDirective&&this.parentDirective.attachNested(this),this._bindSelfToViewModel()}attachNested(e){this.nested.push(e)}detachNested(e){this.nested.splice(this.nested.indexOf(e),1)}ngOnDestroy(){this.parentDirective&&this.parentDirective.detachNested(this),this.nested.forEach(e=>e.ngOnDestroy()),this.componentRef?.destroy(),this.componentRef=null,this.viewElementConfig=null,this._componentBinding?.unsubscribe(),this._directiveBinding?.unsubscribe(),this._showElementSubscription.unsubscribe(),this._container.clear(),this._directiveRef.destroy(),this._renderStrategyInstance=null,this._destroyed$.next(),this._destroyed$.complete()}static{this.\u0275fac=function(t){return new(t||Ea)(i.\u0275\u0275directiveInject(wn),i.\u0275\u0275directiveInject(Ea,12),i.\u0275\u0275directiveInject(i.Injector),i.\u0275\u0275directiveInject(i.ViewContainerRef),i.\u0275\u0275directiveInject(_.w9C,8),i.\u0275\u0275directiveInject(i.NgZone))}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:Ea,selectors:[["","crtViewElement",""]],inputs:{viewElementConfig:[i.\u0275\u0275InputFlags.None,"crtViewElement","viewElementConfig"],renderStrategy:"renderStrategy",visible:"visible"},outputs:{viewElementShow:"viewElementShow"},features:[i.\u0275\u0275ProvidersFeature([{provide:vo,useFactory:e=>e.viewElementConfig,deps:[(0,i.forwardRef)(()=>Ea)],multi:!1},{provide:Bb,useFactory:L0,deps:[i.Injector],multi:!1},{provide:Gb,useFactory:e=>new Vb(e),deps:[i.Injector],multi:!1},{provide:Mb,useFactory:F0,deps:[i.Injector],multi:!1},{provide:ff,useFactory:(e,t)=>function(o,e){return o||e}(e.renderStrategy,t),deps:[(0,i.forwardRef)(()=>Ea),[new i.Inject(ff),new i.SkipSelf,new i.Optional]],multi:!1},{provide:Ub,useFactory:(e,t)=>function(o,e){const t=o.get(ff)||c.ViewElementRenderStrategy.Default,a={[c.ViewElementRenderStrategy.Default]:zb,[c.ViewElementRenderStrategy.OnViewport]:U0}[t];if(!a)throw new Error(`Unsupported render strategy type: ${t}`);return a(o,e)}(e,t._destroyed$),deps:[i.Injector,(0,i.forwardRef)(()=>Ea)],multi:!1},...Zp])]})}}const z0=o=>({viewModel$:o.viewModel$,parent:o.parent}),H0=(o,e)=>{const t=new h.ReplaySubject(1);return t.next(null),(o.viewModel$??e?.viewModel$)?.subscribe(t),{viewModel$:t.asObservable(),parent:o.viewModel$?e:e?.parent,viewModelSubject:t}};class Uu{constructor(e){this.injector=e}set viewModel(e){(e instanceof ta||null==e)&&(this.viewModel$||(this.viewModel$=new h.ReplaySubject(1)),this.viewModel$.next(e))}ngOnDestroy(){this.viewModel=null,this.viewModel$?.complete()}static{this.\u0275fac=function(t){return new(t||Uu)(i.\u0275\u0275directiveInject(i.Injector))}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:Uu,selectors:[["","crtViewModel",""]],inputs:{viewModel:[i.\u0275\u0275InputFlags.None,"crtViewModel","viewModel"]},exportAs:["crtViewModel"],features:[i.\u0275\u0275ProvidersFeature([{provide:dr,useFactory:z0,deps:[[new i.Inject(Db),new i.Self]],multi:!1},{provide:Db,useFactory:H0,deps:[(0,i.forwardRef)(()=>Uu),[new i.Inject(dr),new i.SkipSelf,new i.Optional]],multi:!1}])]})}}class Qp{constructor(){this._viewModel$=new h.BehaviorSubject(null),this.viewModel$=this._viewModel$.asObservable()}set viewModel(e){this._viewModel$.next(e)}get viewModel(){return this._viewModel$.getValue()}static{this.\u0275fac=function(t){return new(t||Qp)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Qp,factory:Qp.\u0275fac})}}class rc{static{this.\u0275fac=function(t){return new(t||rc)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:rc})}static{this.\u0275inj=i.\u0275\u0275defineInjector({providers:[wn,...Zp],imports:[R.CommonModule,_.K2W,Lu,Lu]})}}const _f=new i.InjectionToken("CRT_JIT_MODULES"),$0=new i.InjectionToken("CRT_SCHEMA_BINDING_CACHE");var Hb=b(73e3),$b=b(35293),qb=b(6737);class dt{static _getViewElementInputProperties(e){const t=c.ViewElementRegistry.viewElements.get(e.type);return[...Object.keys(t.inputs??{}).filter(n=>t.inputs[n].propertyBindable),"visible"]}static createLayoutConfigComponentParts(e,t,n){for(const[a,r]of Object.entries(t))n.attributes["layout-config-"+(0,qb.A)(a)]={value:r}}static createVisibleComponentPartsWrapper(e,t,n,a){let u=t;const p=[];Xe(t)&&(u=t,p.push({name:"crtBinding",arguments:[{value:e,propertyKey:dt.getContextPropertyName(e+"|propertyName",n)},{value:a,propertyKey:dt.getContextPropertyName(e+"|viewElementConfig",n)}]}));const f=n.directives.find(S=>"crtIf"===S.selector);if(f)f.values.unshift({propertyKey:this.getContextPropertyName(e,n),value:u,pipes:p});else{const S={values:[{propertyKey:this.getContextPropertyName(e,n),value:u,pipes:p}],selector:"crtIf",useAsterisk:!0};dt.addCrtIfDirectiveAdditionalInputs(S,a),n.directives.push(S)}return n}static getContextPropertyName(e,t){return t.name+":"+e}static getViewElementEntries(e){const t=c.ViewElementRegistry.getFormControlRelatesAttribute(e.type),n=Object.entries(e),a=n.find(([u])=>"bindTo"===u);let r=n.filter(([u])=>"bindTo"!==u);if(a){const u=this._getViewElementInputProperties(e),[,p]=a;u.forEach(f=>{if(f!==t){const S=e[f];if(null==S||"string"!=typeof S||"string"==typeof S&&!S.includes("|")){let w=p;w=`${w}:${f}`,null!=S&&(w+=`=${JSON.stringify(S)}`),r=r.filter(([O])=>O!==f),r.push([f,w])}}})}return r}static addCrtIfDirectiveAdditionalInputs(e,{visibilityStrategyMode:t}){if(!t)return;const n=e.additionalInputs||[];n.push({propertyKey:"visibilityStrategyMode",value:t}),e.additionalInputs=[...n]}}class oc{constructor(e){this.parent=e,this.inputs={},this.outputs={},this.directives=[],this.attributes={},this.content=[]}}class Cf{constructor(e,t){this.changeDetectorRef=e,this.containerRef=t,this.init=new i.EventEmitter}ngOnInit(){this.init.emit(this)}static{this.\u0275fac=function(t){return new(t||Cf)(i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(i.ViewContainerRef))}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:Cf,selectors:[["","crtViewInit",""]],outputs:{init:"init"}})}}const bf="crt-hide-visible",zu="_instanceId",Xp="_instanceCache";class Io{constructor(){this._featureValues=(0,i.inject)(_.G2Y)}create(e){const{attributes:t,content:n,directivesContent:a,inputs:r,outputs:u,parts:p}=e,{id:f,name:S="root",selector:w}=p;return`\n\t\t\t<${w} id="${this._featureValues.DisableRemoveDuplicateIDs?S:f||S}" crtViewInit (init)="refs['${S}'] = $event"\n\t\t\t\t${r.join(" ")} ${a} ${u.join(" ")} ${t.join(" ")}\n\t\t\t>\n\t\t\t\t${n.join(" ")}\n\t\t\t</${w}>\n\t\t`}static{this.\u0275fac=function(t){return new(t||Io)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Io,factory:Io.\u0275fac})}}class To extends Io{_getPlaceholderTemplate(e,t){const n=t?.placeholderSize?.height;return`<div ${e.join(" ")}\n\t\t\t\t\tstyle="height: ${n}; background-color: transparent;">\n\t\t\t\t</div>`}create(e){const{attributes:t,parts:n}=e,a=super.create(e),r=this._getPlaceholderTemplate(t,n);return`\n\t\t\t\t<ng-container ${n.slot}>\n\t\t\t\t\t@defer (on viewport) {\n\t\t\t\t\t\t${a}\n\t\t\t\t\t} @placeholder {\n\t\t\t\t\t\t${r}\n\t\t\t\t\t}\n\t\t\t\t</ng-container>\n\t\t\t`}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(To)))(n||To)}})()}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:To,factory:To.\u0275fac})}}class Hu{constructor(){this._disableOnViewportRenderFeatureName="Runtime.DisableOnViewportRender",this._featureValues=(0,i.inject)(_.G2Y),this._injector=(0,i.inject)(i.Injector)}create(e){return this._featureValues[this._disableOnViewportRenderFeatureName]||e!==c.ViewElementRenderStrategy.OnViewport?this._injector.get(Io):this._injector.get(To)}static{this.\u0275fac=function(t){return new(t||Hu)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Hu,factory:Hu.\u0275fac,providedIn:"root"})}}class W0 extends Error{constructor(e,t){super(`Validation error. Cannot create ${e} with name ${t}. Incorrect format`)}}const Z0=/^([#a-zA-Z_]+)([\w_.-]+)/gm;function em(o,e){const t=e.match(Z0);if(!t?.length||t[0]!==e)throw new W0(o,e)}class tm{static{this.\u0275fac=function(t){return new(t||tm)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:tm})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[R.CommonModule,rc,R.CommonModule,rc]})}}class lc{constructor(e,t,n,a){this._injector=t,this._ngZone=n,this._componentTemplateFactory=a,this._featureValues=this._injector.get(_.G2Y),this._modules=lc._flatModulesArrays(e)}static _flatModulesArrays(e){const t=e.flat(),n=t.filter((a,r)=>t.indexOf(a)!==r);if(n.length>0){const a=n.map(r=>r.name).join(", ");throw new Error(`There are module duplicates in "${_f}" token: ${a}`)}return t}_getInputExpression(e,t,n){let a;const r=t.value;return a=this._featureValues.DisableDoNotUseBindingPipeForConstant?e?`"context['${e}']${n}"`:`"${r}${n}"`:e?t.pipes||"string"==typeof r?`"context['${e}']${n}"`:`'${r}'`:`"${r}${n}"`,a}_createInputDefinitions(e,t){const n=[];for(const[a,r]of Object.entries(e.inputs)){em("input",a);const u=r.propertyKey;u&&(t[u]=r.value);let p="";for(const w of r.pipes||[]){p+=` | ${w.name}`;for(const O of w.arguments||[])t[O.propertyKey]=O.value,p+=`:context['${O.propertyKey}']`}const S=`[${a}]=${this._getInputExpression(u,r,p)}`;n.push(S)}return n}_createAttributeDefinitions(e,t){const n=[];for(const[a,r]of Object.entries(e.attributes))em("attribute",a),r.value?n.push(`${a}="${r.value}"`):n.push(`${a}`);return n}_createOutputDefinitions(e,t){const n=[];Object.entries(e.outputs).length>0&&n.push('crtOutputBinding #ref="crtOutputBinding"');for(const[r,u]of Object.entries(e.outputs)){em("output",r);const p=u.propertyKey;t[p]=u.fn,n.push(`(${r})="context['${p}'](ref, $event)"`)}return n}_createDirectiveDefinitions(e,t){const n=[],a=[];for(const r of e.directives){const u=r.useAsterisk?`*${r.selector}`:`[${r.selector}]`,p=[];for(const w of r.values){const O=w.propertyKey;let $=`context['${O}']`;for(const te of w.pipes||[]){$+=` | ${te.name}`;for(const Fe of te.arguments||[])t[Fe.propertyKey]=Fe.value,$+=`:context['${Fe.propertyKey}']`}(0,h.isObservable)(w.value)?t[O]=w.value.pipe((0,W.BV)(this._ngZone)):t[O]=w.value,p.push($)}const{variableName:f}=r;let S="";r.additionalInputs?.length>0&&(r.useAsterisk?S=this._getAdditionalStructuredDirectiveInputs(r.additionalInputs):a.push(r.additionalInputs.map(w=>`[${w.propertyKey}]='${w.value}'`).join(";"))),r.rawValue&&p.push(r.rawValue),n.push(`${u}="${p.map(w=>`(${w})`).join(" && ")}${f?";let "+f:""+S}"`)}return{directives:n,directiveInputs:a}}_getAdditionalStructuredDirectiveInputs(e){return`; ${e.map(n=>`${n.propertyKey}: '${n.value}'`).join("; ")};`}_createContentDefinitions(e,t){const n=[],a=e.content;for(const r of a){const{componentContext:u,componentTemplate:p}=this.createTemplateAndContext(r);n.push(p),Object.assign(t,u)}return n}_isHostModule(e){return"host"===c.bootstrappedCrtModules.get(e)?.source}createTemplateAndContext(e){em("selector",e.selector);const t={},n=this._createInputDefinitions(e,t),a=this._createAttributeDefinitions(e,t),r=this._createOutputDefinitions(e,t),{directives:u,directiveInputs:p}=this._createDirectiveDefinitions(e,t),f=this._createContentDefinitions(e,t),S=`${u.join(" ")} ${p.join(" ")}`;return{componentTemplate:this._componentTemplateFactory.create(e.renderStrategy).create({parts:e,inputs:n,outputs:r,content:f,attributes:a,directivesContent:S}),componentContext:t}}create(e,t,n){const a=this._injector,u=a.get(_.m9D).map(S=>({provide:_.m9D,useValue:S,multi:!0})),p=(n??[]).filter(S=>this._isHostModule(S));return{componentType:(0,i.Component)({selector:e,template:t,host:{class:"flex-full-height fullscreen-class"},styles:[`\n\t\t\t\t:host > .stretch {\n\t\t\t\t\tflex-grow: 1;\n\t\t\t\t}\n\t\t\t\t.${bf} {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\t\t\t`],changeDetection:i.ChangeDetectionStrategy.OnPush,imports:[tm,...this._modules,...p],standalone:!0,providers:[...u,{provide:Fg,useValue:{active$:new h.BehaviorSubject(!0)}}]})(class{constructor(){this._bindingActivator=(0,i.inject)(Fg),this.ownChangeDetectorRef=(0,i.inject)(i.ChangeDetectorRef),this.injector=a,this.refs={}}activate(){this.ownChangeDetectorRef.reattach(),this._bindingActivator.active$.next(!0)}deactivate(){this.ownChangeDetectorRef.detach(),this._bindingActivator.active$.next(!1)}updateViewElementInput(S,w,O){this.context={...this.context,[S+":"+w]:O},this.refs[S]?.changeDetectorRef?.detectChanges(),this.refs[S]?.changeDetectorRef?.markForCheck()}})}}static{this.\u0275fac=function(t){return new(t||lc)(i.\u0275\u0275inject(_f),i.\u0275\u0275inject(i.Injector),i.\u0275\u0275inject(i.NgZone),i.\u0275\u0275inject(Hu))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:lc,factory:lc.\u0275fac,providedIn:"root"})}}class $u{constructor(e){this._schemaChangeListenerService=e,this._componentInfoCache=new Map,this._destroyed$=new h.Subject,this._schemaChangeListenerService.schemaChanged$.pipe((0,_e.Q)(this._destroyed$)).subscribe(t=>{t.schemaType===_.L8V.ClientUnitSchema&&this._componentInfoCache.delete(t.name)})}get(e){return this._componentInfoCache.get(e)}set(e,t){this._componentInfoCache.set(e,t)}has(e){return this._componentInfoCache.has(e)}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}static{this.\u0275fac=function(t){return new(t||$u)(i.\u0275\u0275inject(_.l2Q))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:$u,factory:$u.\u0275fac,providedIn:"root"})}}class qu{constructor(){this.viewAttached$=new h.BehaviorSubject(!0)}static{this.\u0275fac=function(t){return new(t||qu)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:qu,factory:qu.\u0275fac})}}class Wu{constructor(){this._componentRefCache=new Map,this._viewConfigCache=new Map,this._instanceCache=new Map,this._featureValues=(0,i.inject)(_.G2Y),this._enforceDetectChangesOnDestroyingViewFeatureState=this._featureValues.ShellEnforceDetectChangesOnDestroyingView}invalidateInstance(e){const t=[],n=Array.from(this._componentRefCache.keys());for(const[a,r]of this._instanceCache.entries())r.delete(e),this._enforceDetectChangesOnDestroyingViewFeatureState&&a.instance.ownChangeDetectorRef.detectChanges(),!r.size&&n.indexOf(a)<n.length-1&&t.push(a);t.forEach(a=>{this._componentRefCache.delete(a),this._viewConfigCache.delete(a),this._instanceCache.delete(a),a.destroy()})}saveView(e,t,n){const a=this._componentRefCache.get(e)||new Set;a.add(t),this._componentRefCache.set(e,a),this._viewConfigCache.set(e,n)}saveInstance(e,t){const n=this._instanceCache.get(e)||new Set;n.add(t),this._instanceCache.set(e,n)}getInstances(e){return this._instanceCache.get(e)}getView(e){for(const[t,n]of this._componentRefCache.entries())if(n.has(e))return t}getViewConfig(e){return this._viewConfigCache.get(e)}ngOnDestroy(){for(const e of this._componentRefCache.keys())e.destroy();this._componentRefCache.clear(),this._viewConfigCache.clear(),this._instanceCache.clear()}static{this.\u0275fac=function(t){return new(t||Wu)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Wu,factory:Wu.\u0275fac})}}class Zb{constructor(e,t){this.injector=e,this.componentPartsFactory=t,this._specialPropertiesList=[{property:"type",createComponentPart:()=>{}},{property:"layoutConfig",createComponentPart:dt.createLayoutConfigComponentParts.bind(this)}],this._loadingAttributeName="loading",this._visibleAttributeName="visible",this.initDependencies()}_createViewElementConfigProviderComponentParts(e,t){t.directives.push({selector:"crtViewElementConfig",values:[{value:e,pipes:[],propertyKey:dt.getContextPropertyName("viewElementConfig",t)}]})}_createDataItemMarkerComponentParts(e,t){t.attributes["data-item-marker"]={value:e.dataItemMarker||t.id}}_validateRenderStrategyConfig(e){const{renderStrategy:t,placeholderSize:n}=e;t===c.ViewElementRenderStrategy.OnViewport&&!n&&console.warn("The property placeholderSize must be specified for the OnViewport strategy to work correctly")}createLoadingComponentParts(e,t){Object.keys(e).some(a=>a===this._loadingAttributeName)?this._createInputComponentParts(this._loadingAttributeName,e[this._loadingAttributeName],e,t):this._createDefaultLoadingPropertyBinding(e,t)}_createDefaultLoadingPropertyBinding(e,t){const n=(0,cf.A)(e).entries().filter(([r,u])=>this.isInputBinding(r,u,e)&&Xe(u)).value();let a=(0,h.of)(!1);if(n.length){const r=n.map(([u,p])=>wb(p));a=this._createLoadingPropertyValueFromContextEvent(r)}t.inputs[this._loadingAttributeName]={propertyKey:dt.getContextPropertyName(this._loadingAttributeName,t),pipes:[{name:"crtAsync",arguments:[]}],value:a}}_createLoadingPropertyValueFromContextEvent(e){const t=this.injector.get(i.NgZone);return ec(this._bindingContext).viewModel$.pipe((0,z.n)(n=>{if(!n)return(0,h.of)(!1);let a=[];const r=n.events$.pipe((0,se.p)(p=>p.type===ft.StartLoadModelAttributes),(0,E.T)(p=>p),(0,se.p)(p=>{const f=Object.keys(p.payload);return e.some(S=>f.includes(S))}),(0,P.M)(p=>{a=Object.keys(p.payload)}),(0,E.T)(()=>!0)),u=n.events$.pipe((0,se.p)(p=>p.type===ft.FinishLoadModelAttributes),(0,E.T)(p=>p),(0,se.p)(p=>{const f=Object.keys(p.payload);return a.every(S=>f.includes(S))}),(0,E.T)(()=>!1),(0,P.M)(()=>a=[]));return(0,h.merge)(r,u).pipe((0,W.BV)(t))}))}_createContentPropertyComponentParts(e,t,n,a,r){const u=this.getViewElementSlotDefinition(n,e);for(const p of t){const f=this.componentPartsFactory.create(this.injector,p);let S=f.create(p,a,r);u.lazy&&(S=this.createLazyContentComponentParts(S)),this.featureValues.UseSchemaOutletReuseViewStrategy&&this.isAngularHost&&!this.featureValues.DisableComponentPartsCreatorAddContentProperty?f.addContentProperty(e,S,n):this.addContentProperty(e,S,n),a.content.push(S)}u.input&&this._createInputComponentParts(e,t,n,a)}_isConstant(e){const t=typeof e;return"string"===t&&!Xe(e)||"number"===t||"boolean"===t||"bigint"===t}_getBindingPipeConfig(e,t,n){return[{name:"crtBinding",arguments:[{value:e,propertyKey:dt.getContextPropertyName(e+"|propertyName",n)},{value:t,propertyKey:dt.getContextPropertyName(e+"|viewElementConfig",n)}]}]}_createInputComponentParts(e,t,n,a){a.inputs[e]={propertyKey:dt.getContextPropertyName(e,a),value:t},(this.featureValues.DisableDoNotUseBindingPipeForConstant||!this._isConstant(t))&&(a.inputs[e].pipes=this._getBindingPipeConfig(e,n,a))}_createControlInputComponentParts(e,t,n,a){const r={selector:"crtIf",variableName:"control",useAsterisk:!0,values:[{value:t,propertyKey:dt.getContextPropertyName(e,a),pipes:[{name:"crtBinding",arguments:[{value:e,propertyKey:dt.getContextPropertyName(e+"|propertyName",a)},{value:n,propertyKey:dt.getContextPropertyName(e+"|viewElementConfig",a)}]}]}],additionalInputs:[]};dt.addCrtIfDirectiveAdditionalInputs(r,n),a.directives.push(r),a.inputs[e]={value:"control"}}_createInputWithValidationComponentParts(e,t,n,a){const u=this.injector.get(fr).evaluate(t,this._bindingContext).pipe((0,ie.u)()),p=u.pipe((0,Hb.E)("value"),(0,Ca.F)());a.inputs[e]={propertyKey:dt.getContextPropertyName(e,a),value:p,pipes:[{name:"crtAsync",arguments:[]}]};const f=Ab(e),S=u.pipe((0,Hb.E)("validationInfo"),(0,Ca.F)());a.inputs[f]={propertyKey:dt.getContextPropertyName(f,a),value:S,pipes:[{name:"crtAsync",arguments:[]}]}}_createOutputComponentParts(e,t,n){n.outputs[e]={propertyKey:dt.getContextPropertyName(e,n),fn:(a,r)=>{a.processOutputEvent(t,r)}}}_createTwoWayBindingComponentParts(e,t,n,a){Yp(n.type,e)?this._createInputWithValidationComponentParts(e,t,n,a):this._createInputComponentParts(e,t,n,a);const r=t.slice(1),u=Bu(e),p={action:"changeAttributeValue",attributePath:r};this._createOutputComponentParts(u,p,a);const f={action:"markControlAsTouched",attributePath:r};this._createOutputComponentParts("focusout",f,a)}_createSpecialPropertyComponentParts(e,t,n){return this._specialPropertiesList.find(r=>r.property===e)?.createComponentPart(e,t,n)}initDependencies(){this.bindingExpressionInterpreter=this.injector.get(hs),this._bindingContext=this.injector.get(dr),this.featureValues=this.injector.get(_.G2Y),this.isAngularHost=this.injector.get(_.xZL)}createLazyContentComponentParts(e){throw Error("View element type does not support lazy content projection.")}isSpecialPropertyBinding(e,t){return!!this._specialPropertiesList.find(n=>n.property===e)}isContentPropertyBinding(e,t,n){return!!this.getViewElementSlotDefinition(n,e)}getViewElementSlotDefinition(e,t){const a=c.ViewElementRegistry.viewElements.get(e.type)?.contentSlots?.find(r=>("string"==typeof r?r:r.name)===t);return"string"==typeof a?{name:a,input:!1,lazy:!1}:a}isInputBinding(e,t,n){return ku(n.type,e)}isControlBinding(e,t,n){return c.ViewElementRegistry.getFormControlRelatesAttribute(n.type)===e}isInputWithValidationBinding(e,t,n){return this.isInputBinding(e,t,n)&&_n(t)&&Yp(n.type,e)}isOutputBinding(e,t,n){return ju(n.type,e)}isTwoWayBinding(e,t,n){const a=Bu(e);return!(!ku(n.type,e)||!ju(n.type,a)||a in n||!Xe(t))&&(!!_n(t)||(console.warn(`Cannot use two way binding for '${e}' property of '${n.name}' view element. Expression '${t}' should not have converters, properties etc.`),!1))}_processViewElementConfigProperty(e,t,n,a,r){if(this.isContentPropertyBinding(e,t,n)&&Array.isArray(t))this._createContentPropertyComponentParts(e,t,n,a,r);else if(this.isSpecialPropertyBinding(e,t))this._createSpecialPropertyComponentParts(e,t,a);else if(this.isTwoWayBinding(e,t,n))this._createTwoWayBindingComponentParts(e,t,n,a);else if(this.isOutputBinding(e,t,n)){const p={action:"processRequest",requests:Array.isArray(t)?t:[t]};this._createOutputComponentParts(e,p,a)}else this.isInputWithValidationBinding(e,t,n)?this._createInputWithValidationComponentParts(e,t,n,a):this.isControlBinding(e,t,n)?this._createControlInputComponentParts(e,t,n,a):this.isInputBinding(e,t,n)&&this._createInputComponentParts(e,t,n,a)}addIsAttachedConditionInCrtIf(e){const t={propertyKey:dt.getContextPropertyName("isViewAttached",e),value:this.injector.get(qu).viewAttached$.asObservable(),pipes:[{name:"crtAsync"}]},n=e.directives.find(({selector:a})=>"crtIf"===a);n?n.values.push(t):e.directives.push({selector:"crtIf",useAsterisk:!0,values:[t]})}create(e,t,n){const a=new oc(t),r=this.getViewElementInfo(e);a.selector=r.selector,a.name=e.name??(0,$b.A)(),a.id=e.id||a.name,a.type=e.type,a.renderStrategy=r.renderStrategy,a.placeholderSize=e.placeholderSize||r.placeholderSize,this._validateRenderStrategyConfig(a);const u=dt.getViewElementEntries(e);for(const[f,S]of u)f!==this._visibleAttributeName&&this._processViewElementConfigProperty(f,S,e,a,n);this.createLoadingComponentParts(e,a),n?.useDataItemMarker&&this._createDataItemMarkerComponentParts(e,a),this._createViewElementConfigProviderComponentParts(e,a);const p=u.find(([f])=>f===this._visibleAttributeName);return p?.[0]?dt.createVisibleComponentPartsWrapper(this._visibleAttributeName,p[1],a,e):a}}class Sf extends Zb{_getComponentMirror(e){return(0,i.reflectComponentType)(e)}_getSelector(e){const t=this._resolver.getViewElementTypeByRegistryItem(e);return this._getComponentMirror(t).selector}addContentProperty(e,t,n){c.ViewElementRegistry.viewElements.get(n.type)?.contentSlots?.length>1&&(t.attributes[e]={value:""}),t.slot=e,t.attributes["#"+e]={value:""}}initDependencies(){super.initDependencies(),this._resolver=this.injector.get(wn)}createLazyContentComponentParts(e){const t=new oc;t.selector="ng-template",t.content.push(e);const n=e.directives.find(a=>"crtIf"===a.selector);return n&&t.directives.push({selector:"crtIf",values:n.values,useAsterisk:!0}),t}createControl(e){return new ce.MJ(e)}getViewElementInfo(e){const t=this._resolver.getViewElementRegistryItem(e.type);return{selector:this._getSelector(t),placeholderSize:"placeholderSize"in t?t.placeholderSize:null,renderStrategy:t.renderStrategy||c.ViewElementRenderStrategy.Default}}}class nm{}class J0{constructor(e){this._injector=e}create(e,t,n){const a=new oc(t);return a.selector="crt-view-element-placeholder",a.name=e.name??(0,$b.A)(),a.inputs.caption={value:e.type,propertyKey:dt.getContextPropertyName("caption",a),pipes:[]},"layoutConfig"in e&&dt.createLayoutConfigComponentParts("layoutConfig",e.layoutConfig,a),"visible"in e?dt.createVisibleComponentPartsWrapper("visible",e.visible,a,e):a}addContentProperty(e,t,n){}}class Y0 extends Zb{addContentProperty(e,t,n){this._resolver.getViewElementRegistryItem(n.type)?.contentSlots?.length>1&&(t.attributes[e]={value:""}),t.slot=e,t.attributes["#"+e]={value:""}}initDependencies(){super.initDependencies(),this._resolver=this.injector.get(wn)}getViewElementInfo(e){const t=this._resolver.getSelector(e.type),n=this._resolver.getViewElementRegistryItem(e.type);let a;return a=this.featureValues["Runtime.WebComponent.DisableOnViewportStrategy"]?c.ViewElementRenderStrategy.Default:n.renderStrategy??c.ViewElementRenderStrategy.Default,{selector:t,placeholderSize:"placeholderSize"in n?n.placeholderSize:null,renderStrategy:a}}createControl(e){return new Qs(e)}createLoadingComponentParts(e,t){this._resolver.getViewElementRegistryItem(e.type).inputs?.loading&&super.createLoadingComponentParts(e,t)}create(e,t,n){const a=super.create(e,t,n);return this.addIsAttachedConditionInCrtIf(a),a}}class Do extends nm{getAngularComponentPartsCreator(e,t){return new Sf(t,this)}create(e,t){const n=e.get(wn);if(!t.type)throw new Error('"Type" property of view config can not be empty');return n.canResolve(t.type)?n.getSelector(t.type)?new Y0(e,this):this.getAngularComponentPartsCreator(t,e):(console.warn(`View element with type "${t.type}" not found`),new J0(e))}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(Do)))(n||Do)}})()}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Do,factory:Do.\u0275fac})}}class K0 extends Sf{addContentProperty(e,t,n){super.addContentProperty(e,t,n),this.featureValues.UseSchemaOutletReuseViewStrategy&&this.isAngularHost&&(this.featureValues.DisableComponentPartsRerenderCache||(t.content[0].content[0].attributes["#"+e]={value:""}))}create(e,t,n){const a=super.create(e,t,n);if(this.featureValues.UseSchemaOutletReuseViewStrategy&&this.isAngularHost){if(!this.featureValues.DisableComponentPartsRerenderCache){const r=new oc(t);r.selector="ng-template",r.attributes.crtNgFor={value:""},r.attributes["let-instanceId"]={value:""},r.inputs.ngForOf={value:`context['${Xp}']`};const u=new oc(r);return r.content=[u],u.selector="ng-container",u.directives.push({selector:"crtAttachIf",values:[],useAsterisk:!0,rawValue:`context['${zu}'] === instanceId`}),u.content=[a],r}this.addIsAttachedConditionInCrtIf(a)}return a}}class cc extends Do{getAngularComponentPartsCreator(e,t){return c.ViewElementRegistry.viewElements.get(e.type)?.reuseStrategy===c.ViewElementReuseStrategy.Rerender?new K0(t,this):new Sf(t,this)}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(cc)))(n||cc)}})()}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:cc,factory:cc.\u0275fac})}}class im{static forRoot(e){return{ngModule:im,providers:[{provide:_f,useValue:e}]}}static{this.\u0275fac=function(t){return new(t||im)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:im})}static{this.\u0275inj=i.\u0275\u0275defineInjector({providers:[{provide:nm,useClass:cc},Io,To],imports:[R.CommonModule]})}}class am extends R.AsyncPipe{static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(am)))(n||am)}})()}static{this.\u0275pipe=i.\u0275\u0275definePipe({name:"crtAsync",type:am,pure:!1})}}class vf{constructor(e,t,n,a,r){this._injector=e,this._changeDetector=t,this._bindingExpressionInterpreter=n,this._attributeFormControlExpressionInterpreter=a,this._ngZone=r,this._cache=this._injector.get($0,null),this._bindingActivator=this._injector.get(Fg,null),this._preservedContentBindingActivator=this._injector.get(Tb,null),this._subscribeToActivator()}_subscribeToActivator(){this._bindingActivator&&(this._bindingActivatorSubscription=(0,h.combineLatest)([this._bindingActivator.active$,this._preservedContentBindingActivator?.active$??(0,h.of)(!0)]).pipe((0,E.T)(([e,t])=>e&&t),(0,Ca.F)(),(0,h.tap)(e=>{e&&this._stream$&&!this._subscription&&(this._subscription=this._stream$.subscribe()),e||(this._subscription?.unsubscribe(),this._subscription=null)})).subscribe())}_isControlProperty(e,t){return e===c.ViewElementRegistry.getFormControlRelatesAttribute(t.type)}_getInterpreter(e){return e?this._attributeFormControlExpressionInterpreter:this._bindingExpressionInterpreter}_restoreValueFromCache(e,t,n){if(this._cache&&t.name){const a=this._cache.get(e)?.get(t.name)?.get(n);typeof a<"u"&&(this._result=a)}}_canApplyValueFromCache(e,t,n){return!!(t.name&&this._cache&&typeof this._cache.get(e)?.get(t.name)?.get(n)<"u")}_saveToCache(e,t,n){if(this._cache&&this._viewModelRef?.deref()&&e.name){const a=this._cache.get(this._viewModelRef.deref())||new Map,r=a.get(e.name)||new Map;this._cache.set(this._viewModelRef.deref(),a),a.set(e.name,r),r.set(t,n)}}transform(e,t,n){if(e!==this._oldValue){this._subscription?.unsubscribe(),this._oldValue=e,this._result=null,this._stream$=null;const a=this._isControlProperty(t,n);if(Xe(e)){this._bindingContext=this._injector.get(dr);const r=this._bindingContext.viewModel$.pipe((0,h.tap)(f=>{const S=this._canApplyValueFromCache(f,n,t),w=(this._viewModelRef?.deref()||null)!==f,$=c.ViewElementRegistry.getViewElementInputs(n.type)[t];(!S&&w&&this._result instanceof sn||$?.reuseStrategy?.resetValue)&&(this._result=null),this._viewModelRef=f?new WeakRef(f):null,this._restoreValueFromCache(f,n,t)})),p=this._getInterpreter(a).evaluate(e,this._bindingContext).pipe((0,W.BV)(this._ngZone),(0,h.tap)(f=>{this._result!==f&&(this._result=f,this._saveToCache(n,t,f),this._changeDetector.markForCheck())}));this._stream$=(0,h.merge)(r,p),this._subscription=this._stream$.subscribe()}else this._result=a?new ce.MJ(e):e}return this._result}ngOnDestroy(){this._subscription?.unsubscribe(),this._bindingActivatorSubscription?.unsubscribe()}static{this.\u0275fac=function(t){return new(t||vf)(i.\u0275\u0275directiveInject(i.Injector,16),i.\u0275\u0275directiveInject(i.ChangeDetectorRef,16),i.\u0275\u0275directiveInject(hs,16),i.\u0275\u0275directiveInject(pr,16),i.\u0275\u0275directiveInject(i.NgZone,16))}}static{this.\u0275pipe=i.\u0275\u0275definePipe({name:"crtBinding",type:vf,pure:!1})}}var sm;!function(o){o.HIDE="hide",o.DESTROY="destroy"}(sm||(sm={}));class If{constructor(e,t,n){this._view=e,this._template=t,this._featureValues=n,this._context={$implicit:null},this.visibilityStrategyMode=sm.DESTROY}_changeVisibilityByDestroyStrategy(){this.crtIf?this._ref||(this._ref=this._view.createEmbeddedView(this._template,this._context)):(this._view.clear(),this._ref=null)}_canUseHideStrategy(){return this.visibilityStrategyMode===sm.HIDE&&this._featureValues.UseHideVisibilityStrategy}_changeVisibilityByHideStrategy(){if(this.crtIf)return this._ref?void this._getRootNode().classList.remove(bf):void(this._ref=this._view.createEmbeddedView(this._template,this._context));this._ref&&this._getRootNode().classList.add(bf)}_getRootNode(){return this._ref.rootNodes[0]}ngOnChanges(e){this._context.$implicit=this.crtIf,this._canUseHideStrategy()?this._changeVisibilityByHideStrategy():this._changeVisibilityByDestroyStrategy()}ngOnDestroy(){this._ref?.destroy()}static{this.\u0275fac=function(t){return new(t||If)(i.\u0275\u0275directiveInject(i.ViewContainerRef),i.\u0275\u0275directiveInject(i.TemplateRef),i.\u0275\u0275directiveInject(_.G2Y))}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:If,selectors:[["","crtIf",""]],inputs:{crtIf:"crtIf",visibilityStrategyMode:[i.\u0275\u0275InputFlags.None,"crtIfVisibilityStrategyMode","visibilityStrategyMode"]},features:[i.\u0275\u0275NgOnChangesFeature]})}}class Tf{constructor(e){this._injector=e,this._requestBindingConfigInterpreter=this._injector.get(gr),this._crtNavigationLock=this._injector.get(_.ViS)}_sendRequest(e,t){var n=this;return(0,A.A)(function*(){const r={...yield(0,h.lastValueFrom)(n._requestBindingConfigInterpreter.evaluate(e,{...n._bindingContext,initialEvent:t})),$initialEvent:t};return r.$context?.executeRequest(r)??null})()}_sendRequests(e,t){var n=this;return this._crtNavigationLock.wait((0,A.A)(function*(){let a=null,r=!1;for(const u of t)if(!r||!0!==u.skipOnError)try{a=yield n._sendRequest(u,e)}catch{r=!0}return a}))}processOutputEvent(e,t){if(this._bindingContext=this._injector.get(dr),"processRequest"===e.action)this._sendRequests(t,e.requests);else if("changeAttributeValue"===e.action){const a=t instanceof CustomEvent?t.detail:t;Rb(e.attributePath,a,this._bindingContext)}else"markControlAsTouched"===e.action&&Pb(e.attributePath,this._bindingContext)}static{this.\u0275fac=function(t){return new(t||Tf)(i.\u0275\u0275directiveInject(i.Injector))}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:Tf,selectors:[["","crtOutputBinding",""]],exportAs:["crtOutputBinding"],features:[i.\u0275\u0275ProvidersFeature([gr])]})}}class rm{static{this.\u0275fac=function(t){return new(t||rm)}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:rm,selectors:[["","crtViewElementConfig",""]],inputs:{crtViewElementConfig:"crtViewElementConfig"},features:[i.\u0275\u0275ProvidersFeature([{provide:vo,useFactory:e=>(0,Z.A)(e.crtViewElementConfig),deps:[[rm,new i.Self]]}])]})}}class om{constructor(e,t,n,a,r,u,p){this.injector=e,this._featureService=t,this.containerRef=n,this._componentCreator=a,this._componentPartsFactory=r,this._componentStorage=u,this._measurePerformanceService=p,this._featureValues=(0,i.inject)(_.G2Y),this._changeDetectorRef=(0,i.inject)(i.ChangeDetectorRef),this.autoLoadLazyModules=!0}_getContentProperties(e){return c.ViewElementRegistry.viewElements.get(e.type)?.contentSlots?.map(t=>"string"==typeof t?t:t.name)||[]}_getInputProperties(e){const t=c.ViewElementRegistry.viewElements.get(e.type),n=t?.inputs||{};return t.contentSlots&&t.contentSlots.forEach(a=>{"object"==typeof a&&a.input&&(n[a.name]={})}),n}_getOutputProperties(e){return c.ViewElementRegistry.viewElements.get(e.type)?.outputs||{}}_getOutputPropertiesValues(e){const t=this._getOutputProperties(e);return(0,le.A)(e,Object.keys(t))}_isViewConfigsDifferent(e,t){return e.name!==t.name||e.type!==t.type||this._isOutputPropertiesChanged(e,t)||this._isInputOrContentPropertiesLengthChanged(e,t)}_isInputOrContentPropertiesLengthChanged(e,t){const n=[...Object.keys(this._getInputProperties(e)),...Object.keys(this._getContentProperties(e))],a=[...Object.keys(this._getInputProperties(t)),...Object.keys(this._getContentProperties(t))];return!(0,j.A)(new Set(n),new Set(a))}_isOutputPropertiesChanged(e,t){const n=this._getOutputPropertiesValues(e),a=this._getOutputPropertiesValues(t);return!(0,j.A)(n,a)}_getComponentParts(e){const t=new oc;t.selector="ng-container";for(const n of(0,Z.A)(this.viewConfig)){const r=this._componentPartsFactory.create(this.injector,n).create(n,null,{useDataItemMarker:e});t.content.push(r)}return t}createComponent(e,t){let n;const a=this._measurePerformanceService.measure("ViewGenerator.getComponentParts",()=>this._getComponentParts(e)),{componentContext:r,componentTemplate:u}=this._measurePerformanceService.measure("ViewGenerator.createTemplateAndContext",()=>this._componentCreator.createTemplateAndContext(a));!t&&this.selector&&this._componentStorage.has(this.selector)?n=this._componentStorage.get(this.selector):(n=this._measurePerformanceService.measure(`ViewGenerator.createComponent.${this.selector}`,()=>this._componentCreator.create(this.selector,u,this.modules)),!t&&this.selector&&this._componentStorage.set(this.selector,n));const p=this.containerRef.createComponent(n.componentType,{index:0,injector:this.injector,environmentInjector:this.injector.get(i.EnvironmentInjector)});return p.instance.context=r,p}canUpdateView(e,t){if(this._featureValues.DisableUpdateWithoutSchemaReload||e.length!==t.length||!this.componentInstance)return!1;for(let n=0;n<e.length;n++){const a=e[n],r=t[n];if(this._isViewConfigsDifferent(a,r))return!1;const u=this._getContentProperties(a);for(const p of u)if(!this.canUpdateView(a[p]||[],r[p]||[]))return!1}return!0}_updateViewElementInputs(e,t){for(let n=0;n<e.length;n++){const a=t[n],r=e[n];for(const p of Object.keys(this._getInputProperties(a)))(0,j.A)(a[p],r[p])||this.componentInstance.updateViewElementInput(a.name,p,a[p]);const u=this._getContentProperties(a);for(const p of u)this._updateViewElementInputs(r[p]||[],a[p]||[])}}updateView(e,t){this._measurePerformanceService.measure("ViewGenerator.updateView",()=>{this._updateViewElementInputs(e,t),this.componentInstance.changeDetectorRef.detectChanges()})}resetPreviousView(){this.containerRef.clear()}createView(){const e=this.createComponent(this._featureValues.UseViewElementDataItemMarker,this._featureValues.DisableComponentCacheFeature);return e.instance.changeDetectorRef=e.changeDetectorRef,this.componentInstance=e.instance,e}_loadLazyModules(e){var t=this;return(0,A.A)(function*(){const n=yield Promise.all(Array.from(e,r=>r.loadAndBootstrap())),a=(0,c.getDeepModuleDependencies)(n);t.modules=a})()}_getLazyModuleRefs(){const e=function i0(o){return ub(...o).viewElements}(this.viewConfig),t=new Set;return e.forEach(n=>{const a=c.ViewElementRegistry.viewElements.get(n);a?.lazy&&t.add(a.lazyModuleRef)}),t}_processView(e,t){this.canUpdateView(e,t)?this.updateView(e,t):(this.resetPreviousView(),this.createView())}ngOnChanges(e){const t=e.viewConfig?.currentValue||[],n=e.viewConfig?.previousValue||[];if(t&&!(0,j.A)(n,t)){if(this.autoLoadLazyModules){const a=this._getLazyModuleRefs();if(a.size>0)return void this._loadLazyModules(a).then(()=>{this._processView(n,t),this._changeDetectorRef.markForCheck()})}this._processView(n,t)}}static{this.\u0275fac=function(t){return new(t||om)(i.\u0275\u0275directiveInject(i.Injector),i.\u0275\u0275directiveInject(Gt),i.\u0275\u0275directiveInject(i.ViewContainerRef),i.\u0275\u0275directiveInject(lc),i.\u0275\u0275directiveInject(nm),i.\u0275\u0275directiveInject($u),i.\u0275\u0275directiveInject(_.gcc))}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:om,selectors:[["","crtViewGenerator",""]],inputs:{viewConfig:"viewConfig",selector:"selector",modules:"modules",autoLoadLazyModules:"autoLoadLazyModules"},features:[i.\u0275\u0275ProvidersFeature([...Zp,{provide:nm,useClass:Do}]),i.\u0275\u0275NgOnChangesFeature]})}}class Zu extends om{constructor(){super(...arguments),this._cacheService=(0,i.inject)(Wu),this._viewModel$=new h.ReplaySubject(1),this._bindingContext={viewModel$:this._viewModel$.asObservable()}}resetPreviousView(){if(this.componentInstance?.deactivate(),this._componentRef){const e=this.containerRef.indexOf(this._componentRef.hostView);this.containerRef.detach(e)}}createView(){return this._viewModel$.next(this.viewModel),super.createView()}_restoreView(e){this.resetPreviousView(),this._componentRef=e,this.componentInstance=this._componentRef.instance,this._viewModel$.next(this.viewModel),this.componentInstance.activate(),this.containerRef.insert(e.hostView,0)}_createOrUpdateViewWithoutCaching(e){if("instanceId"in e)return this.resetPreviousView(),this._componentRef=this.createView(),this._componentRef.instance.context[zu]=this.instanceId,void(this._componentRef.instance.context[Xp]=[this.instanceId]);const t=this.viewConfig||[],n=e.viewConfig?.previousValue||[];"viewConfigId"in e&&(this.canUpdateView(n,t)?this.updateView(n,t):(this.resetPreviousView(),this._componentRef.destroy(),this._componentRef=this.createView(),this._componentRef.instance.context[zu]=this.instanceId,this._componentRef.instance.context[Xp]=[this.instanceId]))}_createOrUpdateView(e){const t=this.viewConfig||[],n=e.viewConfig?.previousValue||[];if("instanceId"in e||"viewConfigId"in e){const a=this._cacheService.getView(this.viewConfigId),u=this._cacheService.getViewConfig(a)||n;this.canUpdateView(u,t)?(a&&this._restoreView(a),this._componentRef.instance.context[zu]=this.instanceId,this.updateView(u,t)):(this.resetPreviousView(),this._componentRef=this.createView(),this._cacheService.invalidateInstance(this.instanceId),this._componentRef.instance.context[zu]=this.instanceId),this._cacheService.saveView(this._componentRef,this.viewConfigId,this.viewConfig),this._cacheService.saveInstance(this._componentRef,this.instanceId),this._componentRef.instance.context[Xp]=this._cacheService.getInstances(this._componentRef)}}_resetPreviousViewWithoutCaching(e){const t="skipCache"in e?e.skipCache.previousValue:this.skipCache;"instanceId"in e&&t&&(this.resetPreviousView(),this._componentRef.destroy(),this._componentRef=null)}ngOnChanges(e){this._resetPreviousViewWithoutCaching(e),this.skipCache?this._createOrUpdateViewWithoutCaching(e):this._createOrUpdateView(e)}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(Zu)))(n||Zu)}})()}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:Zu,selectors:[["","crtReusableViewGenerator",""]],inputs:{instanceId:"instanceId",viewModel:"viewModel",viewConfigId:"viewConfigId",skipCache:"skipCache"},features:[i.\u0275\u0275ProvidersFeature([{provide:dr,useFactory:e=>e._bindingContext,deps:[(0,i.forwardRef)(()=>Zu)]},...Zp]),i.\u0275\u0275InheritDefinitionFeature,i.\u0275\u0275NgOnChangesFeature]})}}class lm extends R.NgForOf{static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(lm)))(n||lm)}})()}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:lm,selectors:[["","crtNgFor",""]],features:[i.\u0275\u0275InheritDefinitionFeature]})}}class Df{constructor(e,t){this._containerRef=e,this._template=t,this._subscription=new h.Subscription,this._crtAttachIf$=new h.Subject,this._bindingActivator=(0,i.inject)(Tb,{optional:!0})??new S0,this._subscription=(0,h.combineLatest)([this._bindingActivator.active$,this._crtAttachIf$]).subscribe(([n,a])=>this._changeVisibilityByAttachDetachStrategy(n,a))}_changeVisibilityByAttachDetachStrategy(e,t){if(t){if(e){if(!this._viewRef)return void(this._viewRef=this._containerRef.createEmbeddedView(this._template));this._containerRef.insert(this._viewRef)}}else{const n=this._containerRef.indexOf(this._viewRef);n>=0&&this._containerRef.detach(n)}}ngOnChanges(e){this._crtAttachIf$.next(this.crtAttachIf)}ngOnDestroy(){this._subscription.unsubscribe(),this._viewRef?.destroy()}static{this.\u0275fac=function(t){return new(t||Df)(i.\u0275\u0275directiveInject(i.ViewContainerRef),i.\u0275\u0275directiveInject(i.TemplateRef))}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:Df,selectors:[["","crtAttachIf",""]],inputs:{crtAttachIf:"crtAttachIf"},features:[i.\u0275\u0275NgOnChangesFeature]})}}var Mf=b(31243);const Q0=["tsTable"],X0=["detailTableWrapper"];class cm{constructor(){this.tableEventHandlers={},this.dataChange=new i.EventEmitter,this.tableDataSource=this.createTableDataSource()}set data(e){e=e||[],this.tableDataSource.data=e,this.onDataSourceSet(e)}get data(){return this.tableDataSource.data}get readonly(){return this._readonly}set readonly(e){this._readonly!==e&&(this._readonly=e,this.onReadonlySet(e))}createTableDataSource(){return new Mf.Nf}applyDataBinding(){const e=this.tableDataSource.data;this.tableDataSource.data=e}addRowSilent(e){this.data.push(e)}addRow(e){this.addRows(e)}addRows(...e){e.forEach(t=>this.addRowSilent(t)),this.applyDataBinding()}deleteRowSilent(e){const t=this.data,n=t.findIndex(a=>a===e);-1!==n&&t.splice(n,1)}deleteRow(e){this.deleteRows(e)}deleteRows(...e){e.forEach(t=>this.deleteRowSilent(t)),this.applyDataBinding()}onDataSourceSet(e){}checkTableIsNotEmpty(){if(!this.table)throw new Error("Table detail should contain an instance of `TableComponent`.")}onReadonlySet(e){}processRowsBeforeAdd(...e){return e}processRowsBeforeDelete(...e){return e}ngOnInit(){this.readonly=!1}fireChangeEvent(){this.dataChange.emit(this.data)}isEmpty(){return this.checkTableIsNotEmpty(),this.table.isEmpty()}onAddRow(e){this.onAddRows(e)}onAddRows(...e){if(this.readonly)return;const t=this.processRowsBeforeAdd(...e);this.addRows(...t),t?.length>0&&this.fireChangeEvent()}onDeleteRow(e){this.onDeleteRows(e)}onDeleteRows(...e){if(this.readonly)return;const t=this.processRowsBeforeDelete(...e);this.deleteRows(...t),t?.length>0&&this.fireChangeEvent()}onDeleteSelected(){this.checkTableIsNotEmpty(),this.onDeleteRows(...this.table.selected)}isDeleteSelectedButtonVisible(){return!this.readonly&&(this.checkTableIsNotEmpty(),this.table.isAnyRecordSelected())}static{this.\u0275fac=function(t){return new(t||cm)}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:cm,viewQuery:function(t,n){if(1&t&&(i.\u0275\u0275viewQuery(Q0,7),i.\u0275\u0275viewQuery(X0,7)),2&t){let a;i.\u0275\u0275queryRefresh(a=i.\u0275\u0275loadQuery())&&(n.table=a.first),i.\u0275\u0275queryRefresh(a=i.\u0275\u0275loadQuery())&&(n.detailTableWrapper=a.first)}},inputs:{data:"data",isLoading:"isLoading",readonly:"readonly"},outputs:{dataChange:"dataChange"}})}}var wf=b(22029);class um extends cm{set sort(e){this._sort!==e&&(this._sort=e,this.tableDataSource&&e&&(this.tableDataSource.sort=e))}isEmpty(){const e=this.tableDataSource;return!this.isLoading&&(0===e.data.length||0===e.filteredData.length)}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(um)))(n||um)}})()}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:um,viewQuery:function(t,n){if(1&t&&i.\u0275\u0275viewQuery(wf.B4,5),2&t){let a;i.\u0275\u0275queryRefresh(a=i.\u0275\u0275loadQuery())&&(n.sort=a.first)}},features:[i.\u0275\u0275InheritDefinitionFeature]})}}var dm=b(90590);const ev=new i.InjectionToken("Component selector in the shadow root of which overlay container will be injected"),tv=new i.InjectionToken("Selector of an element in the component into which the overlay container will be injected");class pm extends dm.Sf{constructor(e,t,n="",a=""){super(e,t),this._platform=t,this._componentSelector=n,this._containerSelector=a}_getContainerRootElement(){const e=this._document.querySelector(this._componentSelector),t=e&&e.shadowRoot;return t&&t.querySelector(this._containerSelector)||this._document.body}getContainerElement(){const e=super.getContainerElement(),t=this._getContainerRootElement();return t.querySelector("."+e.className)||t.appendChild(e),e}static{this.\u0275fac=function(t){return new(t||pm)(i.\u0275\u0275inject(R.DOCUMENT),i.\u0275\u0275inject(zn.OD),i.\u0275\u0275inject(ev),i.\u0275\u0275inject(tv))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:pm,factory:pm.\u0275fac})}}const Jb=new i.InjectionToken("Represents a set of configuration properties for getting resources");class nv{constructor(e,t,n){this._getResourcesEventName=e,this._setResourcesEventName=t,this._defaultResources=n}get defaultResources(){return this._defaultResources}get getResourcesEventName(){return c.ValidationUtilities.checkStringIsNotEmpty("getResourcesEventName",this._getResourcesEventName)}get setResourcesEventName(){return c.ValidationUtilities.checkStringIsNotEmpty("setResourcesEventName",this._setResourcesEventName)}}class Mo{constructor(e,t){this._customEventService=e,this._destroyed$=new h.Subject,this._defaultResources=this._getSafeResources(t.defaultResources),this._setResourcesEventName=t.setResourcesEventName,this._getResourcesEventName=t.getResourcesEventName}_getSafeResources(e){return(e=e||{}).localizableStrings=e.localizableStrings||{},e}getResources(){const e=new h.ReplaySubject;return this._customEventService.subscribe(this._setResourcesEventName).pipe((0,Ne.s)(1),(0,E.T)(t=>this._getSafeResources(t)),(0,E.T)(t=>(0,Xl.A)(this._defaultResources,t)),(0,_e.Q)(this._destroyed$)).subscribe(t=>{e.next(t),e.complete()}),this._customEventService.createOutboundChannel(this._getResourcesEventName).next({}),e}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}static{this.\u0275fac=function(t){return new(t||Mo)(i.\u0275\u0275inject(W.Dj),i.\u0275\u0275inject(Jb))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Mo,factory:Mo.\u0275fac})}}class uc{constructor(){this._eventEmitter=new i.EventEmitter(!1)}emit(e){this._eventEmitter.emit(e)}subscribe(e){return this._eventEmitter.subscribe(e)}static{this.\u0275fac=function(t){return new(t||uc)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:uc,factory:uc.\u0275fac})}}class dc extends _.xsE{processErrorMessage(e){this._dialogService.openInfoDialog(e)}constructor(e){super(),this._dialogService=e}static{this.\u0275fac=function(t){return new(t||dc)(i.\u0275\u0275inject(re.o3))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:dc,factory:dc.\u0275fac})}}_.xsE;class Ju extends _.DXo{constructor(e,t,n){super(),this._snackBar=t,this._maskService=n,this._errorHandler=new dc(e)}_handleRequestSuccess(e,t){return e.pipe((0,P.M)(n=>{const{success:a}=n||{};(a||void 0===a)&&t()}))}_handleRequestsSuccess(e,t){let n=0;return e.map(r=>this._handleRequestSuccess(r,()=>{n++,n===e.length&&this.showSuccessMessage(t)}))}_handleRequestsFinished(e,t){const n=e.slice(),r=u=>{const p=n.indexOf(u);-1!==p&&(n.splice(p,1),0===n.length&&t())};return e.map(u=>u.pipe((0,P.M)(()=>r(u)),(0,_a.j)(()=>r(u))))}showSuccessMessage(e){this._snackBar.open(e,"",{duration:5e3})}handleError(e,t){return this._errorHandler.handleRequest(e,t)}handleSuccess(e,t){return this._handleRequestSuccess(e,()=>this.showSuccessMessage(t))}applyMask(e,t){this._maskService.showBodyMask({delay:t.maskDelay});let n=!1;return e.pipe((0,P.M)(()=>{this._maskService.hideBodyMask(),n=!0}),(0,_a.j)(()=>{n||this._maskService.hideBodyMask()}))}handleRequest(e,t={}){let n=this.handleError(e,t);return t.skipBodyMask||(n=this.applyMask(n,t)),t.successMessage&&(n=this.handleSuccess(n,t.successMessage)),n}handleRequests(e,t={}){let n=e.map(a=>this.handleError(a,t));return t.successMessage&&(n=this._handleRequestsSuccess(n,t.successMessage)),t.skipBodyMask||(this._maskService.showBodyMask({delay:t.maskDelay}),n=this._handleRequestsFinished(n,()=>this._maskService.hideBodyMask())),n}static{this.\u0275fac=function(t){return new(t||Ju)(i.\u0275\u0275inject(re.o3),i.\u0275\u0275inject(M.nf),i.\u0275\u0275inject(re.sz))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Ju,factory:Ju.\u0275fac})}}_.DXo;class Yu{constructor(e){this._window=e,this._defaultBlinkInterval=500,this._defaultBlinkPrefix="*"}_getBlinkConfig(e){const t=this._window.document,n=e?.title||t.title;return{title:n,blinkTitle:e?.blinkTitle||`${this._defaultBlinkPrefix}${n}`,blinkInterval:e?.blinkInterval||this._defaultBlinkInterval,blinkOnce:!0===(e||{}).blinkOnce}}_createSyncSubject(){const e=new h.Subject;return(0,h.fromEvent)(this._window,"mousemove").pipe((0,rt.$)(),(0,E.T)(t=>null)).subscribe(e),e}blink(e){return(0,h.of)(null)}static{this.\u0275fac=function(t){return new(t||Yu)(i.\u0275\u0275inject(W.ZP))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Yu,factory:Yu.\u0275fac,providedIn:"root"})}}class mm{constructor(e,t){this._sysSettingsService=e,this._title=t,this._defaultProductName="Creatio",this._productNameSysSettingsCode="ProductName",this._setTitleWithDebounce$=new h.Subject,this._setTitleWithDebounce$.pipe((0,h.debounceTime)(500)).subscribe(n=>{this.setTitle(n)})}_getProductName(){var e=this;return(0,A.A)(function*(){const t=yield e._sysSettingsService.getByCode(e._productNameSysSettingsCode);return t?t.value:e._defaultProductName})()}setTitleAsync(e=""){var t=this;return(0,A.A)(function*(){const n=yield t._getProductName(),a=e?[e,n].join(" - "):n;t._title.setTitle(a)})()}setTitle(e=""){this.setTitleAsync(e).then()}setTitleWithDebounce(e=""){this._setTitleWithDebounce$.next(e)}static{this.\u0275fac=function(t){return new(t||mm)(i.\u0275\u0275inject(c.SysSettingsService),i.\u0275\u0275inject(x.Title))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:mm,factory:mm.\u0275fac,providedIn:"root"})}}class iv{}class hm{constructor(e,t){this._translateService=e,this._passwordValidationRuleProvider=t,this._validationRules=[],this._initValidationRules()}_initValidationRules(){this._passwordValidationRuleProvider.getPasswordValidationRules().pipe((0,h.take)(1)).subscribe(e=>{this._validationRules=e})}validate(e){return this._validationRules.map(t=>({valid:t.pattern.test(e),caption:this._translateService.instant(t.message,t.interpolateParams)}))}getDefaultValidationRules(){return this._validationRules.map(e=>({valid:null,caption:this._translateService.instant(e.message,e.interpolateParams)}))}static{this.\u0275fac=function(t){return new(t||hm)(i.\u0275\u0275inject(v.c$),i.\u0275\u0275inject(iv))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:hm,factory:hm.\u0275fac,providedIn:"root"})}}const av=new i.InjectionToken("GtmModuleName");class Ku{set model(e){this._model!==e&&(this._model=e,this.onModelSet(e))}get model(){return this._model}constructor(e){this.injector=e,this._destroyedSubject=new h.Subject,this.destroyed$=this._destroyedSubject.asObservable(),this.hasLoadingError=!1,this.isLoading=!0,this.injectDependencies(),this._model=this.createEmptyModel()}injectDependencies(){this.dialogService=this.injector.get(re.o3),this.googleTagManagerService=this.injector.get(L),this.window=this.injector.get(W.ZP),this.gtmModuleName=this.injector.get(av,""),this._translateService=this.injector.get(v.c$),this.scrollToBottomObserverFactory=this.injector.get(_.Stw),this._restHandler=this.injector.get(_.DXo,null)}createEmptyModel(){return{}}onModelSet(e){}onPageLoadErrorDialogClosed(e){this.close()}onPageDataLoadError(e){this.dialogService.openInfoDialog(e.message).subscribe(t=>{this.onPageLoadErrorDialogClosed(t)})}applyPageLoadUnsuccessfulResponse(e){this.sendGtmAction(this.getPageOpenErrorGtmData()),this.model=this.createEmptyModel(),this.hideBodyMask(),this.hasLoadingError=!0,e&&e.errorInfo&&this.onPageDataLoadError(e.errorInfo)}applyPageLoadSuccessfulResponse(e){this.hasLoadingError=!1;const t=this.getModelFromLoadResponse(e);this.model=this.preProcessLoadedPageModel(t),this.sendGtmAction(this.getPageOpenGtmData())}applyPageLoadResponse(e){e&&e.success?this.applyPageLoadSuccessfulResponse(e):this.applyPageLoadUnsuccessfulResponse(e)}beforeInitialPageDataLoading(){}beforePageDataReloading(){}beforePageDataLoading(){}afterInitialPageDataLoaded(){}afterPageDataReloaded(){}afterPageDataLoaded(){}executePageDataLoading(e){return this.beforePageDataLoading(),this.showBodyMask(),e().pipe((0,Ne.s)(1),(0,P.M)(n=>{this.hideBodyMask(),n=this.preProcessPageLoadingResponse(n),this.applyPageLoadResponse(n),this.afterPageDataLoaded()}),(0,ie.u)(),(0,_e.Q)(this.destroyed$))}loadInitialPageData(){this.beforeInitialPageDataLoading();const e=this.executePageDataLoading(()=>this.requestInitialPageData());return e.subscribe(()=>this.afterInitialPageDataLoaded()),e}preProcessPageLoadingResponse(e){return e}preProcessLoadedPageModel(e){return e}requestInitialPageData(){return this.requestPageData()}requestPageDataOnReload(){return this.requestPageData()}getDefaultGtmData(){return{moduleName:this.gtmModuleName,schemaName:this.getGtmSchemaName()}}getPageOpenGtmData(){return{action:"PageOpen"}}getPageOpenErrorGtmData(){return{action:"PageOpenError"}}sendGtmAction(e){const t=this.getDefaultGtmData();e&&t&&t.moduleName&&t.schemaName&&this.googleTagManagerService.track((0,Xl.A)(t,e))}hideBodyMask(){this.isLoading=!1}showBodyMask(){this.isLoading=!0}translateInstant(e,t){return void 0===t?this._translateService.instant(e):this._translateService.instant(e,t)}translateAsync(e,t){return void 0===t?this._translateService.get(e):this._translateService.get(e,t)}handleRequest(e,t){return this._restHandler.handleRequest(e,t)}reloadPageData(){this.beforePageDataReloading();const e=this.executePageDataLoading(()=>this.requestPageDataOnReload());return e.subscribe(()=>this.afterPageDataReloaded()),e}openDialog(e,t){return(t=t||{}).data=t.data||{},t.data.gtmData=(0,Xl.A)(t.data.gtmData,this.getDefaultGtmData()),this.dialogService.open(e,t)}openInfoDialog(e){return this.dialogService.openInfoDialog(e).pipe((0,_e.Q)(this.destroyed$))}openConfirmationDialog(e,t,n){const a=this.dialogService.openConfirmationDialog(e).pipe((0,_e.Q)(this.destroyed$),(0,ie.u)());return t&&a.pipe((0,se.p)(r=>r===re.ch.result)).subscribe(t),n&&a.pipe((0,se.p)(r=>r===re.ut.result)).subscribe(n),a}ngOnInit(){this.loadInitialPageData()}ngOnDestroy(){this._destroyedSubject.next(),this._destroyedSubject.complete()}closeButtonVisible(){return!0}static{this.\u0275fac=function(t){return new(t||Ku)(i.\u0275\u0275directiveInject(i.Injector))}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:Ku})}}class Ef extends Ku{get isChanged(){return this._isChanged}set isChanged(e){this.setIsChanged(e)}preProcessLoadedPageModel(e){return this.modelSnap=this.cloneModel(super.preProcessLoadedPageModel(e)),e}loadModelFromSnap(){this.model=this.cloneModel(this.modelSnap)}injectDependencies(){super.injectDependencies(),this.location=this.injector.get(R.Location)}preProcessModelForSave(e){return e}createChangeBroadcastService(){return this.injector.get(uc)}getDefaultSaveGtmData(){return{}}getSaveSuccessGtmData(){return(0,Xl.A)(this.getDefaultSaveGtmData(),{action:"Save"})}getSaveErrorGtmData(){return(0,Xl.A)(this.getDefaultSaveGtmData(),{action:"SaveError"})}preProcessSaveResponse(e){return e}canShowUnsuccessfulSaveMessage(){return!0}applySaveUnsuccessfulResponse(e,t){this.sendGtmAction(this.getSaveErrorGtmData()),this.hideBodyMask(),this.canShowUnsuccessfulSaveMessage()&&t&&t.errorInfo&&this.openInfoDialog(t.errorInfo.message)}applySaveSuccessfulResponse(e,t){this.sendGtmAction(this.getSaveSuccessGtmData()),this.modelSnap=this.cloneModel(e),this.isChanged=!1,this.changeBroadcastService&&this.changeBroadcastService.emit(this.model)}cloneModel(e){return(0,Z.A)(e)}applySaveResponse(e,t){t&&t.success?this.applySaveSuccessfulResponse(e,t):this.applySaveUnsuccessfulResponse(e,t)}executeSave(){const e=this.preProcessModelForSave(this.model),t=this.savePageData(e).pipe((0,ie.u)());return t.subscribe(n=>{n=this.preProcessSaveResponse(n),this.applySaveResponse(e,n)}),t}closeAfterSave(){this.goBackToSection()}recordSaved(e){e&&e.success&&this.closePageAfterSave&&this.closeAfterSave()}goBackToSection(){this.location.back()}isModelValid(){return!!this.model}constructor(e){super(e),this.closePageAfterSave=!0,this._isChanged=!1,this.changeBroadcastService=this.createChangeBroadcastService()}setIsChanged(e=!0){this._isChanged=e}cancel(){this.loadModelFromSnap(),this.isChanged=!1}saveAsync(){this.showBodyMask();const e=this.executeSave().pipe((0,ie.u)());return e.subscribe(t=>{this.hideBodyMask(),this.recordSaved(t)}),e}save(){const e=this.saveAsync();return e.subscribe(),e}saveButtonVisible(){return this.isChanged&&!this.hasLoadingError}saveButtonEnabled(){return this.isModelValid()}cancelButtonVisible(){return this.saveButtonVisible()}closeButtonVisible(){return super.closeButtonVisible()&&!this.saveButtonVisible()}close(){1!==this.window.history.length?this.goBackToSection():this.window.close()}static{this.\u0275fac=function(t){return new(t||Ef)(i.\u0275\u0275directiveInject(i.Injector))}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:Ef,features:[i.\u0275\u0275InheritDefinitionFeature]})}}class xf extends Mf.Nf{constructor(e=[]){super(e),this._visibleContentSize=0,this._pageSize=40,this.resetVisibleContentSize()}resetVisibleContentSize(){this._visibleContentSize=this._pageSize}loadNext(){this._visibleContentSize+=this._pageSize,this._updateChangeSubscription()}_pageData(e){return this._visibleContentSize>=e.length?e:e.slice(0,this._visibleContentSize)}}const sv=["tsTable"];class gm extends Ku{constructor(){super(...arguments),this._selected$=new h.Subject,this.searchKeyValue="",this.searchSettingsValue={...this.getDefaultSearchSettings()},this.selected$=this._selected$.asObservable()}get tableDataSource(){return this._tableDataSource}set searchKey(e){this.searchKeyValue=e,this.onSearchKeySet(e)}get searchKey(){return this.searchKeyValue}set searchSettings(e){this.searchSettingsValue=e,this.onSearchSettingsSet(e)}get searchSettings(){return this.searchSettingsValue}set sort(e){this._sort!==e&&(this._sort=e,this.tableDataSource&&e&&(this.tableDataSource.sort=e))}get sort(){return this._sort}set dataSchema(e){this.checkTableIsNotEmpty(),this.table.dataSchema=e}get dataSchema(){return this.checkTableIsNotEmpty(),this.table.dataSchema}set selected(e){this.checkTableIsNotEmpty(),this.table.selected=e,this._selected$.next(e)}get selected(){return this.checkTableIsNotEmpty(),this.table.selected}set selectMode(e){this.checkTableIsNotEmpty(),this.table.selectMode=e}get selectMode(){return this.checkTableIsNotEmpty(),this.table.selectMode}_getSearchSettingsColumnSelectors(){const e=this.getSearchSettingsColumnDescriptors(),t=this.searchSettings.columns;return e&&t?e.filter(a=>t.includes(a.name)).map(a=>a.selector??a.name):[]}getDefaultSearchSettings(){return{searchStrategy:_.yaY.Contains,columns:[]}}getSearchSettingsColumnDescriptors(){return[]}createEmptyModel(){return[]}onModelSet(e){e=e||[],super.onModelSet(e),this.tableDataSource&&(this.tableDataSource.data=e),this.resetVisibleContent()}injectDependencies(){super.injectDependencies(),this.userProfileService=this.injector.get(Nr)}beforePageDataLoading(){this.tableDataSource.resetVisibleContentSize(),super.beforePageDataLoading()}createEqualityPredicate(){return(e,t)=>e===t}createSearchPredicate(){const e=this.getStaticSearchColumns();return(0,_.joR)(e.concat(this._getSearchSettingsColumnSelectors()),this.searchSettings.searchStrategy)}createChangeBroadcastService(){return this.injector.get(uc)}updateRecord(e,t){Object.assign(e,t)}applySearchSettings(){const e=this.createSearchPredicate();e&&this.tableDataSource&&(this.tableDataSource.filterPredicate=e)}initSelectedChange(){this.checkTableIsNotEmpty(),this.table.selectedChange.subscribe(e=>{this._selected$.next(e),this.onSelectedChanged(e)})}initTableComponent(){this.dataSchema=this.getDefaultDataSchema(),this.selectMode=this.getDefaultSelectMode(),this.initSelectedChange()}initTableDataSource(){this.setTableDataSource(new xf(this.model)),this.applySearchSettings()}onSelectedChanged(e){}onRecordChanged(e,t){e&&this.updateRecord(e,t)}initChangeBroadcastSubscription(){const e=this.createEqualityPredicate();e&&(this.changeBroadcastService=this.createChangeBroadcastService(),this.changeBroadcastService.subscribe(t=>{const n=this.model.find(a=>e(a,t));this.onRecordChanged(n,t)}))}loadNextData(){this.tableDataSource&&this.tableDataSource.loadNext()}getProfileData(){const e={searchKey:this.searchKey};return(0,j.A)(this.searchSettings,this.getDefaultSearchSettings())||(e.searchSettings={searchStrategy:this.searchSettings.searchStrategy}),e}applyProfileData(e){e.searchSettings&&(this.searchSettingsValue.searchStrategy=e.searchSettings.searchStrategy,this.applySearchSettings()),e.searchKey&&(this.searchKeyValue=e.searchKey,this.applySearchKey())}loadUserProfileData(){const e=this.userProfileService.getProfile(this.getProfileDataKey()).pipe((0,ie.u)());return e.subscribe(t=>{t&&this.applyProfileData(t)}),e}saveUserProfileData(){const e=this.getProfileData(),t=this.userProfileService.saveProfile(this.getProfileDataKey(),e).pipe((0,ie.u)());return t.subscribe(),t}resetVisibleContent(){!this.scrollPageToBottomObserver||!this.tableDataSource||(this.scrollPageToBottomObserver.resetScrollMaxPosition(),this.tableDataSource.resetVisibleContentSize())}applySearchKey(){this.tableDataSource.filter=this.searchKey&&this.searchKey.trim().toLowerCase()}onSearchKeySet(e){this.applySearchKey(),this.onSearchConditionsChanged()}onSearchSettingsSet(e){this.applySearchSettings(),this.applySearchKey(),this.onSearchConditionsChanged()}onSearchConditionsChanged(){this.resetVisibleContent(),this.saveUserProfileData()}initScrollToBottomObserver(){this.scrollPageToBottomObserver=this.scrollToBottomObserverFactory.createObserver(this.window,this.loadNextData.bind(this))}setTableDataSource(e){this.checkTableIsNotEmpty(),this.table.dataSource=e,this._tableDataSource=e}checkTableIsNotEmpty(){if(!this.table)throw new Error("Section page should contain an instance of `TableComponent`.")}ngOnInit(){this.initTableComponent(),this.initTableDataSource(),this.initChangeBroadcastSubscription(),this.loadUserProfileData().subscribe(()=>{super.ngOnInit()})}ngAfterViewInit(){this.initScrollToBottomObserver()}ngOnDestroy(){super.ngOnDestroy(),this.scrollPageToBottomObserver&&this.scrollPageToBottomObserver.destroy()}isEmpty(){return this.checkTableIsNotEmpty(),!this.isLoading&&this.table.isEmpty()}areFiltersEmpty(){return!this.searchKey}close(){const e=this.window.location.href;this.window.history.back(),setTimeout(()=>{this.window.location.href===e&&this.window.close()},200)}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(gm)))(n||gm)}})()}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:gm,viewQuery:function(t,n){if(1&t&&(i.\u0275\u0275viewQuery(wf.B4,5),i.\u0275\u0275viewQuery(sv,7)),2&t){let a;i.\u0275\u0275queryRefresh(a=i.\u0275\u0275loadQuery())&&(n.sort=a.first),i.\u0275\u0275queryRefresh(a=i.\u0275\u0275loadQuery())&&(n.table=a.first)}},features:[i.\u0275\u0275InheritDefinitionFeature]})}}var rv=b(35025),yr=b.n(rv);class ov{}class Af{constructor(){this._value=new ov,this.valueChange=new i.EventEmitter}get startDate(){return this._startDate}set startDate(e){e.isSame(this._startDate)||(this._value.startDate=e.toDate(),this._startDate=e)}get endDate(){return this._endDate}set endDate(e){e.isSame(this._endDate)||(this._value.endDate=e.toDate(),this._endDate=e)}set value(e){const t={startDate:(0,_.ol1)(e.startDate),endDate:(0,_.D08)(e.endDate)};this._value=t,this._startDate=yr()(t.startDate),this._endDate=yr()(t.endDate)}get value(){return this._value}onValueChanged(){this.value.endDate=(0,_.D08)(this.value.endDate),this.valueChange.emit(this.value)}static{this.\u0275fac=function(t){return new(t||Af)}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:Af,selectors:[["ts-date-range"]],inputs:{startDateRequired:"startDateRequired",endDateRequired:"endDateRequired",maxDate:"maxDate",value:"value"},outputs:{valueChange:"valueChange"},decls:15,vars:14,consts:[["startDatePicker",""],["endDatePicker",""],["floatLabel","never",1,"date-picker"],["matInput","",3,"ngModelChange","dateChange","max","matDatepicker","ngModel","disabled"],["matSuffix","",3,"for"],["svgIcon","start-date","matDatepickerToggleIcon","",1,"date-picker-icon"],["disabled","false"],[1,"period-separator"],["matInput","",3,"ngModelChange","dateChange","min","max","matDatepicker","ngModel","disabled"],["svgIcon","end-date","matDatepickerToggleIcon","",1,"date-picker-icon"]],template:function(t,n){if(1&t){const a=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"mat-form-field",2)(1,"input",3),i.\u0275\u0275twoWayListener("ngModelChange",function(u){return i.\u0275\u0275restoreView(a),i.\u0275\u0275twoWayBindingSet(n.startDate,u)||(n.startDate=u),i.\u0275\u0275resetView(u)}),i.\u0275\u0275listener("dateChange",function(){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.onValueChanged())}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(2,"mat-datepicker-toggle",4),i.\u0275\u0275element(3,"mat-icon",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(4,"mat-datepicker",6,0),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"span",7),i.\u0275\u0275text(7),i.\u0275\u0275pipe(8,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"mat-form-field",2)(10,"input",8),i.\u0275\u0275twoWayListener("ngModelChange",function(u){return i.\u0275\u0275restoreView(a),i.\u0275\u0275twoWayBindingSet(n.endDate,u)||(n.endDate=u),i.\u0275\u0275resetView(u)}),i.\u0275\u0275listener("dateChange",function(){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.onValueChanged())}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(11,"mat-datepicker-toggle",4),i.\u0275\u0275element(12,"mat-icon",9),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(13,"mat-datepicker",6,1),i.\u0275\u0275elementEnd()}if(2&t){const a=i.\u0275\u0275reference(5),r=i.\u0275\u0275reference(14);i.\u0275\u0275advance(),i.\u0275\u0275property("max",n.value.endDate)("matDatepicker",a),i.\u0275\u0275twoWayProperty("ngModel",n.startDate),i.\u0275\u0275property("disabled",n.startDateRequired),i.\u0275\u0275advance(),i.\u0275\u0275property("for",a),i.\u0275\u0275advance(5),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(8,12,"DateRange.To")),i.\u0275\u0275advance(3),i.\u0275\u0275property("min",n.value.startDate)("max",n.maxDate)("matDatepicker",r),i.\u0275\u0275twoWayProperty("ngModel",n.endDate),i.\u0275\u0275property("disabled",n.endDateRequired),i.\u0275\u0275advance(),i.\u0275\u0275property("for",r)}},dependencies:[ce.me,ce.BC,ce.vS,St.Vh,St.bZ,St.bU,St.Wl,ve.Ky,ve.xZ,be.An,Ue.aL,v.D9],styles:["[_nghost-%COMP%]{display:flex}[_nghost-%COMP%]   .period-separator[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px;padding-top:5px}[_nghost-%COMP%]   .date-picker-icon[_ngcontent-%COMP%]{width:20px!important;height:20px;padding-bottom:4px}[_nghost-%COMP%]   .date-picker-icon[_ngcontent-%COMP%]     svg{width:20px;height:20px}[_nghost-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin-bottom:-1em}"]})}}const lv=[[["","header",""]],"*"],cv=["[header]","*"];function uv(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"span",8),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&o){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(t.title)}}class xa{static{this._logoLinkUrl=""}static{this._logoImageUrl=""}get logoLinkUrl(){return xa._logoLinkUrl}get logoImageUrl(){return xa._logoImageUrl}constructor(e,t){this._environment=e,this._runtimeUrlProvider=t}static setLogoLinkUrl(e){xa._logoLinkUrl=e}static setLogoImageUrl(e){xa._logoImageUrl=e}buildLogoImageUrl(){return"img/terrasoft.axd?s=nui-binary-syssetting&r=MenuLogoImage&source_hash="+Date.now().toString().slice(0,-5)}initDefaultLogoImageUrl(){xa.setLogoImageUrl("assets/app-logo.svg")}ngOnInit(){if(!this.logoLinkUrl){const e=this._runtimeUrlProvider.getUrl();xa.setLogoLinkUrl(e)}this.logoImageUrl||xa.setLogoImageUrl(R.Location.joinWithSlash(this._environment.workspaceBaseUrl,this.buildLogoImageUrl()))}static{this.\u0275fac=function(t){return new(t||xa)(i.\u0275\u0275directiveInject("environment"),i.\u0275\u0275directiveInject(_.BGz))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:xa,selectors:[["ts-header"]],inputs:{title:"title"},ngContentSelectors:cv,decls:10,vars:3,consts:[[1,"top-container"],[1,"left-container"],["class","title",4,"ngIf"],[1,"content-wrapper"],[1,"right-container"],[1,"logo-wrapper",3,"href"],["alt","logo image",1,"logo",3,"error","src"],[1,"content-wrapper","bottom-content-wrapper"],[1,"title"]],template:function(t,n){1&t&&(i.\u0275\u0275projectionDef(lv),i.\u0275\u0275elementStart(0,"div",0)(1,"div",1),i.\u0275\u0275template(2,uv,2,1,"span",2),i.\u0275\u0275elementStart(3,"div",3),i.\u0275\u0275projection(4),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(5,"div",4)(6,"a",5)(7,"img",6),i.\u0275\u0275listener("error",function(){return n.initDefaultLogoImageUrl()}),i.\u0275\u0275elementEnd()()()(),i.\u0275\u0275elementStart(8,"div",7),i.\u0275\u0275projection(9,1),i.\u0275\u0275elementEnd()),2&t&&(i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",n.title),i.\u0275\u0275advance(4),i.\u0275\u0275propertyInterpolate("href",n.logoLinkUrl,i.\u0275\u0275sanitizeUrl),i.\u0275\u0275advance(),i.\u0275\u0275propertyInterpolate("src",n.logoImageUrl,i.\u0275\u0275sanitizeUrl))},dependencies:[R.NgIf],styles:["[_nghost-%COMP%]{display:block;padding:12px 22px 12px 21px}.top-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.top-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;overflow:hidden}.top-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:block;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-family:Bpmonline Open Sans Light,serif;font-size:26px;height:26px}.top-container[_ngcontent-%COMP%]   .right-container[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;align-items:center}.top-container[_ngcontent-%COMP%]   .right-container[_ngcontent-%COMP%]   .logo-wrapper[_ngcontent-%COMP%]{display:block}.top-container[_ngcontent-%COMP%]   .right-container[_ngcontent-%COMP%]   .logo-wrapper[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;max-height:28px;max-width:134px}.content-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row}.content-wrapper[_ngcontent-%COMP%]:not(:empty).top-left-content-wrapper:not(:first-child){padding-left:15px}.content-wrapper[_ngcontent-%COMP%]:not(:empty).bottom-content-wrapper{margin:14px 0 0}"]})}}var pc,Qu=b(1608);!function(o){o.All="0",o.Section="1",o.Lookup="2"}(pc||(pc={}));class Rf{constructor(){this.value=pc.All,this.valueChange=new i.EventEmitter}onValueChanged(e){this.value=e.value,this.valueChange.emit(this.value)}static{this.\u0275fac=function(t){return new(t||Rf)}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:Rf,selectors:[["ts-object-type-filter"]],inputs:{value:"value"},outputs:{valueChange:"valueChange"},decls:22,vars:14,consts:[["typeViewFilter",""],[1,"type-filter"],["disableOptionCentering","true",3,"valueChange","selectionChange","value"],[1,"filter-type-caption"],["value","0",1,"type-mat-option"],[1,"filter-type-icon","filter-type-icon-0"],["value","1",1,"type-mat-option"],[1,"filter-type-icon","filter-type-icon-1"],["value","2",1,"type-mat-option"],[1,"filter-type-icon","filter-type-icon-2"]],template:function(t,n){if(1&t){const a=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"mat-form-field",1)(1,"mat-select",2,0),i.\u0275\u0275twoWayListener("valueChange",function(u){return i.\u0275\u0275restoreView(a),i.\u0275\u0275twoWayBindingSet(n.value,u)||(n.value=u),i.\u0275\u0275resetView(u)}),i.\u0275\u0275listener("selectionChange",function(u){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.onValueChanged(u))}),i.\u0275\u0275elementStart(3,"mat-select-trigger"),i.\u0275\u0275element(4,"span"),i.\u0275\u0275elementStart(5,"span",3),i.\u0275\u0275text(6),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(7,"mat-option",4),i.\u0275\u0275element(8,"span",5),i.\u0275\u0275elementStart(9,"span"),i.\u0275\u0275text(10),i.\u0275\u0275pipe(11,"translate"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(12,"mat-option",6),i.\u0275\u0275element(13,"span",7),i.\u0275\u0275elementStart(14,"span"),i.\u0275\u0275text(15),i.\u0275\u0275pipe(16,"translate"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(17,"mat-option",8),i.\u0275\u0275element(18,"span",9),i.\u0275\u0275elementStart(19,"span"),i.\u0275\u0275text(20),i.\u0275\u0275pipe(21,"translate"),i.\u0275\u0275elementEnd()()()()}if(2&t){const a=i.\u0275\u0275reference(2);i.\u0275\u0275advance(),i.\u0275\u0275twoWayProperty("value",n.value),i.\u0275\u0275advance(3),i.\u0275\u0275classMapInterpolate1("filter-type-icon filter-type-icon-",n.value,""),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(a.triggerValue),i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(11,8,"ObjectTypeFilter.AllObjects")),i.\u0275\u0275advance(5),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(16,10,"ObjectTypeFilter.Sections")),i.\u0275\u0275advance(5),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(21,12,"ObjectTypeFilter.Lookups"))}},dependencies:[Qu.d1,ve.Ky,Ei.cu,Ei.ev,v.D9],styles:["[_nghost-%COMP%]{line-height:16px;padding:4px 10px 0 0;min-width:100px}.filter-type-icon[_ngcontent-%COMP%]{width:16px;height:16px;background-repeat:no-repeat;margin-right:6px;display:inline-block}.filter-type-icon.filter-type-icon-0[_ngcontent-%COMP%]{background-image:url(filter_objects.svg)}.filter-type-icon.filter-type-icon-1[_ngcontent-%COMP%]{background-image:url(filter_sections.svg)}.filter-type-icon.filter-type-icon-2[_ngcontent-%COMP%]{background-image:url(filter_lookups.svg)}"]})}}function dv(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"mat-option",14),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&o){const t=e.$implicit;i.\u0275\u0275property("value",t),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate1(" ",t.caption," ")}}class Pf{constructor(e,t){this.entitySchemaService=e,this.data=t,this.isLoading=!1}_prepareEntityColumns(e){e&&e.success?(this.entitySchemaColumns=e.entitySchema.columns,this.entitySchemaColumns.sort((t,n)=>t.caption<n.caption?-1:1),this.data&&this.data.excludeFilter&&(this.entitySchemaColumns=this.entitySchemaColumns.filter(this.data.excludeFilter)),this.isLoading=!1):this.isLoading=!1}ngOnInit(){!this.data||!this.data.entitySchemaUId||(this.isLoading=!0,this.entitySchemaService.getEntitySchemaByUId(this.data.entitySchemaUId).subscribe(this._prepareEntityColumns.bind(this)))}onFilteredEntitySchemaColumnSelected(e){const t=e.option.value;this.selectedColumn=t}getEntitySchemaColumnCaption(e){return e&&e.caption}search(e){e?(e=e.toLowerCase(),this.filteredEntitySchemaColumns=this.entitySchemaColumns.filter(t=>-1!==t.caption.toLowerCase().indexOf(e))):this.filteredEntitySchemaColumns=this.entitySchemaColumns}static{this.\u0275fac=function(t){return new(t||Pf)(i.\u0275\u0275directiveInject(_.eut),i.\u0275\u0275directiveInject(he.xh))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:Pf,selectors:[["ts-select-entity-schema-column-dialog"]],decls:22,vars:17,consts:[["auto","matAutocomplete"],["mat-dialog-title",""],["mat-icon-button","",1,"close-dialog",3,"mat-dialog-close"],["svgIcon","close",1,"close-button-icon"],["mat-dialog-actions",""],["mat-flat-button","","color","accent",3,"mat-dialog-close","disabled"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"],["mat-dialog-content",""],["floatLabel","never",1,"entity-schema-column"],["type","text","matInput","",3,"input","focus","placeholder","matAutocomplete"],["matSuffix","",1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],[3,"optionSelected","displayWith"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,n){if(1&t){const a=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",1)(1,"span"),i.\u0275\u0275text(2),i.\u0275\u0275pipe(3,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"button",2),i.\u0275\u0275element(5,"mat-icon",3),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(6,"div",4)(7,"button",5),i.\u0275\u0275text(8),i.\u0275\u0275pipe(9,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"button",6),i.\u0275\u0275text(11),i.\u0275\u0275pipe(12,"translate"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(13,"div",7)(14,"mat-form-field",8)(15,"input",9),i.\u0275\u0275pipe(16,"translate"),i.\u0275\u0275listener("input",function(u){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.search(u.target.value))})("focus",function(){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.search(""))}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(17,"div",10),i.\u0275\u0275element(18,"div",11),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(19,"mat-autocomplete",12,0),i.\u0275\u0275listener("optionSelected",function(u){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.onFilteredEntitySchemaColumnSelected(u))}),i.\u0275\u0275template(21,dv,2,2,"mat-option",13),i.\u0275\u0275elementEnd()()}if(2&t){const a=i.\u0275\u0275reference(20);i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(3,9,"SelectEntitySchemaColumnDialog.Title")),i.\u0275\u0275advance(5),i.\u0275\u0275property("mat-dialog-close",n.selectedColumn)("disabled",!n.selectedColumn),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(9,11,"SelectEntitySchemaColumnDialog.Select")),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(12,13,"SelectEntitySchemaColumnDialog.Cancel")),i.\u0275\u0275advance(4),i.\u0275\u0275property("placeholder",i.\u0275\u0275pipeBind1(16,15,"SelectEntitySchemaColumnDialog.SelectFieldPlaceholder"))("matAutocomplete",a),i.\u0275\u0275advance(4),i.\u0275\u0275property("displayWith",n.getEntitySchemaColumnCaption),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",n.filteredEntitySchemaColumns)}},dependencies:[R.NgForOf,Xt.G7,Xt.cm,Qu.d1,Ve.iV,he.kQ,he.KI,he.PQ,he.$t,ve.Ky,ve.xZ,be.An,Ue.aL,v.D9],styles:["[_nghost-%COMP%]{padding:4px 10px 0;min-width:420px;min-height:136px}[mat-dialog-actions][_ngcontent-%COMP%]{margin-bottom:23px!important}[mat-dialog-content][_ngcontent-%COMP%]   .field-title[_ngcontent-%COMP%]{font-family:Bpmonline Open Sans,serif;color:#444;font-size:14px;line-height:18px;text-align:left}[mat-dialog-content][_ngcontent-%COMP%]   .entity-schema-column[_ngcontent-%COMP%]{width:100%;line-height:19px;font-size:14px}[mat-dialog-content][_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%;line-height:18px!important}"]})}}class fm{static{this.\u0275fac=function(t){return new(t||fm)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:fm})}static{this.\u0275inj=i.\u0275\u0275defineInjector({providers:[_.B4r],imports:[R.CommonModule,ce.YN,ve.C,Ue.mz]})}}var Nf=b(65468),Of=b(6554),Vf=b(41992);class ym extends re.Fj{set maxValue(e){this._maxValue=e}set selected(e){this._selected=e}get formattedValue(){return this._formattedValue}constructor(e,t,n,a,r,u){super(e,t,n),this._element=a,this._cdRef=r,this._formatUtility=u,this._formattedValue="",this._selected=!1,this._maxValue=999999999.99,this._maxLargeValue=999999999999,this.controlType="ts-number-input",this.isLargeNumberEnabled=!1,this.inputBlur=new i.EventEmitter,this.precision=2}_updateFormattedValue(){this._formattedValue=this._formatUtility.formatNumberValue(this.innerValue,new _.V__({precision:this.precision}))}_exceededMaxValue(e){const t=Math.abs(e),n=t%1;return this.isLargeNumberEnabled&&0===n?t>this._maxLargeValue:t>this._maxValue}ngAfterViewInit(){this._selected&&(this._element.nativeElement.lastElementChild.focus(),this._cdRef.detectChanges())}ngOnInit(){this._updateFormattedValue()}onInputValueChange(){this.callChangeHandler()}onInputFocus(){this.innerValue&&(this._formattedValue=this._formatUtility.formatNumberValue(this.innerValue,new _.V__({ignoreThousandSeparator:!0,precision:this.precision})))}writeValue(e){this.setInnerValueSilent(e),this._updateFormattedValue(),this.stateChanges.next(),this._cdRef.detectChanges()}onBlur(e){this._updateFormattedValue(),e&&(e.currentTarget.value=this._formattedValue),this.inputBlur.emit()}onInput(e){let t=e.currentTarget.value;if(""===t)return this.setInnerValueSilent(0),void(this._formattedValue="");if(t=this._formatUtility.formatStringValue(t),0===this.precision){const a=this._formatUtility.getNumberFormatInfo().decimalSeparator;t=t.replace(new RegExp(`\\${a}$`),"")}e.currentTarget.value=t;let n=this._formatUtility.parseStringToNumber(t,this.precision);"-"===t&&(n=0),(isNaN(n)||this._exceededMaxValue(n))&&(n=this.innerValue,e.currentTarget.value=this._formatUtility.formatNumberValue(n,new _.V__({ignoreThousandSeparator:!0,precision:this.precision}))),this.setInnerValueSilent(n)}static{this.\u0275fac=function(t){return new(t||ym)(i.\u0275\u0275directiveInject(ce.vO,10),i.\u0275\u0275directiveInject(Of.P8),i.\u0275\u0275directiveInject(Vf.FN),i.\u0275\u0275directiveInject(i.ElementRef),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(_.B4r))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:ym,selectors:[["ts-number-input"]],inputs:{isLargeNumberEnabled:"isLargeNumberEnabled",maxValue:"maxValue",selected:"selected",precision:"precision"},outputs:{inputBlur:"inputBlur"},features:[i.\u0275\u0275ProvidersFeature([{provide:Nf.qT,useExisting:ym}]),i.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[["input",""],["matInput","","dir","ltr",3,"change","blur","input","focus","value","disabled","required"]],template:function(t,n){if(1&t){const a=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"input",1,0),i.\u0275\u0275listener("change",function(){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.onInputValueChange())})("blur",function(u){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.onBlur(u))})("input",function(u){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.onInput(u))})("focus",function(){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.onInputFocus())}),i.\u0275\u0275elementEnd()}2&t&&i.\u0275\u0275property("value",n.formattedValue)("disabled",n.disabled)("required",n.required)},dependencies:[Mt.ig,Ue.aL],styles:["input[_ngcontent-%COMP%]{text-align:left;border:0;height:100%;width:100%}input[_ngcontent-%COMP%]:focus{outline-style:none}"],changeDetection:0})}}var Xu=b(95819),pv=b(96810);class Lf{constructor(e){this._overlayRef=e,this.afterClosed$=new h.Subject}_close(e){this._overlayRef.dispose(),this.afterClosed$.next(e),this.afterClosed$.complete()}close(e){this._close(e)}}function mv(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"mat-checkbox",8),i.\u0275\u0275listener("change",function(a){const r=i.\u0275\u0275restoreView(t).$implicit,u=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(u.onColumnSelectedChange(r.name,a))}),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()}if(2&o){const t=e.$implicit,n=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("checked",n.isColumnSelected(t.name)),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(n.getColumnCheckboxCaption(t))}}function hv(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275template(1,mv,2,2,"mat-checkbox",7),i.\u0275\u0275element(2,"mat-divider"),i.\u0275\u0275elementEnd()),2&o){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(),i.\u0275\u0275property("ngForOf",t.columnConfigs)}}function gv(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"mat-radio-button",9),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&o){const t=e.$implicit;i.\u0275\u0275property("value",t.value),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate1(" ",t.caption," ")}}const Yb=new i.InjectionToken("SEARCH_INPUT_SETTINGS_DATA");class _m{constructor(e,t,n){this._settingsOverlayRef=e,this._translateService=t,this.searchStrategyOptions=[{value:_.yaY.StartsWith,caption:this._translateService.instant("SearchInput.Settings.StartsWith")},{value:_.yaY.Contains,caption:this._translateService.instant("SearchInput.Settings.Contains")},{value:_.yaY.Equals,caption:this._translateService.instant("SearchInput.Settings.Equals")}];const a=n?.settings||{};this.settings={searchStrategy:a.searchStrategy??_.yaY.Contains,columns:a.columns?.slice()??[]},this.columnConfigs=n?.columnConfigs??[]}_setColumnSelected(e,t){const n=this.settings.columns;if(t)n.includes(e)||n.push(e);else{const a=n.indexOf(e);-1!==a&&n.splice(a,1)}}close(){this._settingsOverlayRef.close(null)}apply(){this._settingsOverlayRef.close(this.settings)}isColumnSelected(e){return this.settings.columns.includes(e)}onColumnSelectedChange(e,t){this._setColumnSelected(e,t.checked)}getColumnCheckboxCaption(e){const t=e.caption,n=this._translateService.instant("SearchInput.Settings.SearchColumnTemplate");return He.Qf.Format(n,t)}static{this.\u0275fac=function(t){return new(t||_m)(i.\u0275\u0275directiveInject(Lf),i.\u0275\u0275directiveInject(v.c$),i.\u0275\u0275directiveInject(Yb))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:_m,selectors:[["ts-search-input-settings"]],decls:11,vars:9,consts:[[1,"search-input-settings-container"],[4,"ngIf"],[3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"bottom-actions"],["mat-button","",1,"",3,"click"],["mat-flat-button","","color","primary",1,"action-button",3,"click"],[3,"checked","change",4,"ngFor","ngForOf"],[3,"change","checked"],[3,"value"]],template:function(t,n){1&t&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275template(1,hv,3,1,"div",1),i.\u0275\u0275elementStart(2,"mat-radio-group",2),i.\u0275\u0275twoWayListener("ngModelChange",function(r){return i.\u0275\u0275twoWayBindingSet(n.settings.searchStrategy,r)||(n.settings.searchStrategy=r),r}),i.\u0275\u0275template(3,gv,2,2,"mat-radio-button",3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",4)(5,"button",5),i.\u0275\u0275listener("click",function(){return n.close()}),i.\u0275\u0275text(6),i.\u0275\u0275pipe(7,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(8,"button",6),i.\u0275\u0275listener("click",function(){return n.apply()}),i.\u0275\u0275text(9),i.\u0275\u0275pipe(10,"translate"),i.\u0275\u0275elementEnd()()()),2&t&&(i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",n.columnConfigs.length>0),i.\u0275\u0275advance(),i.\u0275\u0275twoWayProperty("ngModel",n.settings.searchStrategy),i.\u0275\u0275advance(),i.\u0275\u0275property("ngForOf",n.searchStrategyOptions),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(7,5,"SearchInput.Settings.Cancel")),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(10,7,"SearchInput.Settings.Apply")))},dependencies:[R.NgForOf,R.NgIf,Xu.Ku,Xu.No,ce.BC,ce.vS,Ve.iV,mt.NZ,ui.q,v.D9],styles:[".search-input-settings-container{background:#fff 0% 0% no-repeat padding-box;box-shadow:0 0 3px #0000001a;border:1px solid #e2e2e2;opacity:1;padding:11px;min-width:220px}.search-input-settings-container mat-checkbox{display:block}.search-input-settings-container mat-checkbox,.search-input-settings-container mat-radio-button{margin-left:4px;margin-right:4px}.search-input-settings-container mat-checkbox:not(:first-child),.search-input-settings-container mat-radio-button:not(:first-child){margin-top:8px}.search-input-settings-container mat-divider{margin:14px 0}.search-input-settings-container .bottom-actions{display:flex;justify-content:flex-end;margin:8px 0 4px}.search-input-settings-container .bottom-actions button:not(:first-child){margin-left:12px}\n"],encapsulation:2})}}const fv={hasBackdrop:!0,backdropClass:"search-settings-backdrop",alignToElementRef:null,data:null};class mc{constructor(e,t){this._injector=e,this._overlay=t}_getOverlayConfig(e){const n=this._overlay.position().flexibleConnectedTo(e.alignToElementRef).withPositions([{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top",offsetY:6}]);return new dm.rR({hasBackdrop:e.hasBackdrop,backdropClass:e.backdropClass,panelClass:e.panelClass,scrollStrategy:this._overlay.scrollStrategies.block(),positionStrategy:n})}_createOverlay(e){const t=this._getOverlayConfig(e);return this._overlay.create(t)}_createInjector(e,t){return i.Injector.create({providers:[{provide:Lf,useValue:t},{provide:Yb,useValue:e.data}]})}_attachContainerPortal(e,t,n){const a=this._createInjector(t,n),r=new pv.A8(_m,null,a);return e.attach(r).instance}openSettingsMenu(e){const t={...fv,...e},n=this._createOverlay(t),a=new Lf(n),r=this._attachContainerPortal(n,t,a);return n.backdropClick().subscribe(u=>{r.close()}),a.afterClosed$}static{this.\u0275fac=function(t){return new(t||mc)(i.\u0275\u0275inject(i.Injector),i.\u0275\u0275inject(dm.hJ))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:mc,factory:mc.\u0275fac})}}class hc{static{this.\u0275fac=function(t){return new(t||hc)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:hc})}static{this.\u0275inj=i.\u0275\u0275defineInjector({providers:[mc],imports:[R.CommonModule,Xu.jP,ce.YN,Ve.wG,mt.Dy,he.eB,ui.w,ve.C,be.m_,Ue.mz,v.h]})}}var yv=b(7557);const _v=["searchSettingsButton"],Cv=["*"];function bv(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",8),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(t);const a=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(a.openSettingsMenu())}),i.\u0275\u0275element(1,"div",9,0),i.\u0275\u0275elementEnd()}}class ed{set value(e){this._value=e,this._emittedValue=e}get value(){return this._value}constructor(e,t){this._translateService=e,this._searchInputSettingsService=t,this._value="",this._valueChangeDebounceTime=500,this._emitValueChangeWithDebounce=(0,yv.A)(n=>this._emitValueChange(n),this._valueChangeDebounceTime),this.showSettings=!1,this.settings={searchStrategy:_.yaY.Contains,columns:[]},this.settingsChange=new i.EventEmitter,this.valueChange=new i.EventEmitter,this.columnConfigs=[]}_emitValueChange(e){this._emittedValue!==e&&(this._emittedValue=e,this.valueChange.emit(e))}_changeSettings(e){e&&!(0,j.A)(e,this.settings)&&(this.settings=e,this.settingsChange.emit(e))}ngOnInit(){this.placeholder||(this.placeholder=this._translateService.instant("SearchInput.Placeholder"))}onValueChanged(e){const t=e.target.value;t!==this._value&&(this._value=t,this._emitValueChangeWithDebounce(t))}onClear(){this._value="",this._emitValueChangeWithDebounce.cancel(),this._emitValueChange("")}openSettingsMenu(){this._searchInputSettingsService.openSettingsMenu({alignToElementRef:this.settingsButton,data:{settings:this.settings,columnConfigs:this.columnConfigs}}).subscribe(e=>this._changeSettings(e))}static{this.\u0275fac=function(t){return new(t||ed)(i.\u0275\u0275directiveInject(v.c$),i.\u0275\u0275directiveInject(mc))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:ed,selectors:[["ts-search-input"]],viewQuery:function(t,n){if(1&t&&i.\u0275\u0275viewQuery(_v,5),2&t){let a;i.\u0275\u0275queryRefresh(a=i.\u0275\u0275loadQuery())&&(n.settingsButton=a.first)}},inputs:{showSettings:"showSettings",value:"value",placeholder:"placeholder",settings:"settings",columnConfigs:"columnConfigs"},outputs:{settingsChange:"settingsChange",valueChange:"valueChange"},ngContentSelectors:Cv,decls:8,vars:5,consts:[["searchSettingsButton",""],["matPrefix","","svgIcon","search",1,"search-icon"],["floatLabel","never",1,"search-container-form-field"],["matInput","","type","text","spellcheck","false","autocomplete","off",1,"search-input-field",3,"input","placeholder","value"],["matSuffix","","mat-icon-button","","aria-label","Clear",1,"close",3,"click"],["svgIcon","close"],["matSuffix","",1,"search-settings-tools"],["mat-icon-button","","matSuffix","","class","search-settings-button",3,"click",4,"ngIf"],["mat-icon-button","","matSuffix","",1,"search-settings-button",3,"click"],[1,"search-settings-button-icon"]],template:function(t,n){1&t&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275element(0,"mat-icon",1),i.\u0275\u0275elementStart(1,"mat-form-field",2)(2,"input",3),i.\u0275\u0275listener("input",function(r){return n.onValueChanged(r)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"button",4),i.\u0275\u0275listener("click",function(){return n.onClear()}),i.\u0275\u0275element(4,"mat-icon",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",6),i.\u0275\u0275projection(6),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(7,bv,3,0,"button",7),i.\u0275\u0275elementEnd()),2&t&&(i.\u0275\u0275advance(2),i.\u0275\u0275property("placeholder",n.placeholder)("value",n.value),i.\u0275\u0275advance(),i.\u0275\u0275styleProp("visibility",n.value?"inherit":"hidden"),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",n.showSettings))},dependencies:[R.NgIf,Ve.iV,ve.Ky,ve.av,ve.xZ,be.An,Ue.aL],styles:["ts-search-input{display:flex}ts-search-input mat-icon[svgicon=search]{width:16px;height:16px;margin-inline-end:6px!important;padding-top:8px!important}ts-search-input .search-container-form-field .mat-form-field-infix,ts-search-input .search-container-form-field .mat-form-field-suffix{display:flex;gap:4px}ts-search-input mat-form-field{flex-grow:1}ts-search-input mat-form-field .mat-form-field-wrapper{margin-bottom:-1em}ts-search-input mat-form-field .mat-form-field-wrapper button.close,ts-search-input mat-form-field .mat-form-field-wrapper .search-settings-button{height:22px!important;width:22px!important;vertical-align:middle!important}ts-search-input mat-form-field .mat-form-field-wrapper button.close mat-icon{display:block;margin:auto}ts-search-input mat-form-field .mat-form-field-wrapper button.close:focus{border:1px solid #c8c8c8}ts-search-input mat-form-field .mat-form-field-wrapper .search-settings-button .search-settings-button-icon{background:url(settings.svg) no-repeat;width:16px;height:16px;margin:auto;display:block}ts-search-input mat-form-field.mat-focused .mat-form-field-label{opacity:0!important}\n"],encapsulation:2})}}class _r{constructor(){this.formulaClick=new i.EventEmitter}set caption(e){this._caption=e}get caption(){return this._caption||this.value}set index(e){this._index=e}get index(){return this._index}set value(e){this._value=e}get value(){return this._value}static{this.\u0275fac=function(t){return new(t||_r)}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:_r,inputs:{caption:"caption",index:"index",value:"value"},outputs:{formulaClick:"formulaClick"}})}}var Aa;!function(o){o[o.Number=0]="Number",o[o.ColumnOperand=1]="ColumnOperand",o[o.Operator=2]="Operator",o[o.Cursor=3]="Cursor",o[o.Function=4]="Function"}(Aa||(Aa={}));class td extends _r{constructor(){super()}validateInput(e){return null}getFormulaItemType(){return Aa.Cursor}static{this.\u0275fac=function(t){return new(t||td)}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:td,selectors:[["ts-formula-cursor-item"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:1,vars:0,consts:[[1,"formula-cursor"]],template:function(t,n){1&t&&i.\u0275\u0275element(0,"div",0)},styles:[".formula-cursor,.formula-cursor-hidden{width:2px;height:21px;border-radius:2px;margin-left:-1px;margin-right:-1px;background-color:#84a3e3}.formula-input:focus .formula-cursor,.formula-input:focus .formula-cursor-hidden{animation:1s blink step-end infinite}.formula-cursor-hidden{background-color:transparent}@keyframes blink{0%{background-color:#84a3e3}50%{background-color:transparent}}\n"],encapsulation:2})}}class nd extends _r{constructor(){super()}getFormulaItemType(){return Aa.Function}validateInput(e){return!1}handleItemClick(e){this.formulaClick.emit(e)}static{this.\u0275fac=function(t){return new(t||nd)}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:nd,selectors:[["ts-formula-function-item"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[[1,"formula-function-item",3,"click"]],template:function(t,n){1&t&&(i.\u0275\u0275elementStart(0,"span",0),i.\u0275\u0275listener("click",function(r){return n.handleItemClick(r)}),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&t&&(i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(n.caption))},styles:[".formula-function-item[_ngcontent-%COMP%]{padding:0 4px;color:#444;font-size:14px;font-family:Bpmonline Open Sans;font-weight:400}"]})}}class id extends _r{constructor(){super()}getFormulaItemType(){return Aa.Number}validateInput(e){return 1===e.length&&null!=e.match("[0-9.,]")}handleItemClick(e){this.formulaClick.emit(e)}static{this.\u0275fac=function(t){return new(t||id)}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:id,selectors:[["ts-formula-numeric-input-item"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[[1,"formula-number-input-item",3,"click"]],template:function(t,n){1&t&&(i.\u0275\u0275elementStart(0,"span",0),i.\u0275\u0275listener("click",function(r){return n.handleItemClick(r)}),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&t&&(i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(n.caption))},styles:[".formula-number-input-item[_ngcontent-%COMP%]{color:#444;font-size:14px;font-family:Bpmonline Open Sans;font-weight:400}"]})}}class ad extends _r{constructor(){super()}getFormulaItemType(){return Aa.ColumnOperand}validateInput(e){return!1}handleItemClick(e){this.formulaClick.emit(e)}static{this.\u0275fac=function(t){return new(t||ad)}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:ad,selectors:[["ts-formula-operand-item"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[["matTooltipPosition","below","matTooltipShowDelay","800",1,"formula-operand-item-wrap",3,"click","matTooltip"],[1,"formula-operand-item"]],template:function(t,n){1&t&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275listener("click",function(r){return n.handleItemClick(r)}),i.\u0275\u0275elementStart(1,"span",1),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()()),2&t&&(i.\u0275\u0275property("matTooltip",n.caption),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(n.caption))},dependencies:[oa.PD],styles:[".formula-operand-item-wrap{border-radius:20px;padding:0 16px;border:1px solid #b1b1b1;display:inline-block;margin:-1px 2px 4px}.formula-operand-item-wrap .formula-operand-item{font-size:14px;font-family:Bpmonline Open Sans;font-weight:400;color:#444;text-overflow:ellipsis;overflow:hidden;max-width:160px;white-space:nowrap;display:inline-block;margin-top:2px}.cdk-overlay-container .mat-tooltip{margin-top:4px;padding:10px;font-size:14px;line-height:19px;color:#444;background:#fff;word-break:break-word;box-shadow:#0000004d 0 0 .2em;border-radius:0;border-top:2px solid #22ac14;white-space:pre-line;text-overflow:clip}\n"],encapsulation:2})}}class sd extends _r{constructor(){super(),this._allowedOperatorsList=["+","-","/","*","(",")"]}_createFormulaOperatorFilterRegExp(e){let t="";return e.forEach(n=>t+=n),`[${t}]`}getFormulaItemType(){return Aa.Operator}validateInput(e){const t=this._createFormulaOperatorFilterRegExp(this._allowedOperatorsList);return null!=e.match(t)}handleItemClick(e){this.formulaClick.emit(e)}static{this.\u0275fac=function(t){return new(t||sd)}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:sd,selectors:[["ts-formula-operator-item"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[[1,"formula-operator-item",3,"click"]],template:function(t,n){1&t&&(i.\u0275\u0275elementStart(0,"span",0),i.\u0275\u0275listener("click",function(r){return n.handleItemClick(r)}),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&t&&(i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(n.caption))},styles:[".formula-operator-item[_ngcontent-%COMP%]{padding:0 4px;color:#444;font-size:14px;font-family:Bpmonline Open Sans;font-weight:400}"]})}}class Ff{static{this.\u0275fac=function(t){return new(t||Ff)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:Ff})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[R.CommonModule,re.sX,oa.T7]})}}class rd{constructor(){this._formulaItems=[ad,td,sd,id,nd]}get FormulaItemInstance(){return this._instances||(this._instances=[],this._formulaItems.forEach(e=>{const t=this._createFormulaItem(e);this._instances.push(t)})),this._instances}_createFormulaItem(e){return new e}getFormulaItemType(e){let t=null;return this.FormulaItemInstance.forEach(n=>{n.validateInput(e)&&(t=n.getFormulaItemType())}),t}createComponent(e,t){const n=this.FormulaItemInstance.find(r=>r.getFormulaItemType()===e);return t.createComponent(n.constructor).instance}static{this.\u0275fac=function(t){return new(t||rd)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:rd,factory:rd.\u0275fac,providedIn:"root"})}}class Kb{constructor(e){Object.assign(this,e)}}var Sv=b(11434);function vv(o,e){}function Iv(o,e){1&o&&i.\u0275\u0275element(0,"div")}class kf{set formulaData(e){e&&!j.A(e,this._formulaData)&&(this._viewClear(),this._formulaData=e,this._generateComponents(),this.focusFormulaInputOnFormulaDataChange&&setTimeout(()=>{this._focusFormulaInput()},0))}get formulaData(){return this._formulaData}constructor(e){this._formulaItemFactory=e,this._formulaData=[],this.focusFormulaInputOnFormulaDataChange=!1,this.itemsChanged=new i.EventEmitter}_viewClear(){const e=this.container&&this.container.viewContainerRef;e&&e.clear()}_insertFormulaItem(e,t){this.formulaData.splice(e,0,t),this._generateComponents(),this.itemsChanged.emit(this.formulaData)}_removeFormulaItem(e){this.formulaData.splice(e,1),this._generateComponents(),this.itemsChanged.emit(this.formulaData)}_addCursor(e=-1){e=-1===e?this._formulaData.length:e,this._insertFormulaItem(e,new Kb({type:Aa.Cursor}))}_removeCursor(){let e=this._getCursorPosition();-1===e&&(e=this._formulaData.length),this._removeFormulaItem(e)}_removeCharBeforeCursor(){const e=this._getCursorPosition()-1;e>=0&&this._removeFormulaItem(e)}_removeCharAfterCursor(){const e=this._getCursorPosition()+1;e<this._formulaData.length&&this._removeFormulaItem(e)}_getCursorPosition(){return this._formulaData.findIndex(e=>e.type===Aa.Cursor)}_moveCursorForward(){const e=this._getCursorPosition();e<this._formulaData.length&&this._moveCursorOnPosition(e+1)}_moveCursorBackward(){const e=this._getCursorPosition()-1;e>=0&&this._moveCursorOnPosition(e)}_moveCursorOnPosition(e){e>this._formulaData.length||(this._removeCursor(),this._addCursor(e))}_focusFormulaInput(){this.container&&this.container.viewContainerRef.element.nativeElement.parentElement.focus()}_getPositionOutsideItems(e){let t=0;const n=e.currentTarget.children[0].clientWidth;return e.offsetX>=n&&(t=this._formulaData.length),t}_addCursorIfNotExists(){let e=this._getCursorPosition();-1===e&&(e=this.formulaData.length,this._addCursor(e))}_addItemsFromTemplate(e){let t=this._getCursorPosition();this.formulaData.splice(t,0,...e.items),hu.A(e.cursorPosition)&&(t+=e.cursorPosition,this._moveCursorOnPosition(t))}_generateComponents(){this._viewClear(),this._formulaData.forEach((e,t)=>{this._generateComponent(t,e)})}_generateComponent(e,t){0===e&&this._viewClear();const n=this._formulaItemFactory.createComponent(t.type,this.container.viewContainerRef);n.caption=t.caption,n.value=t.value,n.formulaClick.subscribe(a=>{this.handleItemClick(a,e)})}ngOnDestroy(){this._viewClear()}handleClick(e){const t=this._getPositionOutsideItems(e);-1===this._getCursorPosition()?this._addCursor(t):this._moveCursorOnPosition(t),e.stopPropagation()}handleItemClick(e,t){const a=e.currentTarget.getBoundingClientRect(),r=e.clientX,u=a.left+a.width/2,p=this._getCursorPosition();let f=t;r<u?-1!==p&&p<t&&(f-=1):(-1===p||p>t)&&(f+=1),this._moveCursorOnPosition(f),e.stopPropagation()}handleKeyDown(e){const t=e.key;switch(t){case"Backspace":this._removeCharBeforeCursor();break;case"Delete":this._removeCharAfterCursor();break;case"ArrowLeft":this._moveCursorBackward();break;case"ArrowRight":this._moveCursorForward();break;default:const n=this._getCursorPosition(),a=this._formulaItemFactory.getFormulaItemType(t);Object.values(Aa).includes(a)&&this._insertFormulaItem(n,new Kb({type:a,caption:t,value:t}))}}addItem(e){this._addCursorIfNotExists(),Re.A(e.template)||Re.A(e.template.items)?this._insertFormulaItem(this._getCursorPosition(),e):this._addItemsFromTemplate(e.template),this._focusFormulaInput()}deletePreviousItem(){this._removeCharBeforeCursor()}static{this.\u0275fac=function(t){return new(t||kf)(i.\u0275\u0275directiveInject(rd))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:kf,selectors:[["ts-formula-editor"]],viewQuery:function(t,n){if(1&t&&i.\u0275\u0275viewQuery(re.Jo,7),2&t){let a;i.\u0275\u0275queryRefresh(a=i.\u0275\u0275loadQuery())&&(n.container=a.first)}},inputs:{formulaData:"formulaData",focusFormulaInputOnFormulaDataChange:"focusFormulaInputOnFormulaDataChange"},outputs:{itemsChanged:"itemsChanged"},decls:6,vars:1,consts:[["tabindex","0","dir","ltr",1,"formula-input",3,"click","keydown"],[1,"pre-formula-item"],["tsViewContainerRef",""],[4,"ngFor","ngForOf"],[1,"post-formula-item",3,"click"]],template:function(t,n){1&t&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275listener("click",function(r){return n.handleClick(r)})("keydown",function(r){return n.handleKeyDown(r)}),i.\u0275\u0275elementStart(1,"div",1),i.\u0275\u0275text(2,"="),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(3,vv,0,0,"ng-template",2)(4,Iv,1,0,"div",3),i.\u0275\u0275elementStart(5,"div",4),i.\u0275\u0275listener("click",function(r){return n.deletePreviousItem(),r.stopPropagation()}),i.\u0275\u0275elementEnd()()),2&t&&(i.\u0275\u0275advance(4),i.\u0275\u0275property("ngForOf",n.formulaData))},dependencies:[R.NgForOf,Sv.J,Mt.ig],styles:[".formula-input{-webkit-user-select:none;user-select:none;display:inline-flex;outline:none;flex-wrap:wrap;padding:0 .3em .2em;min-height:30px;border-bottom:1px solid #e7e7e7;width:100%;cursor:text}.pre-formula-item{font-size:14pt;width:20px;line-height:19px}.post-formula-item{margin-left:auto;-webkit-user-select:none;user-select:none;cursor:pointer;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIyLjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAxOCAxNiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMTggMTY7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDpub25lO30KCS5zdDF7ZmlsbDojODE5NUIzO30KPC9zdHlsZT4KPGc+Cgk8Zz4KCQk8cmVjdCBjbGFzcz0ic3QwIiB3aWR0aD0iMTgiIGhlaWdodD0iMTYiLz4KCTwvZz4KCTxnPgoJCTxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0xOCwxNUg1LjhMMC40LDhsNS40LTdIMThMMTgsMTV6IE02LjIsMTRIMTdsMC0xMkg2LjJMMS42LDhMNi4yLDE0eiIvPgoJPC9nPgoJPGc+CgkJPHJlY3QgeD0iMTAuNSIgeT0iMy44IiB0cmFuc2Zvcm09Im1hdHJpeCgwLjcwNzEgLTAuNzA3MSAwLjcwNzEgMC43MDcxIC0yLjQzNSAxMC4xMjEzKSIgY2xhc3M9InN0MSIgd2lkdGg9IjEiIGhlaWdodD0iOC41Ii8+Cgk8L2c+Cgk8Zz4KCQk8cmVjdCB4PSI2LjgiIHk9IjcuNSIgdHJhbnNmb3JtPSJtYXRyaXgoMC43MDcxIC0wLjcwNzEgMC43MDcxIDAuNzA3MSAtMi40MzUgMTAuMTIxMykiIGNsYXNzPSJzdDEiIHdpZHRoPSI4LjUiIGhlaWdodD0iMSIvPgoJPC9nPgo8L2c+Cjwvc3ZnPgo=);width:18px;height:16px;margin-top:4px;margin-bottom:auto}\n"],encapsulation:2})}}class Cm extends Be.XI{constructor(){super(...arguments),this.getRegisteredEvents=()=>[{name:"click"}]}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(Cm)))(n||Cm)}})()}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:Cm,selectors:[["ts-delete-button-table-cell"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:3,vars:3,consts:[["mat-icon-button","",1,"trash-icon",3,"click","title"],["svgIcon","trash"]],template:function(t,n){1&t&&(i.\u0275\u0275elementStart(0,"button",0),i.\u0275\u0275pipe(1,"translate"),i.\u0275\u0275listener("click",function(){return n.fireEvent("click")}),i.\u0275\u0275element(2,"mat-icon",1),i.\u0275\u0275elementEnd()),2&t&&i.\u0275\u0275property("title",i.\u0275\u0275pipeBind1(1,1,"DeleteButtonTableCell.Tooltip"))},dependencies:[Ve.iV,be.An,v.D9],encapsulation:2})}}const Tv=["tableWrapper"],Dv=["tableNgContainer"];function Mv(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"div",16)(1,"span",17),i.\u0275\u0275text(2),i.\u0275\u0275pipe(3,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"span",18),i.\u0275\u0275text(5),i.\u0275\u0275elementEnd()()),2&o){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(3,2,"MultiselectDialog.Selected")),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1(" ",t.selectedValues.length,"")}}function wv(o,e){1&o&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"span"),i.\u0275\u0275text(2),i.\u0275\u0275pipe(3,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&o&&(i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(3,1,"MultiselectDialog.Blankslate")))}function Ev(o,e){1&o&&(i.\u0275\u0275elementStart(0,"span"),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"translate"),i.\u0275\u0275elementEnd()),2&o&&(i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(2,1,"MultiselectDialog.BlankslateWithFilters")))}function xv(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"div",19),i.\u0275\u0275template(1,wv,4,3,"ng-container",20)(2,Ev,3,3,"ng-template",null,2,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()),2&o){const t=i.\u0275\u0275reference(3),n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",!n.searchKey)("ngIfElse",t)}}class jf{get searchKey(){return this.searchKeyValue}set searchKey(e){this.searchKeyValue=e,this.tableDataSource.filter=e&&e.trim().toLowerCase()}constructor(e,t,n){this._dialogData=e,this._scrollToBottomObserverFactory=t,this._dialogRef=n,this.searchColumns=[],this.tableData=[],this.searchKeyValue="",this.title="",this.selectedValues=[],this.tableDataSource=new xf}renderTableComponent(e){var t=this;return(0,A.A)(function*(){yield Promise.resolve().then(b.bind(b,25612)).then(n=>{const a=n.TableComponent;t.table=e.createComponent(a).instance,t.table.selectMode=t.selectMode,t.table.dataSchema=t.dataSchema,t.table.dataSource=t.tableDataSource,t.table.sortColumn=t.sortColumn,t.table.sortDirection=t.sortDirection,t.table.showSelectAllButton=t.showSelectAllButton,t.table.headerSticky=!0,t.table.selected=t.selectedValues,t.table.selectedChange.subscribe(r=>t.selectedValues=r),t.table.rowDoubleClick.subscribe(r=>t.closeWithSelection(r))})})()}initDataSource(){this.tableDataSource.data=this.tableData,this.tableDataSource.filterPredicate=(0,_.joR)(this.searchColumns)}loadNextData(){this.tableDataSource.loadNext()}ngOnInit(){var e=this;return(0,A.A)(function*(){!e._dialogData||!e._dialogData.data||(e.tableData=e._dialogData.data,e.dataSchema=e._dialogData.dataSchema,e.sortDirection=e._dialogData.sortDirection||"asc",e.sortColumn=e._dialogData.sortColumn,e.title=e._dialogData.title||e.title,e.selectMode=e._dialogData.selectMode||"multi",e.showSelectAllButton=void 0===e._dialogData.showSelectAllButton||e._dialogData.showSelectAllButton,e.searchColumns=e._dialogData.searchColumns||[],e.initDataSource(),yield e.renderTableComponent(e.tableNgContainer))})()}ngAfterViewInit(){const e=this.tableWrapper.nativeElement;e&&(this.scrollTableToBottomObserver=this._scrollToBottomObserverFactory.createObserver(e,this.loadNextData.bind(this)))}isEmpty(){return!this.table||this.table.isEmpty()}closeWithSelection(e){"single"===this.selectMode&&this._dialogRef.close([e])}static{this.\u0275fac=function(t){return new(t||jf)(i.\u0275\u0275directiveInject(he.xh),i.\u0275\u0275directiveInject(_.Stw),i.\u0275\u0275directiveInject(he.RN))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:jf,selectors:[["ts-multiselect-dialog"]],viewQuery:function(t,n){if(1&t&&(i.\u0275\u0275viewQuery(Tv,7),i.\u0275\u0275viewQuery(Dv,7,i.ViewContainerRef)),2&t){let a;i.\u0275\u0275queryRefresh(a=i.\u0275\u0275loadQuery())&&(n.tableWrapper=a.first),i.\u0275\u0275queryRefresh(a=i.\u0275\u0275loadQuery())&&(n.tableNgContainer=a.first)}},decls:22,vars:14,consts:[["tableWrapper",""],["tableNgContainer",""],["blankslateWithFilters",""],["mat-dialog-title",""],[1,"title"],["mat-icon-button","",1,"close-dialog",3,"mat-dialog-close"],["svgIcon","close",1,"close-button-icon"],[1,"multiselect-dialog-top-panel"],[1,"dialog-filters"],[3,"valueChange","value"],["class","select-counter-container",4,"ngIf"],["mat-dialog-content",""],["class","multiselect-dialog-blank-slate",4,"ngIf"],["mat-dialog-actions",""],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"],["mat-flat-button","","color","primary",3,"mat-dialog-close","disabled"],[1,"select-counter-container"],[1,"counter-label"],[1,"counter-value"],[1,"multiselect-dialog-blank-slate"],[4,"ngIf","ngIfElse"]],template:function(t,n){if(1&t){const a=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",3)(1,"span",4),i.\u0275\u0275text(2),i.\u0275\u0275pipe(3,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"button",5),i.\u0275\u0275element(5,"mat-icon",6),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(6,"div",7)(7,"div",8)(8,"ts-search-input",9),i.\u0275\u0275twoWayListener("valueChange",function(u){return i.\u0275\u0275restoreView(a),i.\u0275\u0275twoWayBindingSet(n.searchKey,u)||(n.searchKey=u),i.\u0275\u0275resetView(u)}),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(9,Mv,6,4,"div",10),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"div",11,0),i.\u0275\u0275elementContainer(12,null,1),i.\u0275\u0275template(14,xv,4,2,"div",12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(15,"div",13)(16,"button",14),i.\u0275\u0275text(17),i.\u0275\u0275pipe(18,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(19,"button",15),i.\u0275\u0275text(20),i.\u0275\u0275pipe(21,"translate"),i.\u0275\u0275elementEnd()()}2&t&&(i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(3,8,n.title||"MultiselectDialog.Select")),i.\u0275\u0275advance(6),i.\u0275\u0275twoWayProperty("value",n.searchKey),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf","multi"===n.selectMode),i.\u0275\u0275advance(5),i.\u0275\u0275property("ngIf",n.isEmpty()),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(18,10,"MultiselectDialog.Cancel")),i.\u0275\u0275advance(2),i.\u0275\u0275property("mat-dialog-close",n.selectedValues)("disabled",0==n.selectedValues.length),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(21,12,"MultiselectDialog.Select")))},dependencies:[R.NgIf,Ve.iV,he.kQ,he.KI,he.PQ,he.$t,be.An,ed,v.D9],styles:["[_nghost-%COMP%]{padding:4px 10px;width:834px;max-width:100%;min-width:420px;box-sizing:border-box}[mat-dialog-title][_ngcontent-%COMP%]{display:flex}[mat-dialog-title][_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:calc(100% - 20px);display:inline-block;overflow:hidden;text-overflow:ellipsis}.multiselect-dialog-top-panel[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;font-size:14px;font-family:Bpmonline Open Sans,serif;line-height:19px;margin-top:20px;margin-bottom:5px}.multiselect-dialog-top-panel[_ngcontent-%COMP%]   .dialog-filters[_ngcontent-%COMP%]{flex-grow:1}.multiselect-dialog-top-panel[_ngcontent-%COMP%]   .dialog-filters[_ngcontent-%COMP%]   ts-search-input[_ngcontent-%COMP%]{width:max(40%,300px)}.multiselect-dialog-top-panel[_ngcontent-%COMP%]   .select-counter-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center}.multiselect-dialog-top-panel[_ngcontent-%COMP%]   .select-counter-container[_ngcontent-%COMP%]   .counter-label[_ngcontent-%COMP%]{font-size:13px;color:#757575}.multiselect-dialog-top-panel[_ngcontent-%COMP%]   .select-counter-container[_ngcontent-%COMP%]   .counter-value[_ngcontent-%COMP%]{padding-left:3px;font-size:14px;color:#444}[mat-dialog-content][_ngcontent-%COMP%]{overflow:auto!important;max-height:55vh!important;min-height:267px;height:862px}[mat-dialog-content][_ngcontent-%COMP%]   .multiselect-dialog-blank-slate[_ngcontent-%COMP%]{display:flex;justify-content:center;font-size:14px;color:#999;text-align:center}[mat-dialog-actions][_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end}"]})}}class od{static{this.\u0275fac=function(t){return new(t||od)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:od})}static{this.\u0275inj=i.\u0275\u0275defineInjector({})}}class Bf{static{this.\u0275fac=function(t){return new(t||Bf)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:Bf})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[R.CommonModule,ce.YN,v.h,Ue.mz,Ve.wG,be.m_,he.eB,od,re.Ph,re.Ss]})}}class Av{}class Rv extends Av{constructor(e){super(),Object.assign(this,e)}}var bm;!function(o){o[o.SysCulture=0]="SysCulture",o[o.SysLanguage=1]="SysLanguage"}(bm||(bm={}));var Pv=b(71663);class ld extends _.SNu{constructor(e){super(),this.httpClient=e,this._serviceEndpoint="/ServiceModel/CultureService.svc/"}getAllCultures(){if(!this._allCultures$){const e=this._serviceEndpoint+"GetAllCultures";this._allCultures$=this.httpClient.post(e,{}).pipe((0,E.T)(t=>t.cultures),(0,Tt.t)({bufferSize:1,refCount:!1}))}return this._allCultures$.pipe((0,E.T)(e=>e.map(t=>({id:t.id,name:t.name,title:t.title,isActive:t.isActive}))))}static{this.\u0275fac=function(t){return new(t||ld)(i.\u0275\u0275inject(F.HttpClient))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:ld,factory:ld.\u0275fac,providedIn:"root"})}}class cd{getActiveLanguages(){return(0,A.A)(function*(){return(yield(yield c.Model.create("SysLanguage")).load({attributes:["Code","Description"],parameters:[{type:c.ModelParameterType.Filter,value:new c.CompareFilter(c.ComparisonType.Equal,new c.ColumnExpression({columnPath:"IsUsed"}),new c.ParameterExpression({value:!0}))}]})).map(a=>({id:a.Id,name:a.Code,title:a.Description,isActive:!0}))})()}static{this.\u0275fac=function(t){return new(t||cd)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:cd,factory:cd.\u0275fac,providedIn:"root"})}}class gc{constructor(e,t){this.el=e,this.render=t}set dataItemMarker(e){this.render.setAttribute(this.el.nativeElement,"data-item-marker",e)}static{this.\u0275fac=function(t){return new(t||gc)(i.\u0275\u0275directiveInject(i.ElementRef),i.\u0275\u0275directiveInject(i.Renderer2))}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:gc,selectors:[["","tsDataItemMarker",""]],inputs:{dataItemMarker:[i.\u0275\u0275InputFlags.None,"tsDataItemMarker","dataItemMarker"]}})}}function Nv(o,e){1&o&&(i.\u0275\u0275elementStart(0,"span")(1,"a",13),i.\u0275\u0275pipe(2,"translate"),i.\u0275\u0275text(3),i.\u0275\u0275pipe(4,"translate"),i.\u0275\u0275elementEnd()()),2&o&&(i.\u0275\u0275advance(),i.\u0275\u0275propertyInterpolate("href",i.\u0275\u0275pipeBind1(2,2,"LocalizableStringsDialog.AcademyUrl"),i.\u0275\u0275sanitizeUrl),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(4,4,"LocalizableStringsDialog.AcademyUrlTitle")," "))}function Ov(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"div",11)(1,"span"),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(3,Nv,5,6,"span",12),i.\u0275\u0275elementEnd()),2&o){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",t.dialogData.description," "),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",t.dialogData.hasAcademyUrl)}}function Vv(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div")(1,"mat-form-field",14)(2,"mat-label",15),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"textarea",16),i.\u0275\u0275twoWayListener("ngModelChange",function(a){const r=i.\u0275\u0275restoreView(t).$implicit;return i.\u0275\u0275twoWayBindingSet(r.value,a)||(r.value=a),i.\u0275\u0275resetView(a)}),i.\u0275\u0275text(5,"\t\t\t\t"),i.\u0275\u0275elementEnd()()()}if(2&o){const t=e.$implicit,n=i.\u0275\u0275nextContext();i.\u0275\u0275attribute("data-item-marker",t.name),i.\u0275\u0275advance(),i.\u0275\u0275classProp("hideNonActiveItem",n.isHidden(t)),i.\u0275\u0275advance(),i.\u0275\u0275property("tsDataItemMarker",t.name+"_label")("lang",t.name),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(t.title),i.\u0275\u0275advance(),i.\u0275\u0275property("disabled",n.dialogData.isDisabled)("rows",1),i.\u0275\u0275twoWayProperty("ngModel",t.value),i.\u0275\u0275property("tsDataItemMarker",n.dataQaAttribute(t.name))("lang",t.name)("maxlength",n.dialogData.maxInputLength)}}function Lv(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",17)(1,"button",18),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(t);const a=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(a.showAll=!a.showAll)}),i.\u0275\u0275text(2),i.\u0275\u0275pipe(3,"translate"),i.\u0275\u0275element(4,"mat-icon",19),i.\u0275\u0275elementEnd()()}if(2&o){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(),i.\u0275\u0275property("tsDataItemMarker","show_hide_languages_button"),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(3,3,t.getIsActiveButtonTitle)," "),i.\u0275\u0275advance(2),i.\u0275\u0275property("svgIcon",t.getIsActiveButtonImage)}}class Sm{constructor(e,t,n){this.dialogData=e,this._dialogRef=n,this._destroyed=new h.ReplaySubject,this._maskService=new c.MaskService,this._defaultDataSource=bm.SysCulture,this.culturesData=[];const a=t.get(be.tp),r=t.get(x.DomSanitizer);this._cultureApiService=t.get(ld),this._languageApiService=t.get(cd),a.addSvgIconLiteral("up-arrows-icon",r.bypassSecurityTrustHtml(b(38192))),a.addSvgIconLiteral("close",r.bypassSecurityTrustHtml(b(54762))),a.addSvgIconLiteral("down-arrows-icon",r.bypassSecurityTrustHtml(b(71235)))}get getIsActiveButtonTitle(){return this.showAll?"LocalizableStringsDialog.HideInactiveLanguages":"LocalizableStringsDialog.ShowAllLanguages"}get getIsActiveButtonImage(){return this.showAll?"up-arrows-icon":"down-arrows-icon"}_getCultureValue(e){return this.dialogData.localizableStrings.getValue(e)}_getLocalizableDefinitionModel(e){const t=new Rv(e);return t.value=this._getCultureValue(e.name),t}_setNeedShowAllLanguagesButton(e){this.dialogData.hideShowAllLanguages?this.needShowAllLanguagesButton=!1:this.needShowAllLanguagesButton=e.some(t=>!t.isActive)}ngOnInit(){this._maskService.showBodyMask(),this.dialogData.source||(this.dialogData.source=this._defaultDataSource),(this.dialogData.source===bm.SysCulture?this._cultureApiService.getAllCultures():(0,h.scheduled)(this._languageApiService.getActiveLanguages(),h.asyncScheduler)).pipe((0,_e.Q)(this._destroyed),(0,ue.W)(t=>(console.error(t),this._maskService.hideBodyMask(),(0,h.of)(null)))).subscribe(t=>{this._maskService.hideBodyMask(),this.culturesData=t.map(n=>this._getLocalizableDefinitionModel(n)),this._setNeedShowAllLanguagesButton(t)}),this._dialogRef.keydownEvents().pipe((0,se.p)(t=>t?.key===Pv.U.Escape)).subscribe(()=>this._maskService.hideBodyMask())}dataQaAttribute(e){return e+"_input"}isHidden(e){return!this.showAll&&(this.dialogData.alwaysVisibleCultures?.length?!this.dialogData.alwaysVisibleCultures.includes(e.name):!e.isActive)}ngOnDestroy(){this._destroyed.next(!0),this._destroyed.complete()}static{this.\u0275fac=function(t){return new(t||Sm)(i.\u0275\u0275directiveInject(he.xh),i.\u0275\u0275directiveInject(i.Injector),i.\u0275\u0275directiveInject(he.RN))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:Sm,selectors:[["ts-localizable-dialog"]],decls:18,vars:17,consts:[[1,"ts-localizable-dialog"],["mat-dialog-title",""],["mat-icon-button","",1,"close-dialog",3,"aria-label","mat-dialog-close"],["svgIcon","close",1,"close-button-icon"],["mat-dialog-content","",1,"dialog-content-wrapper"],["class","description",4,"ngIf"],[4,"ngFor","ngForOf"],["class","collapse-expand-language",4,"ngIf"],["mat-dialog-actions","",1,"dialog-action-buttons"],["mat-button","","data-item-marker","localizable-dialog-cancel-button",1,"cancelBtn",3,"mat-dialog-close"],["mat-flat-button","","color","primary","data-item-marker","localizable-dialog-apply-button",1,"applyBtn",3,"disabled","mat-dialog-close"],[1,"description"],[4,"ngIf"],["target","_blank",3,"href"],["floatLabel","always",1,"example-full-width"],[3,"tsDataItemMarker","lang"],["matInput","",3,"ngModelChange","disabled","rows","ngModel","tsDataItemMarker","lang","maxlength"],[1,"collapse-expand-language"],["mat-button","",3,"click","tsDataItemMarker"],[1,"expandCollapsImg",3,"svgIcon"]],template:function(t,n){1&t&&(i.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"span"),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"button",2),i.\u0275\u0275pipe(5,"translate"),i.\u0275\u0275element(6,"mat-icon",3),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(7,"div",4),i.\u0275\u0275template(8,Ov,4,2,"div",5)(9,Vv,6,12,"div",6),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(10,Lv,5,5,"div",7),i.\u0275\u0275elementStart(11,"div",8)(12,"button",9),i.\u0275\u0275text(13),i.\u0275\u0275pipe(14,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(15,"button",10),i.\u0275\u0275text(16),i.\u0275\u0275pipe(17,"translate"),i.\u0275\u0275elementEnd()()()),2&t&&(i.\u0275\u0275classMap(n.dialogData.customClass),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1(" ",n.dialogData.title," "),i.\u0275\u0275advance(),i.\u0275\u0275propertyInterpolate("aria-label",i.\u0275\u0275pipeBind1(5,11,"DialogComponent.CloseButtonDialog")),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",n.dialogData.description),i.\u0275\u0275advance(),i.\u0275\u0275property("ngForOf",n.culturesData),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",n.needShowAllLanguagesButton),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(14,13,n.dialogData.cancelBtnTitle)," "),i.\u0275\u0275advance(2),i.\u0275\u0275property("disabled",n.dialogData.isDisabled)("mat-dialog-close",n.culturesData),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(17,15,n.dialogData.okBtnTitle)," "))},dependencies:[R.NgForOf,R.NgIf,ce.me,ce.BC,ce.tU,ce.vS,ve.Ky,ve.aw,Ue.aL,Ve.iV,be.An,he.kQ,he.KI,he.PQ,he.$t,gc,v.D9],styles:[".dialog-content-wrapper[_ngcontent-%COMP%]{padding-top:8px;padding-bottom:17px;display:flex;flex-direction:column;justify-content:space-between;width:476px;height:100%;overflow:auto!important}.dialog-content-wrapper[_ngcontent-%COMP%]   .example-full-width[_ngcontent-%COMP%]{width:100%}.dialog-content-wrapper[_ngcontent-%COMP%]   .example-full-width[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:18px}.dialog-content-wrapper[_ngcontent-%COMP%]   .example-full-width[_ngcontent-%COMP%]   textarea[disabled][_ngcontent-%COMP%]{color:#000}.dialog-content-wrapper[_ngcontent-%COMP%]   .hideNonActiveItem[_ngcontent-%COMP%]{display:none}.dialog-content-wrapper[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{font-size:14px}.ts-localizable-dialog.multilang-style[_ngcontent-%COMP%]   .mat-dialog-title[_ngcontent-%COMP%]{margin-bottom:16px;width:480px}.ts-localizable-dialog.multilang-style[_ngcontent-%COMP%]   .mat-dialog-content[_ngcontent-%COMP%]{width:540px}.ts-localizable-dialog.multilang-style[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{padding-bottom:1.5em}[mat-dialog-actions][_ngcontent-%COMP%]{margin:9px 0!important;display:flex;flex-direction:row;justify-content:flex-end}.collapse-expand-language[_ngcontent-%COMP%]{text-align:center}.collapse-expand-language[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%]{text-transform:none}.collapse-expand-language[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%]:focus{background-color:transparent!important}.collapse-expand-language[_ngcontent-%COMP%]   .expandCollapsImg[_ngcontent-%COMP%]{padding-left:5px;display:flex;box-sizing:content-box;width:16px;height:16px}"]})}}var Fv=b(97124);const kv=["input"],jv=["button"];function Bv(o,e){1&o&&(i.\u0275\u0275elementStart(0,"div",7),i.\u0275\u0275element(1,"mat-icon",8),i.\u0275\u0275pipe(2,"translate"),i.\u0275\u0275elementEnd()),2&o&&(i.\u0275\u0275advance(),i.\u0275\u0275property("crtTooltip",i.\u0275\u0275pipeBind1(2,1,"Input.Readonly")))}function Gv(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"div",7),i.\u0275\u0275element(1,"mat-icon",9),i.\u0275\u0275elementEnd()),2&o){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(),i.\u0275\u0275property("crtTooltip",t.tooltip)}}class vm extends re.Fj{get localizableStringsIcon(){return"bold"===this.iconLineType?"localizable-strings-bold":"localizable-strings"}set autofocus(e){if(e){const t=this.input.nativeElement;t.focus(),t.select()}}set stringValue(e){this.innerValue.setValueLocalizableString(this.translateService.currentLang,e),this.onChange(this.innerValue)}get stringValue(){return this.innerValue instanceof _.hd5?this.innerValue.getValue(this.translateService.currentLang):this.innerValue}constructor(e,t,n,a,r,u,p,f){super(e,t,n),this.translateService=a,this.dialogService=r,this._maskService=f,this.controlType="ts-localizable-string",this.iconLineType="default",this.showLockIcon=!1;const S=b(27809),w=b(47943);u.addSvgIconLiteral("localizable-strings",p.bypassSecurityTrustHtml(S)),u.addSvgIconLiteral("localizable-strings-bold",p.bypassSecurityTrustHtml(w))}dataQaAttribute(){return this.label.toLowerCase()+"_input"}showLanguageMiniCard(e){e.preventDefault();const t=!!this.beforeOpen;t&&this._maskService.showBodyMask({delay:0}),(t?this.beforeOpen():(0,h.of)(null)).pipe((0,h.take)(1),(0,h.tap)(()=>this._maskService.hideBodyMask()),(0,h.switchMap)(()=>this.dialogService.open(Sm,{data:{title:this.label,cancelBtnTitle:"LocalizableStringsDialog.Cancel",okBtnTitle:"LocalizableStringsDialog.Apply",localizableStrings:this.innerValue,isDisabled:this.disabled},scrollStrategy:new dm.t0,panelClass:["dialog-top-border"]}))).subscribe(a=>{a&&(a.forEach(r=>{this.innerValue.setValueLocalizableString(r.name,r.value)}),this.onChange(this.innerValue))})}writeValue(e){e||(e=new _.hd5),super.writeValue(e)}static{this.\u0275fac=function(t){return new(t||vm)(i.\u0275\u0275directiveInject(ce.vO,10),i.\u0275\u0275directiveInject(Of.P8),i.\u0275\u0275directiveInject(Vf.FN),i.\u0275\u0275directiveInject(v.c$),i.\u0275\u0275directiveInject(re.o3),i.\u0275\u0275directiveInject(be.tp),i.\u0275\u0275directiveInject(x.DomSanitizer),i.\u0275\u0275directiveInject(re.sz))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:vm,selectors:[["ts-localizable-text-input"]],viewQuery:function(t,n){if(1&t&&(i.\u0275\u0275viewQuery(kv,5),i.\u0275\u0275viewQuery(jv,5,i.ElementRef)),2&t){let a;i.\u0275\u0275queryRefresh(a=i.\u0275\u0275loadQuery())&&(n.input=a.first),i.\u0275\u0275queryRefresh(a=i.\u0275\u0275loadQuery())&&(n.button=a.first)}},inputs:{tooltip:"tooltip",iconLineType:"iconLineType",showLockIcon:"showLockIcon",label:"label",autofocus:"autofocus",stringValue:"stringValue",beforeOpen:"beforeOpen"},features:[i.\u0275\u0275ProvidersFeature([{provide:Nf.qT,useExisting:vm}]),i.\u0275\u0275InheritDefinitionFeature],decls:10,vars:16,consts:[["input",""],["button",""],[1,"localizable-text-input-container"],["matInput","","autocomplete","off",1,"localizable-text-input-container-control",3,"ngModelChange","ngModel","disabled","tsDataItemMarker","required","placeholder"],["class","icon-container",4,"ngIf"],["mat-icon-button","","type","button",1,"localizable-icon",3,"click","tsDataItemMarker"],[1,"localizable-strings-icon",3,"svgIcon"],[1,"icon-container"],["matIconSuffix","","svgIcon","lock",1,"readonly-icon",3,"crtTooltip"],["tabindex","0","matSuffix","","svgIcon","info-icon",1,"tooltip-icon",3,"crtTooltip"]],template:function(t,n){if(1&t){const a=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",2)(1,"input",3,0),i.\u0275\u0275twoWayListener("ngModelChange",function(u){return i.\u0275\u0275restoreView(a),i.\u0275\u0275twoWayBindingSet(n.stringValue,u)||(n.stringValue=u),i.\u0275\u0275resetView(u)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(3,Bv,3,3,"div",4),i.\u0275\u0275elementStart(4,"button",5,1),i.\u0275\u0275pipe(6,"translate"),i.\u0275\u0275pipe(7,"translate"),i.\u0275\u0275listener("click",function(u){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.showLanguageMiniCard(u))}),i.\u0275\u0275element(8,"mat-icon",6),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(9,Gv,2,1,"div",4),i.\u0275\u0275elementEnd()}2&t&&(i.\u0275\u0275advance(),i.\u0275\u0275twoWayProperty("ngModel",n.stringValue),i.\u0275\u0275property("disabled",n.disabled)("tsDataItemMarker",n.dataQaAttribute())("required",n.required)("placeholder",n.placeholder),i.\u0275\u0275attribute("aria-label",n.label),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",n.showLockIcon&&n.disabled),i.\u0275\u0275advance(),i.\u0275\u0275property("tsDataItemMarker","localizable_button_"+n.label),i.\u0275\u0275attribute("aria-label",i.\u0275\u0275pipeBind1(6,12,"LocalizableTextInput.ButtonTitle"))("title",i.\u0275\u0275pipeBind1(7,14,"LocalizableTextInput.ButtonTitle")),i.\u0275\u0275advance(4),i.\u0275\u0275propertyInterpolate("svgIcon",n.localizableStringsIcon),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",n.tooltip))},dependencies:[R.NgIf,ce.me,ce.BC,ce.YS,ce.vS,ve.xZ,Ue.aL,Ve.iV,be.An,gc,Fv.d,v.D9],styles:["body{--focus-outline-outer-color: var(--crt-palette-secondary-500);--focus-outline-inner-color: white}.localizable-text-input-container{display:flex;flex-direction:row;align-items:center}.localizable-text-input-container .mat-input-element{padding-right:21px}.localizable-text-input-container .mat-icon-button.localizable-icon{height:auto;width:1.5em}.localizable-text-input-container .mat-icon.localizable-strings-icon{width:16px;height:16px;line-height:16px}.localizable-text-input-container .mat-button-wrapper{display:flex;justify-content:center}.localizable-text-input-container .mat-button-focus-overlay,.localizable-text-input-container .mat-button-ripple-round{height:21px}.localizable-text-input-container .mat-icon-button:focus-visible{box-shadow:inset 0 0 0 1px var(--focus-outline-outer-color),inset 0 0 0 2px var(--focus-outline-inner-color);outline:none;border-radius:4px}.localizable-text-input-container .readonly-icon,.localizable-text-input-container .tooltip-icon{width:16px;height:16px;display:flex;justify-content:center}.localizable-text-input-container .tooltip-icon{color:#0d2e4e;margin-right:6px;margin-left:4px}.localizable-text-input-container:not(:hover) .readonly-icon{display:none}\n"],encapsulation:2})}}const Uv=["*"],zv=o=>({"actions-menu-button-with-icon":o});function Hv(o,e){if(1&o&&i.\u0275\u0275element(0,"mat-icon",11),2&o){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("svgIcon",t.config.trigger.svgIconName)}}function $v(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"span",12),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&o){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(t.config.trigger.caption)}}function qv(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",6),i.\u0275\u0275listener("menuOpened",function(){i.\u0275\u0275restoreView(t);const a=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(a.onMenuOpened())}),i.\u0275\u0275template(1,Hv,1,1,"mat-icon",7)(2,$v,2,1,"span",8),i.\u0275\u0275elementStart(3,"div",9),i.\u0275\u0275element(4,"div",10),i.\u0275\u0275elementEnd()()}if(2&o){const t=i.\u0275\u0275nextContext(),n=i.\u0275\u0275reference(4);i.\u0275\u0275property("matMenuTriggerFor",n)("disabled",t.config.trigger.disabled),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",t.config.trigger.svgIconName),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",t.config.trigger.caption)}}function Wv(o,e){if(1&o&&i.\u0275\u0275element(0,"mat-divider"),2&o){const t=i.\u0275\u0275nextContext().index;i.\u0275\u0275styleProp("visibility",0===t?"hidden":"visible")}}function Zv(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"div",15),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&o){const t=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(t.caption)}}function Jv(o,e){if(1&o&&i.\u0275\u0275element(0,"mat-icon",23),2&o){const t=i.\u0275\u0275nextContext(3).$implicit;i.\u0275\u0275property("svgIcon",t.svgIconName)}}function Yv(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"span",21),i.\u0275\u0275template(1,Jv,1,1,"mat-icon",22),i.\u0275\u0275elementEnd()),2&o){const t=i.\u0275\u0275nextContext(2).$implicit;i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",t.svgIconName)}}function Kv(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",16),i.\u0275\u0275listener("click",function(a){i.\u0275\u0275restoreView(t);const r=i.\u0275\u0275nextContext().$implicit,u=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(u.onMenuItemContainerClick(a,r))}),i.\u0275\u0275elementStart(1,"button",17),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(t);const a=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(r.onMenuItemClick(a))}),i.\u0275\u0275elementStart(2,"div",18),i.\u0275\u0275template(3,Yv,2,1,"span",19),i.\u0275\u0275elementStart(4,"span",20),i.\u0275\u0275text(5),i.\u0275\u0275elementEnd()()()()}if(2&o){const t=i.\u0275\u0275nextContext().$implicit,n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(),i.\u0275\u0275property("disabled",n.isMenuItemDisabled(t))("ngClass",i.\u0275\u0275pureFunction1(4,zv,n.hasIcons())),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",n.hasIcons()),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.caption)}}function Qv(o,e){if(1&o&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Wv,1,2,"mat-divider",13)(2,Zv,2,1,"div",14)(3,Kv,6,6,"ng-template",null,1,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementContainerEnd()),2&o){const t=e.$implicit,n=i.\u0275\u0275reference(4),a=i.\u0275\u0275nextContext();i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",t.code===a.dividerItemCode)("ngIfElse",n),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",t.code===a.dividerItemCode&&t.caption)}}const Qb={code:"__divider",caption:null};Object.freeze(Qb);class ud{constructor(){this.menuItemClick=new i.EventEmitter}static{this.\u0275fac=function(t){return new(t||ud)}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:ud,outputs:{menuItemClick:"menuItemClick"}})}}class dd extends ud{constructor(){super(...arguments),this.dividerItemCode=Qb.code}isMenuItemDisabled(e){return!0===e.disabled}onMenuItemClick(e){e.handler&&e.handler(),this.menuItemClick.emit(e.code)}onMenuItemContainerClick(e,t){this.isMenuItemDisabled(t)&&e.stopPropagation()}hasIcons(){return this.config?.menuItems?.some(e=>e.svgIconName)}trackByCode(e,t){return t.code}onMenuOpened(){this.visibleMenuItems=this.config?.menuItems?.filter(e=>!e.hidden)??[]}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(dd)))(n||dd)}})()}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:dd,selectors:[["ts-actions-menu"]],inputs:{config:"config"},features:[i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:Uv,decls:6,vars:7,consts:[["menu","matMenu"],["menuItem",""],[1,"actions-menu-trigger-wrapper",3,"menuOpened","matMenuTriggerFor"],["mat-button","","class","actions-menu-trigger default",3,"matMenuTriggerFor","disabled","menuOpened",4,"ngIf"],[1,"actions-menu-panel",3,"overlapTrigger"],[4,"ngFor","ngForOf","ngForTrackBy"],["mat-button","",1,"actions-menu-trigger","default",3,"menuOpened","matMenuTriggerFor","disabled"],["class","actions-menu-trigger-icon",3,"svgIcon",4,"ngIf"],["class","actions-menu-trigger-caption",4,"ngIf"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],[1,"actions-menu-trigger-icon",3,"svgIcon"],[1,"actions-menu-trigger-caption"],[3,"visibility",4,"ngIf","ngIfElse"],["class","menu-divider-caption",4,"ngIf"],[1,"menu-divider-caption"],[3,"click"],["mat-menu-item","",3,"click","disabled","ngClass"],[1,"actions-menu-item-button-content"],["class","actions-menu-item-icon-wrapper",4,"ngIf"],[1,"actions-menu-item-text"],[1,"actions-menu-item-icon-wrapper"],[3,"svgIcon",4,"ngIf"],[3,"svgIcon"]],template:function(t,n){if(1&t){const a=i.\u0275\u0275getCurrentView();i.\u0275\u0275projectionDef(),i.\u0275\u0275elementStart(0,"div",2),i.\u0275\u0275listener("menuOpened",function(){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.onMenuOpened())}),i.\u0275\u0275projection(1),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(2,qv,5,4,"button",3),i.\u0275\u0275elementStart(3,"mat-menu",4,0),i.\u0275\u0275template(5,Qv,5,3,"ng-container",5),i.\u0275\u0275elementEnd()}if(2&t){const a=i.\u0275\u0275reference(4);i.\u0275\u0275property("matMenuTriggerFor",a),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",null==n.config?null:n.config.trigger),i.\u0275\u0275advance(),i.\u0275\u0275classMap(null==n.config?null:n.config.cssClasses),i.\u0275\u0275property("overlapTrigger",null==n.config?null:n.config.overlapTrigger),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",n.visibleMenuItems)("ngForTrackBy",n.trackByCode)}},dependencies:[R.NgClass,R.NgForOf,R.NgIf,Ve.iV,ui.q,be.An,hn.pI,hn.gy,hn.fS],styles:["ts-actions-menu .actions-menu-trigger-wrapper{display:flex;align-items:center}.mat-menu-content .menu-divider-caption{padding:0 16px;text-transform:uppercase;font-size:14px;color:#4b7fc7;height:33px;line-height:33px}.actions-menu-panel{max-width:500px!important}.actions-menu-panel button.mat-menu-item{height:33px!important;line-height:33px!important;padding-right:30px}.actions-menu-panel button.mat-menu-item.actions-menu-button-with-icon{padding-left:12px!important}.actions-menu-panel button.mat-menu-item .actions-menu-item-button-content{display:flex;flex-direction:row;align-items:center}.actions-menu-panel button.mat-menu-item .actions-menu-item-button-content .actions-menu-item-icon-wrapper{width:16px;height:16px;padding-right:8px;line-height:16px}.actions-menu-panel button.mat-menu-item .actions-menu-item-button-content .actions-menu-item-icon-wrapper mat-icon{width:16px;height:16px;margin:0!important}.actions-menu-panel mat-divider{margin:5px 12px}\n"],encapsulation:2,changeDetection:0})}}const Xv=(o,e,t)=>({menuItems:o,overlapTrigger:e,cssClasses:t});class Gf extends ud{constructor(e,t){super(),this._matIconRegistry=e,this._domSanitizer=t,this.menuItems=[],this.cssClasses="",this.overlapTrigger=!0,this._registerIcons()}_registerIcons(){this._matIconRegistry.addSvgIconLiteral("vertical-dots",this._domSanitizer.bypassSecurityTrustHtml(b(112)))}static{this.\u0275fac=function(t){return new(t||Gf)(i.\u0275\u0275directiveInject(be.tp),i.\u0275\u0275directiveInject(x.DomSanitizer))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:Gf,selectors:[["ts-compact-actions-menu"]],inputs:{menuItems:"menuItems",cssClasses:"cssClasses",overlapTrigger:"overlapTrigger"},features:[i.\u0275\u0275InheritDefinitionFeature],decls:2,vars:5,consts:[[3,"menuItemClick","config"],["svgIcon","vertical-dots"]],template:function(t,n){1&t&&(i.\u0275\u0275elementStart(0,"ts-actions-menu",0),i.\u0275\u0275listener("menuItemClick",function(r){return n.menuItemClick.emit(r)}),i.\u0275\u0275element(1,"mat-icon",1),i.\u0275\u0275elementEnd()),2&t&&i.\u0275\u0275property("config",i.\u0275\u0275pureFunction3(1,Xv,n.menuItems,n.overlapTrigger,n.cssClasses))},dependencies:[be.An,dd],styles:["[_nghost-%COMP%]{display:block}mat-icon[_ngcontent-%COMP%]{width:16px;height:16px;cursor:pointer}"],changeDetection:0})}}function e1(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"a",6),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&o){const t=e.$implicit,n=i.\u0275\u0275nextContext(2).$implicit,a=i.\u0275\u0275nextContext();i.\u0275\u0275property("routerLink",t),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(a.formatTextValue(n,a.columnDataSchema.valueType))}}function t1(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"span"),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&o){const t=i.\u0275\u0275nextContext(2).$implicit,n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(n.formatTextValue(t,n.columnDataSchema.valueType))}}function n1(o,e){if(1&o&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,e1,2,2,"a",5)(2,t1,2,1,"ng-template",null,0,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementContainerEnd()),2&o){const t=i.\u0275\u0275reference(3),n=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",n.columnDataSchema.linkGenerator&&n.columnDataSchema.linkGenerator(n.record))("ngIfElse",t)}}function i1(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"div",2),i.\u0275\u0275element(1,"span",3),i.\u0275\u0275template(2,n1,4,2,"ng-container",4),i.\u0275\u0275elementEnd()),2&o){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",t.isDisplayedAsText())}}class Im extends Be.UQ{getValue(){if(!this.isDisplayedAsText())throw new c.ArgumentOutOfRangeException("Only text columns can be displayed via NamedFolderTableCellComponent.");return super.getValue()}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(Im)))(n||Im)}})()}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:Im,selectors:[["ts-named-folder-table-cell"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[["elseBlock",""],["class","named-folder-cell-wrapper",4,"ngIf"],[1,"named-folder-cell-wrapper"],[1,"folder-icon"],[4,"ngIf"],[3,"routerLink",4,"ngIf","ngIfElse"],[3,"routerLink"]],template:function(t,n){1&t&&i.\u0275\u0275template(0,i1,3,1,"div",1),2&t&&i.\u0275\u0275property("ngIf",!n.isEmpty()&&n.getValue())},dependencies:[R.NgIf,xs.Wk],styles:[".named-folder-cell-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center}.named-folder-cell-wrapper[_ngcontent-%COMP%]   .folder-icon[_ngcontent-%COMP%]{display:inline-block;width:16px;height:16px;margin-right:8px;background:url(folder-icon.svg) no-repeat}"]})}}var Uf=b(93895);class Tm{static{this.\u0275fac=function(t){return new(t||Tm)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:Tm})}static{this.\u0275inj=i.\u0275\u0275defineInjector({providers:[W.Dj,Mo,{provide:Jb,useValue:new nv("getFilterableListResources","setFilterableListResources",{localizableStrings:{NoDataPlaceholder:"No data",SearchPlaceholder:"Search",FilterFavoriteTitle:"Only favorites",RemoveFromFavoriteButtonTitle:"Remove from favorites",AddToFavoriteButtonTitle:"Add to favorites",ClearButtonTitle:"Cancel"}})}],imports:[R.CommonModule,ce.YN,ve.C,be.m_,Ue.mz,Uf.Wh,Ve.wG]})}}class Xb{constructor(e,t){this._value=e,this._property=t}get property(){return this._property}get value(){return this._value}canMatchItem(e){if(!e)return!1;const t=e[this.property],n=null!=t,a=typeof t===this._value.constructor.name.toLowerCase();return n&&a}isItemMatch(e){return this.canMatchItem(e)&&this.isValueMatch(e[this.property])}}class zf extends Xb{static{this.DEFAULT_PROPERTY="caption"}constructor(e,t){super(e,t||zf.DEFAULT_PROPERTY)}isValueMatch(e){const t=e.toLowerCase(),n=this.value.toLowerCase(),a=(0,pu.A)(t.split(" "));return(0,pu.A)(n.split(" ")).every(u=>a.find(p=>p.includes(u)))}}class a1 extends Xb{isValueMatch(e){return e===this.value}}class Dm{_isFilterNotFalsy(e){return e&&null!==e.value&&void 0!==e.value}transform(e,t){if(!e)return[];if(!t)return e;let n=[...e];return t.filter(this._isFilterNotFalsy).forEach(r=>{n=n.filter(u=>r.isItemMatch(u))}),n}static{this.\u0275fac=function(t){return new(t||Dm)}}static{this.\u0275pipe=i.\u0275\u0275definePipe({name:"filter",type:Dm,pure:!0})}}function s1(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",10),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(t);const a=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(a.filteringValue="")}),i.\u0275\u0275element(1,"mat-icon",11),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275elementEnd()}if(2&o){let t;const n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(),i.\u0275\u0275property("title",null==(t=i.\u0275\u0275pipeBind1(2,1,n.localizableStrings$))?null:t.ClearButtonTitle)}}function r1(o,e){1&o&&i.\u0275\u0275element(0,"mat-icon",12)}function o1(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"mat-list-item",16),i.\u0275\u0275listener("click",function(){const a=i.\u0275\u0275restoreView(t).$implicit,r=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(r.onItemSelected(a))}),i.\u0275\u0275elementStart(1,"button",17),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275pipe(3,"async"),i.\u0275\u0275listener("click",function(a){const r=i.\u0275\u0275restoreView(t).$implicit,u=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(u.toggleFavorite(r,a))}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",18),i.\u0275\u0275text(5),i.\u0275\u0275elementEnd()()}if(2&o){let t;const n=e.$implicit,a=i.\u0275\u0275nextContext(3);i.\u0275\u0275classProp("active",n.isActive),i.\u0275\u0275attribute("data-qa",n.caption),i.\u0275\u0275advance(),i.\u0275\u0275property("ngClass",n.isFavorite?a.favoriteCssClass:a.regularCssClass)("title",n.isFavorite?null==(t=i.\u0275\u0275pipeBind1(2,6,a.localizableStrings$))?null:t.RemoveFromFavoriteButtonTitle:null==(t=i.\u0275\u0275pipeBind1(3,8,a.localizableStrings$))?null:t.AddToFavoriteButtonTitle),i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate1(" ",n.caption," ")}}function l1(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"div",14),i.\u0275\u0275template(1,o1,6,10,"mat-list-item",15),i.\u0275\u0275elementEnd()),2&o){const t=i.\u0275\u0275nextContext().ngIf;i.\u0275\u0275advance(),i.\u0275\u0275property("ngForOf",t)}}function c1(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"div",19),i.\u0275\u0275element(1,"div",20),i.\u0275\u0275elementStart(2,"div",21),i.\u0275\u0275text(3),i.\u0275\u0275pipe(4,"async"),i.\u0275\u0275elementEnd()()),2&o){let t;const n=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1(" ",null==(t=i.\u0275\u0275pipeBind1(4,1,n.localizableStrings$))?null:t.NoDataPlaceholder," ")}}function u1(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"mat-action-list"),i.\u0275\u0275template(1,l1,2,1,"div",13)(2,c1,5,3,"ng-template",null,1,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()),2&o){const t=e.ngIf,n=i.\u0275\u0275reference(3);i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",t.length>0)("ngIfElse",n)}}let fc=class ky extends Wt{constructor(e,t,n){super(n),this._resourcesService=e,this._changeDetector=t,this._filters=[],this.regularCssClass="regular",this.favoriteCssClass="favorite",this.filteringValue="",this.displayOnlyFavorites=!1,this.items=[],this.itemSelected=new i.EventEmitter,this.favoriteStateChanged=new i.EventEmitter}get _searchFilter(){return new zf(this.filteringValue)}get _favoritesFilter(){return new a1(this.displayOnlyFavorites,"isFavorite")}get filters(){return this._filters=[this._searchFilter],this.displayOnlyFavorites&&this._filters.push(this._favoritesFilter),this._filters}get localizableStrings$(){return this._resources$.pipe((0,E.T)(e=>e.localizableStrings))}ngOnInit(){this._resources$=this._resourcesService.getResources()}onItemSelected(e){const t={id:e.id};this.itemSelected.emit(t)}toggleFavorite(e,t){t.stopPropagation();const{id:n,isFavorite:a}=e,r={id:n,isFavorite:!a};this.favoriteStateChanged.emit(r)}onFilteringValueChanged(e){this.filteringValue=e,this._changeDetector.detectChanges()}toggleDisplayOnlyFavorites(){this.displayOnlyFavorites=!this.displayOnlyFavorites,this._changeDetector.detectChanges()}static{this.\u0275fac=function(t){return new(t||ky)(i.\u0275\u0275directiveInject(Mo),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(i.Injector))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:ky,selectors:[["ts-filterable-list"]],inputs:{items:"items"},outputs:{itemSelected:"itemSelected",favoriteStateChanged:"favoriteStateChanged"},features:[i.\u0275\u0275InheritDefinitionFeature],decls:14,vars:17,consts:[["searchIcon",""],["noData",""],[1,"filterable-list-container",3,"ngStyle","ngClass"],[1,"filter-input-container"],[1,"display-only-favorites-button-container"],["mat-icon-button","","data-qa","filter-favorite-btn",3,"click","ngClass","title"],["floatLabel","never"],["matInput","","type","text","spellcheck","false","autocomplete","off","data-qa","search-input",3,"input","value","placeholder"],["matSuffix","","mat-icon-button","","aria-label","Clear","data-qa","clear-filter-btn",3,"click",4,"ngIf","ngIfElse"],[4,"ngIf"],["matSuffix","","mat-icon-button","","aria-label","Clear","data-qa","clear-filter-btn",3,"click"],["matSuffix","",1,"clear-icon",3,"title"],["matSuffix","",1,"search-icon"],["class","items-list",4,"ngIf","ngIfElse"],[1,"items-list"],["disableRipple","",3,"active","click",4,"ngFor","ngForOf"],["disableRipple","",3,"click"],["mat-icon-button","","data-qa","favorite-btn",3,"click","ngClass","title"],[1,"item-caption"],["data-qa","blank-slate",1,"blank-slate"],["data-qa","blank-slate-icon",1,"icon"],["data-qa","blank-slate-label",1,"label"]],template:function(t,n){if(1&t){const a=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",2)(1,"div")(2,"div",3)(3,"div",4)(4,"button",5),i.\u0275\u0275pipe(5,"async"),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.toggleDisplayOnlyFavorites())}),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(6,"mat-form-field",6)(7,"input",7),i.\u0275\u0275pipe(8,"async"),i.\u0275\u0275listener("input",function(u){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.onFilteringValueChanged(u.target.value))}),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(9,s1,3,3,"button",8)(10,r1,1,0,"ng-template",null,0,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275template(12,u1,4,2,"mat-action-list",9),i.\u0275\u0275pipe(13,"filter"),i.\u0275\u0275elementEnd()}if(2&t){let a,r;const u=i.\u0275\u0275reference(11);i.\u0275\u0275property("ngStyle",n.styles)("ngClass",n.classes),i.\u0275\u0275attribute("id",n.id),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngClass",n.displayOnlyFavorites?n.favoriteCssClass:n.regularCssClass)("title",null==(a=i.\u0275\u0275pipeBind1(5,10,n.localizableStrings$))?null:a.FilterFavoriteTitle),i.\u0275\u0275advance(3),i.\u0275\u0275property("value",n.filteringValue)("placeholder",null==(r=i.\u0275\u0275pipeBind1(8,12,n.localizableStrings$))?null:r.SearchPlaceholder),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",n.filteringValue)("ngIfElse",u),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind2(13,14,n.items,n.filters))}},dependencies:[R.NgClass,R.NgForOf,R.NgIf,R.NgStyle,ve.Ky,ve.xZ,be.An,Ue.aL,Uf.Qc,Uf.zB,Ve.iV,R.AsyncPipe,Dm],styles:[".filterable-list-container{display:flex;flex-direction:column;height:100%;min-height:inherit;max-height:inherit}.filterable-list-container .display-only-favorites-button-container .mat-icon-button{height:32px;width:32px}.filterable-list-container .items-list{margin-top:8px}.filterable-list-container .blank-slate{display:flex;flex-direction:column;align-items:center}.filterable-list-container .blank-slate .label{color:#757575;font-size:12px;font-family:Open Sans,Regular,sans-serif;margin-top:16px}.filterable-list-container .blank-slate .icon{width:100px;height:104px;margin-top:24px;background:no-repeat url(data:image/svg+xml;base64,PHN2ZyBpZD0iaWNvbl9zZWFyY2hfYmlnIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAiIGhlaWdodD0iMTA0IiB2aWV3Qm94PSIwIDAgMTAwIDEwNCI+DQogIDxnIGlkPSJQYXRoXzc0NTciIGRhdGEtbmFtZT0iUGF0aCA3NDU3IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTcxNC44MTggLTY0OS41MTIpIiBmaWxsPSJyZ2JhKDEwMCwxODQsMjIzLDAuMSkiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCI+DQogICAgPHBhdGggZD0iTSAxNzE4LjYwMTY4NDU3MDMxMyA3NTIuNTA1ODU5Mzc1IEMgMTcyMS41NjE2NDU1MDc4MTMgNzUwLjM3MDQyMjM2MzI4MTMgMTcyNC4zMTk3MDIxNDg0MzggNzQ3LjEzMzIzOTc0NjA5MzggMTcyNi44MzQ1OTQ3MjY1NjMgNzQyLjgzNTgxNTQyOTY4NzUgQyAxNzI5LjQyMTI2NDY0ODQzOCA3MzguNDE1NTg4Mzc4OTA2MyAxNzMwLjc1NTM3MTA5Mzc1IDczNC41MjIwMzM2OTE0MDYzIDE3MzAuODEwOTEzMDg1OTM4IDczNC4zNTgzOTg0Mzc1IEwgMTczMS4wMDY1OTE3OTY4NzUgNzMzLjc4MTkyMTM4NjcxODggTCAxNzMwLjU4NDM1MDU4NTkzOCA3MzMuMzQzMzIyNzUzOTA2MyBDIDE3MjYuMjg1NTIyNDYwOTM4IDcyOC44NzkzMzM0OTYwOTM4IDE3MjIuOTE0MzA2NjQwNjI1IDcyMy43MTg5MzMxMDU0Njg4IDE3MjAuNTY0MzMxMDU0Njg4IDcxOC4wMDUzNzEwOTM3NSBDIDE3MTguMTI5NTE2NjAxNTYzIDcxMi4wODU1NzEyODkwNjI1IDE3MTYuODk1MDE5NTMxMjUgNzA1LjgwNzY3ODIyMjY1NjMgMTcxNi44OTUwMTk1MzEyNSA2OTkuMzQ2MDA4MzAwNzgxMyBDIDE3MTYuODk1MDE5NTMxMjUgNjkyLjc1MTk1MzEyNSAxNzE4LjE3NjUxMzY3MTg3NSA2ODYuMzU1NzczOTI1NzgxMyAxNzIwLjcwMzczNTM1MTU2MyA2ODAuMzM1MjY2MTEzMjgxMyBDIDE3MjMuMTQ0ODk3NDYwOTM4IDY3NC41MTk5NTg0OTYwOTM4IDE3MjYuNjM5NzcwNTA3ODEzIDY2OS4yOTczMDIyNDYwOTM4IDE3MzEuMDkxMTg2NTIzNDM4IDY2NC44MTIzMTY4OTQ1MzEzIEMgMTczNS41NDIxMTQyNTc4MTMgNjYwLjMyNzgxOTgyNDIxODggMTc0MC43MjQ4NTM1MTU2MjUgNjU2LjgwNzEyODkwNjI1IDE3NDYuNDk1MzYxMzI4MTI1IDY1NC4zNDgwODM0OTYwOTM4IEMgMTc1Mi40Njg3NSA2NTEuODAyNjczMzM5ODQzOCAxNzU4LjgxNDY5NzI2NTYyNSA2NTAuNTEyMDIzOTI1NzgxMyAxNzY1LjM1NzA1NTY2NDA2MyA2NTAuNTEyMDIzOTI1NzgxMyBDIDE3NzEuODk5MTY5OTIxODc1IDY1MC41MTIwMjM5MjU3ODEzIDE3NzguMjQ0ODczMDQ2ODc1IDY1MS44MDI2NzMzMzk4NDM4IDE3ODQuMjE4MjYxNzE4NzUgNjU0LjM0ODA4MzQ5NjA5MzggQyAxNzg5Ljk4ODc2OTUzMTI1IDY1Ni44MDcxMjg5MDYyNSAxNzk1LjE3MTUwODc4OTA2MyA2NjAuMzI3ODE5ODI0MjE4OCAxNzk5LjYyMjU1ODU5Mzc1IDY2NC44MTIzMTY4OTQ1MzEzIEMgMTgwNC4wNzM5NzQ2MDkzNzUgNjY5LjI5NzM2MzI4MTI1IDE4MDcuNTY4ODQ3NjU2MjUgNjc0LjUyMDAxOTUzMTI1IDE4MTAuMDEwMTMxODM1OTM4IDY4MC4zMzUyNjYxMTMyODEzIEMgMTgxMi41Mzc0NzU1ODU5MzggNjg2LjM1NTgzNDk2MDkzNzUgMTgxMy44MTg5Njk3MjY1NjMgNjkyLjc1MTk1MzEyNSAxODEzLjgxODk2OTcyNjU2MyA2OTkuMzQ2MDA4MzAwNzgxMyBDIDE4MTMuODE4OTY5NzI2NTYzIDcwNS45Mzk4MTkzMzU5Mzc1IDE4MTIuNTM3NDc1NTg1OTM4IDcxMi4zMzU3NTQzOTQ1MzEzIDE4MTAuMDEwMTMxODM1OTM4IDcxOC4zNTYxNDAxMzY3MTg4IEMgMTgwNy41Njg4NDc2NTYyNSA3MjQuMTcxMjY0NjQ4NDM3NSAxODA0LjA3Mzk3NDYwOTM3NSA3MjkuMzkzODU5ODYzMjgxMyAxNzk5LjYyMjU1ODU5Mzc1IDczMy44Nzg3ODQxNzk2ODc1IEMgMTc5NS4xNzE1MDg3ODkwNjMgNzM4LjM2MzI4MTI1IDE3ODkuOTg4NzY5NTMxMjUgNzQxLjg4MzkxMTEzMjgxMjUgMTc4NC4yMTgyNjE3MTg3NSA3NDQuMzQyOTU2NTQyOTY4OCBDIDE3NzguMjQ0ODczMDQ2ODc1IDc0Ni44ODgzNjY2OTkyMTg4IDE3NzEuODk5MDQ3ODUxNTYzIDc0OC4xNzkwMTYxMTMyODEzIDE3NjUuMzU3MDU1NjY0MDYzIDc0OC4xNzkwMTYxMTMyODEzIEMgMTc1OS42MDc1NDM5NDUzMTMgNzQ4LjE3OTAxNjExMzI4MTMgMTc1My45Nzk4NTgzOTg0MzggNzQ3LjE3MzUyMjk0OTIxODggMTc0OC42MzA2MTUyMzQzNzUgNzQ1LjE5MDM2ODY1MjM0MzggTCAxNzQ4LjA3MDQzNDU3MDMxMyA3NDQuOTgyNjY2MDE1NjI1IEwgMTc0Ny42MjIwNzAzMTI1IDc0NS4zNzc1MDI0NDE0MDYzIEMgMTc0Ny4yODQ3OTAwMzkwNjMgNzQ1LjY3NDQ5OTUxMTcxODggMTc0Ni45NDcxNDM1NTQ2ODggNzQ1LjkyMTgxMzk2NDg0MzggMTc0Ni41NTkzMjYxNzE4NzUgNzQ2LjE1NTgyMjc1MzkwNjMgQyAxNzM3LjA4NTQ0OTIxODc1IDc1MS44ODMxNzg3MTA5Mzc1IDE3MjkuNjYxNzQzMTY0MDYzIDc1Mi40NDk4MjkxMDE1NjI1IDE3MTguNjAxNjg0NTcwMzEzIDc1Mi41MDU4NTkzNzUgWiIgc3Ryb2tlPSJub25lIi8+DQogICAgPHBhdGggZD0iTSAxNzY1LjM1NzA1NTY2NDA2MyA2NTEuNTEyMDIzOTI1NzgxMyBDIDE3NTguOTUwMTk1MzEyNSA2NTEuNTEyMDIzOTI1NzgxMyAxNzUyLjczNjIwNjA1NDY4OCA2NTIuNzc1NzU2ODM1OTM3NSAxNzQ2Ljg4NzQ1MTE3MTg3NSA2NTUuMjY4MDY2NDA2MjUgQyAxNzQxLjIzNjIwNjA1NDY4OCA2NTcuNjc2MjA4NDk2MDkzOCAxNzM2LjE2MDQwMDM5MDYyNSA2NjEuMTI0Mzg5NjQ4NDM3NSAxNzMxLjgwMDkwMzMyMDMxMyA2NjUuNTE2Nzg0NjY3OTY4OCBDIDE3MjcuNDQwNDI5Njg3NSA2NjkuOTEwMTU2MjUgMTcyNC4wMTY5Njc3NzM0MzggNjc1LjAyNjA2MjAxMTcxODggMTcyMS42MjU4NTQ0OTIxODggNjgwLjcyMjI5MDAzOTA2MjUgQyAxNzE5LjE1MDI2ODU1NDY4OCA2ODYuNjE5NjI4OTA2MjUgMTcxNy44OTUwMTk1MzEyNSA2OTIuODg1NTU5MDgyMDMxMyAxNzE3Ljg5NTAxOTUzMTI1IDY5OS4zNDYwMDgzMDA3ODEzIEMgMTcxNy44OTUwMTk1MzEyNSA3MDUuNjc2NTEzNjcxODc1IDE3MTkuMTA0MjQ4MDQ2ODc1IDcxMS44MjY0NzcwNTA3ODEzIDE3MjEuNDg5MTM1NzQyMTg4IDcxNy42MjUgQyAxNzIzLjc5MTAxNTYyNSA3MjMuMjIxNjc5Njg3NSAxNzI3LjA5MzM4Mzc4OTA2MyA3MjguMjc2NjcyMzYzMjgxMyAxNzMxLjMwNDU2NTQyOTY4OCA3MzIuNjQ5NjU4MjAzMTI1IEwgMTczMi4xNDkyOTE5OTIxODggNzMzLjUyNjc5NDQzMzU5MzggTCAxNzMxLjc1NzgxMjUgNzM0LjY3OTg3MDYwNTQ2ODggQyAxNzMxLjU3OTIyMzYzMjgxMyA3MzUuMjA2MDU0Njg3NSAxNzI4LjEyNDc1NTg1OTM3NSA3NDUuMTg4OTY0ODQzNzUgMTcyMS4zOTczMzg4NjcxODggNzUxLjQ3NjY4NDU3MDMxMjUgQyAxNzI1LjExMzY0NzQ2MDkzOCA3NTEuNDEyNTk3NjU2MjUgMTcyOC40MDk1NDU4OTg0MzggNzUxLjIzMjIzODc2OTUzMTMgMTczMS41NzE0MTExMzI4MTMgNzUwLjcyNDc5MjQ4MDQ2ODggQyAxNzM2Ljc0NzMxNDQ1MzEyNSA3NDkuODk0MTA0MDAzOTA2MyAxNzQxLjIwOTk2MDkzNzUgNzQ4LjIyMTE5MTQwNjI1IDE3NDYuMDQyNjAyNTM5MDYzIDc0NS4yOTk2ODI2MTcxODc1IEMgMTc0Ni4zNzgwNTE3NTc4MTMgNzQ1LjA5NzI5MDAzOTA2MjUgMTc0Ni42Njk5MjE4NzUgNzQ0Ljg4MzU0NDkyMTg3NSAxNzQ2Ljk2MTA1OTU3MDMxMyA3NDQuNjI3MDc1MTk1MzEyNSBMIDE3NDcuODU3Nzg4MDg1OTM4IDc0My44MzczNDEzMDg1OTM4IEwgMTc0OC45NzgxNDk0MTQwNjMgNzQ0LjI1MjY4NTU0Njg3NSBDIDE3NTQuMjE1ODIwMzEyNSA3NDYuMTk0NDU4MDA3ODEyNSAxNzU5LjcyNjU2MjUgNzQ3LjE3OTAxNjExMzI4MTMgMTc2NS4zNTcwNTU2NjQwNjMgNzQ3LjE3OTAxNjExMzI4MTMgQyAxNzcxLjc2MzY3MTg3NSA3NDcuMTc5MDE2MTEzMjgxMyAxNzc3Ljk3NzUzOTA2MjUgNzQ1LjkxNTI4MzIwMzEyNSAxNzgzLjgyNjE3MTg3NSA3NDMuNDIyOTczNjMyODEyNSBDIDE3ODkuNDc3Mjk0OTIxODc1IDc0MS4wMTQ4MzE1NDI5Njg4IDE3OTQuNTUzMjIyNjU2MjUgNzM3LjU2NjcxMTQyNTc4MTMgMTc5OC45MTI3MTk3MjY1NjMgNzMzLjE3NDMxNjQwNjI1IEMgMTgwMy4yNzMzMTU0Mjk2ODggNzI4Ljc4MTAwNTg1OTM3NSAxODA2LjY5Njc3NzM0Mzc1IDcyMy42NjUyMjIxNjc5Njg4IDE4MDkuMDg4MDEyNjk1MzEzIDcxNy45NjkxMTYyMTA5Mzc1IEMgMTgxMS41NjM3MjA3MDMxMjUgNzEyLjA3MTg5OTQxNDA2MjUgMTgxMi44MTg5Njk3MjY1NjMgNzA1LjgwNjE1MjM0Mzc1IDE4MTIuODE4OTY5NzI2NTYzIDY5OS4zNDYwMDgzMDA3ODEzIEMgMTgxMi44MTg5Njk3MjY1NjMgNjkyLjg4NTU1OTA4MjAzMTMgMTgxMS41NjM3MjA3MDMxMjUgNjg2LjYxOTY4OTk0MTQwNjMgMTgwOS4wODgwMTI2OTUzMTMgNjgwLjcyMjI5MDAzOTA2MjUgQyAxODA2LjY5Njc3NzM0Mzc1IDY3NS4wMjYxMjMwNDY4NzUgMTgwMy4yNzMzMTU0Mjk2ODggNjY5LjkxMDIxNzI4NTE1NjMgMTc5OC45MTI3MTk3MjY1NjMgNjY1LjUxNjc4NDY2Nzk2ODggQyAxNzk0LjU1MzIyMjY1NjI1IDY2MS4xMjQzODk2NDg0Mzc1IDE3ODkuNDc3Mjk0OTIxODc1IDY1Ny42NzYyMDg0OTYwOTM4IDE3ODMuODI2MTcxODc1IDY1NS4yNjgwNjY0MDYyNSBDIDE3NzcuOTc3NTM5MDYyNSA2NTIuNzc1NzU2ODM1OTM3NSAxNzcxLjc2MzY3MTg3NSA2NTEuNTEyMDIzOTI1NzgxMyAxNzY1LjM1NzA1NTY2NDA2MyA2NTEuNTEyMDIzOTI1NzgxMyBNIDE3NjUuMzU3MDU1NjY0MDYzIDY0OS41MTIwMjM5MjU3ODEzIEMgMTc5Mi42NzUwNDg4MjgxMjUgNjQ5LjUxMjAyMzkyNTc4MTMgMTgxNC44MTg5Njk3MjY1NjMgNjcxLjgyMjk5ODA0Njg3NSAxODE0LjgxODk2OTcyNjU2MyA2OTkuMzQ2MDA4MzAwNzgxMyBDIDE4MTQuODE4OTY5NzI2NTYzIDcyNi44Njc5ODA5NTcwMzEzIDE3OTIuNjc1MDQ4ODI4MTI1IDc0OS4xNzkwMTYxMTMyODEzIDE3NjUuMzU3MDU1NjY0MDYzIDc0OS4xNzkwMTYxMTMyODEzIEMgMTc1OS4zNTQ5ODA0Njg3NSA3NDkuMTc5MDE2MTEzMjgxMyAxNzUzLjYwNDk4MDQ2ODc1IDc0OC4xMDEwMTMxODM1OTM4IDE3NDguMjgyOTU4OTg0Mzc1IDc0Ni4xMjc5OTA3MjI2NTYzIEMgMTc0Ny45NDc5OTgwNDY4NzUgNzQ2LjQyMjk3MzYzMjgxMjUgMTc0Ny41NjQ5NDE0MDYyNSA3NDYuNzE2OTc5OTgwNDY4OCAxNzQ3LjA3NjA0OTgwNDY4OCA3NDcuMDEyMDIzOTI1NzgxMyBDIDE3MzYuMzIzOTc0NjA5Mzc1IDc1My41MTIwMjM5MjU3ODEzIDE3MjguMDc5OTU2MDU0Njg4IDc1My41MTIwMjM5MjU3ODEzIDE3MTQuODE4OTY5NzI2NTYzIDc1My41MTIwMjM5MjU3ODEzIEMgMTcyNC41ODg5ODkyNTc4MTMgNzQ5LjM5Njk3MjY1NjI1IDE3MjkuNzc0MDQ3ODUxNTYzIDczNC4zMDIwMDE5NTMxMjUgMTcyOS44NjQwMTM2NzE4NzUgNzM0LjAzNjk4NzMwNDY4NzUgQyAxNzIxLjIyMzk5OTAyMzQzOCA3MjUuMDY1MDAyNDQxNDA2MyAxNzE1Ljg5NTAxOTUzMTI1IDcxMi44MzU5OTg1MzUxNTYzIDE3MTUuODk1MDE5NTMxMjUgNjk5LjM0NjAwODMwMDc4MTMgQyAxNzE1Ljg5NTAxOTUzMTI1IDY3MS44MjI5OTgwNDY4NzUgMTczOC4wMzc5NjM4NjcxODggNjQ5LjUxMjAyMzkyNTc4MTMgMTc2NS4zNTcwNTU2NjQwNjMgNjQ5LjUxMjAyMzkyNTc4MTMgWiIgc3Ryb2tlPSJub25lIiBmaWxsPSIjNjRiOGRmIi8+DQogIDwvZz4NCiAgPGcgaWQ9Ikdyb3VwXzc3NjAiIGRhdGEtbmFtZT0iR3JvdXAgNzc2MCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE3MTQuODE4IC02NDkuNTEyKSI+DQogICAgPGNpcmNsZSBpZD0iRWxsaXBzZV8xMzM2IiBkYXRhLW5hbWU9IkVsbGlwc2UgMTMzNiIgY3g9IjEyLjI1IiBjeT0iMTIuMjUiIHI9IjEyLjI1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNzQ4LjA2OSA2ODIuMDQyKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNjRiOGRmIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iMiIvPg0KICAgIDxsaW5lIGlkPSJMaW5lXzUxMyIgZGF0YS1uYW1lPSJMaW5lIDUxMyIgeDE9IjEyLjQ2MyIgeTE9IjEyLjQ2MyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTc2OS4xMDYgNzAyLjgyOSkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzY0YjhkZiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjIiLz4NCiAgPC9nPg0KPC9zdmc+DQo=);background-position:center}.filterable-list-container .mat-icon-button{background-color:transparent}.filterable-list-container .mat-icon-button.favorite{background:no-repeat url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij48ZGVmcz48c3R5bGU+LmF7ZmlsbDojZmZiNzRkO30uYntmaWxsOm5vbmU7fTwvc3R5bGU+PC9kZWZzPjxwYXRoIGNsYXNzPSJhIiBkPSJNOC41LDEuMWwyLjMsNC42NjcsNS4yLjcxLTMuNywzLjY1Mi44LDQuOTcxTDguNSwxMi43NjcsMy45LDE1LjFsLjktNC45NzFMMSw2LjQ3N2w1LjItLjcxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMSAtMC4xKSIvPjxyZWN0IGNsYXNzPSJiIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiLz48L3N2Zz4=);background-position:center}.filterable-list-container .mat-icon-button.regular{background:no-repeat url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij48ZGVmcz48c3R5bGU+LmF7ZmlsbDojZGJkYmRiO30uYntmaWxsOm5vbmU7fTwvc3R5bGU+PC9kZWZzPjxwYXRoIGNsYXNzPSJhIiBkPSJNOC41LDMuMyw5LjksNi4ybC4yLjUuNS4xLDMuMi40TDExLjYsOS40bC0uNC40LjEuNS41LDMuMUw5LDExLjhsLS41LS4yLS41LjJMNS4yLDEzLjJsLjYtMywuMS0uNS0uNC0uNEwzLjIsNy4xbDMuMS0uNC41LS4xTDcsNi4xLDguNSwzLjNNOC41LDEsNi4yLDUuNywxLDYuNCw0LjgsMTBsLS45LDUsNC42LTIuM0wxMy4xLDE1bC0uOC01TDE2LDYuNGwtNS4yLS43WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEpIi8+PHJlY3QgY2xhc3M9ImIiIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIvPjwvc3ZnPg==);background-position:center}.filterable-list-container .mat-icon-button.regular:hover{background:no-repeat url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4NCjxkZWZzPiA8c3R5bGU+LmF7ZmlsbDojZmZiNzRkO30uYntmaWxsOm5vbmU7fTwvc3R5bGU+PC9kZWZzPg0KPHBhdGggY2xhc3M9ImEiIGQ9Ik04LjUsMy4zLDkuOSw2LjJsLjIuNS41LjEsMy4yLjRMMTEuNiw5LjRsLS40LjQuMS41LjUsMy4xTDksMTEuOGwtLjUtLjItLjUuMkw1LjIsMTMuMmwuNi0zLC4xLS41LS40LS40TDMuMiw3LjFsMy4xLS40LjUtLjFMNyw2LjEsOC41LDMuM004LjUsMSw2LjIsNS43LDEsNi40LDQuOCwxMGwtLjksNSw0LjYtMi4zTDEzLjEsMTVsLS44LTVMMTYsNi40bC01LjItLjdaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMSkiLz4NCjxyZWN0IGNsYXNzPSJiIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiLz48L3N2Zz4=);background-position:center}.filter-input-container{display:flex;flex-direction:row;margin-right:10px;padding-left:6px}.filter-input-container .mat-form-field{font-size:13px;width:100%}.filter-input-container .mat-form-field input{font-family:Open Sans,Regular,sans-serif;color:#444}.filter-input-container .mat-form-field .mat-input-element{vertical-align:middle}.filter-input-container .mat-form-field .mat-form-field-ripple{top:1px;height:1px;background:#006ce0}.filter-input-container .mat-form-field .mat-form-field-underline{border-bottom:1px #c8c8c8 solid;background-color:transparent;margin-top:3px}.filter-input-container .mat-form-field .mat-form-field-wrapper{padding-top:5px;margin-bottom:-1.25em}.filter-input-container .mat-form-field .mat-form-field-empty.mat-form-field-label{padding-top:2px;color:#999}.filter-input-container .mat-form-field .mat-form-field-infix{border-top:none}.filter-input-container .mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button,.filter-input-container .mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:18px;height:18px;margin-right:8px}.filter-input-container .mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{color:#999;vertical-align:middle}.filter-input-container .mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon.search-icon{background:no-repeat url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTYgMTYiPjxnIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzgwOTViMyIgc3Ryb2tlLXdpZHRoPSIxLjIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCI+PGNpcmNsZSBjeD0iNiIgY3k9IjYiIHI9IjQuNSIvPjxwYXRoIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTSA5LjQsOS40IDE0LDE0Ii8+PC9nPjwvc3ZnPg==)}.filter-input-container .mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon.clear-icon{background:no-repeat url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4NCiAgPGcgaWQ9Ikdyb3VwXzIzNTUiIGRhdGEtbmFtZT0iR3JvdXAgMjM1NSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTk0MyAtMjEzNCkiPg0KICAgIDxsaW5lIGlkPSJMaW5lXzE0NiIgZGF0YS1uYW1lPSJMaW5lIDE0NiIgeTE9IjEwIiB4Mj0iMTAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDk0Ni41IDIxMzcuNSkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzc1NzU3NSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjEiLz4NCiAgICA8bGluZSBpZD0iTGluZV8xNDciIGRhdGEtbmFtZT0iTGluZSAxNDciIHgyPSIxMCIgeTI9IjEwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5NDYuNSAyMTM3LjUpIiBmaWxsPSJub25lIiBzdHJva2U9IiM3NTc1NzUiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIxIi8+DQogICAgPHJlY3QgaWQ9IlJlY3RhbmdsZV8xMDkyIiBkYXRhLW5hbWU9IlJlY3RhbmdsZSAxMDkyIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDk0MyAyMTM0KSIgZmlsbD0ibm9uZSIvPg0KICA8L2c+DQo8L3N2Zz4NCg==)}.mat-list.mat-list-base.mat-action-list{padding-top:0;overflow:auto}.mat-list.mat-list-base.mat-action-list::-webkit-scrollbar{width:4px}.mat-list.mat-list-base.mat-action-list::-webkit-scrollbar-track{background:transparent;border:4px solid transparent;background-clip:content-box}.mat-list.mat-list-base.mat-action-list::-webkit-scrollbar-thumb{background:#999;border-radius:4px}.mat-list.mat-list-base.mat-action-list .mat-list-item{font-size:13px;font-family:Open Sans,Regular,sans-serif;color:#444;height:33px;padding-left:6px;box-sizing:border-box}.mat-list.mat-list-base.mat-action-list .mat-list-item.active{background-color:#e5ebfb}.mat-list.mat-list-base.mat-action-list .mat-list-item:hover{background:#f2f5ff}.mat-list.mat-list-base.mat-action-list .mat-list-item .mat-list-item-content{padding-left:8px}.mat-list.mat-list-base.mat-action-list .mat-list-item .mat-list-item-content .mat-icon-button{height:16px;width:16px}.mat-list.mat-list-base.mat-action-list .mat-list-item .mat-list-item-content .item-caption{padding-left:8px;display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}\n"],encapsulation:3})}};(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",Array)],fc.prototype,"items",void 0),(0,I.Cg)([(0,c.CrtOutput)(),(0,I.Sn)("design:type",i.EventEmitter)],fc.prototype,"itemSelected",void 0),(0,I.Cg)([(0,c.CrtOutput)(),(0,I.Sn)("design:type",i.EventEmitter)],fc.prototype,"favoriteStateChanged",void 0),fc=(0,I.Cg)([(0,c.CrtViewElement)({type:"crt.FilterableList",reuseStrategy:c.ViewElementReuseStrategy.Reuse}),(0,I.Sn)("design:paramtypes",[Mo,i.ChangeDetectorRef,i.Injector])],fc);const d1=["dataViewWrapper"],p1=["tableNgContainer"];function m1(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"div",10),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&o){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(t.additionalText)}}function h1(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"div",11)(1,"a",12),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()()),2&o){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(),i.\u0275\u0275property("href",t.helpLinkUrl.url,i.\u0275\u0275sanitizeUrl),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(t.helpLinkUrl.caption)}}function g1(o,e){if(1&o&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"button",13),i.\u0275\u0275text(2),i.\u0275\u0275pipe(3,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"button",14),i.\u0275\u0275text(5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&o){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(),i.\u0275\u0275property("mat-dialog-close",!1),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(3,4,"TableDialog.Cancel")," "),i.\u0275\u0275advance(2),i.\u0275\u0275property("mat-dialog-close",!0),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(t.continueButtonCaption)}}function f1(o,e){1&o&&(i.\u0275\u0275elementStart(0,"button",13),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"translate"),i.\u0275\u0275elementEnd()),2&o&&(i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(2,1,"TableDialog.Close")," "))}class Hf{constructor(e,t){this.dialogData=e,this.scrollToBottomObserverFactory=t,this.title="",this.sortColumn="",this.additionalText="",this.continueButtonCaption=""}_renderTableComponent(e){var t=this;return(0,A.A)(function*(){yield Promise.resolve().then(b.bind(b,25612)).then(n=>{const a=n.TableComponent;t._table=e.createComponent(a).instance,t._table.dataSchema=t.dataSchema,t._table.dataSource=t.tableDataSource,t._table.sortColumn=t.sortColumn,t._table.headerSticky=!0})})()}_initScrollToBottomObserver(){const e=this.dataViewWrapper.nativeElement;this._scrollToBottomObserver=this.scrollToBottomObserverFactory.createObserver(e,this._loadNextData.bind(this))}_loadNextData(){this.tableDataSource&&this.tableDataSource.loadNext()}ngAfterViewInit(){this._initScrollToBottomObserver()}ngOnInit(){var e=this;return(0,A.A)(function*(){!e.dialogData||!e.dialogData.data||(e.tableDataSource=new xf(e.dialogData.data),e.dataSchema=e.dialogData.dataSchema,e.title=e.dialogData.title||e.title,e.sortColumn=e.dialogData.sortColumn,e.additionalText=e.dialogData.additionalText,e.helpLinkUrl=e.dialogData.helpLinkUrl,e.continueButtonCaption=e.dialogData.continueButtonCaption,yield e._renderTableComponent(e.tableNgContainer))})()}ngOnDestroy(){this._scrollToBottomObserver&&this._scrollToBottomObserver.destroy()}static{this.\u0275fac=function(t){return new(t||Hf)(i.\u0275\u0275directiveInject(he.xh),i.\u0275\u0275directiveInject(_.Stw))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:Hf,selectors:[["ts-table-dialog"]],viewQuery:function(t,n){if(1&t&&(i.\u0275\u0275viewQuery(d1,7),i.\u0275\u0275viewQuery(p1,7,i.ViewContainerRef)),2&t){let a;i.\u0275\u0275queryRefresh(a=i.\u0275\u0275loadQuery())&&(n.dataViewWrapper=a.first),i.\u0275\u0275queryRefresh(a=i.\u0275\u0275loadQuery())&&(n.tableNgContainer=a.first)}},decls:14,vars:5,consts:[["dataViewWrapper",""],["tableNgContainer",""],["withoutContinue",""],["mat-dialog-title",""],[1,"dialog-content-wrapper"],["class","table-dialog-additional-text",4,"ngIf"],["class","table-dialog-help-link-url",4,"ngIf"],["mat-dialog-content","",1,"data-table"],["mat-dialog-actions",""],[4,"ngIf","ngIfElse"],[1,"table-dialog-additional-text"],[1,"table-dialog-help-link-url"],["target","_blank","rel","noopener noreferrer",3,"href"],["mat-flat-button","","color","primary","cdkFocusInitial","",3,"mat-dialog-close"],["mat-button","",3,"mat-dialog-close"]],template:function(t,n){if(1&t&&(i.\u0275\u0275elementStart(0,"div",3)(1,"span"),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(3,"div",4),i.\u0275\u0275template(4,m1,2,1,"div",5)(5,h1,3,2,"div",6),i.\u0275\u0275elementStart(6,"div",7,0),i.\u0275\u0275elementContainer(8,null,1),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"div",8),i.\u0275\u0275template(11,g1,6,6,"ng-container",9)(12,f1,3,3,"ng-template",null,2,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()()),2&t){const a=i.\u0275\u0275reference(13);i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(n.title),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",n.additionalText),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",n.helpLinkUrl),i.\u0275\u0275advance(6),i.\u0275\u0275property("ngIf",n.continueButtonCaption)("ngIfElse",a)}},dependencies:[R.NgIf,Ve.iV,he.kQ,he.KI,he.PQ,he.$t,v.D9],styles:["ts-table-dialog{min-width:850px;max-width:900px;margin:0 8px!important;padding:0}ts-table-dialog .table-dialog-additional-text{margin-bottom:4px;display:inline}ts-table-dialog .table-dialog-help-link-url{display:inline;cursor:pointer}ts-table-dialog .data-table{overflow-y:auto!important;max-height:330px;margin:0;padding:0}ts-table-dialog .data-table table{padding-top:0}ts-table-dialog [mat-dialog-actions]{display:flex;flex-direction:row;justify-content:flex-end;margin:20px 0 10px!important}\n"],encapsulation:2})}}function y1(o,e){if(1&o&&i.\u0275\u0275element(0,"mat-icon",1),2&o){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("svgIcon",t.svgIconName)}}Be.Pd;class Mm extends Be.XI{get svgIconName(){return{[_.GoH.Error]:this.errorIconName,[_.GoH.Warning]:this.warningIconName,[_.GoH.Information]:""}[this.getValue()]??""}constructor(e,t){super(),this._matIconRegistry=e,this._domSanitizer=t,this.errorIconName="error-icon",this.warningIconName="warning-icon",this._registerIcons()}_registerIcons(){[this.warningIconName,this.errorIconName].forEach(e=>{this._matIconRegistry.addSvgIconLiteral(e,this._domSanitizer.bypassSecurityTrustHtml(b(48422)("./"+e+".svg")))})}static{this.\u0275fac=function(t){return new(t||Mm)(i.\u0275\u0275directiveInject(be.tp),i.\u0275\u0275directiveInject(x.DomSanitizer))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:Mm,selectors:[["ts-error-type-icon-table-cell"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[["class","error-type-icon",3,"svgIcon",4,"ngIf"],[1,"error-type-icon",3,"svgIcon"]],template:function(t,n){1&t&&i.\u0275\u0275template(0,y1,1,1,"mat-icon",0),2&t&&i.\u0275\u0275property("ngIf",!n.isEmpty()&&n.getValue())},dependencies:[R.NgIf,be.An],styles:[".error-type-icon[_ngcontent-%COMP%]{height:16px;width:16px}"]})}}function _1(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"mat-checkbox",1),i.\u0275\u0275listener("change",function(a){i.\u0275\u0275restoreView(t);const r=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(r.setValue(a.checked))}),i.\u0275\u0275elementEnd()}if(2&o){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("disabled",t.isDisabled())("checked",t.getValue())("matTooltip",t.getTooltipText())}}Be.Pd;class pd extends Be.Py{isDisabled(){const e=this.columnDataSchema.disabled;return"function"==typeof e?e(this.record):e}getTooltipText(){const e=this.columnDataSchema.tooltip;return"function"==typeof e?e(this.record):e}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(pd)))(n||pd)}})()}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:pd,selectors:[["ts-checkbox-table-cell"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[3,"disabled","checked","matTooltip","change",4,"ngIf"],[3,"change","disabled","checked","matTooltip"]],template:function(t,n){1&t&&i.\u0275\u0275template(0,_1,1,3,"mat-checkbox",0),2&t&&i.\u0275\u0275property("ngIf",!n.isEmpty())},dependencies:[R.NgIf,mt.NZ,oa.PD],encapsulation:2})}}class $f{static{this.\u0275fac=function(t){return new(t||$f)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:$f})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[R.CommonModule,ce.YN]})}}var C1=b(62798);class wm{constructor(e){this._cdr=e,this._delay=2e3,this._stop=new h.Subject,this._start=new h.Subject,this._datetime=yr()(),this._timer$=(0,h.timer)(0,this._delay).pipe((0,_e.Q)(this._stop),(0,C1.Y)(()=>this._start))}set datetime(e){this._stop.next(),this._datetime=yr()(e),this._start.next()}static _getDuration(e){const t=yr()();return e?yr().duration(e.diff(t)):yr().duration({hour:0,minute:0,second:0})}_getTimerSubscription$(){return this._timer$.subscribe(()=>{if(this.value="",this._datetime.isValid()){const e=wm._getDuration(this._datetime);this.value=`${e.humanize(!0)}`}this._cdr.detectChanges()})}ngOnDestroy(){this._stop.next(null),this._stop.complete(),this._timerSubscription$.unsubscribe()}ngOnInit(){this._timerSubscription$=this._getTimerSubscription$()}static{this.\u0275fac=function(t){return new(t||wm)(i.\u0275\u0275directiveInject(i.ChangeDetectorRef))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:wm,selectors:[["ts-time-ago"]],inputs:{datetime:"datetime"},decls:2,vars:1,consts:[[1,"time-ago"]],template:function(t,n){1&t&&(i.\u0275\u0275elementStart(0,"span",0),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&t&&(i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(n.value))},changeDetection:0})}}const b1=(o,e)=>({"date-picker-filter-container":o,"date-picker-filter-container-rtl":e}),S1=o=>({"clear-date-icon-wrap":!0,"icon-hidden":o});class qf{constructor(e,t){this._directionality=t,this._defaultCulture="en-US",this.dateChange=new i.EventEmitter,this.cultureCode=e&&e.cultureInfo&&e.cultureInfo.sysCultureName||this._defaultCulture}set selectedDate(e){this._selectedDate=e}get selectedDate(){return this._selectedDate}updateFormattedValue(e){this.formattedDate=e&&e.toLocaleDateString(this.cultureCode)}isRtl(){return this._directionality&&"rtl"===this._directionality.value}clearDate(){this.selectedDate=null,this.clearIconVisible=!1,this.onDateChange()}showClearIcon(){this.clearIconVisible=!0}onDateChange(){const e=this.selectedDate;e&&this.showClearIcon(),this.updateFormattedValue(e),this.dateChange.emit(e)}static{this.\u0275fac=function(t){return new(t||qf)(i.\u0275\u0275directiveInject(_.oqB),i.\u0275\u0275directiveInject(Mt.dS))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:qf,selectors:[["ts-date-picker-filter"]],inputs:{selectedDate:"selectedDate",datePickerFilterFunction:"datePickerFilterFunction"},outputs:{dateChange:"dateChange"},decls:11,vars:13,consts:[["picker",""],[1,"date-picker-filter-component"],[3,"ngClass"],["matSuffix","",1,"datepicker-toggle",3,"for"],["svgIcon","datetime-picker-calendar-icon","matDatepickerToggleIcon","",1,"date-picker-calendar-icon"],["disabled","false","ngDefaultControl","",3,"restoreFocus"],[1,"date-time-buttom-marker"],["ngDefaultControl","",1,"date-time-value"],["ngDefaultControl","","disabled","",3,"dateInput","ngModelChange","dateChange","matDatepickerFilter","matDatepicker","ngModel"],[1,"close-icon",3,"click","ngClass"]],template:function(t,n){if(1&t){const a=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",1)(1,"div",2)(2,"mat-datepicker-toggle",3),i.\u0275\u0275element(3,"mat-icon",4),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(4,"mat-datepicker",5,0)(6,"span",6),i.\u0275\u0275elementStart(7,"span",7),i.\u0275\u0275text(8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"input",8),i.\u0275\u0275listener("dateInput",function(){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.showClearIcon())}),i.\u0275\u0275twoWayListener("ngModelChange",function(u){return i.\u0275\u0275restoreView(a),i.\u0275\u0275twoWayBindingSet(n.selectedDate,u)||(n.selectedDate=u),i.\u0275\u0275resetView(u)}),i.\u0275\u0275listener("dateChange",function(){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.onDateChange())}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"span",9),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.clearDate())}),i.\u0275\u0275elementEnd()()()}if(2&t){const a=i.\u0275\u0275reference(5);i.\u0275\u0275advance(),i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction2(8,b1,!n.isRtl(),n.isRtl())),i.\u0275\u0275advance(),i.\u0275\u0275property("for",a),i.\u0275\u0275advance(2),i.\u0275\u0275property("restoreFocus",!1),i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate(n.formattedDate),i.\u0275\u0275advance(),i.\u0275\u0275property("matDatepickerFilter",n.datePickerFilterFunction)("matDatepicker",a),i.\u0275\u0275twoWayProperty("ngModel",n.selectedDate),i.\u0275\u0275advance(),i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(11,S1,!n.clearIconVisible))}},dependencies:[R.NgClass,ve.xZ,St.Vh,St.bZ,St.bU,St.Wl,be.An,ce.me,ce.BC,ce.vS],styles:['.mat-calendar-body-cell-content.mat-focus-indicator{--palette-primary-500: #f2f5ff}.mat-calendar-body-cell-content.mat-focus-indicator.mat-calendar-body-selected{background-color:#006ce0}.date-picker-filter-component{display:inline-block;max-width:150px}.date-picker-filter-component .date-picker-filter-container{display:flex;align-items:center;position:relative;height:26px}.date-picker-filter-component .date-picker-filter-container .datepicker-toggle .mdc-icon-button{height:30px;width:36px;line-height:20px;color:#006ce0}.date-picker-filter-component .date-picker-filter-container .datepicker-toggle .mat-mdc-button-ripple,.date-picker-filter-component .date-picker-filter-container .datepicker-toggle .mdc-icon-button__ripple{height:40px;width:40px;transform:translate(-4%)}.date-picker-filter-component .date-picker-filter-container input:disabled{border:none;background:none;width:0px}.date-picker-filter-component .date-picker-filter-container .mat-datepicker-toggle{display:inline-block}.date-picker-filter-component .date-picker-filter-container .clear-date-icon-wrap{max-height:15px}.date-picker-filter-component .date-picker-filter-container .clear-date-icon-wrap .mdc-icon-button{height:17px;width:17px;margin-left:3px}.date-picker-filter-component .date-picker-filter-container span{font-size:14px}.date-picker-filter-component .date-picker-filter-container .date-time-buttom-marker{border-top:.32em solid #4d6a98;border-right:.32em solid transparent;border-left:.32em solid transparent;content:"";position:absolute;left:37px;z-index:-1}.date-picker-filter-component .date-picker-filter-container .date-time-value{margin-left:7px}.date-picker-filter-component .date-picker-filter-container .close-icon{margin-top:1px;display:inline-block;width:17px;height:17px;margin-left:0;margin-right:0;background:no-repeat url(data:image/svg+xml;base64,PHN2ZyBpZD0iR3JvdXBfNyIgZGF0YS1uYW1lPSJHcm91cCA3IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4NCiAgPHJlY3QgaWQ9IlJlY3RhbmdsZV83IiBkYXRhLW5hbWU9IlJlY3RhbmdsZSA3IiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiLz4NCiAgPGxpbmUgaWQ9IkxpbmVfNSIgZGF0YS1uYW1lPSJMaW5lIDUiIHkxPSIxMCIgeDI9IjEwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzIDMpIiBmaWxsPSJub25lIiBzdHJva2U9IiM5OTkiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIxIi8+DQogIDxsaW5lIGlkPSJMaW5lXzYiIGRhdGEtbmFtZT0iTGluZSA2IiB4Mj0iMTAiIHkyPSIxMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMyAzKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjOTk5IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iMSIvPg0KPC9zdmc+DQo=);cursor:pointer}.date-picker-filter-component .date-picker-filter-container .close-icon.icon-hidden{display:none}.date-picker-filter-component .date-picker-filter-container-rtl{display:flex;align-items:center;position:relative;height:26px}.date-picker-filter-component .date-picker-filter-container-rtl .datepicker-toggle .mdc-icon-button{height:30px;width:36px;line-height:20px;color:#006ce0}.date-picker-filter-component .date-picker-filter-container-rtl .datepicker-toggle .mat-mdc-button-ripple,.date-picker-filter-component .date-picker-filter-container-rtl .datepicker-toggle .mdc-icon-button__ripple{height:40px;width:40px;transform:translate(-4%)}.date-picker-filter-component .date-picker-filter-container-rtl input:disabled{border:none;background:none;width:0px}.date-picker-filter-component .date-picker-filter-container-rtl .mat-datepicker-toggle{display:inline-block}.date-picker-filter-component .date-picker-filter-container-rtl .clear-date-icon-wrap{max-height:15px}.date-picker-filter-component .date-picker-filter-container-rtl .clear-date-icon-wrap .mdc-icon-button{height:17px;width:17px;margin-right:3px}.date-picker-filter-component .date-picker-filter-container-rtl span{font-size:14px}.date-picker-filter-component .date-picker-filter-container-rtl .date-time-buttom-marker{border-top:.32em solid #4d6a98;border-right:.32em solid transparent;border-left:.32em solid transparent;content:"";position:absolute;right:37px;z-index:-1}.date-picker-filter-component .date-picker-filter-container-rtl .date-time-value{margin-right:7px}.date-picker-filter-component .date-picker-filter-container-rtl .close-icon{margin-top:1px;display:inline-block;width:17px;height:17px;margin-right:0;margin-left:0;background:no-repeat url(data:image/svg+xml;base64,PHN2ZyBpZD0iR3JvdXBfNyIgZGF0YS1uYW1lPSJHcm91cCA3IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4NCiAgPHJlY3QgaWQ9IlJlY3RhbmdsZV83IiBkYXRhLW5hbWU9IlJlY3RhbmdsZSA3IiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiLz4NCiAgPGxpbmUgaWQ9IkxpbmVfNSIgZGF0YS1uYW1lPSJMaW5lIDUiIHkxPSIxMCIgeDI9IjEwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzIDMpIiBmaWxsPSJub25lIiBzdHJva2U9IiM5OTkiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIxIi8+DQogIDxsaW5lIGlkPSJMaW5lXzYiIGRhdGEtbmFtZT0iTGluZSA2IiB4Mj0iMTAiIHkyPSIxMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMyAzKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjOTk5IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iMSIvPg0KPC9zdmc+DQo=);cursor:pointer}.date-picker-filter-component .date-picker-filter-container-rtl .close-icon.icon-hidden{display:none}\n'],encapsulation:2})}}class yc{constructor(e,t){this._matIconRegistry=e,this._domSanitizer=t}registerIcons(){["datetime-picker-calendar-icon"].forEach(t=>{this._matIconRegistry?.addSvgIconLiteral(t,this._domSanitizer?.bypassSecurityTrustHtml(b(20522)("./"+t+".svg")))})}static{this.\u0275fac=function(t){return new(t||yc)(i.\u0275\u0275inject(be.tp),i.\u0275\u0275inject(x.DomSanitizer))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:yc,factory:yc.\u0275fac})}}function v1(o){return o.cultureInfo.sysCultureName}class Wf{constructor(e){this._assetsService=e,this._assetsService.registerIcons()}static{this.\u0275fac=function(t){return new(t||Wf)(i.\u0275\u0275inject(yc))}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:Wf})}static{this.\u0275inj=i.\u0275\u0275defineInjector({providers:[{provide:_t.Ju,useFactory:v1,deps:[_.oqB]},St.X6,yc],imports:[R.CommonModule,ve.C,St.X6,_t.WX,Ue.mz,B.wb,be.m_,ce.YN,F.HttpClientModule,he.eB,ve.C,St.X6]})}}function I1(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"mat-option",9),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&o){const t=e.$implicit;i.\u0275\u0275property("value",t),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(t.caption)}}class Em{get searchKey(){return this._searchKey}set searchKey(e){if(this._searchKey=e,this._selectedColumn){const t=!e;this._changeFilter(t)}}get filteredColumns(){return this._filteredColumns}set entitySchema(e){this._entitySchema=e,this._columns=e.columns.filter(t=>_.PLi.Text.includes(t.dataValueType)||t.dataValueType===c.DataValueType.Lookup||t.dataValueType===c.DataValueType.Guid),this._filteredColumns=this._columns}get selectedColumn(){return this._selectedColumn}constructor(e,t,n,a){this._entitySchemaService=e,this._maskService=t,this._dialogService=n,this._translateService=a,this._destroyed$=new h.Subject,this._searchKey="",this.valueChange=new i.EventEmitter}_buildFilterGroup(e){const t=new c.FilterGroup;t.logicalOperation=c.LogicalOperatorType.And;const n=this._selectedColumn.dataValueType===c.DataValueType.Guid?c.ComparisonType.Equal:c.ComparisonType.Contain,a=this._selectedColumn.dataValueType===c.DataValueType.Guid?this._searchKey?.trim():this._searchKey;return t.addSchemaColumnFilterWithParameter(n,e,a),t}_getFilterColumnPath(){return this._selectedColumn.dataValueType!==c.DataValueType.Lookup?(0,h.of)(this._selectedColumn.name):(this._maskService.showBodyMask(),this._entitySchemaService.getEntitySchemaByUId(this._selectedColumn.referenceSchemaUId).pipe((0,E.T)(e=>{this._maskService.hideBodyMask();const t=e.entitySchema.getPrimaryDisplayColumn()?.name;if(t)return this._selectedColumn.name+"."+t;const n=e.entitySchema.getPrimaryColumn()?.name;return this._selectedColumn.name+"."+n})))}_changeFilter(e=!1){e?this.valueChange.emit(null):this._selectedColumn.dataValueType!==c.DataValueType.Guid||(0,c.isGuid)(this._searchKey?.trim())?this._getFilterColumnPath().pipe((0,_e.Q)(this._destroyed$)).subscribe(t=>{const n=this._buildFilterGroup(t);this.valueChange.emit(n)}):this._dialogService.openInfoDialog(this._translateService.instant("QuickEntityFilter.NonGuidMessage"))}searchColumn(e){e||this.selectColumn(null),e=e.toLocaleLowerCase().trim(),this._filteredColumns=this._columns.filter(t=>t.caption.toLocaleLowerCase().includes(e))}getColumnCaption(e){return e.caption}selectColumn(e){this._selectedColumn=e,e?this._searchKey&&this._changeFilter():this._changeFilter(!0)}ngOnInit(){this._selectedColumn=this._entitySchema?.getPrimaryDisplayColumn()}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}static{this.\u0275fac=function(t){return new(t||Em)(i.\u0275\u0275directiveInject(_.eut),i.\u0275\u0275directiveInject(re.sz),i.\u0275\u0275directiveInject(re.o3),i.\u0275\u0275directiveInject(v.c$))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:Em,selectors:[["ts-quick-entity-filter"]],inputs:{entitySchema:"entitySchema"},outputs:{valueChange:"valueChange"},decls:10,vars:5,consts:[["auto","matAutocomplete"],[1,"select-column-container"],["type","text","matInput","","spellcheck","false",3,"input","matAutocomplete","value"],["matSuffix","",1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],[3,"optionSelected","displayWith"],[3,"value",4,"ngFor","ngForOf"],[1,"search-container"],[3,"valueChange","value"],[3,"value"]],template:function(t,n){if(1&t){const a=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",1)(1,"mat-form-field")(2,"input",2),i.\u0275\u0275listener("input",function(u){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.searchColumn(u.target.value))}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",3),i.\u0275\u0275element(4,"div",4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"mat-autocomplete",5,0),i.\u0275\u0275listener("optionSelected",function(u){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.selectColumn(u.option.value))}),i.\u0275\u0275template(7,I1,2,2,"mat-option",6),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275elementStart(8,"div",7)(9,"ts-search-input",8),i.\u0275\u0275twoWayListener("valueChange",function(u){return i.\u0275\u0275restoreView(a),i.\u0275\u0275twoWayBindingSet(n.searchKey,u)||(n.searchKey=u),i.\u0275\u0275resetView(u)}),i.\u0275\u0275elementEnd()()}if(2&t){const a=i.\u0275\u0275reference(6);i.\u0275\u0275advance(2),i.\u0275\u0275property("matAutocomplete",a)("value",null==n.selectedColumn?null:n.selectedColumn.caption),i.\u0275\u0275advance(3),i.\u0275\u0275property("displayWith",n.getColumnCaption),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",n.filteredColumns),i.\u0275\u0275advance(2),i.\u0275\u0275twoWayProperty("value",n.searchKey)}},dependencies:[R.NgForOf,Xt.G7,Xt.cm,Qu.d1,ve.Ky,ve.xZ,Ue.aL,ed],styles:["ts-quick-entity-filter{display:flex}ts-quick-entity-filter .select-column-container{flex-basis:50%;padding-right:20px}ts-quick-entity-filter .select-column-container .mat-form-field{width:100%!important}ts-quick-entity-filter .search-container{flex-basis:50%}\n"],encapsulation:2})}}function T1(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"div",1),i.\u0275\u0275element(1,"mat-icon",2),i.\u0275\u0275elementEnd()),2&o){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(),i.\u0275\u0275property("svgIcon",t.iconName)}}Be.Pd;class md extends Be.XI{get iconName(){return this.columnDataSchema.iconName}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(md)))(n||md)}})()}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:md,selectors:[["ts-icon-table-cell"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[["class","drag-drop-icon-wrapper","cdkDragHandle","",4,"ngIf"],["cdkDragHandle","",1,"drag-drop-icon-wrapper"],[3,"svgIcon"]],template:function(t,n){1&t&&i.\u0275\u0275template(0,T1,2,1,"div",0),2&t&&i.\u0275\u0275property("ngIf",!n.isEmpty())},dependencies:[R.NgIf,be.An]})}}var xm=b(97591),D1=b(32693);class wo{static{this.\u0275fac=function(t){return new(t||wo)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:wo})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[R.CommonModule,ce.YN,Ve.wG,St.X6,xm.AC,ve.C,be.m_,Ue.mz,D1.EF]})}}class hd{static{this.\u0275fac=function(t){return new(t||hd)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:hd})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[R.CommonModule,ce.YN,wo,Ve.wG,mt.Dy,ve.C,be.m_,Ue.mz,fm]})}}const M1=(o,e)=>({"forecast-hint-content":o,"forecast-hint-content-rtl":e});class Zf{set hintConfig(e){this._hintConfig!==e&&(this._hintConfig=e)}get hintConfig(){return this._hintConfig}get cssClasses(){return this._hintConfig?.cssClasses||this._defaultCssClass}constructor(e){this._directionality=e,this._defaultCssClass="simple-hint"}isRtl(){return"rtl"===this._directionality.value}static{this.\u0275fac=function(t){return new(t||Zf)(i.\u0275\u0275directiveInject(Mt.dS))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:Zf,selectors:[["ts-simple-hint"]],inputs:{hintConfig:"hintConfig"},decls:4,vars:8,consts:[[1,"simple-hint-value",3,"ngClass"]],template:function(t,n){1&t&&(i.\u0275\u0275elementStart(0,"div")(1,"span",0),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(3,"br"),i.\u0275\u0275elementEnd()),2&t&&(i.\u0275\u0275classMap(n.cssClasses),i.\u0275\u0275advance(),i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction2(5,M1,!n.isRtl(),n.isRtl())),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate1(" ",null==n.hintConfig?null:n.hintConfig.displayValue," "))},dependencies:[R.NgClass],styles:['.simple-hint[_ngcontent-%COMP%]{margin:15px 30px;min-width:60px;max-width:300px;display:inline-block;align-items:center;background:#fff;border-top:4px solid;position:relative;min-height:50px;padding:10px;text-align:left;box-shadow:#0000004d 0 0 .6em .02em;-moz-box-shadow:rgba(0,0,0,.3) 0 0 .2em;-webkit-box-shadow:rgba(0,0,0,.3) 0 0 .2em;font-size:13px;border-top-color:#20c964}.simple-hint[_ngcontent-%COMP%]   .simple-hint-content[_ngcontent-%COMP%]{direction:ltr}.simple-hint[_ngcontent-%COMP%]   .simple-hint-content-rtl[_ngcontent-%COMP%]{direction:ltr;text-align:right}.simple-hint[_ngcontent-%COMP%]:before{border-color:transparent transparent #20c964 transparent}.simple-hint[_ngcontent-%COMP%]:after, .simple-hint[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;width:0;height:0;border-style:solid}.simple-hint[_ngcontent-%COMP%]:after{left:calc(50% - 6px);top:-12px;border-color:transparent transparent #fff transparent;border-width:6px}.simple-hint[_ngcontent-%COMP%]:before{left:calc(50% - 7px);top:-17px;border-width:7px}']})}}class Jf{static{this.\u0275fac=function(t){return new(t||Jf)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:Jf})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[R.CommonModule]})}}function w1(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"span",7),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&o){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(t.data.additionalText)}}function E1(o,e){if(1&o&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"button",8),i.\u0275\u0275text(2),i.\u0275\u0275pipe(3,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"button",9),i.\u0275\u0275text(5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&o){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(),i.\u0275\u0275property("mat-dialog-close",!1),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(3,4,"ValidationErrorDialogComponent.Cancel")),i.\u0275\u0275advance(2),i.\u0275\u0275property("mat-dialog-close",!0),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(t.data.continueButtonCaption)}}function x1(o,e){1&o&&(i.\u0275\u0275elementStart(0,"button",8),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"translate"),i.\u0275\u0275elementEnd()),2&o&&(i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(2,1,"ValidationErrorDialogComponent.Close")))}class Yf{constructor(e){this.data=e}static{this.\u0275fac=function(t){return new(t||Yf)(i.\u0275\u0275directiveInject(he.xh))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:Yf,selectors:[["ts-validation-error-dialog"]],decls:11,vars:5,consts:[["withoutContinue",""],["mat-dialog-title",""],["mat-dialog-content",""],["class","validation-dialog-additional-text",4,"ngIf"],[1,"validation-dialog-error"],["mat-dialog-actions",""],[4,"ngIf","ngIfElse"],[1,"validation-dialog-additional-text"],["mat-flat-button","","color","primary","cdkFocusInitial","",3,"mat-dialog-close"],["mat-button","",3,"mat-dialog-close"]],template:function(t,n){if(1&t&&(i.\u0275\u0275elementStart(0,"div",1)(1,"span"),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(3,"div",2),i.\u0275\u0275template(4,w1,2,1,"span",3),i.\u0275\u0275elementStart(5,"span",4),i.\u0275\u0275text(6),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(7,"div",5),i.\u0275\u0275template(8,E1,6,6,"ng-container",6)(9,x1,3,3,"ng-template",null,0,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()),2&t){const a=i.\u0275\u0275reference(10);i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(n.data.title),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",n.data.additionalText),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(n.data.validationError),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",n.data.continueButtonCaption)("ngIfElse",a)}},dependencies:[R.NgIf,Ve.iV,he.kQ,he.KI,he.PQ,he.$t,v.D9],styles:["ts-validation-error-dialog{margin:0!important;padding:0 6px;width:720px}ts-validation-error-dialog [mat-dialog-actions]{float:right}ts-validation-error-dialog [mat-dialog-content] .validation-dialog-error,ts-validation-error-dialog [mat-dialog-content] .validation-dialog-additional-text{white-space:pre-wrap}ts-validation-error-dialog [mat-dialog-content] .validation-dialog-error{font-family:monospace;font-size:13px}\n"],encapsulation:2})}}var A1=b(4659);function Kf(o){if("number"==typeof o)return!0;if("string"==typeof o){const e=Number.parseInt(o);return String(e)===o}return!1}const R1=["container"],eS={Primary:{key:"primary",value:"#FFFFFF"}},tS={alignItems:"stretch"};class At extends Wt{static{this._baseColors=Object.values(eS).map(({key:e,value:t})=>({key:e.toLowerCase(),value:t.toLowerCase()}))}set container(e){this._container=e}get container(){return this.featureValues.DisableRemoveDuplicateIDs?this._container:this.elementRef}get isResponsive(){return this.responsiveWidth<Number.MAX_VALUE}get isResponsiveWidth(){return this.elementResponsiveWidth?this.elementWidth<this.elementResponsiveWidth:this.width<this.responsiveWidth}get responsiveWidth(){return 395*this.window.devicePixelRatio}set responsiveWidth(e){throw new Error("responsiveWidth is not supported yet")}constructor(e){super(e),this.injector=e,this.width=Number.MAX_VALUE,this.elementWidth=Number.MAX_VALUE,this.items=[],this.visiblePadding=!0,this.borderRadius=jt.None,this.stretch=!1,this.fitContent=!0,this.elementResponsiveWidth=0,this.window=this.injector.get(W.ZP),this.featureValues=this.injector.get(_.G2Y),this.renderer=this.injector.get(i.Renderer2)}static isBaseColorKey(e){if(e&&"string"==typeof e){const t=e.toLowerCase();return At._baseColors.some(n=>n.key===t)}return!1}static isBaseColorValue(e){if(e&&"string"==typeof e){const t=e.toLowerCase();return At._baseColors.some(n=>n.value===t)}return!1}static getBaseColorKey(e){const t=e.toLowerCase();return At._baseColors.find(n=>n.value===t)?.key}static getBaseColorValue(e){const t=e.toLowerCase();return At._baseColors.find(n=>n.key===t)?.value}_preparePadding(){const{top:e,bottom:t}=this.padding;let{left:n,right:a}=this.padding;return this.isRtl()&&([a,n]=[n,a]),{top:e,bottom:t,left:n,right:a}}_paddingClasses(){const e=[],t=this.padding;if(!t)return e;if((0,ye.A)(t)){const{top:n,bottom:a,left:r,right:u}=this._preparePadding();return this.applySizeClass("container-padding-top-{0}",n,e),this.applySizeClass("container-padding-bottom-{0}",a,e),this.applySizeClass("container-padding-left-{0}",r,e),this.applySizeClass("container-padding-right-{0}",u,e),e}return this.applySizeClass("container-padding-{0}",t,e),e}_paddingStyles(){const e={},t=this.padding;if(!t)return e;if((0,ye.A)(t)){const{top:n,bottom:a,left:r,right:u}=this._preparePadding();return this.applySizeStyle("paddingTop",n,e),this.applySizeStyle("paddingBottom",a,e),this.applySizeStyle("paddingLeft",r,e),this.applySizeStyle("paddingRight",u,e),e}return this.applySizeStyle("padding",t,e),e}_borderRadiusClasses(){const e=[],t=this.borderRadius;return t&&t!==jt.None&&(this.applySizeClass("container-border-radius-{0}",t,e),e.push("container-border-area")),e}_borderRadiusStyles(){const e={},t=this.borderRadius;return t&&(Kf(t)?e.borderRadius=`${t}px`:Fp(t)||(e.borderRadius=t)),e}_colorClasses(){const e=this.color?.toLowerCase(),t=[];return At.isBaseColorKey(e)&&t.push(`container-background-color-${e}`),t}_colorStyles(){const e={};return this.color&&!At.isBaseColorKey(this.color)&&(e.backgroundColor=this.color),e}onScroll(){}applySizeClass(e,t,n){if("string"==typeof t&&Fp(t)&&t!==jt.None){const a=He.Qf.Format(e,t.toLowerCase());n.push(a)}}onResize(){this.window.requestAnimationFrame(()=>{this.zone.run(()=>{this.isResponsive&&(this.width=this.window.innerWidth,this.elementWidth=this.elementRef.nativeElement.clientWidth,this.updateResponsiveStyles(),this.detectChanges())})})}getClasses(){return[...super.getClasses(),...this._paddingClasses(),...this._colorClasses(),...this._borderRadiusClasses()]}applySizeStyle(e,t,n){t&&(Kf(t)?n[e]=`${t}px`:"string"==typeof t&&!Fp(t)&&(n[e]=t))}setValuesFromConfig(e,t=[]){super.setValuesFromConfig(e,["items"])}get containerStyles(){return{...(0,ye.A)(this.styles)?this.styles:{},...this._paddingStyles(),...this._borderRadiusStyles(),...this._colorStyles()}}detectChangesAsync(e=null){this.window.requestAnimationFrame(()=>{setTimeout(()=>{this.detectChanges(),e?.()})})}subscribeResize(){this.resizeObserver=new A1.A(()=>this.onResize()),this.container&&this.resizeObserver.observe(this.container.nativeElement)}updateResponsiveStyles(){}ngOnInit(){this.visiblePadding=!this.featureValues.HideDesignPadding}ngAfterViewInit(){this.zone=this.injector.get(i.NgZone),this.subscribeResize()}ngOnDestroy(){super.ngOnDestroy(),this.resizeObserver?.disconnect()}static{this.\u0275fac=function(t){return new(t||At)(i.\u0275\u0275directiveInject(i.Injector))}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:At,viewQuery:function(t,n){if(1&t&&i.\u0275\u0275viewQuery(R1,5),2&t){let a;i.\u0275\u0275queryRefresh(a=i.\u0275\u0275loadQuery())&&(n.container=a.first)}},hostVars:4,hostBindings:function(t,n){1&t&&i.\u0275\u0275listener("scroll",function(){return n.onScroll()}),2&t&&i.\u0275\u0275classProp("stretch",n.stretch)("fit-content",n.fitContent)},inputs:{items:"items",visiblePadding:"visiblePadding",padding:"padding",borderRadius:"borderRadius",color:"color",responsiveWidth:"responsiveWidth",stretch:"stretch",fitContent:"fitContent",elementResponsiveWidth:"elementResponsiveWidth"},features:[i.\u0275\u0275InheritDefinitionFeature]})}}(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",Array)],At.prototype,"items",void 0),(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",Object)],At.prototype,"visiblePadding",void 0),(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",Object)],At.prototype,"padding",void 0),(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",Object)],At.prototype,"borderRadius",void 0),(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",He.Qf)],At.prototype,"color",void 0),(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",Number),(0,I.Sn)("design:paramtypes",[Object])],At.prototype,"responsiveWidth",null),(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",Object)],At.prototype,"stretch",void 0),(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",Object)],At.prototype,"fitContent",void 0),(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",Object)],At.prototype,"elementResponsiveWidth",void 0);class _c extends At{constructor(){super(...arguments),this.slotHTMLElements=[]}setSlotElementStyles(e){e=this.castSlotElements(e.filter(t=>!(t instanceof Comment))),this.applySlotElementStyles(e)}castSlotElements(e){}getItemLayout(e){}castElementStylesToLayoutConfig(e){}applySlotElementStyles(e){e.forEach(t=>{const n=this.getItemLayout(t.layoutConfig);Object.entries(n).forEach(([a,r])=>{const u=(0,qb.A)(a);this.renderer.setStyle(t,u,r)})})}get shouldUseSlots(){return!this.items||!this.items.length}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(_c)))(n||_c)}})()}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:_c,features:[i.\u0275\u0275InheritDefinitionFeature]})}}const P1=["items"],N1=["*"];function O1(o,e){1&o&&i.\u0275\u0275elementContainer(0)}function V1(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"slot",5),i.\u0275\u0275listener("slotchange",function(a){i.\u0275\u0275restoreView(t);const r=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(r.slotChange(a))}),i.\u0275\u0275elementEnd(),i.\u0275\u0275projection(1)}}function L1(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"div",7),i.\u0275\u0275elementContainer(1,8),i.\u0275\u0275elementEnd()),2&o){const t=e.$implicit,n=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("ngStyle",n.getItemLayout(t.layoutConfig)),i.\u0275\u0275advance(),i.\u0275\u0275property("crtViewElement",t)}}function F1(o,e){if(1&o&&i.\u0275\u0275template(0,L1,2,2,"div",6),2&o){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("ngForOf",t.items)}}function k1(o,e){if(1&o&&i.\u0275\u0275template(0,O1,1,0,"ng-container",4)(1,V1,2,0,"ng-template",null,1,i.\u0275\u0275templateRefExtractor)(3,F1,1,1,"ng-template",null,2,i.\u0275\u0275templateRefExtractor),2&o){const t=i.\u0275\u0275reference(2),n=i.\u0275\u0275reference(4),a=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngIf",a.shouldUseSlots)("ngIfThen",t)("ngIfElse",n)}}function j1(o,e){1&o&&i.\u0275\u0275elementContainer(0)}function B1(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",9),i.\u0275\u0275listener("scroll",function(){i.\u0275\u0275restoreView(t);const a=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(a.onInnerScroll())}),i.\u0275\u0275template(2,j1,1,0,"ng-container",10),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}if(2&o){const t=i.\u0275\u0275nextContext(),n=i.\u0275\u0275reference(1);i.\u0275\u0275advance(),i.\u0275\u0275styleProp("flex-direction",t.flexDirection),i.\u0275\u0275property("ngStyle",t.flexStyles)("ngClass",t.classes),i.\u0275\u0275attribute("id",t.id)("flex-direction",t.flexDirection)("role",t.role),i.\u0275\u0275advance(),i.\u0275\u0275property("ngTemplateOutlet",n)}}const nS=(o,e)=>{const t=o.charAt(0).toUpperCase()+o.slice(1);return{caption:`LayoutElements.Flex${t}.Caption`,hint:`LayoutElements.Flex${t}.Hint`,icon:b(95320)(`./flex-${o}-icon.svg`),defaultPropertyValues:{direction:o,items:[],fitContent:!0},position:e}},Eo={...tS,direction:"row",justifyContent:"start",gap:jt.Small};let Ra=class yh extends _c{constructor(){super(...arguments),this._containerClasses=[],this.useOldTemplate=!1,this.direction=Eo.direction,this.justifyContent=Eo.justifyContent,this.alignItems=Eo.alignItems,this.gap=Eo.gap,this.innerScroll=new i.EventEmitter}get hostClasses(){if(!this.useOldTemplate)return this.classes}get hostRole(){if(!this.useOldTemplate)return this.role}getClasses(){const t=[...super.getClasses(),"crt-flex",...this._gapClasses()].sort();return(0,j.A)(this._containerClasses,t)||(this._containerClasses=t),this._containerClasses}_gapClasses(){const e=[],t=this.gap||Eo.gap;return this.applySizeClass("container-gap-{0}",t,e),e}castElementStylesToLayoutConfig(e){const[t,n,a,r,u,p,f,S,w,O]=["basis","align-self","grow","shrink","width","height","min-width","max-width","min-height","max-height"].map($=>{const te=`layout-config-${$}`,Fe=e.getAttribute(te);if(Fe)return Fe});return{basis:t,alignSelf:n,grow:Number(a),shrink:Number(r),width:Number(u),height:Number(p),minWidth:Number(f),maxWidth:Number(S),minHeight:Number(w),maxHeight:Number(O)}}castSlotElements(e){for(const t of e){const n=this.castElementStylesToLayoutConfig(t);t.layoutConfig=n}return e}get hostFlexStyles(){if(!this.useOldTemplate)return this.flexStyles}get flexStyles(){const e={};e.justifyContent=this.justifyContent||Eo.justifyContent,e.alignItems=this.alignItems||Eo.alignItems,e.flexWrap=this.wrap||(this.isVertical?"nowrap":"wrap");const t=this.gap;return t&&(Kf(t)?e.gap=t+"px":Fp(t)||(e.gap=t)),{...this.containerStyles,...e}}get hostFlexDirection(){if(!this.useOldTemplate)return this.direction||this.styles?.flexDirection}get flexDirection(){return this.isVertical,this.direction||this.styles?.flexDirection}get isVertical(){return["column","column-reverse"].includes(this.direction)}getItemLayout(e){let t={};return e?.basis&&("fit-content"===e.basis?"column"===this.direction?t.height="fit-content":t.width="fit-content":t.flexBasis=e.basis),void 0!==e?.grow&&(t.flexGrow=e.grow),void 0!==e?.shrink&&(t.flexShrink=e.shrink),e?.alignSelf&&(t.alignSelf=e.alignSelf),e?.width&&(t.width=`${e.width}px`,t.minWidth=`${e.width}px`),e?.minWidth&&(t.minWidth=`${e.minWidth}px`),e?.maxWidth&&(t.maxWidth=`${e.maxWidth}px`),e?.height&&(t.height=`${e.height}px`,t.minHeight=`${e.height}px`),e?.minHeight&&(t.minHeight=`${e.minHeight}px`),e?.maxHeight&&(t.maxHeight=`${e.maxHeight}px`),e&&e.styles&&(t={...t,...e.styles}),t}ngOnInit(){super.ngOnInit(),this.useOldTemplate=!!this.featureValues.DisableRemoveDuplicateIDs}ngAfterContentInit(){this.children.changes.pipe((0,Wi.Z)(this.children),(0,_e.Q)(this.destroyed$)).subscribe(()=>{const e=this.children.map(({nativeElement:t})=>t);e?.length&&(this.slotHTMLElements=e,this.setSlotElementStyles(this.slotHTMLElements))})}slotChange(e){const t=e.target.assignedNodes();!t||!t.length||(this.slotHTMLElements=t,this.setSlotElementStyles(this.slotHTMLElements))}onHostInnerScroll(){this.useOldTemplate||this.innerScroll.emit()}onInnerScroll(){this.innerScroll.emit()}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(yh)))(n||yh)}})()}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:yh,selectors:[["crt-flex"]],contentQueries:function(t,n,a){if(1&t&&i.\u0275\u0275contentQuery(a,P1,4,i.ElementRef),2&t){let r;i.\u0275\u0275queryRefresh(r=i.\u0275\u0275loadQuery())&&(n.children=r)}},hostVars:8,hostBindings:function(t,n){1&t&&i.\u0275\u0275listener("scroll",function(){return n.onHostInnerScroll()}),2&t&&(i.\u0275\u0275attribute("role",n.hostRole)("flex-direction",n.hostFlexDirection),i.\u0275\u0275styleMap(n.hostFlexStyles),i.\u0275\u0275classMap(n.hostClasses),i.\u0275\u0275styleProp("flex-direction",n.hostFlexDirection))},inputs:{direction:"direction",justifyContent:"justifyContent",wrap:"wrap",alignItems:"alignItems",gap:"gap",role:"role"},outputs:{innerScroll:"innerScroll"},features:[i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:N1,decls:3,vars:2,consts:[["template",""],["slotsTemplate",""],["itemsTemplate",""],[4,"ngIf","ngIfElse"],[4,"ngIf","ngIfThen","ngIfElse"],[3,"slotchange"],["class","crt-view-element-container",3,"ngStyle",4,"ngFor","ngForOf"],[1,"crt-view-element-container",3,"ngStyle"],[3,"crtViewElement"],[3,"scroll","ngStyle","ngClass"],[4,"ngTemplateOutlet"]],template:function(t,n){if(1&t&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275template(0,k1,5,3,"ng-template",null,0,i.\u0275\u0275templateRefExtractor)(2,B1,3,8,"ng-container",3)),2&t){const a=i.\u0275\u0275reference(1);i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",n.useOldTemplate)("ngIfElse",a)}},dependencies:[R.NgClass,R.NgForOf,R.NgIf,R.NgTemplateOutlet,R.NgStyle,Ea],encapsulation:2})}};(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",String)],Ra.prototype,"direction",void 0),(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",String)],Ra.prototype,"justifyContent",void 0),(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",String)],Ra.prototype,"wrap",void 0),(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",String)],Ra.prototype,"alignItems",void 0),(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",Object)],Ra.prototype,"gap",void 0),(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",String)],Ra.prototype,"role",void 0),(0,I.Cg)([(0,c.CrtOutput)(),(0,I.Sn)("design:type",Object)],Ra.prototype,"innerScroll",void 0),Ra=(0,I.Cg)([(0,c.CrtViewElement)({type:"crt.FlexContainer",contentSlots:["items"],reuseStrategy:c.ViewElementReuseStrategy.Reuse}),(0,c.CrtInterfaceDesignerItem)({toolbarConfig:[nS("row",80),nS("column",90)],designControlConfig:{allowDesignContent:!0},propertiesPanelComponentTypeName:"crt.FlexPropertiesPanel",viewElementGroupType:c.ViewElementGroupType.LayoutElements,typeCaption:"TypeCaptions.FlexContainer"})],Ra);class Cc{constructor(){this._maxGridLayoutRow=1,this._maxColumnsCount=12,this._defaultItemLayout={colSpan:1,row:1,column:1,rowSpan:1},this._defaultRowSpan=1,this._defaultColSpan=6}_applyExplicitPositions(e,t){if(e.every(n=>!n?.layoutConfig)){let n=1,a=1;e.forEach(r=>{const u=r.layoutConfig||{};void 0===u.column&&(u.column=a,a++),void 0===u.colSpan&&(u.colSpan=1),void 0===u.row&&(u.row=n),void 0===u.rowSpan&&(u.rowSpan=1),1===u.column&&-1===u.colSpan&&n++,a>t&&(a=1,n++),r.layoutConfig=u})}return e}_checkBitmapIntersection(e,t){let n,a;for(n=0,a=e.length;n<a;n++)if((e[n]&t[n])>0)return!0;return!1}_calculateBitMask(e,t,n){const a=n-e;return Math.pow(2,a)-Math.pow(2,a-t)}_isEmpty(e){return null==e||""===e||(0,Ye.A)(e)&&0===e.length}_getItemBitmap(e,t){const n=[];if(this._isEmpty(e))return n;const a=e.column,r=e.row,u=e.colSpan||this._defaultColSpan;let f,S;for(f=r,S=r+(e.rowSpan||this._defaultRowSpan);f<S;f++)n[f]=this._calculateBitMask(a,u,t);return n}_setDefaultValue(e,t,n,a){e[n]||(e[n]=a),t[n]||(t[n]=a)}_fixItemIntersect(e,t){const n=e.layoutConfig,a=t.layoutConfig,r=this._tryFixColumns(n,a);let u=!0;return r||(u=this._tryFixRows(n,a)),!r&&!u&&n.row>this._maxGridLayoutRow&&(this._maxGridLayoutRow+=1),!r&&!u&&this._moveDownItem(e),e}_moveDownItem(e){this._maxGridLayoutRow++;const t=e.layoutConfig;t.row=this._maxGridLayoutRow,t.column=1;const n=this._originalItems.find(a=>a.name===e.name);n&&(t.colSpan=n.layoutConfig.colSpan||1)}_tryFixColumns(e,t){return this._setDefaultValue(e,t,"colSpan",this._defaultColSpan),this._calculateNewParameters(e,t,"column","colSpan")}_tryFixRows(e,t){return this._setDefaultValue(e,t,"rowSpan",this._defaultRowSpan),this._calculateNewParameters(e,t,"row","rowSpan")}_calculateNewParameters(e,t,n,a){const r=e[a],u=t[a],p=t[n],f=p+u,S=e[n],O=p<=S,$=O?f-S:S+r-p;return!(r<=$)&&(O&&(e[n]=f),e[a]=r-$,!0)}_compareItemsPositions(e,t){const n=e.layoutConfig||(0,Z.A)(this._defaultItemLayout),a=t.layoutConfig||(0,Z.A)(this._defaultItemLayout),r=Math.max(n.colSpan||this._defaultColSpan,n.rowSpan||this._defaultRowSpan),u=Math.max(a.colSpan||this._defaultColSpan,a.rowSpan||this._defaultRowSpan);return n.row!==a.row?n.row<a.row?-1:1:r<u||n.column<a.column&&r<=u?-1:1}_getMaxGridLayoutRow(e){const t=e.map(n=>{const a=n.layoutConfig||{};return(a.row||1)+(a.rowSpan||1)-1});return Math.max(...t)||1}_getMaxColumnsCount(e,t){const n=e.map(a=>{const r=a.layoutConfig||{};return(r.column||1)+(r.colSpan||1)-1});return Math.max(...n,t,this._maxColumnsCount)}fixItemsOverlap(e,t){this._originalItems=(0,Z.A)(e);const n=[],a=[];return this._maxGridLayoutRow=this._getMaxGridLayoutRow(e),this._maxColumnsCount=this._getMaxColumnsCount(e,t),[...e].sort((u,p)=>this._compareItemsPositions(u,p)).forEach(u=>{let p=this._getItemBitmap(u.layoutConfig,this._maxColumnsCount);a.forEach(f=>{const S=this._getItemBitmap(f.layoutConfig,this._maxColumnsCount);this._checkBitmapIntersection(S,p)&&(u=this._fixItemIntersect(u,f),p=this._getItemBitmap(u.layoutConfig,this._maxColumnsCount),n.push(u.name))}),a.push(u)}),this._applyExplicitPositions(e,t),{items:e,affectedItems:n}}static{this.\u0275fac=function(t){return new(t||Cc)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Cc,factory:Cc.\u0275fac})}}const G1=["items"],U1=["*"],z1=o=>({containerDiv:o});function H1(o,e){1&o&&i.\u0275\u0275elementContainer(0)}function $1(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"slot",7),i.\u0275\u0275listener("slotchange",function(a){i.\u0275\u0275restoreView(t);const r=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(r.slotChange(a))}),i.\u0275\u0275elementEnd(),i.\u0275\u0275projection(1)}}function q1(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"div",9),i.\u0275\u0275elementContainer(1,10),i.\u0275\u0275elementEnd()),2&o){const t=e.$implicit,n=i.\u0275\u0275nextContext(4);i.\u0275\u0275property("ngStyle",n.getItemLayout(t.layoutConfig)),i.\u0275\u0275advance(),i.\u0275\u0275property("crtViewElement",t)}}function W1(o,e){if(1&o&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,q1,2,2,"div",8),i.\u0275\u0275elementContainerEnd()),2&o){const t=i.\u0275\u0275nextContext(3);i.\u0275\u0275advance(),i.\u0275\u0275property("ngForOf",t.items)}}function Z1(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"div",9),i.\u0275\u0275elementContainer(1,10),i.\u0275\u0275elementEnd()),2&o){const t=e.$implicit,n=i.\u0275\u0275nextContext(4);i.\u0275\u0275property("ngStyle",n.getItemLayout(t.layoutConfig)),i.\u0275\u0275advance(),i.\u0275\u0275property("crtViewElement",t)}}function J1(o,e){if(1&o&&i.\u0275\u0275template(0,Z1,2,2,"div",8),2&o){const t=i.\u0275\u0275nextContext(2).containerDiv,n=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngForOf",n.fixItemsOverlap(n.items,n.useOldTemplate?t:n.elementRef.nativeElement).items)}}function Y1(o,e){if(1&o&&i.\u0275\u0275template(0,W1,2,1,"ng-container",5)(1,J1,1,1,"ng-template",null,3,i.\u0275\u0275templateRefExtractor),2&o){const t=i.\u0275\u0275reference(2),n=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("ngIf",n.gridContainerAllowOverlapFeature)("ngIfElse",t)}}function K1(o,e){if(1&o&&i.\u0275\u0275template(0,H1,1,0,"ng-container",6)(1,$1,2,0,"ng-template",null,1,i.\u0275\u0275templateRefExtractor)(3,Y1,3,2,"ng-template",null,2,i.\u0275\u0275templateRefExtractor),2&o){const t=i.\u0275\u0275reference(2),n=i.\u0275\u0275reference(4),a=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngIf",a.shouldUseSlots)("ngIfThen",t)("ngIfElse",n)}}function Q1(o,e){if(1&o&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",11,4),i.\u0275\u0275elementContainer(3,12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&o){const t=i.\u0275\u0275reference(2),n=i.\u0275\u0275nextContext(),a=i.\u0275\u0275reference(1);i.\u0275\u0275advance(),i.\u0275\u0275styleProp("grid-template-columns",n.gridTemplateColumns),i.\u0275\u0275property("ngStyle",n.gridStyles)("ngClass",n.classes),i.\u0275\u0275attribute("id",n.id),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngTemplateOutlet",a)("ngTemplateOutletContext",i.\u0275\u0275pureFunction1(7,z1,t))}}const iS={...tS,columnsTemplate:"minmax(32px, 1fr)"},gd=(o,e,t={},n="column")=>{const a=iS.columnsTemplate,u=new Array(o).fill(a);return{caption:`LayoutElements.Grid${n.charAt(0).toUpperCase()+n.slice(1)}${o}.Caption`,icon:b(33996)(`./grid-${n}-${o}-icon.svg`),defaultPropertyValues:{columns:u,rows:"minmax(max-content, 32px)",gap:{columnGap:jt.Large},items:[],fitContent:!0,...t},position:e}};let gs=class jy extends _c{get hostClasses(){if(!this.useOldTemplate)return this.classes}get hostGridStyles(){if(!this.useOldTemplate)return this.gridStyles}get hostGridTemplateColumns(){if(!this.useOldTemplate)return this.gridTemplateColumns}get gridStyles(){const e={};return this.justifyItems&&(e.justifyItems=this.justifyItems),this.alignItems&&(e.alignItems=this.alignItems),this.isResponsiveWidth&&(e.gridTemplateAreas="initial"),{...this.containerStyles,...e,...this._gapStyles(),...this._rowsStyles(),...this._columnsStyles()}}get gridTemplateColumns(){return this.isResponsiveWidth?iS.columnsTemplate:this.gridStyles.gridTemplateColumns}constructor(e){super(e),this.injector=e,this._containerClasses=[],this.useOldTemplate=!1,this._gridContainerItemsLayoutService=this.injector.get(Cc),this.gridContainerAllowOverlapFeature=!!this.featureValues.GridContainerAllowOverlap}_gapStyles(){const e={},t=this.gap;if((0,ye.A)(t)){const{columnGap:n,rowGap:a}=t;this.applySizeStyle("columnGap",n,e),this.applySizeStyle("rowGap",a,e)}else this.applySizeStyle("gap",this.gap,e);return e}_rowsStyles(){const e={};return this.isResponsiveWidth?e.gridAutoRows="max-content":"string"==typeof this.rows?e.gridAutoRows=this.rows:this.rows instanceof Array&&(e.gridTemplateRows=this.rows.join(" ")),e}_columnsStyles(){const e={};return"string"==typeof this.columns?e.gridAutoColumns=this.columns:this.columns instanceof Array&&(e.gridTemplateColumns=this.columns.join(" ")),e}_gridTemplateColumnsClasses(){const e=[];return this.isResponsiveWidth&&e.push("crt-grid-responsive"),e}_gapClasses(){const e=[],t=this.gap;if(t)if((0,ye.A)(t)){const{columnGap:n,rowGap:a}=t;this.applySizeClass("container-column-gap-{0}",n,e),this.applySizeClass("container-row-gap-{0}",a,e)}else this.applySizeClass("container-gap-{0}",t,e);return e}_fullLayoutConfig(e){const t={};let n="";void 0!==e?.column&&(n+=e.column),void 0!==e?.colSpan&&(n&&(n+="/"),-1!==e.colSpan&&(n+="span "),n+=e.colSpan);let a="";return void 0!==e?.row&&(a+=e.row),void 0!==e?.rowSpan&&(a&&(a+="/"),-1!==e.rowSpan&&(a+="span "),a+=e.rowSpan),n&&(t.gridColumn=n),a&&(t.gridRow=a),t}_responsiveLayoutConfig(e){const t={},n=e?.rowSpan;return void 0!==n&&-1!==n&&(t.gridRow=`span ${n}`),t}_computedGridColumns(e){return getComputedStyle(e).getPropertyValue("container-template-columns").split(" ")}_applySlotElementsResponsiveStyles(e){for(const t of e){const n=t?.layoutConfig?.rowSpan;void 0!==n&&-1!==n&&(this.renderer.setStyle(t,"grid-row-start",`span ${n}`),this.renderer.setStyle(t,"grid-row-end","auto")),this.renderer.setStyle(t,"grid-column-start","auto"),this.renderer.setStyle(t,"grid-column-end","auto")}}getClasses(){const a=[...super.getClasses()||[],"crt-grid",...this._gridTemplateColumnsClasses(),...this._gapClasses()].sort();return(0,j.A)(this._containerClasses,a)||(this._containerClasses=a),this._containerClasses}applySlotElementStyles(e){this.isResponsiveWidth?this._applySlotElementsResponsiveStyles(e):super.applySlotElementStyles(e)}castElementStylesToLayoutConfig(e){const[t,n,a,r]=["row","column","row-span","col-span"].map(u=>{const p=`layout-config-${u}`,f=e.getAttribute(p);if(f)return Number(f)});return{row:t,column:n,rowSpan:a,colSpan:r}}castSlotElements(e){for(const t of e)t.layoutConfig=this.castElementStylesToLayoutConfig(t);if(!this.gridContainerAllowOverlapFeature&&this.container?.nativeElement){const t=e.map(n=>({layoutConfig:n.layoutConfig}));this.fixItemsOverlap(t,this.container.nativeElement)}return e}onResize(){super.onResize(),this.shouldUseSlots&&this.window.requestAnimationFrame(()=>{this.zone.run(()=>{this.setSlotElementStyles(this.slotHTMLElements)})})}getItemLayout(e){return e?this.isResponsiveWidth?this._responsiveLayoutConfig(e):this._fullLayoutConfig(e):null}fixItemsOverlap(e,t){let n=[];if(!0!==this.allowOverlap&&e){const a=this._computedGridColumns(t);n=this._gridContainerItemsLayoutService.fixItemsOverlap(e,a.length).affectedItems}return{items:e,affectedItems:n}}slotChange(e){const t=e.target.assignedNodes();!t||!t.length||(this.slotHTMLElements=t,this.setSlotElementStyles(this.slotHTMLElements))}updateResponsiveStyles(){if(this.useOldTemplate)return;const e=this.elementRef.nativeElement;this.isResponsiveWidth?this.renderer.addClass(e,"crt-grid-responsive"):this.renderer.removeClass(e,"crt-grid-responsive"),this.renderer.setStyle(e,"grid-template-areas",this.isResponsiveWidth?"initial":null),this.renderer.setStyle(e,"grid-template-columns",this.gridTemplateColumns??null)}ngOnInit(){super.ngOnInit(),this.useOldTemplate=this.featureValues.DisableRemoveDuplicateIDs}ngAfterContentInit(){this.children.changes.pipe((0,Wi.Z)(this.children),(0,_e.Q)(this.destroyed$)).subscribe(()=>{const e=this.children.map(({nativeElement:t})=>t);e?.length&&(this.slotHTMLElements=e,this.setSlotElementStyles(this.slotHTMLElements))})}static{this.\u0275fac=function(t){return new(t||jy)(i.\u0275\u0275directiveInject(i.Injector))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:jy,selectors:[["crt-grid"]],contentQueries:function(t,n,a){if(1&t&&i.\u0275\u0275contentQuery(a,G1,4,i.ElementRef),2&t){let r;i.\u0275\u0275queryRefresh(r=i.\u0275\u0275loadQuery())&&(n.children=r)}},hostVars:6,hostBindings:function(t,n){2&t&&(i.\u0275\u0275styleMap(n.hostGridStyles),i.\u0275\u0275classMap(n.hostClasses),i.\u0275\u0275styleProp("grid-template-columns",n.hostGridTemplateColumns))},inputs:{rows:"rows",columns:"columns",gap:"gap",justifyItems:"justifyItems",alignItems:"alignItems",allowOverlap:"allowOverlap"},features:[i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:U1,decls:3,vars:2,consts:[["template",""],["slotsTemplate",""],["itemsTemplate",""],["fixItemsLayoutConfig",""],["container",""],[4,"ngIf","ngIfElse"],[4,"ngIf","ngIfThen","ngIfElse"],[3,"slotchange"],[3,"ngStyle",4,"ngFor","ngForOf"],[3,"ngStyle"],[3,"crtViewElement"],[1,"crt-grid",3,"ngStyle","ngClass"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,n){if(1&t&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275template(0,K1,5,3,"ng-template",null,0,i.\u0275\u0275templateRefExtractor)(2,Q1,4,9,"ng-container",5)),2&t){const a=i.\u0275\u0275reference(1);i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",n.useOldTemplate)("ngIfElse",a)}},dependencies:[R.NgClass,R.NgForOf,R.NgIf,R.NgTemplateOutlet,R.NgStyle,Ea],encapsulation:2})}};(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",Object)],gs.prototype,"rows",void 0),(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",Object)],gs.prototype,"columns",void 0),(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",Object)],gs.prototype,"gap",void 0),(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",String)],gs.prototype,"justifyItems",void 0),(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",String)],gs.prototype,"alignItems",void 0),(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",Boolean)],gs.prototype,"allowOverlap",void 0),gs=(0,I.Cg)([(0,c.CrtViewElement)({type:"crt.GridContainer",contentSlots:["items"],reuseStrategy:c.ViewElementReuseStrategy.Reuse}),(0,c.CrtInterfaceDesignerItem)({toolbarConfig:[((o,e)=>{const t={padding:{top:jt.Medium,right:jt.Large,bottom:jt.Medium,left:jt.Large},color:eS.Primary.key,borderRadius:jt.Medium};return gd(o,e,t,"area")})(1,40),gd(1,50),gd(2,60),gd(3,70),gd(4,80)],designControlConfig:{allowDesignContent:!0},propertiesPanelComponentTypeName:"crt.GridPropertiesPanel",viewElementGroupType:c.ViewElementGroupType.LayoutElements,typeCaption:"TypeCaptions.GridContainer"}),(0,I.Sn)("design:paramtypes",[i.Injector])],gs);class Am{static{this.\u0275fac=function(t){return new(t||Am)}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:Am,selectors:[["crt-duplicate-ids-container-styles"]],standalone:!0,features:[i.\u0275\u0275StandaloneFeature],decls:0,vars:0,template:function(t,n){},styles:["body{--focus-outline-outer-color: var(--crt-palette-secondary-500);--focus-outline-inner-color: white}.crt-flex,web-flex-container{display:flex;width:100%;height:100%;min-height:0;min-width:0;overflow:auto}@supports (background: -webkit-named-image(i)){.crt-flex,web-flex-container{height:initial}}crt-flex{display:flex;flex-direction:column;min-height:0;min-width:0;overflow:auto}crt-flex.stretch{min-width:0;width:100%}crt-flex.stretch>.crt-flex{min-height:0;min-width:0}crt-flex .crt-flex>.stretch{flex-grow:1}.crt-view-element-container:empty{display:none}\n","body{--focus-outline-outer-color: var(--crt-palette-secondary-500);--focus-outline-inner-color: white}crt-grid,web-grid-container{display:block;width:100%;position:relative;min-height:0;min-width:0;overflow:auto}crt-grid>.crt-grid,web-grid-container>.crt-grid{display:grid;width:100%;height:100%;min-height:0;min-width:0;overflow:auto}@supports (background: -webkit-named-image(i)){crt-grid>.crt-grid,web-grid-container>.crt-grid{height:initial}}crt-grid>.crt-grid>*,web-grid-container>.crt-grid>*{min-height:0;min-width:0;overflow:auto}@media screen and (max-width: 600px){.crt-grid:not(.crt-grid-responsive){grid-template-columns:1fr!important}}\n"],encapsulation:2})}}class Rm{static{this.\u0275fac=function(t){return new(t||Rm)}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:Rm,selectors:[["crt-main-container-styles"]],standalone:!0,features:[i.\u0275\u0275StandaloneFeature],decls:0,vars:0,template:function(t,n){},styles:["body{--focus-outline-outer-color: var(--crt-palette-secondary-500);--focus-outline-inner-color: white}crt-flex{display:flex;flex-direction:column;min-height:0;min-width:0;overflow:auto;box-sizing:border-box}crt-flex.stretch{width:100%}crt-flex>.stretch{flex-grow:1}.crt-view-element-container:empty{display:none}\n","body{--focus-outline-outer-color: var(--crt-palette-secondary-500);--focus-outline-inner-color: white}crt-grid{display:grid;width:100%;position:relative;min-height:0;min-width:0;overflow:auto;box-sizing:border-box}crt-grid.crt-grid>*{min-height:0;min-width:0;overflow:auto}@media screen and (max-width: 600px){crt-grid:not(.crt-grid-responsive){grid-template-columns:1fr!important}}\n"],encapsulation:2})}}class Qf{constructor(){this._featureValues=(0,i.inject)(_.G2Y),this._viewContainerRef=(0,i.inject)(i.ViewContainerRef),this._loadContainerStyles()}_loadContainerStyles(){const e=this._featureValues.DisableRemoveDuplicateIDs?Am:Rm;this._componentView=this._viewContainerRef.createComponent(e)}ngOnDestroy(){this._componentView.destroy()}static{this.\u0275fac=function(t){return new(t||Qf)}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:Qf,selectors:[["","crtRemoveDuplicateIDsStyleToggling",""]],standalone:!0})}}function eI(o,e){if(1&o&&i.\u0275\u0275elementContainer(0,3),2&o){const t=e.$implicit,n=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("crtViewModel",t)("crtViewElement",n.itemViewConfig)}}function tI(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275template(1,eI,1,2,"ng-container",2),i.\u0275\u0275elementEnd()),2&o){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(),i.\u0275\u0275property("ngForOf",t.viewModels)}}let fd=class _h extends Wt{static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(_h)))(n||_h)}})()}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:_h,selectors:[["ts-component-list"]],inputs:{itemViewConfig:"itemViewConfig",viewModels:"viewModels"},features:[i.\u0275\u0275InheritDefinitionFeature],decls:2,vars:4,consts:[[1,"ts-component-list",3,"ngStyle","ngClass"],[4,"ngIf"],[3,"crtViewModel","crtViewElement",4,"ngFor","ngForOf"],[3,"crtViewModel","crtViewElement"]],template:function(t,n){1&t&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275template(1,tI,2,1,"div",1),i.\u0275\u0275elementEnd()),2&t&&(i.\u0275\u0275property("ngStyle",n.styles)("ngClass",n.classes),i.\u0275\u0275attribute("id",n.id),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",n.viewModels))},dependencies:[R.NgClass,R.NgForOf,R.NgIf,R.NgStyle,Uu,Ea],encapsulation:2})}};(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",Object)],fd.prototype,"itemViewConfig",void 0),(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",sn)],fd.prototype,"viewModels",void 0),fd=(0,I.Cg)([(0,c.CrtViewElement)({type:"crt.ComponentList",reuseStrategy:c.ViewElementReuseStrategy.Reuse})],fd);let Pm=class Ch extends Wt{static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(Ch)))(n||Ch)}})()}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:Ch,selectors:[["ts-label"]],inputs:{label:"label"},features:[i.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[[1,"ts-label",3,"ngStyle","ngClass"]],template:function(t,n){1&t&&(i.\u0275\u0275elementStart(0,"div",0)(1,"label"),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()()),2&t&&(i.\u0275\u0275property("ngStyle",n.styles)("ngClass",n.classes),i.\u0275\u0275attribute("id",n.id),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(n.label))},dependencies:[R.NgClass,R.NgStyle],encapsulation:2})}};(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",String)],Pm.prototype,"label",void 0),Pm=(0,I.Cg)([(0,c.CrtViewElement)({type:"crt.DeprecatedLabel",reuseStrategy:c.ViewElementReuseStrategy.Reuse})],Pm);let Xf=class bh extends Wt{static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(bh)))(n||bh)}})()}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:bh,selectors:[["ts-list"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:16,vars:3,consts:[[1,"ts-list",3,"ngStyle","ngClass"]],template:function(t,n){1&t&&(i.\u0275\u0275elementStart(0,"div",0)(1,"ul")(2,"li"),i.\u0275\u0275text(3,"1 Item"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"li"),i.\u0275\u0275text(5,"2 Item"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"li"),i.\u0275\u0275text(7,"3 Item"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(8,"li"),i.\u0275\u0275text(9,"4 Item"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"li"),i.\u0275\u0275text(11,"5 Item"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(12,"li"),i.\u0275\u0275text(13,"6 Item"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(14,"li"),i.\u0275\u0275text(15,"7 Item"),i.\u0275\u0275elementEnd()()()),2&t&&(i.\u0275\u0275property("ngStyle",n.styles)("ngClass",n.classes),i.\u0275\u0275attribute("id",n.id))},dependencies:[R.NgClass,R.NgStyle],encapsulation:2})}};Xf=(0,I.Cg)([(0,c.CrtViewElement)({type:"crt.List",reuseStrategy:c.ViewElementReuseStrategy.Reuse})],Xf);class ey{static{this.\u0275fac=function(t){return new(t||ey)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:ey})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[R.CommonModule,ce.YN,Ue.mz,Ve.wG,be.m_,od]})}}const nI=o=>({visible:o}),iI=(o,e)=>({"add-image-button-icon":o,"add-disabled-image-button-icon":e}),aS=()=>{},aI={provide:ce.kq,useExisting:(0,i.forwardRef)(()=>bc),multi:!0};class bc extends Wt{set value(e){this._model=e,this.onChange(this._model),this.valueChange.emit(this._model)}get value(){return this._model}constructor(e){super(e),this.required=!1,this.clearButtonVisible=!1,this.label="",this.valueChange=new i.EventEmitter,this.disabled=!1,this.onChange=aS,this.onTouched=aS}get fileName(){return this._model?this._model.name:""}dataQaAttribute(){return this.label.toLowerCase()+"_input"}get isClearButtonVisible(){return this.clearButtonVisible&&!!this._model&&!this.disabled}onFilesSelected(e){0!==e.length&&(this.value=e[0])}clearFile(){this.value=null}writeValue(e){this._model=e}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}static{this.\u0275fac=function(t){return new(t||bc)(i.\u0275\u0275directiveInject(i.Injector))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:bc,selectors:[["ts-image-input"]],inputs:{value:"value",required:"required",clearButtonVisible:"clearButtonVisible",label:"label",disabled:"disabled"},outputs:{valueChange:"valueChange"},features:[i.\u0275\u0275ProvidersFeature([aI]),i.\u0275\u0275InheritDefinitionFeature],decls:11,vars:18,consts:[["addImageButton",""],["fileInput",""],["floatLabel","always",1,"image-input",3,"hideRequiredMarker","ngStyle","ngClass"],["matInput","",1,"file-name-input",3,"ngModel","disabled","tsDataItemMarker","required"],["matSuffix","","mat-icon-button","","aria-label","Clear",1,"close-button",3,"click","ngClass"],["svgIcon","close"],["mat-icon-button","","matSuffix","",1,"add-image-button",3,"click","disabled","tsDataItemMarker"],[3,"ngClass"],["hidden","","type","file","accept","image/*",3,"change"]],template:function(t,n){if(1&t){const a=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"mat-form-field",2)(1,"mat-label"),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(3,"input",3),i.\u0275\u0275elementStart(4,"button",4),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.clearFile())}),i.\u0275\u0275element(5,"mat-icon",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"button",6),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(a);const u=i.\u0275\u0275reference(10);return i.\u0275\u0275resetView(u.click())}),i.\u0275\u0275element(7,"div",7,0),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"input",8,1),i.\u0275\u0275listener("change",function(u){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.onFilesSelected(u.target.files))}),i.\u0275\u0275elementEnd()()}2&t&&(i.\u0275\u0275property("hideRequiredMarker",!0)("ngStyle",n.styles)("ngClass",n.classes),i.\u0275\u0275attribute("id",n.id),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(n.label),i.\u0275\u0275advance(),i.\u0275\u0275property("ngModel",n.fileName)("disabled",!0)("tsDataItemMarker",n.dataQaAttribute())("required",n.required),i.\u0275\u0275advance(),i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(13,nI,n.isClearButtonVisible)),i.\u0275\u0275advance(2),i.\u0275\u0275property("disabled",n.disabled)("tsDataItemMarker","add_image_button_"+n.label),i.\u0275\u0275advance(),i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction2(15,iI,!n.disabled,n.disabled)))},dependencies:[R.NgClass,R.NgStyle,ce.me,ce.BC,ce.YS,ce.vS,ve.Ky,ve.aw,ve.xZ,Ue.aL,Ve.iV,be.An,gc],styles:[".add-image-button[_ngcontent-%COMP%]   .add-image-button-icon[_ngcontent-%COMP%]{background:url(add-image-icon.svg) no-repeat;width:16px;height:16px;margin:auto;display:inline-block}.add-image-button[_ngcontent-%COMP%]   .add-disabled-image-button-icon[_ngcontent-%COMP%]{background:url(add-image-disable-icon.svg) no-repeat;width:16px;height:16px;margin:auto;display:inline-block}.close-button[_ngcontent-%COMP%]{visibility:hidden}.image-input[_ngcontent-%COMP%]:hover   .visible[_ngcontent-%COMP%]{visibility:visible}.mat-form-field[_ngcontent-%COMP%]{width:100%}"]})}}(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",File),(0,I.Sn)("design:paramtypes",[File])],bc.prototype,"value",null),(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",Object)],bc.prototype,"label",void 0);class Nm{constructor(e,t){this._matIconRegistry=e,this._domSanitizer=t,this._registerIcons()}_registerIcons(){["collapse"].forEach(t=>{this._matIconRegistry.addSvgIconLiteral(t,this._domSanitizer.bypassSecurityTrustHtml(b(82084)("./"+t+".svg")))})}static{this.\u0275fac=function(t){return new(t||Nm)(i.\u0275\u0275inject(be.tp),i.\u0275\u0275inject(x.DomSanitizer))}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:Nm})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[R.CommonModule,be.m_,v.h]})}}const sI=(o,e)=>({expanded:o,collapsed:e});class Om{constructor(){this._direction="right",this.animationState="initial",this.isExpanded=!1,this.toggle=new i.EventEmitter}set direction(e){this._direction=e}get direction(){return this._direction}set animationDisabled(e){this._animationDisabled=e}get animationDisabled(){return this._animationDisabled}_setDefaultAnimationState(){this.animationState="initial"}_changeAnimationState(e){this.animationState=e}_onMouseEnter(){this.isExpanded||this._changeAnimationState(`slide-${this.direction}`)}_onMouseLeave(){this._changeAnimationState("initial")}onMouseAction(e){if(this.animationDisabled)this._setDefaultAnimationState();else switch(e){case"enter":this._onMouseEnter();break;case"leave":this._onMouseLeave()}}onToggle(){this.toggle.emit()}static{this.\u0275fac=function(t){return new(t||Om)}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:Om,selectors:[["crt-expansion-button"]],inputs:{isExpanded:"isExpanded",direction:"direction",animationDisabled:"animationDisabled"},outputs:{toggle:"toggle"},decls:5,vars:17,consts:[[3,"mouseenter","mouseleave","click","ngClass","title"],["svgIcon","collapse",1,"arrow-icon"]],template:function(t,n){1&t&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275pipe(1,"translate"),i.\u0275\u0275pipe(2,"translate"),i.\u0275\u0275listener("mouseenter",function(){return n.onMouseAction("enter")})("mouseleave",function(){return n.onMouseAction("leave")})("click",function(){return n.onToggle()}),i.\u0275\u0275elementStart(3,"div"),i.\u0275\u0275element(4,"mat-icon",1),i.\u0275\u0275elementEnd()()),2&t&&(i.\u0275\u0275classMapInterpolate1("expansion-button-wrapper ",n.direction,""),i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction2(14,sI,n.isExpanded,!n.isExpanded))("title",n.isExpanded?i.\u0275\u0275pipeBind1(1,10,"ExpansionButton.CollapseTooltip"):i.\u0275\u0275pipeBind1(2,12,"ExpansionButton.ExpandTooltip")),i.\u0275\u0275advance(3),i.\u0275\u0275classMapInterpolate1("expansion-btn ",n.animationState,""),i.\u0275\u0275advance(),i.\u0275\u0275classProp("reversed",n.isExpanded))},dependencies:[R.NgClass,be.An,v.D9],styles:[".expansion-button-wrapper{height:40px;display:flex;position:absolute}.expansion-button-wrapper.expanded{width:16px}.expansion-button-wrapper.collapsed{width:29px}.expansion-button-wrapper.left{justify-content:flex-end}.expansion-button-wrapper.left.expanded{left:-4px}.expansion-button-wrapper.left.collapsed{left:-17px}.expansion-button-wrapper.left .expansion-btn{border-radius:8px 0 0 8px}.expansion-button-wrapper.left .expansion-btn .arrow-icon{transform:rotate(0)}.expansion-button-wrapper.left .expansion-btn .arrow-icon.reversed{transform:rotate(180deg)}.expansion-button-wrapper.right{justify-content:flex-start}.expansion-button-wrapper.right.expanded{left:4px}.expansion-button-wrapper.right.collapsed{left:17px}.expansion-button-wrapper.right .expansion-btn{border-radius:0 8px 8px 0}.expansion-button-wrapper.right .expansion-btn .arrow-icon{transform:rotate(180deg)}.expansion-button-wrapper.right .expansion-btn .arrow-icon.reversed{transform:rotate(0)}.expansion-button-wrapper .expansion-btn{display:flex;justify-content:center;align-items:center;height:100%;cursor:pointer;transition:.3s cubic-bezier(.18,.89,.32,1.28)}.expansion-button-wrapper .expansion-btn.initial{width:16px}.expansion-button-wrapper .expansion-btn.slide-left,.expansion-button-wrapper .expansion-btn.slide-right{width:25px}.expansion-button-wrapper .expansion-btn .arrow-icon{height:16px;width:16px}\n"],encapsulation:2})}}const rI=["*"],oI=o=>({show:o});function lI(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"crt-expansion-button",2),i.\u0275\u0275listener("toggle",function(){i.\u0275\u0275restoreView(t);const a=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(a.onToggle())}),i.\u0275\u0275elementEnd()}if(2&o){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("direction",null==t.panelConfig?null:t.panelConfig.direction)("animationDisabled",null==t.panelConfig?null:t.panelConfig.animationDisabled)("isExpanded",t.isExpanded)}}class ty{constructor(){this.isExpanded=!1,this.toggle=new i.EventEmitter}onToggle(){this.toggle.emit()}static{this.\u0275fac=function(t){return new(t||ty)}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:ty,selectors:[["ts-vertical-expansion-panel"]],inputs:{isExpanded:"isExpanded",panelConfig:"panelConfig"},outputs:{toggle:"toggle"},ngContentSelectors:rI,decls:4,vars:7,consts:[["class","expansion-button",3,"direction","animationDisabled","isExpanded","toggle",4,"ngIf"],[1,"panel",3,"ngClass"],[1,"expansion-button",3,"toggle","direction","animationDisabled","isExpanded"]],template:function(t,n){1&t&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275template(1,lI,1,3,"crt-expansion-button",0),i.\u0275\u0275elementStart(2,"div",1),i.\u0275\u0275projection(3),i.\u0275\u0275elementEnd()()),2&t&&(i.\u0275\u0275classMapInterpolate1("container button-placement-",null==n.panelConfig?null:n.panelConfig.direction,""),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",null==n.panelConfig?null:n.panelConfig.showToggleButton),i.\u0275\u0275advance(),i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(5,oI,n.isExpanded)))},dependencies:[R.NgClass,R.NgIf,Om],styles:[".container[_ngcontent-%COMP%]{position:relative;height:100%}.expansion-button[_ngcontent-%COMP%]{position:absolute;z-index:3}.button-placement-left[_ngcontent-%COMP%]   .expansion-button[_ngcontent-%COMP%]{right:calc(100% + 10px)}.button-placement-right[_ngcontent-%COMP%]   .expansion-button[_ngcontent-%COMP%]{left:100%}.panel[_ngcontent-%COMP%]{display:none}.panel.show[_ngcontent-%COMP%]{display:flex;height:100%}"],changeDetection:0})}}class ny{static{this.\u0275fac=function(t){return new(t||ny)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:ny})}static{this.\u0275inj=i.\u0275\u0275defineInjector({})}}class iy{static{this.\u0275fac=function(t){return new(t||iy)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:iy})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[R.CommonModule]})}}const cI=["*"];function uI(o,e){if(1&o&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"img",3),i.\u0275\u0275elementContainerEnd()),2&o){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(),i.\u0275\u0275propertyInterpolate("src",null==t.contact?null:t.contact.photo,i.\u0275\u0275sanitizeUrl)}}function dI(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"span",4),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&o){const t=i.\u0275\u0275nextContext();i.\u0275\u0275styleProp("background",t.contactColor),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(t.getInitials())}}class ay{constructor(){this.contactClick=new i.EventEmitter}getInitials(){return this.contact&&this.contact.name?this.contact.name.replace(/\s+/g," ").trim().split(" ",2).map(function(t){return t.substr(0,1).toUpperCase()}).join(""):""}contactClicked(){return this.contactClick.emit({contactId:this.contact.id}),!1}static{this.\u0275fac=function(t){return new(t||ay)}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:ay,selectors:[["ts-contact-photo"]],inputs:{contact:"contact",contactColor:"contactColor"},outputs:{contactClick:"contactClick"},ngContentSelectors:cI,decls:5,vars:2,consts:[["noPhoto",""],[3,"click"],[4,"ngIf","ngIfElse"],["alt","Contact photo",1,"contact-photo",3,"src"],[1,"contact-photo","no-photo"]],template:function(t,n){if(1&t){const a=i.\u0275\u0275getCurrentView();i.\u0275\u0275projectionDef(),i.\u0275\u0275elementStart(0,"div",1),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.contactClicked())}),i.\u0275\u0275template(1,uI,2,1,"ng-container",2)(2,dI,2,3,"ng-template",null,0,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275projection(4),i.\u0275\u0275elementEnd()}if(2&t){const a=i.\u0275\u0275reference(3);i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",n.contact.photo)("ngIfElse",a)}},dependencies:[R.NgIf],styles:[".contact-photo[_ngcontent-%COMP%]{border-radius:50%;width:32px;height:32px;cursor:pointer}.contact-photo.no-photo[_ngcontent-%COMP%]{text-align:center;line-height:2.2em;font-size:14px;display:inline-block;min-width:32px;min-height:32px;color:#fff}"]})}}function pI(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"mat-form-field",1)(1,"mat-label"),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"input",2),i.\u0275\u0275listener("keydown.enter",function(a){i.\u0275\u0275restoreView(t);const r=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(r.onEnterKeyDown(a))}),i.\u0275\u0275elementEnd()()}if(2&o){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngStyle",t.styles)("ngClass",t.classes),i.\u0275\u0275attribute("id",t.id),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.caption),i.\u0275\u0275advance(),i.\u0275\u0275property("formControl",t.value)("value",null==t.value?null:t.value.value)}}let Sc=class Sh extends Wt{constructor(){super(...arguments),this.enterKeyDown=new i.EventEmitter}onEnterKeyDown(e){this.enterKeyDown.next(e)}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(Sh)))(n||Sh)}})()}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:Sh,selectors:[["ts-input"]],inputs:{caption:"caption",value:"value"},outputs:{enterKeyDown:"enterKeyDown"},features:[i.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[["class","full-width ts-input","appearance","fill",3,"ngStyle","ngClass",4,"ngIf"],["appearance","fill",1,"full-width","ts-input",3,"ngStyle","ngClass"],["matInput","","autocomplete","off",3,"keydown.enter","formControl","value"]],template:function(t,n){1&t&&i.\u0275\u0275template(0,pI,4,6,"mat-form-field",0),2&t&&i.\u0275\u0275property("ngIf",n.value)},dependencies:[R.NgClass,R.NgIf,R.NgStyle,ce.me,ce.BC,ve.Ky,ve.aw,Ue.aL,ce.l_],encapsulation:2})}};(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",String)],Sc.prototype,"caption",void 0),(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",ce.MJ)],Sc.prototype,"value",void 0),(0,I.Cg)([(0,c.CrtOutput)(),(0,I.Sn)("design:type",Object)],Sc.prototype,"enterKeyDown",void 0),Sc=(0,I.Cg)([(0,c.CrtViewElement)({type:"crt.DeprecatedInput",formControlConfig:{relatesTo:"value"},reuseStrategy:c.ViewElementReuseStrategy.Reuse})],Sc);jt.None,jt.ExtraSmall,jt.Small,jt.Medium,jt.Large;const mI=["default-file-icon","file-excel","file-image","file-pdf","file-powerpoint","file-word"];var hI=b(66900),yd=b(70602),gI=b(52014);class vc{constructor(e){this.httpClient=e,this.serviceEndpoint="ServiceModel/RightManagementService.svc/"}saveAdministratedObject(e){const t=this.serviceEndpoint+"SaveAdministratedObject";return this.httpClient.post(t,{administratedObject:e})}getAdministratedObject(e){const t=this.serviceEndpoint+"GetAdministratedObject";return this.httpClient.post(t,{schemaUId:e})}getAdministratedObjects(e){let t;switch(e){case pc.Section:t="GetSectionObjects";break;case pc.Lookup:t="GetLookupObjects";break;case pc.All:default:t="GetAllObjects"}const n=this.serviceEndpoint+t;return this.httpClient.post(n,null)}getSysAdminUnitList(){if(!this._getSysAdminUnitList$){const e=this.serviceEndpoint+"GetSysAdminUnitList";this._getSysAdminUnitList$=this.httpClient.post(e,null).pipe((0,Tt.t)(1)),this._getSysAdminUnitList$.subscribe()}return this._getSysAdminUnitList$}getSysAdminUnitById(e){const t=this.serviceEndpoint+"GetSysAdminUnitById";return this.httpClient.post(t,{sysAdminUnitId:e})}static{this.\u0275fac=function(t){return new(t||vc)(i.\u0275\u0275inject(F.HttpClient))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:vc,factory:vc.\u0275fac})}}class Vm{static{this.\u0275fac=function(t){return new(t||Vm)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:Vm})}static{this.\u0275inj=i.\u0275\u0275defineInjector({providers:[vc],imports:[re.Ph,re.Rm,re.Ss,R.CommonModule,hI.ad,ce.YN,Xt.KR,Ve.wG,mt.Dy,he.eB,ui.w,ra.MY,be.m_,Ue.mz,hn.bB,Ei.kg,gI.jm,wf.NQ,Mf.GR,Ht.qh,oa.T7,nt.jH,ve.C,re.Ec,v.h,yd.E9,yd.d6]})}}class Ic{static{this.\u0275fac=function(t){return new(t||Ic)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:Ic})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[R.CommonModule,Be.B4]})}}class _d{constructor(e){this._queryExecutor=e}_getColumnPath(e){return"string"==typeof e?e:e.columnPath}_addSchemaColumn(e,t){e.addSchemaColumn(this._getColumnPath(t))}_addPrimaryColumnIfNeeded(e,t,n){const a=e.getPrimaryColumn().name;t.some(r=>this._getColumnPath(r)===a)||n.addSchemaColumn(a)}_getEsqOrderDirection(e){return e?"asc"===e?c.OrderDirection.Asc:c.OrderDirection.Desc:c.OrderDirection.None}_applySort(e,t){if(!t?.sort)return;const n=this._getEsqOrderDirection(t.sort.direction);e.getColumn(t.sort.columnName).withOrdering(n,0)}_buildEsq(e,t){const n=new c.EntitySchemaQuery(e.name);return t.columns.forEach(a=>this._addSchemaColumn(n,a)),this._addPrimaryColumnIfNeeded(e,t.columns,n),this._applySort(n,t),t.filter&&n.filters.add(t.filter),n.rowCount=t.rowCount,n.rowsOffset=t.rowsOffset,n}loadEntityData(e,t){c.ValidationUtilities.checkArgumentEmpty("entitySchema",e),c.ValidationUtilities.checkArgumentEmpty("config",t);const n=this._buildEsq(e,t);return this._queryExecutor.executeSelectQuery(n)}static{this.\u0275fac=function(t){return new(t||_d)(i.\u0275\u0275inject(Ae))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:_d,factory:_d.\u0275fac,providedIn:"root"})}}class Cd{_mapEntityColumnDataSchema(e){return{name:e.name,caption:e.caption,valueType:e.dataValueType}}_getColumnPath(e){return"string"==typeof e?e:e.columnPath}buildTableDataSchema(e,t){c.ValidationUtilities.checkArgumentEmpty("entitySchema",e),c.ValidationUtilities.checkArgumentEmpty("columns",t);const n=t.map(r=>e.columns.find(u=>this._getColumnPath(r)===u.name)),a=e.getPrimaryColumn().name;return{columns:n.map(this._mapEntityColumnDataSchema.bind(this)),trackBy:r=>r[a]}}static{this.\u0275fac=function(t){return new(t||Cd)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Cd,factory:Cd.\u0275fac,providedIn:"root"})}}const fI=["tableNgContainer"],yI=["dataViewWrapper"];class Lm{set config(e){this._validateConfig(e);const t=this._config;this._config=e,(0,j.A)(e,t)||this._applyConfig(e,t)}get sort(){return this._sort}get selectedRecords(){if(!this._entitySchema)return[];const e=this._entitySchema.getPrimaryColumn().name;return this.selectedIds?this._data.filter(t=>this.selectedIds.includes(t[e])):[]}set selectedRecords(e){const t=this._entitySchema.getPrimaryColumn().name,n=this.selectedIds.filter(u=>!this.data.some(p=>p[t]===u)),a=new Set(this.selectedIds),r=new Set(e.map(u=>u[t]).concat(n));this.selectedIds=[...r],(0,j.A)(a,r)||this.selectedIdsChange.emit(this.selectedIds)}get tableDataSchema(){return this._tableDataSchema}get data(){return this._data}get tableConfig(){return this._config?.tableConfig}constructor(e,t,n,a,r){this._restHandler=e,this._entitySchemaService=t,this._loaderService=n,this._tableDataSchemaBuilder=a,this._scrollToBottomObserverFactory=r,this._destroyed$=new h.Subject,this._defaultPageSize=20,this._data=[],this._tableDataSchema={columns:[]},this._allPagesWasLoaded=!1,this._isDataLoading=!1,this.selectedIds=[],this.selectedIdsChange=new i.EventEmitter,this.dataChange=new i.EventEmitter,this.rowDoubleClick=new i.EventEmitter}_setTableDataChange(){this._table.dataSchema=this.tableDataSchema,this._table.config=this.tableConfig,this._table.data=this.data}_renderTableComponent(e){var t=this;return(0,A.A)(function*(){yield Promise.resolve().then(b.bind(b,25612)).then(n=>{const a=n.TableComponent;t._tableRef=e.createComponent(a),t._table=t._tableRef.instance,t.dataChange.subscribe(()=>t._setTableDataChange()),t._table.selectedChange.subscribe(r=>t.selectedRecords=r),t._table.sortChange.subscribe(r=>t.onSortChange(r)),t._table.rowDoubleClick.subscribe(r=>t.rowDoubleClick.emit(r))})})()}_getPageSize(e){return e.pageSize??this._defaultPageSize}_afterLoaded(e,t){const n=t.length<this._getPageSize(e);this._allPagesWasLoaded=n,this.dataChange.emit({data:this._data.slice(),isLastPage:n})}_executeLoading(e,t){const n=this._restHandler.handleRequest(t()).pipe((0,ie.u)());return n.subscribe(a=>this._afterLoaded(e,a)),n}_validateConfig(e){if(c.ValidationUtilities.checkArgumentEmpty("config",e),c.ValidationUtilities.checkArgumentEmpty("entitySchema",e.entitySchema),"string"==typeof e.entitySchema&&c.ValidationUtilities.checkStringIsNotEmpty("entitySchema",e.entitySchema),c.ValidationUtilities.checkArgumentEmpty("columns",e.columns),0===e.columns.length)throw new Error("Entity data view config should contain at least one column.")}_initScrollToBottomObserver(){this._scrollToBottomObserver=this._scrollToBottomObserverFactory.createObserver(this.dataViewWrapper.nativeElement,this._onScrollToBottom.bind(this))}_initDefaultSort(e,t){const n=e.getPrimaryDisplayColumn()?.name,r=n&&t.columns.some(u=>this._getColumnPath(u)===n)?n:this._getColumnPath(t.columns[0]);this._sort={columnName:r,direction:"asc"}}_getEntitySchema(e){if("object"==typeof e)return this._entitySchema=e,(0,h.of)(e);const t=this._restHandler.handleRequest(this._entitySchemaService.getEntitySchemaByUId(e),{skipBodyMask:!0}).pipe((0,_e.Q)(this._destroyed$),(0,E.T)(n=>n.entitySchema),(0,ie.u)());return t.subscribe(n=>this._entitySchema=n),t}_prepareLoaderFilters(e){let t=null;if(e.excludedIds?.length>0){let n;n=new c.FilterGroup,n.addSchemaColumnInFilterWithParameters(c.ComparisonType.Not_equal,this._entitySchema.getPrimaryColumn().name,e.excludedIds),e.filter&&n.add(e.filter),t=n}else t=e.filter;return t}_createDefaultLoaderConfig(e){return{rowCount:this._getPageSize(e),rowsOffset:-1,sort:this._sort,columns:e.columns,filter:this._prepareLoaderFilters(e)}}_loadRows(e,t){return this._isDataLoading=!0,this._loaderService.loadEntityData(e,t).pipe((0,Ne.s)(1),(0,P.M)(()=>this._isDataLoading=!1),(0,_e.Q)(this._destroyed$),(0,ie.u)())}_loadNextData(e,t){const n=this._createDefaultLoaderConfig(t);n.rowsOffset=this._data.length;const a=this._loadRows(e,n);return a.subscribe(r=>this._data=this._data.concat(r)),a}_getColumnPath(e){return"string"==typeof e?e:e.columnPath}_resetScroll(){this.dataViewWrapper?.nativeElement&&(this.dataViewWrapper.nativeElement.scrollTop=0),this._scrollToBottomObserver?.resetScrollMaxPosition()}_loadFirstData(e,t){this._resetScroll();const n=this._createDefaultLoaderConfig(t),a=this._loadRows(e,n);return this._data=[],a.subscribe(r=>{this._data=r,this._tableDataSchema=this._tableDataSchemaBuilder.buildTableDataSchema(e,t.columns)}),a}_applyConfig(e,t){const n=e.columns;let a;if(t&&(0,j.A)(e.entitySchema,t.entitySchema)){const r=!(0,j.A)(n,t.columns);r&&this._initDefaultSort(this._entitySchema,e),this._entitySchema&&(r||!(0,j.A)(e.filter,t.filter)||!(0,j.A)(e.excludedIds,t.excludedIds))&&(a=this._loadFirstData(this._entitySchema,e))}else a=this._getEntitySchema(e.entitySchema).pipe((0,P.M)(r=>this._initDefaultSort(r,e)),(0,Y.Z)(r=>this._loadFirstData(r,e)));a&&this._executeLoading(e,()=>a)}_onScrollToBottom(){if(this._isDataLoading||this._allPagesWasLoaded)return;const e=this._config;this._executeLoading(e,()=>this._loadNextData(this._entitySchema,e))}onSortChange(e){if((0,j.A)(e,this._sort))return;const t=this._config;this._sort=e,this._executeLoading(t,()=>this._loadFirstData(this._entitySchema,t))}ngOnInit(){var e=this;return(0,A.A)(function*(){yield e._renderTableComponent(e.tableNgContainer)})()}ngOnChanges(e){this._tableRef?.setInput("selected",this.selectedRecords)}ngAfterViewInit(){this._initScrollToBottomObserver()}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete(),this._scrollToBottomObserver.destroy()}static{this.\u0275fac=function(t){return new(t||Lm)(i.\u0275\u0275directiveInject(_.DXo),i.\u0275\u0275directiveInject(_.eut),i.\u0275\u0275directiveInject(_d),i.\u0275\u0275directiveInject(Cd),i.\u0275\u0275directiveInject(_.Stw))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:Lm,selectors:[["ts-entity-data-view"]],viewQuery:function(t,n){if(1&t&&(i.\u0275\u0275viewQuery(fI,7,i.ViewContainerRef),i.\u0275\u0275viewQuery(yI,7)),2&t){let a;i.\u0275\u0275queryRefresh(a=i.\u0275\u0275loadQuery())&&(n.tableNgContainer=a.first),i.\u0275\u0275queryRefresh(a=i.\u0275\u0275loadQuery())&&(n.dataViewWrapper=a.first)}},inputs:{config:"config",selectedIds:"selectedIds"},outputs:{selectedIdsChange:"selectedIdsChange",dataChange:"dataChange",rowDoubleClick:"rowDoubleClick"},features:[i.\u0275\u0275NgOnChangesFeature],decls:4,vars:2,consts:[["dataViewWrapper",""],["tableNgContainer",""],[1,"entity-data-view-wrapper"]],template:function(t,n){1&t&&(i.\u0275\u0275elementStart(0,"div",2,0),i.\u0275\u0275elementContainer(2,null,1),i.\u0275\u0275elementEnd()),2&t&&i.\u0275\u0275styleProp("display",n.data.length>0?null:"none")},styles:[".entity-data-view-wrapper[_ngcontent-%COMP%]{height:100%;overflow:auto}"]})}}const _I=o=>({"lookup-dialog-counter-value-hidden":o});function CI(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"ts-quick-entity-filter",14),i.\u0275\u0275listener("valueChange",function(a){i.\u0275\u0275restoreView(t);const r=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(r.onFilterChanged(a))}),i.\u0275\u0275elementEnd()}if(2&o){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("entitySchema",t.entitySchema)}}function bI(o,e){1&o&&i.\u0275\u0275element(0,"mat-spinner",20)}function SI(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"div",15)(1,"span",16),i.\u0275\u0275text(2),i.\u0275\u0275pipe(3,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",17)(5,"div",18),i.\u0275\u0275text(6),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(7,bI,1,0,"mat-spinner",19),i.\u0275\u0275elementEnd()()),2&o){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(3,4,"LookupDialog.Selected")),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(6,_I,null===t.displayedSelectedRecordsCount)),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(t.displayedSelectedRecordsCount||0),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",null===t.displayedSelectedRecordsCount)}}function vI(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"ts-entity-data-view",21),i.\u0275\u0275listener("dataChange",function(a){i.\u0275\u0275restoreView(t);const r=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(r.onEntityRecordsLoaded(a))}),i.\u0275\u0275twoWayListener("selectedIdsChange",function(a){i.\u0275\u0275restoreView(t);const r=i.\u0275\u0275nextContext();return i.\u0275\u0275twoWayBindingSet(r.selectedIds,a)||(r.selectedIds=a),i.\u0275\u0275resetView(a)}),i.\u0275\u0275listener("selectedIdsChange",function(){i.\u0275\u0275restoreView(t);const a=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(a.onSelectedIdsChange())})("rowDoubleClick",function(a){i.\u0275\u0275restoreView(t);const r=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(r.onRowDoubleClick(a))}),i.\u0275\u0275elementEnd()}if(2&o){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("config",t.entityDataViewConfig),i.\u0275\u0275twoWayProperty("selectedIds",t.selectedIds)}}function II(o,e){1&o&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"span"),i.\u0275\u0275text(2),i.\u0275\u0275pipe(3,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&o&&(i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(3,1,"LookupDialog.Blankslate")))}function TI(o,e){1&o&&(i.\u0275\u0275elementStart(0,"span"),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"translate"),i.\u0275\u0275elementEnd()),2&o&&(i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(2,1,"BaseTableDetail.BlankslateWithFilters")))}function DI(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"div",22),i.\u0275\u0275template(1,II,4,3,"ng-container",23)(2,TI,3,3,"ng-template",null,0,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()),2&o){const t=i.\u0275\u0275reference(3),n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",!n.entityFilter)("ngIfElse",t)}}class bd{get entityFilter(){return this._quickEntityFilter}get entityDataViewConfig(){return{entitySchema:this._entitySchema,columns:this._getDisplayedColumns(),tableConfig:this._getTableConfig(),excludedIds:this._getLookupDialogConfig().excludedIds,filter:this._quickEntityFilter,pageSize:this._pageSize}}get selectMode(){return this._dialogData.tableConfig.selectMode}get entitySchema(){return this._entitySchema}get defaultBlankslateVisible(){return this._defaultBlankslateVisible}get displayedSelectedRecordsCount(){return this._allPagesSelectionEnabled?this._allPagesSelectedCount:this._loadedSelectedCount}constructor(e,t,n,a,r,u,p){this._dialogData=e,this._dialogRef=t,this._entitySchemaService=n,this._restHandler=a,this._translateService=r,this._queryExecutor=u,this._dialogService=p,this._pageSize=20,this._allPagesSelectionWarningRecordsNumber=1e3,this._destroyed$=new h.Subject,this._allPagesRecordsCountRequestCancel$=new h.Subject,this._defaultBlankslateVisible=!1,this._loadedRecords=[],this._allPagesWasLoaded=!1,this._allPagesSelectionEnabled=!1,this._allPagesUnselectedIds=null,this._allPagesRecordsCount=null,this._allPagesSelectedCount=null,this._allRowsSelectState=null,this._loadedSelectedCount=0,this.selectedIds=[],c.ValidationUtilities.checkArgumentEmpty("data",e),c.ValidationUtilities.checkArgumentEmpty("lookupDialogConfig",e.lookupDialogConfig),this.selectedIds=e.lookupDialogConfig.selectedIds?.slice()??[],this._getEntitySchema(e.lookupDialogConfig.entitySchema).pipe((0,_e.Q)(this._destroyed$)).subscribe(f=>this._entitySchema=f),this._applyIncomingFilter()}_getPrimaryColumnName(){return this._entitySchema.getPrimaryColumn().name}_getLoadedRecordIds(){const e=this._getPrimaryColumnName();return this._loadedRecords.map(t=>t[e])}_unselectAllExceptLoaded(){const e=this.selectedIds;this.selectedIds=this._getLoadedRecordIds().filter(t=>e.includes(t))}_getLookupDialogConfig(){return this._dialogData.lookupDialogConfig}_actualizeLoadedSelectedCount(){this._loadedSelectedCount=this.selectedIds.length}_canExistNotLoadedSelectedRecords(e){return e===Be.KI.None&&!this._allPagesSelectionEnabled&&!this._allPagesWasLoaded}_actualizeAllPagesUnselectedIds(){const e=this.selectedIds,t=this._getLoadedRecordIds(),n=t.filter(r=>!e.includes(r)),a=t.filter(r=>e.includes(r));for(const r of n)this._allPagesUnselectedIds.add(r);for(const r of a)this._allPagesUnselectedIds.delete(r)}_calculateAllPagesSelectedCount(){this._allPagesSelectedCount=null===this._allPagesRecordsCount?null:this._allPagesRecordsCount-this._allPagesUnselectedIds.size}_setAllPagesRecordsCount(e){this._allPagesRecordsCount=e,this._calculateAllPagesSelectedCount()}_handleRequest(e){return t=>this._restHandler.handleRequest(t,e)}_getDisplayedColumns(){let e=this._getLookupDialogConfig().displayedColumns;if(!e){const t=this._entitySchema.getPrimaryDisplayColumn();e=t?[t.name]:[this._getPrimaryColumnName()]}return e}_getTableConfig(){return{...this._dialogData.tableConfig,allRowsSelectState:()=>this._allRowsSelectState,allRowsSelectToggleHandler:()=>this._allRowsSelectToggle()}}_applyIncomingFilter(){const e=this._getLookupDialogConfig().filter;e&&(this._quickEntityFilter||(this._quickEntityFilter=new c.FilterGroup),this._quickEntityFilter.add(e))}_getEntitySchema(e){return"object"==typeof e?(0,h.of)(e):this._entitySchemaService.getEntitySchemaByUId(e).pipe(this._handleRequest(),(0,E.T)(t=>t.entitySchema))}_actualizeDefaultBlankslateVisibility(e){this._defaultBlankslateVisible=0===e.length}_confirmAllPagesSelection(){if(this.displayedSelectedRecordsCount<this._allPagesSelectionWarningRecordsNumber)return(0,h.of)(!0);const e=this._translateService.instant("LookupDialog.AllPagesSelectionWarning");return this._dialogService.openConfirmationDialog(e).pipe((0,E.T)(t=>t===re.ch.result))}_enableAllPagesSelection(){this._unselectAllExceptLoaded(),this._allPagesSelectionEnabled=!0,this._allPagesRecordsCount||this._loadAllPagesRecordsCount(),this._allRowsSelectState=Be.KI.All,this._allPagesUnselectedIds=new Set}_disableAllPagesSelection({unselectAllRecords:e}){this._allPagesRecordsCountRequestCancel$.next(),this._allPagesSelectionEnabled=!1,e&&(this.selectedIds=[],this._allRowsSelectState=Be.KI.None),this._actualizeLoadedSelectedCount(),this._allPagesUnselectedIds=null}_createAllFilteredRecordsEsq(){const e=this._getPrimaryColumnName(),t=new c.EntitySchemaQuery(this._entitySchema.name);this._quickEntityFilter&&t.filters.add(this._quickEntityFilter);const n=this._getLookupDialogConfig().excludedIds;return n?.length>0&&t.filters.addSchemaColumnInFilterWithParameters(c.ComparisonType.Not_equal,e,n),t}_createAllFilteredIdsEsq(){const e=this._createAllFilteredRecordsEsq();return e.addSchemaColumn(this._getPrimaryColumnName()),e}_loadAllPagesRecordsCount(){const e=this._getPrimaryColumnName(),t=this._createAllFilteredRecordsEsq();t.addAggregationFunctionColumn(e,c.AggregationType.Count,"Count"),this._queryExecutor.executeSelectQuery(t).pipe(this._handleRequest({skipBodyMask:!0}),(0,_e.Q)((0,h.merge)(this._allPagesRecordsCountRequestCancel$,this._destroyed$)),(0,ue.W)(()=>(this._disableAllPagesSelection({unselectAllRecords:!1}),h.EMPTY)),(0,E.T)(n=>n[0].Count)).subscribe(n=>this._setAllPagesRecordsCount(n))}_loadIsAnyRecordExist(e){const t=this._createAllFilteredIdsEsq();return t.rowCount=1,e(t),this._queryExecutor.executeSelectQuery(t).pipe((0,_e.Q)(this._destroyed$),this._handleRequest({maskDelay:0}),(0,E.T)(n=>1===n.length),(0,ue.W)(()=>(0,h.of)(!0)),(0,Tt.t)())}_clearNotLoadedRecordsCachedInfo(){this._isAnyNotLoadedRecordSelected$=null,this._isAnyNotLoadedRecordUnselected$=null}_loadIsAnyNotLoadedRecordSelected(){return this._isAnyNotLoadedRecordSelected$??(this._isAnyNotLoadedRecordSelected$=this._loadIsAnyRecordExist(e=>e.filters.addSchemaColumnInFilterWithParameters(c.ComparisonType.Equal,this._getPrimaryColumnName(),this.selectedIds)))}_loadIsAnyNotLoadedRecordUnselected(){return this._isAnyNotLoadedRecordUnselected$??(this._isAnyNotLoadedRecordUnselected$=this._loadIsAnyRecordExist(e=>e.filters.addSchemaColumnInFilterWithParameters(c.ComparisonType.Not_equal,this._getPrimaryColumnName(),this.selectedIds)))}_loadAllPagesSelectedIds(){const e=this._getPrimaryColumnName(),t=this._getLoadedRecordIds().filter(n=>this._allPagesUnselectedIds.has(n));return this._queryExecutor.executeSelectQuery(this._createAllFilteredIdsEsq()).pipe((0,_e.Q)(this._destroyed$),this._handleRequest(),(0,E.T)(n=>n.map(a=>a[e])),(0,E.T)(n=>n.filter(a=>!t.includes(a))))}_actualizeAllRowsSelectState(){let e;const t=this._getLoadedRecordIds(),n=t.length>0&&t.some(r=>this.selectedIds.includes(r)),a=n&&t.every(r=>this.selectedIds.includes(r));return e=0===this.selectedIds.length||!n&&this._allPagesWasLoaded?(0,h.of)(Be.KI.None):a&&(this._allPagesWasLoaded||this._allPagesSelectionEnabled)?(0,h.of)(Be.KI.All):n&&!a?(0,h.of)(Be.KI.Intermediate):n?this._loadIsAnyNotLoadedRecordUnselected().pipe((0,E.T)(r=>r?Be.KI.Intermediate:Be.KI.All)):this._loadIsAnyNotLoadedRecordSelected().pipe((0,E.T)(r=>r?Be.KI.Intermediate:Be.KI.None)),e.subscribe(r=>this._allRowsSelectState=r),e}_unselectNotLoadedRecords(){const e=this._getPrimaryColumnName(),t=this._createAllFilteredIdsEsq();t.filters.addSchemaColumnInFilterWithParameters(c.ComparisonType.Equal,e,this.selectedIds);const n=this._queryExecutor.executeSelectQuery(t).pipe(this._handleRequest(),(0,_e.Q)((0,h.merge)(this._destroyed$)),(0,E.T)(a=>a.map(r=>r[e])),(0,ue.W)(()=>(0,h.of)([])),(0,ie.u)());return n.subscribe(a=>{this.selectedIds=this.selectedIds.filter(r=>!a.includes(r))}),n}_toggleLoadedRecordsSelection(e){const t=this._getLoadedRecordIds();e===Be.KI.None?this.selectedIds=this.selectedIds.filter(n=>!t.includes(n)):this.selectedIds=[...new Set(this.selectedIds.concat(t))]}_toggleAllPagesSelectionIfRequired(e){const t=!this._allPagesSelectionEnabled&&this.selectedIds.length>0&&e===Be.KI.All&&!this._allPagesWasLoaded,n=this._allPagesSelectionEnabled&&e===Be.KI.None;return t?(this._enableAllPagesSelection(),!0):n?(this._disableAllPagesSelection({unselectAllRecords:!0}),!1):null}_allRowsSelectToggle(){const e=this._allRowsSelectState===Be.KI.All?Be.KI.None:Be.KI.All;this._allRowsSelectState=e,this._toggleLoadedRecordsSelection(e),this._canExistNotLoadedSelectedRecords(e)?(this._loadedSelectedCount=null,this._unselectNotLoadedRecords().subscribe(()=>this._actualizeLoadedSelectedCount())):this._actualizeLoadedSelectedCount(),null===this._toggleAllPagesSelectionIfRequired(e)&&this._allPagesSelectionEnabled&&(this._allPagesUnselectedIds.clear(),this._calculateAllPagesSelectedCount())}_resetSelectionOnFilterChanged(){this._allPagesSelectionEnabled&&this._disableAllPagesSelection({unselectAllRecords:!0}),"multi"!==this.selectMode&&(this.selectedIds=[]),this._setAllPagesRecordsCount(null),this._allRowsSelectState=null}_closeWithSelection(e){const t=this._getPrimaryColumnName();this._dialogRef.close({selectedIds:e,selectedRecords:this._loadedRecords.filter(n=>e.includes(n[t]))})}getDialogTitle(){if(!this._entitySchema)return"";const e=this._translateService.instant("LookupDialog.TitleTemplate");return He.Qf.Format(e,this._entitySchema.caption)}ngOnDestroy(){this._destroyed$.next()}onFilterChanged(e){this._resetSelectionOnFilterChanged(),this._quickEntityFilter=e,this._applyIncomingFilter()}onEntityRecordsLoaded({data:e,isLastPage:t}){if(this._loadedRecords=e,this._clearNotLoadedRecordsCachedInfo(),this._actualizeDefaultBlankslateVisibility(e),this._allPagesWasLoaded=t,this._allPagesSelectionEnabled){const n=this._getPrimaryColumnName();this.selectedIds=e.map(a=>a[n]).filter(a=>!this._allPagesUnselectedIds.has(a)),this._actualizeLoadedSelectedCount(),t&&this._disableAllPagesSelection({unselectAllRecords:!1})}!this._allRowsSelectState&&"multi"===this.selectMode&&this._actualizeAllRowsSelectState()}isAnyRecordSelected(){return this.displayedSelectedRecordsCount>0}onRowDoubleClick(e){if("single"!==this.selectMode)return;const t=this._getPrimaryColumnName();this._dialogRef.close({selectedIds:[e[t]],selectedRecords:[e]})}closeWithCurrentSelection(){this._allPagesSelectionEnabled?this._confirmAllPagesSelection().pipe((0,se.p)(e=>e),(0,Y.Z)(()=>this._loadAllPagesSelectedIds())).subscribe(e=>this._closeWithSelection(e)):this._closeWithSelection(this.selectedIds)}onSelectedIdsChange(){this._allPagesSelectionEnabled?(this._actualizeAllPagesUnselectedIds(),this._calculateAllPagesSelectedCount()):this._actualizeLoadedSelectedCount(),this._actualizeAllRowsSelectState()}static{this.\u0275fac=function(t){return new(t||bd)(i.\u0275\u0275directiveInject(he.xh),i.\u0275\u0275directiveInject(he.RN),i.\u0275\u0275directiveInject(_.eut),i.\u0275\u0275directiveInject(_.DXo),i.\u0275\u0275directiveInject(v.c$),i.\u0275\u0275directiveInject(Ae),i.\u0275\u0275directiveInject(re.o3))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:bd,selectors:[["ts-lookup-dialog"]],decls:20,vars:12,consts:[["blankslateWithFilters",""],["mat-dialog-title",""],["mat-icon-button","",1,"close-dialog",3,"mat-dialog-close"],["svgIcon","close",1,"close-button-icon"],[1,"lookup-dialog-top-panel"],[1,"dialog-filters"],[3,"entitySchema","valueChange",4,"ngIf"],["class","counter-container",4,"ngIf"],["mat-dialog-content",""],[3,"config","selectedIds","dataChange","selectedIdsChange","rowDoubleClick",4,"ngIf"],["class","lookup-dialog-blank-slate",4,"ngIf"],["mat-dialog-actions",""],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"],["mat-flat-button","","color","primary",3,"click","disabled"],[3,"valueChange","entitySchema"],[1,"counter-container"],[1,"counter-label"],[1,"lookup-dialog-counter-value-wrapper"],[1,"counter-value",3,"ngClass"],["diameter","18",4,"ngIf"],["diameter","18"],[3,"dataChange","selectedIdsChange","rowDoubleClick","config","selectedIds"],[1,"lookup-dialog-blank-slate"],[4,"ngIf","ngIfElse"]],template:function(t,n){1&t&&(i.\u0275\u0275elementStart(0,"div",1)(1,"div")(2,"span"),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"button",2),i.\u0275\u0275element(5,"mat-icon",3),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275elementStart(6,"div",4)(7,"div",5),i.\u0275\u0275template(8,CI,1,1,"ts-quick-entity-filter",6),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(9,SI,8,8,"div",7),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"div",8),i.\u0275\u0275template(11,vI,1,2,"ts-entity-data-view",9)(12,DI,4,2,"div",10),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(13,"div",11)(14,"button",12),i.\u0275\u0275text(15),i.\u0275\u0275pipe(16,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(17,"button",13),i.\u0275\u0275listener("click",function(){return n.closeWithCurrentSelection()}),i.\u0275\u0275text(18),i.\u0275\u0275pipe(19,"translate"),i.\u0275\u0275elementEnd()()),2&t&&(i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(n.getDialogTitle()),i.\u0275\u0275advance(5),i.\u0275\u0275property("ngIf",n.entitySchema),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf","multi"===n.selectMode),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",n.entitySchema),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",n.defaultBlankslateVisible),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(16,8,"LookupDialog.CancelButton")),i.\u0275\u0275advance(2),i.\u0275\u0275property("disabled",!n.isAnyRecordSelected()),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(19,10,"LookupDialog.SelectButton")))},dependencies:[R.NgClass,R.NgIf,Lm,Ve.iV,he.kQ,he.KI,he.PQ,he.$t,be.An,di.wS,Em,v.D9],styles:["[_nghost-%COMP%]{padding:4px 10px;width:834px;max-width:100%;min-width:420px;box-sizing:border-box}.counter-container[_ngcontent-%COMP%]{display:flex;align-items:baseline}.counter-container[_ngcontent-%COMP%]   .counter-label[_ngcontent-%COMP%]{font-size:13px;color:#757575;margin-right:4px}.counter-container[_ngcontent-%COMP%]   .lookup-dialog-counter-value-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center}.counter-container[_ngcontent-%COMP%]   .lookup-dialog-counter-value-wrapper[_ngcontent-%COMP%]   .counter-value[_ngcontent-%COMP%]{font-size:14px;color:#444}.counter-container[_ngcontent-%COMP%]   .lookup-dialog-counter-value-wrapper[_ngcontent-%COMP%]   .counter-value.lookup-dialog-counter-value-hidden[_ngcontent-%COMP%]{visibility:hidden;width:0}[mat-dialog-content][_ngcontent-%COMP%]{max-height:55vh!important;min-height:267px;height:862px}[mat-dialog-content][_ngcontent-%COMP%]   .lookup-dialog-blank-slate[_ngcontent-%COMP%]{display:flex;justify-content:center;font-size:14px;color:#999;text-align:center;padding-top:22px}[mat-dialog-actions][_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end}"]})}}class Sd{constructor(e){this._dialogService=e,this._defaultTableConfig={headerSticky:!0}}_createTableConfig(e){return{...this._defaultTableConfig,...e}}openWithMultiselect(e){const t={lookupDialogConfig:e,tableConfig:this._createTableConfig({selectMode:"multi"}),gtmData:null};return this._dialogService.open(bd,{data:t}).pipe((0,E.T)(n=>({selectedIds:n?.selectedIds})))}open(e){const t={lookupDialogConfig:e,tableConfig:this._createTableConfig({selectMode:"single"}),gtmData:null};return this._dialogService.open(bd,{data:t}).pipe((0,E.T)(n=>({selectedId:n?.selectedIds[0],selectedRecord:n?.selectedRecords[0]})))}static{this.\u0275fac=function(t){return new(t||Sd)(i.\u0275\u0275inject(re.o3))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Sd,factory:Sd.\u0275fac})}}class vd{static{this.\u0275fac=function(t){return new(t||vd)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:vd})}static{this.\u0275inj=i.\u0275\u0275defineInjector({providers:[Sd],imports:[R.CommonModule,re.Ph,Ic,Xt.KR,Ve.wG,he.eB,ve.C,be.m_,Ue.mz,di.A8,hc,v.h]})}}function MI(o){return o.cultureInfo.sysCultureName}const wI={showDelay:300,hideDelay:300,touchendHideDelay:1e3,position:"above"};let sy=class By{constructor(e){this._materialIconsRegistrator=e,mI.forEach(t=>{this._materialIconsRegistrator.addIcons([{name:t,icon:b(10722)(`./${t}.svg`)},{name:`${t}-large`,icon:b(12014)(`./${t}.svg`)}])})}static{this.\u0275fac=function(t){return new(t||By)(i.\u0275\u0275inject(re.KN))}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:By})}static{this.\u0275inj=i.\u0275\u0275defineInjector({providers:[W.rK,Yu,Cc,{provide:_t.Ju,useFactory:MI,deps:[_.oqB]},{provide:_t.de,useValue:Or.kd},{provide:_t.MJ,useClass:Or.QH,deps:[_t.Ju]},{provide:xi.sM,useValue:wI}],imports:[R.CommonModule,wo,hd,Ic,Tm,ce.YN,vd,Xt.KR,Ve.wG,mt.Dy,St.X6,he.eB,ui.w,ve.C,be.m_,Ue.mz,hn.bB,Or.ZG,di.A8,_t.pZ,Ei.kg,oa.T7,hc,xs.iI,Be.B4,_.MDt,v.h,ce.X1,rc,ra.MY,Nm,re.kt,Vm,wo,hd,Ic,vd,hc,Be.B4]})}};sy=(0,I.Cg)([(0,c.CrtModule)({viewElements:[gs,Ra,Sc,Pm,fd,fc,Xf],converters:[kg,jg,Hp,Bg,Gg,Yg,Jg,qg,zg,Ug,$g,Hg,Wg,Zg,tf,Kg,Qg,Xg,nf,sf,rf,af,lf],requestHandlers:[g]}),(0,I.Sn)("design:paramtypes",[re.KN])],sy);class Pa{constructor(){this.ariaHidden=!1,this.role="button"}get ariaLabelAttr(){return this.ariaLabel||this.crtAccessibleAttributes||this.title}get titlelAttr(){if(""!==this.title)return this.title||this.crtAccessibleAttributes||this.ariaLabel}get tabIndexAttr(){return this.tabIndex??(this.ariaHidden?-1:0)}static{this.\u0275fac=function(t){return new(t||Pa)}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:Pa,selectors:[["","crtAccessibleAttributes",""]],hostVars:6,hostBindings:function(t,n){2&t&&i.\u0275\u0275attribute("aria-label",n.ariaLabelAttr)("title",n.titlelAttr)("tabindex",n.tabIndexAttr)("aria-hidden",n.ariaHidden)("role",n.role)("aria-controls",n.ariaControls)},inputs:{crtAccessibleAttributes:"crtAccessibleAttributes",title:"title",ariaLabel:"ariaLabel",tabIndex:"tabIndex",ariaHidden:"ariaHidden",role:"role",ariaControls:"ariaControls"},exportAs:["crtAccessibleAttributes"],standalone:!0})}}(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",String)],Pa.prototype,"crtAccessibleAttributes",void 0),(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",String)],Pa.prototype,"title",void 0),(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",String)],Pa.prototype,"ariaLabel",void 0),(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",Number)],Pa.prototype,"tabIndex",void 0),(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",Object)],Pa.prototype,"ariaHidden",void 0),(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",Object)],Pa.prototype,"role",void 0),(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",String)],Pa.prototype,"ariaControls",void 0);class Fm{constructor(){this.isRequired=!1}get ariaRequired(){return this.isRequired}static{this.\u0275fac=function(t){return new(t||Fm)}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:Fm,selectors:[["","crtAriaRequired",""]],hostVars:1,hostBindings:function(t,n){2&t&&i.\u0275\u0275attribute("aria-required",n.ariaRequired)},inputs:{isRequired:[i.\u0275\u0275InputFlags.None,"crtAriaRequired","isRequired"]}})}}(0,I.Cg)([(0,c.CrtInput)(),(0,I.Sn)("design:type",Object)],Fm.prototype,"isRequired",void 0);class ry{constructor(e){this._elRef=e,this.clickOutside=new i.EventEmitter}onOutsideClick(e){const t=e.target;this._elRef.nativeElement.contains(t)||this.clickOutside.emit()}static{this.\u0275fac=function(t){return new(t||ry)(i.\u0275\u0275directiveInject(i.ElementRef))}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:ry,selectors:[["","crtClickOutside",""]],hostBindings:function(t,n){1&t&&i.\u0275\u0275listener("click",function(r){return n.onOutsideClick(r)},!1,i.\u0275\u0275resolveDocument)},outputs:{clickOutside:"crtClickOutside"}})}}class oy{constructor(e,t){this._document=e,this._sysSettingsService=t,this._initCustomScrollToggling()}_initCustomScrollToggling(){this._sysSettingsService.getValueByCode("UseDefaultBrowserScrollbarStyles",!1).pipe((0,Ne.s)(1),(0,se.p)(Boolean)).subscribe(()=>{this._document.body.setAttribute("disable-custom-scroll","true")})}static{this.\u0275fac=function(t){return new(t||oy)(i.\u0275\u0275directiveInject(R.DOCUMENT),i.\u0275\u0275directiveInject(Se))}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:oy,selectors:[["","crtCustomScrollToggling",""]],standalone:!0})}}class ly{get errors(){return this.getErrorMessages({...this.control?.errors,...this._parentControl?.errors})}get errorMessages(){return this.errors.join("\n")}get invalid(){return this._isControlInvalid(this.control)||this._isControlInvalid(this._parentControl)}set parentControl(e){this._parentControl=e,this._reuseFeatureEnabled&&this.control&&(this.control.markAsUntouched(),this.control.markAsPristine())}get parentControl(){return this._parentControl}constructor(e,t){this.injector=t,this.control=e;const n=this.injector.get(_.G2Y,{},{optional:!0}),a=this.injector.get(W.ZP);this._reuseFeatureEnabled=(0,Ct.A)(a,"Terrasoft")?.isAngularHost&&n?.UseSchemaOutletReuseViewStrategy}_isControlInvalid(e){return e.invalid&&(e.dirty||e.touched)}getErrorMessages(e){return Object.values(e||{}).map(t=>t?.message).filter(Boolean)}validate(e){return this.control.errors}syncTouchedState(){this.control.touched&&this._parentControl?this._parentControl.markAsTouched():!this._parentControl?.touched||this.control.touched?this.control.touched&&!this._parentControl&&this.control.markAsUntouched():this.control.markAsTouched()}static{this.\u0275fac=function(t){return new(t||ly)(i.\u0275\u0275directiveInject(ce.MJ),i.\u0275\u0275directiveInject(i.Injector))}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:ly,inputs:{parentControl:"parentControl"}})}}class cy{static{this.\u0275fac=function(t){return new(t||cy)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:cy})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[Ue.mz,Ei.kg,mt.Dy,Ve.wG,ve.C,ra.MY,Xt.KR,be.m_,Xu.jP,oa.T7,Ue.mz,Ei.kg,mt.Dy,Ve.wG,ve.C,ra.MY,Xt.KR,be.m_,Xu.jP,oa.T7]})}}var Ee;!function(o){o.DEFAULT="default-file-icon",o.IMAGE="file-image",o.PDF="file-pdf",o.WORD="file-word",o.EXCEL="file-excel",o.POWERPOINT="file-powerpoint"}(Ee||(Ee={}));const EI={doc:Ee.WORD,docx:Ee.WORD,pdf:Ee.PDF,ppt:Ee.POWERPOINT,pptx:Ee.POWERPOINT,xls:Ee.EXCEL,xlsx:Ee.EXCEL,bmp:Ee.IMAGE,gif:Ee.IMAGE,ico:Ee.IMAGE,jpeg:Ee.IMAGE,jpg:Ee.IMAGE,png:Ee.IMAGE,svg:Ee.IMAGE,webp:Ee.IMAGE,ai:Ee.IMAGE,cod:Ee.IMAGE,cmx:Ee.IMAGE,emz:Ee.IMAGE,eps:Ee.IMAGE,dib:Ee.IMAGE,heic:Ee.IMAGE,ief:Ee.IMAGE,jfif:Ee.IMAGE,jpe:Ee.IMAGE,pbm:Ee.IMAGE,pgm:Ee.IMAGE,pjp:Ee.IMAGE,pjpeg:Ee.IMAGE,pnm:Ee.IMAGE,ppm:Ee.IMAGE,ras:Ee.IMAGE,rgb:Ee.IMAGE,tif:Ee.IMAGE,xbm:Ee.IMAGE,xpm:Ee.IMAGE,xwd:Ee.IMAGE};class km{getFileIcon(e,t=""){const n=e?.lastIndexOf(".")||-1;let a=Ee.DEFAULT;if(-1!==n){const r=e.split(".").pop();a=EI[r?.toLowerCase()]||Ee.DEFAULT}return t?`${a}-${t}`:a}static{this.\u0275fac=function(t){return new(t||km)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:km,factory:km.\u0275fac})}}const xI={minWidth:0,maxWidth:Number.MAX_VALUE},sS=new i.InjectionToken("A horizontal resizing configuration");class Tc{constructor(e,t){this._isRtl="rtl"===e.value,this._defaultResizingConfig=this._mergeConfigs(t,xI)}get resizeEdges(){return this._isRtl?{left:!0}:{right:!0}}_mergeConfigs(e,t){return{minWidth:e?.minWidth??t?.minWidth,maxWidth:e?.maxWidth??t?.maxWidth,defaultWidth:e?.defaultWidth??t?.defaultWidth}}isAvailableEdges(e){return this._isRtl?!!e?.left:!!e?.right}getAdjustedWidth(e,t){const{minWidth:n,maxWidth:a,defaultWidth:r}=this._mergeConfigs(t,this._defaultResizingConfig);return"number"!=typeof e?r:(e=Math.min(e,a),e=Math.max(e,n))}static{this.\u0275fac=function(t){return new(t||Tc)(i.\u0275\u0275inject(Mt.dS),i.\u0275\u0275inject(sS,8))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Tc,factory:Tc.\u0275fac})}}class jm{static withConfig(e){return{ngModule:jm,providers:[Tc,{provide:sS,useValue:e}]}}static{this.\u0275fac=function(t){return new(t||jm)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:jm})}static{this.\u0275inj=i.\u0275\u0275defineInjector({providers:[Tc]})}}var rS,oS;const Bm=Symbol("ItemsFiltersField"),Gm=Symbol("ItemsFiltersProperty"),Id=Symbol("RelatedItemsFiltersField"),uy=Symbol("RelatedItemsFiltersProperty"),dy=Symbol("IsItemsCustomFilterFunctionField"),py=Symbol("IsRelatedItemsCustomFilterFunctionField"),my=Symbol("mapFunctionField"),lS=Symbol("mapFunctionProperty");class Dc{constructor(){this[rS]=!1,this[oS]=!1,this.breadCrumbs=[],this.caption$=new h.Subject,this.breadCrumbs$=new h.Subject}static{rS=dy,oS=py}get[uy](){return this[Id]||(this[Id]=[]),this[Id]}get[Gm](){return this[Bm]||(this[Bm]=[]),this[Bm]}get[lS](){if(this[my])return this[my];throw new Error("Map function is null")}get sortFunction(){return this._sortFunction?this._sortFunction:Dc._defaultSortFunction}get relatedItemsSortFunction(){return this._relatedItemsSortFunction?this._relatedItemsSortFunction:Dc._defaultRelatedItemsSortFunction}static _sortByCaption(e,t){return e.caption?.toLowerCase().localeCompare(t.caption?.toLowerCase())}static _defaultSortFunction(e,t,n){const a=e?.selectedMetaPaths;if(a){const r=a.includes(t.metaPath),u=a.includes(n.metaPath);if(r&&!u)return-1;if(!r&&u)return 1}return Dc._sortByCaption(t,n)}static _defaultRelatedItemsSortFunction(e,t){return Dc._sortByCaption(e,t)}_getFilteredItems(e,t){return t.reduce((n,a)=>n.filter(a),e)}_filterResultData(e){return e.items=this._getFilteredItems(e.items,this[Gm]),e.relatedItems=this._getFilteredItems(e.relatedItems,this[uy]),e}_mapItems(e){return e.map(this[lS],this)}_sortResultData(e){return e.items.sort(this.sortFunction.bind(this,this.launchOptions)),e.relatedItems.sort(this.relatedItemsSortFunction),e}_updateItemsMetaPath(e,t){e.map(n=>(n.metaPath=this.getMetaPath(t,n),n.metaPathCaption=this.getMetaPathCaption(t,n),n.columnPath=this.getColumnPath(t,n),this.enrichMetaPathCaptionArray(t,n),n),this)}_enrichMetaPath(e,t){return this._updateItemsMetaPath(e.items,t),this._updateItemsMetaPath(e.relatedItems,t),e}_getAllowedItemsFilter(e){return t=>e.indexOf(t.id)>=0}_getAllowedRelatedItemsFilter(){return e=>!1}_getExcludedItemsFilter(e){return t=>e.indexOf(t.id)<0}_initializeCurrentState(e){return this.getInitialState(e).pipe((0,E.T)(t=>{this.initialState=t}))}setBreadCrumbs(e){const t=this.initialState.getRootItem();e.metaPath!==t?.metaPath?(e.caption||(e.caption=this.getCaption()),this.breadCrumbs.push(e)):this.breadCrumbs=this.initialState.getBreadCrumbs()}copyStructureExplorerItem(e){return{id:e.id,name:e.name,caption:e.caption,shortCaption:e.shortCaption,hasChildren:e.hasChildren,metaPath:e.metaPath,metaPathCaption:e.metaPathCaption,columnPath:e.columnPath,tags:e.tags?[...e.tags]:null,data:e.data}}getDefaultRootItem(){return{id:null,name:null,caption:null,hasChildren:!0,metaPath:"",metaPathCaption:"",columnPath:"",tags:null,data:null}}addItemsFilterFunction(e){if(this[dy])throw new Error("Items custom filter function already exists");this[Gm].push(e)}addRelatedItemsFilterFunction(e){if(this[py])throw new Error("Related items custom filter function already exists");this[uy].push(e)}setMapFunction(e){this[my]=e}getMetaPath(e,t){return e.metaPath?`${e.metaPath}.${t.id}`:t.id}getColumnPath(e,t){return e.columnPath?`${e.columnPath}.${t.name}`:t.name}getMetaPathCaption(e,t){return e.metaPathCaption?`${e.metaPathCaption}.${t.caption}`:t.metaPathCaption??t.caption}enrichMetaPathCaptionArray(e,t){t.metaPathCaptionArray?t.metaPathCaptionArray.push(t.caption):t.metaPathCaptionArray=[e.caption,t.caption]}innerInitialize(e){this.launchOptions=e.options,e.options&&Array.isArray(e.options.allowedItems)&&(this.addItemsFilterFunction(this._getAllowedItemsFilter(e.options.allowedItems)),this.addRelatedItemsFilterFunction(this._getAllowedRelatedItemsFilter())),e.options&&Array.isArray(e.options.excludedItems)&&this.addItemsFilterFunction(this._getExcludedItemsFilter(e.options.excludedItems)),e.mapFunction&&this.setMapFunction(e.mapFunction),e.itemsCustomFilterFunction&&(this[dy]=!0,this[Gm].push(e.itemsCustomFilterFunction)),e.relatedItemsCustomFilterFunction&&(this[py]=!0,this[Id].push(e.relatedItemsCustomFilterFunction)),e.sortFunction&&(this._sortFunction=e.sortFunction),e.relatedItemsSortFunction&&(this._relatedItemsSortFunction=e.relatedItemsSortFunction)}updateBreadCrumbsByIndex(e){if(this.breadCrumbs.length<e)throw new Error("Current index is out of breadCrumbs range");this.breadCrumbs=this.breadCrumbs.slice(0,e),this.breadCrumbs$.next(this.breadCrumbs)}getItems(e){let t;if(e){if(!1===e.hasChildren)throw new Error("Can not drill down in item without children");t=this.copyStructureExplorerItem(e)}else t=this.getDefaultRootItem();return this.getAllItems(t).pipe((0,P.M)(()=>{this.caption$.next(this.getCaption()),this.setBreadCrumbs(t),this.breadCrumbs$.next(this.breadCrumbs)}),(0,E.T)(n=>this._mapItems(n)),(0,E.T)(n=>this.mapItemsToResult(n)),(0,E.T)(n=>this._enrichMetaPath(n,t)),(0,E.T)(n=>this._filterResultData(n)),(0,E.T)(n=>this._sortResultData(n)))}initialize(e){return this[Bm]=[],this[Id]=[],this.innerInitialize(e),this._initializeCurrentState(e)}}var Um;!function(o){o.Selected="selected",o.Canceled="canceled"}(Um||(Um={}));class hy{constructor(e){if(this._selectedItemArrays=e,!Array.isArray(e))throw new Error("SelectedItemArrays property is invalid")}getRootItem(){const e=this._selectedItemArrays[0];return e&&e[e.length-2]}getSelectedItems(){return this._selectedItemArrays.map(e=>e[e.length-1])}getBreadCrumbs(){const e=this._selectedItemArrays[0];return e?.slice(0,e?.length-1)}}var RI=b(83806),PI=b(46991);class Td{_mapDataSchemaAttributeToStructureItem(e){return{name:e.name,caption:e.caption,dataValueType:e.dataValueType,item:e}}_mapToStructureExplorerItem(e){return{columnPath:e.path,caption:e.caption,metaPath:e.path,metaPathCaption:e.caption,hasChildren:!0,name:e.name,id:e.name,tags:[e.caption,e.name],data:{name:e.name,caption:e.caption,isDataSource:!1,item:e}}}_mapDataSchemaToStructureItem(e,t){return{name:e,caption:t.caption,item:t,isDataSource:!0,dataSchemaType:t.type}}getDataSchemaAttributeStructureItemsBySchemaName(e,t,n){return this.getDataSchemaByName(e,n).pipe((0,E.T)(a=>({caption:a.caption,structureItems:a.attributes.filter(r=>r.usageType!==c.DataSchemaAttributeUsageType.None).map(r=>this._mapDataSchemaAttributeToStructureItem(r))})),(0,Y.Z)(a=>t?.useBackwards?this.getDataSchemaBackReference({schemaName:e,schemaCaption:a.caption?.toString()}).pipe((0,E.T)(r=>[...a.structureItems,...r])):(0,h.of)(a.structureItems)))}getDataSchemaAttributeStructureExplorerItemByPath(e,t){return this.getDataSchemaAttributeByPath(e,t).pipe((0,E.T)(n=>this._mapToStructureExplorerItem(n)))}getDataSourceStructureItemByName(e){return this.getDataSourceByName(e).pipe((0,z.n)(t=>(0,h.forkJoin)([(0,h.of)(t),t.getSchema().pipe((0,Ne.s)(1))])),(0,E.T)(([t,n])=>this._mapDataSchemaToStructureItem(t.dataSourceName,n)))}getDataSourceStructureItems(){return this.getDataSources().pipe((0,RI.U)(),(0,z.n)(e=>(0,h.forkJoin)([(0,h.of)(e),e.getSchema().pipe((0,Ne.s)(1))]).pipe((0,se.p)(t=>!t[0].hasErrors))),(0,E.T)(([e,t])=>this._mapDataSchemaToStructureItem(e.dataSourceName,t)),(0,PI.$)())}static{this.\u0275fac=function(t){return new(t||Td)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Td,factory:Td.\u0275fac})}}class Mc extends Dc{constructor(e,t,n,a,r){super(),this._dataSourceStructureItemService=e,this._rightsService=t,this._userInfo=n,this.translateService=a,this.featureValues=r,this._defaultCaptionKey="CDK.DataGroupCaption",this.name="DataSourceStructureExplorerDataProvider",this.setMapFunction(this._mapItemToExplorerItem)}_setTranslations(){this._defaultCaption=this.translateService.instant(this._defaultCaptionKey)}_getAttributes(e,t){return(0,h.forkJoin)([(0,h.of)(this.featureValues.UseColumnReadPermissionsForStructureExplorer),this._dataSourceStructureItemService.getDataSchemaAttributeStructureItemsBySchemaName(e,this.launchOptions,t)]).pipe((0,Y.Z)(([n,a])=>(0,h.iif)(()=>n&&t===c.DataSchemaType.Entity,this._rightsService.getCanReadColumns({schemaName:e,columnNames:a.filter(r=>r.item.attributeType===c.DataSchemaAttributeType.OwnAttribute).map(r=>r.name)}).pipe((0,Y.Z)(r=>{let u=[];return this._userInfo.isSSP&&(a=a.filter(p=>p.item.usageType===c.DataSchemaAttributeUsageType.General)),r&&0!==Object.keys(r).length?(u=a.filter(p=>!1!==r[p.name]),(0,h.of)(u)):(0,h.of)(a)})),(0,h.of)(a))))}_getDataSources(){return this._dataSourceStructureItemService.getDataSourceStructureItems()}_getDataSourceStructureItemByName(e){return this._dataSourceStructureItemService.getDataSourceStructureItemByName(e)}_joinPath(...e){return e.filter(hb.he).join(".")}_setStructureExplorerItemPaths(e,t){e.metaPath=this._joinPath(t?.metaPath,e.metaPath),e.columnPath=this._joinPath(t?.columnPath,e.columnPath),e.metaPathCaption=this._joinPath(t?.caption,e.metaPathCaption)}getCaption(){return this._currentSelectedItem?.caption||this._defaultCaption}mapItemsToResult(e){const t={items:[],relatedItems:[],hideItems:!1};return e.forEach(n=>{const a=n.data.item,r=a.attributeType;n.data.isDataSource?(t.relatedItems.push(n),t.hideItems=!0):a.dataValueType===c.DataValueType.Lookup&&a.referenceSchemaName&&(n.data.dataSchemaType=c.DataSchemaType.Entity,t.relatedItems.push(n)),r!==c.DataSchemaAttributeType.BackReferenceAttribute&&t.items.push(n)}),t}getChildItems(e){return this._getAttributes(e)}getAllItems(e){const t=null==e.data;if(this._currentSelectedItem=e.data,t)return this._getDataSources();const n=e.data.item;return this._getAttributes(n.referenceSchemaName||n.name,this._currentSelectedItem?.dataSchemaType)}_getStructureItemIcon(e){if(e.item instanceof ir&&e.item.defaultValueSchema){const{valueSourceType:t}=e.item.defaultValueSchema;if(t===c.DefaultValueSource.Sequence)return"autonumber-icon"}return null}_mapItemToExplorerItem(e){const t={columnPath:e.item.name,data:e,hasChildren:!0,tags:[e.caption,e.name],caption:e.caption,shortCaption:e.shortCaption,id:e.name,name:e.name,metaPathCaption:e.caption,metaPath:e.name},n=this._getStructureItemIcon(e);return n&&(t.iconName=n),t}_mapDataSourceItemToStructureExplorerItem(e){const t={columnPath:e.item.name,hasChildren:!0,caption:e.caption,shortCaption:e.shortCaption,metaPath:e.name,id:e.name,metaPathCaption:e.caption,name:e.name,tags:[e.caption,e.name],data:{name:e.name,caption:e.caption,isDataSource:!0,item:e.item,dataSchemaType:e.dataSchemaType}},n=this._getStructureItemIcon(e);return n&&(t.iconName=n),t}_findOwnAttribute(e,t,n){return this._getAttributes(e,n).pipe((0,E.T)(a=>a.map(r=>this._mapItemToExplorerItem(r))),(0,E.T)(a=>a.find(r=>r.name===t)))}_getSelectedReferenceAttributes(e,t){const n=t.split("."),a=e.item.name,r=e.item.caption;return(0,h.combineLatest)(n.map((u,p)=>{const f=`${a}.${n.slice(0,p+1).join(".")}`;return this._dataSourceStructureItemService.getDataSchemaAttributeStructureExplorerItemByPath(f,e.dataSchemaType)})).pipe((0,P.M)(u=>{u.forEach((p,f)=>{const S=u[f-1];this._setStructureExplorerItemPaths(p,S)}),u.forEach(p=>{p.metaPath=this._joinPath(e.name,p.metaPath),p.columnPath=this._joinPath(a,p.columnPath),p.metaPathCaption=this._joinPath(r,p.metaPathCaption)})}))}_getSelectedAttributes(e,t){const n=e.item.name;return this._findOwnAttribute(n,t,e.dataSchemaType).pipe((0,Y.Z)(a=>{if(a){a.columnPath=`${e.name}.${a.columnPath}`,a.metaPath=`${e.name}.${a.name}`;const r=`${e.caption}.${a.caption}`;return a.metaPathCaption=r,(0,h.of)([a])}return this._getSelectedReferenceAttributes(e,t)}))}_getSelectedPath(e){if(!e||0===e.length)return null;this._currentSelectedItem=null;const t=e[0].split(".");return{dataSourceName:t.shift(),path:t.join(".")}}_getRootItem(){const e=this.getDefaultRootItem();return e.caption=this.getCaption(),e}_getInitialStataForDataSource({dataSourceName:e,path:t}){const n=this._getRootItem();return this._getDataSourceStructureItemByName(e).pipe((0,P.M)(a=>{n.id=a.name,n.caption=a.caption,n.data=a}),(0,E.T)(a=>({structureItem:a,structureExplorerItem:this._mapDataSourceItemToStructureExplorerItem(a)})),(0,Y.Z)(({structureItem:a,structureExplorerItem:r})=>(0,h.iif)(()=>!!t,this._getSelectedAttributes(a,t).pipe((0,E.T)(u=>[r,...u])),(0,h.of)([n,r]))),(0,E.T)(a=>new hy([a])))}_getInitialStateForSelectedPath({dataSourceName:e,path:t}){return this._getDataSources().pipe((0,Y.Z)(n=>{const a=n.find(p=>p.name===e),r=this._mapDataSourceItemToStructureExplorerItem(a),u=this._getRootItem();return this._getSelectedAttributes(a,t).pipe((0,E.T)(p=>new hy([[u,r,...p]])))}))}getInitialState(e){if(this._setTranslations(),this._currentSelectedItem=null,e.navigateOnlyThroughDataSource)return this._getInitialStataForDataSource({...this._getSelectedPath(e.options?.selectedMetaPaths),dataSourceName:e.navigateOnlyThroughDataSource});const t=this._getSelectedPath(e.options?.selectedMetaPaths);return t?this._getInitialStateForSelectedPath(t):(0,h.of)(new hy([]))}static{this.\u0275fac=function(t){return new(t||Mc)(i.\u0275\u0275inject(Td),i.\u0275\u0275inject(xn),i.\u0275\u0275inject(_.oqB),i.\u0275\u0275inject(v.c$),i.\u0275\u0275inject(_.G2Y))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Mc,factory:Mc.\u0275fac})}}class Dd{constructor(e,t){this._queryExecutor=e,this._translateService=t,this._byColumnCaptionKey="CDK.ByColumnCaption",this._whereColumnCaptionKey="CDK.WhereColumnCaption",this._isColumnCaptionKey="CDK.IsColumnCaption",this._whereColumnCaption=this._translateService.instant(this._whereColumnCaptionKey),this._isColumnCaption=this._translateService.instant(this._isColumnCaptionKey),this._byColumnCaption=this._translateService.instant(this._byColumnCaptionKey)}_getBackwardReferencesEsq(e){const t=new c.EntitySchemaQuery("SysEntitySchemaReference");return t.addSchemaColumn("ColumnCaption","ColumnCaption"),t.addSchemaColumn("ColumnName","ColumnName"),t.addSchemaColumn("SysSchema.Name","Name"),t.addSchemaColumn("SysSchema.Caption","Caption"),t.rowCount=-1,t.isDistinct=!0,t.filters.addSchemaColumnFilterWithParameter(c.ComparisonType.Equal,"[SysSchema:Id:ReferenceSchema].Name",e),t.filters.addSchemaColumnFilterWithParameter(c.ComparisonType.Not_start_with,"SysSchema.Name","VwSys"),t.filters.addSchemaColumnFilterWithParameter(c.ComparisonType.Not_start_with,"SysSchema.Name","Sys"),t.filters.addSchemaColumnFilterWithParameter(c.ComparisonType.Equal,"UsageType",0),t}_mapRowItemToDataSourceStructureItem(e,t){const n=e.Name,a=e.ColumnName,r=e.ColumnCaption,u=e.Caption,p=`${t} ${this._isColumnCaption} ${r}`,f=`(${this._whereColumnCaption} ${p})`,S=t===r?`${u} (${this._byColumnCaption} ${r})`:`${u} ${f}`;return{caption:S,shortCaption:u,dataValueType:c.DataValueType.Lookup,name:n,item:{caption:S,attributeType:c.DataSchemaAttributeType.BackReferenceAttribute,dataValueType:c.DataValueType.Lookup,isValueCloneable:!0,name:n,path:`[${n}:${a}].Id`,referenceSchemaName:n}}}getBackwardReferences(e){const t=this._getBackwardReferencesEsq(e.schemaName);return this._queryExecutor.executeSelectQuery(t).pipe((0,E.T)(n=>n.map(a=>this._mapRowItemToDataSourceStructureItem(a,e.schemaCaption))))}static{this.\u0275fac=function(t){return new(t||Dd)(i.\u0275\u0275inject(Ae),i.\u0275\u0275inject(v.c$))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Dd,factory:Dd.\u0275fac})}}var OI=b(60021);const cS=new i.InjectionToken("DataProviders");class wc{constructor(e){this._dataProviders=e,this._dataProvidersTable=this._dataProviders}get(){return this._dataProvidersTable}static{this.\u0275fac=function(t){return new(t||wc)(i.\u0275\u0275inject(cS))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:wc,factory:wc.\u0275fac})}}var VI=b(79833);class zm{transform(e,t){return e&&t?e.filter(n=>!n.parentId||t.includes(n.parentId)):e}static{this.\u0275fac=function(t){return new(t||zm)}}static{this.\u0275pipe=i.\u0275\u0275definePipe({name:"filterStructureItems",type:zm,pure:!1})}}const LI=["searchInput"],FI=o=>({rtl:o}),kI=(o,e,t,n)=>({"checkbox-is-visible":o,"even-row":e,"child-item":t,"group-item":n}),jI=o=>({"expanded-icon":o}),BI=o=>({"even-row":o});function GI(o,e){if(1&o&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"span",20),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&o){const t=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",t.caption," ")}}function UI(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"span",21),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(t);const a=i.\u0275\u0275nextContext(),r=a.$implicit,u=a.index,p=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(p.onBreadCrumbsClick(r,u))}),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"span",22),i.\u0275\u0275text(4," > "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}if(2&o){const t=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",t.caption," ")}}function zI(o,e){if(1&o&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,GI,3,1,"ng-container",19)(2,UI,5,1,"ng-container",19),i.\u0275\u0275elementContainerEnd()),2&o){const t=e.last;i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",t),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",!t)}}function HI(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"div",17),i.\u0275\u0275template(1,zI,3,2,"ng-container",18),i.\u0275\u0275elementEnd()),2&o){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(),i.\u0275\u0275property("ngForOf",t.breadCrumbs)}}function $I(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"label"),i.\u0275\u0275pipe(1,"async"),i.\u0275\u0275text(2),i.\u0275\u0275pipe(3,"async"),i.\u0275\u0275elementEnd()),2&o){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275attribute("title",i.\u0275\u0275pipeBind1(1,2,t.fieldsTabTooltip$)),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(3,4,t.fieldsTabCaption$)," ")}}function qI(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",33),i.\u0275\u0275listener("keydown.space",function(a){i.\u0275\u0275restoreView(t);const r=i.\u0275\u0275nextContext().$implicit,u=i.\u0275\u0275nextContext(3);return a.preventDefault(),i.\u0275\u0275resetView(u.onItemChecked(r))}),i.\u0275\u0275elementEnd()}if(2&o){const t=i.\u0275\u0275nextContext().$implicit,n=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(1,jI,null==n.expandedGroups?null:n.expandedGroups.includes(t.id)))}}function WI(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"mat-checkbox",34),i.\u0275\u0275listener("keydown.space",function(a){i.\u0275\u0275restoreView(t);const r=i.\u0275\u0275nextContext().$implicit,u=i.\u0275\u0275nextContext(3);return a.preventDefault(),i.\u0275\u0275resetView(u.onItemChecked(r))}),i.\u0275\u0275elementEnd()}if(2&o){const t=i.\u0275\u0275nextContext().$implicit,n=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("checked",n.isItemChecked(t))}}function ZI(o,e){if(1&o&&i.\u0275\u0275element(0,"mat-icon",35),2&o){const t=i.\u0275\u0275nextContext().$implicit,n=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("svgIcon",n.getItemIcon(t))}}function JI(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",28),i.\u0275\u0275listener("click",function(a){const r=i.\u0275\u0275restoreView(t).$implicit,u=i.\u0275\u0275nextContext(3);return a.preventDefault(),i.\u0275\u0275resetView(u.onItemChecked(r))})("mouseover",function(){const a=i.\u0275\u0275restoreView(t).$implicit,r=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(r.hovered=a.id)})("mouseleave",function(){i.\u0275\u0275restoreView(t);const a=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(a.hovered=null)}),i.\u0275\u0275template(1,qI,1,3,"div",29)(2,WI,1,1,"mat-checkbox",30)(3,ZI,1,1,"mat-icon",31),i.\u0275\u0275elementStart(4,"div",32),i.\u0275\u0275text(5),i.\u0275\u0275elementEnd()()}if(2&o){const t=e.$implicit,n=e.index,a=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction4(6,kI,(a.hovered===t.id||a.isItemChecked(t))&&"group"!==t.type,n%2,"child"===t.type,"group"===t.type)),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf","group"===t.type),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf","group"!==t.type),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",a.isShowTypeIcons()),i.\u0275\u0275advance(),i.\u0275\u0275property("title",a.getCaption(t)),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate1(" ",a.getCaption(t)," ")}}function YI(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"div")(1,"div",26),i.\u0275\u0275template(2,JI,6,11,"div",27),i.\u0275\u0275pipe(3,"filterStructureItems"),i.\u0275\u0275elementEnd()()),2&o){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind2(3,1,t.data.items,t.expandedGroups))}}function KI(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"mat-tab",23),i.\u0275\u0275template(1,$I,4,6,"ng-template",24)(2,YI,4,4,"div",25),i.\u0275\u0275elementEnd()),2&o){const t=i.\u0275\u0275nextContext(),n=i.\u0275\u0275reference(20);i.\u0275\u0275property("disabled",!t.hasLoaded),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",t.data.items.length>0)("ngIfElse",n)}}function QI(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",38),i.\u0275\u0275listener("click",function(){const a=i.\u0275\u0275restoreView(t).$implicit,r=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(r.onItemDrilledDown(a))}),i.\u0275\u0275elementStart(1,"div",39),i.\u0275\u0275listener("keydown.space",function(){const a=i.\u0275\u0275restoreView(t).$implicit,r=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(r.onItemDrilledDown(a))}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(2,"div",40),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd()()}if(2&o){const t=e.$implicit,n=e.index;i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(2,BI,n%2)),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(t.caption)}}function XI(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"div")(1,"div",26),i.\u0275\u0275template(2,QI,4,4,"div",37),i.\u0275\u0275elementEnd()()),2&o){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",t.data.relatedItems)}}function eT(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"mat-tab",36),i.\u0275\u0275pipe(1,"async"),i.\u0275\u0275template(2,XI,3,1,"div",25),i.\u0275\u0275elementEnd()),2&o){const t=i.\u0275\u0275nextContext(),n=i.\u0275\u0275reference(20);i.\u0275\u0275property("label",i.\u0275\u0275pipeBind1(1,4,t.relatedObjectsTabCaption$))("disabled",!t.hasLoaded),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",t.data.relatedItems.length>0)("ngIfElse",n)}}function tT(o,e){1&o&&(i.\u0275\u0275elementStart(0,"div",42)(1,"span"),i.\u0275\u0275text(2),i.\u0275\u0275pipe(3,"translate"),i.\u0275\u0275elementEnd()()),2&o&&(i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(3,1,"StructureExplorerDialog.NoData")))}function nT(o,e){if(1&o&&i.\u0275\u0275template(0,tT,4,3,"div",41),2&o){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngIf",t.hasLoaded)}}class Cr{constructor(e,t,n,a,r,u,p,f,S,w){this._data=e,this.dialogRef=t,this.translateService=n,this._directionality=a,this._matIconRegistry=r,this._domSanitizer=u,this._maskService=p,this._changeDetector=f,this._translateService=S,this._featureValues=w,this._afterViewInit$=new h.Subject,this._destroyed$=new h.Subject,this.expandedGroups=[],this.rootItem=null,this.isBackWardReference=!1,this.selectedItems=[],this.selectedTabIndex=0,this.fieldsTabCaption$=new h.ReplaySubject(1),this.fieldsTabTooltip$=new h.ReplaySubject(1),this.relatedObjectsTabCaption$=new h.ReplaySubject(1),this.searchKey=null,this.data=Cr._getEmptyData(),this._fullData=Cr._getEmptyData(),this._provider=e.providers[0],this._registerIcons(),this.viewConfig=this._data.viewConfig}static _includeSubstring(e,t){const n=e.toLowerCase(),a=t.toLowerCase();return-1!==n.indexOf(a)}static _getEmptyData(){return{items:[],relatedItems:[]}}_registerIcons(){["binary-icon","boolean-icon","color-icon","date-icon","date-time-icon","float-icon","function-icon","guid-icon","image-icon","image-link-icon","integer-icon","lookup-icon","string-icon","time-icon","rich-text-icon","phone-text-icon","autonumber-icon","email-text-icon","web-text-icon","small-close-icon"].forEach(t=>{this._matIconRegistry.addSvgIconLiteral(t,this._domSanitizer.bypassSecurityTrustHtml(b(44331)("./"+t+".svg")))})}_getFieldTabCaption(e){const t=this.data?.items?.length,a=this.searchKey&&this.searchKey!==He.Qf.Empty?` (${t})`:"",r=this.viewConfig?.fieldsTabTranslateKey||"StructureExplorerDialog.FieldsTabCaption",u=this.translateService.instant(r);return He.Qf.Format(u,e,a)}_getRelatedObjectsTabCaption(){const e=this.data?.relatedItems?.length,n=this.searchKey&&this.searchKey!==He.Qf.Empty?` (${e})`:"",a=this.translateService.instant("StructureExplorerDialog.RelatedObjectsTabCaption");return He.Qf.Format(a,n)}_updateBreadCrumbsByIndex(e){this._provider.updateBreadCrumbsByIndex(e)}_filterData(e){e&&""!==e?(this.data.items=this._fullData.items.filter(t=>Cr._includeSubstring(t.caption,e)),this.data.relatedItems=this._fullData.relatedItems.filter(t=>Cr._includeSubstring(t.caption,e))):(this.data.items=this._fullData.items,this.data.relatedItems=this._fullData.relatedItems)}_initSelectedItems(){this.selectedItems=this._provider.initialState.getSelectedItems(),this.selectedItems.length>1&&!this._data.enableMultiSelection&&(this.selectedItems=[])}_isFullDataEmpty(){return 0===this._fullData.items.length&&0===this._fullData.relatedItems.length}_focusSearchInput(){(0,h.timer)(0).subscribe(()=>{this._searchInputElement.focused=!0,this._searchInputElement.focus()})}_selectRelatedItemsTab(){this.selectedTabIndex=1}_selectItemsTab(){this.selectedTabIndex=0}_transformToCountAggregationItem(e){const t=e.data;if(e.columnPath=this._formReferenceColumnPath(e?.data?.item?.path),this._isForwardReferenceItem(e)){const n=e?.columnPath?.split(".");n.pop(),e.columnPath=`${n.join(".")}.Id`}return t.item.attributeType="Aggregation",t.item.dataValueType=c.DataValueType.Integer,t.dataValueType=c.DataValueType.Integer,e.data.item.aggregationFunction=c.AggregationFunction.Count,e.data.item.aggregationFunctionCaption=this.getAggregationCaption(c.AggregationFunction.Count),e.id=`${e.id}.${c.AggregationFunction.Count}`,e.metaPath=`${e.metaPath}.${c.AggregationFunction.Count}`,e}_formReferenceColumnPath(e){const t=this.breadCrumbs.filter(n=>!n.data.isDataSource);return t.map((n,a)=>{const r=n?.data?.item?.path?.split(".")[0],u=e?.split(".").pop();return a===t.length-1?`${r}.${u}`:r}).join(".")}_isAggregationOrBackReferenceItem(e){return"Aggregation"===e?.data?.item?.attributeType||"BackReference"===e?.data?.item?.attributeType}_isForwardReferenceItem(e){return"Own"===e?.data?.item?.attributeType}_handleGroupClick(e){const t=this.expandedGroups.indexOf(e.id);-1!==t?this.expandedGroups.splice(t,1):this.expandedGroups.push(e.id)}_buildBackReferenceItems(e){const n={useBackwardRootPath:!1,useAggregationFunctionColumns:!0,...this.viewConfig?.backwardItemsConfig};if(n.useBackwardRootPath)return this.generateBackReferenceItems(e);if(n.useAggregationFunctionColumns){const a=(0,Z.A)(this.rootItem);return[this._transformToCountAggregationItem(a),...this.generateAggregationItems(e)]}return[]}generateBackReferenceItems(e){const t=[];return e.forEach(n=>{const a=(0,Z.A)(n);a.columnPath=this._formReferenceColumnPath(a?.data?.item?.path),t.push(a)}),t}generateAggregationItems(e){const t=[];return e.forEach(n=>{const a=n.data?.dataValueType;let r=function AI(o){switch(o){case c.DataValueType.Integer:case c.DataValueType.Float:case c.DataValueType.FLOAT1:case c.DataValueType.FLOAT2:case c.DataValueType.FLOAT3:case c.DataValueType.FLOAT4:case c.DataValueType.FLOAT8:case c.DataValueType.Money:return[{func:c.AggregationFunction.Sum,captionResource:"Sum"},{func:c.AggregationFunction.Avg,captionResource:"Avg"},{func:c.AggregationFunction.Max,captionResource:"MaxValue"},{func:c.AggregationFunction.Min,captionResource:"MinValue"},{func:c.AggregationFunction.TopOne,captionResource:"TopOne"}];case c.DataValueType.Date:case c.DataValueType.DateTime:return[{func:c.AggregationFunction.Max,captionResource:"MaxDate"},{func:c.AggregationFunction.Min,captionResource:"MinDate"},{func:c.AggregationFunction.TopOne,captionResource:"TopOne"}];default:return[{func:c.AggregationFunction.TopOne,captionResource:"TopOne"}]}}(a);this._featureValues.StructureExplorerTopOneFunction||(r=r.filter(u=>u.func!==c.AggregationFunction.TopOne)),0!==r.length&&a!==c.DataValueType.Lookup&&a!==c.DataValueType.Image&&a!==c.DataValueType.IMAGELOOKUP&&(n.type="group",t.push(n),r.forEach(u=>{const{func:p,captionResource:f}=u,S=(0,Z.A)(n);S.id=`${S.id}.${p}`,S.parentId=n.id,S.metaPath=`${S.metaPath}.${p}`,S.type="child",S.data.item.attributeType="Aggregation",S.data.item.aggregationFunction=p,S.data.item.aggregationFunctionCaption=this.getAggregationCaption(f),S.data.item.referenceSchemaName=this.rootItem.data?.item.referenceSchemaName,S.columnPath=this._formReferenceColumnPath(S?.data?.item?.path),t.push(S)}))}),t}getAggregationCaption(e){return this._translateService.instant("AggregationNames."+e)}ngOnInit(){this._provider.caption$.pipe((0,_e.Q)(this._destroyed$)).subscribe(e=>{this._schemaName=e}),this.rootItem=this._provider.initialState.getRootItem(),this._initSelectedItems(),this.prepareBreadCrumbs(),(0,h.forkJoin)({dataLoaded:this.prepareData(),afterViewInit:this._afterViewInit$}).pipe((0,_e.Q)(this._destroyed$)).subscribe(()=>{this._focusSearchInput()})}ngAfterViewInit(){this._afterViewInit$.next(),this._afterViewInit$.complete()}prepareBreadCrumbs(){this.breadCrumbs=[],this._provider.breadCrumbs$.pipe((0,_e.Q)(this._destroyed$)).subscribe(e=>{this.breadCrumbs=e})}prepareData(){return this.hasLoaded=!1,this._maskService.showBodyMask({delay:1e3}),this.data.items=[],this.data.relatedItems=[],this._provider.getItems(this.rootItem).pipe((0,ue.W)(e=>(console.warn(`StructureExplorerComponent#prepareData error: ${e}`),(0,h.of)({items:[],relatedItems:[]}))),(0,E.T)(e=>{this._fullData=e,this.isBackWardReference&&(this._fullData.items=this._buildBackReferenceItems(this._fullData.items)),this.data.hideItems=this._fullData.hideItems,this.onSearchKeyChanged(this.searchKey),this.hasRelatedItems=e.relatedItems.length>0,this.showItemsTab=!0!==e.hideItems,this.showItemsTab||this._selectRelatedItemsTab(),this._maskService.hideBodyMask(),this.hasLoaded=!0}))}onSearchKeyChanged(e){this.searchKey=e,this._isFullDataEmpty()||this._filterData(this.searchKey);const t=this.isBackWardReference?this.rootItem.shortCaption||this.rootItem.caption:this._schemaName,n=this.isBackWardReference?this.rootItem.caption:this._schemaName;this.fieldsTabCaption$.next(this._getFieldTabCaption(t)),this.fieldsTabTooltip$.next(this._getFieldTabCaption(n));const a=this._getRelatedObjectsTabCaption();this.relatedObjectsTabCaption$.next(a)}onBreadCrumbsClick(e,t){this._updateBreadCrumbsByIndex(t),this.onItemDrilledDown(e.id?e:null)}onItemDrilledDown(e){this.isBackWardReference=this._isAggregationOrBackReferenceItem(e)||this.isBackWardReference,this.rootItem=e,this.prepareBreadCrumbs(),this._data.collectDrillDownItems||(this.selectedItems=[]),this.searchKey="",this.expandedGroups=[],this.prepareData().pipe((0,_e.Q)(this._destroyed$)).subscribe(()=>{this._changeDetector.detectChanges(),this._selectItemsTab(),this._focusSearchInput()})}onItemChecked(e){if("group"!==e.type)if(this.isItemChecked(e)){const t=this.selectedItems.map(({metaPath:n})=>n).indexOf(e.metaPath);this.selectedItems.splice(t,1)}else this._data.enableMultiSelection||(this.selectedItems=[]),this.selectedItems.push(e);else this._handleGroupClick(e)}onItemSelected(){this.dialogRef.close({selectedItems:this.selectedItems,dialogResult:Um.Selected})}onCancelled(){this.dialogRef.close({selectedItems:[],dialogResult:Um.Canceled})}isItemChecked(e){return this.selectedItems.map(({metaPath:t})=>t).includes(e.metaPath)}isRtl(){return"rtl"===this._directionality.value}getItemIcon(e){if(e.iconName)return e.iconName;if(this._isAggregationOrBackReferenceItem(e))return"function-icon";switch(e.data.dataValueType){case c.DataValueType.Boolean:return"boolean-icon";case c.DataValueType.Date:return"date-icon";case c.DataValueType.Color:return"color-icon";case c.DataValueType.Guid:return"guid-icon";case c.DataValueType.DateTime:return"date-time-icon";case c.DataValueType.Time:return"time-icon";case c.DataValueType.Integer:return"integer-icon";case c.DataValueType.Lookup:return"lookup-icon";case c.DataValueType.Blob:case c.DataValueType.FILE:return"binary-icon";case c.DataValueType.Image:return"image-icon";case c.DataValueType.IMAGELOOKUP:return"image-link-icon";case c.DataValueType.Float:case c.DataValueType.FLOAT1:case c.DataValueType.FLOAT2:case c.DataValueType.FLOAT3:case c.DataValueType.FLOAT4:case c.DataValueType.FLOAT8:case c.DataValueType.Money:return"float-icon";case c.DataValueType.RICH_TEXT:return"rich-text-icon";case c.DataValueType.PHONE_TEXT:return"phone-text-icon";case c.DataValueType.WEB_TEXT:return"web-text-icon";case c.DataValueType.EMAIL_TEXT:return"email-text-icon";case c.DataValueType.Text:case c.DataValueType.LOCALIZABLE_STRING:case c.DataValueType.HASH_TEXT:case c.DataValueType.SECURE_TEXT:case c.DataValueType.SHORT_TEXT:case c.DataValueType.MEDIUM_TEXT:case c.DataValueType.MAXSIZE_TEXT:case c.DataValueType.LONG_TEXT:case c.DataValueType.METADATA_TEXT:default:return"string-icon"}}getCaption(e){return this._isAggregationOrBackReferenceItem(e)?e.data?.item?.aggregationFunctionCaption:e.caption}ngOnDestroy(){this._updateBreadCrumbsByIndex(0),this._maskService.hideBodyMask(),this._destroyed$.next(),this._destroyed$.complete()}isShowTypeIcons(){return!this.viewConfig?.hideTypeIcons}isShowBreadcrumbs(){return!this.viewConfig?.hideBreadcrumbs}getTitle(){const e=this.viewConfig?.titleTranslateKey||"StructureExplorerDialog.Title";return this._translateService.get(e)}static{this.\u0275fac=function(t){return new(t||Cr)(i.\u0275\u0275directiveInject(he.xh),i.\u0275\u0275directiveInject(he.RN),i.\u0275\u0275directiveInject(v.c$),i.\u0275\u0275directiveInject(Mt.dS),i.\u0275\u0275directiveInject(be.tp),i.\u0275\u0275directiveInject(x.DomSanitizer),i.\u0275\u0275directiveInject(re.sz),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(v.c$),i.\u0275\u0275directiveInject(_.G2Y))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:Cr,selectors:[["ts-structure-explorer"]],viewQuery:function(t,n){if(1&t&&i.\u0275\u0275viewQuery(LI,5),2&t){let a;i.\u0275\u0275queryRefresh(a=i.\u0275\u0275loadQuery())&&(n._searchInputElement=a.first)}},decls:28,vars:30,consts:[["searchInput","matInput"],["noItems",""],[1,"structure-explorer-ct",3,"ngClass"],["mat-dialog-title","",1,"structure-explorer-title"],["class","structure-explorer-breadcrumbs-ct",4,"ngIf"],[1,"search-container"],["floatLabel","never",1,"search-container-form-field"],["matInput","","type","text","spellcheck","false","autocomplete","off",1,"search-field",3,"keyup","placeholder","value","disabled"],["matSuffix","","mat-icon-button","",1,"close",3,"click","title"],["svgIcon","small-close-icon"],["tabindex","-1",1,"structure-explorer-content"],["mat-align-tabs","start","animationDuration","0ms",1,"structure-explorer-content-tab-group",3,"selectedTabChange","selectedIndex"],[3,"disabled",4,"ngIf"],[3,"label","disabled",4,"ngIf"],[1,"structure-explorer-actions"],["mat-button","","mat-dialog-close","",1,"action-button","cancelBtn",3,"click"],["mat-flat-button","","color","primary",1,"action-button","selectBtn",3,"click","disabled"],[1,"structure-explorer-breadcrumbs-ct"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"structure-explorer-breadcrumbs"],[1,"structure-explorer-breadcrumbs","active",3,"click"],[1,"structure-explorer-breadcrumbs","delimiter"],[3,"disabled"],["mat-tab-label",""],[4,"ngIf","ngIfElse"],["crtKeyboardFocusContainer","","tabindex","0",1,"structure-explorer-focus-container"],["class","structure-explorer-item-ct",3,"ngClass","click","mouseover","mouseleave",4,"ngFor","ngForOf"],[1,"structure-explorer-item-ct",3,"click","mouseover","mouseleave","ngClass"],["class","related-object-icon","tabindex","0",3,"ngClass","keydown.space",4,"ngIf"],["class","structure-explorer-item-checkbox regular",3,"checked","keydown.space",4,"ngIf"],["class","structure-explorer-item-icon",3,"svgIcon",4,"ngIf"],[1,"structure-explorer-item-caption",3,"title"],["tabindex","0",1,"related-object-icon",3,"keydown.space","ngClass"],[1,"structure-explorer-item-checkbox","regular",3,"keydown.space","checked"],[1,"structure-explorer-item-icon",3,"svgIcon"],[3,"label","disabled"],["class","structure-explorer-item-ct related-objects",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"structure-explorer-item-ct","related-objects",3,"click","ngClass"],["tabindex","0",1,"related-object-icon",3,"keydown.space"],[1,"related-object-item-caption"],["class","no-items-ctr",4,"ngIf"],[1,"no-items-ctr"]],template:function(t,n){if(1&t){const a=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",2)(1,"div",3),i.\u0275\u0275text(2),i.\u0275\u0275pipe(3,"async"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(4,HI,2,1,"div",4),i.\u0275\u0275elementStart(5,"div",5)(6,"mat-form-field",6)(7,"label")(8,"input",7,0),i.\u0275\u0275pipe(10,"translate"),i.\u0275\u0275listener("keyup",function(u){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.onSearchKeyChanged(u.target.value))}),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(11,"button",8),i.\u0275\u0275pipe(12,"translate"),i.\u0275\u0275pipe(13,"translate"),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.onSearchKeyChanged(null))}),i.\u0275\u0275element(14,"mat-icon",9),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275elementStart(15,"mat-dialog-content",10)(16,"mat-tab-group",11),i.\u0275\u0275listener("selectedTabChange",function(u){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.selectedTabIndex=u.index)}),i.\u0275\u0275template(17,KI,3,3,"mat-tab",12)(18,eT,3,6,"mat-tab",13)(19,nT,1,1,"ng-template",null,1,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(21,"mat-dialog-actions",14)(22,"button",15),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.onCancelled())}),i.\u0275\u0275text(23),i.\u0275\u0275pipe(24,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(25,"button",16),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.onItemSelected())}),i.\u0275\u0275text(26),i.\u0275\u0275pipe(27,"translate"),i.\u0275\u0275elementEnd()()()}2&t&&(i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(28,FI,n.isRtl())),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(3,16,n.getTitle())," "),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",n.isShowBreadcrumbs()),i.\u0275\u0275advance(4),i.\u0275\u0275propertyInterpolate("placeholder",i.\u0275\u0275pipeBind1(10,18,"StructureExplorerDialog.SearchPlaceHolder")),i.\u0275\u0275property("value",n.searchKey)("disabled",!n.hasLoaded),i.\u0275\u0275advance(3),i.\u0275\u0275styleProp("visibility",n.searchKey?"inherit":"hidden"),i.\u0275\u0275property("title",i.\u0275\u0275pipeBind1(12,20,"StructureExplorerDialog.SearchClearIconTitle")),i.\u0275\u0275attribute("aria-label",i.\u0275\u0275pipeBind1(13,22,"StructureExplorerDialog.SearchClearIconTitle")),i.\u0275\u0275advance(5),i.\u0275\u0275property("selectedIndex",n.selectedTabIndex),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",n.showItemsTab),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",n.hasRelatedItems),i.\u0275\u0275advance(5),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(24,24,"StructureExplorerDialog.CancelButtonCaption")," "),i.\u0275\u0275advance(2),i.\u0275\u0275property("disabled",!n.hasLoaded),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(27,26,"StructureExplorerDialog.SelectButtonCaption")," "))},dependencies:[R.NgClass,R.NgForOf,R.NgIf,he.kQ,he.KI,he.PQ,he.$t,Ht.cR,Ht.P1,Ht.pW,Ve.iV,mt.NZ,ve.Ky,ve.xZ,Ue.aL,be.An,VI.x,R.AsyncPipe,v.D9,zm],styles:['body[_ngcontent-%COMP%]{--focus-outline-outer-color: var(--crt-palette-secondary-500);--focus-outline-inner-color: white}.mat-dialog-title[_ngcontent-%COMP%]{margin:0}.structure-explorer-ct[_ngcontent-%COMP%]{width:40vw;height:72vh;display:flex;flex-direction:column}.structure-explorer-ct.rtl[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-item-ct[_ngcontent-%COMP%]:not(.related-objects){padding-left:0;padding-right:36px}.structure-explorer-ct.rtl[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-item-ct[_ngcontent-%COMP%]:not(.related-objects).checkbox-is-visible{padding-left:0;padding-right:10px}.structure-explorer-ct.rtl[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-item-ct[_ngcontent-%COMP%]:not(.related-objects).checkbox-is-visible   .structure-explorer-item-checkbox[_ngcontent-%COMP%]{margin-right:0}.structure-explorer-ct.rtl[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-item-ct[_ngcontent-%COMP%]   .mat-checkbox-inner-container[_ngcontent-%COMP%]{margin-left:0}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-title[_ngcontent-%COMP%]{margin-bottom:16px}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-breadcrumbs-ct[_ngcontent-%COMP%]{margin:0 0 16px;min-height:20px}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-breadcrumbs-ct[_ngcontent-%COMP%]   .structure-explorer-breadcrumbs.active[_ngcontent-%COMP%]{cursor:pointer}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-breadcrumbs-ct[_ngcontent-%COMP%]   .structure-explorer-breadcrumbs.delimiter[_ngcontent-%COMP%]{margin:0 8px}.structure-explorer-ct[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{margin-bottom:8px}.structure-explorer-ct[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-container-form-field[_ngcontent-%COMP%]{width:100%}.structure-explorer-ct[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-container-form-field[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{line-height:18px}.structure-explorer-ct[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-container-form-field[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%], .structure-explorer-ct[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-container-form-field[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:16px;height:16px}.structure-explorer-ct[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-container-form-field[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{vertical-align:bottom}.structure-explorer-ct[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-container-form-field[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]:focus-visible{box-shadow:inset 0 0 0 1px var(--focus-outline-outer-color),inset 0 0 0 2px var(--focus-outline-inner-color);outline:none;border-radius:4px}.structure-explorer-ct[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-container-form-field[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{display:block}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]{height:100%;overflow-x:hidden}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-content-tab-group[_ngcontent-%COMP%]{height:100%}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-item-ct[_ngcontent-%COMP%]{min-height:35px;border-bottom:1px solid lightgrey;display:flex;align-items:center;cursor:pointer;padding-left:10px;gap:10px}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-item-ct[_ngcontent-%COMP%]:after{content:"";min-height:inherit}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-item-ct.checkbox-is-visible[_ngcontent-%COMP%]   .structure-explorer-item-checkbox[_ngcontent-%COMP%]{opacity:1}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-item-ct[_ngcontent-%COMP%]   .structure-explorer-item-checkbox[_ngcontent-%COMP%]{display:block;height:16px;width:16px}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-item-ct[_ngcontent-%COMP%]   .structure-explorer-item-checkbox[_ngcontent-%COMP%]     .mat-checkbox-layout{align-items:center;vertical-align:baseline}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-item-ct.group-item[_ngcontent-%COMP%]{padding-left:10px}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-item-ct.group-item[_ngcontent-%COMP%]   .expanded-icon[_ngcontent-%COMP%]{transform:rotate(90deg)}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-item-ct.child-item[_ngcontent-%COMP%]{padding-left:30px}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-item-ct.child-item.checkbox-is-visible[_ngcontent-%COMP%]{padding-left:29px}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-item-ct.related-objects[_ngcontent-%COMP%]{padding-left:10px}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-item-ct[_ngcontent-%COMP%]:hover   .structure-explorer-item-checkbox[_ngcontent-%COMP%]:not(.mat-checkbox-checked):not(.cdk-focused){opacity:1}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-item-ct[_ngcontent-%COMP%]   .structure-explorer-item-checkbox[_ngcontent-%COMP%]:not(.mat-checkbox-checked):not(.cdk-focused){opacity:0}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-item-ct[_ngcontent-%COMP%]   .structure-explorer-item-icon[_ngcontent-%COMP%]{display:block;height:16px;width:16px}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-item-ct[_ngcontent-%COMP%]   .related-object-icon[_ngcontent-%COMP%]{display:block;height:16px;min-width:16px;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij48ZGVmcz48c3R5bGU+LmEsLmJ7ZmlsbDpub25lO30uYntzdHJva2U6IzgwOTViMzt9PC9zdHlsZT48L2RlZnM+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAxNikgcm90YXRlKC05MCkiPjxyZWN0IGNsYXNzPSJhIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiLz48cGF0aCBjbGFzcz0iYiIgZD0iTTYsMCwwLDZjLjAwOC0uMDA4LDYsNiw2LDYiIHRyYW5zZm9ybT0ibWF0cml4KDAuMDM1LCAtMC45OTksIDAuOTk5LCAwLjAzNSwgMS4zOTgsIDExLjI4OCkiLz48L2c+PC9zdmc+)}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .structure-explorer-item-ct[_ngcontent-%COMP%]   .structure-explorer-item-caption[_ngcontent-%COMP%]{height:15px;line-height:1;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-content[_ngcontent-%COMP%]   .no-items-ctr[_ngcontent-%COMP%]{margin-top:32px;text-align:center}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-actions[_ngcontent-%COMP%]{justify-content:flex-end}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-actions[_ngcontent-%COMP%]   button.mat-button-base[_ngcontent-%COMP%]:focus-visible{box-shadow:inset 0 0 0 1px var(--focus-outline-outer-color),inset 0 0 0 2px var(--focus-outline-inner-color);outline:none;border-radius:var(--button-border-radius, var(--button-rounded-border-radius))}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-focus-container[_ngcontent-%COMP%]{margin:2px 0}.structure-explorer-ct[_ngcontent-%COMP%]   .structure-explorer-focus-container[_ngcontent-%COMP%]:focus-visible{overflow:hidden;background-color:var(--focus-outline-inner-color);box-shadow:0 0 0 1px var(--focus-outline-inner-color),0 0 0 2px var(--focus-outline-outer-color);outline:none;border-radius:4px}']})}}class Md{constructor(e,t){this._dialogService=e,this._dataProviderResolver=t}show(e){const t=this._dataProviderResolver.get();let n;const a=[],r=[];e.providers.forEach(p=>{n=t.find(f=>f.name===p.name),n&&(a.push(n.initialize(p)),r.push(n))});const u=W.pO.toColdObservable(()=>this._dialogService.open(Cr,{data:{providers:r,enableMultiSelection:e.enableMultiSelection,collectDrillDownItems:e.collectDrillDownItems,viewConfig:e.viewConfig},panelClass:"dialog-top-border"}).pipe((0,E.T)(p=>!0!==e.returnDialogResult?p?.selectedItems:p)));return(0,h.concat)(...a,u).pipe((0,OI.H)())}static{this.\u0275fac=function(t){return new(t||Md)(i.\u0275\u0275inject(re.o3),i.\u0275\u0275inject(wc))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Md,factory:Md.\u0275fac})}}class wd{static{this.\u0275fac=function(t){return new(t||wd)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:wd})}static{this.\u0275inj=i.\u0275\u0275defineInjector({providers:[Md,wc],imports:[re.Ph,R.CommonModule,he.eB,v.h,Ht.qh,Ve.wG,mt.Dy,re.Rm,ve.C,Ue.mz,be.m_]})}}class gy{static{this.\u0275fac=function(t){return new(t||gy)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:gy})}static{this.\u0275inj=i.\u0275\u0275defineInjector({providers:[Mc,Dd,{provide:cS,useExisting:Mc,multi:!0}],imports:[wd,wd]})}}var uS,dS;!function(o){o[o.Deny=0]="Deny",o[o.CanRead=1]="CanRead",o[o.CanEdit=2]="CanEdit",o[o.All=3]="All"}(uS||(uS={})),function(o){o[o.Deny=0]="Deny",o[o.Allow=1]="Allow",o[o.AllowAndGrant=2]="AllowAndGrant"}(dS||(dS={}));var fy=b(18498),pS=b(48296);const iT=["treeScrollWrapper"],mS=o=>({selected:o});function aT(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"mat-tree-node",5),i.\u0275\u0275listener("click",function(){const a=i.\u0275\u0275restoreView(t).$implicit,r=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(r.onNodeClick(a))}),i.\u0275\u0275element(1,"div",6),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()}if(2&o){const t=e.$implicit,n=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(2,mS,n.isSelectedNode(t))),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",t.name," ")}}function sT(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"mat-tree-node",5),i.\u0275\u0275listener("click",function(){const a=i.\u0275\u0275restoreView(t).$implicit,r=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(r.onNodeClick(a))}),i.\u0275\u0275element(1,"div",7),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()}if(2&o){const t=e.$implicit,n=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(4,mS,n.isSelectedNode(t))),i.\u0275\u0275advance(),i.\u0275\u0275property("ngClass",n.treeControl.isExpanded(t)?"minus":"plus"),i.\u0275\u0275attribute("aria-label","toggle "+t.name),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate1(" ",t.name," ")}}class rT extends pS.XW{expandParents(e){const t=this.getLevel(e);if(t<1)return;for(let a=this.dataNodes.indexOf(e)-1;a>=0;a--){const r=this.dataNodes[a];if(this.getLevel(r)<t){if(-1===this.getDescendants(r).indexOf(e))continue;if(this.expand(r),0===this.getLevel(r))break}}}}class Hm{constructor(){this.selectedUnitChange=new i.EventEmitter,this.treeControl=new rT(e=>e.level,e=>e.expandable),this.treeFlattener=new nt.yj(this._transformNodeToFlatNode,e=>e.level,e=>e.expandable,e=>e.children),this.treeDataSource=new nt.zw(this.treeControl,this.treeFlattener)}set dataSource(e){this._dataSource!==e&&(this._dataSource=e,this._initTreeDataSource(),this._expandToSysAdminUnit(this.selectedUnit))}set selectedUnit(e){this._selectedUnit!==e&&(this._selectedUnit=e,this._expandToSysAdminUnit(e))}get selectedUnit(){return this._selectedUnit}_createNode(e){return{id:e.id,name:e.name,children:[]}}_transformNodeToFlatNode(e,t){return{id:e.id,name:e.name,expandable:!!(e.children&&e.children.length>0),level:t}}_createTreeDataFromFlatList(e){const t=[],n=[],a=e.map((r,u)=>(n[r.id]=u,this._createNode(r)),this);return e.forEach(r=>{const u=a[n[r.id]];if((0,c.isEmptyGuid)(r.parentRoleId)||r.sysAdminUnitTypeValue===_.ZhS.User)t.push(u);else{const p=a[n[r.parentRoleId]];if(!p)return;p.children.push(u)}}),t}_initTreeDataSource(){Array.isArray(this._dataSource)?this.treeDataSource.data=this._createTreeDataFromFlatList(this._dataSource):this.treeDataSource=null}_expandToSysAdminUnit(e){if(!e||!this.treeControl.dataNodes)return;const t=this.treeControl.dataNodes.find(n=>n.id===e.id);t&&(this.treeControl.expandParents(t),setTimeout(()=>this._scrollToItem(e),0))}_scrollToItem(e){const t=this._dataSource.findIndex(r=>r.id===e.id),n=this.treeScrollWrapper.nativeElement,a=n.scrollHeight/this._dataSource.length;n.scrollTop=t*a}hasChildren(e,t){return t.expandable}onNodeClick(e){const t=this._dataSource.find(n=>n.id===e.id);this._selectedUnit=t,this.selectedUnitChange.emit(t)}isSelectedNode(e){return!(!this.selectedUnit||this.selectedUnit.id!==e.id)}static{this.\u0275fac=function(t){return new(t||Hm)}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:Hm,selectors:[["ts-sysadminunit-tree"]],viewQuery:function(t,n){if(1&t&&i.\u0275\u0275viewQuery(iT,7),2&t){let a;i.\u0275\u0275queryRefresh(a=i.\u0275\u0275loadQuery())&&(n.treeScrollWrapper=a.first)}},inputs:{dataSource:"dataSource",selectedUnit:"selectedUnit"},outputs:{selectedUnitChange:"selectedUnitChange"},decls:5,vars:3,consts:[["treeScrollWrapper",""],[1,"tree-wrapper"],[3,"dataSource","treeControl"],["matTreeNodePadding","","matTreeNodePaddingIndent","27",3,"ngClass","click",4,"matTreeNodeDef"],["matTreeNodePadding","","matTreeNodePaddingIndent","27",3,"ngClass","click",4,"matTreeNodeDef","matTreeNodeDefWhen"],["matTreeNodePadding","","matTreeNodePaddingIndent","27",3,"click","ngClass"],[1,"toggle-icon"],["matTreeNodeToggle","",1,"toggle-icon",3,"ngClass"]],template:function(t,n){1&t&&(i.\u0275\u0275elementStart(0,"div",1,0)(2,"mat-tree",2),i.\u0275\u0275template(3,aT,3,4,"mat-tree-node",3)(4,sT,3,6,"mat-tree-node",4),i.\u0275\u0275elementEnd()()),2&t&&(i.\u0275\u0275advance(2),i.\u0275\u0275property("dataSource",n.treeDataSource)("treeControl",n.treeControl),i.\u0275\u0275advance(2),i.\u0275\u0275property("matTreeNodeDefWhen",n.hasChildren))},dependencies:[R.NgClass,nt.yI,nt.yF,nt.pO,nt.lQ,nt.d6],styles:[".tree-wrapper[_ngcontent-%COMP%]{padding-top:15px;display:block;overflow:auto;max-height:313px}.tree-wrapper[_ngcontent-%COMP%]   .mat-tree-node[_ngcontent-%COMP%]{color:#444;line-height:19px;max-height:30px;min-height:30px;white-space:nowrap}.tree-wrapper[_ngcontent-%COMP%]   .mat-tree-node.selected[_ngcontent-%COMP%]{background-color:#f2f5ff}.tree-wrapper[_ngcontent-%COMP%]   .mat-tree-node[_ngcontent-%COMP%]   .toggle-icon[_ngcontent-%COMP%]{width:16px;height:16px;margin-right:14px;margin-top:2px}.tree-wrapper[_ngcontent-%COMP%]   .mat-tree-node[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]{background:url(plus.svg) no-repeat;cursor:pointer}.tree-wrapper[_ngcontent-%COMP%]   .mat-tree-node[_ngcontent-%COMP%]   .minus[_ngcontent-%COMP%]{background:url(minus.svg) no-repeat;cursor:pointer}"]})}}const oT=["usersListContainer"],lT=(o,e)=>({"mat-optgroup-label":o,"selectable-item":e}),cT=o=>({selected:o});function uT(o,e){1&o&&i.\u0275\u0275element(0,"ts-mask")}function dT(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"mat-option",22),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&o){const t=e.$implicit;i.\u0275\u0275property("value",t.sysAdminUnit)("ngClass",i.\u0275\u0275pureFunction2(4,lT,!t.sysAdminUnit,t.sysAdminUnit))("disabled",!t.sysAdminUnit),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate((null==t.sysAdminUnit?null:t.sysAdminUnit.name)||t.groupName)}}function pT(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"cdk-virtual-scroll-viewport",20),i.\u0275\u0275template(1,dT,2,7,"mat-option",21),i.\u0275\u0275elementEnd()),2&o){const t=i.\u0275\u0275nextContext();i.\u0275\u0275styleProp("height",t.calculateSearchResultContainerHeight()),i.\u0275\u0275advance(),i.\u0275\u0275property("cdkVirtualForOf",t.filteredSysAdminUnits)}}function mT(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"ts-sysadminunit-tree",23),i.\u0275\u0275twoWayListener("selectedUnitChange",function(a){i.\u0275\u0275restoreView(t);const r=i.\u0275\u0275nextContext();return i.\u0275\u0275twoWayBindingSet(r.selectedUnit,a)||(r.selectedUnit=a),i.\u0275\u0275resetView(a)}),i.\u0275\u0275listener("dblclick",function(){i.\u0275\u0275restoreView(t);const a=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(a.onTreeDoubleClick())}),i.\u0275\u0275elementEnd()}if(2&o){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("dataSource",t.dataSource),i.\u0275\u0275twoWayProperty("selectedUnit",t.selectedUnit)}}function hT(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"ts-sysadminunit-tree",23),i.\u0275\u0275twoWayListener("selectedUnitChange",function(a){i.\u0275\u0275restoreView(t);const r=i.\u0275\u0275nextContext();return i.\u0275\u0275twoWayBindingSet(r.selectedUnit,a)||(r.selectedUnit=a),i.\u0275\u0275resetView(a)}),i.\u0275\u0275listener("dblclick",function(){i.\u0275\u0275restoreView(t);const a=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(a.onTreeDoubleClick())}),i.\u0275\u0275elementEnd()}if(2&o){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("dataSource",t.dataSource),i.\u0275\u0275twoWayProperty("selectedUnit",t.selectedUnit)}}function gT(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",27),i.\u0275\u0275listener("click",function(){const a=i.\u0275\u0275restoreView(t).$implicit,r=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(r.onItemClick(a))})("dblclick",function(){i.\u0275\u0275restoreView(t);const a=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(a.onTreeDoubleClick())}),i.\u0275\u0275elementStart(1,"div",28),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()()}if(2&o){const t=e.$implicit,n=i.\u0275\u0275nextContext(2);i.\u0275\u0275propertyInterpolate("id",t.id),i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(3,cT,n.isSelectedItem(t))),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",t.name," ")}}function fT(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"div",24)(1,"cdk-virtual-scroll-viewport",25,1),i.\u0275\u0275template(3,gT,3,5,"div",26),i.\u0275\u0275elementEnd()()),2&o){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(3),i.\u0275\u0275property("cdkVirtualForOf",t.dataSource)}}var vt;!function(o){o[o.OrganizationRoles=0]="OrganizationRoles",o[o.FunctionalRoles=1]="FunctionalRoles",o[o.Users=2]="Users"}(vt||(vt={}));class yy{constructor(e,t,n,a,r){this.dialogRef=e,this.dialogService=t,this.rightManagementService=n,this.translateService=a,this.data=r,this.isLoading=!1,this.selectedTabIndex=0}_getGroupNameByTabIndex(e){let t="";switch(e){case vt.OrganizationRoles:t=this.translateService.instant("SelectSysAdminUnitDialog.OrganizationalRoles");break;case vt.FunctionalRoles:t=this.translateService.instant("SelectSysAdminUnitDialog.FunctionalRoles");break;case vt.Users:t=this.translateService.instant("SelectSysAdminUnitDialog.Users")}return t}_getAllEmployeesUnit(){return this.sysAdminUnits.find(e=>e.id===_.J$r)}_getAllPortalUsersUnit(){return this.sysAdminUnits.find(e=>e.id===_.vZG)}_getSysAdminUnitTypesByTabIndex(e){let t=[];switch(e){case vt.OrganizationRoles:t=[_.ZhS.Organization,_.ZhS.Division,_.ZhS.Manager,_.ZhS.SelfServicePortalUser];break;case vt.FunctionalRoles:t=[_.ZhS.FunctionalRole];break;case vt.Users:t=[_.ZhS.User,_.ZhS.TechnicalUser]}return t}_fillSysAdminUnitsWithGroup(e){this.sysAdminUnitsWithGroup=[],Object.keys(vt).forEach(t=>{const n=Number(vt[t]);if(isNaN(n))return;const a=this._getSysAdminUnitTypesByTabIndex(n),r=this._getGroupNameByTabIndex(n);this.sysAdminUnitsWithGroup.push({sysAdminUnit:null,tabIndex:n,groupName:r}),e.filter(u=>a.indexOf(u.sysAdminUnitTypeValue)>-1).forEach(u=>{this.sysAdminUnitsWithGroup.push({sysAdminUnit:u,tabIndex:n,groupName:r})})})}_prepareSysAdminUnits(e){if(!e||!e.success)return this.isLoading=!1,void(e&&e.errorInfo&&this.dialogService.openInfoDialog(e.errorInfo.message));this.sysAdminUnits=e.sysAdminUnits,this._fillSysAdminUnitsWithGroup(this.sysAdminUnits),this.fillContentByTab(vt.OrganizationRoles),this.isLoading=!1}_applySysAdminUnit(){const e=this.data&&this.data.validator,t=e&&e(this.selectedUnit);!t||t.success?this.dialogRef.close(this.selectedUnit):this.dialogService.openInfoDialog(t.message)}_changeTabIndexBySysAdminUnitType(e){let t=this.selectedTabIndex;switch(e){case _.ZhS.Organization:case _.ZhS.Division:case _.ZhS.Manager:case _.ZhS.SelfServicePortalUser:t=vt.OrganizationRoles;break;case _.ZhS.FunctionalRole:t=vt.FunctionalRoles;break;case _.ZhS.User:case _.ZhS.TechnicalUser:t=vt.Users}this.selectedTabIndex=t}_scrollToSelectedItem(){const e=this.selectedUnit&&this.dataSource.findIndex(t=>t.id===this.selectedUnit.id);-1!==e&&setTimeout(()=>{this._viewport.scrollToIndex(e)},0)}ngOnInit(){this.isLoading=!0,this.rightManagementService.getSysAdminUnitList().subscribe(this._prepareSysAdminUnits.bind(this))}fillContentByTab(e){if(!Array.isArray(this.sysAdminUnits))return void(this.dataSource=null);const t=this._getSysAdminUnitTypesByTabIndex(e),n=this.sysAdminUnits.filter(a=>t.indexOf(a.sysAdminUnitTypeValue)>-1);if(e===vt.FunctionalRoles){n.push(this._getAllEmployeesUnit());const a=this._getAllPortalUsersUnit();a&&n.push(a)}this.dataSource=n,this.selectedTabIndex===vt.Users&&this._scrollToSelectedItem()}onTreeDoubleClick(){this.selectedUnit&&this._applySysAdminUnit()}onSelectButtonClick(){this._applySysAdminUnit()}getSysAdminUnitName(e){return e.name}onFilteredSysAdminUnitSelected(e){const t=e.option.value;this._changeTabIndexBySysAdminUnitType(t.sysAdminUnitTypeValue),this.selectedUnit=t,this.fillContentByTab(this.selectedTabIndex),this.selectedTabIndex===vt.Users&&this._scrollToSelectedItem()}search(e){!e||e.length<3?this.filteredSysAdminUnits=[]:(e=e.toLocaleLowerCase(),this.filteredSysAdminUnits=this.sysAdminUnitsWithGroup.filter(n=>!n.sysAdminUnit||-1!==n.sysAdminUnit.name.toLowerCase().indexOf(e.toLowerCase())).filter((n,a,r)=>n.sysAdminUnit||!n.sysAdminUnit&&r.findIndex(u=>u.groupName===n.groupName&&u.sysAdminUnit)>-1))}isOrganizationalRolesVisible(){return this.selectedTabIndex===vt.OrganizationRoles}isFunctionalRolesVisible(){return this.selectedTabIndex===vt.FunctionalRoles}isUsersVisible(){return this.selectedTabIndex===vt.Users}onItemClick(e){this.selectedUnit=e}isSelectedItem(e){return!(!this.selectedUnit||this.selectedUnit.id!==e.id)}calculateSearchResultContainerHeight(){return 33*this.filteredSysAdminUnits.length+"px"}static{this.\u0275fac=function(t){return new(t||yy)(i.\u0275\u0275directiveInject(he.RN),i.\u0275\u0275directiveInject(re.o3),i.\u0275\u0275directiveInject(vc),i.\u0275\u0275directiveInject(v.c$),i.\u0275\u0275directiveInject(he.xh))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:yy,selectors:[["ts-select-sysadminunit-dialog"]],viewQuery:function(t,n){if(1&t&&i.\u0275\u0275viewQuery(oT,5),2&t){let a;i.\u0275\u0275queryRefresh(a=i.\u0275\u0275loadQuery())&&(n._viewport=a.first)}},decls:33,vars:30,consts:[["auto","matAutocomplete"],["usersListContainer",""],[4,"ngIf"],["mat-dialog-title",""],["mat-icon-button","",1,"close-dialog",3,"mat-dialog-close"],["svgIcon","close",1,"close-button-icon"],["mat-dialog-actions",""],["mat-flat-button","","color","accent",3,"click","disabled"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"],["mat-dialog-content",""],[1,"search-input"],["floatLabel","never"],["matInput","","type","text","spellcheck","false",3,"input","focus","placeholder","matAutocomplete"],["matSuffix","","svgIcon","search"],[3,"optionSelected","displayWith"],["itemSize","33","minBufferPx","297","maxBufferPx","396","class","search-list-viewport",3,"height",4,"ngIf"],["mat-stretch-tabs","","animationDuration","0ms","disableRipple","true",3,"selectedIndexChange","selectedIndex"],[3,"label"],[3,"dataSource","selectedUnit","selectedUnitChange","dblclick",4,"ngIf"],["class","users-wrapper",4,"ngIf"],["itemSize","33","minBufferPx","297","maxBufferPx","396",1,"search-list-viewport"],[3,"value","ngClass","disabled",4,"cdkVirtualFor","cdkVirtualForOf"],[3,"value","ngClass","disabled"],[3,"selectedUnitChange","dblclick","dataSource","selectedUnit"],[1,"users-wrapper"],["itemSize","30","minBufferPx","300","maxBufferPx","600",1,"users-list-viewport"],["class","mat-tree-node",3,"ngClass","id","click","dblclick",4,"cdkVirtualFor","cdkVirtualForOf"],[1,"mat-tree-node",3,"click","dblclick","ngClass","id"],[1,"user-item"]],template:function(t,n){if(1&t){const a=i.\u0275\u0275getCurrentView();i.\u0275\u0275template(0,uT,1,0,"ts-mask",2),i.\u0275\u0275elementStart(1,"div",3)(2,"span"),i.\u0275\u0275text(3),i.\u0275\u0275pipe(4,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"button",4),i.\u0275\u0275element(6,"mat-icon",5),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(7,"div",6)(8,"button",7),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.onSelectButtonClick())}),i.\u0275\u0275text(9),i.\u0275\u0275pipe(10,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(11,"button",8),i.\u0275\u0275text(12),i.\u0275\u0275pipe(13,"translate"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(14,"div",9)(15,"div",10)(16,"mat-form-field",11)(17,"input",12),i.\u0275\u0275pipe(18,"translate"),i.\u0275\u0275listener("input",function(u){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.search(u.target.value))})("focus",function(u){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.search(u.target.value))}),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(19,"mat-icon",13),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(20,"mat-autocomplete",14,0),i.\u0275\u0275listener("optionSelected",function(u){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.onFilteredSysAdminUnitSelected(u))}),i.\u0275\u0275template(22,pT,2,3,"cdk-virtual-scroll-viewport",15),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(23,"mat-tab-group",16),i.\u0275\u0275twoWayListener("selectedIndexChange",function(u){return i.\u0275\u0275restoreView(a),i.\u0275\u0275twoWayBindingSet(n.selectedTabIndex,u)||(n.selectedTabIndex=u),i.\u0275\u0275resetView(u)}),i.\u0275\u0275listener("selectedIndexChange",function(u){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.fillContentByTab(u))}),i.\u0275\u0275elementStart(24,"mat-tab",17),i.\u0275\u0275pipe(25,"translate"),i.\u0275\u0275template(26,mT,1,2,"ts-sysadminunit-tree",18),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(27,"mat-tab",17),i.\u0275\u0275pipe(28,"translate"),i.\u0275\u0275template(29,hT,1,2,"ts-sysadminunit-tree",18),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(30,"mat-tab",17),i.\u0275\u0275pipe(31,"translate"),i.\u0275\u0275template(32,fT,4,1,"div",19),i.\u0275\u0275elementEnd()()()}if(2&t){const a=i.\u0275\u0275reference(21);i.\u0275\u0275property("ngIf",n.isLoading),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(4,16,"SelectSysAdminUnitDialog.Title")),i.\u0275\u0275advance(5),i.\u0275\u0275property("disabled",!n.selectedUnit),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(10,18,"SelectSysAdminUnitDialog.Select")," "),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(13,20,"SelectSysAdminUnitDialog.Cancel")),i.\u0275\u0275advance(5),i.\u0275\u0275property("placeholder",i.\u0275\u0275pipeBind1(18,22,"SelectSysAdminUnitDialog.Search"))("matAutocomplete",a),i.\u0275\u0275advance(3),i.\u0275\u0275property("displayWith",n.getSysAdminUnitName),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",n.filteredSysAdminUnits&&n.filteredSysAdminUnits.length>0),i.\u0275\u0275advance(),i.\u0275\u0275twoWayProperty("selectedIndex",n.selectedTabIndex),i.\u0275\u0275advance(),i.\u0275\u0275property("label",i.\u0275\u0275pipeBind1(25,24,"SelectSysAdminUnitDialog.OrganizationalRoles")),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",n.isOrganizationalRolesVisible()),i.\u0275\u0275advance(),i.\u0275\u0275property("label",i.\u0275\u0275pipeBind1(28,26,"SelectSysAdminUnitDialog.FunctionalRoles")),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",n.isFunctionalRolesVisible()),i.\u0275\u0275advance(),i.\u0275\u0275property("label",i.\u0275\u0275pipeBind1(31,28,"SelectSysAdminUnitDialog.Users")),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",n.isUsersVisible())}},dependencies:[fy.I,R.NgClass,R.NgIf,Xt.G7,Xt.cm,Qu.d1,Ve.iV,he.kQ,he.KI,he.PQ,he.$t,be.An,ve.Ky,ve.xZ,Ue.aL,Ht.cR,Ht.pW,yd.yg,yd.E$,yd.d6,Hm,v.D9],styles:["[_nghost-%COMP%]{padding:4px 10px;min-width:580px;min-height:512px}[mat-dialog-actions][_ngcontent-%COMP%]{margin-bottom:5px!important}.search-input[_ngcontent-%COMP%]{padding-top:12px;font-size:14px}.search-input[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:100%;line-height:18px!important}.search-input[_ngcontent-%COMP%]   mat-icon[svgicon=search][_ngcontent-%COMP%]{width:16px;height:16px;line-height:0;vertical-align:middle}.search-list-viewport[_ngcontent-%COMP%]{max-height:254px}.selectable-item[_ngcontent-%COMP%]{padding-left:50px}.users-wrapper[_ngcontent-%COMP%]   .users-list-viewport[_ngcontent-%COMP%]{height:325px}.users-wrapper[_ngcontent-%COMP%]   .mat-tree-node[_ngcontent-%COMP%]{color:#444;line-height:19px;max-height:30px;min-height:30px;white-space:nowrap}.users-wrapper[_ngcontent-%COMP%]   .mat-tree-node.selected[_ngcontent-%COMP%]{background-color:#f2f5ff}.users-wrapper[_ngcontent-%COMP%]   .mat-tree-node[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]{margin-left:30px}"]})}}class $m{static{this.\u0275fac=function(t){return new(t||$m)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:$m})}static{this.\u0275inj=i.\u0275\u0275defineInjector({providers:[v.c$],imports:[ce.YN,R.CommonModule,re.Ss,v.h]})}}var qm=b(4770);class _y{constructor(){this.readOnly=!1,this.textChange=new i.EventEmitter}static{this.\u0275fac=function(t){return new(t||_y)}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:_y,selectors:[["ts-code-editor"]],inputs:{language:"language",readOnly:"readOnly",text:"text"},outputs:{textChange:"textChange"},decls:1,vars:0,template:function(t,n){1&t&&i.\u0275\u0275element(0,"div")},encapsulation:2})}}class Cy{static{this.\u0275fac=function(t){return new(t||Cy)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:Cy})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[R.CommonModule]})}}var Ed=b(66269),yT=b(35207);const _T=["codemirrorContainer"];function CT(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"div",3),i.\u0275\u0275element(1,"ts-info-tooltip-icon",4),i.\u0275\u0275elementEnd()),2&o){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(),i.\u0275\u0275property("message",t.tooltipMessage)}}class xd{get _languageOptions(){return this.languagesOptions.get(this.language)}get code(){return this._code}set codemirrorContainer(e){this._renderCodemirrorComponent(e)}set text(e){if(e===this._innerCode)return;const t=this._normalizeToEOL(e);this._code=t,this._innerCode=t,this._applyCodemirrorProperty("value",t)}set lineSeparator(e){e!==this._lineSeparator&&(this._lineSeparator=e,this._applyCodemirrorProperty("lineSeparator",e))}get lineSeparator(){return this._lineSeparator}set language(e){this._language=e,this._applyCodemirrorProperty("language",e),this._applyCodemirrorProperty("languageOptions",this._languageOptions)}get language(){return this._language}set readOnly(e){this._readOnly=e,this._applyCodemirrorProperty("readOnly",e)}get readOnly(){return this._readOnly}get tooltipMessage(){return this._tooltipKeys.map(e=>this._translateService.instant(e)).join("\r\n")}constructor(e,t,n){this._translateService=e,this._changeDetector=t,this._featureValues=n,this._readOnly=!1,this._lineSeparator=Ed.LineSeparator.CRLF,this._keyBinding=[{key:"F11",run:function(){return this.toggleFullScreenMode(),!0}.bind(this)},{key:"Escape",run:function(){return this.escapeFullScreenMode(),!0}.bind(this)}],this._tooltipKeys=["CodeMirror.HotkeysDescription","CodeMirror.SelectAll","CodeMirror.Undo","CodeMirror.Redo","CodeMirror.Find","CodeMirror.FindNext","CodeMirror.FindPrev","CodeMirror.Replace","CodeMirror.ReplaceAll","CodeMirror.DeleteLine","CodeMirror.GoLineStart","CodeMirror.GoLineEnd","CodeMirror.JmpToLine","CodeMirror.Fullscreen","CodeMirror.FullscreenExit","CodeMirror.Autocomplete"],this._defaultIndentUnitValue="\t",this._eolNormalizationTemplate=new RegExp(`${Ed.LineSeparator.CRLF}|${Ed.LineSeparator.CR}|${Ed.LineSeparator.LF}`,"g"),this.isFullScreen=!1,this.hideTooltip=!1,this.languagesOptions=new Map([[qm.F.Javascript,{parserOptions:{ecmaVersion:2020},rules:{semi:["warn"]}}]]),this.textChange=new i.EventEmitter}get useNormalizeEndLine(){return!this._featureValues.DisableNormalizeEndLineInCodeMirror}get useNormalizeEndLineInPasteOperation(){return!this._featureValues.DisableNormalizeEndLineInPasteOperationInCodeMirror}_applyCodemirrorProperty(e,t){this._codemirrorComponent&&(this._codemirrorComponent[e]=t)}_renderCodemirrorComponent(e){Promise.resolve().then(b.bind(b,66269)).then(t=>{const n=t.CodemirrorComponent;this._codemirrorComponent=e.createComponent(n).instance,this._codemirrorComponent.value=this._code,this._codemirrorComponent.registerOnChange(this.onTextChange.bind(this)),this._codemirrorComponent.language=this._language,this._codemirrorComponent.languageOptions=this._languageOptions,this._codemirrorComponent.readOnly=this._readOnly,this._codemirrorComponent.keyBinding=this._keyBinding,this.useNormalizeEndLine&&(this._codemirrorComponent.lineSeparator=this._lineSeparator),this._codemirrorComponent.indentUnitValue=this._defaultIndentUnitValue,this.useNormalizeEndLineInPasteOperation&&this._codemirrorComponent.registerOnPaste(this.handleTextPasted.bind(this)),this._changeDetector.detectChanges()})}_normalizeToEOL(e){return this.useNormalizeEndLine?e.replace(this._eolNormalizationTemplate,this._lineSeparator):e}_normalizeToInternalCodeMirrorEOL(e){return e.replace(this._eolNormalizationTemplate,Ed.LineSeparator.LF)}_getSelectionRange(){const t=this._codemirrorComponent._editorView.state.selection.main,n=t?t.from:this._codemirrorComponent.value.length;return{selectionStart:n,selectionEnd:t?t.to:n}}escapeFullScreenMode(){this.isFullScreen&&this.toggleFullScreenMode()}handleTextPasted(e){if(!this.useNormalizeEndLineInPasteOperation)return;e.preventDefault();const t=e.clipboardData?.getData("text")||"",n=this._normalizeToEOL(t),a=this._codemirrorComponent.value,{selectionStart:r,selectionEnd:u}=this._getSelectionRange(),p=r+this._normalizeToInternalCodeMirrorEOL(t).length;this._codemirrorComponent._editorView.dispatch({changes:{from:r,to:u,insert:n},selection:{anchor:p},userEvent:"input.paste"});const f=a.slice(0,r)+n+a.slice(u);this.onTextChange(f)}toggleFullScreenMode(){this.isFullScreen=!this.isFullScreen,this._changeDetector.detectChanges()}onTextChange(e){const t=this._normalizeToEOL(e);t!==this._innerCode&&(this._innerCode=t,this.textChange.emit(t))}static{this.\u0275fac=function(t){return new(t||xd)(i.\u0275\u0275directiveInject(v.c$),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(_.G2Y))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:xd,selectors:[["ts-code-editor"]],viewQuery:function(t,n){if(1&t&&i.\u0275\u0275viewQuery(_T,5,i.ViewContainerRef),2&t){let a;i.\u0275\u0275queryRefresh(a=i.\u0275\u0275loadQuery())&&(n.codemirrorContainer=a.first)}},inputs:{hideTooltip:"hideTooltip",text:"text",lineSeparator:"lineSeparator",language:"language",readOnly:"readOnly",languagesOptions:"languagesOptions"},outputs:{textChange:"textChange"},decls:4,vars:2,consts:[["codemirrorContainer",""],["class","CodeMirror-hotkeys-tooltip-infoButton",4,"ngIf"],[3,"className"],[1,"CodeMirror-hotkeys-tooltip-infoButton"],[1,"field-tooltip",3,"message"]],template:function(t,n){1&t&&(i.\u0275\u0275template(0,CT,2,1,"div",1),i.\u0275\u0275elementStart(1,"div",2),i.\u0275\u0275elementContainer(2,null,0),i.\u0275\u0275elementEnd()),2&t&&(i.\u0275\u0275property("ngIf",!n.hideTooltip),i.\u0275\u0275advance(),i.\u0275\u0275property("className",n.isFullScreen?"CodeMirror-Wrapper-Full-Screen":"CodeMirror-Wrapper"))},dependencies:[R.NgIf,yT.M],styles:[".CodeMirror-hotkeys-tooltip-infoButton{display:flex;justify-content:flex-end;position:sticky;top:0;margin-top:-22px;transform:translate(-10px,10px);pointer-events:none;z-index:99}.CodeMirror-hotkeys-tooltip-infoButton .field-tooltip{pointer-events:auto}\n"],encapsulation:2})}}var Ec,Te,br,hS,by,Sy,Ad,bT=b(25612);!function(o){o[o.json=1]="json",o[o.xml=2]="xml"}(Ec||(Ec={})),function(o){o.Text="Text",o.Integer="Integer",o.Float="Float",o.Boolean="Boolean",o.DateTime="DateTime",o.Guid="Guid",o.Date="Date",o.Time="Time",o.Object="Object"}(Te||(Te={})),function(o){o[o.undefined=0]="undefined",o[o.rest=1]="rest",o[o.soap11=2]="soap11",o[o.soap12=3]="soap12"}(br||(br={})),function(o){o[o.None=0]="None",o[o.Basic=1]="Basic",o[o.Digest=2]="Digest",o[o.OAuth20=3]="OAuth20"}(hS||(hS={})),function(o){o[o.Undefined=0]="Undefined",o[o.Get=1]="Get",o[o.Post=2]="Post",o[o.Put=3]="Put",o[o.Patch=4]="Patch",o[o.Delete=5]="Delete"}(by||(by={})),function(o){o[o.Undefined=0]="Undefined",o[o.Body=1]="Body",o[o.UrlSegment=2]="UrlSegment",o[o.QueryString=3]="QueryString",o[o.HttpHeader=4]="HttpHeader",o[o.Cookie=5]="Cookie"}(Sy||(Sy={})),function(o){o[o.None=0]="None",o[o.Const=1]="Const",o[o.SysSetting=2]="SysSetting"}(Ad||(Ad={}));const vy={string:Te.Text,boolean:Te.Boolean,decimal:Te.Float,float:Te.Float,double:Te.Float,dateTime:Te.DateTime,time:Te.Time,date:Te.Date,hexBinary:Te.Text,base64Binary:Te.Text,integer:Te.Integer,nonPositiveInteger:Te.Text,negativeInteger:Te.Text,long:Te.Integer,int:Te.Integer,short:Te.Integer,byte:Te.Integer,nonNegativeInteger:Te.Text,unsignedLong:Te.Text,unsignedInt:Te.Text,unsignedShort:Te.Integer,unsignedByte:Te.Integer,positiveInteger:Te.Text,char:Te.Integer,guid:Te.Guid,anyType:Te.Text},ST=new i.InjectionToken("OptionsSkipUnsuccessfulResponseHandling"),vT=new i.InjectionToken("SchemaDesignerApiUrl");class Iy extends _.DQf{constructor(e){super(e),this.typeName="Terrasoft.Core.Addons.AddonSchema",this.metaData=e.metaData,this.addonName=e.addonName,this.targetSchemaUId=e.targetSchemaUId,this.targetSchemaManagerName=e.targetSchemaManagerName,this.typeName=e.typeName,this.id=e.id,this.parentSchemaUId=e.parentSchemaUId,this.package=e.package,this.resources=e.resources,this.useFullHierarchy=e.useFullHierarchy}clone(){return new Iy(this)}set addonConfig(e){this.metaData=JSON.stringify(e,null,"\t")}get addonConfig(){try{return JSON.parse(this.metaData)}catch{throw new Error("Invalid addon JSON metadata received from server")}}equal(e){return this.metaData===e.metaData&&this.addonName===e.addonName&&this.targetSchemaManagerName===e.targetSchemaManagerName&&this.targetSchemaUId===e.targetSchemaUId&&this.typeName===e.typeName&&this.extendParent===e.extendParent&&this.uId===e.uId&&this.name===e.name&&this.packageUId===e.packageUId&&this.caption===e.caption&&this.id===e.id&&this.parentSchemaUId===e.parentSchemaUId}}class Wm{constructor(...e){if(this._isLoaded=!1,this._isChanged=!1,this.id=(0,c.generateGuid)(),e[0]instanceof Wm){const t=e[0];this.addonName=t.addonName,this._targetSchemaUId=t.targetSchemaUId,this.targetSchemaManagerName=t.targetSchemaManagerName,this.targetParentSchemaUId=t.targetParentSchemaUId,this.targetPackageUId=t.targetPackageUId,this.id=t.id,this._apiService=t._apiService,this._isLoaded=t._isLoaded,this._isChanged=t._isChanged,t._schema&&(this._schema=t._schema.clone()),this.useFullHierarchy=t.useFullHierarchy}else this.addonName=e[0],this._targetSchemaUId=e[1],this.targetParentSchemaUId=e[2],this.targetPackageUId=e[3],this.targetSchemaManagerName=e[4],this._apiService=e[5],this.useFullHierarchy=e[6]}get schema$(){return this._isLoaded?(0,h.of)(this._schema):this._loadSchema()}get isChanged(){return this._isChanged}get resources(){return this._resources}get targetSchemaUId(){return this._targetSchemaUId}set targetSchemaUId(e){this._targetSchemaUId=e,this._schema&&(this._schema.targetSchemaUId=e)}get addonConfig(){return this.schema$.pipe((0,E.T)(e=>{const t=e.addonConfig;return this._setMetadataDefValues(t),t}))}set addonConfig(e){(0,h.forkJoin)([this.schema$,e]).subscribe(([t,n])=>{t.addonConfig=n,this._isChanged=!0})}_setMetadataDefValues(e){this.addonName===_.ub_.BusinessRule&&e.rules?.forEach(n=>{n.name=n.name||Xd(),n.enabled=n.enabled||void 0===n.enabled})}_setAddonResources(e){this._resources=e.map(t=>{const n=t.key.split(".");return{key:[n[2],n[3]].join("."),value:t.value}}),this._schema.resources=[...this._resources]}_loadSchema(){return this._schema$||(this._schema$=this._apiService.getAddon({targetSchemaUId:this.targetSchemaUId,addonName:this.addonName,targetParentSchemaUId:this.targetParentSchemaUId,targetPackageUId:this.targetPackageUId,targetSchemaManagerName:this.targetSchemaManagerName,useFullHierarchy:this.useFullHierarchy}).pipe((0,P.M)(e=>{e.success&&(this._schema=new Iy(e.schema),this._schema.typeName="Terrasoft.Core.Addons.AddonSchema",this._isLoaded=!0,this._setAddonResources(e.schema.resources??[]))}),(0,E.T)(()=>this._schema),(0,ie.u)())),this._schema$}save(){return this._isLoaded?this._apiService.saveAddon(this._schema).pipe((0,E.T)(e=>e.success),(0,P.M)(()=>{this._isChanged=!1})):(0,h.of)(!0)}clone(){return new Wm(this)}equal(e){let t=this._isLoaded===e._isLoaded&&e.targetSchemaUId===this.targetSchemaUId&&e.addonName===this.addonName&&this.targetSchemaManagerName===e.targetSchemaManagerName;return t&&this._isLoaded&&(t=this._schema.equal(e._schema)),t}createOrUpdateResource(e){const t=this.resources.findIndex(n=>n.key===e.key);-1===t?this.resources.push(e):this.resources.splice(t,1,e),this._schema.resources=[...this._resources]}removeResource(e){const t=this.resources.findIndex(n=>n.key===e);this.resources.splice(t,1),this._schema.resources=[...this._resources]}}class Ii{constructor(e){e&&(this.uId=e.uId,this.name=e.name,this.parentSchemaUId=e.parentSchemaUId),this.uId=this.uId||(0,c.generateGuid)()}update(e){this.uId=e.uId,this.name=e.name}equal(e){if(null==e)return!1;let t=this.uId===e.uId&&this.name===e.name;return(this.parentSchemaUId||e.parentSchemaUId)&&(t=t&&this.parentSchemaUId===e.parentSchemaUId),t}clone(){return new Ii(this)}getLocalizableValues(e){}loadLocalizableValues(e,t=!1){}}var _S,CS,bS,SS;!function(o){o[o.Subscribe=0]="Subscribe",o[o.Publish=1]="Publish"}(_S||(_S={})),function(o){o[o.Broadcast=0]="Broadcast",o[o.PointToPoint=1]="PointToPoint"}(CS||(CS={})),function(o){o[o.General=0]="General",o[o.Assembly=1]="Assembly"}(bS||(bS={}));!function(o){o[o.Success=0]="Success",o[o.Error=1]="Error",o[o.NoChanges=2]="NoChanges"}(SS||(SS={}));const TT=new i.InjectionToken("SchemaDesignerConverter");var xc;!function(o){o[o.NO=0]="NO",o[o.YES=1]="YES"}(xc||(xc={}));xc.NO,xc.NO,xc.YES,xc.YES;class Ac{constructor(e){this.getAddonMethodName="GetSchema",this.getAddonMetadataMethodName="GetSchemaMetadata",this.saveAddonMethodName="SaveSchema",this.serviceEndpoint="/ServiceModel/AddonSchemaDesignerService.svc/",this._httpClient=e.get(F.HttpClient),this._workplaceService=e.get(_.sGI)}getAddon(e){const t=`${this.serviceEndpoint}${this.getAddonMethodName}`;return this._httpClient.post(t,e)}getAddonMetadata(e){const t=`${this.serviceEndpoint}${this.getAddonMetadataMethodName}`;return this._httpClient.post(t,e)}saveAddon(e){const t=`${this.serviceEndpoint}${this.saveAddonMethodName}`;return this._httpClient.post(t,e).pipe((0,h.switchMap)(n=>this._workplaceService.resetWorkplaceScriptCache().pipe((0,E.T)(()=>n))))}static{this.\u0275fac=function(t){return new(t||Ac)(i.\u0275\u0275inject(i.Injector))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Ac,factory:Ac.\u0275fac})}}class Rc{constructor(e){this._apiService=e.get(Ac),this._features=e.get(_.G2Y,{optional:!0})}_getParentSchemaUId(e){const t=e.parentSchema??e.parent;return t?.name===e.name?t.uId:c.EMPTY_GUID}create(e,t){return e.addonTypes&&0!==e.addonTypes.length?e.addonTypes.map(n=>{const a=this._getParentSchemaUId(e);return this.createAddonInfo(e,n,a,t)}):[]}createAddonInfo(e,t,n,a){return new Wm(t,e.uId,n,e.package.uId,a,this._apiService,e.useFullHierarchy)}static{this.\u0275fac=function(t){return new(t||Rc)(i.\u0275\u0275inject(i.Injector))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Rc,factory:Rc.\u0275fac})}}class Jm extends En{get converter(){return this._converter}constructor(e){super(),this._restErrorHandleOptions={},this.createNewSchemaMethodName="CreateNewSchema",this.getSchemaMethodName="GetSchema",this.saveSchemaMethodName="SaveSchema",this.serviceEndpoint=e.get(vT),this._converter=e.get(TT,null,{optional:!0}),this._addonInfoFactory=e.get(Rc),this._errorHandler=e.get(_.xsE),this._restErrorHandleOptions.skipUnsuccessfulResponse=e.get(ST,!1,{optional:!0})}getSchemaManagerName(){return null}getSchemaFromService(e,t,n=!1){const a=n?{headers:new F.HttpHeaders({"Content-Type":"application/json"})}:{};return this.httpClient.post(e,t,a).pipe((0,E.T)(r=>{if(r.schema){const u=this.getSchemaManagerName();return r.schema=this.convertToObject(r.schema),r.schema.addons=this._addonInfoFactory.create(r.schema,u),r}return r}),(0,ie.u)())}getSchemasFromService(e,t,n=!1){const a=n?{headers:new F.HttpHeaders({"Content-Type":"application/json"})}:{};return this.httpClient.post(e,t,a).pipe((0,E.T)(r=>{if(r.schemas){const u=this.getSchemaManagerName();return r.schemas.forEach((p,f)=>{r.schemas[f]=this.convertToObject(p),r.schemas[f].addons=this._addonInfoFactory.create(p,u)}),r}return r}),(0,ie.u)())}createObject(e,t){return Object.assign(new e,t)}convertToObject(e){return this._converter.convertToSchema(e)}convertSchemaToDTO(e){return e}_addonSaveHandler(e){const t=e.save();return this._errorHandler.handleRequest(t,this._restErrorHandleOptions).pipe((0,ue.W)(()=>(0,h.of)(!1)),(0,E.T)(n=>({message:`Addon ${e.addonName} was ${n?"successfully":"not"} saved!`,result:n})))}_saveAddons(e){return(0,h.forkJoin)(e.map(t=>this._addonSaveHandler(t))).pipe((0,E.T)(t=>{const n=t.filter(a=>!a.result).map(a=>a.message);return n.length>0?n:null}))}createSchema(e){const t=`${this.serviceEndpoint}${this.createNewSchemaMethodName}`;return this.getSchemaFromService(t,e)}getSchema(e){const t=`${this.serviceEndpoint}${this.getSchemaMethodName}`;return this.getSchemaFromService(t,e)}saveSchema(e,t=!1){t&&(e.useFullHierarchy=!0);const n=`${this.serviceEndpoint}${this.saveSchemaMethodName}`,a=e.addons?[...e.addons]:null,r=(0,Yn.A)(e,["addons"]),u=this.httpClient.post(n,r);return this._errorHandler.handleRequest(u,this._restErrorHandleOptions).pipe((0,mg.H)(f=>{const S=a?.filter(w=>w.isChanged);return f.success&&S?.length>0?this._saveAddons(S).pipe((0,E.T)(w=>({...f,addonsErrors:w}))):(0,h.of)(f)}),(0,ie.u)())}checkUniqueSchemaName(e,t,n){const a=this.serviceEndpoint+"CheckUniqueSchemaName",r={schemaName:e,excludeUId:t,managerName:n};return this.httpClient.post(a,r,{headers:new F.HttpHeaders({"Content-Type":"application/json"})}).pipe((0,ie.u)())}static{this.\u0275fac=function(t){return new(t||Jm)(i.\u0275\u0275inject(i.Injector))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Jm,factory:Jm.\u0275fac,providedIn:"root"})}}const vS=new i.InjectionToken("SchemaImageUploaderApiUrl");class Ym{constructor(e,t){this._httpClient=e,this._endPointUrl=t}appendImageToSchema(e,t,n){const a=new FormData;return a.append("schemaUId",e),a.append("imageUId",t.uId),a.append("isLastImage",n.toString()),a.append("files",t.data,t.data.name),this._httpClient.post(`${this._endPointUrl}/SaveImage`,a)}static{this.\u0275fac=function(t){return new(t||Ym)(i.\u0275\u0275inject(F.HttpClient),i.\u0275\u0275inject(vS))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Ym,factory:Ym.\u0275fac})}}class Km{constructor(e){this.httpClient=e,this._getTemplatesEndpoint="rest/schema.template.api/templates"}getTemplates(){return this.httpClient.get(this._getTemplatesEndpoint)}static{this.\u0275fac=function(t){return new(t||Km)(i.\u0275\u0275inject(F.HttpClient))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Km,factory:Km.\u0275fac,providedIn:"root"})}}class Qm{constructor(e){this._httpClient=e,this._appPackagesServiceUrl="ServiceModel/ApplicationPackagesService.svc/",this._getDesignPackageUId="GetDesignPackageUId"}getDesignPackageUId(e){const t=`${this._appPackagesServiceUrl}${this._getDesignPackageUId}`;return this._httpClient.post(t,{schemaUId:e})}static{this.\u0275fac=function(t){return new(t||Qm)(i.\u0275\u0275inject(F.HttpClient))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Qm,factory:Qm.\u0275fac,providedIn:"root"})}}class IS{copy(e){return{...e}}isEmpty(e){return!1}}class wT extends IS{copy(e){const t=e.metadata,n=[],a=[];return t.rules.forEach(r=>{const u=new zi(r,new _.hd5,null,null,null),{uId:p,name:f}=u,S=u.copy();S.name=f;const w=S.uId,O=(e.resources||[]).find($=>$.key?.includes(p));if(O){const $=O.key.replace(p,w);a.push({...O,key:$})}n.push(S.toMetadata())}),{metadata:{...e.metadata,rules:n},name:e.name,resources:a}}isEmpty(e){return!e.metadata?.rules||0===e.metadata.rules?.length}}class Rd{create(e){return e===_.ub_.BusinessRule?new wT:new IS}static{this.\u0275fac=function(t){return new(t||Rd)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Rd,factory:Rd.\u0275fac})}}class Ey{static{this.\u0275fac=function(t){return new(t||Ey)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:Ey})}static{this.\u0275inj=i.\u0275\u0275defineInjector({providers:[Ac,Rc,Rd],imports:[R.CommonModule]})}}class TS extends Ii{constructor(){super(...arguments),this.namespaces=[],this.serviceMethods=[]}}class DS extends Ii{}class MS extends DS{}class wS extends DS{}class ES extends Ii{}class Pd extends Ii{constructor(){super(...arguments),this.itemProperties=[]}static parseValue(e,t){switch(e.dataValueTypeName){case Te.Boolean:return!!t;case Te.DateTime:case Te.Date:case Te.Time:return new Date(t);default:return t}}}class ET{constructor(){this.source=Ad.None}}const ii=o=>o?.includes(":")?o.split(":")[1]:o,xy=(o,e)=>{if(!e)return"";const t=o&&o.includes(":")?o.split(":")[0]:"";return t?e.lookupNamespaceURI(t):""},fs=o=>o?o.replace(/\./g,"\\.").replace(/:/g,"\\:"):null;class xo{static _getTypeElementByName(e,t){if(!e)return null;let n=e.querySelector(`types > schema > complexType[name=${fs(t)}]`);return n||(n=e.querySelector(`types > schema > simpleType[name=${fs(t)}]`)),this._getTypeDefinitionElement(n)}static _getTypeDefinitionElement(e){if(!e)return null;const t=e.getAttribute("type");if(!t)return e;const n=ii(t);return this._getTypeElementByName(e.ownerDocument,n)}static _getIsRestrictionElement(e){if(!e)return!1;let t=e.querySelector("simpleType:not(element > simpleType)");return"simpleType"===e.localName&&(t=e),!!t&&!!t.querySelector("restriction:not(element > simpleType > restriction)")}static getIsArray(e){return!!e&&"unbounded"===e.getAttribute("maxOccurs")}static getSimpleTypeName(e){if(!e)return"";let t=e.querySelector("simpleType");if("simpleType"===e.localName&&(t=e),t){const n=t.querySelector("restriction");return n?ii(n.getAttribute("base")):"string"}return""}static getDataValeTypeName(e){let t=ii(e.getAttribute("type"));if(t||(t=this.getSimpleTypeName(e)),!vy[t]){const a=this._getTypeDefinitionElement(e);this._getIsRestrictionElement(a)&&(t=this.getSimpleTypeName(a))}return vy[t]}static getSchemaElementByName(e,t){return e?e.querySelector(`definitions > types > schema > element[name=${fs(t)}]`):null}static getElementDefinition(e){if(!e)return null;const t=ii(e.getAttribute("ref")),n=this.getSchemaElementByName(e.ownerDocument,t);return n&&n.setAttribute("maxOccurs",e.getAttribute("maxOccurs")),n??e}static getIsExtensionType(e){if(!e)return!1;const t=this._getTypeDefinitionElement(e),n=!!t.querySelector("complexType > complexContent > extension"),a=!!t.querySelector("complexType > simpleContent > extension");return n||a}static getExtensionInfo(e){if(!e)return null;const n=this._getTypeDefinitionElement(e).querySelector("complexType extension"),a=ii(n.getAttribute("base")),r=this._getTypeElementByName(e.ownerDocument,a),u=this.getSimpleTypeName(r),p=n.querySelectorAll("extension > sequence > element");return{baseTypeName:u||a,baseTypeElementRef:r,nodes:Array.from(p)}}static getComplexTypeChildElements(e){if(!e)return[];const t=this._getTypeDefinitionElement(e),n="complexType"===t.localName?"sequence > element":"complexType > sequence > element",a=t.querySelectorAll(n);return Array.from(a)}}class Sr{constructor(e){this.nested=[],e&&(this.typeName=e.typeName,this.referenceDataTypeName=e.referenceDataTypeName,this.baseTypeName=e.baseTypeName,this.isExtension=!0===e.isExtension,this.nodes=e.nodes||[],this.caption=e.caption,this.path=e.path,this.dataValueType=e.dataValueType,this.isArray=e.isArray,this.sequenceElementName=e.sequenceElementName,this.nested=e.nested||[],this.parent=e.parent,this.namespace=e.namespace)}get isObject(){return this.dataValueType===Te.Object}get isSimpleType(){return!this.isObject}static _generatePrefixForNamespace(e,t){for(let n=0;n<1e3;n++){const a="ns"+n;if(!t.find(r=>r.prefix===a))return a}}static getPrefixForNamespace(e,t){return t.find(a=>a.name===e)||t.push({prefix:this._generatePrefixForNamespace(e,t),name:e}),t.find(a=>a.name===e).prefix}static fromElement(e){const t=xo.getElementDefinition(e),n=t.getAttribute("name"),a=xo.getDataValeTypeName(t),r=t.getAttribute("type"),u=ii(r),p=xy(r,t),f=new Sr({typeName:n,referenceDataTypeName:u,caption:n,path:n,dataValueType:a||Te.Object,isArray:xo.getIsArray(t),namespace:p});if(f.isSimpleType)return f;if(xo.getIsExtensionType(t)){const w=xo.getExtensionInfo(t),O=vy[w.baseTypeName];if(O)return f.dataValueType=O,f;const $=Sr.fromElement(w.baseTypeElementRef);f.isExtension=!0,f.baseTypeName=w.baseTypeName,f.nodes=[...w.nodes,...$.nodes]}else f.nodes=xo.getComplexTypeChildElements(t);return f}_buildPath(e,t){const n=Sr.getPrefixForNamespace(e.namespace,t);let a=e.isArray&&!e.isObject?"":`${n}:${e.path}`,r=e.parent;for(;r&&!r.isArray;)a=`${Sr.getPrefixForNamespace(r.namespace,t)}:${r.path}${a?"/"+a:""}`,r=r.parent;return a}_buildCaption(e){let t=e.isArray&&!e.isObject?"":e.path,n=e.parent;for(;n&&!n.isArray;)t=`${n.path}${t?" "+t:""}`,n=n.parent;return t}toServiceParameter(e){const t=new Pd;return t.caption=this._buildCaption(this),t.path=this._buildPath(this,e),t.dataValueTypeName=this.dataValueType,t.isArray=this.isArray,t.isRequired=!1,t.sequenceElementName=this.sequenceElementName,t.type=Sy.Body,this.nested&&(t.itemProperties=this.nested.map(n=>n.toServiceParameter(e))),t}}class xT{constructor(e,t,n=""){this.doc=e,this.namespaces=t,this.schemaNamePrefix=n,this.maxNameLength=200}getSoapAction(e,t){const n=e.querySelector(`operation[name=${fs(t)}] > operation`);return n?n.getAttribute("soapAction"):null}exitFromLoop(e,t){let n=!1;if(t.has(e)){let a=t.get(e);2===a?n=!0:t.set(e,++a)}else t.set(e,1);return n}flattenWsdlElement(e,t){if(!e.nested.length)return[e];if(e.isArray&&e.isObject){const n=e.parent||e,a=e.nested.flatMap(u=>(u.parent=e,this.flattenWsdlElement(u)));return[new Sr({caption:n.caption,path:t||n.path,dataValueType:n.dataValueType,isArray:!0,sequenceElementName:e.sequenceElementName,namespace:n.namespace,nested:a,parent:n.parent})]}return e.nested.flatMap(n=>(n.parent=e,this.flattenWsdlElement(n)))}getSequenceElementName(e,t){return Sr.getPrefixForNamespace(e,this.namespaces)+":"+t}getComplexType(e,t,n){if(this.exitFromLoop(e.referenceDataTypeName,n))return null;const a=e.namespace||t;return e.nodes.forEach(r=>{const u=this.getWsdlElementFromSequenceElement(r,a,n);u&&e.nested.push(u)}),e.namespace=t,e}getWsdlElementFromSequenceElement(e,t="",n){const a=Sr.fromElement(e);return a.sequenceElementName=this.getSequenceElementName(t,a.typeName),a.isSimpleType?(a.namespace=t,a):this.getComplexType(a,t,new Map(n))}getParameterFromSequenceElement(e,t,n){const a=this.getWsdlElementFromSequenceElement(e,t);return(a?this.flattenWsdlElement(a,n):[]).map(u=>u.toServiceParameter(this.namespaces))}getParametersByTypeName(e,t){const n=xo.getSchemaElementByName(this.doc,e),a=n.getAttribute("type");let r;if(a){const p=fs(ii(a));r=this.doc.querySelectorAll(`definitions > types > schema > complexType[name=${p}] > sequence > element`)}else r=n.querySelectorAll(":scope > complexType > sequence > element");let u=[];return r.forEach(p=>{const f=this.getParameterFromSequenceElement(p,t,e);u=[...u,...f]}),u}getParametersFromMessage(e){const t=this.doc.querySelectorAll(`definitions > message[name=${fs(e)}] > part`),n=[];return t.forEach(a=>{const r=a.getAttribute("element");if(!r){const f=a.getAttribute("type"),S=xy(f,a);return void n.push(...this.getParameterFromSequenceElement(a,S))}const u=ii(r),p=xy(r,a);n.push(...this.getParametersByTypeName(u,p))}),n}truncateName(e){return e.length<=this.maxNameLength?e:e.substr(e.length-this.maxNameLength,this.maxNameLength)}reduceByUpperCaseChars(e){const t=e.match(/[A-Z][a-z]+/g);return t?t.map((n,a,r)=>a!==r.length-1?n.charAt(0):n).join(""):e}_getPrefixedName(e,t=""){const n=this.reduceByUpperCaseChars((t+e).split(" ").join(""));return this.truncateName(this.schemaNamePrefix+n)}_generateParametersNames(e,t="",n=null){n=n||new Set,e.forEach(a=>{const r=this._getPrefixedName(a.caption,t);let u=r,p=1;for(;n.has(u);)u=r+p,u=this.truncateName(u),p++;n.add(u),a.name=u,a.itemProperties&&this._generateParametersNames(a.itemProperties,a.caption,n)})}_generateMethodName(e){return`${this._getPrefixedName(e)}_${(0,c.generateGuid)().split("-").shift()}`}hasCommonCaptionPart(e){const t=e.length&&e[0].caption;return!e.find(n=>{const a=n.caption.split(" ");return a.length<=1||a[0]!==t.split(" ")[0]})}removeCommonCaptionPart(e){e.forEach(t=>{const n=t.caption.split(" ");n.shift(),t.caption=n.join(" ")})}normalizeParametersCaption(e){this.hasCommonCaptionPart(e)&&this.removeCommonCaptionPart(e)}getParametersForInput(e){const t=ii(e.getAttribute("message")),n=this.getParametersFromMessage(t);return this.normalizeParametersCaption(n),this._generateParametersNames(n),n}getRootElementCode(e){const t=ii(e.getAttribute("message")),a=this.doc.querySelector(`definitions > message[name=${fs(t)}] > part`).getAttribute("element");return ii(a)}getRequest(e){const t=new MS;t.contentType=Ec.xml,t.methodType=by.Post;const n=e.querySelector("input");return t.uri=this.getRootElementCode(n)||e.getAttribute("name"),t.parameters=this.getParametersForInput(n),t}getResponse(e){const t=new wS;t.contentType=Ec.xml;const n=e.querySelector("output");return t.parameters=this.getParametersForInput(n),t}getMethod(e,t){const n=new ES;return n.caption=t.getAttribute("name"),n.name=this._generateMethodName(n.caption),n.soapAction=this.getSoapAction(e,n.caption),n.request=this.getRequest(t),n.response=this.getResponse(t),n}}class Ay extends Error{constructor(e,t){super(t),this.fileName=e}}class Ry extends Ay{constructor(){super(null,"Wsdl parsing error"),this.errorCode="WsdlParsingError"}}class AT extends Ay{constructor(e,t){super(null,t.message),this.errorCode="DownloadXmlSchemaError",this.urls=e}}class RT extends Ay{constructor(e){super(e,`File '${e}' not found`),this.errorCode="SchemaDocumentFileNotFoundError"}}class Ao{constructor(e){this.httpClient=e,this.downloadWsdlEndpointUrl="/rest/DownloadWsdlEndpoint/",this.getXmlSchemaContentMethod="GetXmlSchemaFilesContent"}download(e=[]){if(!e||0===e.length)return(0,h.of)(new Map);const t=`${this.downloadWsdlEndpointUrl}${this.getXmlSchemaContentMethod}`;return this.httpClient.post(t,e).pipe((0,P.M)(n=>{if(!n.success)throw new AT(e,n.errorInfo)}),(0,E.T)(n=>{const a=new TextDecoder("utf-8");return n.files.map(r=>{const u=new Uint8Array(r.Value),p=a.decode(u);return[r.Key,p]})}),(0,E.T)(n=>new Map(n)))}static{this.\u0275fac=function(t){return new(t||Ao)(i.\u0275\u0275inject(F.HttpClient))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Ao,factory:Ao.\u0275fac})}}class vr{constructor(e){this.downloadWsdl=e}static getDocumentOwnSchemaNodes(e){return Array.from(e.querySelectorAll("schema"))}static getDocument(e){return(new DOMParser).parseFromString(e,"text/xml")}concatFiles(e){return new Map([...this.files,...e])}findWsdl(e){let t;return e.forEach((n,a)=>{(new DOMParser).parseFromString(n,"text/xml").querySelector("definitions > service")&&(t=[a,n])}),t}getLocation(e,t){const n=e.getAttribute("schemaLocation");n&&t.push(n)}getImportsForSchema(e){const n=(new DOMParser).parseFromString(e,"text/xml"),a=[],r=n.querySelectorAll("definitions > types > schema > import"),u=n.querySelectorAll("definitions > types > schema > include");return r.forEach(p=>this.getLocation(p,a)),u.forEach(p=>this.getLocation(p,a)),a}findMissingImports(){const e=[],t=this.findWsdl(this.files);if(!t)return(0,h.throwError)(()=>new Ry);const n=new Map([t]),a=new Set;for(;n.size;){const[r,u]=n.entries().next().value;this.getImportsForSchema(u).forEach(f=>{a.has(f)||(this.files.has(f)?n[f]=this.files[f]:e.push(f))}),a.add(r),n.delete(r)}return(0,h.of)(e)}downloadMissingImports(e){return e.length?this.downloadWsdl.download(e):(0,h.of)(new Map)}reInitialize(e){this.wsdlFileName=null,this.documents=new Map,this.mergedFiles=new Set,e.forEach((t,n)=>{const a=vr.getDocument(t);this.documents.set(n,a),a.querySelector("definitions > service")&&(this.wsdlFileName=n)})}getDocumentByName(e){var t=this;return(0,A.A)(function*(){if(t.documents.has(e))return t.documents.get(e).cloneNode(!0);throw new RT(e)})()}getInsertedSchemaNodes(e,t){var n=this;return(0,A.A)(function*(){const a=[],r=Array.from(e.querySelectorAll(t));for(const u of r){const p=u.getAttribute("schemaLocation"),f=yield n.getDocumentSchemaNodes(p);a.push(...f),u.parentElement.removeChild(u)}return a})()}getDocumentSchemaNodes(e){var t=this;return(0,A.A)(function*(){if(!e||t.mergedFiles.has(e))return[];t.mergedFiles.add(e);const n=yield t.getDocumentByName(e);return[...yield t.getInsertedSchemaNodes(n,"schema > import"),...yield t.getInsertedSchemaNodes(n,"schema > include"),...vr.getDocumentOwnSchemaNodes(n)]})()}mergeSchemas(e,t){var n=this;return(0,A.A)(function*(){const a=Array.from(e.querySelectorAll(t));for(const r of a){const u=r.getAttribute("schemaLocation"),p=yield n.getDocumentSchemaNodes(u),f=r.parentElement;for(const S of p)f.insertAdjacentElement("beforebegin",S);r.parentElement.removeChild(r)}return e})()}mergeWsdl(){var e=this;return(0,A.A)(function*(){if(null==e.wsdlFileName)throw new Ry;const t=yield e.getDocumentByName(e.wsdlFileName);return yield e.mergeSchemas(t,"definitions > types > schema > import"),yield e.mergeSchemas(t,"definitions > types > schema > include"),t})()}merge(e){return this.files=e,this.findMissingImports().pipe((0,mg.H)(t=>this.downloadMissingImports(t)),(0,E.T)(t=>this.concatFiles(t)))}mergeDocument(e){return this.merge(e).pipe((0,Y.Z)(t=>(this.reInitialize(t),this.mergeWsdl())))}static{this.\u0275fac=function(t){return new(t||vr)(i.\u0275\u0275inject(Ao))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:vr,factory:vr.\u0275fac,providedIn:"root"})}}class ys{constructor(e,t){this.sysSettingsService=e,this.wsdlMerge=t,this.schemaNamePrefixSysSettingCode="SchemaNamePrefix"}static getServiceType(e){switch(e.querySelector("address").namespaceURI){case"http://schemas.xmlsoap.org/wsdl/soap/":return br.soap11;case"http://schemas.xmlsoap.org/wsdl/soap12/":return br.soap12;default:return br.undefined}}static getBaseUri(e){return e.querySelector("address").getAttribute("location")}static getTargetNamespace(e){return{prefix:"tem",name:e.querySelector("definitions").getAttribute("targetNamespace")??"http://tempuri.org"}}getMethods(e,t,n,a){const r=[],u=ii(t.getAttribute("binding")),p=e.querySelector(`definitions > binding[name=${fs(u)}]`),f=ii(p.getAttribute("type"));return e.querySelectorAll(`definitions > portType[name=${fs(f)}] > operation`).forEach(w=>{const O=new xT(e,n,a);r.push(O.getMethod(p,w))}),r}getService(e,t=""){const n=e.querySelector("definitions > service"),a=[];return e.querySelectorAll("definitions > service > port").forEach(u=>{const p=new TS;p.namespaces=[ys.getTargetNamespace(e)],p.type=ys.getServiceType(u),p.caption=n.getAttribute("name"),p.name=t+p.caption,p.portName=u.getAttribute("name"),p.serviceMethods=this.getMethods(e,u,p.namespaces,t),p.baseUri=ys.getBaseUri(u),a.push(p)}),a}getSchemaNamePrefix$(){return this.sysSettingsService.getByCodes([this.schemaNamePrefixSysSettingCode]).pipe((0,E.T)(e=>{if(!e.success)throw new Error(e.errorInfo.message);return e.values[this.schemaNamePrefixSysSettingCode].value}))}build(e){return(0,h.combineLatest)([this.getSchemaNamePrefix$(),this.wsdlMerge.mergeDocument(e)]).pipe((0,E.T)(([t,n])=>{const a=this.getService(n,t);if(!a||0===a.length)throw new Ry;return a}))}static{this.\u0275fac=function(t){return new(t||ys)(i.\u0275\u0275inject(Se),i.\u0275\u0275inject(vr))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:ys,factory:ys.\u0275fac})}}var Py,na;!function(o){o.upload="upload",o.selectService="selectService",o.setupRequest="setupRequest",o.setupResponse="setupResponse"}(Py||(Py={})),function(o){o.Success="Success",o.Skip="Skip",o.Close="Close",o.Error="Error"}(na||(na={}));const PT=["uploadWsdl"];class Xm{constructor(){this.urlChanged=new i.EventEmitter,this.filesSelected=new i.EventEmitter}getFileContent(e){return(0,A.A)(function*(){return new Promise((t,n)=>{const a=new FileReader;a.onloadend=r=>{t(a.result)},a.readAsText(e)})})()}onWsdlSelected(e){var t=this;return(0,A.A)(function*(){if(0===e.length)return;const n=new Map;for(const a of Array.from(e)){const r=yield t.getFileContent(a);n.set(a.name,r)}t.uploadWsdlElementRef.nativeElement.value=null,t.filesSelected.next(n)})()}onWsdlSelect(){this.uploadWsdlElementRef.nativeElement.click()}onUrlChange(e){this.urlChanged.next(e.target.value)}static{this.\u0275fac=function(t){return new(t||Xm)}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:Xm,selectors:[["ts-wsdl-upload"]],viewQuery:function(t,n){if(1&t&&i.\u0275\u0275viewQuery(PT,5),2&t){let a;i.\u0275\u0275queryRefresh(a=i.\u0275\u0275loadQuery())&&(n.uploadWsdlElementRef=a.first)}},outputs:{urlChanged:"urlChanged",filesSelected:"filesSelected"},decls:16,vars:10,consts:[["uploadWsdl",""],[1,"content"],[1,"upload"],["type","file","data-item-marker","upload_wsdl",2,"display","none",3,"change","multiple"],["mat-flat-button","","cdkFocusInitial","",1,"upload-file",3,"click"],["alt","upload","src","data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij48ZGVmcz48c3R5bGU+LmEsLmIsLmN7ZmlsbDpub25lO30uYSwuYntzdHJva2U6IzRlN2JkODtzdHJva2UtbWl0ZXJsaW1pdDoxMDt9LmF7c3Ryb2tlLXdpZHRoOjAuOHB4O308L3N0eWxlPjwvZGVmcz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMTguNSAtNDM4LjA0MykiPjxwYXRoIGNsYXNzPSJhIiBkPSJNLTMxNSw0NDUuNTQybDUsNC41LDUtNC41IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwKSIvPjwvZz48bGluZSBjbGFzcz0iYiIgeTE9IjExIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4LjUgMC41KSIvPjxsaW5lIGNsYXNzPSJiIiB4Mj0iMTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuNSAxNC41KSIvPjxyZWN0IGNsYXNzPSJjIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiLz48L3N2Zz4="],[1,"upload-file-separator"],[1,"wsdl-link-field"],["matInput","","autocomplete","off",3,"input","placeholder"]],template:function(t,n){if(1&t){const a=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",1)(1,"div"),i.\u0275\u0275text(2),i.\u0275\u0275pipe(3,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",2)(5,"input",3,0),i.\u0275\u0275listener("change",function(u){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.onWsdlSelected(u.target.files))}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"button",4),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.onWsdlSelect())}),i.\u0275\u0275element(8,"img",5)(9,"span",6),i.\u0275\u0275text(10),i.\u0275\u0275pipe(11,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(12,"div")(13,"mat-form-field",7)(14,"input",8),i.\u0275\u0275pipe(15,"translate"),i.\u0275\u0275listener("input",function(u){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.onUrlChange(u))}),i.\u0275\u0275elementEnd()()()()()}2&t&&(i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(3,4,"WsdlFileAndUrlPromptCaption")),i.\u0275\u0275advance(3),i.\u0275\u0275property("multiple",!0),i.\u0275\u0275advance(5),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(11,6,"WsdlUploadButtonCaption")," "),i.\u0275\u0275advance(4),i.\u0275\u0275property("placeholder",i.\u0275\u0275pipeBind1(15,8,"WsdlLinkPlaceholderText")))},dependencies:[ve.Ky,Ve.iV,Ue.aL,v.D9],styles:[".content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:13px;font-family:Open Sans,sans-serif}.upload[_ngcontent-%COMP%]{margin-top:8px}.upload[_ngcontent-%COMP%]   .wsdl-link-field[_ngcontent-%COMP%]{width:100%;margin-top:1.5em}.mat-flat-button.upload-file[_ngcontent-%COMP%]{text-transform:none;font-size:13px;color:#006ce0;background-color:#f2f5ff;border-radius:2px}.mat-flat-button.upload-file[_ngcontent-%COMP%]:hover{background-color:#f2f5ff}.mat-flat-button.upload-file[_ngcontent-%COMP%]   span.upload-file-separator[_ngcontent-%COMP%]{width:.6em}"]})}}class NT{}class Nd extends Be.XI{constructor(){super(...arguments),this.getRegisteredEvents=()=>[{name:"selectMethod",dataType:NT}]}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=i.\u0275\u0275getInheritedFactory(Nd)))(n||Nd)}})()}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:Nd,selectors:[["ts-custom-cell"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[[1,"caption",3,"click"]],template:function(t,n){1&t&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275listener("click",function(){return n.fireEvent("selectMethod")}),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&t&&(i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(null==n.record?null:n.record.caption))},styles:[".caption[_ngcontent-%COMP%]{line-height:36px}"]})}}var eh,OT=b(9505),VT=b(52067);!function(o){o.None="None",o.ExpandOnlyRoot="ExpandOnlyRoot"}(eh||(eh={}));const LT=["originalPickerToggle"];function FT(o,e){1&o&&i.\u0275\u0275element(0,"mat-icon",11)}function kT(o,e){1&o&&i.\u0275\u0275element(0,"mat-icon",12)}function jT(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",9),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(t);const a=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(a.onPickerIconClick())}),i.\u0275\u0275template(1,FT,1,0,"mat-icon",10)(2,kT,1,0,"ng-template",null,3,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()}if(2&o){const t=i.\u0275\u0275reference(3),n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf","time"===n.type)("ngIfElse",t)}}class Od extends re.Fj{get convertedValue(){return this._convertedValue}set convertedValue(e){this._convertedValue=e,this.innerValue=e.toDate()}constructor(e,t,n,a,r){super(e,t,n),this._matIconRegistry=a,this._domSanitizer=r,this.controlType="ts-datetime-picker",this.type="datetime",this._registerIcons()}_registerIcons(){["datetime-picker-toggle-date","datetime-picker-toggle-time"].forEach(e=>{this._matIconRegistry.addSvgIconLiteral(e,this._domSanitizer.bypassSecurityTrustHtml(b(48104)("./"+e+"-icon.svg")))}),this._matIconRegistry.addSvgIconLiteral("read-only",this._domSanitizer.bypassSecurityTrustHtml(b(75670)))}writeValue(e){this._convertedValue=yr()(e),super.writeValue(e)}onPickerIconClick(){this.originalPickerToggle.nativeElement.dispatchEvent(new MouseEvent("click"))}static{this.\u0275fac=function(t){return new(t||Od)(i.\u0275\u0275directiveInject(ce.vO,10),i.\u0275\u0275directiveInject(Of.P8),i.\u0275\u0275directiveInject(Vf.FN),i.\u0275\u0275directiveInject(be.tp),i.\u0275\u0275directiveInject(x.DomSanitizer))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:Od,selectors:[["ts-datetime-picker"]],viewQuery:function(t,n){if(1&t&&i.\u0275\u0275viewQuery(LT,5,i.ElementRef),2&t){let a;i.\u0275\u0275queryRefresh(a=i.\u0275\u0275loadQuery())&&(n.originalPickerToggle=a.first)}},inputs:{label:"label",minDate:"minDate",maxDate:"maxDate",type:"type"},features:[i.\u0275\u0275ProvidersFeature([{provide:Nf.qT,useExisting:Od}]),i.\u0275\u0275InheritDefinitionFeature],decls:8,vars:10,consts:[["input",""],["originalPickerToggle",""],["datetimePicker",""],["dateIcon",""],[1,"datetime-picker-input-wrapper"],["matInput","","type","text","autocomplete","false","spellcheck","false",3,"ngModelChange","ngModel","matDatetimepicker","required","min","max","disabled"],[3,"for"],["mat-icon-button","",3,"click",4,"ngIf"],["openOnFocus","true","mode","portrait",3,"type","disabled"],["mat-icon-button","",3,"click"],["svgIcon","datetime-picker-toggle-time",4,"ngIf","ngIfElse"],["svgIcon","datetime-picker-toggle-time"],["svgIcon","datetime-picker-toggle-date"]],template:function(t,n){if(1&t){const a=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",4)(1,"input",5,0),i.\u0275\u0275twoWayListener("ngModelChange",function(u){return i.\u0275\u0275restoreView(a),i.\u0275\u0275twoWayBindingSet(n.convertedValue,u)||(n.convertedValue=u),i.\u0275\u0275resetView(u)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(3,"mat-datetimepicker-toggle",6,1),i.\u0275\u0275template(5,jT,4,2,"button",7),i.\u0275\u0275element(6,"mat-datetimepicker",8,2),i.\u0275\u0275elementEnd()}if(2&t){const a=i.\u0275\u0275reference(7);i.\u0275\u0275advance(),i.\u0275\u0275twoWayProperty("ngModel",n.convertedValue),i.\u0275\u0275property("matDatetimepicker",a)("required",n.required)("min",n.minDate)("max",n.maxDate)("disabled",n.disabled),i.\u0275\u0275advance(2),i.\u0275\u0275property("for",a),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",!n.disabled),i.\u0275\u0275advance(),i.\u0275\u0275property("type",n.type)("disabled",n.disabled)}},dependencies:[R.NgIf,ce.me,ce.BC,ce.YS,ce.vS,Ve.iV,xm.NM,xm.NI,xm.Xm,be.An,Ue.aL],styles:["ts-datetime-picker{width:100%}ts-datetime-picker .datetime-picker-input-wrapper{display:flex;align-items:center;position:relative;min-width:calc(18ch + 26px)}ts-datetime-picker .datetime-picker-input-wrapper mat-datetimepicker-toggle{display:none}ts-datetime-picker .datetime-picker-input-wrapper button[mat-icon-button]{height:26px;width:26px;line-height:26px;position:absolute;right:0}ts-datetime-picker .datetime-picker-input-wrapper button[mat-icon-button] mat-icon{height:16px!important;width:16px!important;line-height:16px;position:relative;bottom:2px}\n"],encapsulation:2})}}const BT=o=>[o];function GT(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"mat-form-field",6)(1,"input",7,0),i.\u0275\u0275listener("input",function(a){i.\u0275\u0275restoreView(t);const r=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(r.onValueChanged(a.target.value))}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"mat-placeholder",8),i.\u0275\u0275text(4),i.\u0275\u0275pipe(5,"async"),i.\u0275\u0275elementEnd()()}if(2&o){const t=i.\u0275\u0275reference(2),n=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("required",t.errors&&(t.dirty||t.touched)),i.\u0275\u0275advance(),i.\u0275\u0275property("type",n.getInputType())("ngModel",n.value)("required",n.required)("disabled",!n.enabled),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(5,7,n.getPlaceholder(n.name)))}}function UT(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"mat-form-field",6)(1,"ts-datetime-picker",9,1),i.\u0275\u0275listener("ngModelChange",function(a){i.\u0275\u0275restoreView(t);const r=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(r.onValueChanged(a))}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"mat-placeholder",8),i.\u0275\u0275text(4),i.\u0275\u0275pipe(5,"async"),i.\u0275\u0275elementEnd()()}if(2&o){const t=i.\u0275\u0275reference(2),n=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("required",t.errors&&(t.dirty||t.touched)),i.\u0275\u0275advance(),i.\u0275\u0275property("type",n.getDateTimeInputType())("ngModel",n.value)("required",n.required)("disabled",!n.enabled),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(5,7,n.getPlaceholder(n.name)))}}function zT(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"mat-checkbox",10),i.\u0275\u0275listener("change",function(a){i.\u0275\u0275restoreView(t);const r=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(r.onValueChanged(a.checked))}),i.\u0275\u0275elementEnd()}if(2&o){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("checked",t.value)("disabled",!t.enabled)}}class th{constructor(e,t){this.translateService=e,this._directionality=t,this.name="",this.valueChanged=new i.EventEmitter}isRtl(){return"rtl"===this._directionality?.value}getPlaceholder(e){return this.translateService.get("ServiceClientParameterPlaceholder").pipe((0,E.T)(t=>t.replace("{0}",e)))}onValueChanged(e){this.valueChanged.next(e)}getDateTimeInputType(){return{[Te.Date]:"date",[Te.DateTime]:"datetime",[Te.Time]:"time"}[this.valueType]}getInputType(){return{[Te.Text]:"text",[Te.Guid]:"text",[Te.Integer]:"number",[Te.Float]:"number"}[this.valueType]}static{this.\u0275fac=function(t){return new(t||th)(i.\u0275\u0275directiveInject(v.c$),i.\u0275\u0275directiveInject(Mt.dS))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:th,selectors:[["ts-editable-value"]],inputs:{name:"name",value:"value",valueType:"valueType",required:"required",enabled:"enabled"},outputs:{valueChanged:"valueChanged"},decls:5,vars:6,consts:[["valueInput","ngModel"],["dateInput","ngModel"],["matForm","",1,"editable-value"],["floatLabel","never","hideRequiredMarker","",3,"required",4,"ngIf"],[3,"ngClass"],["class","boolean-value",3,"checked","disabled","change",4,"ngIf"],["floatLabel","never","hideRequiredMarker",""],["matInput","","autocomplete","off",3,"input","type","ngModel","required","disabled"],[1,"placeholder"],[3,"ngModelChange","type","ngModel","required","disabled"],[1,"boolean-value",3,"change","checked","disabled"]],template:function(t,n){1&t&&(i.\u0275\u0275elementStart(0,"div",2),i.\u0275\u0275template(1,GT,6,9,"mat-form-field",3)(2,UT,6,9,"mat-form-field",3),i.\u0275\u0275elementStart(3,"div",4),i.\u0275\u0275template(4,zT,1,2,"mat-checkbox",5),i.\u0275\u0275elementEnd()()),2&t&&(i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",n.getInputType()),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",n.getDateTimeInputType()),i.\u0275\u0275advance(),i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(4,BT,n.isRtl()?"checkboxContainer-rtl":"checkboxContainer")),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf","Boolean"===n.valueType))},dependencies:[ve.Ky,ve.zi,ce.me,ce.BC,ce.YS,ce.vS,Od,R.NgClass,R.NgIf,Ue.aL,mt.NZ,R.AsyncPipe],styles:["mat-form-field[_ngcontent-%COMP%]{margin-top:15px;width:100%}mat-form-field[_ngcontent-%COMP%]   ts-datetime-picker[_ngcontent-%COMP%]{width:100%;margin-bottom:-1px}mat-form-field[_ngcontent-%COMP%]   ts-datetime-picker[_ngcontent-%COMP%]   button[mat-icon-button][_ngcontent-%COMP%]{position:relative}.editable-value[_ngcontent-%COMP%]{padding-right:5px;text-align:right}.editable-value[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{padding-right:5px}.editable-value[_ngcontent-%COMP%]   .checkboxContainer[_ngcontent-%COMP%], .editable-value[_ngcontent-%COMP%]   .checkboxContainer-rtl[_ngcontent-%COMP%]{width:100%}.editable-value[_ngcontent-%COMP%]   .checkboxContainer[_ngcontent-%COMP%]{text-align:left}.editable-value[_ngcontent-%COMP%]   .checkboxContainer-rtl[_ngcontent-%COMP%]{text-align:right}"]})}}const xS=o=>["checklist-leaf-node",o],Ny=(o,e)=>[o,e],HT=(o,e,t)=>[o,e,t];function $T(o,e){1&o&&i.\u0275\u0275element(0,"button",8)}function qT(o,e){if(1&o&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,$T,1,0,"button",7),i.\u0275\u0275elementContainerEnd()),2&o){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",t.hasLeaves)}}function WT(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"mat-checkbox",9),i.\u0275\u0275listener("change",function(){i.\u0275\u0275restoreView(t);const a=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(a.selectAll())}),i.\u0275\u0275elementStart(1,"label"),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()()}if(2&o){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(5,xS,t.hasLeaves?"":"checkbox-padding-left"))("checked",t.allSelected())("indeterminate",t.partiallySelected())("disabled",t.readonly),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.caption)}}function ZT(o,e){1&o&&i.\u0275\u0275element(0,"button",8)}function JT(o,e){if(1&o&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",10),i.\u0275\u0275template(2,ZT,1,0,"button",7),i.\u0275\u0275elementStart(3,"label",11),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"label",12),i.\u0275\u0275text(6),i.\u0275\u0275pipe(7,"translate"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementContainerEnd()),2&o){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",t.hasLeaves),i.\u0275\u0275advance(),i.\u0275\u0275property("ngClass",t.hasLeaves?"editable-label-header-item":"editable-label-item-margin"),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(t.caption),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(7,4,"TreeHeaderValueColumnCaption"))}}function YT(o,e){1&o&&i.\u0275\u0275element(0,"button",8)}function KT(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"mat-checkbox",15),i.\u0275\u0275listener("change",function(){i.\u0275\u0275restoreView(t);const a=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(r.parameterLeafSelectionToggle(a))}),i.\u0275\u0275elementStart(1,"span",11),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()()}if(2&o){const t=i.\u0275\u0275nextContext().$implicit,n=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(5,xS,n.hasLeaves?"":"checkbox-padding-left"))("checked",n.parameterSelection.isSelected(t))("disabled",n.readonly),i.\u0275\u0275advance(),i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction2(7,Ny,n.isRtl()?"parameter-rtl":"parameter",t.dataValueTypeName)),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(t.caption)}}function QT(o,e){1&o&&(i.\u0275\u0275elementStart(0,"span",21),i.\u0275\u0275text(1,"*"),i.\u0275\u0275elementEnd())}function XT(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"ts-editable-value",22),i.\u0275\u0275listener("valueChanged",function(a){i.\u0275\u0275restoreView(t);const r=i.\u0275\u0275nextContext(2).$implicit,u=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(u.valueChanged(a,r.uId))}),i.\u0275\u0275elementEnd()}if(2&o){const t=i.\u0275\u0275nextContext(2).$implicit,n=i.\u0275\u0275nextContext();i.\u0275\u0275property("value",t.value)("name",t.caption)("valueType",t.dataValueTypeName)("required",t.isRequired)("enabled",!n.readonly),i.\u0275\u0275attribute("data-item-marker",t.value)}}function eD(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",23),i.\u0275\u0275listener("click",function(a){i.\u0275\u0275restoreView(t);const r=i.\u0275\u0275nextContext(2).$implicit,u=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(u.onCreateCollectionItem(a,r))}),i.\u0275\u0275element(1,"mat-icon",24),i.\u0275\u0275elementEnd()}}function tD(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",25),i.\u0275\u0275listener("click",function(a){i.\u0275\u0275restoreView(t);const r=i.\u0275\u0275nextContext(2).$implicit,u=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(u.onRemoveCollectionItem(a,r))}),i.\u0275\u0275element(1,"mat-icon",26),i.\u0275\u0275elementEnd()}}function nD(o,e){if(1&o&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"span",11),i.\u0275\u0275text(2),i.\u0275\u0275template(3,QT,2,0,"span",16),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",12),i.\u0275\u0275template(5,XT,1,6,"ts-editable-value",17),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"div",18),i.\u0275\u0275template(7,eD,2,0,"button",19)(8,tD,2,0,"button",20),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&o){const t=i.\u0275\u0275nextContext().$implicit,n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(),i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction3(9,HT,n.isRtl()?"parameter-rtl":"parameter",t.dataValueTypeName,n.hasLeaves?"editable-label-item":"editable-label-item-margin")),i.\u0275\u0275attribute("data-item-marker",t.caption),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate1(" ",t.caption," "),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",t.isRequired),i.\u0275\u0275advance(),i.\u0275\u0275classProp("has-button",n.isCollectionItem(t)&&!n.readonly),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",!t.isArray),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",t.isArray&&n.canManageCollectionItems),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",n.isCollectionItem(t)&&n.canManageCollectionItems)}}function iD(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"mat-tree-node",13),i.\u0275\u0275template(1,YT,1,0,"button",7)(2,KT,3,10,"mat-checkbox",14)(3,nD,9,13,"ng-container",2),i.\u0275\u0275elementEnd()),2&o){const t=e.$implicit,n=i.\u0275\u0275nextContext();i.\u0275\u0275attribute("data-item-marker","leaf "+t.caption),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",n.hasLeaves),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",n.canSelect),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",n.showValues)}}function aD(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"mat-checkbox",31),i.\u0275\u0275listener("change",function(){i.\u0275\u0275restoreView(t);const a=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(r.parameterSelectionToggle(a))}),i.\u0275\u0275elementStart(1,"span",11),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()()}if(2&o){const t=i.\u0275\u0275nextContext().$implicit,n=i.\u0275\u0275nextContext();i.\u0275\u0275property("checked",n.descendantsAllSelected(t))("indeterminate",n.descendantsPartiallySelected(t))("disabled",n.readonly),i.\u0275\u0275advance(),i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction2(5,Ny,n.isRtl()?"parameter-rtl":"parameter",t.dataValueTypeName)),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(t.caption)}}function sD(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"span",11),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&o){const t=i.\u0275\u0275nextContext().$implicit,n=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction2(2,Ny,n.isRtl()?"parameter-rtl":"parameter",t.dataValueTypeName)),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(t.caption)}}function rD(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",23),i.\u0275\u0275listener("click",function(a){i.\u0275\u0275restoreView(t);const r=i.\u0275\u0275nextContext().$implicit,u=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(u.onCreateCollectionItem(a,r))}),i.\u0275\u0275element(1,"mat-icon",24),i.\u0275\u0275elementEnd()}}function oD(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",25),i.\u0275\u0275listener("click",function(a){i.\u0275\u0275restoreView(t);const r=i.\u0275\u0275nextContext().$implicit,u=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(u.onRemoveCollectionItem(a,r))}),i.\u0275\u0275element(1,"mat-icon",26),i.\u0275\u0275elementEnd()}}function lD(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"mat-tree-node",27)(1,"button",28),i.\u0275\u0275element(2,"mat-icon"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(3,aD,3,8,"mat-checkbox",29)(4,sD,2,5,"span",30),i.\u0275\u0275elementStart(5,"div",18),i.\u0275\u0275template(6,rD,2,0,"button",19)(7,oD,2,0,"button",20),i.\u0275\u0275elementEnd()()),2&o){const t=e.$implicit,n=i.\u0275\u0275nextContext();i.\u0275\u0275attribute("data-item-marker","collection "+t.caption),i.\u0275\u0275advance(),i.\u0275\u0275attribute("aria-label","Toggle "+t.caption),i.\u0275\u0275advance(),i.\u0275\u0275classProp("expanded",n.treeControl.isExpanded(t)),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",n.canSelect),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",n.showValues),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",t.isArray&&n.canManageCollectionItems),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",n.isCollectionItem(t)&&n.canManageCollectionItems)}}class cD{}class Vd{constructor(e){this._directionality=e,this._nestedNodeMap=new Map,this._expanded=[],this._destroyed$=new h.Subject,this.parameters=[],this.selectedParameters=[],this.canSelect=!0,this.showValues=!1,this.canManageCollectionItems=!1,this.initialExpandMode=eh.None,this.expandedChanged=new i.EventEmitter,this.selectedChange=new i.EventEmitter,this.valueChange=new i.EventEmitter,this.createCollectionItem=new i.EventEmitter,this.removeCollectionItem=new i.EventEmitter,this.parameterSelection=new VT.CB(!0),this._getLevel=t=>t.level,this._isExpandable=t=>t.expandable,this._getChildren=t=>t.itemProperties,this._transformer=(t,n)=>{const a=this._nestedNodeMap.get(t.uId),r=a&&a.caption===t.caption?a:new cD;return r.caption=t.caption,r.uId=t.uId,r.dataValueTypeName=t.dataValueTypeName,r.level=n,r.expandable=!!t.itemProperties?.length,r.itemProperties=t.itemProperties,r.value=t.value,r.isRequired=t.isRequired,r.isArray=t.isArray,this._nestedNodeMap.set(t.uId,r),r},this.hasChild=(t,n)=>n.expandable,this._treeFlattener=new nt.yj(this._transformer,this._getLevel,this._isExpandable,this._getChildren),this.treeControl=new pS.XW(this._getLevel,this._isExpandable),this.dataSource=new nt.zw(this.treeControl,this._treeFlattener)}get hasLeaves(){return this.parameters?.some(e=>e?.itemProperties?.length>0)}getParameterLevel(e,t,n=0){const a=t||[];for(const r of a){if(r.uId===e.uId)return n;const u=this.getParameterLevel(e,r.itemProperties,n+1);if(-1!==u)return u}return-1}_checkAllParentsSelection(e){let t=this._getParentNode(e);for(;t;)this._checkRootNodeSelection(t),t=this._getParentNode(t);this.selectedChange.next(this.parameterSelection.selected)}_checkRootNodeSelection(e){const t=this.parameterSelection.isSelected(e),n=this.treeControl.getDescendants(e),a=n.length>0&&n.some(r=>this.parameterSelection.isSelected(r));t&&!a?this.parameterSelection.deselect(e):!t&&a&&this.parameterSelection.select(e)}_getParentNode(e){const t=this._getLevel(e);if(t<1)return null;for(let a=this.treeControl.dataNodes.indexOf(e)-1;a>=0;a--){const r=this.treeControl.dataNodes[a];if(this._getLevel(r)<t)return r}return null}isRtl(){return"rtl"===this._directionality?.value}allSelected(){const e=this.treeControl.dataNodes;return e?.length>0&&e.every(t=>this.parameterSelection.isSelected(t))}partiallySelected(){return this.treeControl.dataNodes?.some(n=>this.parameterSelection.isSelected(n))&&!this.allSelected()}selectAll(){const e=this.partiallySelected();this.treeControl.dataNodes.forEach(t=>{e&&this.parameterSelection.isSelected(t)||(t.expandable?this.parameterLeafSelectionToggle(t):this.parameterSelectionToggle(t))})}descendantsAllSelected(e){const t=this.treeControl.getDescendants(e);return t.length>0&&t.every(n=>this.parameterSelection.isSelected(n))}isCollectionItem(e){const t=this._getParentNode(e);return!!t&&t.isArray}descendantsPartiallySelected(e){return this.treeControl.getDescendants(e).some(a=>this.parameterSelection.isSelected(a))&&!this.descendantsAllSelected(e)}parameterSelectionToggle(e){this.parameterSelection.toggle(e);const t=this.treeControl.getDescendants(e);this.parameterSelection.isSelected(e)?this.parameterSelection.select(...t):this.parameterSelection.deselect(...t),t.forEach(n=>this.parameterSelection.isSelected(n)),this._checkAllParentsSelection(e)}parameterLeafSelectionToggle(e){this.parameterSelection.toggle(e),this._checkAllParentsSelection(e)}ngOnChanges(){if(this.dataSource=new nt.zw(this.treeControl,this._treeFlattener),this.parameters&&(this.dataSource.data=this.parameters,this.selectedParameters)){const e=this.selectedParameters.map(t=>{const n=this.getParameterLevel(t,this.parameters);return this._transformer(t,n)});this.parameterSelection.select(...e)}}ngOnInit(){this.initialExpandMode===eh.ExpandOnlyRoot&&this.treeControl.dataNodes.filter(e=>0===e.level).forEach(e=>{this.treeControl.expand(e)}),this.treeControl.expansionModel.changed.pipe((0,_e.Q)(this._destroyed$)).subscribe(e=>{this._expanded=[...this._expanded,...e.added.filter(t=>t.expandable)],e.removed&&(this._expanded=this._expanded.filter(t=>!e.removed.find(n=>n.uId===t.uId))),this.expandedChanged.next(this._expanded)}),this.initialExpanded&&this.treeControl.dataNodes.filter(e=>this.initialExpanded.find(t=>t.uId===e.uId)).forEach(e=>{this.treeControl.expand(e)})}valueChanged(e,t){this.valueChange.next({recordId:t,value:e})}onCreateCollectionItem(e,t){this.createCollectionItem.next(t.uId),t.expandable=!0,this.dataSource.data=this.parameters,this.treeControl.expand(t),e.stopPropagation()}onRemoveCollectionItem(e,t){this.removeCollectionItem.next(t.uId),this.dataSource.data=this.parameters}trackBy(e,t){return t.uId+t.expandable}static{this.\u0275fac=function(t){return new(t||Vd)(i.\u0275\u0275directiveInject(Mt.dS))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:Vd,selectors:[["ts-parameters-tree"]],inputs:{initialExpanded:"initialExpanded",parameters:"parameters",selectedParameters:"selectedParameters",canSelect:"canSelect",showValues:"showValues",canManageCollectionItems:"canManageCollectionItems",readonly:"readonly",caption:"caption",initialExpandMode:"initialExpandMode"},outputs:{expandedChanged:"expandedChanged",selectedChange:"selectedChange",valueChange:"valueChange",createCollectionItem:"createCollectionItem",removeCollectionItem:"removeCollectionItem"},features:[i.\u0275\u0275NgOnChangesFeature],decls:8,vars:7,consts:[[1,"content"],[1,"header"],[4,"ngIf"],[3,"ngClass","checked","indeterminate","disabled","change",4,"ngIf"],[1,"parameters-tree",3,"dataSource","treeControl","trackBy"],["matTreeNodeToggle","","matTreeNodePadding","","matTreeNodePaddingIndent","24",4,"matTreeNodeDef"],["matTreeNodePadding","","matTreeNodePaddingIndent","24",4,"matTreeNodeDef","matTreeNodeDefWhen"],["mat-icon-button","","disabled","",4,"ngIf"],["mat-icon-button","","disabled",""],[3,"change","ngClass","checked","indeterminate","disabled"],[1,"editable-header-block"],[3,"ngClass"],[1,"editable-value-item"],["matTreeNodeToggle","","matTreeNodePadding","","matTreeNodePaddingIndent","24"],[3,"ngClass","checked","disabled","change",4,"ngIf"],[3,"change","ngClass","checked","disabled"],["class","required",4,"ngIf"],[3,"value","name","valueType","required","enabled","valueChanged",4,"ngIf"],[1,"tree-button"],["mat-icon-button","",3,"click",4,"ngIf"],["class","delete-button","mat-icon-button","",3,"click",4,"ngIf"],[1,"required"],[3,"valueChanged","value","name","valueType","required","enabled"],["mat-icon-button","",3,"click"],[1,"add-button-icon"],["mat-icon-button","",1,"delete-button",3,"click"],[1,"trash-icon"],["matTreeNodePadding","","matTreeNodePaddingIndent","24"],["mat-icon-button","","matTreeNodeToggle","",1,"toggle"],[3,"checked","indeterminate","disabled","change",4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"change","checked","indeterminate","disabled"]],template:function(t,n){1&t&&(i.\u0275\u0275elementStart(0,"div",0)(1,"div",1),i.\u0275\u0275template(2,qT,2,1,"ng-container",2)(3,WT,3,7,"mat-checkbox",3)(4,JT,8,6,"ng-container",2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"mat-tree",4),i.\u0275\u0275template(6,iD,4,4,"mat-tree-node",5)(7,lD,8,8,"mat-tree-node",6),i.\u0275\u0275elementEnd()()),2&t&&(i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",!n.showValues),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",n.canSelect),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",n.showValues),i.\u0275\u0275advance(),i.\u0275\u0275property("dataSource",n.dataSource)("treeControl",n.treeControl)("trackBy",n.trackBy),i.\u0275\u0275advance(2),i.\u0275\u0275property("matTreeNodeDefWhen",n.hasChild))},dependencies:[R.NgClass,R.NgIf,Ve.iV,be.An,nt.yI,nt.yF,nt.pO,nt.lQ,nt.d6,mt.NZ,th,v.D9],styles:[".toggle[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{background:no-repeat top url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij48ZGVmcz48c3R5bGU+LmEsLmJ7ZmlsbDpub25lO30uYntzdHJva2U6IzgwOTViMzt9PC9zdHlsZT48L2RlZnM+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAxNikgcm90YXRlKC05MCkiPjxyZWN0IGNsYXNzPSJhIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiLz48cGF0aCBjbGFzcz0iYiIgZD0iTTYsMCwwLDZjLjAwOC0uMDA4LDYsNiw2LDYiIHRyYW5zZm9ybT0ibWF0cml4KDAuMDM1LCAtMC45OTksIDAuOTk5LCAwLjAzNSwgMS4zOTgsIDExLjI4OCkiLz48L2c+PC9zdmc+)}.toggle[_ngcontent-%COMP%]   .expanded[_ngcontent-%COMP%]{transform:rotate(90deg);background-position-y:4px;background-position-x:0}.content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{top:0;position:sticky;z-index:1000;padding-top:15px;padding-bottom:2px;display:flex}.content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{height:0;width:36px}.content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-left:1px}.content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   label.editable-label-item-margin[_ngcontent-%COMP%]{margin-left:9px;width:calc(50% + 20px)}.content[_ngcontent-%COMP%]   .editable-header-block[_ngcontent-%COMP%]{display:flex;width:100%}.content[_ngcontent-%COMP%]   .editable-label-item[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   .editable-label-header-item[_ngcontent-%COMP%]{flex-basis:100%}.content[_ngcontent-%COMP%]   .editable-label-item-margin[_ngcontent-%COMP%]{width:50%;margin-left:9px}.content[_ngcontent-%COMP%]   .checkbox-padding-left[_ngcontent-%COMP%]{padding-left:9px}.content[_ngcontent-%COMP%]   .editable-value-item[_ngcontent-%COMP%]{flex-basis:400px;flex-shrink:0}.content[_ngcontent-%COMP%]   .has-button[_ngcontent-%COMP%]{flex-basis:364px}.content[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]{visibility:hidden}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]:hover   .delete-button[_ngcontent-%COMP%]{visibility:visible}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]{height:36px;min-height:36px}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:36px;height:36px}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:16px;line-height:16px}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{padding-right:.6em}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter-rtl[_ngcontent-%COMP%]{background-position-y:2px;background-repeat:no-repeat}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter[_ngcontent-%COMP%]{padding-left:22px;background-position:left}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter-rtl[_ngcontent-%COMP%]{padding-right:22px;background-position:right}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .tree-button[_ngcontent-%COMP%]{margin-left:auto;margin-right:1em}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .tree-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:auto}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .trash-icon[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij48ZGVmcz48c3R5bGU+LnRyYXNoX2F7ZmlsbDojNGU3YmQ4O30udHJhc2hfYntmaWxsOm5vbmU7fTwvc3R5bGU+PC9kZWZzPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIgMSkiPjxyZWN0IGNsYXNzPSJ0cmFzaF9hIiB3aWR0aD0iMSIgaGVpZ2h0PSI3IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzIDQpIi8+PHJlY3QgY2xhc3M9InRyYXNoX2EiIHdpZHRoPSIxIiBoZWlnaHQ9IjciIHRyYW5zZm9ybT0idHJhbnNsYXRlKDcgNCkiLz48cmVjdCBjbGFzcz0idHJhc2hfYSIgd2lkdGg9IjEiIGhlaWdodD0iNyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNSA0KSIvPjxwYXRoIGNsYXNzPSJ0cmFzaF9hIiBkPSJNMTAyNi0xNTNoLTN2LTJoLTV2MmgtM3YxaDF2OC45bDEuNDEsMS4xaDYuMTVsMS40NS0xLjFWLTE1MmgxWm0tNy0xaDN2MWgtM1ptNSwxMC40LS43OC42aC01LjQ3bC0uNzUtLjU5Vi0xNTJoN1oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMDE1IDE1NSkiLz48L2c+PHJlY3QgY2xhc3M9InRyYXNoX2IiIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIvPjwvc3ZnPg0K)}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .add-button-icon[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld2JveD0iMCAwIDE2IDE2Ij48ZGVmcy8+PGxpbmUgeTI9IjEzIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4LjUgMikiIHN0eWxlPSJmaWxsOiBub25lOyBzdHJva2U6ICM0ZTdiZDg7Ii8+PGxpbmUgeTI9IjEzIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNSA4LjUpIHJvdGF0ZSg5MCkiIHN0eWxlPSJmaWxsOiBub25lOyBzdHJva2U6ICM0ZTdiZDg7Ii8+PHJlY3Qgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiBzdHlsZT0iZmlsbDogbm9uZTsiLz48L3N2Zz4NCg==)}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter.Text[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter-rtl.Text[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTYgMTYiIHdpZGh0PSIxNiIgaGVpZ2h0PSIxNiI+DQoJPHBhdGggZD0iTTEzLjEsMS40bDAuMSwzaC0wLjRjLTAuMS0wLjUtMC4yLTAuOS0wLjMtMS4xYy0wLjItMC40LTAuNC0wLjYtMC44LTAuOGMtMC4zLTAuMi0wLjctMC4zLTEuMy0wLjNIOC45djkuNmMwLDAuOCwwLjEsMS4zLDAuMywxLjRjMC4yLDAuMywwLjYsMC40LDEuMSwwLjRoMC40VjE0SDUuM3YtMC4zaDAuNGMwLjUsMCwwLjktMC4yLDEuMS0wLjVDNywxMyw3LjEsMTIuNSw3LjEsMTEuOFYyLjJINS42Yy0wLjYsMC0xLDAtMS4zLDAuMUM0LDIuNSwzLjcsMi43LDMuNSwzQzMuMywzLjMsMy4xLDMuOCwzLjEsNC40SDIuN2wwLjEtM0gxMy4xeiIgZmlsbD0iIzZjYjAzOSIvPg0KPC9zdmc+)}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter.Collection[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter-rtl.Collection[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTYgMTYiIHdpZGh0PSIxNiIgaGVpZ2h0PSIxNiI+DQoJPHBhdGggZD0iTTQsMXYySDJ2MkgwdjExaDEydi0yaDJ2LTJoMlYxSDR6IE0xMSwxNUgxVjZoMTBWMTV6IE0xMywxM2gtMVY1SDNWNGgxMFYxM3ogTTE1LDExaC0xVjNINVYyaDEwVjExeiIgZmlsbD0iI2I2OTFjZSIvPg0KPC9zdmc+)}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter.Object[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter-rtl.Object[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTYgMTYiIHdpZGh0PSIxNiIgaGVpZ2h0PSIxNiI+DQoJPHBhdGggZD0iTTQsMXYySDJ2MkgwdjExaDEydi0yaDJ2LTJoMlYxSDR6IE0xMSwxNUgxVjZoMTBWMTV6IE0xMywxM2gtMVY1SDNWNGgxMFYxM3ogTTE1LDExaC0xVjNINVYyaDEwVjExeiIgZmlsbD0iI2I2OTFjZSIvPg0KPC9zdmc+)}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter.Integer[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter-rtl.Integer[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTYgMTYiIHdpZGh0PSIxNiIgaGVpZ2h0PSIxNiI+DQoJPGcgZmlsbD0iI2VlYWY0YiI+DQoJCTxwYXRoIGQ9Ik0xLjgsNS4yTDEuOCw1LjJMMC41LDUuOUwwLjIsNS4xTDIsNC4yaDAuOVYxMmgtMVY1LjJ6Ii8+DQoJCTxwYXRoIGQ9Ik00LjYsMTJ2LTAuNmwwLjgtMC44YzItMS45LDIuOS0yLjksMi45LTQuMWMwLTAuOC0wLjQtMS41LTEuNS0xLjVjLTAuNywwLTEuMywwLjQtMS43LDAuN0w0LjgsNC45QzUuMyw0LjQsNi4xLDQuMSw3LDQuMWMxLjcsMCwyLjQsMS4yLDIuNCwyLjNjMCwxLjQtMSwyLjYtMi43LDQuMmwtMC42LDAuNnYwaDMuNVYxMkg0LjZ6Ii8+DQoJCTxwYXRoIGQ9Ik0xMC43LDEwLjhjMC4zLDAuMiwxLDAuNSwxLjcsMC41YzEuNCwwLDEuOC0wLjksMS44LTEuNWMwLTEuMS0xLTEuNi0yLTEuNmgtMC42VjcuNGgwLjZjMC44LDAsMS43LTAuNCwxLjctMS4zYzAtMC42LTAuNC0xLjItMS40LTEuMmMtMC42LDAtMS4yLDAuMy0xLjYsMC41bC0wLjMtMC44YzAuNC0wLjMsMS4yLTAuNiwyLTAuNmMxLjUsMCwyLjIsMC45LDIuMiwxLjljMCwwLjgtMC41LDEuNS0xLjQsMS44djBjMSwwLjIsMS43LDAuOSwxLjcsMmMwLDEuMi0xLDIuMy0yLjgsMi4zYy0wLjksMC0xLjYtMC4zLTItMC41TDEwLjcsMTAuOHoiLz4NCgk8L2c+DQo8L3N2Zz4=)}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter.Float[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter-rtl.Float[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTYgMTYiIHdpZGh0PSIxNiIgaGVpZ2h0PSIxNiI+DQoJPGcgZmlsbD0iI2VmN2U2MyI+PHBhdGggZD0iTTYuNiw3LjljMCwyLjktMS4xLDQuNS0yLjksNC41QzIsMTIuNCwwLjksMTAuOCwwLjksOGMwLTIuOCwxLjItNC40LDIuOS00LjRDNS42LDMuNiw2LjYsNS4yLDYuNiw3Ljl6IE0yLDhjMCwyLjIsMC43LDMuNCwxLjcsMy40YzEuMiwwLDEuNy0xLjQsMS43LTMuNWMwLTIuMS0wLjUtMy40LTEuNy0zLjRDMi43LDQuNSwyLDUuNywyLDh6Ii8+DQoJCTxwYXRoIGQ9Ik03LjMsMTEuNWMwLTAuNSwwLjMtMC44LDAuOC0wLjhzMC44LDAuMywwLjgsMC44YzAsMC41LTAuMywwLjgtMC44LDAuOEM3LjYsMTIuNCw3LjMsMTIsNy4zLDExLjV6Ii8+DQoJCTxwYXRoIGQ9Ik0xNSw0LjdoLTMuMmwtMC4zLDIuMmMwLjIsMCwwLjQtMC4xLDAuNy0wLjFjMC43LDAsMS4zLDAuMSwxLjgsMC41YzAuNywwLjQsMS4yLDEuMSwxLjIsMi4yYzAsMS43LTEuMywyLjktMy4xLDIuOWMtMC45LDAtMS43LTAuMy0yLjEtMC41bDAuMy0wLjljMC40LDAuMiwxLDAuNSwxLjgsMC41YzEuMSwwLDItMC43LDItMS44YzAtMS4xLTAuNy0xLjktMi40LTEuOWMtMC41LDAtMC45LDAuMS0xLjIsMC4xbDAuNS00LjFoNFY0Ljd6Ii8+DQoJPC9nPg0KPC9zdmc+)}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter.Boolean[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter-rtl.Boolean[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTYgMTYiIHdpZGh0PSIxNiIgaGVpZ2h0PSIxNiI+DQoJPHBhdGggZD0iTTE0LDJ2MTJIMlYySDE0IE0xNSwxSDF2MTRoMTRWMUwxNSwxeiIgZmlsbD0iIzViYzhjNCIvPg0KCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzViYzhjNCIgc3Ryb2tlLXdpZHRoPSIxLjIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTSA1IDcuNSA3LjUgMTAuNSAxMS41IDQuNSIvPg0KPC9zdmc+)}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter.DateTime[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter-rtl.DateTime[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTYgMTYiIHdpZGh0PSIxNiIgaGVpZ2h0PSIxNiI+DQoJPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjOGU4ZWI3IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiPg0KCQk8cGF0aCBkPSJNIDE0IDMuNSAxNS41IDMuNSAxNS41IDE1LjUgMS41IDE1LjUgMS41IDMuNSAzIDMuNSIvPg0KCQk8cGF0aCBkPSJNIDYsMy41IDExLDMuNSIvPg0KCQk8cGF0aCBkPSJNIDEsNy41IDE2LDcuNSIvPg0KCTwvZz4NCgk8ZyBmaWxsPSIjOGU4ZWI3Ij4NCgkJPHBhdGggZD0iTTUsMnYzSDRWMkg1IE02LDFIM3Y1aDNWMUw2LDF6Ii8+DQoJCTxwYXRoIGQ9Ik0xMywydjNoLTFWMkgxMyBNMTQsMWgtM3Y1aDNWMUwxNCwxeiIvPg0KCTwvZz4NCjwvc3ZnPg==)}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter.Date[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter-rtl.Date[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTYgMTYiIHdpZGh0PSIxNiIgaGVpZ2h0PSIxNiI+DQoJPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjOGU4ZWI3IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiPg0KCQk8cGF0aCBkPSJNIDE0IDMuNSAxNS41IDMuNSAxNS41IDE1LjUgMS41IDE1LjUgMS41IDMuNSAzIDMuNSIvPg0KCQk8cGF0aCBkPSJNIDYsMy41IDExLDMuNSIvPg0KCQk8cGF0aCBkPSJNIDEsNy41IDE2LDcuNSIvPg0KCTwvZz4NCgk8ZyBmaWxsPSIjOGU4ZWI3Ij4NCgkJPHBhdGggZD0iTTUsMnYzSDRWMkg1IE02LDFIM3Y1aDNWMUw2LDF6Ii8+DQoJCTxwYXRoIGQ9Ik0xMywydjNoLTFWMkgxMyBNMTQsMWgtM3Y1aDNWMUwxNCwxeiIvPg0KCTwvZz4NCjwvc3ZnPg==)}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter.Time[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter-rtl.Time[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTYgMTYiIHdpZGh0PSIxNiIgaGVpZ2h0PSIxNiI+DQoJPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjOGU4ZWI3IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiPg0KCQk8cGF0aCBkPSJNIDE0IDMuNSAxNS41IDMuNSAxNS41IDE1LjUgMS41IDE1LjUgMS41IDMuNSAzIDMuNSIvPg0KCQk8cGF0aCBkPSJNIDYsMy41IDExLDMuNSIvPg0KCQk8cGF0aCBkPSJNIDEsNy41IDE2LDcuNSIvPg0KCTwvZz4NCgk8ZyBmaWxsPSIjOGU4ZWI3Ij4NCgkJPHBhdGggZD0iTTUsMnYzSDRWMkg1IE02LDFIM3Y1aDNWMUw2LDF6Ii8+DQoJCTxwYXRoIGQ9Ik0xMywydjNoLTFWMkgxMyBNMTQsMWgtM3Y1aDNWMUwxNCwxeiIvPg0KCTwvZz4NCjwvc3ZnPg==)}.content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter.Guid[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   mat-tree-node[_ngcontent-%COMP%]   .parameter-rtl.Guid[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTYgMTYiIHdpZGh0PSIxNiIgaGVpZ2h0PSIxNiI+DQoJPGcgZmlsbD0iIzk3YmFkMiI+PHBhdGggZD0iTTUuMiwyLjJ2MS4zSDMuOXYxMC4xaDEuMnYxLjNIMS4ydi0xLjNoMS4yVjMuNEgxLjJWMi4ySDUuMnoiLz4NCgkJPHBhdGggZD0iTTE0LjcsMTQuOGgtMS40di0xLjVoMGMtMC43LDEuMi0xLjcsMS43LTMuMSwxLjdjLTEuMSwwLTItMC40LTIuNy0xLjJzLTEtMS45LTEtMy4zYzAtMS41LDAuNC0yLjcsMS4xLTMuNnMxLjctMS4zLDMtMS4zYzEuMiwwLDIuMSwwLjUsMi43LDEuNWgwVjEuNWgxLjRWMTQuOHogTTEzLjMsMTAuN1Y5LjRjMC0wLjctMC4yLTEuMy0wLjctMS44cy0xLjEtMC44LTEuOC0wLjhjLTAuOSwwLTEuNiwwLjMtMi4xLDFzLTAuOCwxLjUtMC44LDIuN2MwLDEsMC4yLDEuOSwwLjcsMi41czEuMSwwLjksMS45LDAuOWMwLjgsMCwxLjUtMC4zLDItMC45UzEzLjMsMTEuNiwxMy4zLDEwLjd6Ii8+DQoJPC9nPg0KPC9zdmc+)}"]})}}const uD=["*"];class nh{constructor(e){this.translateService=e,this.listMode="multi",this.methodChecked=new i.EventEmitter,this.parameterChecked=new i.EventEmitter,this.dataSchema={columns:[{name:"caption",caption:this.translateService.instant("WizardMethodCaption"),valueType:c.DataValueType.Text,cellComponentClass:Nd}],rowCssClass:this.getRowCssClass.bind(this)}}get parameters(){return this.selectedMethod?.[this.parametersKey].parameters}get selectedMethod(){return this.methods?.find(e=>e.uId===this._selectedMethod?.uId)||(this._selectedMethod=this.methods&&this.methods[0]),this._selectedMethod}set selectedMethod(e){this._selectedMethod=e}get eventHandlers(){return{caption:{selectMethod:this.onMethodSelected.bind(this)}}}get editParametersEnabled(){return!!this.selected?.find(e=>e.uId===this.selectedMethod?.uId)}get tableConfig(){return{selectMode:this.listMode,sortColumn:"caption"}}getRowCssClass(e){return e.uId===this.selectedMethod?.uId?"selected":""}onMethodSelected(e){"multi"===this.listMode&&(this.selectedMethod=this.methods.find(t=>t.uId===e.uId))}onMethodChecked(e){"multi"===this.listMode?this.methodChecked.next(e):this.selectedMethod=this.methods?.find(t=>t.uId===e?.[0].uId)}onParameterChecked(e){this.parameterChecked.next(e)}static{this.\u0275fac=function(t){return new(t||nh)(i.\u0275\u0275directiveInject(v.c$))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:nh,selectors:[["ts-soap-service-request-builder"]],inputs:{methods:"methods",selected:"selected",selectedParameters:"selectedParameters",listMode:"listMode",parametersKey:"parametersKey",parametersCaption:"parametersCaption"},outputs:{methodChecked:"methodChecked",parameterChecked:"parameterChecked"},ngContentSelectors:uD,decls:7,vars:11,consts:[["tsTable",""],[1,"soap-service-request-builder"],[1,"caption"],[1,"container"],[1,"panel","method-selector",3,"selectedChange","data","dataSchema","headerSticky","minWidthPerColumn","config","selected","eventHandlers"],[1,"panel","parameter-selector",3,"selectedChange","parameters","selectedParameters","caption","readonly"]],template:function(t,n){if(1&t){const a=i.\u0275\u0275getCurrentView();i.\u0275\u0275projectionDef(),i.\u0275\u0275elementStart(0,"div",1)(1,"div",2),i.\u0275\u0275projection(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",3)(4,"ts-table",4,0),i.\u0275\u0275listener("selectedChange",function(u){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.onMethodChecked(u))}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"ts-parameters-tree",5),i.\u0275\u0275listener("selectedChange",function(u){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.onParameterChecked(u))}),i.\u0275\u0275elementEnd()()()}2&t&&(i.\u0275\u0275advance(4),i.\u0275\u0275property("data",n.methods)("dataSchema",n.dataSchema)("headerSticky",!0)("minWidthPerColumn",0)("config",n.tableConfig)("selected",n.selected)("eventHandlers",n.eventHandlers),i.\u0275\u0275advance(2),i.\u0275\u0275property("parameters",n.parameters)("selectedParameters",n.selectedParameters)("caption",n.parametersCaption)("readonly",!(n.editParametersEnabled||"single"===n.listMode)))},dependencies:[OT.O,Vd],styles:[".soap-service-request-builder[_ngcontent-%COMP%]{flex-basis:100%;overflow:hidden;width:860px;display:flex;flex-direction:column;align-items:stretch;justify-content:flex-start}.soap-service-request-builder[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]{flex-shrink:0}.soap-service-request-builder[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{flex-basis:100%;margin-top:10px;display:flex;flex-direction:row;align-items:stretch}.soap-service-request-builder[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]{flex-basis:50%;overflow-y:auto}.soap-service-request-builder[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel.parameter-selector[_ngcontent-%COMP%]{margin-left:10px}"]})}}function dD(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"div")(1,"mat-option",5)(2,"div",6)(3,"div",7),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd()()()()),2&o){const t=e.$implicit,n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(),i.\u0275\u0275property("value",t.uId),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate2(" ",t.portName," (",n.getSoapVersion(t.type),") ")}}class ih{constructor(){this.serviceSelected=new i.EventEmitter}onServiceSelect(e){this.serviceSelected.next(e)}getSoapVersion(e){let t="";return e===br.soap11&&(t="SOAP 1.1"),e===br.soap12&&(t="SOAP 1.2"),t}static{this.\u0275fac=function(t){return new(t||ih)}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:ih,selectors:[["ts-soap-select-service"]],inputs:{services:"services",selectedServiceUId:"selectedServiceUId"},outputs:{serviceSelected:"serviceSelected"},decls:7,vars:5,consts:[[1,"soap-select-service"],[1,"caption"],["floatLabel","always",1,"service-select-field"],["mat-basic","","disableOptionCentering","","required","","data-item-marker","select_service",3,"valueChange","selectionChange","value"],[4,"ngFor","ngForOf"],[3,"value"],[1,"service-select-option"],[1,"col-service-name"]],template:function(t,n){1&t&&(i.\u0275\u0275elementStart(0,"div",0)(1,"div",1),i.\u0275\u0275text(2),i.\u0275\u0275pipe(3,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"mat-form-field",2)(5,"mat-select",3),i.\u0275\u0275twoWayListener("valueChange",function(r){return i.\u0275\u0275twoWayBindingSet(n.selectedServiceUId,r)||(n.selectedServiceUId=r),r}),i.\u0275\u0275listener("selectionChange",function(r){return n.onServiceSelect(r)}),i.\u0275\u0275template(6,dD,5,3,"div",4),i.\u0275\u0275elementEnd()()()),2&t&&(i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(3,3,"SelectSoapService")),i.\u0275\u0275advance(3),i.\u0275\u0275twoWayProperty("value",n.selectedServiceUId),i.\u0275\u0275advance(),i.\u0275\u0275property("ngForOf",n.services))},dependencies:[ve.Ky,R.NgForOf,Ei.cu,Qu.d1,v.D9],styles:[".soap-select-service[_ngcontent-%COMP%]{margin-bottom:10px}.soap-select-service[_ngcontent-%COMP%]   .service-select-field[_ngcontent-%COMP%]{width:250px}.service-select-option[_ngcontent-%COMP%]{display:flex;line-height:19px;margin-top:5px;margin-bottom:5px}.service-select-option[_ngcontent-%COMP%]   .col-service-name[_ngcontent-%COMP%]{flex:1}"]})}}const pD=["wizardStepper"];function mD(o,e){1&o&&i.\u0275\u0275element(0,"ts-mask",21)}function hD(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"ts-soap-select-service",22),i.\u0275\u0275listener("serviceSelected",function(a){i.\u0275\u0275restoreView(t);const r=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(r.onServiceSelected(a))}),i.\u0275\u0275elementEnd()}if(2&o){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("services",t.services)("selectedServiceUId",null==t.selectedService?null:t.selectedService.uId)}}var Ir;!function(o){o.Success="Success",o.Error="Error",o.Skip="SkipQuickSetup",o.Close="Close"}(Ir||(Ir={}));class ah{get wizardCaption(){if(this.selectedService){const e=this.translateService.instant("SoapWizardServiceSelectedCaption"),t=this.selectedService.caption;return e.replace("##service-caption##",t.charAt(0).toUpperCase()+t.slice(1))}return this.translateService.instant("SoapWizardCaption")}constructor(e,t,n,a,r,u,p,f){this._dialogRef=e,this.featureService=t,this.translateService=n,this.changeDetector=a,this.builder=r,this.snackBar=u,this.downloadWsdl=p,this.googleTagManager=f,this.services=[],this.selectedRequestParameters=[],this.selectedResponseParameters=[],this.step=Py.upload}_getGtmActionFromResultCode(e){return{[na.Close]:Ir.Close,[na.Skip]:Ir.Skip,[na.Error]:Ir.Error,[na.Success]:Ir.Success}[e]}_closeDialog(e,t=[]){const n=this._getGtmActionFromResultCode(e);this._sendGTMData(n);const a={services:t,resultCode:e};this._dialogRef.close(a)}_sortServices(e){return e.sort((t,n)=>t.type===n.type?t.portName.localeCompare(n.portName):n.type-t.type)}_flattenParameter(e){const t=[e];return e.itemProperties&&e.itemProperties.forEach(n=>{const a=this._flattenParameter(n);t.push(...a)}),t}_flattenParameters(e,t){const n=[];return e?.serviceMethods.forEach(a=>{a[t]?.parameters?.forEach(r=>{n.push(...this._flattenParameter(r))})}),n}_getWsdlParseErrorText(e){if(!e)return this.translateService.instant("WsdlParsingError");switch(e.errorCode){case"SchemaDocumentFileNotFoundError":return this.translateService.instant(e.errorCode).replace(/{\d}/,e.fileName);case"DownloadXmlSchemaError":return e.message;default:return this.translateService.instant("WsdlParsingError")}}_showErrorMessage(e){this._sendGTMData(Ir.Error);const t=this._getWsdlParseErrorText(e);this.snackBar.open(t,"",{duration:5e3})}_getGTMModuleName(){return 0===this.wizardStepper.selectedIndex?"QuickSetupStartPage":"QuickSetupMethodSelection"}_sendGTMData(e){const t={action:e,moduleName:this._getGTMModuleName(),schemaName:"WebServiceSetup"};this.googleTagManager.track(t)}onKeyUp(){this._closeDialog(na.Close)}onSkipQuickSetupClick(){this._closeDialog(na.Skip)}onCloseQuickSetupClick(){this._closeDialog(na.Close)}onWsdlFilesSelected(e){this.builder.build(e).subscribe({next:t=>this.onServiceParsed(t),error:t=>this._showErrorMessage(t)})}onWsdlUrlChanged(e){this._wsdlUrl=e}onStepChange(e){0===e.selectedIndex&&(this.selectedService=null,this.services=null,this.changeDetector.detectChanges())}getSelectedParameters(e,t){return[...e.filter(n=>{const a=t.find(r=>r.uId===n.uId);return a&&n?.itemProperties?.length>0&&(n.itemProperties=[...this.getSelectedParameters(n.itemProperties,t)]),!!a})]}onSaveService(){const e={...this.selectedService};e.serviceMethods=[...e.serviceMethods.filter(t=>this.selectedMethods.includes(t))],e.serviceMethods.forEach(t=>{t.request.parameters=this.getSelectedParameters(t.request?.parameters,this.selectedRequestParameters),t.response.parameters=this.getSelectedParameters(t.response?.parameters,this.selectedResponseParameters)}),this._closeDialog(na.Success,[e])}onParseWsdlByLink(){this.isLoading=!0,this.downloadWsdl.download([this._wsdlUrl]).subscribe({next:e=>{this.isLoading=!1,this.onWsdlFilesSelected(e)},error:e=>{this.isLoading=!1,this._showErrorMessage(e)}})}onServiceParsed(e){this.featureService.getFeatureState("NotUseWsdlWizardSteps").subscribe(t=>{if(t)this._closeDialog(na.Success,e);else{const n=e.filter(a=>a.type!==br.undefined);this.services=this._sortServices(n),this.selectedService=this.services[0],this.selectedMethods=[...this.selectedService.serviceMethods],this.selectedRequestParameters=this._flattenParameters(this.selectedService,"request"),this.selectedResponseParameters=this._flattenParameters(this.selectedService,"response"),this._sendGTMData(Ir.Success),this.wizardStepper.next()}})}onServiceSelected(e){this.selectedService=this.services.find(t=>t.uId===e.value),this.selectedMethods=[...this.selectedService.serviceMethods],this.changeDetector.detectChanges(),this.selectedMethods=[...this.selectedService.serviceMethods],this.selectedRequestParameters=this._flattenParameters(this.selectedService,"request"),this.selectedResponseParameters=this._flattenParameters(this.selectedService,"response")}onMethodChecked(e){this.selectedMethods=[...e]}onParameterChecked(e){this.selectedRequestParameters=[...e]}onResponseParameterChecked(e){this.selectedResponseParameters=[...e]}ngOnInit(){this.googleTagManager.initialize()}static{this.\u0275fac=function(t){return new(t||ah)(i.\u0275\u0275directiveInject(he.RN),i.\u0275\u0275directiveInject(Gt),i.\u0275\u0275directiveInject(v.c$),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(ys),i.\u0275\u0275directiveInject(M.nf),i.\u0275\u0275directiveInject(Ao),i.\u0275\u0275directiveInject(L))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:ah,selectors:[["ts-web-service-wizard"]],viewQuery:function(t,n){if(1&t&&i.\u0275\u0275viewQuery(pD,5),2&t){let a;i.\u0275\u0275queryRefresh(a=i.\u0275\u0275loadQuery())&&(n.wizardStepper=a.first)}},hostBindings:function(t,n){1&t&&i.\u0275\u0275listener("keyup.esc",function(){return n.onKeyUp()},!1,i.\u0275\u0275resolveWindow)},decls:48,vars:44,consts:[["wizardStepper",""],["wsdlUpload",""],["class","component-mask",4,"ngIf"],[1,"web-service-wizard"],["mat-dialog-title",""],["mat-icon-button","",1,"close-dialog",3,"click"],["alt","close","src","data:image/svg+xml;base64,PHN2ZyBpZD0iR3JvdXBfNyIgZGF0YS1uYW1lPSJHcm91cCA3IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2IiBmaXQ9IiIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgZm9jdXNhYmxlPSJmYWxzZSI+DQogIDxyZWN0IGlkPSJSZWN0YW5nbGVfNyIgZGF0YS1uYW1lPSJSZWN0YW5nbGUgNyIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiBmaWxsPSJub25lIj48L3JlY3Q+DQogIDxsaW5lIGlkPSJMaW5lXzUiIGRhdGEtbmFtZT0iTGluZSA1IiB5MT0iMTAiIHgyPSIxMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMyAzKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjOTk5IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iMSI+PC9saW5lPg0KICA8bGluZSBpZD0iTGluZV82IiBkYXRhLW5hbWU9IkxpbmUgNiIgeDI9IjEwIiB5Mj0iMTAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMgMykiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzk5OSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjEiPjwvbGluZT4NCjwvc3ZnPg=="],[3,"selectionChange"],[1,"soap-service-wizard-step-content","step-0"],[1,"upload-wsdl",3,"filesSelected","urlChanged"],["mat-dialog-actions","",1,"actions"],["mat-button","",1,"continue-without-setup",3,"click"],["mat-flat-button","","color","accent",1,"next","step-one-next-button",3,"click","disabled"],[1,"soap-service-wizard-step-content","step-1"],["class","select-service",3,"services","selectedServiceUId","serviceSelected",4,"ngIf"],[1,"request-builder",3,"methodChecked","parameterChecked","methods","selected","selectedParameters","parametersKey","parametersCaption"],["mat-button","","matStepperPrevious",""],["mat-flat-button","","color","accent","matStepperNext",""],[1,"soap-service-wizard-step-content","step-2"],[1,"response-builder",3,"parameterChecked","methods","selectedParameters","listMode","parametersKey","parametersCaption"],["mat-flat-button","","color","accent",3,"click"],[1,"component-mask"],[1,"select-service",3,"serviceSelected","services","selectedServiceUId"]],template:function(t,n){if(1&t){const a=i.\u0275\u0275getCurrentView();i.\u0275\u0275template(0,mD,1,0,"ts-mask",2),i.\u0275\u0275elementStart(1,"div",3)(2,"div",4)(3,"span"),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"button",5),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.onCloseQuickSetupClick())}),i.\u0275\u0275element(6,"img",6),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(7,"mat-horizontal-stepper",7,0),i.\u0275\u0275listener("selectionChange",function(u){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.onStepChange(u))}),i.\u0275\u0275elementStart(9,"mat-step")(10,"div",8)(11,"ts-wsdl-upload",9,1),i.\u0275\u0275listener("filesSelected",function(u){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.onWsdlFilesSelected(u))})("urlChanged",function(u){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.onWsdlUrlChanged(u))}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(13,"div",10)(14,"button",11),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.onSkipQuickSetupClick())}),i.\u0275\u0275text(15),i.\u0275\u0275pipe(16,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(17,"button",12),i.\u0275\u0275pipe(18,"async"),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.onParseWsdlByLink())}),i.\u0275\u0275text(19),i.\u0275\u0275pipe(20,"translate"),i.\u0275\u0275elementEnd()()()(),i.\u0275\u0275elementStart(21,"mat-step")(22,"div",13),i.\u0275\u0275template(23,hD,1,2,"ts-soap-select-service",14),i.\u0275\u0275elementStart(24,"ts-soap-service-request-builder",15),i.\u0275\u0275pipe(25,"translate"),i.\u0275\u0275listener("methodChecked",function(u){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.onMethodChecked(u))})("parameterChecked",function(u){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.onParameterChecked(u))}),i.\u0275\u0275text(26),i.\u0275\u0275pipe(27,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(28,"div",10)(29,"button",16),i.\u0275\u0275text(30),i.\u0275\u0275pipe(31,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(32,"button",17),i.\u0275\u0275text(33),i.\u0275\u0275pipe(34,"translate"),i.\u0275\u0275elementEnd()()()(),i.\u0275\u0275elementStart(35,"mat-step")(36,"div",18)(37,"ts-soap-service-request-builder",19),i.\u0275\u0275pipe(38,"translate"),i.\u0275\u0275listener("parameterChecked",function(u){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.onResponseParameterChecked(u))}),i.\u0275\u0275text(39),i.\u0275\u0275pipe(40,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(41,"div",10)(42,"button",16),i.\u0275\u0275text(43),i.\u0275\u0275pipe(44,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(45,"button",20),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(a),i.\u0275\u0275resetView(n.onSaveService())}),i.\u0275\u0275text(46),i.\u0275\u0275pipe(47,"translate"),i.\u0275\u0275elementEnd()()()()()()}if(2&t){const a=i.\u0275\u0275reference(12);i.\u0275\u0275property("ngIf",n.isLoading),i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate(n.wizardCaption),i.\u0275\u0275advance(11),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(16,22,"SkipWizardButtonCaption")),i.\u0275\u0275advance(2),i.\u0275\u0275property("disabled",!i.\u0275\u0275pipeBind1(18,24,a.urlChanged)),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(20,26,"WizardNext")),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",(null==n.services?null:n.services.length)>1),i.\u0275\u0275advance(),i.\u0275\u0275property("methods",null==n.selectedService?null:n.selectedService.serviceMethods)("selected",n.selectedMethods)("selectedParameters",n.selectedRequestParameters)("parametersKey","request")("parametersCaption",i.\u0275\u0275pipeBind1(25,28,"WizardRequestParametersCaption")),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(27,30,"WizardActionCaption")," "),i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(31,32,"WizardBack")),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(34,34,"WizardNext")),i.\u0275\u0275advance(4),i.\u0275\u0275property("methods",n.selectedMethods)("selectedParameters",n.selectedResponseParameters)("listMode","single")("parametersKey","response")("parametersCaption",i.\u0275\u0275pipeBind1(38,36,"WizardResponseParametersCaption")),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(40,38,"WizardResponseActionCaption")," "),i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(44,40,"WizardBack")),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(47,42,"WizardSave"))}},dependencies:[R.NgIf,Ve.iV,he.KI,he.$t,Es.V5,Es.M6,Es.F7,Es.FR,fy.I,Xm,nh,ih,R.AsyncPipe,v.D9],styles:[".web-service-wizard[_ngcontent-%COMP%]{margin-top:-8px;min-width:500px;max-height:80vh;display:flex;flex-direction:column}.web-service-wizard[_ngcontent-%COMP%]   [mat-dialog-actions][_ngcontent-%COMP%]{flex-shrink:0;display:flex;flex-direction:row;justify-content:flex-end;margin-bottom:0;margin-top:16px}.web-service-wizard[_ngcontent-%COMP%]   .mat-dialog-title[_ngcontent-%COMP%]{flex-shrink:0;margin-bottom:10px}.web-service-wizard[_ngcontent-%COMP%]   .soap-service-wizard-step-content[_ngcontent-%COMP%]{overflow:hidden;flex-basis:100%;display:flex;flex-direction:column;align-items:stretch;justify-content:flex-start}.web-service-wizard[_ngcontent-%COMP%]   .soap-service-wizard-step-content[_ngcontent-%COMP%]   .upload-wsdl[_ngcontent-%COMP%]{flex-basis:100%}.web-service-wizard[_ngcontent-%COMP%]   .soap-service-wizard-step-content[_ngcontent-%COMP%]   .select-service[_ngcontent-%COMP%]{flex-shrink:0}.web-service-wizard[_ngcontent-%COMP%]   .soap-service-wizard-step-content[_ngcontent-%COMP%]   .request-builder[_ngcontent-%COMP%], .web-service-wizard[_ngcontent-%COMP%]   .soap-service-wizard-step-content[_ngcontent-%COMP%]   .response-builder[_ngcontent-%COMP%]{flex-basis:100%;overflow:hidden;display:flex;flex-direction:column}"]})}}class Ro{constructor(e){this._dialogService=e,this._destroyed$=new h.Subject}showWizard(){return this._dialogService.open(ah,{disableClose:!0,panelClass:"dialog-top-border"})}ngOnDestroy(){this._destroyed$.next()}static{this.\u0275fac=function(t){return new(t||Ro)(i.\u0275\u0275inject(re.o3))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Ro,factory:Ro.\u0275fac})}}class Ld{get caption(){return this.schema.caption}get dataValueTypeName(){return this.schema.dataValueTypeName}get uId(){return this.instanceUId}get isRequired(){return this.schema.isRequired}get isArray(){return this.schema.isArray}constructor(e,t=""){this.schema=e,this.value=Pd.parseValue(e,t),this.instanceUId=(0,c.generateGuid)()}}class Fd{constructor(e){this.httpClient=e,this.callServiceSchemaEndpointUrl="/rest/CallServiceSchemaService/",this.callServiceSchemaMethodName="Execute"}sendRequest(e,t,n){const a=`${this.callServiceSchemaEndpointUrl}${this.callServiceSchemaMethodName}`;return this.httpClient.post(a,{serviceName:e,methodName:t,parameters:n||[]}).pipe((0,E.T)(r=>r.ExecuteResult))}static{this.\u0275fac=function(t){return new(t||Fd)(i.\u0275\u0275inject(F.HttpClient))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Fd,factory:Fd.\u0275fac,providedIn:"root"})}}const CD=[[["",8,"left-caption"]],[["",8,"right-caption"]]],bD=[".left-caption",".right-caption"];class sh{static{this.\u0275fac=function(t){return new(t||sh)}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:sh,selectors:[["ts-double-side-panel"]],inputs:{request:"request",response:"response",language:"language"},ngContentSelectors:bD,decls:11,vars:8,consts:[[1,"double-side-panel"],["data-item-marker","request-panel",1,"panel","panel-left"],[1,"header"],[1,"body"],[3,"language","text","readOnly","hideTooltip"],["data-item-marker","response-panel",1,"panel"]],template:function(t,n){1&t&&(i.\u0275\u0275projectionDef(CD),i.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2),i.\u0275\u0275projection(3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",3),i.\u0275\u0275element(5,"ts-code-editor",4),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(6,"div",5)(7,"div",2),i.\u0275\u0275projection(8,1),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"div",3),i.\u0275\u0275element(10,"ts-code-editor",4),i.\u0275\u0275elementEnd()()()),2&t&&(i.\u0275\u0275advance(5),i.\u0275\u0275property("language",n.language)("text",n.request)("readOnly",!0)("hideTooltip",!0),i.\u0275\u0275advance(5),i.\u0275\u0275property("language",n.language)("text",n.response)("readOnly",!0)("hideTooltip",!0))},dependencies:[xd],styles:[".double-side-panel[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:stretch;width:100%;height:100%}.double-side-panel[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]{flex-basis:100%;overflow:hidden;display:flex;flex-direction:column;justify-content:flex-start;align-items:stretch}.double-side-panel[_ngcontent-%COMP%]   .panel.panel-left[_ngcontent-%COMP%]{margin-right:20px}.double-side-panel[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{height:32px;flex-shrink:0}.double-side-panel[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{flex-basis:100%;border-width:1px;border-style:solid;margin-top:16px;overflow:hidden;display:flex;flex-direction:row;align-items:stretch;justify-content:stretch}.double-side-panel[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   ts-code-editor[_ngcontent-%COMP%]{font-size:1.6em;overflow:hidden}"],changeDetection:0})}}class rh{get errorMessage(){return`Error code: ${this.errorInfo?.errorCode}\n\nError message: ${this.errorInfo?.message}\n\nStack trace:\n`+this.errorInfo?.stackTrace}static{this.\u0275fac=function(t){return new(t||rh)}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:rh,selectors:[["ts-service-execution-error"]],inputs:{errorInfo:"errorInfo"},decls:1,vars:3,consts:[[3,"text","readOnly","hideTooltip"]],template:function(t,n){1&t&&i.\u0275\u0275element(0,"ts-code-editor",0),2&t&&i.\u0275\u0275property("text",n.errorMessage)("readOnly",!0)("hideTooltip",!0)},dependencies:[xd],styles:["ts-code-editor[_ngcontent-%COMP%]{font-size:1.6em}"]})}}const SD=o=>({"mat-dialog-title-rtl-text":o}),AS=o=>[o];function vD(o,e){1&o&&i.\u0275\u0275element(0,"ts-mask",13)}function ID(o,e){1&o&&(i.\u0275\u0275elementStart(0,"span",14),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"translate"),i.\u0275\u0275elementEnd()),2&o&&(i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(2,1,"ServiceClientRequestTabCaption")))}function TD(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"ts-parameters-tree",22),i.\u0275\u0275pipe(1,"translate"),i.\u0275\u0275listener("valueChange",function(a){i.\u0275\u0275restoreView(t);const r=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(r.onParameterValueChange(a))})("expandedChanged",function(a){i.\u0275\u0275restoreView(t);const r=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(r.onRequestParametersExpandChange(a))})("createCollectionItem",function(a){i.\u0275\u0275restoreView(t);const r=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(r.onCreateCollectionItem(a))})("removeCollectionItem",function(a){i.\u0275\u0275restoreView(t);const r=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(r.onRemoveCollectionItem(a))}),i.\u0275\u0275elementEnd()}if(2&o){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("parameters",t.requestParameters)("initialExpanded",t.requestExpanded)("caption",i.\u0275\u0275pipeBind1(1,8,"ServiceClientRequestParameters"))("readonly",!1)("canSelect",!1)("showValues",!0)("canManageCollectionItems",!0)("initialExpandMode","ExpandOnlyRoot")}}function DD(o,e){1&o&&(i.\u0275\u0275elementStart(0,"div",23)(1,"div",24),i.\u0275\u0275element(2,"div",25),i.\u0275\u0275elementStart(3,"div",26)(4,"span"),i.\u0275\u0275text(5),i.\u0275\u0275pipe(6,"translate"),i.\u0275\u0275elementEnd()()()()),2&o&&(i.\u0275\u0275advance(5),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(6,1,"RequestParametersEmptyMessage")))}function MD(o,e){if(1&o){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",15)(1,"div",16)(2,"span",17),i.\u0275\u0275text(3),i.\u0275\u0275pipe(4,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"button",18),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(t);const a=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(a.onOpenAuthenticationPageButtonClick())}),i.\u0275\u0275element(6,"div",3),i.\u0275\u0275elementStart(7,"span",19),i.\u0275\u0275text(8),i.\u0275\u0275pipe(9,"translate"),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275template(10,TD,2,10,"ts-parameters-tree",20)(11,DD,7,3,"div",21),i.\u0275\u0275elementEnd()}if(2&o){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate2("",i.\u0275\u0275pipeBind1(4,6,"ServiceClientRequestPrompt")," ",null==t.serviceMethod?null:t.serviceMethod.caption,""),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(10,AS,t.isRtl()?"open-authentication-settings-icon-rtl":"open-authentication-settings-icon")),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(9,8,"OpenAuthenticationSettingsButtonCaption")),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",!t.requestParametersEmpty),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",t.requestParametersEmpty)}}function wD(o,e){1&o&&(i.\u0275\u0275elementStart(0,"span",27),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"translate"),i.\u0275\u0275elementEnd()),2&o&&(i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(2,1,"ServiceClientResponseTabCaption")))}function ED(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"div",15)(1,"span",17),i.\u0275\u0275text(2),i.\u0275\u0275pipe(3,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(4,"ts-parameters-tree",28),i.\u0275\u0275pipe(5,"translate"),i.\u0275\u0275elementEnd()),2&o){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate2("",null==t.serviceMethod?null:t.serviceMethod.caption," ",i.\u0275\u0275pipeBind1(3,7,"ServiceClientResponseTabCaption")," "),i.\u0275\u0275advance(2),i.\u0275\u0275property("parameters",t.responseParameters)("caption",i.\u0275\u0275pipeBind1(5,9,"ServiceClientRequestParameters"))("readonly",!0)("canSelect",!1)("showValues",!0)}}function xD(o,e){1&o&&(i.\u0275\u0275elementStart(0,"mat-tab"),i.\u0275\u0275template(1,wD,3,3,"ng-template",8)(2,ED,6,11,"ng-template",9),i.\u0275\u0275elementEnd())}function AD(o,e){1&o&&(i.\u0275\u0275elementStart(0,"span",29),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"translate"),i.\u0275\u0275elementEnd()),2&o&&(i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(2,1,"ServiceClientErrorTabCaption")))}function RD(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"div",15)(1,"span",17),i.\u0275\u0275text(2),i.\u0275\u0275pipe(3,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",30),i.\u0275\u0275element(5,"ts-service-execution-error",31),i.\u0275\u0275elementEnd()()),2&o){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(3,2,"ServiceClientErrorTabInfo")),i.\u0275\u0275advance(3),i.\u0275\u0275property("errorInfo",null==t.serviceLastResponse?null:t.serviceLastResponse.errorInfo)}}function PD(o,e){1&o&&(i.\u0275\u0275elementStart(0,"mat-tab"),i.\u0275\u0275template(1,AD,3,3,"ng-template",8)(2,RD,6,4,"ng-template",9),i.\u0275\u0275elementEnd())}function ND(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"span",32),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&o){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(t.bodyTabCaption)}}function OD(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"div",33)(1,"ts-double-side-panel",34)(2,"span",35),i.\u0275\u0275text(3),i.\u0275\u0275pipe(4,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"span",36),i.\u0275\u0275text(6),i.\u0275\u0275pipe(7,"translate"),i.\u0275\u0275elementEnd()()()),2&o){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(),i.\u0275\u0275property("language",t.bodyCodeEditorLanguage)("request",t.requestBody)("response",t.responseBody),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(4,5,"ServiceClientRawRequesCaption")),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(7,7,"ServiceClientRawResponseCaption"))}}function VD(o,e){1&o&&(i.\u0275\u0275elementStart(0,"mat-tab"),i.\u0275\u0275template(1,ND,2,1,"ng-template",8)(2,OD,8,9,"ng-template",9),i.\u0275\u0275elementEnd())}function LD(o,e){1&o&&(i.\u0275\u0275elementStart(0,"span",37),i.\u0275\u0275text(1,"Raw http"),i.\u0275\u0275elementEnd())}function FD(o,e){if(1&o&&(i.\u0275\u0275elementStart(0,"div",15)(1,"ts-double-side-panel",34)(2,"span",35),i.\u0275\u0275text(3),i.\u0275\u0275pipe(4,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"span",36),i.\u0275\u0275text(6),i.\u0275\u0275pipe(7,"translate"),i.\u0275\u0275elementEnd()()()),2&o){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(),i.\u0275\u0275property("language",t.rawDataCodeEditorLanguage)("request",t.requestRawData)("response",t.responseRawData),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(4,5,"ServiceClientRawRequesCaption")),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(7,7,"ServiceClientRawResponseCaption"))}}function kD(o,e){1&o&&(i.\u0275\u0275elementStart(0,"mat-tab"),i.\u0275\u0275template(1,LD,2,0,"ng-template",8)(2,FD,8,9,"ng-template",9),i.\u0275\u0275elementEnd())}class oh{get serviceMethod(){return this.serviceSchema.serviceMethods[0]}get requestParametersEmpty(){return 0===this.requestParameters?.length}get hasResponse(){return null!=this.serviceLastResponse}get hasResponseError(){return this.hasResponse&&null!=this.serviceLastResponse.errorInfo}get hasRawData(){return!Re.A(this.requestRawData)||!Re.A(this.responseRawData)}get hasBodyData(){return!Re.A(this.requestBody)||!Re.A(this.responseBody)}get requestBody(){return this.hasResponse?this.serviceLastResponse.RequestBody:""}get responseBody(){return this.hasResponse?this.serviceLastResponse.ResponseBody:""}get requestRawData(){return this.hasResponse?this.serviceLastResponse.RequestRawData:""}get responseRawData(){return this.hasResponse?this.serviceLastResponse.ResponseRawData:""}get bodyCodeEditorLanguage(){return this.serviceMethod.request.contentType===Ec.json?qm.F.Json:qm.F.Xml}get bodyTabCaption(){return this.serviceMethod.request.contentType===Ec.json?"json":"xml"}constructor(e,t,n,a,r){this.httpClient=e,this.serviceClientData=t,this.callService=n,this.customEventService=a,this._directionality=r,this.isLoading=!1,this.rawDataCodeEditorLanguage=qm.F.Http,this.serviceSchema=t.schema,this._requestParametersDefaultValuesMap=t.parametersValues||new Map,this.requestParameters=this._createParametersInstances(this.serviceMethod.request.parameters,this._requestParametersDefaultValuesMap),this._createDefaultEmptyCollectionItems(this.requestParameters)}_createParametersInstances(e,t=null){return e&&e.map(n=>{const a=n.name,r=t?.get(a)||"";return new Ld(n,r)})}_createDefaultEmptyCollectionItems(e){e?.forEach(t=>{t.isArray&&this.onCreateCollectionItem(t.uId)})}_getSimpleArrayValues(e){return e.itemProperties?.map(t=>t.value)}_prepareNestedForRequest(e){return e&&e.map(t=>t.itemProperties.map(n=>this._getParameterValue(n)))}_getParameterRealValue(e){return e.dataValueTypeName===Te.Object?null:e.isArray?this._getSimpleArrayValues(e):e.value}_getParameterValue(e){const t=this._getParameterRealValue(e);return{code:e.schema.name,value:t,nested:e.dataValueTypeName===Te.Object?this._prepareNestedForRequest(e.itemProperties):null}}_getParametersValues(e){return e&&0!==e.length?e.map(t=>this._getParameterValue(t)):null}_createParameter(e,t){const n=new Pd;return n.name=e.schema.sequenceElementName,n.caption=t,n.dataValueTypeName=e.schema.dataValueTypeName,n}_createNestedParameters(e){if(e.schema.dataValueTypeName===Te.Object)e.itemProperties=e.value?.map((t,n)=>{const a=this._createParameter(e,`Item ${n}`),r=new Ld(a);return r.itemProperties=this._createResponseParameters(e.schema.itemProperties,t),r});else{const t=e.schema.dataValueTypeName;e.schema.dataValueTypeName=Te.Object,e.itemProperties=e.value?.map((n,a)=>{const r=this._createParameter(e,`Item ${a}`);return r.dataValueTypeName=t,new Ld(r,n)})}}_findParameterValue(e,t){return t[e.schema.name]}_createResponseParameters(e,t){const n=this._createParametersInstances(e);return n.forEach(a=>{a.value=this._findParameterValue(a,t),a.schema.isArray&&this._createNestedParameters(a)}),n}_parseResponse(e){const t=JSON.parse(e);return this._createResponseParameters(this.serviceMethod.response.parameters,t)}_treeSearch(e,t){let n=null;return!e||(n=e.find(a=>a.uId===t),n)||e.forEach(a=>{n||(n=this._treeSearch(a.itemProperties,t))}),n}_findParameterParent(e,t){const n=this._treeSearch(e,t);return n?this._treeSearch(e,n.parentUId):null}_getMaxCollectionIndex(e){return e&&0!==e.length?Math.max(...e.map(t=>t.caption.split(" ")[1])):-1}_generateInstance(e){e.itemProperties=e.itemProperties||[];const t=new Pd;t.name=e.schema.sequenceElementName,t.caption=`Item ${this._getMaxCollectionIndex(e.itemProperties)+1}`,t.dataValueTypeName=e.schema.dataValueTypeName,t.itemProperties=[...e.schema.itemProperties];const n=new Ld(t);return n.parentUId=e.uId,n}_addSimpleItem(e){const t=this._generateInstance(e);e.itemProperties=[...e.itemProperties,t]}_addComplexItem(e){const t=this._generateInstance(e);t.itemProperties=e.schema.itemProperties.map(n=>{const a=this._requestParametersDefaultValuesMap.get(n.name)||"";return new Ld(n,a)}),e.itemProperties=[...e.itemProperties,t],t.itemProperties.forEach(n=>{n.isArray&&this.onCreateCollectionItem(n.uId)})}isRtl(){return"rtl"===this._directionality?.value}onRequestParametersExpandChange(e){this.requestExpanded=e}onParameterValueChange(e){this._treeSearch(this.requestParameters,e.recordId).value=e.value,this.requestParameters=[...this.requestParameters]}onCreateCollectionItem(e){const t=this._treeSearch(this.requestParameters,e);t.dataValueTypeName!==Te.Object?this._addSimpleItem(t):this._addComplexItem(t)}onRemoveCollectionItem(e){const t=this._findParameterParent(this.requestParameters,e);t&&(t.itemProperties=t.itemProperties.filter(n=>n.uId!==e))}onSendRequestButtonClick(){this.isLoading=!0;const e=this._getParametersValues(this.requestParameters);this.callService.sendRequest(this.serviceSchema.name,this.serviceMethod?.name,e).subscribe(t=>{this.isLoading=!1,this.serviceLastResponse=t,t.success&&200===t.StatusCode?(this.responseParameters=this._parseResponse(t.ParameterValues),this.tabIndex=1):t.errorInfo?this.tabIndex=2:this.tabIndex=4})}onOpenAuthenticationPageButtonClick(){this.customEventService.createOutboundChannel("OpenAuthenticationPage").next()}static{this.\u0275fac=function(t){return new(t||oh)(i.\u0275\u0275directiveInject(F.HttpClient),i.\u0275\u0275directiveInject(he.xh),i.\u0275\u0275directiveInject(Fd),i.\u0275\u0275directiveInject(W.Dj),i.\u0275\u0275directiveInject(Mt.dS))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:oh,selectors:[["ts-service-client-form"]],decls:21,vars:19,consts:[["class","component-mask",4,"ngIf"],[1,"service-client-form"],["mat-dialog-title",""],[3,"ngClass"],["mat-icon-button","","mat-dialog-close","",3,"ngClass"],["alt","close","src","data:image/svg+xml;base64,PHN2ZyBpZD0iR3JvdXBfNyIgZGF0YS1uYW1lPSJHcm91cCA3IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2IiBmaXQ9IiIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgZm9jdXNhYmxlPSJmYWxzZSI+DQogIDxyZWN0IGlkPSJSZWN0YW5nbGVfNyIgZGF0YS1uYW1lPSJSZWN0YW5nbGUgNyIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiBmaWxsPSJub25lIj48L3JlY3Q+DQogIDxsaW5lIGlkPSJMaW5lXzUiIGRhdGEtbmFtZT0iTGluZSA1IiB5MT0iMTAiIHgyPSIxMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMyAzKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjOTk5IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iMSI+PC9saW5lPg0KICA8bGluZSBpZD0iTGluZV82IiBkYXRhLW5hbWU9IkxpbmUgNiIgeDI9IjEwIiB5Mj0iMTAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMgMykiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzk5OSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjEiPjwvbGluZT4NCjwvc3ZnPg=="],[1,"dialog-content"],["mat-align-tabs","start",1,"tab-group",3,"selectedIndexChange","selectedIndex"],["mat-tab-label",""],["matTabContent",""],[4,"ngIf"],["mat-dialog-actions",""],["data-item-marker","send-request","color","accent","mat-flat-button","",1,"send-request-action",3,"click"],[1,"component-mask"],["data-item-marker","request-parameters-tab",1,"request-parameters-tab"],[1,"tab-content"],[1,"tree-header"],[1,"service-method-caption"],["data-item-marker","OpenAuthenticationSettingsButton",1,"open-authentication-settings-button",3,"click"],[1,"open-authentication-settings-label"],["class","panel parameter-selector","data-item-marker","request-parameters-tree",3,"parameters","initialExpanded","caption","readonly","canSelect","showValues","canManageCollectionItems","initialExpandMode","valueChange","expandedChanged","createCollectionItem","removeCollectionItem",4,"ngIf"],["class","blank-slate-wrapper",4,"ngIf"],["data-item-marker","request-parameters-tree",1,"panel","parameter-selector",3,"valueChange","expandedChanged","createCollectionItem","removeCollectionItem","parameters","initialExpanded","caption","readonly","canSelect","showValues","canManageCollectionItems","initialExpandMode"],[1,"blank-slate-wrapper"],[1,"blank-slate-inner-ct"],[1,"blank-slate-image"],[1,"blank-slate-title"],["data-item-marker","response-parameters-tab",1,"response-parameters-tab"],["data-item-marker","response-parameters-tree",1,"panel","parameter-selector",3,"parameters","caption","readonly","canSelect","showValues"],["data-item-marker","response-error-tab",1,"response-parameters-tab"],[1,"errorWrapper"],[1,"show-error",3,"errorInfo"],["data-item-marker","raw-body-tab",1,"response-parameters-tab"],[1,"tab-content","body-content"],[3,"language","request","response"],[1,"left-caption","service-method-caption"],[1,"right-caption","service-method-caption"],["data-item-marker","raw-http-tab",1,"response-parameters-tab"]],template:function(t,n){1&t&&(i.\u0275\u0275template(0,vD,1,0,"ts-mask",0),i.\u0275\u0275elementStart(1,"div",1)(2,"div",2)(3,"span",3),i.\u0275\u0275text(4),i.\u0275\u0275pipe(5,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"button",4),i.\u0275\u0275element(7,"img",5),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(8,"mat-dialog-content",6)(9,"mat-tab-group",7),i.\u0275\u0275twoWayListener("selectedIndexChange",function(r){return i.\u0275\u0275twoWayBindingSet(n.tabIndex,r)||(n.tabIndex=r),r}),i.\u0275\u0275elementStart(10,"mat-tab"),i.\u0275\u0275template(11,ID,3,3,"ng-template",8)(12,MD,12,12,"ng-template",9),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(13,xD,3,0,"mat-tab",10)(14,PD,3,0,"mat-tab",10)(15,VD,3,0,"mat-tab",10)(16,kD,3,0,"mat-tab",10),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(17,"div",11)(18,"button",12),i.\u0275\u0275listener("click",function(){return n.onSendRequestButtonClick()}),i.\u0275\u0275text(19),i.\u0275\u0275pipe(20,"translate"),i.\u0275\u0275elementEnd()()()),2&t&&(i.\u0275\u0275property("ngIf",n.isLoading),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(15,SD,n.isRtl())),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate2("",i.\u0275\u0275pipeBind1(5,11,"ServiceClientHeaderCaption")," ",n.serviceSchema.caption,""),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(17,AS,n.isRtl()?"close-rtl-dialog":"close-dialog")),i.\u0275\u0275advance(3),i.\u0275\u0275twoWayProperty("selectedIndex",n.tabIndex),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",!!n.responseParameters),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",n.hasResponseError),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",n.hasBodyData),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",n.hasRawData),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(20,13,"SendRequestButtonCaption")))},dependencies:[R.NgClass,R.NgIf,Ve.iV,he.kQ,he.KI,he.PQ,he.$t,fy.I,Ht.cR,Ht.P1,Ht.pW,Ht.c_,sh,rh,Vd,v.D9],styles:[".service-client-form[_ngcontent-%COMP%]{margin-top:-8px;width:920px;display:flex;flex-direction:column;height:60vh}.service-client-form[_ngcontent-%COMP%]   ts-double-side-panel[_ngcontent-%COMP%]{height:100%}.service-client-form[_ngcontent-%COMP%]   .errorWrapper[_ngcontent-%COMP%]{margin-top:1.3em;flex-basis:100%;overflow-y:auto}.service-client-form[_ngcontent-%COMP%]   .mat-dialog-content[_ngcontent-%COMP%]{flex-basis:100%;display:flex;flex-direction:column;max-height:none}.service-client-form[_ngcontent-%COMP%]   .mat-dialog-content[_ngcontent-%COMP%]   .tab-group[_ngcontent-%COMP%]{flex-basis:100%;height:100%}.service-client-form[_ngcontent-%COMP%]   [mat-dialog-actions][_ngcontent-%COMP%]{flex-shrink:0;display:flex;flex-direction:row;justify-content:flex-end;margin-bottom:0;margin-top:28px}.service-client-form[_ngcontent-%COMP%]   .mat-dialog-title[_ngcontent-%COMP%]{flex-shrink:0;margin-bottom:10px}.service-client-form[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;align-items:stretch}.service-client-form[_ngcontent-%COMP%]   .service-method-caption[_ngcontent-%COMP%]{flex-grow:0;display:inline-block;margin-top:16px;height:17px;text-align:left;opacity:1}.service-client-form[_ngcontent-%COMP%]   .parameter-selector[_ngcontent-%COMP%], .service-client-form[_ngcontent-%COMP%]   .show-error[_ngcontent-%COMP%]{flex-basis:100%;overflow-y:auto}.service-client-form[_ngcontent-%COMP%]   .tree-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.service-client-form[_ngcontent-%COMP%]   .open-authentication-settings-button[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px;height:25px;border:0;border-radius:4px;display:flex;align-items:center}.service-client-form[_ngcontent-%COMP%]   .open-authentication-settings-icon[_ngcontent-%COMP%], .service-client-form[_ngcontent-%COMP%]   .open-authentication-settings-icon-rtl[_ngcontent-%COMP%]{width:16px;height:16px;background-position:center;background-repeat:no-repeat;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDI0IDI0IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0cHgiIGZpbGw9IiNGRkZGRkYiPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMjQiIHdpZHRoPSIyNCIvPjxwYXRoIGQ9Ik05LDV2Mmg2LjU5TDQsMTguNTlMNS40MSwyMEwxNyw4LjQxVjE1aDJWNUg5eiIvPjwvc3ZnPg==);border-radius:3px;background-size:15px}.service-client-form[_ngcontent-%COMP%]   .open-authentication-settings-icon[_ngcontent-%COMP%]{margin-right:10px}.service-client-form[_ngcontent-%COMP%]   .open-authentication-settings-icon-rtl[_ngcontent-%COMP%]{margin-left:10px}.service-client-form[_ngcontent-%COMP%]   .open-authentication-settings-label[_ngcontent-%COMP%]{letter-spacing:0px;margin-bottom:3px}.service-client-form[_ngcontent-%COMP%]   .blank-slate-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-basis:100%;overflow-y:scroll}.service-client-form[_ngcontent-%COMP%]   .blank-slate-wrapper[_ngcontent-%COMP%]   .blank-slate-inner-ct[_ngcontent-%COMP%]{color:#999;flex-basis:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.service-client-form[_ngcontent-%COMP%]   .blank-slate-wrapper[_ngcontent-%COMP%]   .blank-slate-inner-ct[_ngcontent-%COMP%]   .blank-slate-image[_ngcontent-%COMP%]{margin-bottom:40px;width:120px;height:125px;background-position:center;background-repeat:no-repeat;background-size:contain;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIcAAACLCAYAAABLJYpxAAAABGdBTUEAALGPC/xhBQAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAABATSURBVHhe7Z0LlJVVFcd5idFCs7QULEq0zDTThYAp2gPTUPFtUChpptHK1FKKspdY0tsMUrOXkS50Gfl+rLQ00VILzDCyVDQzUsuEfPTW/j9m7+bOvXtm7szce+f7zj17rd+C+b7vnO+cs/c933nuMyR1Oea6B0aIHcSh4hSxSFwhfip+K/4inhbPVfEfsVb8QawQ14vFYr54l3ijeJG9JkvRRcoaKrYTx4rviF+Kf4lqxTeSP4prxSfFW8RoS06WwRYp4yVitlgiqAUiBf5N3CG+L84U1CCEmS6miAni1ca29u9rxWSxt5gp5ghqDYzuBvGgeFZUv+u/4mfiE2KSGGZJzdIKUYFjEO8Ty0S1gp4Rt4qvCAxgohjbJLYR+4kPCwzv96IyLbBGLBR7iGwozRAVLG2HA8WVgl9npQJWirPEQWKciBTZKnYR1ExXC2qsynSuFh8XYy1bWQYiKshNxamCX2BlQd8pThPNrBkGyivEOwW1SqWhYNyXiimWzSx9ERUcNQA9i8qexF/F18UbRKSMIrO1OEnQ9vH8wG2CGm+oZT1Ld6JCGiNoL/xTeAH+Rpwo+CVGBV823iwuFv8WnkdqwmlWDFkqRQUzSnxK0KD0AvuFeLvYUkSFXHZ2EtSOlXm+WexkxZJFhTFDPGSFA/yKZomoQFMEI/mG8NqSHhh/b2ZF1H6izNOuuEq4UTwi3i9SrSl6Y1dxjfDy+LOYZcXVPqJMv0c8aYXAt5exAMYNokJrNw4T9wk3ErrFY6zo0hVlcjNxuWUaGOKeKqJCamdofNMw90Yrtch0K8b0RJljlPBPllky/VnxMhEVTqYD5mt+J/zH9FWxgRVpGqIM0RX1XwHzEvuKqDAytYwX5ws3EKYHyv+ZUSZGCqa6PWPMYDK5FRVCpmdop/mgIDXwBCvm8okSv4m40TLDkDGfkXbtiTSKN4n7BWXK+MgBVtzlESX6pWKVZeLvggUyUWYzfYc1KywL8B/dHCv24osSyzyCd8UeE7l90XheLpYKyhhOseIvriiRjFU8bAnmu7ibiDKXGTh8oll85AYyz9RQPFHi+JS4YdAjYW1DlKlMY2F+xg1krqmjOKJEMZvqnxIMg6V3UUYyzaHSQIrTBlFiRgtWaJMwPiWvF1EGMs3lWwId0Eg9yNQzeKJEDBeM/ZOodWJPESU803xog1wi0AXd3ImmpsERJYDxfxLDFoBDRJToTOugF8OeHHTCLPeWpqrWil7MmgsSAUy1R4nNtB62Vnj7j2WII01lrRG9kH0dPpR7nogSmRk8WGf7lEA/Z5vami96GUv6fPSTKmywtwNkYt4t0BEcbOprruhFZ9sLWQ2+s4gSlikG3xTo6nHR3PaHXvBWexkcLaIEZYrDVoLV++jrh6I5WyAUMeMZvuXvAhElJlM82ArhG8qPMnU2VhQxWw55AQNdeU1GufiiQHd8XjY3lTZGFCHL533T8lEiSkCmuDD+cY9Af4tNrY0RRchmGyJm6Xz08kzxYdslOoTJptqBiSI63CJk002eNyk3lwl0yeDYwBqnigDXBz7axt6S6IWZ8sAyClbmoc+BTc4pAtoXRMSkGsOy0Qsz5cKn9+8W/XMoo4AbCNZmENEZInpRpnzgQM+nPmaauvsmCniERcBI6CtF9KJMOfHZ9DtN3X0TBWSrIhHQR45ekCkvTJz+Q6DfvUzl9YkCsH+VgERANRS9ICXwHPghwXZDPA6yQ+91Ino2Fb4n0PG1pvb6RAHwY0VAIogiTgV8ivlKtmpwVHuhYJ9IFLbs4GaTfDK4Od5U37PoQVw5+lj8PiKKOAWYRHTfpRjCLeIcgeOU5cKN5AGBT9EojrJDnsnj6ab+nkUPzrUAvxJRhCnAp/JR4fmM1r4eIHBvzTOsX2EIuvqZsoM/V/KHt8bhZgLdix7yX808EUWYAr5SG//nr7JrEQwa4RuDZ/FKHD1TZvADgo938jfVTCAWPcBAFw9Sze4oogjLDjWA+wV9m13rCa9JmbiK7pcdXIOTv3PNDGLRA3jY5UF2x0cRpQB7d8kjn5V6dv2zPMG9Jm9v11LCF4rT/hphplArunm7PYiL5iiiFMCrMHn8ecW13mBDOGFwgRDdLzN4V3pCkL89zRS6im7gr8vXbKS8NpSzV8gj7pSi+9WwB9gHjFLd5umztWeYOXQV3fDhctYcRhGkAqOD/iOoR9luTPy6UvVhdoIgjyvMHLqKbtC/5wFWl0cRpATHcZBXtg9G9x2MwR2lpLxuls4HeeRH80IziU7RRV9Gxjc5iiAlOIjHG5nMHUUNU3o13pJnDUSRT2hoBO5Oal8ziQ7RBdob3IDXiChwanxaeJ5xqc2pBrh2nCY+KnyRE0Z0nIjiSImLBPldYGbRIbpAgXCj3kZaKtAriw4AdBgAO1JEYVPjZEGef2Rm0SG6wFFU3OCQmChgyvC9xdMh3XgO9GOBE20SRkTbaR2Lb1h7zMyiQ3SBxhY3FogoYCZ92B3HyDh20OkEV3/cZRfbpQrNxNwrsIPOBUD6w+camOOPAmXaA/bTYgfHuWFwyB4X6OOmOC3dHZwCxZR8PXACdRRHaviu/I6RUv2HaWkusAc2CpAqeFUm3/VAFzeKIzU4WZv8LnHj8FlK+vpRgFRx46C9hfIjfEEQ/4/iSA2c75Pfju6s/kMjdP0FEQVIFTcOvBNF94FPSjsZB+tbyO9KNw4f/GBRcRQgVbJx1IIvD/K7xo2DIzu5wMRbFCBVsnHUwhYN8rvWjeMzdqHdvAJm46iF5Qzk91k3Dt8a9yURBUiVbBy1+Bri57JxZOOoJhuHkY2jlhrj+Jxd+JqIAqRKNo5aWMvTxThybyW+D+1mHN5bWefGwe5yLrAkLgqQKtk4amEOifw+6sZxjF1gRi4KkCrZOGo5WJDfVW4cbBjmwh0iCpAq2ThqOVaQ32VuHLiP5AKuq6MAqZKNo5aPCPJ7iRsHF7nAWfPs7qoOkCrZOGrxEzG+7MYxVOCAlovtdKpjNo5arhLk9/j1xoHoD/xUcBFvxVGgFMnGUctKQX73N9NYbxw/sIu4YIgCpUg2jq6w9dO/IFuZaaw3Dh8IS91BXCXZOLrCuXDk9UnR6Rddf/hO8nZaKpiNoyvvFevLw8yiQ3SBKoUb9FjGiyhwamTj6Ir7SVtoZtEpuugFwbkcUeDUyMbRFbwqktcZZhKdoosX2032jUaBUyMbRyfsCfatkLWnSOriHLuJs5IogtTIxtGJH52y2syhq+gGPil5gHbHNiKKJCWycXSyWJDPRWYOtaKbPhjGBEwUSUpk4+jE89k5+FUtuslSQR5aKqJIUiIbRwfulwPXVs83U6gV3dzVHmTXPZ+ZKLJUcOPgsKHrusHPQ0vZODgMgDwuNTOIRQ8wCfeQPcxB+VFkqeDGUQ+pGgeO8vBmRB4PNTPoXvQQ57nx8A0iijAV8A6Ik7h6SNWJnu+NZch8lJlA96KH6KkQgH4vJ1FHkWbS4EqBrs8z9fcuevgmC5TPd0sXtj4ybIGeJ5jqexc9PMMC4Wqxnbz9tBP88NHxclN7faIAnETNmlIC4xc7ijxTXphcfVyg3yNM7fWLAuHAlcA4rm2ntaXtAKdwoVvGcTYwldcvCjRa+AF5zPVHL8mUD8avvPt6kqm776LAbmHUHuNE9LJMuXCncDgI7L372p0ocGXtwbbJ6GWZ8sBhh37q1Amm5v4LkVhkRJrPtC83iwS65Kzckabi/osioefis7Xt5qYhJdjZ6IdJH27qHbgosv0sUgZN8DgXvTxTbH4s0OFNptbGiSL1vS2cqpi7tuXCmwb8uHcwlTZO7CXuQJ99LtUJyBQThslZloDe5ps6Gy+KnOOseAk7o9rFWXyZYUr+eoHOOPVzQ1Nl40WRs97DN9uyr5IDXKJEZYqBu1Tgc7KLqbF5opdsIfzw/3baPlk2WKDkhyXPM/U1X/SyvYUfvZkn5ooHi5N8RR8HHgwz1bVG9ELffM06S47liBKZaT1sbfX1OBjIi01lrRO9dJjw9gfnkqR+KG9Z+K5AJ3QaJpq6Wi96+UbC91jSGt5WRAnOtIbTBbqAWaamwRMlgpVizPCRIAbIthZRwjPN5UThhnGqqWfwRYlhoGWdJYxh2ry0sLWwz9k7COeYWoojStRu4hlL4JkiykSm8bB11SfULhTDTSXFESWK2Vs/MG+WiDKSaSwMI3iNcZkonmEgSpi7RsZA6E5Fmck0Ds7ap7y9xhhhqiieKHE+hn+WiDKTaQz88NxFE3D8WjFrDESJowtLQjnVmkUlUaYyA4dy9h8hnCY6Pf8VUZRAP+a63U5eaCUsslotKGcaoLOt+IsrSiQJ99YyLiurM5UZOIxhPC0oY8aUdrfiL7YooV+wRK8QUcYy/Wc74ZudYZnYwoq+2KKEbi6esoTn7mtjwYnbI4KypbvK0HhxeyTVosT6yZK51mgcuL2orC3YRlCOz4iLEswcirc13iGijGbqh22KnA7uNTG1BT++0Vbk5REl2lej3yiizGbqg5X87EV2rwZATTzJirpcooSzBI1M4P0Hb/tRpjM9g1EwYcY+ZDcKRpeZK2ntyq1GiRL+PHGfIDOM1EUZz3QPvjFY+OtjFrBWsLJuYyvmcooy4CdYs3eWrlZUAM2C47TLutufrRwc7PyEqDQKfM1vYsVbXlEmmJb3WcBWeznmU7ZGYJTfFhx5yr6M6NmisLP4mFgu3CCA9sUHxEZWtOUWZWRj4Z+Ty0VUGM2AmoI5BF9mXwlOSPDbPVsUZQXaVEGv43bBXJOnlfbZFWK6KO5EWV9FmWEzEy6vySS/3lZ9TlD6/cIL+GpB4Z4vfOWZw8YdDk5mVvhI0Qo3max4myY4Gw/F+3qWSm4TJ4sxVpxpiTLm592jgANFVFCNhAOBONrDC5iRwqPF/2cg9f8NBX67F4rKxl0lhGOZPt96GoEYzV6CZY31bgbH4QkzzYcI5jjwD3+puEdQHtXvZA6EVfnHi3GW3DRFGTxMePXIApOoABvFTHGL8IJmT8wC0eu3Wc8wiMSQMz0oVsT74TI9wcbwhwWO01D2rwV7Pfibtk2k/GrwfESNhvHRrW/eftQiiTK6u3Dn8BeISKEDhbbCXLFKeIEz8nquGGtJ6bMo7CgxSWAwGBifRdoBzGpWtgXqgU8YxoOzfE5txtMitVa/01dqUcZZP+DTxIyCNnLpH3Hhd/si4cPFwP9ZnNz06ljveIFgIzhtE5gi6G7Sw+Bv2lXsC+67K8aURQWyj/CV5LeKRvQE+M4zTMxZcu4vwuFX+UFR/v5+yiIF0ejysYyfiP4YBr88agbcGi4R94pKYwC+6Xw69rBXZymqSEmbCtoVrjyW/O0oJhsc1MNAFKvMafVTC9BW+LzAFQPP3yUY9as0AofvPIcaMyJI9Z1OXz9lkaLopvnCkkaAIbAOgb0UzBkwFpA/GWUSKQw/GzeLSMFAV46aAHCk/qC4W9AOuUbwyeDTMF8ww7i/2F60R3cuWRky5H+qu+L1QQx6mwAAAABJRU5ErkJggg==)}.service-client-form[_ngcontent-%COMP%]   .blank-slate-wrapper[_ngcontent-%COMP%]   .blank-slate-inner-ct[_ngcontent-%COMP%]   .blank-slate-title[_ngcontent-%COMP%]{max-width:240px;margin-bottom:30px}"]})}}class Po{constructor(e,t){this.dialogService=e,this.sysSettingsService=t,this._destroyed$=new h.Subject}getFlatParameters(e){const t=[...e];return e.forEach(n=>{n.itemProperties&&t.push(...this.getFlatParameters(n.itemProperties))}),t}getParametersConstValuesEntries(e){const t=e.filter(n=>n.defValue.source===Ad.Const).map(n=>[n.name,n.defValue.value]);return(0,h.of)(t)}getSysSettingsValuesEntries(e){const t=e.filter(a=>a.defValue.source===Ad.SysSetting),n=t.map(a=>a.defValue.value);return 0===n.length?(0,h.of)([]):this.sysSettingsService.getByCodes(n).pipe((0,E.T)(a=>a.values),(0,E.T)(a=>t.map(r=>[r.name,a[r.defValue.value].value])))}getParametersValues(e){const t=this.getFlatParameters(e);return(0,h.combineLatest)([this.getSysSettingsValuesEntries(t),this.getParametersConstValuesEntries(t)]).pipe((0,E.T)(([n,a])=>[...n,...a]),(0,E.T)(n=>new Map(n)))}show(e){this.getParametersValues(e.serviceMethods[0].request.parameters).subscribe(t=>{this.dialogService.open(oh,{data:{schema:e,parametersValues:t},disableClose:!0,panelClass:"dialog-top-border"})})}ngOnDestroy(){this._destroyed$.next()}static{this.\u0275fac=function(t){return new(t||Po)(i.\u0275\u0275inject(re.o3),i.\u0275\u0275inject(Se))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Po,factory:Po.\u0275fac})}}class No{_getCaptionFromDto(e){if("string"==typeof e)return e;return`${e[Object.keys(e)[0]]}`}_convertFromObjectCollectionDto(e,t){return e?Object.keys(e.items).map(a=>{const r=e.items[a];return t(r)}):[]}_parameterValueFromDtoConverter(e){const t=new ET;return e&&(t.source=e.source,t.value=e.value),t}_parameterFromDtoConverter(e){const t=new Pd;return t.uId=e.uId,t.name=e.name,t.caption=this._getCaptionFromDto(e.caption),t.path=e.path,t.type=e.type,t.isArray=e.isArray,t.isRequired=e.isRequired,t.sequenceElementName=e.sequenceElementName,t.dataValueTypeName=e.dataValueTypeName,t.defValue=this._parameterValueFromDtoConverter(e.defValue),t.itemProperties=this._convertFromObjectCollectionDto(e.itemProperties,n=>this._parameterFromDtoConverter(n)),t}_convertRequestSchemaFromDto(e){if(!e)return null;const t=new MS;return t.uri=e.uri,t.uId=e.uId,t.name=e.name,t.methodType=e.httpMethodType,t.contentType=e.contentType,t.parameters=this._convertFromObjectCollectionDto(e.parameters,n=>this._parameterFromDtoConverter(n)),t}_convertResponseSchemaFromDto(e){if(!e)return null;const t=new wS;return t.uId=e.uId,t.name=e.name,t.contentType=e.contentType,t.parameters=this._convertFromObjectCollectionDto(e.parameters,n=>this._parameterFromDtoConverter(n)),t}_methodFromDtoConverter(e){const t=new ES;return t.uId=e.uId,t.name=e.name,t.caption=this._getCaptionFromDto(e.caption),t.timeout=e.requestTimeout,t.soapAction=e.soapAction,t.request=this._convertRequestSchemaFromDto(e.request),t.response=this._convertResponseSchemaFromDto(e.response),t}_convertToObjectCollectionDto(e,t){const n={};return e?.forEach(a=>{const r=t(a),u=r.uId;n[u]=r}),{items:n}}_parameterToDtoConverter(e){const t={};return t.uId=e.uId,t.name=e.name,t.caption=e.caption,t.path=e.path,t.type=e.type,t.isArray=e.isArray,t.isRequired=e.isRequired,t.sequenceElementName=e.sequenceElementName,t.dataValueTypeName=e.dataValueTypeName,t.itemProperties=this._convertToObjectCollectionDto(e.itemProperties,n=>this._parameterToDtoConverter(n)),t}_convertRequestSchemaToDto(e){if(!e)return null;const t={};return t.uri=e.uri,t.httpMethodType=e.methodType,t.contentType=e.contentType,t.parameters=this._convertToObjectCollectionDto(e.parameters,n=>this._parameterToDtoConverter(n)),t}_convertResponseSchemaToDto(e){if(!e)return null;const t={};return t.contentType=e.contentType,t.parameters=this._convertToObjectCollectionDto(e.parameters,n=>this._parameterToDtoConverter(n)),t}_methodToDtoConverter(e){const t={};return t.uId=e.uId,t.name=e.name,t.caption=e.caption,t.requestTimeout=e.timeout,t.soapAction=e.soapAction,t.request=this._convertRequestSchemaToDto(e.request),t.response=this._convertResponseSchemaToDto(e.response),t}convertToDto(e){const t={};return t.uId=e.uId,t.name=e.name,t.baseUri=e.baseUri,t.caption=e.caption,t.type=e.type,t.retryCount=e.retryCount,t.namespaces=e.namespaces.map(n=>n),t.methods=this._convertToObjectCollectionDto(e.serviceMethods,n=>this._methodToDtoConverter(n)),t}convertFromDto(e){const t=new TS;return t.uId=e.uId,t.name=e.name,t.baseUri=e.baseUri,t.caption=this._getCaptionFromDto(e.caption),t.type=e.type,t.retryCount=e.retryCount,t.namespaces=this._convertFromObjectCollectionDto(e.namespaces,n=>{const a={};return a.name=n.name,a.prefix=n.prefix,a}),t.serviceMethods=this._convertFromObjectCollectionDto(e.methods,n=>this._methodFromDtoConverter(n)),t}static{this.\u0275fac=function(t){return new(t||No)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:No,factory:No.\u0275fac})}}class lh{static{this.\u0275fac=function(t){return new(t||lh)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:lh})}static{this.\u0275inj=i.\u0275\u0275defineInjector({providers:[Ro,Po,ys,No,Ao,vr],imports:[ve.C,ce.YN,wo,R.CommonModule,re.Ph,Ve.wG,be.m_,Ue.mz,he.eB,Es.aP,Ei.kg,re.Ss,nt.jH,mt.Dy,sy,$m,re.Rm,v.h.forRoot(),Ht.qh,bT.TableModule]})}}class ch{constructor(e,t,n,a){this._customEventService=e,this._webServiceWizardService=t,this._webServiceClientService=n,this._webServiceDtoConverterService=a,this._destroyed$=new h.Subject}_onServicesSetup(e){this._customEventService.createOutboundChannel("WebServicesCreated").next(e)}_subscribeCustomEventService(e){return this._customEventService.subscribe(e).pipe((0,_e.Q)(this._destroyed$))}_convertToDto(e){return{services:e.services.map(t=>this._webServiceDtoConverterService.convertToDto(t)),resultCode:e.resultCode}}_getServiceSchema(e){const t=this._webServiceDtoConverterService.convertFromDto(e.serviceSchemaDto);return t.serviceMethods=t.serviceMethods.filter(n=>n.uId===e.methodUId),t}_openServiceWizard(){this._webServiceWizardService.showWizard().pipe((0,E.T)(e=>this._convertToDto(e))).subscribe(e=>{this._onServicesSetup(e)})}_openServiceClient(e){this._webServiceClientService.show(e)}ngOnInit(){this._subscribeCustomEventService("OpenWebServiceWizard").subscribe(()=>this._openServiceWizard()),this._subscribeCustomEventService("OpenServiceClient").pipe((0,E.T)(e=>this._getServiceSchema(e))).subscribe(e=>this._openServiceClient(e))}ngOnDestroy(){this._destroyed$.next()}static{this.\u0275fac=function(t){return new(t||ch)(i.\u0275\u0275directiveInject(W.Dj),i.\u0275\u0275directiveInject(Ro),i.\u0275\u0275directiveInject(Po),i.\u0275\u0275directiveInject(No))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:ch,selectors:[["ts-web-service-proxy"]],decls:2,vars:0,template:function(t,n){1&t&&(i.\u0275\u0275elementStart(0,"p"),i.\u0275\u0275text(1,"web-service-proxy works!"),i.\u0275\u0275elementEnd())}})}}class uh{constructor(e,t){this._customElementsBootstrapService=e,this.translate=t,this._customElements=[{componentName:"ts-web-service-proxy",componentType:ch}],t.use("en-US")}ngDoBootstrap(){this._customElements.forEach(({componentName:e,componentType:t})=>{this._customElementsBootstrapService.defineComponent(e,t)})}static{this.\u0275fac=function(t){return new(t||uh)(i.\u0275\u0275inject(W.SH),i.\u0275\u0275inject(v.c$))}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:uh})}static{this.\u0275inj=i.\u0275\u0275defineInjector({providers:[Ro,Po,No,W.Dj,{provide:_.TsT,useValue:"GetWebServiceTranslation"},{provide:F.HTTP_INTERCEPTORS,useClass:_.t7G,multi:!0},_.Yp,pt,Ot],imports:[x.BrowserModule,B.wb,lh,M.$D,F.HttpClientModule,_.sUJ,v.h.forRoot({loader:{provide:v.Wr,useClass:_.ns0}}),F.HttpClientXsrfModule.withOptions({cookieName:"BPMCSRF",headerName:"BPMCSRF"})]})}}x.platformBrowser().bootstrapModule(uh).catch(o=>console.error(o))},37497:(k,Ce,b)=>{"use strict";b.d(Ce,{Fj:()=>h,wq:()=>en,Ph:()=>et,o3:()=>ye,Rm:()=>Nt,sz:()=>ia,KN:()=>ot,ut:()=>st,kt:()=>cn,FL:()=>Vt,Ec:()=>Dt,Ss:()=>pn,Jo:()=>En.J,sX:()=>on,ch:()=>at});var x=b(97270),F=b(61432),i=b(99314),M=b(44537),B=b(96091),v=b(76340),W=b(93527),I=b(38503),R=b(20965),c=b(37222),_=b(6554),A=b(41992);const re=["input"];class h{constructor(m,y,T){this.ngControl=m,this.autofillMonitor=y,this.focusMonitor=T,this._disabled=!1,this._placeholder="",this._required=!1,this._focused=!1,this.destroy=new B.Subject,this.autofilled=!1,this.stateChanges=new B.Subject,this.onTouched=()=>{},m&&(this.ngControl.valueAccessor=this)}set elementRef(m){m&&(this._elementRef=m)}get elementRef(){return this._elementRef}get disabled(){return this._disabled}set disabled(m){this.setDisabledState((0,F.he)(m)),this.stateChanges.next()}get placeholder(){return this._placeholder}set placeholder(m){this._placeholder=m,this.stateChanges.next()}get required(){return this._required}set required(m){this._required=(0,F.he)(m),this.stateChanges.next()}get value(){return this.innerValue}set value(m){this.writeValue(m)}get innerValue(){return this._innerValue}set innerValue(m){this.setInnerValueSilent(m),this.callChangeHandler()}get empty(){return!this.autofilled&&!this.value}get focused(){return this._focused}set focused(m){this._focused=m,this.stateChanges.next()}get shouldLabelFloat(){return this.focused||!this.empty}setInnerValueSilent(m){this._innerValue=m}callChangeHandler(){this.onChange?this.onChange(this._innerValue):this.stateChanges.next()}focusElementViaMouse(){this.focusMonitor.focusVia(this.elementRef.nativeElement,"mouse")}initMonitors(){this.focusMonitor.monitor(this.elementRef.nativeElement,!0).pipe((0,v.Q)(this.destroy)).subscribe(m=>{this.focused=!!m}),this.autofillMonitor.monitor(this.elementRef).pipe((0,W.T)(m=>m.isAutofilled),(0,I.p)(m=>m),(0,R.Z)(!1),(0,v.Q)(this.destroy)).subscribe(m=>this.autofilled=m)}onContainerClick(m){"input"!==m.target.tagName.toLowerCase()&&this.focusElementViaMouse()}setDescribedByIds(){}registerOnChange(m){this.onChange=m}registerOnTouched(m){this.onTouched=m}writeValue(m){this._innerValue=m,this.stateChanges.next()}setDisabledState(m){if(this._disabled===m)return;this._disabled=m;const y=this.ngControl?.control;y&&y.disabled!==m&&(m?y.disable():y.enable())}ngDoCheck(){this.ngControl&&(this.errorState=this.ngControl.invalid&&this.ngControl.touched,this.stateChanges.next())}ngAfterViewInit(){this.initMonitors()}ngOnDestroy(){this.focusMonitor.stopMonitoring(this.elementRef?.nativeElement),this.autofillMonitor.stopMonitoring(this.elementRef),this._elementRef=null,this.stateChanges.next(),this.stateChanges.complete(),this.destroy.next(),this.destroy.complete()}static{this.\u0275fac=function(y){return new(y||h)(i.\u0275\u0275directiveInject(c.vO),i.\u0275\u0275directiveInject(_.P8),i.\u0275\u0275directiveInject(A.FN))}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:h,viewQuery:function(y,T){if(1&y&&i.\u0275\u0275viewQuery(re,5,i.ElementRef),2&y){let G;i.\u0275\u0275queryRefresh(G=i.\u0275\u0275loadQuery())&&(T.elementRef=G.first)}},hostVars:2,hostBindings:function(y,T){1&y&&i.\u0275\u0275listener("focusout",function(){return T.onTouched()}),2&y&&i.\u0275\u0275classProp("floating",T.shouldLabelFloat)},inputs:{disabled:"disabled",placeholder:"placeholder",required:"required",value:"value"}})}}(0,x.Cg)([(0,M.CrtInput)(),(0,x.Sn)("design:type",Boolean),(0,x.Sn)("design:paramtypes",[Boolean])],h.prototype,"disabled",null),(0,x.Cg)([(0,M.CrtInput)(),(0,x.Sn)("design:type",String),(0,x.Sn)("design:paramtypes",[String])],h.prototype,"placeholder",null),(0,x.Cg)([(0,M.CrtInput)(),(0,x.Sn)("design:type",Boolean),(0,x.Sn)("design:paramtypes",[Boolean])],h.prototype,"required",null),(0,x.Cg)([(0,M.CrtInput)(),(0,x.Sn)("design:type",Object),(0,x.Sn)("design:paramtypes",[Object])],h.prototype,"value",null);class xe{static{this.\u0275fac=function(y){return new(y||xe)}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:xe,selectors:[["crt-base-input-width-holder"]],inputs:{label:"label",minWidth:"minWidth"},decls:3,vars:3,consts:[[1,"crt-base-input-width-holder-label"],[1,"crt-base-input-width-holder-control"]],template:function(y,T){1&y&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(2,"div",1)),2&y&&(i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(T.label),i.\u0275\u0275advance(),i.\u0275\u0275styleProp("width",T.minWidth,"px"))},styles:["[_nghost-%COMP%]{display:block;height:0;overflow:hidden}.crt-base-input-width-holder-label[_ngcontent-%COMP%]{box-sizing:border-box;height:0;max-width:320px;padding-inline-end:2px;overflow:hidden}.crt-base-input-width-holder-control[_ngcontent-%COMP%]{height:0;min-width:0;max-width:320px}"],changeDetection:0})}}class E{static{this.\u0275fac=function(y){return new(y||E)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:E})}static{this.\u0275inj=i.\u0275\u0275defineInjector({})}}var Y,U,P=b(73772);class ie{static{this.\u0275fac=function(y){return new(y||ie)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:ie})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[P.C]})}}(U=Y||(Y={}))[U.CHECKING=0]="CHECKING",U[U.CONNECTED=1]="CONNECTED",U[U.WARNING=2]="WARNING",U[U.DISCONNECTED=3]="DISCONNECTED";class Se{get statusCssClassName(){const m=this._statusMap[this.status];if(void 0===m)throw new Error("Invalid indicator status");return m}constructor(){this._statusMap={},this.status=Y.CHECKING,this.description="",this._statusMap[Y.CHECKING]="checking",this._statusMap[Y.CONNECTED]="connected",this._statusMap[Y.DISCONNECTED]="disconnected",this._statusMap[Y.WARNING]="warning"}static{this.\u0275fac=function(y){return new(y||Se)}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:Se,selectors:[["ts-connection-indicator"]],inputs:{status:"status",description:"description"},decls:4,vars:3,consts:[[1,"connection-indicator-wrap"],[1,"indicator-desc"]],template:function(y,T){1&y&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275element(1,"div"),i.\u0275\u0275elementStart(2,"mat-label",1),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd()()),2&y&&(i.\u0275\u0275advance(),i.\u0275\u0275classMap("indicator  indicator-status-"+T.statusCssClassName),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(T.description))},dependencies:[P.aw],styles:[".connection-indicator-wrap[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;width:-moz-fit-content;width:fit-content}.indicator-desc[_ngcontent-%COMP%]{height:1.5em;margin:.5em .25em;color:#999}.indicator[_ngcontent-%COMP%]{width:1em;height:1em;border-radius:.5em;margin:.7em .25em .5em}.indicator-status-checking[_ngcontent-%COMP%]{background-color:#afacac}.indicator-status-connected[_ngcontent-%COMP%]{background-color:#0dc700}.indicator-status-warning[_ngcontent-%COMP%]{background-color:#ff8f00}.indicator-status-disconnected[_ngcontent-%COMP%]{background-color:#ed1b34}"]})}}var ne=b(76696),je=b(55837),it=b(61971);class ue{static{this.\u0275fac=function(y){return new(y||ue)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:ue})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[ne.CommonModule,c.YN,it.mz,je.KR]})}}var me=b(65468),z=b(46715),tt=b(1608);const se=["country"];function Ne(U,m){if(1&U&&(i.\u0275\u0275elementStart(0,"mat-option",5)(1,"span"),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()()),2&U){const y=m.$implicit;i.\u0275\u0275property("value",y.name),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(y.name)}}class Ae{constructor(m,y,T){this.ngControl=m,this.autofillMonitor=y,this.focusMonitor=T,this.countryValue=new B.BehaviorSubject(""),this.destroy=new B.Subject,this.countrySelected=new i.EventEmitter,this.stateChanges=new B.Subject,this.autofilled=!1,this.countries=[],this.countries$=new B.BehaviorSubject([]),this.onTouched=()=>{},m&&(this.ngControl.valueAccessor=this)}set countriesInfo(m){this.countriesInfoValue={...m},m&&m.countries&&this.initCountryControl()}get countriesInfo(){return this.countriesInfoValue}get disabled(){return this.disabledValue}set disabled(m){this.disabledValue=(0,F.he)(m),this.stateChanges.next()}get placeholder(){return this.placeholderValue}set placeholder(m){this.placeholderValue=this.originalPlaceholder=m,this.stateChanges.next()}get required(){return this.requiredValue}set required(m){this.requiredValue=(0,F.he)(m),this.stateChanges.next()}get value(){return this.countryActually}set value(m){switch(this.countryValue.next(m),this.stateChanges.next(),!0){case this.countries.some(y=>y.name===m):this.countryActually=m,this.onCountrySelected();break;case""===m:this.placeholderValue=this.originalPlaceholder;break;default:this.placeholderValue=""}}get empty(){return!(this.autofilled||this.value&&0!==this.value.length)}get focused(){return this.focusedValue}set focused(m){this.focusedValue=m,this.stateChanges.next()}filterCountryValues(m){m?this.countries$.next(this.countries.filter(y=>y.name.toLowerCase().startsWith(m.toLowerCase()))):this.countries$.next(this.countries.slice())}initCountryControl(){this.countriesInfoValue.countries=Object.entries(this.countriesInfoValue.countries).map(([m,y])=>({id:m,name:y})),this.prepareCountryList(this.countriesInfoValue),this.countries=this.countriesInfoValue.countries,this.countryValue.pipe((0,R.Z)("")).subscribe(m=>{this.filterCountryValues(m)})}prepareCountryList(m){if(m.countries.sort((y,T)=>y.name.localeCompare(T.name)),m.defaultCountryId){const y=m.countries.find(T=>T.id===m.defaultCountryId);m.countries.splice(m.countries.indexOf(y),1),m.countries.unshift(y)}}ngDoCheck(){this.ngControl&&(this.errorState=this.ngControl.invalid&&this.ngControl.touched,this.stateChanges.next())}writeValue(m){this.countryValue.next(m)}registerOnChange(m){this.countryValue.pipe((0,v.Q)(this.destroy)).subscribe(y=>{m(y)})}registerOnTouched(m){this.onTouched=m}setDescribedByIds(m){}onContainerClick(m){"input"!==m.target.tagName.toLowerCase()&&this.focusMonitor.focusVia(this.countryElementRef.nativeElement,"mouse")}ngAfterViewInit(){this.focusMonitor.monitor(this.countryElementRef.nativeElement,!0).subscribe(m=>{this.focused=!!m,!this.focused&&this.countryValue.value&&this.onCountrySelected()}),this.autofillMonitor.monitor(this.countryElementRef).pipe((0,W.T)(m=>m.isAutofilled),(0,z.$)(m=>m),(0,R.Z)(!1),(0,v.Q)(this.destroy)).subscribe(m=>this.autofilled=m)}ngOnDestroy(){this.destroy.next(),this.destroy.complete()}onCountrySelected(){this.ngControl.control.markAsTouched();const m=this.countries.find(y=>y.name===this.countryValue.value);m?this.countrySelected.emit(m.id):this.countrySelected.emit("")}static{this.\u0275fac=function(y){return new(y||Ae)(i.\u0275\u0275directiveInject(c.vO,10),i.\u0275\u0275directiveInject(_.P8),i.\u0275\u0275directiveInject(A.FN))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:Ae,selectors:[["ts-country-picker"]],viewQuery:function(y,T){if(1&y&&i.\u0275\u0275viewQuery(se,5,i.ElementRef),2&y){let G;i.\u0275\u0275queryRefresh(G=i.\u0275\u0275loadQuery())&&(T.countryElementRef=G.first)}},hostBindings:function(y,T){1&y&&i.\u0275\u0275listener("focusout",function(){return T.onTouched()})},inputs:{countriesInfo:"countriesInfo",disabled:"disabled",placeholder:"placeholder",required:"required",value:"value"},outputs:{countrySelected:"countrySelected"},features:[i.\u0275\u0275ProvidersFeature([{provide:me.qT,useExisting:Ae}])],decls:6,vars:6,consts:[["country",""],["countryAutocomplete","matAutocomplete"],["matInput","","data-qa","input-country","name","new-country","id","country","autocomplete","new-country",3,"ngModelChange","ngModel","placeholder","matAutocomplete"],["autoActiveFirstOption","",3,"closed"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(y,T){if(1&y){const G=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"input",2,0),i.\u0275\u0275twoWayListener("ngModelChange",function(Ie){return i.\u0275\u0275restoreView(G),i.\u0275\u0275twoWayBindingSet(T.value,Ie)||(T.value=Ie),i.\u0275\u0275resetView(Ie)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(2,"mat-autocomplete",3,1),i.\u0275\u0275listener("closed",function(){return i.\u0275\u0275restoreView(G),i.\u0275\u0275resetView(T.onCountrySelected())}),i.\u0275\u0275template(4,Ne,3,2,"mat-option",4),i.\u0275\u0275pipe(5,"async"),i.\u0275\u0275elementEnd()}if(2&y){const G=i.\u0275\u0275reference(3);i.\u0275\u0275twoWayProperty("ngModel",T.value),i.\u0275\u0275property("placeholder",T.placeholder)("matAutocomplete",G),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind1(5,4,T.countries$))}},dependencies:[ne.NgForOf,c.me,c.BC,c.vS,it.aL,je.G7,je.cm,tt.d1,ne.AsyncPipe],styles:[".mat-option[_ngcontent-%COMP%], .mat-input-element[_ngcontent-%COMP%]{font-family:Open Sans,Regular,sans-serif;font-size:13px}.component-wrap[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%}.component-wrap[_ngcontent-%COMP%]   .country-picker-element[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;margin-left:-115px;margin-top:-16px}"]})}}var Oe,de=b(98961),K=b(14401),X=b(86731),ge=b(68642);!function(U){U[U.Primary=0]="Primary",U[U.Secondary=1]="Secondary",U[U.Cancel=2]="Cancel",U[U.Delete=3]="Delete"}(Oe||(Oe={}));const at={caption:"ConfirmationDialog.YES",result:Oe.Secondary},st={caption:"ConfirmationDialog.NO",result:Oe.Primary};Oe.Cancel,Oe.Delete;function V(U,m){if(1&U&&(i.\u0275\u0275elementStart(0,"button",6),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"translate"),i.\u0275\u0275elementEnd()),2&U){const y=i.\u0275\u0275nextContext();i.\u0275\u0275property("mat-dialog-close",y.secondaryButton.result),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(2,2,y.secondaryButton.caption)," ")}}function j(U,m){if(1&U&&(i.\u0275\u0275elementStart(0,"button",6),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"translate"),i.\u0275\u0275elementEnd()),2&U){const y=m.$implicit;i.\u0275\u0275property("mat-dialog-close",y.result),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(2,2,y.caption)," ")}}class Z{constructor(m){this.data=m,this.buttons=[],m&&(this.primaryButton=m.primaryButton,this.secondaryButton=m.secondaryButton,this.message=m.message,this.buttons=m.buttons),this.buttons?.length||(this.primaryButton??=st,this.secondaryButton??=at)}static{this.\u0275fac=function(y){return new(y||Z)(i.\u0275\u0275directiveInject(K.xh))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:Z,selectors:[["ts-confirmation-dialog"]],decls:9,vars:7,consts:[["mat-dialog-content",""],[1,"message"],["mat-dialog-actions",""],["mat-flat-button","","color","primary","cdkFocusInitial","",1,"action-button",3,"mat-dialog-close"],["class","action-button","mat-button","",3,"mat-dialog-close",4,"ngIf"],["class","action-button","mat-button","",3,"mat-dialog-close",4,"ngFor","ngForOf"],["mat-button","",1,"action-button",3,"mat-dialog-close"]],template:function(y,T){1&y&&(i.\u0275\u0275elementStart(0,"div",0)(1,"span",1),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(3,"div",2)(4,"button",3),i.\u0275\u0275text(5),i.\u0275\u0275pipe(6,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(7,V,3,4,"button",4)(8,j,3,4,"button",5),i.\u0275\u0275elementEnd()),2&y&&(i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(null==T.data?null:T.data.message),i.\u0275\u0275advance(2),i.\u0275\u0275property("mat-dialog-close",T.primaryButton.result),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(6,5,T.primaryButton.caption)," "),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",T.secondaryButton),i.\u0275\u0275advance(),i.\u0275\u0275property("ngForOf",T.buttons))},dependencies:[ne.NgForOf,ne.NgIf,de.iV,K.kQ,K.PQ,K.$t,X.D9],styles:["[mat-dialog-content][_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{white-space:pre-line;word-break:break-word}[mat-dialog-actions][_ngcontent-%COMP%]{margin:27px 0 0!important;justify-content:flex-end}"]})}}class fe{constructor(m){this.data=m}static{this.\u0275fac=function(y){return new(y||fe)(i.\u0275\u0275directiveInject(K.xh))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:fe,selectors:[["ts-info-dialog"]],decls:7,vars:4,consts:[["mat-dialog-content",""],[1,"message"],["mat-dialog-actions",""],["mat-flat-button","","color","primary","cdkFocusInitial","",1,"action-button",3,"mat-dialog-close"]],template:function(y,T){1&y&&(i.\u0275\u0275elementStart(0,"div",0)(1,"span",1),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(3,"div",2)(4,"button",3),i.\u0275\u0275text(5),i.\u0275\u0275pipe(6,"translate"),i.\u0275\u0275elementEnd()()),2&y&&(i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(null==T.data?null:T.data.message),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(6,2,"InfoDialog.OK")," "))},dependencies:[de.iV,K.kQ,K.PQ,K.$t,X.D9],styles:["[mat-dialog-content][_ngcontent-%COMP%]{max-height:450px;overflow-y:auto!important}[mat-dialog-content][_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{white-space:pre-line;word-break:break-word}[mat-dialog-actions][_ngcontent-%COMP%]{margin:27px 0 0!important}"]})}}class ye{constructor(m,y,T,G){this.document=m,this._ngZone=y,this._translateService=T,this.dialog=G}_stopEventPropagation(m,y){m.afterOpened().pipe((0,v.Q)(y)).subscribe(T=>{const Q=this.document.getElementsByClassName("cdk-overlay-container")[0];Q&&Q.addEventListener("click",function(Ie){Ie.stopImmediatePropagation()})})}getMessageDialogConfig(m){const y={width:"450px",panelClass:["dialog-top-border"],data:{}};if("string"==typeof m)return y.data.message=m,y;m.panelClass&&m.panelClass.length&&y.panelClass.push(...m.panelClass);const T=m;return T.primaryButton&&(y.data.primaryButton=T.primaryButton),T.secondaryButton&&(y.data.secondaryButton=T.secondaryButton),T.buttons&&(y.data.buttons=T.buttons),y.data.message=T.message,y}open(m,y){return this._ngZone.run(()=>{const T=this.dialog.open(m,y),G=T.afterClosed();return this._stopEventPropagation(T,G),G})}openInfoDialog(m){return this.open(fe,this.getMessageDialogConfig(m))}openConfirmationDialog(m){return this.open(Z,this.getMessageDialogConfig(m))}openOperationPermissionsErrorDialog(m){const y=ge.Qf.format(this._translateService.instant("OperationPermissionsErrorDialog.ErrorTemplate"),m);return this.openInfoDialog(y)}closeById(m){this.dialog.getDialogById(m)?.close()}closeAll(){this.dialog.closeAll()}hasOpenDialogs(){return!!this.dialog.openDialogs?.length}getOpenDialogs(){return this.dialog.openDialogs}static{this.\u0275fac=function(y){return new(y||ye)(i.\u0275\u0275inject(ne.DOCUMENT),i.\u0275\u0275inject(i.NgZone),i.\u0275\u0275inject(X.c$),i.\u0275\u0275inject(K.ef))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:ye,factory:ye.\u0275fac})}}class et{static{this.\u0275fac=function(y){return new(y||et)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:et})}static{this.\u0275inj=i.\u0275\u0275defineInjector({providers:[ye,{provide:A.GX,useClass:A.Fp}],imports:[ne.CommonModule,de.wG,K.eB,X.h]})}}class rn{constructor(m){this.data=m}static{this.\u0275fac=function(y){return new(y||rn)(i.\u0275\u0275directiveInject(K.xh))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:rn,selectors:[["ts-info-with-header-dialog"]],decls:9,vars:10,consts:[[1,"header-message"],[1,"message"],[1,"action-button",3,"mat-dialog-close"]],template:function(y,T){1&y&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",1),i.\u0275\u0275text(4),i.\u0275\u0275pipe(5,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"button",2),i.\u0275\u0275text(7),i.\u0275\u0275pipe(8,"translate"),i.\u0275\u0275elementEnd()),2&y&&(i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(2,4,null==T.data?null:T.data.headerMessage)),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(5,6,null==T.data?null:T.data.message)),i.\u0275\u0275advance(2),i.\u0275\u0275property("mat-dialog-close",null==T.data||null==T.data.button?null:T.data.button.result),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(8,8,null==T.data||null==T.data.button?null:T.data.button.caption),"\n"))},dependencies:[K.kQ,X.D9],styles:[".header-message[_ngcontent-%COMP%]{margin-bottom:24px}.message[_ngcontent-%COMP%]{margin-bottom:40px;white-space:pre-wrap}.action-button[_ngcontent-%COMP%]{float:right;text-transform:none;border-radius:16px;padding:0 16px}"]})}}var En=b(11434);class on{static{this.\u0275fac=function(y){return new(y||on)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:on})}static{this.\u0275inj=i.\u0275\u0275defineInjector({})}}var Re=b(97800);class xn{static{this.\u0275fac=function(y){return new(y||xn)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:xn})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[Re.MY]})}}var _s=b(50438);class Nt{static{this.\u0275fac=function(y){return new(y||Nt)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:Nt})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[ne.CommonModule,_s.A8,X.h]})}}var It=b(32028);class Zt{static{this._visibleMasks=new Set}get maskComponent(){return this.maskComponentRef?.instance}get isVisible(){return!!this.maskComponent?.isVisible}set isVisible(m){m?(this.maskComponent||this.createMaskComponent(),this.maskComponent.isVisible=!0):this.maskComponent&&(this.maskComponent.isVisible=!1)}constructor(m,y){this.document=m,this.ngZone=y,this._defaultMaskDelayMilliseconds=300,this._defaultMinimumMaskDuration=500,this._immediateDisplayAfterHideMaxDelay=50,this._maskShouldBeShown=!1,this._maskShownTimestamp=0,this._maskHiddenTimestamp=0,this.updateMaskStateAttribute()}updateMaskStateAttribute(){const m=this.document?.body;m&&(Zt._visibleMasks.size>0?"visible"!==m.getAttribute("maskstate")&&m.setAttribute("maskstate","visible"):"none"!==m.getAttribute("maskstate")&&m.setAttribute("maskstate","none"))}_internalShow(){this.isVisible||(this.isVisible=!0,Zt._visibleMasks.add(this),this.updateMaskStateAttribute(),this._maskShownTimestamp=Date.now())}_internalHide(){this.isVisible&&(this.isVisible=!1,Zt._visibleMasks.delete(this),this.updateMaskStateAttribute(),this._maskHiddenTimestamp=Date.now())}show(m){this._maskShouldBeShown=!0;const y=Date.now()-this._maskHiddenTimestamp;0===m?.delay||y<this._immediateDisplayAfterHideMaxDelay?this._internalShow():this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this._maskShouldBeShown&&this.ngZone.run(()=>this._internalShow())},m?.delay||this._defaultMaskDelayMilliseconds)})}hide(){this._maskShouldBeShown=!1;const m=Date.now()-this._maskShownTimestamp;m>=this._defaultMinimumMaskDuration?this._internalHide():this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this._maskShouldBeShown||this.ngZone.run(()=>this._internalHide())},this._defaultMinimumMaskDuration-m)})}ngOnDestroy(){this.maskComponentRef?.destroy(),this.maskComponentRef=null,Zt._visibleMasks.delete(this)}static{this.\u0275fac=function(y){return new(y||Zt)(i.\u0275\u0275inject(Document),i.\u0275\u0275inject(i.NgZone))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Zt,factory:Zt.\u0275fac})}}var An=b(18498);const ln=new i.InjectionToken("CRT_MASK_COMPONENT"),Cs=new i.InjectionToken("Flag indicating that mask has startup loading animation");new i.InjectionToken("Modal overlay background component ID");var si;let ia=class vh extends Zt{static{si=this}constructor(m,y,T,G,Q,Ie,Et){super(T,G),this._appRef=m,this._injector=y,this._window=Q,this.loadingAnimationVisible=Ie,this._maskComponentType=Et,this.createMaskComponent(),this.maskComponent.isVisible=!1}static _getHtmlElement(m){const y=m;if(!y||0===y.rootNodes.length)throw new Error("Not found HTMLElement Mask");return y.rootNodes[0]}_createMaskComponentRef(){this.maskComponentRef=(0,i.createComponent)(this._maskComponentType||An.I,{environmentInjector:this._appRef.injector})}_appendMaskComponentToBody(){const m=this.maskComponentRef.hostView;this._appRef.attachView(m);const y=si._getHtmlElement(m);this.document.body.appendChild(y)}_hideLoadingAnimation(){this._window?.dispatchEvent(new CustomEvent("hide_loading_animation"))}createMaskComponent(){this._createMaskComponentRef(),this._appendMaskComponentToBody(),this.maskComponent.isVisible=!1}showBodyMask(m){this.loadingAnimationVisible||this.show(m)}hideBodyMask(){if(this.loadingAnimationVisible)return this.loadingAnimationVisible=!1,void this._hideLoadingAnimation();this.hide()}static{this.\u0275fac=function(y){return new(y||vh)(i.\u0275\u0275inject(i.ApplicationRef),i.\u0275\u0275inject(i.Injector),i.\u0275\u0275inject(ne.DOCUMENT),i.\u0275\u0275inject(i.NgZone),i.\u0275\u0275inject(It.ZP,8),i.\u0275\u0275inject(Cs,8),i.\u0275\u0275inject(ln,8))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:vh,factory:vh.\u0275fac,providedIn:"root"})}};ia=si=(0,x.Cg)([(0,It.op)({requestType:"crt.MaskService"}),(0,x.Sn)("design:paramtypes",[i.ApplicationRef,i.Injector,Document,i.NgZone,Window,Boolean,i.Type])],ia);class we extends Zt{constructor(m,y,T,G){super(T,G),this._viewContainerRef=m,this._maskComponentType=y,this._tasks=new Set}_setMaskStateAttribute(){const m=this._viewContainerRef?.element.nativeElement.parentElement;if(!m)return;const y=m.getAttribute("maskstate"),T=this.isVisible?"visible":"none";m.setAttribute("aria-busy",this.isVisible?"true":"false"),this.isVisible?m.setAttribute("inert","true"):m.removeAttribute("inert"),y!==T&&m.setAttribute("maskstate",T)}createMaskComponent(){this.maskComponentRef=this._viewContainerRef.createComponent(this._maskComponentType??An.I),this.maskComponentRef.instance.containerized=!0,this.maskComponentRef.instance.isVisible=!1}updateMaskStateAttribute(){super.updateMaskStateAttribute(),this._setMaskStateAttribute()}addTask(m,y){return this._tasks.add(m),this.show(y??this.settings),m}removeTask(m){this._tasks.delete(m),0===this._tasks.size&&this.hide()}clearTasks(){this._tasks.size>0&&(this._tasks.clear(),this.hide())}ngOnChanges(m){"shouldShow"in m&&(this.shouldShow?this.show(this.settings):this.hide())}static{this.\u0275fac=function(y){return new(y||we)(i.\u0275\u0275directiveInject(i.ViewContainerRef),i.\u0275\u0275directiveInject(ln,8),i.\u0275\u0275directiveInject(ne.DOCUMENT),i.\u0275\u0275directiveInject(i.NgZone))}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:we,selectors:[["","crtMask",""]],inputs:{shouldShow:[i.\u0275\u0275InputFlags.None,"crtMask","shouldShow"],settings:[i.\u0275\u0275InputFlags.None,"crtMaskSettings","settings"]},features:[i.\u0275\u0275InheritDefinitionFeature,i.\u0275\u0275NgOnChangesFeature]})}}var _e=b(73308),rt=b(93289),$e=b(26182);function aa(U,m){if(1&U&&i.\u0275\u0275element(0,"mat-icon",5),2&U){const y=i.\u0275\u0275nextContext();i.\u0275\u0275property("svgIcon",y.icon)}}function ri(U,m){if(1&U&&i.\u0275\u0275element(0,"mat-icon",10),2&U){const y=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275property("svgIcon",null==y?null:y.icon)}}function Ot(U,m){if(1&U){const y=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",8),i.\u0275\u0275listener("click",function(G){const Q=i.\u0275\u0275restoreView(y).$implicit,Ie=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(Ie.onActionClick(null==Q?null:Q.handler,G))}),i.\u0275\u0275template(1,ri,1,1,"mat-icon",9),i.\u0275\u0275elementStart(2,"span"),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd()()}if(2&U){const y=m.$implicit;i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",null==y?null:y.icon),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(null==y?null:y.caption)}}function Gt(U,m){if(1&U&&(i.\u0275\u0275elementStart(0,"div",6),i.\u0275\u0275template(1,Ot,4,2,"button",7),i.\u0275\u0275elementEnd()),2&U){const y=i.\u0275\u0275nextContext();i.\u0275\u0275advance(),i.\u0275\u0275property("ngForOf",y.actions)}}function Ti(U,m){if(1&U){const y=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",11),i.\u0275\u0275pipe(1,"translate"),i.\u0275\u0275listener("click",function(G){i.\u0275\u0275restoreView(y);const Q=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(Q.onClose(G))}),i.\u0275\u0275element(2,"mat-icon",12),i.\u0275\u0275elementEnd()}2&U&&i.\u0275\u0275attribute("aria-label",i.\u0275\u0275pipeBind1(1,1,"Dialog.Close"))}class pt{constructor(m,y){this.snackBarRef=m,this.data=y,this.message=y.message,this.actions=y.actions,this.closeMode=y.closeMode,this.icon=y.icon}onClose(m){m?.stopPropagation(),this.snackBarRef.dismiss()}onActionClick(m,y){var T=this;return(0,_e.A)(function*(){yield m?.call(T,y),T.snackBarRef.dismiss()})()}static{this.\u0275fac=function(y){return new(y||pt)(i.\u0275\u0275directiveInject(rt.TQ),i.\u0275\u0275directiveInject(rt.ht))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:pt,selectors:[["ts-notify"]],decls:7,vars:6,consts:[[1,"crt-notify-container"],["class","crt-notify-icon",3,"svgIcon",4,"ngIf"],["data-qa","notificationPopup",1,"crt-notify-message"],["class","crt-notify-actions",4,"ngIf"],["mat-flat-button","","class","crt-notify-close-button-icon","type","button",3,"click",4,"ngIf"],[1,"crt-notify-icon",3,"svgIcon"],[1,"crt-notify-actions"],["type","button","mat-flat-button","",3,"click",4,"ngFor","ngForOf"],["type","button","mat-flat-button","",3,"click"],["class","crt-notify-action-button-icon",3,"svgIcon",4,"ngIf"],[1,"crt-notify-action-button-icon",3,"svgIcon"],["mat-flat-button","","type","button",1,"crt-notify-close-button-icon",3,"click"],["svgIcon","icon_close_24"]],template:function(y,T){1&y&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275template(1,aa,1,1,"mat-icon",1),i.\u0275\u0275elementStart(2,"output",2),i.\u0275\u0275text(3),i.\u0275\u0275pipe(4,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(5,Gt,2,1,"div",3)(6,Ti,3,3,"button",4),i.\u0275\u0275elementEnd()),2&y&&(i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",T.icon),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(4,4,T.message)),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",null==T.actions?null:T.actions.length),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf","auto"!==T.closeMode))},dependencies:[ne.NgForOf,ne.NgIf,de.iV,$e.An,X.D9],styles:[".crt-notify-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.crt-notify-container[_ngcontent-%COMP%]   .crt-notify-message[_ngcontent-%COMP%]{flex:1}.crt-notify-container[_ngcontent-%COMP%]   .crt-notify-icon[_ngcontent-%COMP%]{width:16px;margin-inline-end:8px}.crt-notify-container[_ngcontent-%COMP%]   .crt-notify-close-button-icon[_ngcontent-%COMP%]{padding:0;min-width:initial;margin-inline-start:16px}.crt-notify-container[_ngcontent-%COMP%]   .crt-notify-actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;margin-inline-start:40px}.crt-notify-container[_ngcontent-%COMP%]   .crt-notify-actions[_ngcontent-%COMP%]   .crt-notify-action-button-icon[_ngcontent-%COMP%]{width:16px;margin-inline-end:4px}"]})}}var Le=b(51021);class Vt{constructor(m,y,T){this._snackBar=m,this._zone=y,this._environment=T,this._defaultDuration=this._environment?.defaultNotifyPopupDuration||5e3}show(m){const{message:y,duration:T,panelClass:G,icon:Q,closeMode:Ie="default",actions:Et=[]}=m||{},Ke=G?Array.isArray(G)?G:[G]:[],gt=this._zone.run(()=>this._snackBar.openFromComponent(pt,{data:{message:y,actions:Et,closeMode:Ie,icon:Q},duration:"manual"===Ie?0:T??this._defaultDuration,verticalPosition:"bottom",panelClass:["crt-notify",...Ke]}));return Promise.resolve(gt)}error({message:m,duration:y}){return this.show({message:m,duration:y,panelClass:"notify-service-error"})}warn({message:m,duration:y}){return this.show({message:m,duration:y,panelClass:"notify-service-warn"})}info({message:m,duration:y}){return this.show({message:m,duration:y,panelClass:"notify-service-info"})}static{this.\u0275fac=function(y){return new(y||Vt)(i.\u0275\u0275inject(Le.nf),i.\u0275\u0275inject(i.NgZone),i.\u0275\u0275inject("environment",8))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Vt,factory:Vt.\u0275fac})}}var Jt=b(49147);class ot{constructor(m,y){this._domSanitizer=m,this._matIconRegistry=y}addIcons(m){m.forEach(({name:y,icon:T})=>{const G=this._domSanitizer.bypassSecurityTrustHtml(T);this._matIconRegistry.addSvgIconLiteral(y,G)})}static{this.\u0275fac=function(y){return new(y||ot)(i.\u0275\u0275inject(Jt.DomSanitizer),i.\u0275\u0275inject($e.tp))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:ot,factory:ot.\u0275fac,providedIn:"root"})}}class cn{constructor(m){this._materialIconsRegistrar=m,this._materialIconsRegistrar.addIcons([{name:"icon_close_24",icon:b(26242)}])}static{this.\u0275fac=function(y){return new(y||cn)(i.\u0275\u0275inject(ot))}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:cn})}static{this.\u0275inj=i.\u0275\u0275defineInjector({providers:[Vt],imports:[ne.CommonModule,de.wG,$e.m_,Le.$D,X.h]})}}class Di{set observationConfig(m){this._config=m,this._startObserve()}constructor(m){this._elementRef=m,this.elementStateChange=new i.EventEmitter}_startObserve(){this._stopObserve(),this._observableElement=this._elementRef?.nativeElement,this._observableElement&&(this._observer=new IntersectionObserver(m=>this._emitElementStateChange(m),this._config),this._observer.observe(this._observableElement))}_emitElementStateChange(m){m.filter(T=>this._isObservableElement(T)).forEach(T=>{this.elementStateChange.emit({visible:T.isIntersecting})})}_isObservableElement(m){return m.target===this._observableElement}_stopObserve(){this._observer&&this._observableElement&&this._observer.unobserve(this._observableElement)}ngOnInit(){this._startObserve()}ngOnDestroy(){this._stopObserve()}static{this.\u0275fac=function(y){return new(y||Di)(i.\u0275\u0275directiveInject(i.ElementRef))}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:Di,selectors:[["","crtObserveElementInViewport",""]],inputs:{observationConfig:[i.\u0275\u0275InputFlags.None,"crtObserveElementInViewportConfig","observationConfig"]},outputs:{elementStateChange:"crtObserveElementInViewportStateChange"}})}}class lt{static{this.\u0275fac=function(y){return new(y||lt)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:lt})}static{this.\u0275inj=i.\u0275\u0275defineInjector({})}}const Ut=U=>({"password-icon":!0,"opacity-icon":U});class We extends h{constructor(m,y,T){super(m,y,T),this.hideIcon=!0,this.iconHint="",this.icon="visibility"}static{this.\u0275fac=function(y){return new(y||We)(i.\u0275\u0275directiveInject(c.vO,10),i.\u0275\u0275directiveInject(_.P8),i.\u0275\u0275directiveInject(A.FN))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:We,selectors:[["ts-password-input"]],inputs:{iconHint:"iconHint",icon:"icon"},features:[i.\u0275\u0275ProvidersFeature([{provide:me.qT,useExisting:We}]),i.\u0275\u0275InheritDefinitionFeature],decls:4,vars:8,consts:[["input",""],["matInput","","spellcheck","false","data-qa","input-password","type","password","name","pass","id","pass",3,"ngModelChange","ngModel","placeholder","type"],[3,"click","ngClass","title"]],template:function(y,T){if(1&y){const G=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"input",1,0),i.\u0275\u0275twoWayListener("ngModelChange",function(Ie){return i.\u0275\u0275restoreView(G),i.\u0275\u0275twoWayBindingSet(T.innerValue,Ie)||(T.innerValue=Ie),i.\u0275\u0275resetView(Ie)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(2,"mat-icon",2),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(G),i.\u0275\u0275resetView(T.hideIcon=!T.hideIcon)}),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd()}2&y&&(i.\u0275\u0275twoWayProperty("ngModel",T.innerValue),i.\u0275\u0275property("placeholder",T.placeholder)("type",T.hideIcon?"password":"text"),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(6,Ut,T.hideIcon))("title",T.iconHint),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate1("",T.icon,"\n"))},dependencies:[it.aL,$e.An,ne.NgClass,c.me,c.BC,c.vS],styles:["input[_ngcontent-%COMP%]{width:calc(100% - 24px)}.password-icon[_ngcontent-%COMP%]{position:absolute;top:4px;color:#006ce0;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.password-icon.opacity-icon[_ngcontent-%COMP%]{color:#757575}.password-icon[_ngcontent-%COMP%]:hover{cursor:pointer}"]})}}var zt=b(43558);class Mi{static{this.\u0275fac=function(y){return new(y||Mi)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:Mi})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[P.C,it.mz,$e.m_,ne.CommonModule,c.X1,c.YN,zt.wb,P.C,it.mz,$e.m_,ne.CommonModule,c.X1,c.YN,zt.wb]})}}var Un=b(95819);class Tt{static{this.\u0275fac=function(y){return new(y||Tt)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:Tt})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[Un.jP]})}}var Yt=b(56228),un=b(58292),Kt=b(45202);class Dt{static{this.\u0275fac=function(y){return new(y||Dt)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:Dt})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[ne.CommonModule,P.C,Yt.w,$e.m_,tt.zI,un.kg,Kt.T7]})}}function oi(U,m){if(1&U&&i.\u0275\u0275element(0,"mat-icon",9),2&U){const y=m.$implicit;i.\u0275\u0275property("svgIcon",y)}}function zn(U,m){if(1&U&&(i.\u0275\u0275elementStart(0,"span",10),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&U){const y=i.\u0275\u0275nextContext();i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(y.getTriggerCaption())}}function li(U,m){if(1&U&&i.\u0275\u0275element(0,"mat-icon",14),2&U){const y=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("svgIcon",null==y.config.emptyOption?null:y.config.emptyOption.svgIconName)}}function ee(U,m){1&U&&i.\u0275\u0275element(0,"div",16)}function L(U,m){if(1&U&&i.\u0275\u0275template(0,ee,1,0,"div",15),2&U){const y=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("ngIf",y.needDisplayOptionIcons())}}function H(U,m){1&U&&i.\u0275\u0275element(0,"mat-divider")}function ae(U,m){if(1&U&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"mat-option",11)(2,"div",12),i.\u0275\u0275template(3,li,1,1,"mat-icon",13)(4,L,1,1,"ng-template",null,0,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementStart(6,"span"),i.\u0275\u0275text(7),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275template(8,H,1,0,"mat-divider",7),i.\u0275\u0275elementContainerEnd()),2&U){const y=i.\u0275\u0275reference(5),T=i.\u0275\u0275nextContext();i.\u0275\u0275advance(),i.\u0275\u0275styleProp("display",T.config.emptyOption?"":"none"),i.\u0275\u0275property("value",T.emptyValue),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",null==T.config.emptyOption?null:T.config.emptyOption.svgIconName)("ngIfElse",y),i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate(null==T.config.emptyOption?null:T.config.emptyOption.caption),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",T.config.emptyOption)}}function le(U,m){if(1&U&&i.\u0275\u0275element(0,"mat-icon",14),2&U){const y=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275property("svgIcon",y.svgIconName)}}function Je(U,m){1&U&&i.\u0275\u0275element(0,"div",16)}function ze(U,m){if(1&U&&i.\u0275\u0275template(0,Je,1,0,"div",15),2&U){const y=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("ngIf",y.needDisplayOptionIcons())}}function Qt(U,m){if(1&U&&(i.\u0275\u0275elementStart(0,"mat-option",17)(1,"div",12),i.\u0275\u0275template(2,le,1,1,"mat-icon",13)(3,ze,1,1,"ng-template",null,1,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementStart(5,"span"),i.\u0275\u0275text(6),i.\u0275\u0275elementEnd()()()),2&U){const y=m.$implicit,T=i.\u0275\u0275reference(4);i.\u0275\u0275property("value",y.value),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",y.svgIconName)("ngIfElse",T),i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate(y.caption)}}class dn{constructor(){this._panelClass=[],this.emptyValue={},this.innerValue=this.emptyValue,this.valueChange=new i.EventEmitter,this.disabled=!1}set config(m){this._config=m,this._validateConfig()}get config(){return this._config}set value(m){this.innerValue=m??this.emptyValue}get value(){return this.isEmptyValueSelected()?null:this.innerValue}set panelClass(m){m?.length>0&&(this._panelClass=[...m])}get panelClass(){return[...this._panelClass,"select-menu-panel"]}_validateValue(){if(this.isEmptyValueSelected()||this._getSelectedOption())return;const m=this.value,y="object"==typeof m?JSON.stringify(m):m;throw new Error(`Value "${y}" is not specified in select menu configuration.`)}_validateConfig(){if(!this.config?.options)throw new Error(`Property "config" must be specified and contain valid options. Actual config is "${JSON.stringify(this.config)}".`)}_resetToFirstOptionIfNeeded(){this.config&&this.config.options.length>0&&!this.config.placeholder&&this.isEmptyValueSelected()&&(this.value=this.config.options[0].value,setTimeout(()=>{this.emitValueChange()},0))}_getSelectedOption(){const m=this.innerValue;return this.config.options.find(y=>y.value===m)}ngDoCheck(){this._validateValue(),this._resetToFirstOptionIfNeeded()}emitValueChange(){this.valueChange.emit(this.value)}trackByValue(m,y){return y.value}getTriggerCaption(){return this.isEmptyValueSelected()?this.config.placeholder?.caption:this._getSelectedOption().caption}getTriggerSvgIconName(){const m=this.config.placeholder?.svgIconName??this.config.emptyOption?.svgIconName;return this.isEmptyValueSelected()?m:this._getSelectedOption()?.svgIconName??m}isEmptyValueSelected(){return this.innerValue===this.emptyValue}needDisplayOptionIcons(){return!!this.config.emptyOption?.svgIconName||this.config.options.some(m=>m.svgIconName)}needDisplaySelectedCaption(){return!0!==this._config.hideSelectedCaption}static{this.\u0275fac=function(y){return new(y||dn)}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:dn,selectors:[["ts-select-menu"]],inputs:{config:"config",value:"value",disabled:"disabled",panelClass:"panelClass"},outputs:{valueChange:"valueChange"},decls:8,vars:9,consts:[["emptyOptionIconPlaceholder",""],["optionIconPlaceholder",""],["floatLabel","never"],["disableOptionCentering","",3,"valueChange","selectionChange","value","disabled","matTooltip","panelClass"],[1,"select-menu-trigger"],["class","select-menu-trigger-icon",3,"svgIcon",4,"ngIf"],["class","select-menu-trigger-caption",4,"ngIf"],[4,"ngIf"],["class","select-menu-option",3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[1,"select-menu-trigger-icon",3,"svgIcon"],[1,"select-menu-trigger-caption"],[1,"select-menu-option","select-menu-empty-option",3,"value"],[1,"select-menu-option-content"],[3,"svgIcon",4,"ngIf","ngIfElse"],[3,"svgIcon"],["class","select-menu-option-icon-placeholder",4,"ngIf"],[1,"select-menu-option-icon-placeholder"],[1,"select-menu-option",3,"value"]],template:function(y,T){1&y&&(i.\u0275\u0275elementStart(0,"mat-form-field",2)(1,"mat-select",3),i.\u0275\u0275twoWayListener("valueChange",function(Q){return i.\u0275\u0275twoWayBindingSet(T.innerValue,Q)||(T.innerValue=Q),Q}),i.\u0275\u0275listener("selectionChange",function(){return T.emitValueChange()}),i.\u0275\u0275elementStart(2,"mat-select-trigger")(3,"span",4),i.\u0275\u0275template(4,oi,1,1,"mat-icon",5)(5,zn,2,1,"span",6),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(6,ae,9,7,"ng-container",7)(7,Qt,7,4,"mat-option",8),i.\u0275\u0275elementEnd()()),2&y&&(i.\u0275\u0275advance(),i.\u0275\u0275twoWayProperty("value",T.innerValue),i.\u0275\u0275property("disabled",T.disabled)("matTooltip",T.needDisplaySelectedCaption()?null:T.getTriggerCaption())("panelClass",T.panelClass),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",T.getTriggerSvgIconName()),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",T.needDisplaySelectedCaption()),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",T.config.placeholder),i.\u0275\u0275advance(),i.\u0275\u0275property("ngForOf",T.config.options)("ngForTrackBy",T.trackByValue))},dependencies:[ne.NgForOf,ne.NgIf,P.Ky,Yt.q,$e.An,tt.d1,un.cu,un.ev,Kt.PD],styles:["ts-select-menu .mat-form-field-type-mat-select .mat-form-field-wrapper{padding-bottom:0!important}ts-select-menu .mat-form-field-type-mat-select .mat-form-field-wrapper .mat-form-field-infix{width:auto;padding:0!important}ts-select-menu .mat-form-field-type-mat-select .mat-form-field-wrapper .mat-form-field-infix mat-select{width:auto;height:26px;display:flex;align-items:center;border-radius:2px}ts-select-menu .mat-form-field-type-mat-select .mat-form-field-wrapper .mat-form-field-infix mat-select:not(.mat-select-disabled):focus,ts-select-menu .mat-form-field-type-mat-select .mat-form-field-wrapper .mat-form-field-infix mat-select:not(.mat-select-disabled):hover{background-color:#f2f5ff}ts-select-menu .mat-form-field-type-mat-select .mat-form-field-wrapper .mat-form-field-infix mat-select .mat-select-trigger{padding:0 4px 0 8px}ts-select-menu .mat-form-field-type-mat-select .mat-form-field-wrapper .mat-form-field-infix mat-select .mat-select-trigger .mat-select-value{max-width:100%;width:auto;color:#444;font-size:14px}ts-select-menu .mat-form-field-type-mat-select .mat-form-field-wrapper .mat-form-field-infix mat-select .mat-select-trigger .mat-select-value .select-menu-trigger{display:flex;align-items:center;height:18px;line-height:18px;position:relative}ts-select-menu .mat-form-field-type-mat-select .mat-form-field-wrapper .mat-form-field-infix mat-select .mat-select-trigger .mat-select-value .select-menu-trigger .select-menu-trigger-icon{height:16px;width:16px;margin:0 8px 0 0!important}ts-select-menu .mat-form-field-type-mat-select .mat-form-field-wrapper .mat-form-field-infix mat-select .mat-select-trigger .mat-select-value .select-menu-trigger .select-menu-trigger-caption{position:relative;bottom:1px}ts-select-menu .mat-form-field-type-mat-select .mat-form-field-wrapper .mat-form-field-underline{display:none}.mat-select-panel.select-menu-panel{max-height:500px!important;position:absolute;top:22px;left:15px;padding:1px}.mat-select-panel.select-menu-panel mat-option.select-menu-option{padding:0 18px;height:33px!important;line-height:33px!important}.mat-select-panel.select-menu-panel mat-option.select-menu-option.select-menu-empty-option{margin-top:4px}.mat-select-panel.select-menu-panel mat-option.select-menu-option.select-menu-empty-option.select-menu-empty-option-hidden{display:none}.mat-select-panel.select-menu-panel mat-option.select-menu-option .select-menu-option-content{display:flex;align-items:center;font-size:14px;line-height:18px;padding-right:15px}.mat-select-panel.select-menu-panel mat-option.select-menu-option mat-icon,.mat-select-panel.select-menu-panel mat-option.select-menu-option .select-menu-option-icon-placeholder{height:16px;width:16px;margin:0 8px 0 0!important}.mat-select-panel.select-menu-panel mat-divider{margin:5px 12px}\n"],encapsulation:2})}}class pn{constructor(m){this._materialIconsRegistrator=m,this._materialIconsRegistrator.addIcons([{name:"tooltip-icon",icon:b(92825)}])}static{this.\u0275fac=function(y){return new(y||pn)(i.\u0275\u0275inject(ot))}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:pn})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[ne.CommonModule,$e.m_,Kt.T7,X.h,et]})}}var Na=b(14361),Pn=(b(35207),b(3126));function ci(U,m){if(1&U&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&U){const y=m.$implicit,T=i.\u0275\u0275nextContext();i.\u0275\u0275classMapInterpolate1("rule ",T.getValidationClass(y.valid),""),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate1(" ",y.caption," ")}}class Dr extends Na.x{set tooltipConfig(m){this.validationTooltipConfig=m.value}constructor(m,y){super(m,y),this.directionality=m}getValidationClass(m){return m?"valid":"boolean"==typeof m?"invalid":"not-validated"}setInnerHTML(){}static{this.\u0275fac=function(y){return new(y||Dr)(i.\u0275\u0275directiveInject(Pn.dS),i.\u0275\u0275directiveInject(Jt.DomSanitizer))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:Dr,selectors:[["crt-validation-result-tooltip"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:5,vars:5,consts:[[1,"header"],[1,"rules"],[3,"class",4,"ngFor","ngForOf"]],template:function(y,T){1&y&&(i.\u0275\u0275elementStart(0,"div")(1,"div",0),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",1),i.\u0275\u0275template(4,ci,2,4,"div",2),i.\u0275\u0275elementEnd()()),2&y&&(i.\u0275\u0275classMapInterpolate1("component-container ",T.cssClasses,""),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1("",null==T.validationTooltipConfig?null:T.validationTooltipConfig.header,":"),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",null==T.validationTooltipConfig?null:T.validationTooltipConfig.validations))},dependencies:[ne.NgForOf],styles:[".component-container[_ngcontent-%COMP%]{max-width:400px;display:flex;flex-direction:column;padding:16px;border-width:1px;border-style:solid}.component-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{text-align:left;font-weight:700;padding-bottom:6px}.component-container[_ngcontent-%COMP%]   .rules[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.component-container[_ngcontent-%COMP%]   .rules[_ngcontent-%COMP%]   .rule[_ngcontent-%COMP%]{width:50%;position:relative;left:24px;text-indent:-24px;padding-right:30px;box-sizing:border-box;margin-bottom:9px}.component-container[_ngcontent-%COMP%]   .rules[_ngcontent-%COMP%]   .rule[_ngcontent-%COMP%]:before{padding-right:8px;top:3px;position:relative}.component-container[_ngcontent-%COMP%]   .rules[_ngcontent-%COMP%]   .rule.valid[_ngcontent-%COMP%]:before{content:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4KICA8ZyBpZD0iR3JvdXBfMTY1OTUiIGRhdGEtbmFtZT0iR3JvdXAgMTY1OTUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC00ODYgLTU3MikiPgogICAgPHJlY3QgaWQ9IlJlY3RhbmdsZV80MjUxMyIgZGF0YS1uYW1lPSJSZWN0YW5nbGUgNDI1MTMiIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDg2IDU3MikiIGZpbGw9Im5vbmUiLz4KICAgIDxnIGlkPSJFbGxpcHNlXzMwODciIGRhdGEtbmFtZT0iRWxsaXBzZSAzMDg3IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0ODcgNTczKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjM2M4MjIzIiBzdHJva2Utd2lkdGg9IjIiPgogICAgICA8Y2lyY2xlIGN4PSI3IiBjeT0iNyIgcj0iNyIgc3Ryb2tlPSJub25lIi8+CiAgICAgIDxjaXJjbGUgY3g9IjciIGN5PSI3IiByPSI2IiBmaWxsPSJub25lIi8+CiAgICA8L2c+CiAgICA8cGF0aCBpZD0iUGF0aF8xMTg3OSIgZGF0YS1uYW1lPSJQYXRoIDExODc5IiBkPSJNMTcuMDkzLDI4LjE4bDIuNSwzLDQuNS01IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0NzMuNDA3IDU1MS4zMikiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzNjODIyMyIgc3Ryb2tlLXdpZHRoPSIyIi8+CiAgPC9nPgo8L3N2Zz4K)}.component-container[_ngcontent-%COMP%]   .rules[_ngcontent-%COMP%]   .rule.invalid[_ngcontent-%COMP%]:before{content:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4KICA8ZyBpZD0iR3JvdXBfMTY1OTQiIGRhdGEtbmFtZT0iR3JvdXAgMTY1OTQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC00ODYgLTU3MikiPgogICAgPHJlY3QgaWQ9IlJlY3RhbmdsZV80MjUxMyIgZGF0YS1uYW1lPSJSZWN0YW5nbGUgNDI1MTMiIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDg2IDU3MikiIGZpbGw9Im5vbmUiLz4KICAgIDxnIGlkPSJFbGxpcHNlXzMwODciIGRhdGEtbmFtZT0iRWxsaXBzZSAzMDg3IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0ODcgNTczKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjYzIzZjIzIiBzdHJva2Utd2lkdGg9IjIiPgogICAgICA8Y2lyY2xlIGN4PSI3IiBjeT0iNyIgcj0iNyIgc3Ryb2tlPSJub25lIi8+CiAgICAgIDxjaXJjbGUgY3g9IjciIGN5PSI3IiByPSI2IiBmaWxsPSJub25lIi8+CiAgICA8L2c+CiAgICA8cGF0aCBpZD0iUGF0aF8xMTg3NyIgZGF0YS1uYW1lPSJQYXRoIDExODc3IiBkPSJNMTQyOCw0ODF2NiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE3My41MDkgLTc3MS45ODgpIHJvdGF0ZSg0NSkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2MyM2YyMyIgc3Ryb2tlLXdpZHRoPSIyIi8+CiAgICA8cGF0aCBpZD0iUGF0aF8xMTg3OCIgZGF0YS1uYW1lPSJQYXRoIDExODc4IiBkPSJNMTQyOCw0ODF2NiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTg0NS45ODggLTg3LjUwOSkgcm90YXRlKDEzNSkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2MyM2YyMyIgc3Ryb2tlLXdpZHRoPSIyIi8+CiAgPC9nPgo8L3N2Zz4K)}.component-container[_ngcontent-%COMP%]   .rules[_ngcontent-%COMP%]   .rule.not-validated[_ngcontent-%COMP%]:before{content:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4KICA8ZyBpZD0iR3JvdXBfMTY1OTMiIGRhdGEtbmFtZT0iR3JvdXAgMTY1OTMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC00ODYgLTU3MikiPgogICAgPHJlY3QgaWQ9IlJlY3RhbmdsZV80MjUxMyIgZGF0YS1uYW1lPSJSZWN0YW5nbGUgNDI1MTMiIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDg2IDU3MikiIGZpbGw9Im5vbmUiLz4KICAgIDxnIGlkPSJFbGxpcHNlXzMwODciIGRhdGEtbmFtZT0iRWxsaXBzZSAzMDg3IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0ODcgNTczKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNzU3NTc1IiBzdHJva2Utd2lkdGg9IjIiPgogICAgICA8Y2lyY2xlIGN4PSI3IiBjeT0iNyIgcj0iNyIgc3Ryb2tlPSJub25lIi8+CiAgICAgIDxjaXJjbGUgY3g9IjciIGN5PSI3IiByPSI2IiBmaWxsPSJub25lIi8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K)}"]})}}var Oo=b(91877);function sa(U,m){if(1&U&&(i.\u0275\u0275elementStart(0,"span"),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&U){const y=i.\u0275\u0275nextContext();i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(y.translate("OperationsPoint"))}}function Oa(U,m){if(1&U&&(i.\u0275\u0275elementStart(0,"li"),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&U){const y=m.$implicit;i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(y)}}function Mr(U,m){if(1&U&&(i.\u0275\u0275elementStart(0,"ol"),i.\u0275\u0275template(1,Oa,2,1,"li",3),i.\u0275\u0275elementEnd()),2&U){const y=i.\u0275\u0275nextContext();i.\u0275\u0275advance(),i.\u0275\u0275property("ngForOf",null==y.data?null:y.data.byOperations)}}function Va(U,m){if(1&U&&(i.\u0275\u0275elementStart(0,"span"),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&U){const y=i.\u0275\u0275nextContext();i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(y.translate("RecordsPoint"))}}function La(U,m){if(1&U&&(i.\u0275\u0275elementStart(0,"li"),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&U){const y=m.$implicit;i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(y)}}function Fa(U,m){if(1&U&&(i.\u0275\u0275elementStart(0,"ol"),i.\u0275\u0275template(1,La,2,1,"li",3),i.\u0275\u0275elementEnd()),2&U){const y=i.\u0275\u0275nextContext();i.\u0275\u0275advance(),i.\u0275\u0275property("ngForOf",null==y.data?null:y.data.byRecords)}}class ka extends Oo.x{set tooltipConfig(m){this.data=m.value}constructor(m,y,T,G,Q){super(m,y),this.directionality=m,this._translateService=T,this._dialogService=G,this._environment=Q,this._translatePrefix="ObjectPermissions."}translate(m){return this._translateService.instant(this._translatePrefix+m)}getUrl(){return this._url||(this._url=this._environment.workspaceBaseUrl+"ClientApp/#/AdministratedObjects"),this._url}updateObjectPermissions(){this._dialogService.openConfirmationDialog(this.translate("UpdateObjectPermissionsMessage")).pipe((0,B.map)(m=>{m===at.result&&this.data.setObjectPermissionsFn(this.data.targetId).subscribe()})).subscribe()}static{this.\u0275fac=function(y){return new(y||ka)(i.\u0275\u0275directiveInject(Pn.dS),i.\u0275\u0275directiveInject(Jt.DomSanitizer),i.\u0275\u0275directiveInject(X.c$),i.\u0275\u0275directiveInject(ye),i.\u0275\u0275directiveInject("environment"))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:ka,selectors:[["crt-object-permissions-warning"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:17,vars:14,consts:[[4,"ngIf"],["target","_blank",3,"href"],["target","_blank",1,"update-permissions-link",3,"click"],[4,"ngFor","ngForOf"]],template:function(y,T){1&y&&(i.\u0275\u0275elementStart(0,"div")(1,"span"),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(3,sa,2,1,"span",0)(4,Mr,2,1,"ol",0)(5,Va,2,1,"span",0)(6,Fa,2,1,"ol",0),i.\u0275\u0275elementStart(7,"span"),i.\u0275\u0275text(8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"a",1),i.\u0275\u0275text(10),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(11,"span"),i.\u0275\u0275text(12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(13,"a",2),i.\u0275\u0275listener("click",function(){return T.updateObjectPermissions()}),i.\u0275\u0275text(14),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(15,"p"),i.\u0275\u0275text(16),i.\u0275\u0275elementEnd()()),2&y&&(i.\u0275\u0275classMapInterpolate1("component-container ",T.cssClasses,""),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(T.translate("Warning")),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",(null==T.data||null==T.data.byOperations?null:T.data.byOperations.length)>0),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",(null==T.data||null==T.data.byOperations?null:T.data.byOperations.length)>0),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",(null==T.data||null==T.data.byRecords?null:T.data.byRecords.length)>0),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",(null==T.data||null==T.data.byRecords?null:T.data.byRecords.length)>0),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(T.translate("SetProperPermissionsBegin")),i.\u0275\u0275advance(),i.\u0275\u0275propertyInterpolate("href",T.getUrl(),i.\u0275\u0275sanitizeUrl),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(T.translate("ObjectPermissions")),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(T.translate("SetProperPermissionsEnd")),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(T.translate("Link")),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(T.translate("End")))},dependencies:[ne.NgForOf,ne.NgIf],styles:[".component-container[_ngcontent-%COMP%]{min-width:450px;max-width:450px;border-bottom:0px!important}.component-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.component-container[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin:4px;padding-inline-start:20px}.component-container[_ngcontent-%COMP%]   a.update-permissions-link[_ngcontent-%COMP%]{display:block;line-height:40px}"]})}}var ja=b(36381),wr=b(97124);class bs{constructor(){this.tooltipId=(0,M.generateGuid)(),this.type="default",this.icon="info-icon"}set tooltip(m){m instanceof ja.I?this._tooltipConfig=m:this._tooltipConfig=this._createTooltipConfig(m)}get tooltip(){return this._tooltipConfig}get tooltipMode(){return{error:"Tooltip.Mode.Error",default:"Tooltip.Mode.Default",none:""}[this.type]||""}get iconClass(){return{error:"invalid-icon",default:"tooltip-icon",none:""}[this.type]||""}_createTooltipConfig(m){return new ja.I({showEvent:["focus","mouseenter"],hideEvent:["blur","mouseleave"],componentType:Na.x,tooltipConfig:{value:m},preferredPositions:[{originX:"end",originY:"center",overlayX:"start",overlayY:"center"}]})}static{this.\u0275fac=function(y){return new(y||bs)}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:bs,selectors:[["crt-icon-tooltip"]],inputs:{tooltip:"tooltip",ariaLabel:"ariaLabel",type:"type",icon:"icon"},decls:2,vars:8,consts:[["matSuffix","","crtTooltip","","role","button","aria-hidden","false","tabindex","0",3,"crtTooltipId","tooltipConfig","ngClass","svgIcon"]],template:function(y,T){1&y&&(i.\u0275\u0275element(0,"mat-icon",0),i.\u0275\u0275pipe(1,"translate")),2&y&&(i.\u0275\u0275property("crtTooltipId",T.tooltipId)("tooltipConfig",T.tooltip)("ngClass",T.iconClass)("svgIcon",T.icon),i.\u0275\u0275attribute("aria-label",i.\u0275\u0275pipeBind1(1,6,T.tooltipMode)+" "+T.ariaLabel)("aria-describedby",T.tooltipId))},dependencies:[ne.NgClass,$e.An,wr.d,X.D9],styles:["body[_ngcontent-%COMP%]{--focus-outline-outer-color: var(--crt-palette-secondary-500);--focus-outline-inner-color: white}[_nghost-%COMP%]{width:20px;height:20px}.mat-icon[_ngcontent-%COMP%]{width:16px;height:16px;padding:2px}.mat-icon[_ngcontent-%COMP%]:focus-visible{box-shadow:inset 0 0 0 1px var(--focus-outline-outer-color),inset 0 0 0 2px var(--focus-outline-inner-color);outline:none;border-radius:4px}"],changeDetection:0})}}class Ss{static{this.\u0275fac=function(y){return new(y||Ss)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:Ss})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[ne.CommonModule,de.wG,$e.m_]})}}const Ba=U=>({"voice-to-text-container__icon-microphone":!0,"voice-to-text-container__icon-microphone-active":U});function yt(U,m){if(1&U){const y=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",2),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(y);const G=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(G.clicked())}),i.\u0275\u0275element(1,"span",3),i.\u0275\u0275elementEnd()}if(2&U){const y=i.\u0275\u0275nextContext();i.\u0275\u0275property("disableRipple",!0),i.\u0275\u0275advance(),i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(2,Ba,y.isActive))}}class Er{get voiceToTextApi(){return this._voiceToTextApi||(this._voiceToTextApi=this._initializeVoiceToTextApi()),this._voiceToTextApi}set isActive(m){this._isActive=m,this.recognitionStateChanged.emit(m)}get isActive(){return this._isActive}constructor(m,y){this._injector=m,this._cdr=y,this._unsubscribe$=new B.Subject,this._isActive=!1,this.speechRecognitionFinished=new i.EventEmitter,this.recognitionStateChanged=new i.EventEmitter,this.language="en-US",this.isVisible=It.Js.isSupported()}_initializeVoiceToTextApi(){const m=this._injector.get(It.Js);return m.init({lang:this.language}),this._subscribeEvents(m),m}_subscribeEvents(m){m.speechResult.pipe((0,v.Q)(this._unsubscribe$)).subscribe(y=>this.onSpeechResultHandler(y)),m.speechEnd.pipe((0,v.Q)(this._unsubscribe$)).subscribe(()=>this.onSpeechEndHandler())}ngOnDestroy(){this._unsubscribe$.next(),this._unsubscribe$.complete(),this._voiceToTextApi&&(this._voiceToTextApi.destroy(),this._voiceToTextApi=null)}onSpeechResultHandler(m){this.speechRecognitionFinished.emit(m)}onSpeechEndHandler(){this.isActive=!1,this._cdr.detectChanges()}clicked(){this.isActive?this.voiceToTextApi.stopRecognition():this.voiceToTextApi.startRecognition(),this.isActive=!this.isActive,this._cdr.detectChanges()}static{this.\u0275fac=function(y){return new(y||Er)(i.\u0275\u0275directiveInject(i.Injector),i.\u0275\u0275directiveInject(i.ChangeDetectorRef))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:Er,selectors:[["ts-voice-to-text-button"]],inputs:{language:"language"},outputs:{speechRecognitionFinished:"speechRecognitionFinished",recognitionStateChanged:"recognitionStateChanged"},features:[i.\u0275\u0275ProvidersFeature([It.Js])],decls:2,vars:1,consts:[[1,"voice-to-text-container"],["mat-icon-button","",3,"disableRipple","click",4,"ngIf"],["mat-icon-button","",3,"click","disableRipple"],[3,"ngClass"]],template:function(y,T){1&y&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275template(1,yt,2,4,"button",1),i.\u0275\u0275elementEnd()),2&y&&(i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",T.isVisible))},dependencies:[ne.NgClass,ne.NgIf,de.iV],styles:[".voice-to-text-container[_ngcontent-%COMP%]{display:inherit}.voice-to-text-container__icon-microphone[_ngcontent-%COMP%]{display:block;width:16px;height:16px;background:no-repeat url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4gIDxnIGlkPSJpY29uX21pY3JvcGhvbmUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMDYwLjUxMiAtMjQyLjY1OSkiPiAgICA8cGF0aCBpZD0iUGF0aF82MTI1IiBkYXRhLW5hbWU9IlBhdGggNjEyNSIgZD0iTTIwNjAuNTEyLDI0Mi42NTloMTZ2MTZoLTE2WiIgZmlsbD0ibm9uZSIvPiAgICA8cGF0aCBpZD0iUGF0aF82MTI3IiBkYXRhLW5hbWU9IlBhdGggNjEyNyIgZD0iTTEuNSwwaDBBMS41LDEuNSwwLDAsMSwzLDEuNXY0QTEuNSwxLjUsMCwwLDEsMS41LDdoMEExLjUsMS41LDAsMCwxLDAsNS41di00QTEuNSwxLjUsMCwwLDEsMS41LDBaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMDY3LjAxMiAyNDQuMTU5KSIgZmlsbD0iIzgwOTViMyIvPiAgICA8cGF0aCBpZD0iUGF0aF82MTI2IiBkYXRhLW5hbWU9IlBhdGggNjEyNiIgZD0iTTIwNzIuOSwyNDkuNjlhNC4zOSw0LjM5LDAsMCwxLTguNzgsMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuMTEgLTAuMDMxKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODA5NWIzIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iMSIvPiAgICA8bGluZSBpZD0iTGluZV8yMTUiIGRhdGEtbmFtZT0iTGluZSAyMTUiIHkxPSIzLjUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIwNjguNTEyIDI1My42NTkpIiBmaWxsPSJub25lIiBzdHJva2U9IiM4MDk1YjMiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIxIi8+ICA8L2c+PC9zdmc+)}.voice-to-text-container__icon-microphone-active[_ngcontent-%COMP%]{border-radius:16px;animation:_ngcontent-%COMP%_glow 1s infinite alternate}.voice-to-text-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none}.voice-to-text-container[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{width:inherit;height:inherit}@keyframes _ngcontent-%COMP%_glow{0%{background:no-repeat url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4gIDxnIGlkPSJpY29uX21pY3JvcGhvbmUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMDYwLjUxMiAtMjQyLjY1OSkiPiAgICA8cGF0aCBpZD0iUGF0aF82MTI1IiBkYXRhLW5hbWU9IlBhdGggNjEyNSIgZD0iTTIwNjAuNTEyLDI0Mi42NTloMTZ2MTZoLTE2WiIgZmlsbD0ibm9uZSIvPiAgICA8cGF0aCBpZD0iUGF0aF82MTI3IiBkYXRhLW5hbWU9IlBhdGggNjEyNyIgZD0iTTEuNSwwaDBBMS41LDEuNSwwLDAsMSwzLDEuNXY0QTEuNSwxLjUsMCwwLDEsMS41LDdoMEExLjUsMS41LDAsMCwxLDAsNS41di00QTEuNSwxLjUsMCwwLDEsMS41LDBaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMDY3LjAxMiAyNDQuMTU5KSIgZmlsbD0iIzgwOTViMyIvPiAgICA8cGF0aCBpZD0iUGF0aF82MTI2IiBkYXRhLW5hbWU9IlBhdGggNjEyNiIgZD0iTTIwNzIuOSwyNDkuNjlhNC4zOSw0LjM5LDAsMCwxLTguNzgsMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuMTEgLTAuMDMxKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODA5NWIzIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iMSIvPiAgICA8bGluZSBpZD0iTGluZV8yMTUiIGRhdGEtbmFtZT0iTGluZSAyMTUiIHkxPSIzLjUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIwNjguNTEyIDI1My42NTkpIiBmaWxsPSJub25lIiBzdHJva2U9IiM4MDk1YjMiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIxIi8+ICA8L2c+PC9zdmc+)}to{background:no-repeat url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4gIDxnIGlkPSJpY29uX21pY3JvcGhvbmUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMDYwLjUxMiAtMjQyLjY1OSkiPiAgICA8cGF0aCBpZD0iUGF0aF82MTI1IiBkYXRhLW5hbWU9IlBhdGggNjEyNSIgZD0iTTIwNjAuNTEyLDI0Mi42NTloMTZ2MTZoLTE2WiIgZmlsbD0ibm9uZSIvPiAgICA8cGF0aCBpZD0iUGF0aF82MTI3IiBkYXRhLW5hbWU9IlBhdGggNjEyNyIgZD0iTTEuNSwwaDBBMS41LDEuNSwwLDAsMSwzLDEuNXY0QTEuNSwxLjUsMCwwLDEsMS41LDdoMEExLjUsMS41LDAsMCwxLDAsNS41di00QTEuNSwxLjUsMCwwLDEsMS41LDBaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMDY3LjAxMiAyNDQuMTU5KSIgZmlsbD0iI0ZGMDAwMCIvPiAgICA8cGF0aCBpZD0iUGF0aF82MTI2IiBkYXRhLW5hbWU9IlBhdGggNjEyNiIgZD0iTTIwNzIuOSwyNDkuNjlhNC4zOSw0LjM5LDAsMCwxLTguNzgsMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuMTEgLTAuMDMxKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjRkYwMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iMSIvPiAgICA8bGluZSBpZD0iTGluZV8yMTUiIGRhdGEtbmFtZT0iTGluZSAyMTUiIHkxPSIzLjUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIwNjguNTEyIDI1My42NTkpIiBmaWxsPSJub25lIiBzdHJva2U9IiNGRjAwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIxIi8+ICA8L2c+PC9zdmc+)}}"]})}}function Mh(U,m){1&U&&i.\u0275\u0275element(0,"mat-icon",4)}function wh(U,m){if(1&U&&(i.\u0275\u0275elementStart(0,"span",5),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&U){const y=i.\u0275\u0275nextContext();i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(y.linkCaption)}}class Hn{constructor(m,y){this.linkCaption="",this.linkUrl="",this.showIcon=!0,y.addSvgIconLiteral("info-icon",m.bypassSecurityTrustHtml(b(90651)))}static{this.\u0275fac=function(y){return new(y||Hn)(i.\u0275\u0275directiveInject(Jt.DomSanitizer),i.\u0275\u0275directiveInject($e.tp))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:Hn,selectors:[["ts-info-link"]],inputs:{linkCaption:"linkCaption",linkUrl:"linkUrl",showIcon:"showIcon"},decls:4,vars:3,consts:[[1,"info-link-wrap"],["target","_blank","rel","noopener",1,"info-link",3,"href"],["class","info-icon","svgIcon","info-icon",4,"ngIf"],["class","link-caption",4,"ngIf"],["svgIcon","info-icon",1,"info-icon"],[1,"link-caption"]],template:function(y,T){1&y&&(i.\u0275\u0275elementStart(0,"div",0)(1,"a",1),i.\u0275\u0275template(2,Mh,1,0,"mat-icon",2)(3,wh,2,1,"span",3),i.\u0275\u0275elementEnd()()),2&y&&(i.\u0275\u0275advance(),i.\u0275\u0275propertyInterpolate("href",T.linkUrl,i.\u0275\u0275sanitizeUrl),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",T.showIcon),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",T.linkCaption))},dependencies:[ne.NgIf,$e.An],styles:[".info-link-wrap[_ngcontent-%COMP%]   .info-link[_ngcontent-%COMP%]{display:flex;text-decoration:none;color:#648cdd;outline:none;overflow:hidden;font-size:13px;font-family:Open Sans Light,sans-serif;align-items:center}.info-link-wrap[_ngcontent-%COMP%]   .info-link[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{margin:1px 8px 0}.info-link-wrap[_ngcontent-%COMP%]   .info-link[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]:hover{cursor:pointer}.info-link-wrap[_ngcontent-%COMP%]   .info-link[_ngcontent-%COMP%]   .link-caption[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})}}class mn{static{this.\u0275fac=function(y){return new(y||mn)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:mn})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[ne.CommonModule,$e.m_]})}}var xr=b(72831),Pc=b(38486),vs=b(96594),$n=b(37236),Nc=b(73793),Vo=b(4659);const Is=new i.InjectionToken("Represents the resize observer",{factory:()=>new Vo.A(U=>{window.requestAnimationFrame(()=>{U.forEach(m=>{const y={width:m.target?.clientWidth||m.contentRect.width,height:m.target?.clientHeight||m.contentRect.height};m.target.dispatchEvent(new CustomEvent("crt-resize",{detail:y}))})})}),providedIn:"root"});class Rr{set crtResizableDisabled(m){this._resizeDisabled$.next(m)}get resized(){const m=this._resized.asObservable().pipe((0,I.p)(Q=>this._isElementSizeValid(Q))),y=new B.BehaviorSubject(null),T=y.pipe((0,xr.n)(()=>m.pipe((0,Pc.s)(1)))),G=m.pipe((0,vs.s)(()=>(0,B.timer)(this.delay)),(0,$n.M)(()=>y.next()));return(0,B.merge)(T,G).pipe((0,Nc.F)((Q,Ie)=>this._isElementSizesEqual(Q,Ie)))}constructor(m,y){this.elementRef=m,this._resizeObserver=y,this._resized=new i.EventEmitter,this._destroyed$=new B.Subject,this._resizeDisabled$=new B.BehaviorSubject(!1),this.delay=200}_isElementSizeValid(m){return m&&m.width>0&&m.height>0}_isElementSizesEqual(m,y){return m.width===y.width&&m.height===y.height}ngOnInit(){this._nativeElement=this.elementRef?.nativeElement,this._nativeElement&&this._resizeDisabled$.pipe((0,Nc.F)(),(0,v.Q)(this._destroyed$)).subscribe(m=>{m?this._resizeObserver.unobserve(this._nativeElement):this._resizeObserver.observe(this._nativeElement)})}onResized(m){this._resizeDisabled$.value||this._resized.emit(m?.detail)}ngOnDestroy(){this._nativeElement&&this._resizeObserver.unobserve(this._nativeElement),this._destroyed$.next(),this._destroyed$.complete()}static{this.\u0275fac=function(y){return new(y||Rr)(i.\u0275\u0275directiveInject(i.ElementRef),i.\u0275\u0275directiveInject(Is))}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:Rr,selectors:[["","crtResizable",""]],hostBindings:function(y,T){1&y&&i.\u0275\u0275listener("crt-resize",function(Q){return T.onResized(Q)})},inputs:{delay:"delay",crtResizableDisabled:"crtResizableDisabled"},outputs:{resized:"resized"},standalone:!0})}}var Pr=b(13169);class Ts{constructor(){this._directionality=(0,i.inject)(Pn.dS),this.loadingText="SkeletonLoader.Loading",this.documentDirection=this._directionality?.value,this.animation="progress",this.appearance="line",this.count=1,this.styles={}}set ariaLabel(m){this.loadingText=m??this.loadingText}ngOnInit(){this.documentDirection="rtl"===this._directionality?.value?"rtl":null}static{this.\u0275fac=function(y){return new(y||Ts)}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:Ts,selectors:[["crt-skeleton-loader"]],inputs:{animation:"animation",appearance:"appearance",count:"count",styles:"styles",ariaLabel:"ariaLabel"},decls:3,vars:14,consts:[[1,"crt-skeleton-loader",3,"theme","appearance","count","ariaLabel","loadingText","animation"]],template:function(y,T){1&y&&(i.\u0275\u0275element(0,"ngx-skeleton-loader",0),i.\u0275\u0275pipe(1,"translate"),i.\u0275\u0275pipe(2,"translate")),2&y&&(i.\u0275\u0275styleProp("width",null==T.styles?null:T.styles.width),i.\u0275\u0275property("theme",T.styles)("appearance",T.appearance)("count",T.count)("ariaLabel",i.\u0275\u0275pipeBind1(1,10,T.loadingText))("loadingText",i.\u0275\u0275pipeBind1(2,12,T.loadingText))("animation",T.animation),i.\u0275\u0275attribute("appearance",T.appearance)("dir",T.documentDirection))},dependencies:[Pr.Zm,X.D9],styles:["[_nghost-%COMP%]{overflow:hidden;display:flex;width:100%}[_nghost-%COMP%]   .crt-skeleton-loader[_ngcontent-%COMP%]{display:block;min-width:0;flex:auto;width:200px}[_nghost-%COMP%]   .crt-skeleton-loader[appearance=circle][_ngcontent-%COMP%]{width:50px}"]})}}const Or={"hr-HR":JSON.parse('{"SkeletonLoader":{"Loading":"U\u010ditavanje..."},"CopyClipboard":{"Copied":"Kopirano"},"Placeholder":{"Default":{"Title":"Jo\u0161 ni\u0161ta za prikazati ","Subhead":"Molim prvo dodajte podatke"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Razgovor zapo\u010det: {0} od strane","EndDate":"Razgovor zavr\u0161en: {0} od strane"}}},"MaskLoader":{"Loading":"U\u010ditavanje"},"Tooltip":{"Mode":{"Error":"Error","Default":"Tooltip"}}}'),"hu-HU":JSON.parse('{"SkeletonLoader":{"Loading":"Bet\xf6lt\xe9s..."},"CopyClipboard":{"Copied":"M\xe1solva"},"Placeholder":{"Default":{"Title":"M\xe9g nincs mit mutatni","Subhead":"K\xe9rj\xfck, el\u0151sz\xf6r adja meg az adatokat"}},"ChatSettings":{"History":{"Captions":{"StartDate":"A cseveg\xe9s kezdete: {0}","EndDate":"A cseveg\xe9s befejez\u0151d\xf6tt: {0}"}}},"MaskLoader":{"Loading":"Bet\xf6lt\xe9s"},"Tooltip":{"Mode":{"Error":"Error","Default":"Tooltip"}}}'),"zh-CN":JSON.parse('{"SkeletonLoader":{"Loading":"\u52a0\u8f7d\u4e2d..."},"CopyClipboard":{"Copied":"\u5df2\u590d\u5236"},"Placeholder":{"Default":{"Title":"\u8fd8\u6ca1\u6709\u8981\u663e\u793a\u7684\u5185\u5bb9 ","Subhead":"\u8bf7\u5148\u6dfb\u52a0\u6570\u636e"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Chat started: {0} by","EndDate":"Chat completed: {0} by"}}},"MaskLoader":{"Loading":"Loading"},"Tooltip":{"Mode":{"Error":"Error","Default":"Tooltip"}}}'),"uk-UA":JSON.parse('{"SkeletonLoader":{"Loading":"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."},"CopyClipboard":{"Copied":"\u0421\u043a\u043e\u043f\u0456\u0439\u043e\u0432\u0430\u043d\u043e"},"Placeholder":{"Default":{"Title":"\u041d\u0435\u043c\u0430\u0454 \u0449\u043e \u043f\u043e\u043a\u0430\u0437\u0443\u0432\u0430\u0442\u0438 ","Subhead":"\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0441\u043f\u043e\u0447\u0430\u0442\u043a\u0443 \u0434\u043e\u0434\u0430\u0439\u0442\u0435 \u0434\u0430\u043d\u0456"}},"ChatSettings":{"History":{"Captions":{"StartDate":"\u0427\u0430\u0442 \u0440\u043e\u0437\u043f\u043e\u0447\u0430\u0442\u043e: {0} ","EndDate":"\u0427\u0430\u0442 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e: {0} "}}},"MaskLoader":{"Loading":"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f"},"Tooltip":{"Mode":{"Error":"\u041f\u043e\u043c\u0438\u043b\u043a\u0430","Default":"\u041f\u0456\u0434\u043a\u0430\u0437\u043a\u0430"}}}'),"sq-AL":JSON.parse('{"SkeletonLoader":{"Loading":"Duke u ngarkuar..."},"CopyClipboard":{"Copied":"Kopjo"},"Placeholder":{"Default":{"Title":"Ende asgj\xeb p\xebr t\xeb treguar ","Subhead":"T\xeb lutem shto s\xeb pari t\xeb dh\xebnat"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Fillimi i bised\xebs: {0} nga","EndDate":"P\xebrfundimi i bised\xebs: {0} nga"}}},"MaskLoader":{"Loading":"Loading"},"Tooltip":{"Mode":{"Error":"Error","Default":"Tooltip"}}}'),"en-GB":JSON.parse('{"SkeletonLoader":{"Loading":"Loading..."},"CopyClipboard":{"Copied":"Copied"},"MaskLoader":{"Loading":"Loading"}}'),"bg-BG":JSON.parse('{"SkeletonLoader":{"Loading":"\u0417\u0430\u0440\u0435\u0436\u0434\u0430\u043d\u0435..."},"CopyClipboard":{"Copied":"\u041a\u043e\u043f\u0438\u0440\u0430\u043d\u043e"},"Placeholder":{"Default":{"Title":"\u041e\u0449\u0435 \u043d\u044f\u043c\u0430 \u043d\u0438\u0449\u043e \u0437\u0430 \u043f\u043e\u043a\u0430\u0437\u0432\u0430\u043d\u0435 ","Subhead":"\u041c\u043e\u043b\u044f, \u043f\u044a\u0440\u0432\u043e \u0434\u043e\u0431\u0430\u0432\u0438 \u0434\u0430\u043d\u043d\u0438"}},"ChatSettings":{"History":{"Captions":{"StartDate":"\u0427\u0430\u0442\u044a\u0442 \u0437\u0430\u043f\u043e\u0447\u043d\u0430: {0} \u043e\u0442","EndDate":"\u0427\u0430\u0442\u044a\u0442 \u0435 \u0437\u0430\u0432\u044a\u0440\u0448\u0435\u043d: {0} \u043e\u0442"}}},"MaskLoader":{"Loading":"\u0417\u0430\u0440\u0435\u0436\u0434\u0430\u043d\u0435"},"Tooltip":{"Mode":{"Error":"\u0413\u0440\u0435\u0448\u043a\u0430","Default":"\u041f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0430"}}}'),"zh-TW":JSON.parse('{"SkeletonLoader":{"Loading":"\u8f09\u5165\u4e2d..."},"CopyClipboard":{"Copied":"\u5df2\u8907\u88fd"},"Placeholder":{"Default":{"Title":"\u8fd8\u6ca1\u6709\u8981\u663e\u793a\u7684\u5185\u5bb9 ","Subhead":"\u8acb\u5148\u65b0\u589e\u8cc7\u6599"}},"ChatSettings":{"History":{"Captions":{"StartDate":"\u804a\u5929\u5f9e: {0} \u958b\u59cb","EndDate":"\u804a\u5929\u7531: {0} \u7d50\u675f"}}},"MaskLoader":{"Loading":"\u8f09\u5165\u4e2d"},"Tooltip":{"Mode":{"Error":"Error","Default":"Tooltip"}}}'),"no-NO":JSON.parse('{"SkeletonLoader":{"Loading":"Laster..."},"CopyClipboard":{"Copied":"Kopiert"}}'),"ko-KR":JSON.parse('{"SkeletonLoader":{"Loading":"\ub85c\ub4dc \uc911..."},"CopyClipboard":{"Copied":"\ubcf5\uc0ac\ub428"},"Placeholder":{"Default":{"Title":"\uc544\uc9c1 \ubcf4\uc5ec\uc904 \uac74 \uc5c6\uc5b4\uc694 ","Subhead":"\uba3c\uc800 \ub370\uc774\ud130\ub97c \ucd94\uac00\ud558\uc2ed\uc2dc\uc624"}},"ChatSettings":{"History":{"Captions":{"StartDate":"\ucc44\ud305 \uc2dc\uc791: {0}","EndDate":"\ucc44\ud305 \uc644\ub8cc: {0} "}}},"MaskLoader":{"Loading":"Loading"},"Tooltip":{"Mode":{"Error":"Error","Default":"Tooltip"}}}'),"ja-JP":JSON.parse('{"SkeletonLoader":{"Loading":"\u8aad\u307f\u8fbc\u307f\u4e2d.."},"CopyClipboard":{"Copied":"\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f"},"Placeholder":{"Default":{"Title":"\u8868\u793a\u3059\u308b\u3082\u306e\u304c\u3042\u308a\u307e\u305b\u3093 ","Subhead":"\u30c7\u30fc\u30bf\u3092\u8ffd\u52a0\u3057\u3066\u304f\u3060\u3055\u3044"}},"ChatSettings":{"History":{"Captions":{"StartDate":"\u30c1\u30e3\u30c3\u30c8\u958b\u59cb: {0}","EndDate":"\u30c1\u30e3\u30c3\u30c8\u5b8c\u4e86: {0}"}}},"MaskLoader":{"Loading":"\u8aad\u307f\u8fbc\u307f\u4e2d"},"Tooltip":{"Mode":{"Error":"Error","Default":"Tooltip"}}}'),"fr-CA":JSON.parse('{"SkeletonLoader":{"Loading":"En cours de chargement..."},"CopyClipboard":{"Copied":"Copied"}}'),zh:JSON.parse('{"SkeletonLoader":{"Loading":"Loading..."},"CopyClipboard":{"Copied":"Copied"}}'),"vi-VN":JSON.parse('{"SkeletonLoader":{"Loading":"\u0110ang t\u1ea3i..."},"CopyClipboard":{"Copied":"Copied"},"Placeholder":{"Default":{"Title":"Nothing to show yet ","Subhead":"Please add data first"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Chat started: {0} by","EndDate":"Chat completed: {0} by"}}},"MaskLoader":{"Loading":"Loading"},"Tooltip":{"Mode":{"Error":"Error","Default":"Tooltip"}}}'),"tr-TR":JSON.parse('{"SkeletonLoader":{"Loading":"Y\xfckleniyor..."},"CopyClipboard":{"Copied":"Kopyalanm\u0131\u015f"},"Placeholder":{"Default":{"Title":"Hen\xfcz g\xf6sterilecek bir \u015fey yok","Subhead":"L\xfctfen \xf6nce veri ekleyin"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Sohbet ba\u015flad\u0131: {0}","EndDate":"Sohbet tamamland\u0131: {0}"}}},"MaskLoader":{"Loading":"Y\xfckleme"},"Tooltip":{"Mode":{"Error":"Error","Default":"Tooltip"}}}'),"th-TH":JSON.parse('{"SkeletonLoader":{"Loading":"\u0e01\u0e32\u0e23\u0e42\u0e2b\u0e25\u0e14..."},"CopyClipboard":{"Copied":"Copied"},"Placeholder":{"Default":{"Title":"Nothing to show yet ","Subhead":"Please add data first"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Chat started: {0} by","EndDate":"Chat completed: {0} by"}}},"MaskLoader":{"Loading":"Loading"},"Tooltip":{"Mode":{"Error":"Error","Default":"Tooltip"}}}'),"sv-SE":JSON.parse('{"SkeletonLoader":{"Loading":"Laddar..."},"CopyClipboard":{"Copied":"Copied"},"Placeholder":{"Default":{"Title":"Nothing to show yet ","Subhead":"Please add data first"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Chat started: {0} by","EndDate":"Chat completed: {0} by"}}},"MaskLoader":{"Loading":"Laddar"},"Tooltip":{"Mode":{"Error":"Error","Default":"Tooltip"}}}'),"ro-RO":JSON.parse('{"SkeletonLoader":{"Loading":"Incarcare..."},"CopyClipboard":{"Copied":"Copiat"},"Placeholder":{"Default":{"Title":"Nimic de afi\u0219at \xeenc\u0103 ","Subhead":"V\u0103 rug\u0103m s\u0103 ad\u0103uga\u021bi mai \xeent\xe2i date"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Chat \xeenceput: {0} de","EndDate":"Chat completat: {0} de"}}},"MaskLoader":{"Loading":"\xcenc\u0103rcare"},"Tooltip":{"Mode":{"Error":"Eroare","Default":"Tooltip"}}}'),"pt-PT":JSON.parse('{"SkeletonLoader":{"Loading":"Carregando..."},"CopyClipboard":{"Copied":"Copiado"},"Placeholder":{"Default":{"Title":"Ainda n\xe3o h\xe1 nada para mostrar ","Subhead":"Please add data first"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Chat started: {0} by","EndDate":"Chat completed: {0} by"}}},"MaskLoader":{"Loading":"Carregando"},"Tooltip":{"Mode":{"Error":"Error","Default":"Tooltip"}}}'),"pt-BR":JSON.parse('{"SkeletonLoader":{"Loading":"Carregando..."},"CopyClipboard":{"Copied":"Copiado"},"Placeholder":{"Default":{"Title":"Nada a ser exibido ainda ","Subhead":"Favor, adicionar primeiro os dados"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Chat iniciado: {0} por","EndDate":"Chat conclu\xeddo: {0} por"}}},"MaskLoader":{"Loading":"Carregando"},"Tooltip":{"Mode":{"Error":"Erro","Default":"Dicas das ferramentas"}}}'),"pl-PL":JSON.parse('{"SkeletonLoader":{"Loading":"\u0141adowanie..."},"CopyClipboard":{"Copied":"Skopiowano"},"Placeholder":{"Default":{"Title":"Nie ma jeszcze nic do wy\u015bwietlenia ","Subhead":"Prosz\u0119 najpierw doda\u0107 dane"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Rozpocz\u0119to czat: {0} przez","EndDate":"Czat zako\u0144czony: {0} przez"}}},"MaskLoader":{"Loading":"\u0141adowanie"},"Tooltip":{"Mode":{"Error":"B\u0142\u0105d","Default":"Podpowied\u017a"}}}'),no:JSON.parse('{"SkeletonLoader":{"Loading":"Loading..."},"CopyClipboard":{"Copied":"Copied"}}'),"nl-NL":JSON.parse('{"SkeletonLoader":{"Loading":"Laden..."},"CopyClipboard":{"Copied":"Gekopieerd"},"Placeholder":{"Default":{"Title":"Nog niets te tonen","Subhead":"Voeg alsjeblieft eerst gegevens toe"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Chat gestart: {0} door","EndDate":"Chat voltooid: {0} door"}}},"MaskLoader":{"Loading":"Aan het laden"},"Tooltip":{"Mode":{"Error":"Fout","Default":"Tooltip"}}}'),"lv-LV":JSON.parse('{"SkeletonLoader":{"Loading":"Iel\u0101de..."},"CopyClipboard":{"Copied":"Kop\u0113ts"},"Placeholder":{"Default":{"Title":"Pagaid\u0101m nekas nav par\u0101d\u012bts ","Subhead":"L\u016bdzu, pievienojiet datus vispirms"}},"ChatSettings":{"History":{"Captions":{"StartDate":"T\u0113rz\u0113\u0161ana s\u0101k\u0101s: {0} p\u0113c","EndDate":"T\u0113rz\u0113\u0161ana pabeigta {0} ar"}}},"MaskLoader":{"Loading":"Iel\u0101de"},"Tooltip":{"Mode":{"Error":"K\u013c\u016bda","Default":"R\u012bkjosla"}}}'),"kk-KZ":JSON.parse('{"SkeletonLoader":{"Loading":"Loading..."},"CopyClipboard":{"Copied":"Copied"}}'),"it-IT":JSON.parse('{"SkeletonLoader":{"Loading":"In caricamento..."},"CopyClipboard":{"Copied":"Copiato"},"Placeholder":{"Default":{"Title":"Niente da mostrare ancora ","Subhead":"Si prega di aggiungere i dati prima"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Chat iniziata: {0} da","EndDate":"Chat completata: {0} da"}}},"MaskLoader":{"Loading":"In caricamento"},"Tooltip":{"Mode":{"Error":"Error","Default":"Tooltip"}}}'),"id-ID":JSON.parse('{"SkeletonLoader":{"Loading":"Memuat..."},"CopyClipboard":{"Copied":"Disalin"},"Placeholder":{"Default":{"Title":"Belum ada yang bisa ditampilkan ","Subhead":"Silakan tambahkan data terlebih dahulu"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Obrolan dimulai: {0} oleh","EndDate":"Obrolan selesai: {0} oleh"}}},"MaskLoader":{"Loading":"Loading"},"Tooltip":{"Mode":{"Error":"Error","Default":"Tooltip"}}}'),"he-IL":JSON.parse('{"SkeletonLoader":{"Loading":"\u05d8\u05d5\u05e2\u05df..."},"CopyClipboard":{"Copied":"\u05d4\u05d5\u05e2\u05ea\u05e7"},"Placeholder":{"Default":{"Title":"Nothing to show yet ","Subhead":"Please add data first"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Chat started: {0} by","EndDate":"Chat completed: {0} by"}}},"MaskLoader":{"Loading":"\u05d8\u05d5\u05e2\u05df"},"Tooltip":{"Mode":{"Error":"\u05e9\u05d2\u05d9\u05d0\u05d4","Default":"\u05d4\u05e1\u05d1\u05e8"}}}'),"fr-FR":JSON.parse('{"SkeletonLoader":{"Loading":"En cours de chargement..."},"CopyClipboard":{"Copied":"Copi\xe9"},"Placeholder":{"Default":{"Title":"Rien \xe0 afficher pour l\'instant ","Subhead":"Veuillez d\'abord ajouter des donn\xe9es"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Chat d\xe9marr\xe9: {0} par","EndDate":"Chat termin\xe9: {0} par"}}},"MaskLoader":{"Loading":"En cours de chargement"},"Tooltip":{"Mode":{"Error":"Erreur","Default":"Info-bulle"}}}'),"fa-IR":JSON.parse('{"SkeletonLoader":{"Loading":"Loading..."},"CopyClipboard":{"Copied":"Copied"}}'),"es-ES":JSON.parse('{"SkeletonLoader":{"Loading":"Cargando..."},"CopyClipboard":{"Copied":"Copiado"},"Placeholder":{"Default":{"Title":"Nada que mostrar a\xfan ","Subhead":"Por favor a\xf1ada primero datos"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Chat iniciado: {0} por","EndDate":"Chat completado: {0} por"}}},"MaskLoader":{"Loading":"Cargando"},"Tooltip":{"Mode":{"Error":"Error","Default":"Sugerencia"}}}'),"de-DE":JSON.parse('{"SkeletonLoader":{"Loading":"Ladevorgang"},"CopyClipboard":{"Copied":"Kopiert"},"Placeholder":{"Default":{"Title":"Noch nichts anzuzeigen ","Subhead":"Bitte zuerst Daten hinzuf\xfcgen"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Chat gestartet: {0} von","EndDate":"Chat abgeschlossen {0} von"}}},"MaskLoader":{"Loading":"L\xe4dt"},"Tooltip":{"Mode":{"Error":"Fehler","Default":"Tooltip"}}}'),"cs-CZ":JSON.parse('{"SkeletonLoader":{"Loading":"Na\u010d\xedt\xe1n\xed..."},"CopyClipboard":{"Copied":"Copied"},"Placeholder":{"Default":{"Title":"Nothing to show yet ","Subhead":"Please add data first"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Chat started: {0} by","EndDate":"Chat completed: {0} by"}}},"MaskLoader":{"Loading":"Na\u010d\xedt\xe1n\xed"},"Tooltip":{"Mode":{"Error":"Error","Default":"Tooltip"}}}'),"ar-SA":JSON.parse('{"SkeletonLoader":{"Loading":"\u062a\u062d\u0645\u064a\u0644..."},"CopyClipboard":{"Copied":"\u0645\u0646\u0633\u0648\u062e"},"Placeholder":{"Default":{"Title":"\u0644\u0627 \u064a\u0648\u062c\u062f \u0634\u064a\u0621 \u0644\u0625\u0638\u0647\u0627\u0631\u0647 \u062d\u062a\u0649 \u0627\u0644\u0622\u0646 ","Subhead":"\u064a\u0631\u062c\u0649 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u062a\u0627\u0644\u064a\u0629 \u0623\u0648\u0644\u064b\u0627"}},"ChatSettings":{"History":{"Captions":{"StartDate":"\u0628\u062f\u0623\u062a \u0627\u0644\u062f\u0631\u062f\u0634\u0629: {0} \u0628\u0648\u0627\u0633\u0637\u0629","EndDate":"\u0627\u0643\u062a\u0645\u0644\u062a \u0627\u0644\u062f\u0631\u062f\u0634\u0629: {0} \u0628\u0648\u0627\u0633\u0637\u0629"}}},"MaskLoader":{"Loading":"Loading"},"Tooltip":{"Mode":{"Error":"Error","Default":"Tooltip"}}}'),"en-US":JSON.parse('{"SkeletonLoader":{"Loading":"Loading..."},"CopyClipboard":{"Copied":"Copied"},"Placeholder":{"Default":{"Title":"Nothing to show yet ","Subhead":"Please add data first"}},"ChatSettings":{"History":{"Captions":{"StartDate":"Chat started: {0} by","EndDate":"Chat completed: {0} by"}}},"MaskLoader":{"Loading":"Loading"},"Tooltip":{"Mode":{"Error":"Error","Default":"Tooltip"}}}'),"ru-RU":JSON.parse('{"SkeletonLoader":{"Loading":"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."},"CopyClipboard":{"Copied":"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043e"},"Placeholder":{"Default":{"Title":"\u0417\u0434\u0435\u0441\u044c \u0435\u0449\u0435 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435\u0442","Subhead":"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0438 \u043d\u0430\u0447\u0438\u043d\u0430\u0439\u0442\u0435 \u0440\u0430\u0431\u043e\u0442\u0443"}},"History":{"Captions":{"StartDate":"\u0427\u0430\u0442 \u043d\u0430\u0447\u0430\u0442: {0}, ","EndDate":"\u0427\u0430\u0442 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d: {0}, "}},"MaskLoader":{"Loading":"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"},"Tooltip":{"Mode":{"Error":"\u041e\u0448\u0438\u0431\u043a\u0430","Default":"\u041f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0430"}}}')};var xs=b(81960);class Be{static init(m){const{injector:y,tag:T,component:G}=m;if(customElements.get(T))return;const Q=(0,xs.createCustomElement)(G,{injector:y});customElements.define(T,Q)}}b(24961);class Ai{constructor(m){this.injector=m;const y={injector:this.injector,tag:"crt-web-element-skeleton-loader",component:Ts};Be.init(y)}static{this.\u0275fac=function(y){return new(y||Ai)(i.\u0275\u0275inject(i.Injector))}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:Ai})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[Pr.Yq,It.h1.forRoot({i18n:Or})]})}}var Vr=b(62441);function Ge(U){return()=>b(34645)(`./${U}.json`)}var Ye=b(38841);function Ri(U,m){if(1&U){const y=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"ng-lottie",1),i.\u0275\u0275listener("animationCreated",function(G){i.\u0275\u0275restoreView(y);const Q=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(Q.onAnimationCreated(G))})("click",function(){i.\u0275\u0275restoreView(y);const G=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(G.onClick())}),i.\u0275\u0275elementEnd()}if(2&U){const y=i.\u0275\u0275nextContext();i.\u0275\u0275property("options",y.options)("width",y.width)("height",y.height)}}class la{set config(m){this._setConfig(m).then()}constructor(m,y){this._changeDetectorRef=m,this._ngZone=y,this.options=null,this.width="100px",this.height="100px"}_setConfig(m){var y=this;return(0,_e.A)(function*(){const T=yield m.animationData();y.options={animationData:T,loop:m.loop,autoplay:m.autoplay},y._changeDetectorRef.markForCheck()})()}onAnimationCreated(m){this._animationItem=m}onClick(){this._ngZone.runOutsideAngular(()=>{this._animationItem.stop(),this._animationItem.play()})}static{this.\u0275fac=function(y){return new(y||la)(i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(i.NgZone))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:la,selectors:[["crt-lottie"]],inputs:{width:"width",height:"height",config:"config"},decls:1,vars:1,consts:[["class","lottie-animation",3,"options","width","height","animationCreated","click",4,"ngIf"],[1,"lottie-animation",3,"animationCreated","click","options","width","height"]],template:function(y,T){1&y&&i.\u0275\u0275template(0,Ri,1,3,"ng-lottie",0),2&y&&i.\u0275\u0275property("ngIf",T.options)},dependencies:[ne.NgIf,Ye.xm],styles:[".lottie-animation[_ngcontent-%COMP%]{cursor:pointer}"],changeDetection:0})}}const As=["*",[["","items",""]]],He=["*","[items]"];function za(U,m){if(1&U&&(i.\u0275\u0275elementStart(0,"div",6),i.\u0275\u0275element(1,"mat-icon",7),i.\u0275\u0275elementEnd()),2&U){const y=i.\u0275\u0275nextContext();i.\u0275\u0275advance(),i.\u0275\u0275styleProp("width",y.iconConfig.width)("height",y.iconConfig.height)("color",y.iconConfig.color)("padding",y.iconConfig.padding),i.\u0275\u0275property("crtTooltip",y.iconConfig.tooltip)("svgIcon",y.iconConfig.icon)}}function ca(U,m){if(1&U&&(i.\u0275\u0275elementStart(0,"div",8),i.\u0275\u0275element(1,"crt-lottie",9),i.\u0275\u0275elementEnd()),2&U){const y=i.\u0275\u0275nextContext();i.\u0275\u0275advance(),i.\u0275\u0275property("config",y.animationConfig)("width",y.animationConfig.width)("height",y.animationConfig.height)}}function Pi(U,m){if(1&U&&(i.\u0275\u0275elementStart(0,"div",10),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"translate"),i.\u0275\u0275elementEnd()),2&U){const y=i.\u0275\u0275nextContext();i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(2,1,y.title))}}function Lr(U,m){if(1&U&&(i.\u0275\u0275elementStart(0,"div",11),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"translate"),i.\u0275\u0275elementEnd()),2&U){const y=i.\u0275\u0275nextContext();i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(2,1,y.subhead))}}let Zn=class Gy{get animationConfig(){return this._image}get iconConfig(){return this._image}get withCustomSize(){return"icon"===this._image?.type?!(!this._image.height&&!this._image.width):"animation"===this._image?.type&&!(!this._image?.height&&!this._image?.width)}set image(m){this._imageConfigChanging$.next(),this._image=this._normalizeImage(m)}get image(){return this._image}constructor(){this._destroyed$=new B.Subject,this._imageConfigChanging$=new B.Subject,this._defaultIconConfig={type:"icon",width:"100px",height:"100px",padding:"25px"},this._defaultAnimationConfig={type:"animation",width:"100px",height:"100px",name:"raccoon",autoplay:!0,loop:!1},this._image={},this.title="Placeholder.Default.Title",this.subhead="Placeholder.Default.Subhead",this.image=this._defaultAnimationConfig}_normalizeImage(m){if(!m||(0,Vr.A)(m))return{};if("icon"===m.type)return{...this._defaultIconConfig,...m};const T="name"in m&&!("animationData"in m);return"animation"===m?.type&&T?{...this._defaultAnimationConfig,...m,animationData:Ge(m.name)}:{...this._defaultAnimationConfig,...m}}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}static{this.\u0275fac=function(y){return new(y||Gy)}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:Gy,selectors:[["crt-placeholder"]],inputs:{loading:"loading",title:"title",subhead:"subhead",image:"image"},ngContentSelectors:He,decls:8,vars:7,consts:[[1,"crt-placeholder"],[3,"ngSwitch"],["class","crt-placeholder__icon",4,"ngSwitchCase"],["class","crt-placeholder__animation",4,"ngSwitchCase"],["class","crt-placeholder__title",4,"ngIf"],["class","crt-placeholder__subhead",4,"ngIf"],[1,"crt-placeholder__icon"],["crtTooltip","",1,"icon",3,"crtTooltip","svgIcon"],[1,"crt-placeholder__animation"],[3,"config","width","height"],[1,"crt-placeholder__title"],[1,"crt-placeholder__subhead"]],template:function(y,T){1&y&&(i.\u0275\u0275projectionDef(As),i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275elementContainerStart(1,1),i.\u0275\u0275template(2,za,2,10,"div",2)(3,ca,2,3,"div",3),i.\u0275\u0275elementContainerEnd(),i.\u0275\u0275template(4,Pi,3,3,"div",4)(5,Lr,3,3,"div",5),i.\u0275\u0275projection(6),i.\u0275\u0275projection(7,1),i.\u0275\u0275elementEnd()),2&y&&(i.\u0275\u0275classProp("crt-placeholder\u2013with-custom-size",T.withCustomSize),i.\u0275\u0275advance(),i.\u0275\u0275property("ngSwitch",T.image.type),i.\u0275\u0275advance(),i.\u0275\u0275property("ngSwitchCase","icon"),i.\u0275\u0275advance(),i.\u0275\u0275property("ngSwitchCase","animation"),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",T.title),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",T.subhead))},dependencies:[ne.NgIf,ne.NgSwitch,ne.NgSwitchCase,$e.An,wr.d,la,X.D9],styles:['@charset "UTF-8";.crt-placeholder[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;align-items:center;justify-content:center;border-radius:8px;flex-direction:column;padding:0 24px;box-sizing:border-box;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.crt-placeholder[_ngcontent-%COMP%]:not(.crt-placeholder\\2013with-custom-size)   .icon[_ngcontent-%COMP%]{height:100%;max-height:50px;width:56px}.crt-placeholder__icon[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{align-self:center;overflow:hidden;box-sizing:border-box;display:flex;align-items:center;justify-content:center}@supports (background: -webkit-named-image(i)){.crt-placeholder__icon[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:block}}.crt-placeholder__animation[_ngcontent-%COMP%] + div[_ngcontent-%COMP%], .crt-placeholder__icon[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{margin-top:8px}.crt-placeholder__title[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{margin-top:16px}.crt-placeholder__title[_ngcontent-%COMP%], .crt-placeholder__subhead[_ngcontent-%COMP%]{white-space:pre-wrap;text-align:center}@supports (background: -webkit-named-image(i)){.crt-placeholder[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:initial;height:initial}}'],changeDetection:0})}};(0,x.Cg)([(0,M.CrtInput)(),(0,x.Sn)("design:type",Boolean)],Zn.prototype,"loading",void 0),(0,x.Cg)([(0,M.CrtInput)(),(0,x.Sn)("design:type",Object)],Zn.prototype,"title",void 0),(0,x.Cg)([(0,M.CrtInput)(),(0,x.Sn)("design:type",Object)],Zn.prototype,"subhead",void 0),(0,x.Cg)([(0,M.CrtInput)(),(0,x.Sn)("design:type",Object),(0,x.Sn)("design:paramtypes",[Object])],Zn.prototype,"image",null),Zn=(0,x.Cg)([(0,M.CrtViewElement)({type:"crt.Placeholder",reuseStrategy:M.ViewElementReuseStrategy.Reuse,contentSlots:["items"]}),(0,x.Sn)("design:paramtypes",[])],Zn);class Rs{static{this.\u0275fac=function(y){return new(y||Rs)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:Rs})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[ne.CommonModule,Ye.u7.forRoot({player:()=>b.e(591).then(b.t.bind(b,35591,23))})]})}}let Fr=class Uy{constructor(m){this._iconRegistry=m,this._iconRegistry.addIcons([{name:"empty-search-result",icon:b(95063)}])}static{this.\u0275fac=function(y){return new(y||Uy)(i.\u0275\u0275inject(ot))}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:Uy})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[ne.CommonModule,$e.m_,pn,Rs,X.h]})}};Fr=(0,x.Cg)([(0,M.CrtModule)({viewElements:[Zn]}),(0,x.Sn)("design:paramtypes",[ot])],Fr);class kr{static{this.\u0275fac=function(y){return new(y||kr)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:kr})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[ne.CommonModule,c.YN,it.mz,je.KR]})}}const Jn=["inputElement"];function Qe(U,m){if(1&U){const y=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"span",6),i.\u0275\u0275listener("click",function(G){i.\u0275\u0275restoreView(y);const Q=i.\u0275\u0275nextContext(),Ie=i.\u0275\u0275reference(2);return i.\u0275\u0275resetView(Q.onInputElementSelectClick(G,Ie))}),i.\u0275\u0275elementEnd()}}function Oc(U,m){if(1&U&&(i.\u0275\u0275elementStart(0,"mat-option",7)(1,"span"),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()()),2&U){const y=m.$implicit;i.\u0275\u0275property("value",y.name),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(y.name)}}class ua{constructor(m,y,T){this.ngControl=m,this.autofillMonitor=y,this.focusMonitor=T,this.inputElementValue=new B.BehaviorSubject(""),this.destroy=new B.Subject,this.inputElementSelected=new i.EventEmitter,this.showDropdownArrow=!1,this.stateChanges=new B.Subject,this.inputElements=[],this.inputElements$=new B.BehaviorSubject([]),this.autofilled=!1,this.onTouched=()=>{},m&&(this.ngControl.valueAccessor=this)}set inputElementsInfo(m){this.inputElementsInfoValue={...m},m&&m.inputElements&&this.initInputElementControl()}get inputElementsInfo(){return this.inputElementsInfoValue}get disabled(){return this.disabledElementValue}set disabled(m){this.disabledElementValue=(0,F.he)(m),this.stateChanges.next()}get placeholder(){return this.elementPlaceholderValue}set placeholder(m){this.elementPlaceholderValue=this.originalPlaceholder=m,this.stateChanges.next()}get required(){return this.requiredElementValue}set required(m){this.requiredElementValue=(0,F.he)(m),this.stateChanges.next()}get value(){return this.inputElementActually}set value(m){switch(this.inputElementValue.next(m),this.stateChanges.next(),!0){case this.inputElements.some(y=>y.name===m):this.inputElementActually=m,this.onInputElementSelected();break;case""===m:this.elementPlaceholderValue=this.originalPlaceholder;break;default:this.elementPlaceholderValue=""}}get empty(){return!(this.autofilled||this.value&&0!==this.value.length)}get focused(){return this.focusedElementValue}set focused(m){this.focusedElementValue=m,this.stateChanges.next()}filterInputElementsValues(m){m?this.inputElements$.next(this.inputElements.filter(y=>y.name.toLowerCase().startsWith(m.toLowerCase()))):this.inputElements$.next(this.inputElements.slice())}initInputElementControl(){this.inputElementsInfoValue.inputElements=Object.entries(this.inputElementsInfoValue.inputElements).map(([m,y])=>({id:m,name:y})),this.prepareInputElementsList(this.inputElementsInfoValue),this.inputElements=this.inputElementsInfoValue.inputElements,this.inputElementValue.pipe((0,R.Z)("")).subscribe(m=>{this.filterInputElementsValues(m)})}prepareInputElementsList(m){if(m.inputElements.sort((y,T)=>y.name.localeCompare(T.name)),m.defaultInputElementId){const y=m.inputElements.find(T=>T.id===m.defaultInputElementId);m.inputElements.splice(m.inputElements.indexOf(y),1),m.inputElements.unshift(y)}}ngDoCheck(){this.ngControl&&(this.errorState=this.ngControl.invalid&&this.ngControl.touched,this.stateChanges.next())}writeValue(m){this.inputElementValue.next(m)}registerOnChange(m){this.inputElementValue.pipe((0,v.Q)(this.destroy)).subscribe(y=>{m(y)})}registerOnTouched(m){this.onTouched=m}setDescribedByIds(m){}onContainerClick(m){"input"!==m.target.tagName.toLowerCase()&&this.focusMonitor.focusVia(this.inputElElementRef.nativeElement,"mouse")}ngAfterViewInit(){this.focusMonitor.monitor(this.inputElElementRef.nativeElement,!0).subscribe(m=>{this.focused=!!m,!this.focused&&this.inputElementValue.value&&this.onInputElementSelected()}),this.autofillMonitor.monitor(this.inputElElementRef).pipe((0,W.T)(m=>m.isAutofilled),(0,z.$)(m=>m),(0,R.Z)(!1),(0,v.Q)(this.destroy)).subscribe(m=>this.autofilled=m)}ngOnDestroy(){this.destroy.next(),this.destroy.complete()}onInputElementSelected(){this.ngControl.control.markAsTouched();const m=this.inputElements.find(y=>y.name===this.inputElementValue.value);m?this.inputElementSelected.emit(m.id):this.inputElementSelected.emit("")}onInputElementSelectClick(m,y){m.stopPropagation(),y.panelOpen?y.closePanel():y.openPanel()}static{this.\u0275fac=function(y){return new(y||ua)(i.\u0275\u0275directiveInject(c.vO,10),i.\u0275\u0275directiveInject(_.P8),i.\u0275\u0275directiveInject(A.FN))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:ua,selectors:[["ts-dropdown-input-picker"]],viewQuery:function(y,T){if(1&y&&i.\u0275\u0275viewQuery(Jn,5,i.ElementRef),2&y){let G;i.\u0275\u0275queryRefresh(G=i.\u0275\u0275loadQuery())&&(T.inputElElementRef=G.first)}},hostBindings:function(y,T){1&y&&i.\u0275\u0275listener("focusout",function(){return T.onTouched()})},inputs:{inputElementsInfo:"inputElementsInfo",showDropdownArrow:"showDropdownArrow",disabled:"disabled",placeholder:"placeholder",required:"required",value:"value"},outputs:{inputElementSelected:"inputElementSelected"},features:[i.\u0275\u0275ProvidersFeature([{provide:me.qT,useExisting:ua}])],decls:8,vars:8,consts:[["inputElement","","trigger","matAutocompleteTrigger"],["roleAutocomplete","matAutocomplete"],["matInput","","data-qa","input-role","name","new-role","id","role","autocomplete","new-role",3,"ngModelChange","ngModel","placeholder","matAutocomplete"],["class","arrow-country-icon",3,"click",4,"ngIf"],["autoActiveFirstOption","",3,"closed","panelWidth"],[3,"value",4,"ngFor","ngForOf"],[1,"arrow-country-icon",3,"click"],[3,"value"]],template:function(y,T){if(1&y){const G=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"input",2,0),i.\u0275\u0275twoWayListener("ngModelChange",function(Ie){return i.\u0275\u0275restoreView(G),i.\u0275\u0275twoWayBindingSet(T.value,Ie)||(T.value=Ie),i.\u0275\u0275resetView(Ie)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(3,Qe,1,0,"span",3),i.\u0275\u0275elementStart(4,"mat-autocomplete",4,1),i.\u0275\u0275listener("closed",function(){return i.\u0275\u0275restoreView(G),i.\u0275\u0275resetView(T.onInputElementSelected())}),i.\u0275\u0275template(6,Oc,3,2,"mat-option",5),i.\u0275\u0275pipe(7,"async"),i.\u0275\u0275elementEnd()}if(2&y){const G=i.\u0275\u0275reference(5);i.\u0275\u0275twoWayProperty("ngModel",T.value),i.\u0275\u0275property("placeholder",T.placeholder)("matAutocomplete",G),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",T.showDropdownArrow),i.\u0275\u0275advance(),i.\u0275\u0275property("panelWidth",250),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind1(7,6,T.inputElements$))}},dependencies:[ne.NgForOf,ne.NgIf,c.me,c.BC,c.vS,it.aL,je.G7,je.cm,tt.d1,ne.AsyncPipe],styles:[".mat-option[_ngcontent-%COMP%], .mat-input-element[_ngcontent-%COMP%]{font-family:Open Sans,Regular,sans-serif;font-size:13px}.arrow-country-icon[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij48ZGVmcz48c3R5bGU+LmF7ZmlsbDojMjg0NTc4O30uYntmaWxsOm5vbmU7fTwvc3R5bGU+PC9kZWZzPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNzgzLjc3OSA3NC40NTUpIj48cGF0aCBjbGFzcz0iYSIgZD0iTTE3ODcuNzc5LTY3LjQ1NWw0LDQsNC00WiIvPjwvZz48cmVjdCBjbGFzcz0iYiIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2Ii8+PC9zdmc+);width:16px;height:16px;display:inline-block;position:absolute;top:0;right:0;background-repeat:no-repeat;cursor:pointer}.component-wrap[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%}"]})}}class pi{static{this.\u0275fac=function(y){return new(y||pi)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:pi})}static{this.\u0275inj=i.\u0275\u0275defineInjector({})}}var da=b(52014);class Pe{static{this.\u0275fac=function(y){return new(y||Pe)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:Pe})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[ne.CommonModule,c.YN,c.X1,da.jm]})}}function Ni(U,m){if(1&U&&(i.\u0275\u0275elementStart(0,"div",5),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&U){const y=i.\u0275\u0275nextContext();i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(y.title)}}function Ps(U,m){if(1&U&&(i.\u0275\u0275elementStart(0,"div",6),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&U){const y=i.\u0275\u0275nextContext();i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(y.description)}}class gn extends h{set default(m){this.value=m}get default(){return this.value}constructor(m,y,T){super(m,y,T),this.controlType="crt-slide-toggle",this.useDefaultWidth=!1,this.labelPosition="before",this.toggleChange=new i.EventEmitter}valueChanged(m){this.innerValue=m.checked,this.toggleChange.emit(m)}static{this.\u0275fac=function(y){return new(y||gn)(i.\u0275\u0275directiveInject(c.vO,10),i.\u0275\u0275directiveInject(_.P8),i.\u0275\u0275directiveInject(A.FN))}}static{this.\u0275cmp=i.\u0275\u0275defineComponent({type:gn,selectors:[["crt-slide-toggle"]],inputs:{title:"title",description:"description",useDefaultWidth:"useDefaultWidth",labelPosition:"labelPosition",default:"default"},outputs:{toggleChange:"toggleChange"},features:[i.\u0275\u0275ProvidersFeature([{provide:me.qT,useExisting:gn}]),i.\u0275\u0275InheritDefinitionFeature],decls:5,vars:7,consts:[["input",""],[1,"slide-wrapper",3,"change","disabled","checked","labelPosition"],[1,"slide-content"],["class","slide-title",4,"ngIf"],["class","slide-description",4,"ngIf"],[1,"slide-title"],[1,"slide-description"]],template:function(y,T){if(1&y){const G=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"mat-slide-toggle",1,0),i.\u0275\u0275listener("change",function(Ie){return i.\u0275\u0275restoreView(G),i.\u0275\u0275resetView(T.valueChanged(Ie))}),i.\u0275\u0275elementStart(2,"div",2),i.\u0275\u0275template(3,Ni,2,1,"div",3)(4,Ps,2,1,"div",4),i.\u0275\u0275elementEnd()()}2&y&&(i.\u0275\u0275classProp("slide-toggle-default-width",T.useDefaultWidth),i.\u0275\u0275property("disabled",T.disabled)("checked",T.innerValue)("labelPosition",T.labelPosition),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",T.title),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",T.description))},dependencies:[ne.NgIf,da.P2],styles:[".slide-wrapper.slide-toggle-default-width{width:400px}.slide-wrapper.mat-slide-toggle .mat-slide-toggle-label{justify-content:space-between}.slide-wrapper.mat-slide-toggle.mat-checked .mat-slide-toggle-bar{background-color:var(--crt-palette-label-500)}.slide-wrapper.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb{background-color:#fff}.slide-wrapper.mat-slide-toggle .mat-slide-toggle-bar{height:22px;border-radius:22px}.slide-wrapper.mat-slide-toggle .mat-slide-toggle-thumb-container{margin:auto 0;top:0;bottom:0}.slide-wrapper .slide-title{white-space:break-spaces}.slide-wrapper.cdk-keyboard-focused{outline:none;outline-offset:-1px;border-radius:2px;box-shadow:inset 0 0 0 1px #0d2e4e,inset 0 0 0 2px #fff}\n"],encapsulation:2})}}class en{constructor(){}copyTextToBuffer(m){var y=this;return(0,_e.A)(function*(){const G=(Array.isArray(m)?m:[m]).map(Q=>({data:Q,mimeType:"text/plain"}));try{return yield y.copyToBuffer(G)}catch{return console.log("Copy to clipboard is not allowed")}})()}}class mi extends en{constructor(m){super(),this._navigator=m,this._clipboard=this._navigator.clipboard}copyToBuffer(m){var y=this;return(0,_e.A)(function*(){const T=m.map(({data:G,mimeType:Q})=>{const Ie=new Blob([G],{type:Q});return new ClipboardItem({[Q]:Ie})});yield y._clipboard.write(T)})()}static{this.\u0275fac=function(y){return new(y||mi)(i.\u0275\u0275inject(It.kW))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:mi,factory:mi.\u0275fac})}}class Ct extends en{constructor(m,y){super(),this._copyClipboardService=m,this._notifyService=y}copyToBuffer(m){var y=this;return(0,_e.A)(function*(){yield y._copyClipboardService.copyToBuffer(m),yield y._notifyService.show({message:"CopyClipboard.Copied"})})()}static{this.\u0275fac=function(y){return new(y||Ct)(i.\u0275\u0275inject(en),i.\u0275\u0275inject(Vt))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Ct,factory:Ct.\u0275fac,providedIn:"root"})}}class ht extends en{constructor(m){super(),this._document=m}copyToBuffer(m){try{const y=T=>{m.forEach(G=>T.clipboardData.setData(G.mimeType,G.data)),T.preventDefault()};this._document.addEventListener("copy",y),this._document.execCommand("copy"),this._document.removeEventListener("copy",y)}catch{}return Promise.resolve(void 0)}static{this.\u0275fac=function(y){return new(y||ht)(i.\u0275\u0275inject(ne.DOCUMENT))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:ht,factory:ht.\u0275fac,providedIn:"root"})}}const On=new i.InjectionToken("A copy clipboard factory"),jr=(It.kW,It.kW,It.gX.create({token:On,mappings:[{predicate:U=>!U.clipboard,injectable:ht}],default:{injectable:mi}}));class Oi{static{this.\u0275fac=function(y){return new(y||Oi)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:Oi})}static{this.\u0275inj=i.\u0275\u0275defineInjector({providers:[mi,ht,Ct,jr],imports:[cn]})}}const Vi={tab:"Tab",capslock:"CapsLock",shift:"Shift",meta:"Meta",alt:"Alt",ctrl:"Control",space:" ",spacebar:" ",escape:"Escape",esc:"Escape",left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown",copy:[{ctrlKey:!0,code:"KeyC"},{metaKey:!0,code:"KeyC"}],save:[{ctrlKey:!0,code:"KeyS"},{metaKey:!0,code:"KeyS"}],create:[{shiftKey:!0,code:"Enter"}],delete:[{shiftKey:!0,code:"Delete"}],pureEnter:[{altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1,code:"Enter"}],pureDelete:[{altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1,code:"Delete"}],character:[{key:/^.$/,altKey:!1,ctrlKey:!1,metaKey:!1}],return:"Enter",del:"Delete",command:"Meta",option:"Alt",enter:"Enter",backspace:"Backspace",ins:"Insert",pageup:"PageUp",pagedown:"PageDown",end:"End",home:"Home",contextmenu:"ContextMenu",numlock:"Clear"};function zd(U){return(Array.isArray(U)?U:[U]).map(y=>function Vn(U){if("string"==typeof U)return U.trim().split("+");throw new Error(`Keyboard hotkeys sequence "${U}" not supporting`)}(y)).filter(y=>null!=y)}function Ha(U,m){return Object.entries(m).filter(([,y])=>zd(y.sequence).some(G=>G.map(Q=>function Ns(U){switch(U){case"shift":return[{shiftKey:!0}];case"meta":case"command":return[{metaKey:!0}];case"alt":return[{altKey:!0}];case"ctrl":return[{ctrlKey:!0}]}const m=Vi[U];let y=[{key:U}];return Array.isArray(m)&&(y=[...y,...m]),"object"==typeof m&&(y=[...y,m]),"string"==typeof m&&(y=[...y,{key:m}]),y}(Q)).every(Q=>function Yn(U,m){return U.some(y=>Object.entries(y).every(([T,G])=>{const Q=m[T];return G instanceof RegExp?G.test(Q):Q===G}))}(Q,U)))).map(([y])=>y)}class hi{constructor(){this.crtKeyboardHotkeyPressed=new i.EventEmitter}_onKeydown(m){Ha(m,this.crtKeyboardHotkeys.keydown).forEach(T=>this.crtKeyboardHotkeyPressed.emit({action:T,event:m}))}static{this.\u0275fac=function(y){return new(y||hi)}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:hi,selectors:[["","crtKeyboardHotkeys",""]],hostBindings:function(y,T){1&y&&i.\u0275\u0275listener("keydown",function(Q){return T._onKeydown(Q)})},inputs:{crtKeyboardHotkeys:"crtKeyboardHotkeys"},outputs:{crtKeyboardHotkeyPressed:"crtKeyboardHotkeyPressed"}})}}class fn{static{this.\u0275fac=function(y){return new(y||fn)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:fn})}static{this.\u0275inj=i.\u0275\u0275defineInjector({})}}class tn{static{this.\u0275fac=function(y){return new(y||tn)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:tn})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[ne.CommonModule]})}}class yn{get inLines(){return this._inLines}set inLines(m){this._inLines=m}get inUnits(){return this._inUnits}set inUnits(m){this._inUnits=m}constructor(m,y){this._elRef=m,this._translateService=y,this._fontScale=1.2,this._linesDefault=5,this._paddingTop=8,this._attributeName="oldHeight",this._blockquoteSelectors=["blockquote","blockquote.gmail_quote","div#appendonsend","div#divRplyFwdMsg",'[id*="yahoo_quoted_"]','div[name="quote"]','blockquote[id*="quote_zmail"]'],this._readMoreButtonClicked$=new B.Subject,this._destroyed$=new B.Subject,this.wrapperClassName="read-more-wrapper",this.fitToBlockquote=!1}_isNeedToShowButton(){if(this.nativeElement.querySelector(".read-more-button"))return!1;let m=0;return this.inLines&&(m=this._calculateLinesHeightInPx()),this.inUnits&&(m=parseInt(this.inUnits)||0),m>0&&this._nativeElementHeight>m}_calculateLinesHeightInPx(){let m=0;const y=window.getComputedStyle(this.nativeElement),T=y.getPropertyValue("line-height");return m="normal"===T?parseInt(y.getPropertyValue("font-size"))*this._fontScale:parseInt(T)||0,m*(this.inLines+1)+this._paddingTop}_wrapElement(){this.nativeElement.classList.add(this.wrapperClassName);const m=this.nativeElement.style.getPropertyValue("height");m&&this.nativeElement.setAttribute(this._attributeName,m),this.nativeElement.style.setProperty("height",this._getWrapperHeight())}_getWrapperHeight(){return this.inLines?this._calculateLinesHeightInPx()+"px":this.inUnits}_findBlockquote(){let m=null;for(const y of this._blockquoteSelectors){const T=this.nativeElement.querySelector(y);T&&(null==m||m.innerHTML.length>T.innerHTML.length)&&(m=T)}return m}_blockqouteFit(){const m=this._findBlockquote();if(m){const y=window.getComputedStyle(m),T=parseInt(y.getPropertyValue("margin-top"))||0,G=parseInt(y.getPropertyValue("padding-top"))||0,Q=m.offsetTop+T+G+this._paddingTop;this.nativeElement.style.setProperty("height",Q+"px")}}_recalculateAfterAllImagesLoaded(){const m=[];this.nativeElement.querySelectorAll("img").forEach(y=>{m.push(new Promise(T=>{y.onload=T}))}),m.length>0&&Promise.all(m).then(this.addButton.bind(this))}_resizeObservable(m){return new B.Observable(y=>{const T=new Vo.A(G=>{y.next(G)});return T.observe(m),()=>T.unobserve(m)})}_fixFocusPosition(){this.focusTrapEl.setAttribute("tabindex","0"),this.focusTrapEl.addEventListener("blur",()=>this.nativeElement.removeChild(this.focusTrapEl)),this.focusTrapEl.focus()}onReadMoreClick(m){this._readMoreButtonClicked$.next(!0),this.nativeElement.classList.remove(this.wrapperClassName);const y=this.nativeElement.getAttribute(this._attributeName);y?(this.nativeElement.style.setProperty("height",y),this.nativeElement.removeAttribute(this._attributeName)):this.nativeElement.style.removeProperty("height"),this.nativeElement.removeChild(m.target.parentElement),this._fixFocusPosition()}createButton(){const m=document.createElement("div");m.classList.add("read-more-button-wrap");const y=document.createElement("div");return y.innerText=this._translateService.instant("ReadMoreDirective.Label"),y.classList.add("read-more-button"),y.tabIndex=0,y.role="button",y.addEventListener("click",this.onReadMoreClick.bind(this)),y.addEventListener("keydown",T=>{("Enter"===T.key||"Space"===T.key)&&this.onReadMoreClick(T)}),m.appendChild(y),m}addFocusTrapElement(){this.focusTrapEl=document.createElement("div"),this.nativeElement.appendChild(this.focusTrapEl)}addButton(){this._nativeElementHeight=this.nativeElement.getBoundingClientRect().height,window.requestAnimationFrame(()=>{if(this._nativeElementHeight=0===this._nativeElementHeight?this.nativeElement.getBoundingClientRect().height:this._nativeElementHeight,this._isNeedToShowButton()){const m=this.createButton();this.nativeElement.appendChild(m),this.addFocusTrapElement(),this.foldContent()}})}foldContent(){this._wrapElement(),this.fitToBlockquote&&this._blockqouteFit()}ngAfterViewInit(){this.nativeElement=this._elRef?.nativeElement,this.nativeElement&&this._resizeObservable(this.nativeElement).pipe((0,I.p)(m=>m[0]?.contentRect.height>0),(0,v.Q)((0,B.merge)(this._destroyed$,this._readMoreButtonClicked$))).subscribe(()=>{!this.inLines&&!this.inUnits&&(this.inLines=this._linesDefault),this.addButton(),this._recalculateAfterAllImagesLoaded()})}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}static{this.\u0275fac=function(y){return new(y||yn)(i.\u0275\u0275directiveInject(i.ElementRef),i.\u0275\u0275directiveInject(X.c$))}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:yn,selectors:[["","crtReadMore",""]],inputs:{inLines:"inLines",inUnits:"inUnits",fitToBlockquote:"fitToBlockquote"}})}}class Li extends yn{constructor(){super(...arguments),this.readMoreClick=new i.EventEmitter}set hasExternalLoadMore(m){this._hasExternalLoadMore=m,m&&this._addButtonIfNotExists()}get hasExternalLoadMore(){return this._hasExternalLoadMore}_addButtonIfNotExists(){const m=this.nativeElement?.querySelector(".read-more-button");if(!this.nativeElement||m)return;const y=this.createButton();this.nativeElement.appendChild(y)}onReadMoreClick(m){this.hasExternalLoadMore?this.readMoreClick.emit():super.onReadMoreClick(m)}foldContent(){this.nativeElement?.classList.add(this.wrapperClassName)}static{this.\u0275fac=(()=>{let m;return function(T){return(m||(m=i.\u0275\u0275getInheritedFactory(Li)))(T||Li)}})()}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:Li,selectors:[["","crtQuotedReadMore",""]],inputs:{hasExternalLoadMore:"hasExternalLoadMore"},outputs:{readMoreClick:"readMoreClick"},features:[i.\u0275\u0275InheritDefinitionFeature]})}}class Os{constructor(m,y,T){this._windowStateService=m,this._directionality=y,this._sysSettingsService=T}_canNotify(m,y="when-hidden"){var T=this;return(0,_e.A)(function*(){return!(!Notification||"denied"===Notification.permission)&&((yield T._getIsUserAllowsNotifications(m))?("when-hidden"!==y||!T._windowStateService.hasFocus)&&("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"===Notification.permission):void 0)})()}_getIsUserAllowsNotifications(m){var y=this;return(0,_e.A)(function*(){return!!(yield y._sysSettingsService.getByCode(m))?.value})()}_createNotification(m){return new Notification(m.title||"",{icon:m?.icon,body:m?.body||"",tag:m?.id,silent:m?.isSilent||!1,timestamp:m.timeout,dir:this._directionality.value})}notify(m){var y=this;return(0,_e.A)(function*(){if(!(yield y._canNotify(m.code,m.mode)))return;const G=y._createNotification(m);G.onclick=(0,_e.A)(function*(){G.close(),y._windowStateService.focus(),m.onClick&&(yield m.onClick())})})()}static{this.\u0275fac=function(y){return new(y||Os)(i.\u0275\u0275inject(It.xS),i.\u0275\u0275inject(Pn.dS),i.\u0275\u0275inject(M.SysSettingsService))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Os,factory:Os.\u0275fac})}}class ko{static{this.\u0275fac=function(y){return new(y||ko)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:ko})}static{this.\u0275inj=i.\u0275\u0275defineInjector({providers:[{provide:It.X4,useClass:Os}]})}}class Lc{static{this.\u0275fac=function(y){return new(y||Lc)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:Lc})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[ne.CommonModule]})}}class Vs{set toggleImageHandlers(m){this._handleAllImages(m)}constructor(m){this._elRef=m}_showFullScreenImage(m){if(0===m.button){const T=m.target,G=document.createElement("div");G.classList.add("full-image-container"),G.style.backgroundImage="url('"+T.src+"')";let Q=!1;const Ie=.8*document.body.clientWidth,Et=.8*document.body.clientHeight,Ke=T.width>=Ie||T.height>=Et,gt=T.naturalWidth>=Ie||T.naturalHeight>=Et;(Ke||gt)&&(Q=!0),G.style.backgroundSize=Q?"80%":"auto",G.addEventListener("click",Wa=>{G.remove()}),document.body.addEventListener("keydown",Wa=>{"Escape"===Wa.key&&G.remove()},{once:!0}),document.body.appendChild(G),m.preventDefault(),m.stopImmediatePropagation()}}_handleAllImages(m){this._elRef?.nativeElement.querySelectorAll("img").forEach(y=>{if(this.ignoreImageClasses?.some(Q=>y.classList.contains(Q)))return;const G=y.parentElement.getAttribute("href")?.length>1;m?G||y.addEventListener("mousedown",this._showFullScreenImage):y.removeEventListener("mousedown",this._showFullScreenImage),y.style.cursor=m&&!G?"zoom-in":"default"})}ngAfterViewInit(){this._handleAllImages(!0)}static{this.\u0275fac=function(y){return new(y||Vs)(i.\u0275\u0275directiveInject(i.ElementRef))}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:Vs,selectors:[["","crtFullSizeImage",""]],inputs:{ignoreImageClasses:"ignoreImageClasses",toggleImageHandlers:"toggleImageHandlers"}})}}const xh=new i.InjectionToken("Window location object");const Ln=b(72319).A([{value:"ru",caption:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",culture:"ru-RU"},{value:"en",caption:"English",culture:"en-US"},{value:"it",caption:"Italiano",culture:"it-IT"},{value:"nl",caption:"Nederlands",culture:"nl-NL"},{value:"pt",caption:"Portugu\xeas (Portugal)",culture:"pt-PT"},{value:"pt",caption:"Portugu\xeas (Brasil)",culture:"pt-BR"},{value:"de",caption:"Deutsch",culture:"de-DE"},{value:"uk",caption:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430",culture:"uk-UA"},{value:"es",caption:"Espa\xf1ol",culture:"es-ES"},{value:"fr",caption:"Fran\xe7ais",culture:"fr-FR"},{value:"he",caption:"\u05e2\u05d1\u05e8\u05d9\u05ea",culture:"he-IL"},{value:"ar",caption:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",culture:"ar-SA"},{value:"cs",caption:"\u010ce\u0161tina",culture:"cs-CZ"},{value:"pl",caption:"Polski",culture:"pl-PL"},{value:"th",caption:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22",culture:"th-TH"},{value:"fa",caption:"\u0641\u0627\u0631\u0633\u06cc",culture:"fa-IR"},{value:"sv",caption:"Svenska",culture:"sv-SE"},{value:"ro",caption:"Rom\xe2n\u0103",culture:"ro-RO"},{value:"vi",caption:"Ti\u1ebfng Vi\u1ec7t",culture:"vi-VN"},{value:"ko",caption:"\ud55c\uad6d\uc5b4",culture:"ko-KR"},{value:"sq",caption:"Shqip",culture:"sq-AL"},{value:"ja",caption:"\u65e5\u672c\u8a9e",culture:"ja-JP"},{value:"hu",caption:"Magyar",culture:"hu-HU"},{value:"hr",caption:"Hrvatski",culture:"hr-HR"},{value:"bg",caption:"\u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438",culture:"bg-BG"},{value:"id",caption:"Bahasa Indonesia",culture:"id-ID"},{value:"zh",caption:"\u7e41\u9ad4\u4e2d\u6587",culture:"zh-TW"},{value:"lv",caption:"Latvie\u0161u",culture:"lv-LV"},{value:"tr",caption:"T\xfcrk\xe7e",culture:"tr-TR"}],U=>U.value);class Br{constructor(m,y){this.translate=m,this.windowLocation=y,this._supportLanguages=Ln.map(T=>T.value)}_extractLanguage(){let y=new URLSearchParams(this.windowLocation.search).get("lang");return(0,Vr.A)(y)&&(y=this.translate.getBrowserLang()),y}_resolveCulture(m,y=!1){const T=m.split("-")[0];return y?Ln.find(G=>G.value===T)?.culture:Ln.find(G=>G.culture===m)?.culture||Ln.find(G=>G.value===T)?.culture}init(){let m=this._extractLanguage();this.translate.setDefaultLang("en"),-1===this._supportLanguages.indexOf(m)&&(m="en"),this.translate.use(m).subscribe({error:()=>{this.translate.use("en")}})}getCulture(){const m="en-US",T=new URLSearchParams(this.windowLocation.search).get("lang");if(!(0,Vr.A)(T))return this._resolveCulture(T,!0)||m;const G=this.translate.getBrowserCultureLang();return this._resolveCulture(G)||m}static{this.\u0275fac=function(y){return new(y||Br)(i.\u0275\u0275inject(X.c$),i.\u0275\u0275inject(xh))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:Br,factory:Br.\u0275fac,providedIn:"root"})}}class Kn{static{this.\u0275fac=function(y){return new(y||Kn)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:Kn})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[ne.CommonModule]})}}const Fs=new i.InjectionToken("ALM_STRING_DENY_CHARACTERS_TOKEN"),Fi=new i.InjectionToken("ALM_FULL_NAME_MAX_LENGTH_TOKEN"),ks=new i.InjectionToken("ALM_COMPANY_MAX_LENGTH_TOKEN"),Hd=new i.InjectionToken("ALM_NAME_PART_MAX_LENGTH_TOKEN"),Fc=new i.InjectionToken("ALM_COMPANY_WEBSITE_REGEX_VALIDATION_PATTERN_TOKEN");function Xe(U){return m=>{const y=m?.value;return y&&U.some(G=>y.includes(G))?{HasDeniedCharacters:!0}:null}}class _n{constructor(m,y,T,G,Q){this._fullNameMaxLength=250,this._namePartMaxLength=120,this._companyMaxLength=100,this._deniedCharacters=["@",":",";","\\","/",",","<",">"],this._websiteRegexValidationPattern="^(?=.{4,250}$)(https?:\\/\\/)?(www\\.)?([a-zA-Z0-9\\-]+\\.(?!www\\.))+[a-zA-Z0-9\\-]{2,}(\\/[\\w\\-]{2,})?\\/?$",m&&(this._deniedCharacters=m.split(" ")),y&&y>0&&(this._fullNameMaxLength=y),G&&G>0&&(this._namePartMaxLength=G),T&&T>0&&(this._companyMaxLength=T),Q&&(this._websiteRegexValidationPattern=Q)}get deniedCharacters(){return this._deniedCharacters}get fullNameMaxLength(){return this._fullNameMaxLength}get namePartMaxLength(){return this._namePartMaxLength}get companyMaxLength(){return this._companyMaxLength}_createValidator(m,y){return T=>T?.value?m.reduce((Ie,Et)=>Ie&&null===Et(T),!0)?null:{errors:{message:y}}:null}_getInternalValidators(m){return[c.k0.maxLength(m),Xe(this._deniedCharacters)]}_getCompanyWebsiteValidators(){return[c.k0.pattern(this._websiteRegexValidationPattern)]}createFullNameValidator(m){return this._createValidator(this._getInternalValidators(this._fullNameMaxLength),m)}createNamePartValidator(m){return this._createValidator(this._getInternalValidators(this._namePartMaxLength),m)}createCompanyValidator(m){return this._createValidator(this._getInternalValidators(this._companyMaxLength),m)}createCompanyWebsiteValidator(m){return this._createValidator(this._getCompanyWebsiteValidators(),m)}static{this.\u0275fac=function(y){return new(y||_n)(i.\u0275\u0275inject(Fs,8),i.\u0275\u0275inject(Fi,8),i.\u0275\u0275inject(ks,8),i.\u0275\u0275inject(Hd,8),i.\u0275\u0275inject(Fc,8))}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:_n,factory:_n.\u0275fac,providedIn:"root"})}}b(79833);var jo=b(91472),Bo=b(43674),gi=b(71663);const Go={[gi.U.ArrowUp]:"up",[gi.U.ArrowDown]:"down",[gi.U.ArrowLeft]:"left",[gi.U.ArrowRight]:"right"};gi.U.ArrowUp,gi.U.ArrowDown,gi.U.ArrowLeft,gi.U.ArrowRight;var qd=b(75933),pa=b(66497),jc=b(23596);const Wd={up:"up",down:"down",left:"right",right:"left"},zo={up:["row","column"],down:["row","column"],left:["column","row"],right:["column","row"]};class ki{constructor(){this._activeItem$=new B.Subject,this._directionality=(0,i.inject)(Pn.dS),this._items=[],this._strictRow=!1,this._strictColumn=!1}get items(){return this._items}get activeItem(){return this._activeItem}get activeItem$(){return this._activeItem$.asObservable()}_isActiveItemsEqual(m){return m?.columnIndex===this._activeItem?.columnIndex&&m?.rowIndex===this._activeItem?.rowIndex}_getNextItem(m,y){const T=m?.rowIndex,G=m?.columnIndex;if(null==T&&null==G)return(0,qd.A)(this._items,["rowIndex","columnIndex"]);if(null==T)return(0,pa.A)(this._items).filter(Ke=>Ke.columnIndex===G).minBy("rowIndex").value();if(null==G)return(0,pa.A)(this._items).filter(Ke=>Ke.rowIndex===T).minBy("columnIndex").value();y="rtl"===this._directionality.value?Wd[y]:y;const Q={up:({rowIndex:Ke,columnIndex:gt})=>Ke<T&&(!this._strictColumn||gt===G),down:({rowIndex:Ke,columnIndex:gt})=>Ke>T&&(!this._strictColumn||gt===G),left:({rowIndex:Ke,columnIndex:gt})=>gt<G&&(!this._strictRow||Ke===T),right:({rowIndex:Ke,columnIndex:gt})=>gt>G&&(!this._strictRow||Ke===T)},Ie=zo[y],Et=this._items.filter(Q[y]);return this._findNearestItem(Et,m,Ie)}_findNearestItem(m,y,T){return(0,pa.A)(m).map(G=>({item:G,row:Math.abs(G.rowIndex-y.rowIndex),column:Math.abs(G.columnIndex-y.columnIndex)})).sortBy(T).first().value()?.item}withStrictRow(m){return this._strictRow=m,this}withStrictColumn(m){return this._strictColumn=m,this}setItems(m){if(m??=[],(0,jc.A)(this._items,m))return this;if(this._items=m,!this._activeItem)return this;const y=this._items.find(T=>this._isActiveItemsEqual(T));return this.setActiveItem(y)}setActiveItem(m){return this._isActiveItemsEqual(m)||(this._activeItem=m,this._activeItem$.next(this._activeItem)),this}setNextActiveItem(m){const y=this._getNextItem(this._activeItem,m)||this._activeItem;return this._activeItem=y,this._activeItem$.next(this._activeItem),this._activeItem}static{this.\u0275fac=function(y){return new(y||ki)}}static{this.\u0275prov=i.\u0275\u0275defineInjectable({token:ki,factory:ki.\u0275fac,providedIn:"root"})}}const Gr="[crt-keyboard-navigation-item]";class fi{get _navigationRowSelector(){return this.scope?`[crt-keyboard-navigation-row-scope="${this.scope}"]`:"[crt-keyboard-navigation-row]"}get _navigationItemSelector(){return this.scope?`[crt-keyboard-navigation-item-scope="${this.scope}"]`:Gr}set disabled(m){const y=!!m;y!==this._disabled&&(this._disabled=y,this._disabledChanged$.next(),this._disabled||this._subscribeKeydownEvents())}set strictRow(m){this._keyboardNavigationStrategy.withStrictRow(m)}set strictColumn(m){this._keyboardNavigationStrategy.withStrictColumn(m)}constructor(){this._destroyed$=new B.Subject,this._disabledChanged$=new B.Subject,this._element=(0,i.inject)(i.ElementRef).nativeElement,this._focusMonitor=(0,i.inject)(A.FN),this._keyboardNavigationStrategy=(0,i.inject)(ki),this._disabled=!1,this._subscribeKeydownEvents(),this._subscribeActiveItemChanges()}_subscribeKeydownEvents(){(0,B.fromEvent)(this._element,"keydown").pipe((0,I.p)(m=>!m.defaultPrevented&&null!=Go[m.key]),(0,$n.M)(m=>m.preventDefault()),(0,I.p)(m=>null!==this._getNavigationItemFromEventTarget(m)),(0,W.T)(m=>Go[m.key]),(0,jo.c)(16.666666666666668),(0,$n.M)(m=>this._handleNavigation(m)),(0,v.Q)((0,B.merge)(this._destroyed$,this._disabledChanged$))).subscribe()}_subscribeActiveItemChanges(){this._keyboardNavigationStrategy.activeItem$.pipe((0,W.T)(m=>m?.focusableElement??m?.element),(0,I.p)(m=>this._isElementNotFocused(m)),(0,$n.M)(m=>this._focusMonitor.focusVia(m,"keyboard")),(0,v.Q)(this._destroyed$)).subscribe()}_isElementNotFocused(m){return m&&!m.matches(":focus")&&!m.matches(".cdk-focused")}_isElementAvailable(m){return m&&!this._isElementDisabled(m)&&this._isElementScopeAvailable(m)}_isElementDisabled(m){const y=m.getAttribute("crt-keyboard-navigation-item-disabled");return(0,F.he)(y)}_isElementScopeAvailable(m){const y=m.getAttribute("crt-keyboard-navigation-item-scope");return!this.scope&&!y||y===this.scope}_handleNavigation(m){const y=this._getNavigationItems(),T=y.find(G=>G.element===this._keyboardNavigationStrategy.activeItem?.element);this._keyboardNavigationStrategy.setItems(y).setActiveItem(T).setNextActiveItem(m)}_getNavigationItemFromEventTarget(m){const y=m.target,T=y.closest(Gr);return this._isElementAvailable(T)&&(y.hasAttribute("crt-keyboard-navigation-item")||T.hasAttribute("crt-keyboard-navigation-item-use-focusable-child"))?T:null}_getNavigationItems(){return this._getNavigationRows().map((m,y)=>this._getNavigationItemsByRow(m,y)).flat()}_getNavigationRows(){const m=Array.from(this._element.querySelectorAll(this._navigationRowSelector));return m.length?m:[this._element]}_getNavigationItemsByRow(m,y){const T=[];return m.querySelectorAll(this._navigationItemSelector).forEach((G,Q)=>{if(!this._isElementAvailable(G))return;const Ie=G.getAttribute("crt-keyboard-navigation-item"),Et=this.items?.length?this.items.indexOf(Ie):Q,gt=G.hasAttribute("crt-keyboard-navigation-item-use-focusable-child")?(0,Bo.Kr)(G)?.[0]:G;T.push({element:G,focusableElement:gt,rowIndex:y,columnIndex:Et})}),T}_setActiveItemByFocus(m){const y=this._getNavigationItemFromEventTarget(m);if(this._keyboardNavigationStrategy.activeItem?.element?.isSameNode(y))return;const G=this._getNavigationItems(),Q=G.find(Ie=>Ie?.element?.isSameNode(y))||null;this._keyboardNavigationStrategy.setItems(G).setActiveItem(Q)}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}onFocusin(m){this._setActiveItemByFocus(m)}static{this.\u0275fac=function(y){return new(y||fi)}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:fi,selectors:[["","crtKeyboardNavigation",""]],hostVars:1,hostBindings:function(y,T){1&y&&i.\u0275\u0275listener("focusin",function(Q){return T.onFocusin(Q)}),2&y&&i.\u0275\u0275attribute("crt-keyboard-navigation-scope",T.scope)},inputs:{scope:[i.\u0275\u0275InputFlags.None,"crtKeyboardNavigationScope","scope"],items:[i.\u0275\u0275InputFlags.None,"crtKeyboardNavigationItems","items"],disabled:[i.\u0275\u0275InputFlags.HasDecoratorInputTransform,"crtKeyboardNavigationDisabled","disabled",i.booleanAttribute],strictRow:[i.\u0275\u0275InputFlags.HasDecoratorInputTransform,"crtKeyboardNavigationStrictRow","strictRow",i.booleanAttribute],strictColumn:[i.\u0275\u0275InputFlags.HasDecoratorInputTransform,"crtKeyboardNavigationStrictColumn","strictColumn",i.booleanAttribute]},standalone:!0,features:[i.\u0275\u0275ProvidersFeature([ki]),i.\u0275\u0275InputTransformsFeature]})}}class Cn{constructor(){this._elementRef=(0,i.inject)(i.ElementRef),this._focusMonitor=(0,i.inject)(A.FN),this._name="",this._tabIndex=0}set name(m){this._name=m||""}set tabIndex(m){this._updateTabIndex(m)}set useFocusableChild(m){this._useFocusableChild=m?"":void 0,this._updateTabIndex(this._tabIndex),this._updateFocusMonitoring(!m)}_updateTabIndex(m){this._tabIndex=void 0!==this._useFocusableChild||isNaN(m)?void 0:m}_updateFocusMonitoring(m){m?this._focusMonitor.monitor(this._elementRef.nativeElement,!1):this._focusMonitor.stopMonitoring(this._elementRef.nativeElement)}ngAfterViewInit(){this._updateFocusMonitoring(void 0===this._useFocusableChild)}ngOnDestroy(){this._updateFocusMonitoring(!1)}static{this.\u0275fac=function(y){return new(y||Cn)}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:Cn,selectors:[["","crtKeyboardNavigationItem",""]],hostVars:5,hostBindings:function(y,T){2&y&&i.\u0275\u0275attribute("crt-keyboard-navigation-item",T._name)("tabindex",T._tabIndex)("crt-keyboard-navigation-item-use-focusable-child",T._useFocusableChild)("crt-keyboard-navigation-item-scope",T.scope)("crt-keyboard-navigation-item-disabled",T.disabled)},inputs:{name:[i.\u0275\u0275InputFlags.None,"crtKeyboardNavigationItem","name"],scope:[i.\u0275\u0275InputFlags.None,"crtKeyboardNavigationItemScope","scope"],disabled:[i.\u0275\u0275InputFlags.HasDecoratorInputTransform,"crtKeyboardNavigationItemDisabled","disabled",i.booleanAttribute],tabIndex:[i.\u0275\u0275InputFlags.HasDecoratorInputTransform,"crtKeyboardNavigationItemTabIndex","tabIndex",i.numberAttribute],useFocusableChild:[i.\u0275\u0275InputFlags.HasDecoratorInputTransform,"crtKeyboardNavigationItemUseFocusableChild","useFocusableChild",i.booleanAttribute]},standalone:!0,features:[i.\u0275\u0275InputTransformsFeature]})}}class ji{constructor(){this._=""}static{this.\u0275fac=function(y){return new(y||ji)}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:ji,selectors:[["","crtKeyboardNavigationRow",""]],hostVars:2,hostBindings:function(y,T){2&y&&i.\u0275\u0275attribute("crt-keyboard-navigation-row",T._)("crt-keyboard-navigation-row-scope",T.scope)},inputs:{scope:[i.\u0275\u0275InputFlags.None,"crtKeyboardNavigationRowScope","scope"]},standalone:!0})}}class js{static{this.\u0275fac=function(y){return new(y||js)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:js})}static{this.\u0275inj=i.\u0275\u0275defineInjector({})}}class bn{set activateListeners(m){m?this._addListenersToLinks():this._removeListenersFromLinks()}constructor(m,y){this.el=m,this.renderer=y,this._unsubscribeFunctions=[]}_handleClick(m,y){const T=y.getAttribute("href");if(T){const G=T.indexOf("#");if(-1!==G){const Q=T.slice(G+1),Ie=this.el.nativeElement.querySelector(`#${Q}`);if(Ie)return m.preventDefault(),m.stopImmediatePropagation(),void Ie.scrollIntoView({behavior:"smooth",block:"start"})}}}_addEvents(m){const y=this.renderer.listen(m,"click",Q=>this._handleClick(Q,m)),T=this.renderer.listen(m,"touchstart",Q=>this._handleClick(Q,m)),G=this.renderer.listen(m,"keydown.enter",Q=>this._handleClick(Q,m));this._unsubscribeFunctions.push(y,T,G)}_addListenersToLinks(){this.el.nativeElement.querySelectorAll("a").forEach(y=>{this._addEvents(y)})}_removeListenersFromLinks(){this._unsubscribeFunctions.forEach(m=>m()),this._unsubscribeFunctions=[]}ngAfterViewInit(){this._addListenersToLinks()}ngOnDestroy(){this._removeListenersFromLinks()}static{this.\u0275fac=function(y){return new(y||bn)(i.\u0275\u0275directiveInject(i.ElementRef),i.\u0275\u0275directiveInject(i.Renderer2))}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:bn,selectors:[["","crtAnchorScrollHandler",""]],inputs:{activateListeners:[i.\u0275\u0275InputFlags.None,"crtAnchorScrollHandler","activateListeners"]},standalone:!0})}}class yi{static{this.\u0275fac=function(y){return new(y||yi)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:yi})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[ne.CommonModule]})}}class Fn{get nativeElement(){return this.elementRef.nativeElement}constructor(m){this.elementRef=m,this._preventFocusOut=!1,this._focusableElementsListeners=[],this.hasFocus=!1,this.focused=new B.Subject,this.selected=new B.Subject,this.ariaHidden=!0,this.tabIndex=0,this.role="option"}_processCurrentElementFocusEvent(m){const y=m.relatedTarget;this.nativeElement===y?this._emitOwnFocusedEvent():this._emitSubElementFocusedEvent(y)}_emitResetFocusedEvent(){this._emitFocusedEvent(null)}_emitOwnFocusedEvent(){this._emitFocusedEvent({elementType:"own"})}_emitSubElementFocusedEvent(m){const y=this._getUniqueSelector(m,this.nativeElement);y?this._emitFocusedEvent({elementType:"subElement",subElementSelector:y}):this._emitOwnFocusedEvent()}_emitFocusedEvent(m){this._preventFocusOut=!1,this.focused.next(m)}_getUniqueSelector(m,y){if(!m||!y.contains(m))return"";const T=[];let G=m;for(;G&&G!==y;){let Q=G.tagName.toLowerCase();if(G.classList.length>0&&(Q+="."+Array.from(G.classList).join(".")),G.parentElement){const Ie=Array.from(G.parentElement.children).filter(Et=>Et.tagName===G.tagName);Ie.length>1&&(Q+=`:nth-child(${Ie.indexOf(G)+1})`)}T.unshift(Q),G=G.parentElement}return T.join(" > ")}_isCurrentElement(m){return this.nativeElement.contains(m.relatedTarget)}_attachListenersOnFocusableElements(){this._getInnerFocusableElements().forEach(y=>this._attachListenersOnFocusableElement(y))}_attachListenersOnFocusableElement(m){const y=()=>{this._preventFocusOut=!0},T=G=>{const{keyCode:Q}=G;(13===Q||32===Q)&&(this._preventFocusOut=!0)};m.addEventListener("click",y,{capture:!0}),m.addEventListener("keydown",T,{capture:!0}),this._focusableElementsListeners.push({element:m,click:y,keydown:T})}_getInnerFocusableElements(){return Array.from(this.nativeElement.querySelectorAll("button"))}_detachListenersOnFocusableElements(){this._focusableElementsListeners.forEach(({element:m,click:y,keydown:T})=>{m.removeEventListener("click",y),m.removeEventListener("keydown",T)}),this._focusableElementsListeners=[]}ngAfterViewInit(){this._attachListenersOnFocusableElements()}ngOnDestroy(){this._detachListenersOnFocusableElements()}onClick(m){this.selected.next(m)}onKeyDown(m){const{keyCode:y}=m;(13===y||32===y)&&this.selected.next(m)}onFocusIn(m){this.hasFocus||(this.hasFocus=!0,this._processCurrentElementFocusEvent(m))}onFocusOut(m){this._isCurrentElement(m)?this._processCurrentElementFocusEvent(m):this._preventFocusOut||(this.hasFocus=!1,this._emitResetFocusedEvent())}static{this.\u0275fac=function(y){return new(y||Fn)(i.\u0275\u0275directiveInject(i.ElementRef))}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:Fn,selectors:[["","crtListboxOption",""]],hostVars:3,hostBindings:function(y,T){1&y&&i.\u0275\u0275listener("click",function(Q){return T.onClick(Q)})("keydown",function(Q){return T.onKeyDown(Q)})("focusin",function(Q){return T.onFocusIn(Q)})("focusout",function(Q){return T.onFocusOut(Q)}),2&y&&i.\u0275\u0275attribute("aria-hidden",T.ariaHidden)("tabIndex",T.tabIndex)("role",T.role)},inputs:{role:"role",value:[i.\u0275\u0275InputFlags.None,"crtListboxOption","value"]},exportAs:["crtListboxOption"]})}}class Qn{constructor(){this._destroyed=new B.Subject,this._focusedOption=null,this._optionFocused=(0,B.defer)(()=>this.options.changes.pipe((0,B.startWith)(this.options),(0,B.switchMap)(m=>(0,B.merge)(...m.map(y=>y.focused.pipe((0,W.T)(T=>({option:y,state:T})))))))),this._optionSelected=(0,B.defer)(()=>this.options.changes.pipe((0,B.startWith)(this.options),(0,B.switchMap)(m=>(0,B.merge)(...m.map(y=>y.selected.pipe((0,W.T)(T=>({option:y,event:T})))))))),this.ariaHidden=!0,this.role="listbox",this.optionValueKeyPropertyName="Id",this.selectedChange=new B.Subject}_subscribeOnOptionFocused(){this._optionFocused.pipe((0,v.Q)(this._destroyed)).subscribe(({option:m,state:y})=>this._handleOptionFocused(m,y))}_subscribeOnOptionSelected(){this._optionSelected.pipe((0,v.Q)(this._destroyed)).subscribe(({option:m,event:y})=>this._handleOptionSelected(m,y))}_subscribeOnOptionChanged(){this.options.changes.pipe((0,v.Q)(this._destroyed)).subscribe(()=>this._handleOptionsChanged())}_handleOptionFocused(m,y){var T=this;return(0,_e.A)(function*(){T._focusedOption=null!==y?{key:yield T._getOptionValueKey(m.value),option:m.value,state:y}:null})()}_handleOptionSelected(m,y){y.preventDefault(),this.selectedChange.next({value:[m.value]})}_handleOptionsChanged(){var m=this;return(0,_e.A)(function*(){yield m._restoreFocusedOptionIfNeed()})()}_restoreFocusedOptionIfNeed(){var m=this;return(0,_e.A)(function*(){if(!m._focusedOption)return;const T=(yield m._getOptionNativeElementsWithKeys()).find(G=>G.key===m._focusedOption.key);if(!T)return m._focusedOption=null,void m._resetFocusOnOption();m._focusOnCorrectFocusedOptionByState(T)})()}_getOptionNativeElementsWithKeys(){var m=this;return Promise.all(this.options.toArray().map(function(){var y=(0,_e.A)(function*(T){return{key:yield m._getOptionValueKey(T.value),nativeElement:T.nativeElement}});return function(T){return y.apply(this,arguments)}}()))}_focusOnCorrectFocusedOptionByState(m){if("own"===this._focusedOption.state.elementType||!this._focusedOption.state.subElementSelector)return void m.nativeElement.focus();const y=m.nativeElement.querySelector(this._focusedOption.state.subElementSelector);y?y.focus():m.nativeElement.focus()}_processNavigationKey(m){if(this._isEdgeNavigationKeyCode(m))return void this._handleEdgeNavigationKey(m);const y=this._getCurrentActiveOptionIndex();if(-1===y)return void this._resetFocusOnOption();const T=this._getNewActiveOptionIndex(y,m);y!==T&&this._setFocusOnOptionByIndex(T)}_handleEdgeNavigationKey(m){36!==m?this.options.last?.nativeElement.focus():this.options.first?.nativeElement.focus()}_getCurrentActiveOptionIndex(){return this.options.toArray().findIndex(m=>m.hasFocus)}_getNewActiveOptionIndex(m,y){return Math.min(Math.max(0,this.options.length-1),Math.max(0,m+(this._isNextNavigationKeyCode(y)?1:-1)))}_resetFocusOnOption(){this._resetHasFocusStates(),this.options.first?.nativeElement.focus()}_setFocusOnOptionByIndex(m){this._resetHasFocusStates();const y=this.options.get(m);y?y.nativeElement.focus():this._resetFocusOnOption()}_resetHasFocusStates(){this.options.forEach(m=>m.hasFocus=!1)}_getOptionValueKey(m){return m[this.optionValueKeyPropertyName]}_isNavigationKey(m){return this._isEdgeNavigationKeyCode(m)||this._isNextNavigationKeyCode(m)||this._isPreviousNavigationKeyCode(m)}_isEdgeNavigationKeyCode(m){return 36===m||35===m}_isNextNavigationKeyCode(m){return 40===m||39===m}_isPreviousNavigationKeyCode(m){return 38===m||37===m}ngAfterContentInit(){this._subscribeOnOptionFocused(),this._subscribeOnOptionSelected(),this._subscribeOnOptionChanged()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}resetState(){this._focusedOption=null}onKeyDown(m){const{keyCode:y}=m;this._isNavigationKey(y)&&(m.preventDefault(),this._processNavigationKey(y))}static{this.\u0275fac=function(y){return new(y||Qn)}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:Qn,selectors:[["","crtListboxViewport",""]],contentQueries:function(y,T,G){if(1&y&&i.\u0275\u0275contentQuery(G,Fn,5),2&y){let Q;i.\u0275\u0275queryRefresh(Q=i.\u0275\u0275loadQuery())&&(T.options=Q)}},hostVars:2,hostBindings:function(y,T){1&y&&i.\u0275\u0275listener("keydown",function(Q){return T.onKeyDown(Q)}),2&y&&i.\u0275\u0275attribute("aria-hidden",T.ariaHidden)("role",T.role)},inputs:{role:"role",optionValueKeyPropertyName:"optionValueKeyPropertyName"},outputs:{selectedChange:"selectedChange"},exportAs:["crtListboxViewport"]})}}class Gi{static{this.\u0275fac=function(y){return new(y||Gi)}}static{this.\u0275mod=i.\u0275\u0275defineNgModule({type:Gi})}static{this.\u0275inj=i.\u0275\u0275defineInjector({imports:[ne.CommonModule,$e.m_]})}}},11434:(k,Ce,b)=>{"use strict";b.d(Ce,{J:()=>i});var x=b(99314);class i{constructor(B){this.viewContainerRef=B}static{this.\u0275fac=function(v){return new(v||i)(x.\u0275\u0275directiveInject(x.ViewContainerRef))}}static{this.\u0275dir=x.\u0275\u0275defineDirective({type:i,selectors:[["","tsViewContainerRef",""]]})}}},79833:(k,Ce,b)=>{"use strict";b.d(Ce,{x:()=>W});var x=b(76696),i=b(99314),B=b(43674),v=b(71663);class W{constructor(){this._defaultTabIndex=0,this._defaultRole="application",this._keyboardEventHandlerMap=new Map([[v.U.Tab,this._onTabPressed.bind(this)],[v.U.Enter,this._onEnterPressed.bind(this)],[v.U.Escape,this._onEscapePressed.bind(this)]]),this._element=(0,i.inject)(i.ElementRef).nativeElement,this._document=(0,i.inject)(x.DOCUMENT),this._disableInert=!1,this._role=this._defaultRole,this._tabIndex=this._defaultTabIndex,this.enableAriaHidden=!0}get _isElementFocused(){return this._element.matches(":focus")}get _isElementFocusedWithin(){return this._element.matches(":focus-within")}set role(R){this._role=R||this._defaultRole}set tabIndex(R){this._tabIndex=R||this._defaultTabIndex}set disableInert(R){this._disableInert=R,this._disableInert?this._removeTabRedirectElement():this._createTabRedirectElement()}onFocusin({target:R}){this._isElementFocused||(this._lastFocusedElement=R),this._setTabRedirectElementFocusable(!1),this._setHostChildrenAriaHidden()}onFocusout({target:R}){this._element.isSameNode(R)&&this._setHostChildrenInert(!1),this._setTabRedirectElementFocusable(!this._isElementFocusedWithin)}onKeydown(R){this._keyboardEventHandlerMap.get(R.key)?.(R)}_getNextElementToFocus(){return[this._lastFocusedElement,this.focusEnterElement,(0,B.Kr)(this._element)?.[0]].find(c=>!!c&&(0,B.AO)(c))}_onTabPressed({shiftKey:R}){!R&&this._isElementFocused&&this._setHostChildrenInert(!0)}_onEnterPressed(R){this._isElementFocused&&(R.preventDefault(),this._getNextElementToFocus()?.focus())}_onEscapePressed(R){this._isElementFocused||R.defaultPrevented||(R.stopPropagation(),this._element.focus())}_createTabRedirectElement(){this._tabRedirectElement||(this._tabRedirectElement=this._document.createElement("div"),this._tabRedirectElement.tabIndex=0,this._tabRedirectElement.addEventListener("focus",()=>this._element.focus()),this._element.insertAdjacentElement("afterend",this._tabRedirectElement))}_removeTabRedirectElement(){this._tabRedirectElement?.remove(),this._tabRedirectElement=null}_setTabRedirectElementFocusable(R){if(!this._tabRedirectElement)return;const c=R?0:-1;this._tabRedirectElement.tabIndex!==c&&(this._tabRedirectElement.tabIndex=c)}_setHostChildrenInert(R){this._disableInert||this._updateHostChildrenAttribute("inert",R)}_setHostChildrenAriaHidden(){this.enableAriaHidden&&this._updateHostChildrenAttribute("aria-hidden",this._isElementFocused)}_updateHostChildrenAttribute(R,c=!0){Array.from(this._element.children).forEach(_=>c?_.setAttribute(R,"true"):_.removeAttribute(R))}ngAfterViewInit(){this._disableInert||this._createTabRedirectElement()}ngOnDestroy(){this._removeTabRedirectElement()}static{this.\u0275fac=function(c){return new(c||W)}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:W,selectors:[["","crtKeyboardFocusContainer",""]],hostVars:2,hostBindings:function(c,_){1&c&&i.\u0275\u0275listener("focusin",function(re){return _.onFocusin(re)})("focusout",function(re){return _.onFocusout(re)})("keydown",function(re){return _.onKeydown(re)}),2&c&&i.\u0275\u0275attribute("role",_._role)("tabindex",_._tabIndex)},inputs:{focusEnterElement:[i.\u0275\u0275InputFlags.None,"crtKeyboardFocusContainerFocusEnterElement","focusEnterElement"],enableAriaHidden:[i.\u0275\u0275InputFlags.None,"crtKeyboardFocusContainerEnableAriaHidden","enableAriaHidden"],role:[i.\u0275\u0275InputFlags.None,"crtKeyboardFocusContainerRole","role"],tabIndex:[i.\u0275\u0275InputFlags.None,"crtKeyboardFocusContainerTabIndex","tabIndex"],disableInert:[i.\u0275\u0275InputFlags.HasDecoratorInputTransform,"crtKeyboardFocusContainerDisableInert","disableInert",i.booleanAttribute]},exportAs:["crtKeyboardFocusContainer"],standalone:!0,features:[i.\u0275\u0275InputTransformsFeature]})}}},18498:(k,Ce,b)=>{"use strict";b.d(Ce,{I:()=>W});var x=b(99314),i=b(76696),B=b(50438);function v(I,R){if(1&I){const c=x.\u0275\u0275getCurrentView();x.\u0275\u0275elementStart(0,"div",1),x.\u0275\u0275listener("click",function(A){x.\u0275\u0275restoreView(c);const re=x.\u0275\u0275nextContext();return x.\u0275\u0275resetView(re.onClick(A))}),x.\u0275\u0275element(1,"mat-spinner",2),x.\u0275\u0275elementEnd()}if(2&I){const c=x.\u0275\u0275nextContext();x.\u0275\u0275styleProp("opacity",c.opacity),x.\u0275\u0275classProp("containerized-mask",c.containerized)}}class W{constructor(R){this._cdr=R,this._isVisible=!0,this._opacity=.6,this.containerized=!1}get isVisible(){return this._isVisible}set isVisible(R){this._isVisible!==R&&(this._isVisible=R,this._cdr.detectChanges())}set opacity(R){this._opacity=R,this._cdr.detectChanges()}get opacity(){return this._opacity}_assertIsBodyMask(){if(this.containerized)throw new Error("Is not body mask")}onClick(R){R.stopImmediatePropagation()}hideBodyMask(){this._assertIsBodyMask(),this.isVisible=!1}showBodyMask(){this._assertIsBodyMask(),this.isVisible=!0}static{this.\u0275fac=function(c){return new(c||W)(x.\u0275\u0275directiveInject(x.ChangeDetectorRef))}}static{this.\u0275cmp=x.\u0275\u0275defineComponent({type:W,selectors:[["ts-mask"]],inputs:{isVisible:"isVisible",opacity:"opacity"},decls:1,vars:1,consts:[["class","mask-wrap",3,"containerized-mask","opacity","click",4,"ngIf"],[1,"mask-wrap",3,"click"],["mode","indeterminate","diameter","32","aria-hidden","true",1,"mask-element"]],template:function(c,_){1&c&&x.\u0275\u0275template(0,v,2,4,"div",0),2&c&&x.\u0275\u0275property("ngIf",_.isVisible)},dependencies:[i.NgIf,B.wS],styles:[".component-mask[_nghost-%COMP%]   .mask-wrap[_ngcontent-%COMP%], .component-mask   [_nghost-%COMP%]   .mask-wrap[_ngcontent-%COMP%]{position:absolute}.component-mask[_nghost-%COMP%]   .mask-wrap[_ngcontent-%COMP%]   .mask-element[_ngcontent-%COMP%], .component-mask   [_nghost-%COMP%]   .mask-wrap[_ngcontent-%COMP%]   .mask-element[_ngcontent-%COMP%]{position:absolute}.mask-wrap[_ngcontent-%COMP%]{position:fixed;top:0;left:0;z-index:2011;width:100%;height:100%;background-color:#fff}.mask-wrap[_ngcontent-%COMP%]   .mask-element[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;margin-top:-16px;margin-left:-16px;z-index:999}.mask-wrap.containerized-mask[_ngcontent-%COMP%], .mask-wrap.containerized-mask[_ngcontent-%COMP%]   .mask-element[_ngcontent-%COMP%]{position:absolute}"],changeDetection:0})}}},91877:(k,Ce,b)=>{"use strict";b.d(Ce,{x:()=>c});var x=b(99314),i=b(49147),B=b(3126),v=b(76696);const I=["tooltipEl"],R=_=>({rtl:_});class c{constructor(A,re){this._directionality=A,this._sanitizer=re,this._defaultCssClass="base-tooltip crt-base-tooltip"}setInnerHTML(){this.tooltipEl&&(this.tooltipEl.nativeElement.innerHTML=this._sanitizer.sanitize(x.SecurityContext.HTML,this._tooltipConfig?.value))}set tooltipConfig(A){this._tooltipConfig!==A&&(this._tooltipConfig=A)}get tooltipConfig(){return this._tooltipConfig}get cssClasses(){let A=this._tooltipConfig?.cssClasses||this._defaultCssClass;const re="string"==typeof A;return re&&(A=A.split(" ")),A.includes("base-tooltip")&&"rtl"===this._directionality.value&&!A.includes("base-tooltip_rtl")&&A.push("base-tooltip_rtl"),re?A.join(" "):A}isRtl(){return"rtl"===this._directionality.value}ngAfterViewInit(){this.setInnerHTML()}static{this.\u0275fac=function(re){return new(re||c)(x.\u0275\u0275directiveInject(B.dS),x.\u0275\u0275directiveInject(i.DomSanitizer))}}static{this.\u0275cmp=x.\u0275\u0275defineComponent({type:c,selectors:[["crt-base-tooltip"]],viewQuery:function(re,h){if(1&re&&x.\u0275\u0275viewQuery(I,5,x.ElementRef),2&re){let xe;x.\u0275\u0275queryRefresh(xe=x.\u0275\u0275loadQuery())&&(h.tooltipEl=xe.first)}},inputs:{tooltipConfig:"tooltipConfig"},decls:3,vars:6,consts:[["tooltipEl",""],[1,"tooltip-value",3,"ngClass"]],template:function(re,h){1&re&&(x.\u0275\u0275elementStart(0,"div"),x.\u0275\u0275element(1,"span",1,0),x.\u0275\u0275elementEnd()),2&re&&(x.\u0275\u0275classMap(h.cssClasses),x.\u0275\u0275advance(),x.\u0275\u0275property("ngClass",x.\u0275\u0275pureFunction1(4,R,h.isRtl())))},dependencies:[v.NgClass],styles:[".base-tooltip[_ngcontent-%COMP%]{max-width:320px;max-height:50vh;overflow-y:auto;overflow-x:auto;box-shadow:0 2px 4px #18181840;padding-left:8px;padding-right:8px;margin:10px;opacity:1;word-wrap:break-word}.base-tooltip_rtl[_ngcontent-%COMP%]{padding-left:0;padding-right:8px}.base-tooltip[_ngcontent-%COMP%]   .rtl[_ngcontent-%COMP%]{direction:rtl;text-align:right}  .base-tooltip img{max-width:100%;height:auto}"]})}}},14361:(k,Ce,b)=>{"use strict";b.d(Ce,{x:()=>x.x});var x=b(91877)},35207:(k,Ce,b)=>{"use strict";b.d(Ce,{M:()=>B});var x=b(99314),i=b(26182),M=b(45202);class B{constructor(){this.showDelay=100,this.hideDelay=100,this.infoTooltipClass="",this.tooltipPosition="above"}static{this.\u0275fac=function(I){return new(I||B)}}static{this.\u0275cmp=x.\u0275\u0275defineComponent({type:B,selectors:[["ts-info-tooltip-icon"]],inputs:{message:"message",showDelay:"showDelay",hideDelay:"hideDelay",infoTooltipClass:"infoTooltipClass",tooltipPosition:"tooltipPosition"},decls:1,vars:5,consts:[["svgIcon","info-tooltip",3,"matTooltip","matTooltipClass","matTooltipShowDelay","matTooltipHideDelay","matTooltipPosition"]],template:function(I,R){1&I&&x.\u0275\u0275element(0,"mat-icon",0),2&I&&x.\u0275\u0275property("matTooltip",R.message)("matTooltipClass",R.infoTooltipClass)("matTooltipShowDelay",R.showDelay)("matTooltipHideDelay",R.hideDelay)("matTooltipPosition",R.tooltipPosition)},dependencies:[i.An,M.PD],styles:["[_nghost-%COMP%]{height:22px;width:22px}mat-icon[_ngcontent-%COMP%]{color:#22ac14;width:22px;height:22px;cursor:pointer}"]})}}},97124:(k,Ce,b)=>{"use strict";b.d(Ce,{d:()=>xe});var x=b(97270),F=b(96810),i=b(99314),M=b(44537),B=b(32028),v=b(96091),W=b(31424),I=b(76340),R=b(38503),c=b(71663);var A=b(14361),re=b(36381),h=b(90590);class xe{constructor(P,ie,Y,Se){this._overlay=P,this._overlayPositionBuilder=ie,this._elementRef=Y,this._ngZone=Se,this._delayTime=500,this._allowedKeyboardEvent=[c.U.Enter,c.U.Escape,c.U.Tab],this._class="crt-tooltip-trigger"}set tooltipConfig(P){if(!P)return;this._tooltipConfig=this._normalizeTooltipEvents(P);const ie=B.cn.isMobile?"touchstart":"click";if(this._tooltipConfig.showEvent.includes(ie)||this._elementRef.nativeElement.addEventListener(ie,this._handleScreenReaderEnterEvent.bind(this)),this._tooltipRef){if(this._tooltipRef.instance.tooltipConfig=this._tooltipConfig.tooltipConfig,!this._tooltipRef.instance.tooltipConfig)return;this._tooltipRef.instance.tooltipConfig.cssClasses=this._tooltipConfig?.panelClass}}get tooltipConfig(){return this._tooltipConfig}set crtTooltip(P){!P||Array.isArray(P)&&0===P.length||(this.tooltipConfig=new re.I({tooltipConfig:{value:Array.isArray(P)?P.join("<br>"):P},componentType:A.x}))}_createEventObservables(P,ie){return P?P?.map(Y=>(0,v.fromEvent)(ie,Y,{capture:this._tooltipConfig?.capture})):[]}_createShowEventStream(P){const ie=this._createEventObservables(this._tooltipConfig?.showEvent,this._elementRef.nativeElement);return this._ngZone.runOutsideAngular(()=>(0,v.merge)(...ie).pipe((0,W.Z)(this._delayTime),(0,I.Q)(P)))}_createHideEventStream(P){const ie=this._createEventObservables(this._tooltipConfig?.hideEvent,P);return this._ngZone.runOutsideAngular(()=>(0,v.merge)(...ie))}_createEventsStream(P,ie){this._subscription=ie.subscribe(),this._subscription.add(P.subscribe());const Y=(0,v.merge)(P,ie);Y.pipe((0,I.Q)(ie));const Se=Y.subscribe(ne=>{if(this._tooltipConfig.showEvent?.includes(ne.type)&&this.show(ne),this._tooltipConfig.hideEvent?.includes(ne.type)){let je=ne.relatedTarget;this._overlayRef?.overlayElement.contains(je)||(je=this._elementRef.nativeElement,this.hide(),this._subscription.unsubscribe());const it=this._createHideEventStream(je),ue=this._createShowEventStream(it);this._createEventsStream(ue,it)}});this._subscription.add(Se)}_createKeyboardEvent(){const P=this._ngZone.runOutsideAngular(()=>(0,v.fromEvent)(this._elementRef.nativeElement,"keydown",{capture:this._tooltipConfig?.capture}).pipe((0,R.p)(Y=>this._allowedKeyboardEvent.includes(Y.key)))),ie=this._ngZone.runOutsideAngular(()=>(0,v.fromEvent)(this._elementRef.nativeElement,"blur",{capture:this._tooltipConfig?.capture}));this._createKeyboardEventsStream(P,ie)}_createKeyboardEventsStream(P,ie){this._keypressSubscription=ie.subscribe();const Y=(0,v.merge)(P,ie);Y.pipe((0,I.Q)(ie));const Se=Y.subscribe(ne=>{ne instanceof KeyboardEvent?this._onHandleKeyboardEvent(ne):ne instanceof FocusEvent&&this._onHandleFocusEvent(ne)});this._keypressSubscription.add(Se)}_onHandleKeyboardEvent(P){switch(P.key){case c.U.Enter:P.stopPropagation(),this._overlayRef?.hasAttached()?this.hide():this.show(P);break;case c.U.Escape:this._overlayRef?.hasAttached()&&P.stopPropagation(),this.hide(),this._keypressSubscription.unsubscribe(),this._createKeyboardEvent();break;case c.U.Tab:this._overlayRef?.hasAttached()&&(this.hide(),this._keypressSubscription.unsubscribe(),this._createKeyboardEvent())}}_handleScreenReaderEnterEvent(P){P.stopPropagation();const ie=document.activeElement===this._elementRef.nativeElement;if(P.isPrimary&&1===P.buttons&&ie){const Y=new KeyboardEvent("keydown",{key:"Enter",code:"Enter",keyCode:13,charCode:13,bubbles:!0,cancelable:!0});this._onHandleKeyboardEvent(Y)}}_onHandleFocusEvent(P){if("blur"!==P.type)return;const ie=P.relatedTarget;this._overlayRef?.overlayElement.contains(ie)||(this.hide(),this._keypressSubscription.unsubscribe()),this._createKeyboardEvent()}_getPreferredPositions(){return[{originX:"end",originY:"center",overlayX:"start",overlayY:"center",offsetX:0,offsetY:0,panelClass:this._tooltipConfig?.panelClass},{originX:"end",originY:"bottom",overlayX:"center",overlayY:"top",offsetX:0,offsetY:0,panelClass:this._tooltipConfig?.panelClass},{originX:"center",originY:"center",overlayX:"end",overlayY:"top",offsetX:0,offsetY:0,panelClass:this._tooltipConfig?.panelClass}]}_prepareTooltipConfigFromOverlayConfig(P){const ie=P.tooltipConfig;return this._tooltipConfig.tooltipConfig&&P.panelClass&&(ie.cssClasses=P.panelClass),ie}_createOverlay(){if(!this._tooltipConfig)return;const P=this._tooltipConfig?.preferredPositions??this._getPreferredPositions(),ie=this._overlayPositionBuilder.flexibleConnectedTo(this._elementRef).withPositions(P),Y={scrollStrategy:this._overlay.scrollStrategies.close(),positionStrategy:ie};this._tooltipConfig?.width&&Object.assign(Y,{width:this._tooltipConfig?.width}),this._tooltipConfig?.height&&Object.assign(Y,{height:this._tooltipConfig?.height}),this._overlayRef=this._overlay.create(Y),this._tooltipConfig.closeOnOutsideClick&&this._overlayRef.outsidePointerEvents().subscribe(()=>this.hide()),this._overlayRef.keydownEvents().pipe((0,R.p)(Se=>Se.key===c.U.Escape)).subscribe(()=>{this.hide()})}_subscribeOnClickToHide(){this._ngZone.runOutsideAngular(()=>(0,v.fromEvent)(this._elementRef.nativeElement,B.cn.isMobile?"touchstart":"click").subscribe(P=>{P.ignoreHandle=this._overlayRef?.hasAttached(),this.hide()}))}_normalizeTooltipEvents(P){const ie=Array.isArray(P.showEvent)?P.showEvent:[P.showEvent],Y=Array.isArray(P.hideEvent)?P.hideEvent:[P.hideEvent];return{...P,showEvent:ie,hideEvent:Y}}hide(){this._overlayRef?.hasAttached()&&(this._overlayRef.detach(),this._overlayRef.dispose(),this._overlayRef=null)}show(P){if(P.ignoreHandle)return;const ie=P.relatedTarget;!this._tooltipConfig||ie&&!document.body.contains(ie)||(P?.stopPropagation(),this._overlayRef||this._createOverlay(),this._overlayRef.hasAttached()||(this._tooltipRef=this._overlayRef.attach(new F.A8(this._tooltipConfig.componentType))),this._tooltipRef&&(this._tooltipRef.instance.tooltipConfig=this._prepareTooltipConfigFromOverlayConfig(this._tooltipConfig),this._tooltipRef.location.nativeElement.setAttribute("id",this.id)))}ngAfterViewInit(){const P=this._createHideEventStream(this._elementRef.nativeElement),ie=this._createShowEventStream(P);this._createEventsStream(ie,P),this._createKeyboardEvent(),this._subscribeOnClickToHide()}ngOnDestroy(){this.hide(),this._subscription?.unsubscribe(),this._keypressSubscription?.unsubscribe()}static{this.\u0275fac=function(ie){return new(ie||xe)(i.\u0275\u0275directiveInject(h.hJ),i.\u0275\u0275directiveInject(h.lF),i.\u0275\u0275directiveInject(i.ElementRef),i.\u0275\u0275directiveInject(i.NgZone))}}static{this.\u0275dir=i.\u0275\u0275defineDirective({type:xe,selectors:[["","crtTooltip",""]],hostVars:2,hostBindings:function(ie,Y){2&ie&&i.\u0275\u0275classMap(Y._class)},inputs:{id:[i.\u0275\u0275InputFlags.None,"crtTooltipId","id"],tooltipConfig:"tooltipConfig",crtTooltip:"crtTooltip"},exportAs:["crtTooltip"]})}}(0,x.Cg)([(0,M.CrtInput)(),(0,x.Sn)("design:type",String)],xe.prototype,"id",void 0),(0,x.Cg)([(0,M.CrtInput)(),(0,x.Sn)("design:type",re.I),(0,x.Sn)("design:paramtypes",[re.I])],xe.prototype,"tooltipConfig",null),(0,x.Cg)([(0,M.CrtInput)(),(0,x.Sn)("design:type",Object),(0,x.Sn)("design:paramtypes",[Object])],xe.prototype,"crtTooltip",null)},36381:(k,Ce,b)=>{"use strict";b.d(Ce,{I:()=>F});var x=b(32028);class F{constructor(M){this.showEvent="mouseenter",this.hideEvent="mouseleave",this.capture=!1,this.closeOnOutsideClick=!1,x.cn.isMobile&&(M.closeOnOutsideClick=!0,M.showEvent="touchstart",M.hideEvent="touched"),Object.assign(this,M)}}},54668:(k,Ce,b)=>{"use strict";b.d(Ce,{PH:()=>M,M_:()=>F,OK:()=>x});const x={ShortTextCaption:50,MediumTextCaption:250,LongTextCaption:500},F={Integer:{max:2147483647,min:-2147483647},Float:{max:69999999999999.99,min:-69999999999999.99}};class i{get id(){return this._id}constructor(v,W){this._id=v,this.data=W,this.children=[],this.parent=null}}class M{get root(){return this._root}constructor(v,W){this._root=new i(W,v)}_recurse(v,W){const I=W.children;for(let R=0;I&&R<I.length;R++)this._recurse(v,I[R]);v(W)}traverseDepthFirstSearch(v,W=this._root){this._recurse(v,W)}get(v,W=this._root){let I=null;return this.traverseDepthFirstSearch(c=>{c.id===v&&(I=c)},W),I}add({data:v,id:W},I){const R=new i(W,v);I.children.push(R),R.parent=I}remove(v,W=this.root){let I=null;if(this.traverseDepthFirstSearch(c=>{c.id===v&&(I=c)},W),I){const c=I.parent;I.children=[];const _=c.children.findIndex(A=>A===I);return c.children.splice(_,1),!0}return!1}contains(v,W=this._root){let I=null;return this.traverseDepthFirstSearch(c=>{c.id===v&&(I=c)},W),!!I}}},32028:(k,Ce,b)=>{"use strict";b.d(Ce,{NS:()=>st,Vx:()=>Ne,op:()=>rn,h1:()=>oe.h,SH:()=>Ti,Dj:()=>R,X4:()=>Mi,MV:()=>Se,G8:()=>c,gX:()=>at,kW:()=>ia,$A:()=>si,u_:()=>Tt,pO:()=>Ae,wZ:()=>lt,rR:()=>zt,cn:()=>Un,Js:()=>z,rK:()=>ri,ZP:()=>$e,xS:()=>Ot,Bo:()=>zn,Ny:()=>_s,BB:()=>Nt,hk:()=>It,mh:()=>fe,BV:()=>ln,DH:()=>Zt,pR:()=>An});var x=b(76696),F=b(99314),i=b(96091),M=b(38503),B=b(93527),v=b(46715);const W=new F.InjectionToken("CustomEventApplicationIdToken");new F.InjectionToken("CustomEventServiceToken");class R{constructor(L,H=null){this.document=L,this.appId=H,this.customEventName="TSCustomEventChannel",this.appId=H||Math.random().toString()}subscribe(L){return this.customEventObserver$=this.customEventObserver$||(0,i.fromEvent)(document,this.customEventName),this.customEventObserver$.pipe((0,M.p)(H=>H.detail.eventName===L&&H.detail.sender!==this.appId),(0,B.T)(H=>H.detail.payload))}createOutboundChannel(L){const H=new i.Subject;return H.asObservable().subscribe(ae=>{const le=new CustomEvent(this.customEventName,{detail:{eventName:L,sender:this.appId,payload:ae}});this.document.dispatchEvent(le)}),H}getDataViaEvent(L,H={}){return new i.Observable(ae=>{this.subscribe(L).pipe((0,v.$)()).subscribe(le=>{ae.next(le),ae.complete()}),this.createOutboundChannel(L).next(H)})}getDataStreamViaEvent(L,H={}){return new i.Observable(ae=>{const le=this.subscribe(L).subscribe(Je=>{ae.next(Je)},i.noop,()=>ae.complete());return this.createOutboundChannel(L).next(H),()=>{le.unsubscribe()}})}static{this.\u0275fac=function(H){return new(H||R)(F.\u0275\u0275inject(x.DOCUMENT),F.\u0275\u0275inject(W,8))}}static{this.\u0275prov=F.\u0275\u0275defineInjectable({token:R,factory:R.\u0275fac,providedIn:"root"})}}const c=["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","title","video","xmp"];var _=b(43378);function E(ee){return new RegExp("(?=^.{1,250}$)^[\u0430-\u044f\u0410-\u042fa-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[\u0430-\u044f\u0410-\u042fa-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[\u0430-\u044f\u0410-\u042fa-zA-Z0-9](?:[\u0430-\u044f\u0410-\u042fa-zA-Z0-9-]*[\u0430-\u044f\u0410-\u042fa-zA-Z0-9])?\\.)+[\u0430-\u044f\u0410-\u042fa-zA-Z0-9](?:[\u0430-\u044f\u0410-\u042fa-zA-Z0-9-]*[\u0430-\u044f\u0410-\u042fa-zA-Z0-9])?$","g").test(ee)}const ie_name="uponSanitizeElement",ie_func=(ee,L)=>{const H=L.tagName;E(H)&&ee.insertAdjacentText("afterbegin",`<${H}>`)},Y_name="afterSanitizeAttributes",Y_func=(ee,L)=>{const H=window?.location?.origin;if("A"===ee.nodeName&&!ee.getAttribute("href")?.toLowerCase().startsWith(H)){ee.setAttribute("target","_blank");let ae=ee.getAttribute("rel")||"";["noopener","noreferrer"].forEach(le=>{ae.includes(le)||(ae+=" "+le)}),ee.setAttribute("rel",ae.trim())}},Se=new F.InjectionToken("Represents a DOM purifier",{factory:()=>(_.A.addHook(ie_name,ie_func),_.A.addHook(Y_name,Y_func),_.A),providedIn:"platform"});var ne=b(44537);class me{static create(L){return new L}}class z{constructor(){this.speechResult=new i.Subject,this.speechEnd=new i.Subject}static _getInternalApiClass(){return window.SpeechRecognition||window.webkitSpeechRecognition}static isSupported(){return void 0!==z._getInternalApiClass()}_subscribeEvents(){this._internalApi.addEventListener("result",this.onResult.bind(this)),this._internalApi.addEventListener("speechend",this.onSpeechEnd.bind(this))}_unsubscribeEvents(){this._internalApi.removeEventListener("result",this.onResult),this._internalApi.removeEventListener("speechend",this.onSpeechEnd)}init(L){const H=z._getInternalApiClass();this._internalApi=me.create(H),this._internalApi.continuous=!0,this._internalApi.lang=L.lang||"en-US",this._subscribeEvents()}onResult(L){const{resultIndex:H,results:ae}=L,le=ae[H][0];if(!le)throw new Error("No results to transcript");this.speechResult.next(le.transcript)}onSpeechEnd(){this.speechEnd.next()}destroy(){this._unsubscribeEvents(),this._internalApi=null}startRecognition(){this._internalApi.start()}stopRecognition(){this._internalApi.stop()}static{this.\u0275fac=function(H){return new(H||z)}}static{this.\u0275prov=F.\u0275\u0275defineInjectable({token:z,factory:z.\u0275fac})}}var tt=b(44382);class se{get messages$(){return this._messages$}constructor(L,H){this._ngZone=H;const ae=new i.Subject;this._messages$=ae.pipe(this._runInZone(this._ngZone)),this._broadcastChannel=new tt.X2(L),this._broadcastChannel.onmessage=le=>ae.next(le)}_runInZone(L){return H=>new i.Observable(ae=>{H.subscribe(le=>L.run(()=>ae.next(le)))})}publish(L){return(0,i.from)(this._broadcastChannel.postMessage(L))}}class Ne{constructor(L){this._ngZone=L}createInstance(L){return new se(L,this._ngZone)}static{this.\u0275fac=function(H){return new(H||Ne)(F.\u0275\u0275inject(F.NgZone))}}static{this.\u0275prov=F.\u0275\u0275defineInjectable({token:Ne,factory:Ne.\u0275fac,providedIn:"root"})}}class Ae{static toColdObservable(L){return new i.Observable(H=>{L().subscribe(le=>{H.next(le),H.complete()})})}}class de{log(L,H,...ae){console.log(L,...ae)}warn(L,H,...ae){console.warn(L,...ae)}error(L,H,...ae){console.error(L,...ae)}exception(L,H,...ae){(console.exception||console.error)(L,...ae)}static{this.\u0275fac=function(H){return new(H||de)}}static{this.\u0275prov=F.\u0275\u0275defineInjectable({token:de,factory:de.\u0275fac})}}class ge{constructor(L,H,ae=null){this._injector=L,this._registrationMap=H,this._defaultInstanceType=ae}_getInstance(L,H){return H?"injectable"in H&&null!=H.injectable?this._injector.get(H.injectable):"useFactory"in H&&"function"==typeof H.useFactory?H.useFactory(L):"useValue"in H?H.useValue:null:null}_getDefaultInstance(L){return this._getInstance(L,this._defaultInstanceType)}_getInstanceByType(L){if(this._registrationMap.has(L)){const H=this._registrationMap.get(L);return this._getInstance(L,H)}}_getInstanceByPredicate(L){for(const[H,ae]of this._registrationMap)if("function"==typeof H&&H(L))return this._getInstance(L,ae)}create(L=null){return null==L?this._getDefaultInstance(L):this._getInstanceByType(L)??this._getInstanceByPredicate(L)??this._getDefaultInstance(L)}static{this.\u0275fac=function(H){F.\u0275\u0275invalidFactory()}}static{this.\u0275prov=F.\u0275\u0275defineInjectable({token:ge,factory:ge.\u0275fac,providedIn:"root"})}}var Oe=b(9461);class at{static _createMappings(L){const H=new Map;return(L=L??[]).forEach(ae=>{const le=ae.predicate,Je=(0,Oe.A)(ae,"predicate");H.set(le,Je)}),H}static create(L){const{mappings:H,default:ae,token:le}=L??{};return{provide:le,useFactory:Je=>{const ze=this._createMappings(H);return new ge(Je,ze,ae)},deps:[F.Injector]}}}class st{setNext(L){return this.nextHandler=L,L}handle(L){if(this.nextHandler)return this.nextHandler.handle(L)}}b(35278);var oe=b(24961),V=b(57834);function j(ee){return Array.isArray(ee)?ee:[ee]}function fe(ee,L){if(!ee)return"";if(!L)return ee;let H=[ee];return H=function ye(ee,L){if(!ee)return[];let H=j(ee);if(!L)return H;const ae=j(L),le=ae.map(({replaceMacros:Je})=>Je);return ae.forEach(({searchValue:Je,replaceMacros:ze})=>{if(Je&&ze){const Qt=new RegExp(`(${ze})`,"g"),dn=H.map(pn=>le.includes(pn)?pn:pn.split(Je).join(ze).split(Qt));H=(0,V.A)(dn)}}),H}(H,L=j(L)),H=function Z(ee,L){return L.forEach(({replaceMacros:H,replaceValue:ae})=>{ee=ee.map(le=>le===H?ae??"":le)}),ee}(H,L),H.join("")}b(31145);function rn(ee){return function(L){Reflect.defineMetadata("requestType",ee.requestType,L)}}var En=b(54807),on=b(93422),Re=b(72831);function _s(ee){return L=>L.pipe((0,En.H)((H,ae)=>ee(H,ae).pipe((0,B.T)(le=>[H,le]))))}function Nt(ee){return L=>L.pipe((0,on.Z)((H,ae)=>ee(H,ae).pipe((0,B.T)(le=>[H,le]))))}function It(ee){return L=>L.pipe((0,on.Z)((H,ae)=>ee(H,ae).pipe((0,B.T)(()=>H))))}function Zt(ee){return L=>L.pipe((0,Re.n)((H,ae)=>ee(H,ae).pipe((0,B.T)(le=>[H,le]))))}function An(ee){return L=>L.pipe((0,Re.n)((H,ae)=>ee(H,ae).pipe((0,B.T)(()=>H))))}function ln(ee){return L=>ee?new i.Observable(H=>L.subscribe({next:ze=>ee.run(()=>H.next(ze)),error:ze=>ee.run(()=>H.error(ze)),complete:()=>ee.run(()=>H.complete())})):L}var Rn=b(71679);class si{static initialize(){Rn.config({disableDefaultAlphabetLength:!0,disableDefaultIdLength:!0,idLength:7}),Rn.characters("0123456789abcdefghijklmnopqrstuvwxyz")}static generateUnique(L,H="",ae="_"){const le=new RegExp(`^${H}`);return H+L.replace(le,"")+ae+Rn.generate()}}si.initialize();const ia=new F.InjectionToken("An abstraction over window.navigator object",{factory:()=>window.navigator,providedIn:"root"}),$e=(new F.InjectionToken("CURRENT_TAB_ID_TOKEN"),(0,ne.generateGuid)(),new F.InjectionToken("Dialog token"),new F.InjectionToken("WindowToken",{providedIn:"root",factory:aa}));function aa(){return window}const ri={provide:$e,useFactory:aa};class Ot{constructor(L){this._window=L,this._hasFocus=!1,this._window.addEventListener("focus",()=>{this._hasFocus=!0}),this._window.addEventListener("blur",()=>{this._hasFocus=!1})}_getIsDocumentVisible(){return"hidden"!==document.visibilityState}get hasFocus(){return this._hasFocus}get isActive(){return this._getIsDocumentVisible()}focus(){this._window.focus()}static{this.\u0275fac=function(H){return new(H||Ot)(F.\u0275\u0275inject($e))}}static{this.\u0275prov=F.\u0275\u0275defineInjectable({token:Ot,factory:Ot.\u0275fac,providedIn:"root"})}}var Gt=b(81960);class Ti{constructor(L){this._injector=L}defineComponent(L,H,ae=null){const le=(0,Gt.createCustomElement)(H,{injector:ae||this._injector});customElements.get(L)||customElements.define(L,le)}static{this.\u0275fac=function(H){return new(H||Ti)(F.\u0275\u0275inject(F.Injector))}}static{this.\u0275prov=F.\u0275\u0275defineInjectable({token:Ti,factory:Ti.\u0275fac,providedIn:"root"})}}F.APP_INITIALIZER;const Vt=new F.InjectionToken("LOCAL_STORAGE_SERVICE_CONFIG");class Jt{static forRoot(L={}){return{ngModule:Jt,providers:[{provide:Vt,useValue:L}]}}static{this.\u0275fac=function(H){return new(H||Jt)}}static{this.\u0275mod=F.\u0275\u0275defineNgModule({type:Jt})}static{this.\u0275inj=F.\u0275\u0275defineInjector({})}}const ot="LOCAL_STORAGE_NOT_SUPPORTED";class cn{constructor(L={}){this._isSupported=!1,this._prefix="ls",this._storageType="localStorage";const{prefix:H,storageType:ae}=L;null!=H&&this._setPrefix(H),null!=ae&&this._setStorageType(ae),this._isSupported=this._checkSupport()}_deriveKey(L){return`${this._prefix}${L}`}_checkSupport(){try{const L=this._storageType in window&&null!==window[this._storageType];if(L){this._webStorage=window[this._storageType];const H=this._deriveKey(`__${Math.round(1e7*Math.random())}`);this._webStorage.setItem(H,""),this._webStorage.removeItem(H)}return L}catch(L){return console.error(L.message),!1}}_setPrefix(L){this._prefix=L;this._prefix&&!this._prefix.endsWith(".")&&(this._prefix=this._prefix?`${this._prefix}.`:"")}_setStorageType(L){this._storageType=L}get(L){if(!this._isSupported)return console.warn(ot),null;const H=this._webStorage?this._webStorage.getItem(this._deriveKey(L)):null;if(!H||"null"===H)return null;try{return JSON.parse(H)}catch{return null}}set(L,H){const ae=void 0===H?null:JSON.stringify(H);if(!this._isSupported)return console.warn(ot),!1;try{this._webStorage&&this._webStorage.setItem(this._deriveKey(L),ae)}catch(le){return console.error(le.message),!1}return!0}remove(...L){let H=!0;return L.forEach(ae=>{this._isSupported||(console.warn(ot),H=!1);try{this._webStorage.removeItem(this._deriveKey(ae))}catch(le){console.error(le.message),H=!1}}),H}static{this.\u0275fac=function(H){return new(H||cn)(F.\u0275\u0275inject(Vt,8))}}static{this.\u0275prov=F.\u0275\u0275defineInjectable({token:cn,factory:cn.\u0275fac,providedIn:"root"})}}var Ut,ee,Di=b(73308);class lt{playFromSource(L,H=!1){return(0,Di.A)(function*(){const ae=new Audio(L),le=ae.play();if(void 0!==le)try{yield le}catch(Je){if(ae.muted=!0,H)throw Je}})()}static{this.\u0275fac=function(H){return new(H||lt)}}static{this.\u0275prov=F.\u0275\u0275defineInjectable({token:lt,factory:lt.\u0275fac,providedIn:"root"})}}(ee=Ut||(Ut={})).Small="small",ee.Medium="medium",ee.Large="large",ee.XL="xl",ee.XXL="xxl";class We{constructor(L,H){this._window=L,this._document=H,this._minScreenSize=600,this._mediumScreenSize=790,this._largeScreenSize=1079,this._xlScreenSize=1280,this._screenSizeChanges$=new i.BehaviorSubject(this._currentScreenSizeType),this._changeScreenSizeType()}get currentScreenSizeType(){return this._currentScreenSizeType}get isSmallScreen(){return this._currentScreenSizeType===Ut.Small}_setScreenSizeTypeAttribute(L){this._document.body.setAttribute("screen-size-type",L)}_getScreenSizeType(){const L=this._window.innerWidth;return L<=this._minScreenSize?Ut.Small:L<=this._mediumScreenSize?Ut.Medium:L<=this._largeScreenSize?Ut.Large:L<=this._xlScreenSize?Ut.XL:Ut.XXL}_changeScreenSizeType(){const L=this._getScreenSizeType();return L!==this._currentScreenSizeType&&(this._currentScreenSizeType=L,this._setScreenSizeTypeAttribute(L),!0)}screenSizeTypeChangeNotifier(){return this._screenSizeChanges$.asObservable()}refreshCurrentScreenSizeType(){this._changeScreenSizeType()&&this._screenSizeChanges$.next(this._currentScreenSizeType)}static{this.\u0275fac=function(H){return new(H||We)(F.\u0275\u0275inject($e),F.\u0275\u0275inject(x.DOCUMENT))}}static{this.\u0275prov=F.\u0275\u0275defineInjectable({token:We,factory:We.\u0275fac,providedIn:"root"})}}const zt=new F.InjectionToken("USER_DESKTOP_NOTIFICATION_SETTINGS_PROVIDER"),Mi=new F.InjectionToken("DESKTOP_NOTIFICATION_SENDER_PROVIDER");class Un{static get isMobile(){const L=window.navigator.userAgent;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile|mobile|CriOS/i.test(L)}}var Tt;!function(ee){ee[ee.StayLoggedIn=0]="StayLoggedIn",ee[ee.Exit=1]="Exit",ee[ee.NotSet=2]="NotSet"}(Tt||(Tt={}));var Yt=b(41992),un=b(86731);class Kt{constructor(){this._liveAnnouncer=(0,F.inject)(Yt.Ai),this._translateService=(0,F.inject)(un.c$)}announce(L,H,ae=200){var le=this;return(0,Di.A)(function*(){const Je=le._translateService.instant(L);yield le._liveAnnouncer.announce(Je,H,ae)})()}static{this.\u0275fac=function(H){return new(H||Kt)}}static{this.\u0275prov=F.\u0275\u0275defineInjectable({token:Kt,factory:Kt.\u0275fac,providedIn:"root"})}}function oi(ee){return ee.filter(L=>0===L.dependsOn.length).map(L=>L.name)}function zn(ee){if(!ee||0===ee.length)return[];const L=function Dt(ee){return ee.map(L=>({name:L.name,dependsOn:[...L.dependsOn]}))}(ee),H=L.map(Qt=>Qt.dependsOn).flat().length;let ae=0;const le=oi(L);if(0===le.length)throw new Error("Cyclic dependencies detected");const Je=[[...le]];let ze=L.filter(Qt=>0!==Qt.dependsOn.length);for(;0!==ze.length;){if(ae>H)throw new Error("Process is hanging while build order");ae++,ze=ze.map(dn=>({name:dn.name,dependsOn:dn.dependsOn.filter(pn=>!le.includes(pn))}));const Qt=oi(ze);if(0===Qt.length)throw new Error("Cyclic dependencies detected");le.push(...Qt),Je.push(Qt),ze=ze.filter(dn=>0!==dn.dependsOn.length)}return Je}},24961:(k,Ce,b)=>{"use strict";b.d(Ce,{h:()=>I});var x=b(99314),F=b(86731),i=b(64455),M=b(96091),B=b(76340),v=b(35278);class W{constructor(c,_){this._translateService=c,this._i18nTranslates=_,this._destroyed$=new M.Subject,this._init()}_init(){this._subscribe(),this._initDefaultLanguage()}_initDefaultLanguage(){const c=this._translateService.currentLang,_=this._translateService.defaultLang,A=c||_;A&&this._addTranslates(A)}_subscribe(){(0,M.merge)(this._translateService.onLangChange,this._translateService.onDefaultLangChange).pipe((0,B.Q)(this._destroyed$)).subscribe(c=>this._addTranslates(c.lang))}_addTranslates(c){const _=(0,i.A)(this._i18nTranslates),A=this._translateService.defaultLang;_.forEach(re=>{const h=re[c],xe=re[A];this._translateService.setTranslation(c,h,!0),this._translateService.setTranslation(A,xe,!0)})}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}static{this.\u0275fac=function(_){return new(_||W)(x.\u0275\u0275inject(F.c$),x.\u0275\u0275inject(v.P))}}static{this.\u0275prov=x.\u0275\u0275defineInjectable({token:W,factory:W.\u0275fac})}}class I{constructor(c){this._crtLibTranslateService=c}static forRoot(c){return{ngModule:I,providers:[{multi:!0,provide:v.P,useValue:c.i18n},W]}}static{this.\u0275fac=function(_){return new(_||I)(x.\u0275\u0275inject(W))}}static{this.\u0275mod=x.\u0275\u0275defineNgModule({type:I})}static{this.\u0275inj=x.\u0275\u0275defineInjector({imports:[F.h]})}}},35278:(k,Ce,b)=>{"use strict";b.d(Ce,{P:()=>i});var x=b(99314);const i=new x.InjectionToken("I18nTranslatesToken")},66269:(k,Ce,b)=>{"use strict";b.r(Ce),b.d(Ce,{CodemirrorComponent:()=>je,CodemirrorModule:()=>it,LineSeparator:()=>ne});var x=b(99314),F=b(37222),i=b(54458),M=b(8931),B=b(52935),v=b(45970),W=b(4770),I=b(87332),R=b(91910),c=b(32971),_=b(57841),A=b(39182),re=b(7096),h=b(37436),xe=b(13579),E=b(77228),P=b(4776),ie=b(21483);class Y{static{this.supportedLanguages={[W.F.Markdown]:{lang:h.wD,parser:h.Sz.parser},[W.F.Javascript]:{lang:_.Q2,parser:_.o$.parser},[W.F.Less]:{lang:re.M7,parser:re.C3.parser},[W.F.Css]:{lang:re.M7,parser:c.Yk.parser},[W.F.Sql]:{lang:xe.ll,parser:xe.I$.language.parser},[W.F.PgSql]:{lang:xe.ll,parser:xe.I$.language.parser},[W.F.SqlServer]:{lang:xe.ll,parser:xe.I$.language.parser},[W.F.Json]:{lang:A.Pq,parser:A.jb.parser},[W.F.Csharp]:{lang:ie.I2,parser:ie.Ar.parser},[W.F.Xml]:{lang:E._n,parser:E.s3.parser},[W.F.Http]:{lang:E._n,parser:h.Sz.parser}}}static lintCode(me,z,tt={}){const se=[];return z===W.F.Javascript?b.e(581).then(b.bind(b,12581)).then(({Linter:Ne})=>(0,_.W4)(new Ne,tt)(me)):([W.F.Json,W.F.Less,W.F.Css,W.F.Xml].includes(z)&&Y.supportedLanguages[z].parser.parse(me.state.doc.toString()).iterate({enter:({type:de,from:K,to:X,...ge})=>{de.isError&&se.push({from:K,to:X,severity:"warning",message:"Uncompleted condition"})}}),Promise.resolve(se))}static{this.onChangeExtension=me=>v.Lz.updateListener.of(z=>{if(!z.docChanged)return;const tt=z.state.doc.toString();me(tt)})}static{this.defaultExtensions=()=>[(0,i.y9)(i.Zt,{fallback:!0}),(0,M.pJ)(),(0,v.N$)(),(0,v.Wu)(),(0,v.dz)(),(0,P.gN)(),(0,I.yU)(),(0,i.SG)(),(0,I.wm)(),(0,i.Lv)(),(0,v.$K)(),(0,v.D4)(),v.Lz.lineWrapping,(0,R.b6)()]}static{this.defaultKeyMaps=()=>[...M.$w,...P.Eo,...R.cL,...R.pw,...I.OO,R.Yc,{key:"Alt-g",run:P.cB},{key:"Ctrl-Shift-f",run:P.Aw},{key:"Ctrl-Shift-r",run:P.yh},{key:"Ctrl-Shift-z",run:R.ZS},{key:"Ctrl-y",run:R.SA},{key:"Ctrl-Space",run:I.rB}]}}const Se=["host"];var ne,ue;(ue=ne||(ne={})).CR="\r",ue.LF="\n",ue.CRLF="\r\n";class je{set value(me){"string"==typeof me&&this._editorView?.state.doc.toString()!==me&&(this._value=me,this._editorView?.dispatch({changes:{from:0,to:this._editorView.state.doc.length,insert:this._value}}))}get value(){return this._value}get lineNumbers(){return this._editorView.state.doc.lines}set editable(me){this._editable!==me&&(this._editable=me,this._editorView?.dispatch({effects:this._editableCompartment.reconfigure(v.Lz.editable.of(me))}))}set readOnly(me){this._readOnly!==me&&(this._readOnly=me,this._editorView?.dispatch({effects:this._readonlyCompartment.reconfigure(B.$t.readOnly.of(me))}))}set language(me){if(me||(me=W.F.Markdown),this._language!==me){if(!Y.supportedLanguages[me])throw new Error(`Unsupported language: ${me}`);this._language=me,this._editorView?.dispatch({effects:this._languageCompartment.reconfigure(Y.supportedLanguages[me].lang())})}}set lineSeparator(me){this._lineSeparator!==me&&(this._lineSeparator=me,this._editorView?.dispatch({effects:this._lineSeparatorCompartment.reconfigure(B.$t.lineSeparator.of(this._lineSeparator))}))}constructor(me){this._element=me,this._value="",this._language=W.F.Javascript,this._languageCompartment=new B.xx,this._editable=!0,this._editableCompartment=new B.xx,this._readOnly=!1,this._readonlyCompartment=new B.xx,this._lineSeparator=ne.LF,this._lineSeparatorCompartment=new B.xx,this._lineWrappedCompartment=new B.xx,this.keyBinding=[],this.languageOptions={},this.indentUnitValue="  ",this.valueChanged=new x.EventEmitter,this.onChange=z=>{},this.onTouched=()=>{}}_onEditorValueChanged(me){this.value=me,this.onChange(me),this.valueChanged.emit(me),this.onTouched()}_initEditorView(){return new v.Lz({doc:this.value,extensions:[this._lineSeparatorCompartment.of(B.$t.lineSeparator.of(this._lineSeparator)),this._languageCompartment.of(Y.supportedLanguages[this._language].lang()),this._editableCompartment.of(v.Lz.editable.of(this._editable)),this._readonlyCompartment.of(B.$t.readOnly.of(this._readOnly)),(0,M.bu)(me=>Y.lintCode(me,this._language,this.languageOptions)),Y.onChangeExtension(this._onEditorValueChanged.bind(this)),...Y.defaultExtensions(),v.w4.of([...Y.defaultKeyMaps(),...this.keyBinding]),this._lineWrappedCompartment.of(v.Lz.lineWrapping),i.Xt.of(this.indentUnitValue),v.Lz.domEventHandlers({paste:me=>{this._onPaste&&this._onPaste(me)}})],parent:this.hostContainer?.nativeElement})}_adjustCodeEditorContent(){this._element.nativeElement.querySelector(".cm-content")?.setAttribute("aria-label","CodeEditorContent")}ngAfterViewInit(){this._editorView=this._initEditorView(),this._adjustCodeEditorContent()}ngOnDestroy(){this._editorView?.destroy()}writeValue(me){"string"==typeof me&&(this.value=me.toString())}registerOnChange(me){this.onChange=me}registerOnTouched(me){this.onTouched=me}registerOnPaste(me){this._onPaste=me}static{this.\u0275fac=function(z){return new(z||je)(x.\u0275\u0275directiveInject(x.ElementRef))}}static{this.\u0275cmp=x.\u0275\u0275defineComponent({type:je,selectors:[["ts-codemirror"]],viewQuery:function(z,tt){if(1&z&&x.\u0275\u0275viewQuery(Se,5),2&z){let se;x.\u0275\u0275queryRefresh(se=x.\u0275\u0275loadQuery())&&(tt.hostContainer=se.first)}},inputs:{value:"value",editable:"editable",readOnly:"readOnly",language:"language",lineSeparator:"lineSeparator",keyBinding:"keyBinding",languageOptions:"languageOptions",indentUnitValue:"indentUnitValue"},outputs:{valueChanged:"valueChanged"},features:[x.\u0275\u0275ProvidersFeature([{provide:F.kq,useExisting:(0,x.forwardRef)(()=>je),multi:!0}])],decls:3,vars:0,consts:[["host",""],[1,"ts-codemirror"],[1,"ts-codemirror-container"]],template:function(z,tt){1&z&&(x.\u0275\u0275elementStart(0,"div",1),x.\u0275\u0275element(1,"div",2,0),x.\u0275\u0275elementEnd())},styles:[".ts-codemirror[_ngcontent-%COMP%]{position:relative;background-color:#fff;height:100%}.ts-codemirror[_ngcontent-%COMP%]   .ts-codemirror-container[_ngcontent-%COMP%]{height:100%}.ts-codemirror[_ngcontent-%COMP%]   .ts-codemirror-container[_ngcontent-%COMP%]     .cm-editor{height:100%}.ts-codemirror[_ngcontent-%COMP%]   .ts-codemirror-container[_ngcontent-%COMP%]     .cm-editor .cm-specialChar{display:none}"],changeDetection:0})}}class it{static{this.\u0275fac=function(z){return new(z||it)}}static{this.\u0275mod=x.\u0275\u0275defineNgModule({type:it})}static{this.\u0275inj=x.\u0275\u0275defineInjector({})}}},4770:(k,Ce,b)=>{"use strict";var x,F;b.d(Ce,{F:()=>x}),(F=x||(x={})).Csharp="text/x-csharp",F.Javascript="text/javascript",F.Json="application/ld+json",F.Css="text/css",F.Less="text/x-less",F.Sql="text/x-sql",F.SqlServer="text/x-mssql",F.PgSql="text/x-pgsql",F.Xml="application/xml",F.Http="message/http",F.Markdown="text/x-markdown"},9204:(k,Ce,b)=>{"use strict";b.d(Ce,{Py:()=>i,XI:()=>F,KI:()=>je,B4:()=>Ae,UQ:()=>ie,Pd:()=>ne});var x=b(99314);class F{constructor(){this.getRegisteredEvents=()=>[]}set eventHandlers(K){this._eventHandlers=K,this._validateEventHandlers()}get eventHandlers(){return this._eventHandlers}_stringify(K){const X=[()=>JSON.stringify(K),()=>K.toString()];for(let ge=0;ge<X.length;ge++){const Oe=X[ge];try{return Oe()}catch{}}return""}_checkEventCanBeHandled(K){const X=this.getRegisteredEvents();if(!X||X.some(at=>at.name===K))return;const ge=X.map(at=>at.name).join(", ");let Oe=`Handler for event "${K}" can not be specified because the event was not registered in table cell class. Registered table column events to subscribe: ${ge}.`;throw this.columnDataSchema&&(Oe+=` Column name: "${this.columnDataSchema.name}".`),new Error(Oe)}_checkHandlerIsFunction(K,X){if("function"!=typeof X)throw new TypeError(`Handler for event with name "${K}" must be a function, but actual is"${this._stringify(X)}".`)}_validateEventHandlers(){this.eventHandlers&&Object.keys(this.eventHandlers).forEach(X=>{this._checkEventCanBeHandled(X),this._checkHandlerIsFunction(X,this.eventHandlers[X])})}_checkEventDataType(K,X){return K instanceof X||K.constructor===X}_validateFiringEvent(K,X){const ge=this._registeredEvents.find(at=>at.name===K);if(!ge)throw new Error(`Event with name "${K}" is not registered in the cell class and can not be fired.`);const Oe=ge.dataType;if(X&&(!Oe||!this._checkEventDataType(X,Oe)))throw new TypeError(`Type of the data in the event "${K}" must be "${Oe}", but actual data is "${this._stringify(X)}".`)}_getValidEventHandler(K){const X=this.eventHandlers&&this.eventHandlers[K];if(X)return this._checkHandlerIsFunction(K,X),X}isEmpty(){return!(this.columnDataSchema&&this.record)}fireEvent(K,X){this._validateFiringEvent(K,X);const ge=this._getValidEventHandler(K);return ge&&ge(this.record,X)}ngOnInit(){this._registeredEvents=this.getRegisteredEvents()}getValue(){const K=this.record[this.columnDataSchema.name],X=this.columnDataSchema.formatter;return X?X(K,this.record):K}static{this.\u0275fac=function(X){return new(X||F)}}static{this.\u0275dir=x.\u0275\u0275defineDirective({type:F,inputs:{columnDataSchema:"columnDataSchema",record:"record",eventHandlers:"eventHandlers"}})}}class i extends F{constructor(){super(...arguments),this.valueChange=new x.EventEmitter}setRecordValue(K){this.record[this.columnDataSchema.name]=K}setValue(K){this.setRecordValue(K),this.valueChange.emit(K)}static{this.\u0275fac=(()=>{let K;return function(ge){return(K||(K=x.\u0275\u0275getInheritedFactory(i)))(ge||i)}})()}static{this.\u0275dir=x.\u0275\u0275defineDirective({type:i,outputs:{valueChange:"valueChange"},features:[x.\u0275\u0275InheritDefinitionFeature]})}}var M=b(44537),B=b(84235),v=b(76696),W=b(28498),I=b(39959);const R=de=>({$implicit:de});function c(de,K){if(1&de&&(x.\u0275\u0275elementContainerStart(0),x.\u0275\u0275elementStart(1,"a",7),x.\u0275\u0275text(2),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementContainerEnd()),2&de){const X=x.\u0275\u0275nextContext().$implicit,ge=x.\u0275\u0275nextContext(2).$implicit,Oe=x.\u0275\u0275nextContext(2);x.\u0275\u0275advance(),x.\u0275\u0275property("routerLink",Oe.getLinkUrl(X))("target",Oe.getLinkTarget(X)),x.\u0275\u0275advance(),x.\u0275\u0275textInterpolate(Oe.formatTextValue(ge))}}function _(de,K){if(1&de){const X=x.\u0275\u0275getCurrentView();x.\u0275\u0275elementStart(0,"a",8),x.\u0275\u0275listener("click",function(Oe){x.\u0275\u0275restoreView(X);const at=x.\u0275\u0275nextContext().$implicit,st=x.\u0275\u0275nextContext(4);return x.\u0275\u0275resetView(st.onLinkClick(Oe,at))}),x.\u0275\u0275text(1),x.\u0275\u0275elementEnd()}if(2&de){const X=x.\u0275\u0275nextContext().$implicit,ge=x.\u0275\u0275nextContext(2).$implicit,Oe=x.\u0275\u0275nextContext(2);x.\u0275\u0275property("href",Oe.getLinkUrl(X),x.\u0275\u0275sanitizeUrl)("target",Oe.getLinkTarget(X)),x.\u0275\u0275advance(),x.\u0275\u0275textInterpolate(Oe.formatTextValue(ge))}}function A(de,K){if(1&de&&(x.\u0275\u0275elementContainerStart(0),x.\u0275\u0275template(1,c,3,3,"ng-container",6)(2,_,2,3,"ng-template",null,2,x.\u0275\u0275templateRefExtractor),x.\u0275\u0275elementContainerEnd()),2&de){const X=K.$implicit,ge=x.\u0275\u0275reference(3),Oe=x.\u0275\u0275nextContext(4);x.\u0275\u0275advance(),x.\u0275\u0275property("ngIf",Oe.getIsRouterLink(X))("ngIfElse",ge)}}function re(de,K){if(1&de&&(x.\u0275\u0275elementStart(0,"span"),x.\u0275\u0275text(1),x.\u0275\u0275elementEnd()),2&de){const X=x.\u0275\u0275nextContext(2).$implicit,ge=x.\u0275\u0275nextContext(2);x.\u0275\u0275advance(),x.\u0275\u0275textInterpolate(ge.formatTextValue(X))}}function h(de,K){if(1&de&&(x.\u0275\u0275elementContainerStart(0),x.\u0275\u0275template(1,A,4,2,"ng-container",6)(2,re,2,1,"ng-template",null,1,x.\u0275\u0275templateRefExtractor),x.\u0275\u0275elementContainerEnd()),2&de){const X=x.\u0275\u0275reference(3),ge=x.\u0275\u0275nextContext(3);x.\u0275\u0275advance(),x.\u0275\u0275property("ngIf",ge.getLink(ge.record))("ngIfElse",X)}}function xe(de,K){if(1&de&&x.\u0275\u0275element(0,"mat-checkbox",9),2&de){const X=x.\u0275\u0275nextContext().$implicit;x.\u0275\u0275property("checked",!!X)}}function E(de,K){if(1&de&&x.\u0275\u0275template(0,h,4,2,"ng-container",3)(1,xe,1,1,"mat-checkbox",5),2&de){const X=x.\u0275\u0275nextContext(2);x.\u0275\u0275property("ngIf",X.isDisplayedAsText()),x.\u0275\u0275advance(),x.\u0275\u0275property("ngIf",X.isDisplayedAsBoolean())}}function P(de,K){if(1&de&&(x.\u0275\u0275elementContainerStart(0),x.\u0275\u0275template(1,E,2,2,"ng-template",4,0,x.\u0275\u0275templateRefExtractor),x.\u0275\u0275elementContainerEnd()),2&de){const X=x.\u0275\u0275reference(2),ge=x.\u0275\u0275nextContext();x.\u0275\u0275advance(),x.\u0275\u0275property("ngTemplateOutletContext",x.\u0275\u0275pureFunction1(2,R,ge.getValue()))("ngTemplateOutlet",X)}}class ie extends F{constructor(K,X){super(),this.numberUtils=X,this._textValueTypes=[M.DataValueType.Guid].concat(B.PLi.DateTime).concat(B.PLi.Number).concat(B.PLi.Text).concat(B.PLi.Lookup),this.getRegisteredEvents=()=>[{name:"click"}],this.userCulture=K.cultureInfo.sysCultureName}getLink(K){return this.columnDataSchema.linkGenerator?this.columnDataSchema.linkGenerator(K):""}getLinkUrl(K){return"string"==typeof K?K:K.url}getLinkTarget(K){const X="_self";return"string"==typeof K?X:K.target||X}getIsRouterLink(K){return!!K&&("string"==typeof K||(K.useRouterLink||!1))}onLinkClick(K,X){X&&"string"!=typeof X&&!0===X.preventDefaultClick&&(K.preventDefault(),this.fireEvent("click"))}isDisplayedAsText(){return!this.columnDataSchema.valueType||-1!==this._textValueTypes.indexOf(this.columnDataSchema.valueType)}isDisplayedAsBoolean(){return this.columnDataSchema.valueType===M.DataValueType.Boolean}formatTextValue(K){if(null==K)return"";switch(this.columnDataSchema.valueType){case M.DataValueType.Date:return K.toLocaleDateString(this.userCulture);case M.DataValueType.Time:return K.toLocaleTimeString(this.userCulture);case M.DataValueType.DateTime:return K.toLocaleString(this.userCulture);case M.DataValueType.Integer:return this.numberUtils.formatNumberValue(K,new B.V__({precision:0}));case M.DataValueType.Float:case M.DataValueType.Money:return this.numberUtils.formatNumberValue(K);case M.DataValueType.FLOAT1:return this.numberUtils.formatNumberValue(K,new B.V__({precision:1}));case M.DataValueType.FLOAT2:return this.numberUtils.formatNumberValue(K,new B.V__({precision:2}));case M.DataValueType.FLOAT3:return this.numberUtils.formatNumberValue(K,new B.V__({precision:3}));case M.DataValueType.FLOAT4:return this.numberUtils.formatNumberValue(K,new B.V__({precision:4}));case M.DataValueType.FLOAT8:return this.numberUtils.formatNumberValue(K,new B.V__({precision:8}));case M.DataValueType.IMAGELOOKUP:case M.DataValueType.Lookup:{const ge=K;return ge?.displayValue||ge?.value}case M.DataValueType.LOCALIZABLE_STRING:return K&&K.getValue(this.userCulture);default:return K}}static{this.\u0275fac=function(X){return new(X||ie)(x.\u0275\u0275directiveInject(B.oqB),x.\u0275\u0275directiveInject(B.B4r))}}static{this.\u0275cmp=x.\u0275\u0275defineComponent({type:ie,selectors:[["ts-table-cell"]],features:[x.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[["t",""],["textBlock",""],["hyperlinkBlock",""],[4,"ngIf"],[3,"ngTemplateOutletContext","ngTemplateOutlet"],["disabled","true",3,"checked",4,"ngIf"],[4,"ngIf","ngIfElse"],[3,"routerLink","target"],[3,"click","href","target"],["disabled","true",3,"checked"]],template:function(X,ge){1&X&&x.\u0275\u0275template(0,P,3,4,"ng-container",3),2&X&&x.\u0275\u0275property("ngIf",!ge.isEmpty())},dependencies:[v.NgIf,v.NgTemplateOutlet,W.NZ,I.Wk],encapsulation:2})}}class Y{constructor(K){Object.assign(this,K)}}class ne extends Y{}var je,de;(de=je||(je={})).None="none",de.Intermediate="intermediate",de.All="all";var it=b(66900),ue=b(26182),me=b(98961),z=b(31243),tt=b(22029),se=b(86731),Ne=b(33227);class Ae{static{this.\u0275fac=function(X){return new(X||Ae)}}static{this.\u0275mod=x.\u0275\u0275defineNgModule({type:Ae})}static{this.\u0275inj=x.\u0275\u0275defineInjector({imports:[Ne.N8,v.CommonModule,it.ad,me.wG,ue.m_,W.Dy,tt.NQ,z.GR,I.iI,se.h]})}}},25612:(k,Ce,b)=>{"use strict";b.r(Ce),b.d(Ce,{TableCellWrapperComponent:()=>F.v,TableComponent:()=>x.O,TableModule:()=>P,TreeTableComponent:()=>W});var x=b(9505),F=b(84733),i=b(9204),M=b(99314),B=b(33227);const v=["angularTreeGrid"];class W{constructor(){this._config={id_field:"id",parent_id_field:"parent",parent_display_field:"name",data_loading_text:"",row_class_function:null,css:{expand_class:"right-arrow",collapse_class:"down-arrow"},columns:[]},this._notImplementedContracts=["sortable","valueType","linkGenerator","sortingDataAccessor"],this.data=[]}set primaryColumn(Y){this._config.id_field=Y}set parentColumn(Y){this._config.parent_id_field=Y}set primaryDisplayColumn(Y){this._config.parent_display_field=Y}get config(){return this._config}_validateTreeTableColumnContract(Y){const Se=Object.getOwnPropertyNames(Y);this._notImplementedContracts.forEach(ne=>{if(-1!==Se.indexOf(ne))throw new Error(`Contract "${ne}" in TreeTableColumnDataSchema not implemented.`)})}_rowLevelClassGenerator(Y){return Y.leaf?"leaf-level":"root-level"}_setColumnsConfig(Y){const Se=Y.map(ne=>(this._validateTreeTableColumnContract(ne),{name:ne.name,header:ne.caption,css_class:"tree-table-column-"+ne.name,renderer:ne.formatter}));this._config.columns=Se}_setRowCssClassGenerator(Y){if(!this.dataSchema?.rowCssClass)return void(this._config.row_class_function=this._rowLevelClassGenerator);const Se="function"==typeof this.dataSchema?.rowCssClass?this.dataSchema.rowCssClass:ne=>this.dataSchema.rowCssClass;this._config.row_class_function=ne=>[this._rowLevelClassGenerator(ne),Se(ne)].join(" ")}get dataSchema(){return this._dataSchema}set dataSchema(Y){this._dataSchema=Y,Y&&this._setColumnsConfig(Y.columns),this._setRowCssClassGenerator(Y)}collapseAll(){this.angularTreeGrid.collapseAll()}expandAll(){this.angularTreeGrid.expandAll()}static{this.\u0275fac=function(Se){return new(Se||W)}}static{this.\u0275cmp=M.\u0275\u0275defineComponent({type:W,selectors:[["ts-tree-table"]],viewQuery:function(Se,ne){if(1&Se&&M.\u0275\u0275viewQuery(v,5),2&Se){let je;M.\u0275\u0275queryRefresh(je=M.\u0275\u0275loadQuery())&&(ne.angularTreeGrid=je.first)}},inputs:{primaryColumn:"primaryColumn",parentColumn:"parentColumn",primaryDisplayColumn:"primaryDisplayColumn",data:"data",dataSchema:"dataSchema"},decls:2,vars:2,consts:[["angularTreeGrid",""],[1,"tree-table",3,"data","configs"]],template:function(Se,ne){1&Se&&M.\u0275\u0275element(0,"db-angular-tree-grid",1,0),2&Se&&M.\u0275\u0275property("data",ne.data)("configs",ne.config)},dependencies:[B.sj],styles:['ts-tree-table .tree-table table.db-tree-view{border:0;width:100%}ts-tree-table .tree-table .db-tree-view thead tr th,ts-tree-table .tree-table .db-tree-view tbody tr td{border-left-width:0;border-right-width:0;border-top-width:0}ts-tree-table .tree-table .db-tree-view thead tr th{font:400 13px/17px Bpmonline Open Sans,Regular,sans-serif;color:#999;font-size:13px;text-align:left}ts-tree-table .tree-table .db-tree-view tbody tr{line-height:normal}ts-tree-table .tree-table .db-tree-view tbody tr td{font:400 14px/19px Bpmonline Open Sans,Regular,sans-serif;font-size:14px;color:#000000de}ts-tree-table .tree-table .db-tree-view .root-level td:first-child{padding-left:10px}ts-tree-table .tree-table .db-tree-view .leaf-level{background:#fcfcfc 0% 0% no-repeat padding-box}ts-tree-table .tree-table .db-tree-view .leaf-level td:first-child{padding-left:25px}ts-tree-table .tree-table .right-arrow:before{color:#006ce0;border-style:solid;border-width:1px 1px 0 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle;margin-bottom:6px}ts-tree-table .tree-table .down-arrow:before{color:#006ce0;border-style:solid;border-width:0 1px 1px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle;margin-bottom:6px}\n'],encapsulation:2})}}var I=b(66900),R=b(76696),c=b(26182),_=b(98961),A=b(28498),re=b(31243),h=b(22029),xe=b(39959),E=b(86731);class P{static{this.\u0275fac=function(Se){return new(Se||P)}}static{this.\u0275mod=M.\u0275\u0275defineNgModule({type:P})}static{this.\u0275inj=M.\u0275\u0275defineInjector({imports:[B.N8,R.CommonModule,I.ad,_.wG,c.m_,A.Dy,h.NQ,re.GR,xe.iI,E.h,i.B4,i.B4]})}}},84733:(k,Ce,b)=>{"use strict";b.d(Ce,{v:()=>v});var x=b(99314),i=b(9204),M=b(23596);const B=["tableCell"];class v{constructor(){this.valueChange=new x.EventEmitter}_generateTableCell(I){this.tableCell.clear();const R=this.tableCell.createComponent(I),c=R.instance;if(I!==i.UQ&&!(c instanceof i.XI))throw new TypeError("Value of property `cellComponentClass` must be a component class inherited from `BaseTableCellComponent`");return R}_updateTableCell(){const I=this.columnDataSchema.cellComponentClass||i.UQ;(!this._cellComponentRef||!(this._cellComponentRef.instance instanceof I))&&(this._cellComponentRef=this._generateTableCell(I));const R=this._cellComponentRef.instance;R.columnDataSchema=this.columnDataSchema,R.record=this.record,R.eventHandlers=this.eventHandlers,R instanceof i.Py&&R.valueChange.subscribe(c=>this.valueChange.emit(c)),this._cellComponentRef.changeDetectorRef.detectChanges()}ngOnChanges(I){!this.record||!this.columnDataSchema||!(I.record||I.columnDataSchema||I.eventHandlers&&!(0,M.A)(I.eventHandlers.previousValue,I.eventHandlers.currentValue))||this._updateTableCell()}static{this.\u0275fac=function(R){return new(R||v)}}static{this.\u0275cmp=x.\u0275\u0275defineComponent({type:v,selectors:[["ts-table-cell-wrapper"]],viewQuery:function(R,c){if(1&R&&x.\u0275\u0275viewQuery(B,7,x.ViewContainerRef),2&R){let _;x.\u0275\u0275queryRefresh(_=x.\u0275\u0275loadQuery())&&(c.tableCell=_.first)}},inputs:{columnDataSchema:"columnDataSchema",record:"record",eventHandlers:"eventHandlers"},outputs:{valueChange:"valueChange"},features:[x.\u0275\u0275NgOnChangesFeature],decls:2,vars:0,consts:[["tableCell",""]],template:function(R,c){1&R&&x.\u0275\u0275element(0,"span",null,0)},encapsulation:2})}}},9505:(k,Ce,b)=>{"use strict";b.d(Ce,{O:()=>Pt});var x=b(10194),F=b(52067),i=b(66900),M=b(99314),v=b(31243),W=b(22029),I=b(44537),c=b(9204),_=b(23596),A=b(76696),h=b(26182),xe=b(28498),E=b(84733);const P=()=>["expandableRow"];function ie(oe,V){if(1&oe){const j=M.\u0275\u0275getCurrentView();M.\u0275\u0275elementStart(0,"th",11)(1,"mat-checkbox",12),M.\u0275\u0275listener("change",function(fe){M.\u0275\u0275restoreView(j);const ye=M.\u0275\u0275nextContext(3);return M.\u0275\u0275resetView(fe?ye.allRowsSelectToggle():null)}),M.\u0275\u0275elementEnd()()}if(2&oe){const j=M.\u0275\u0275nextContext(3);M.\u0275\u0275advance(),M.\u0275\u0275styleProp("visibility",j.showSelectAllButton&&!j.isEmpty()?"visible":"hidden"),M.\u0275\u0275property("checked",j.isAllRowsCheckboxChecked())("indeterminate",j.isAllRowsCheckboxIntermediate())}}function Y(oe,V){1&oe&&(M.\u0275\u0275elementContainerStart(0),M.\u0275\u0275template(1,ie,2,4,"th",10),M.\u0275\u0275elementContainerEnd())}function Se(oe,V){if(1&oe){const j=M.\u0275\u0275getCurrentView();M.\u0275\u0275elementStart(0,"td",13)(1,"mat-checkbox",14),M.\u0275\u0275listener("click",function(fe){const ye=M.\u0275\u0275restoreView(j).$implicit,et=M.\u0275\u0275nextContext(2);return M.\u0275\u0275resetView(et.onCheckboxClick(ye,fe))})("change",function(){const fe=M.\u0275\u0275restoreView(j).$implicit,ye=M.\u0275\u0275nextContext(2);return M.\u0275\u0275resetView(ye.recordSelectToggle(fe))}),M.\u0275\u0275elementEnd()()}if(2&oe){const j=V.$implicit,Z=M.\u0275\u0275nextContext(2);M.\u0275\u0275advance(),M.\u0275\u0275property("checked",Z.isRecordSelected(j))}}function ne(oe,V){1&oe&&M.\u0275\u0275element(0,"th",16)}function je(oe,V){1&oe&&(M.\u0275\u0275elementContainerStart(0),M.\u0275\u0275template(1,ne,1,0,"th",15),M.\u0275\u0275elementContainerEnd())}function it(oe,V){if(1&oe){const j=M.\u0275\u0275getCurrentView();M.\u0275\u0275elementStart(0,"td",17)(1,"button",18),M.\u0275\u0275listener("click",function(fe){const ye=M.\u0275\u0275restoreView(j).$implicit,et=M.\u0275\u0275nextContext(2);return M.\u0275\u0275resetView(et.toggleRowExpansion(ye,fe))}),M.\u0275\u0275element(2,"mat-icon",19),M.\u0275\u0275elementEnd()()}if(2&oe){const j=V.$implicit,Z=M.\u0275\u0275nextContext(2);M.\u0275\u0275advance(),M.\u0275\u0275property("@rowExpanderTrigger",Z.isRecordExpanded(j)?"expanded":"collapsed"),M.\u0275\u0275advance(),M.\u0275\u0275property("ngClass","row-expander-icon "+(Z.isRecordExpanded(j)?"expanded":"collapsed"))}}function ue(oe,V){if(1&oe&&(M.\u0275\u0275elementStart(0,"th",22)(1,"label"),M.\u0275\u0275text(2),M.\u0275\u0275elementEnd()()),2&oe){const j=M.\u0275\u0275nextContext(3).$implicit,Z=M.\u0275\u0275nextContext(2);M.\u0275\u0275property("disabled",!Z.isColumnSortable(j))("ngClass",Z.getColumnHeaderCssClass(j.valueType,j.span)),M.\u0275\u0275advance(2),M.\u0275\u0275textInterpolate(j.caption)}}function me(oe,V){1&oe&&(M.\u0275\u0275elementContainerStart(0),M.\u0275\u0275template(1,ue,3,3,"th",21),M.\u0275\u0275elementContainerEnd())}function z(oe,V){if(1&oe){const j=M.\u0275\u0275getCurrentView();M.\u0275\u0275elementStart(0,"td",23)(1,"ts-table-cell-wrapper",24),M.\u0275\u0275listener("valueChange",function(fe){const ye=M.\u0275\u0275restoreView(j).$implicit,et=M.\u0275\u0275nextContext(2).$implicit,rn=M.\u0275\u0275nextContext(2);return M.\u0275\u0275resetView(rn.onCellValueChange(ye,et,fe))}),M.\u0275\u0275elementEnd()()}if(2&oe){const j=V.$implicit,Z=M.\u0275\u0275nextContext().$implicit,fe=M.\u0275\u0275nextContext().$implicit,ye=M.\u0275\u0275nextContext(2);M.\u0275\u0275property("ngClass",ye.getValueTypeCssClass(fe.valueType)),M.\u0275\u0275advance(),M.\u0275\u0275property("columnDataSchema",fe)("record",j)("eventHandlers",ye.eventHandlers&&ye.eventHandlers[Z])}}function tt(oe,V){if(1&oe&&(M.\u0275\u0275elementContainerStart(0,2),M.\u0275\u0275template(1,me,2,0,"ng-container",3)(2,z,2,4,"td",8),M.\u0275\u0275elementContainerEnd()),2&oe){const j=V.$implicit,Z=M.\u0275\u0275nextContext(3);M.\u0275\u0275propertyInterpolate("matColumnDef",j),M.\u0275\u0275advance(),M.\u0275\u0275property("ngIf",Z.showHeader)}}function se(oe,V){if(1&oe&&(M.\u0275\u0275elementContainerStart(0),M.\u0275\u0275template(1,tt,3,2,"ng-container",20),M.\u0275\u0275elementContainerEnd()),2&oe){const j=V.$implicit;M.\u0275\u0275advance(),M.\u0275\u0275property("ngIf",j.name)}}function Ne(oe,V){if(1&oe&&(M.\u0275\u0275elementStart(0,"td",23)(1,"div",25),M.\u0275\u0275element(2,"ts-table-cell-wrapper",26),M.\u0275\u0275elementEnd()()),2&oe){const j=V.$implicit,Z=M.\u0275\u0275nextContext(2);M.\u0275\u0275property("ngClass","expandable-cell-"+(Z.isRecordExpanded(j)?"expanded":"collapsed")),M.\u0275\u0275attribute("colspan",Z.columns.length),M.\u0275\u0275advance(),M.\u0275\u0275property("@expandableRowTrigger",Z.isRecordExpanded(j)?"expanded":"collapsed"),M.\u0275\u0275advance(),M.\u0275\u0275property("columnDataSchema",Z.dataSchema.expandableRow)("record",j)("eventHandlers",Z.eventHandlers&&Z.eventHandlers[Z.dataSchema.expandableRow.name])}}function Ae(oe,V){1&oe&&M.\u0275\u0275element(0,"tr",28)}function de(oe,V){if(1&oe&&(M.\u0275\u0275elementContainerStart(0),M.\u0275\u0275template(1,Ae,1,0,"tr",27),M.\u0275\u0275elementContainerEnd()),2&oe){const j=M.\u0275\u0275nextContext(2);M.\u0275\u0275advance(),M.\u0275\u0275property("matHeaderRowDef",j.columns)("matHeaderRowDefSticky",j.headerSticky)}}function K(oe,V){if(1&oe){const j=M.\u0275\u0275getCurrentView();M.\u0275\u0275elementStart(0,"tr",29),M.\u0275\u0275listener("click",function(){const fe=M.\u0275\u0275restoreView(j).$implicit,ye=M.\u0275\u0275nextContext(2);return M.\u0275\u0275resetView(ye.onRowClick(fe))})("dblclick",function(){const fe=M.\u0275\u0275restoreView(j).$implicit,ye=M.\u0275\u0275nextContext(2);return M.\u0275\u0275resetView(ye.onRowDoubleClick(fe))}),M.\u0275\u0275elementEnd()}if(2&oe){const j=V.$implicit,Z=V.even,fe=M.\u0275\u0275nextContext(2);M.\u0275\u0275property("ngClass",fe.getRowCssClass(j,Z))("cdkDragData",j)("cdkDragBoundary",fe.dragBoundarySelector)("cdkDragDisabled",!fe.enableOrdering)}}function X(oe,V){1&oe&&M.\u0275\u0275element(0,"tr",31)}function ge(oe,V){1&oe&&(M.\u0275\u0275elementStart(0,"div"),M.\u0275\u0275template(1,X,1,0,"tr",30),M.\u0275\u0275elementEnd()),2&oe&&(M.\u0275\u0275advance(),M.\u0275\u0275property("matRowDefColumns",M.\u0275\u0275pureFunction0(1,P)))}function Oe(oe,V){if(1&oe){const j=M.\u0275\u0275getCurrentView();M.\u0275\u0275elementStart(0,"table",1),M.\u0275\u0275listener("matSortChange",function(fe){M.\u0275\u0275restoreView(j);const ye=M.\u0275\u0275nextContext();return M.\u0275\u0275resetView(ye.onSortChange(fe))})("cdkDropListDropped",function(fe){M.\u0275\u0275restoreView(j);const ye=M.\u0275\u0275nextContext();return M.\u0275\u0275resetView(ye.onItemDrop(fe))}),M.\u0275\u0275elementContainerStart(1,2),M.\u0275\u0275template(2,Y,2,0,"ng-container",3)(3,Se,2,1,"td",4),M.\u0275\u0275elementContainerEnd(),M.\u0275\u0275elementContainerStart(4,2),M.\u0275\u0275template(5,je,2,0,"ng-container",3)(6,it,3,2,"td",5),M.\u0275\u0275elementContainerEnd(),M.\u0275\u0275template(7,se,2,1,"ng-container",6),M.\u0275\u0275elementContainerStart(8,7),M.\u0275\u0275template(9,Ne,3,6,"td",8),M.\u0275\u0275elementContainerEnd(),M.\u0275\u0275template(10,de,2,2,"ng-container",3)(11,K,1,4,"tr",9)(12,ge,2,2,"div",3),M.\u0275\u0275elementEnd()}if(2&oe){const j=M.\u0275\u0275nextContext();M.\u0275\u0275styleProp("display",j.isEmpty()?"none":null),M.\u0275\u0275property("dataSource",j.dataSource)("matSortDirection",j.sortDirection)("matSortActive",j.sortColumn)("cdkDropListDisabled",!j.enableOrdering)("trackBy",j.trackByFunction),M.\u0275\u0275advance(),M.\u0275\u0275propertyInterpolate("matColumnDef",j.getMultiSelectColumnName()),M.\u0275\u0275advance(),M.\u0275\u0275property("ngIf",j.showHeader),M.\u0275\u0275advance(2),M.\u0275\u0275propertyInterpolate("matColumnDef",j.getRowExpanderColumnName()),M.\u0275\u0275advance(),M.\u0275\u0275property("ngIf",j.showHeader),M.\u0275\u0275advance(2),M.\u0275\u0275property("ngForOf",j.dataSchema.columns),M.\u0275\u0275advance(3),M.\u0275\u0275property("ngIf",j.showHeader),M.\u0275\u0275advance(),M.\u0275\u0275property("matRowDefColumns",j.columns),M.\u0275\u0275advance(),M.\u0275\u0275property("ngIf",j.dataSchema.expandableRow)}}const at=["headerSticky","selectMode","showHeader","showSelectAllButton","allRowsSelectState","allRowsSelectToggleHandler","sortable","sortColumn","sortDirection","selectedRowCssClass","evenRowCssClass","minWidthPerColumn"],st={selectMode:"none",headerSticky:!1,showHeader:!0,showSelectAllButton:!0,sortable:!0,sortColumn:"",sortDirection:"asc",selectedRowCssClass:"selected",evenRowCssClass:"even-row",minWidthPerColumn:120};class Pt{get filteredData(){return this.dataSource?this.dataSource.filteredData:[]}get dataSchema(){return this._dataSchema}set dataSchema(V){this._dataSchema=V;const j={};V&&V.columns.forEach(Z=>{j[Z.name]=Z}),this.columnsDataSchema=j,this.markForCheck()}get dataColumns(){const V=this.dataSchema;return V&&V.columns?V.columns.map(j=>j.name):[]}get columns(){const V=this.dataColumns;return"multi"===this.selectMode&&V.unshift(this.getMultiSelectColumnName()),this.dataSchema.expandableRow&&("start"===this.rowExpanderPosition&&V.unshift(this.getRowExpanderColumnName()),"end"===this.rowExpanderPosition&&V.push(this.getRowExpanderColumnName())),V}get selected(){const V=this.selection.selected;return this.data.filter(j=>V.includes(this.trackRecord(j)))}set selected(V){this.deselectRedundant();const j=this.trackRecords(V);if(this.deselectExcluding(...j||[]),j){const Z=this.trackRecordsAreInTable(j);this.selection.select(...Z)}}get expanded(){const V=this.expansion.selected;return this.data.filter(j=>V.includes(this.trackRecord(j)))}set expanded(V){this.collapseRedundant();const j=this.trackRecords(V);if(this.collapseExcluding(...j||[]),j){const Z=this.trackRecordsAreInTable(j);this.expansion.select(...Z)}}set sort(V){V=V||{},this.sortColumn=V.columnName,this.sortDirection=V.direction}set matSort(V){this._matSort===V||!this._dataSource||!V||(this._matSort=V,this.dataSource.sort=V)}set data(V){V=V||[],this._dataSource||this.initDataSource(),this.dataSource.data=V}get data(){return this.dataSource&&this.dataSource.data||[]}set dataSource(V){this.initDataSource(V)}get dataSource(){return this._dataSource}get eventHandlers(){return this._eventHandlers}set eventHandlers(V){this._eventHandlers=V,this.markForCheck()}set config(V){V=V||{};const j=this._config;this._config=V,(0,_.A)(V,j)||this._applyConfig(V)}constructor(V){this.changeDetectorRef=V,this.selection=new F.CB(!0,[]),this.expansion=new F.CB(!0,[]),this.dataValueType=I.DataValueType,this.cellValueChange=new M.EventEmitter,this.enableOrdering=!1,this.rowExpanderPosition="end",this.selectedChange=new M.EventEmitter,this.sortChange=new M.EventEmitter,this.expandedChange=new M.EventEmitter,this.recordPositionChange=new M.EventEmitter,this.rowDoubleClick=new M.EventEmitter,this.getColumnSortingAccessor=(j,Z)=>{const fe=this.columnsDataSchema[Z],ye=j&&j[Z];if(!fe)return ye;if(fe.sortingDataAccessor)return fe.sortingDataAccessor(j);if(fe.valueType===I.DataValueType.Lookup){return ye&&ye.displayValue}return ye},this.getMultiSelectColumnName=()=>"_multiSelectColumn",this.getRowExpanderColumnName=()=>"_rowExpanderColumn",this.trackByFunction=(j,Z)=>this.trackRecord(Z),this.config=st}_applyConfig(V){at.forEach(j=>{const Z=j,fe=j,ye=V[Z],et=this[fe];void 0!==ye&&!(0,_.A)(ye,et)&&(this[fe]=V[Z])})}trackRecord(V){return this._dataSchema?.trackBy?this._dataSchema.trackBy(V):V}trackRecords(V){return V?.map(j=>this.trackRecord(j))}isRecordInTable(V){return this.data.some(j=>this.trackRecord(j)===V)}deselectRedundant(){if(!this.dataSource)return null;const V=this.trackRecordsAreNotInTable(this.selection.selected);return 0!==V.length&&this.selection.deselect(...V),V}collapseRedundant(){if(!this.dataSource)return null;const V=this.trackRecordsAreNotInTable(this.expansion.selected);return 0!==V.length&&this.expansion.deselect(...V),V}deselectExcluding(...V){if(!this.data||!this.selection.hasValue())return;const Z=this.trackRecordsExceptExcluded(V);this.selection.deselect(...Z)}collapseExcluding(...V){const j=this.trackRecordsExceptExcluded(V);this.expansion.deselect(...j)}changeSelectionForRecords(V,j){V?this.selection.select(...j):this.selection.deselect(...j)}initDataSource(V){(V=V||new v.Nf).sortingDataAccessor=this.getColumnSortingAccessor,V.connect().subscribe(j=>{this.renderedDataTrackValues=this.trackRecords(j),this.deselectRedundant()?.length>0&&this.emitSelectionChange(),this.collapseRedundant()?.length>0&&this.emitExpandedChange(),this.markForCheck(),this.calculateMinWidth()}),this._dataSource=V}markForCheck(){this.changeDetectorRef.markForCheck()}emitSelectionChange(){this.selectedChange.emit(this.selected)}emitExpandedChange(){this.expandedChange.emit(this.expanded)}selectSingleRecord(V){this.deselectExcluding(V),this.selection.select(V),this.emitSelectionChange()}validateColumnEventHandlers(){const V=Object.keys(this.eventHandlers),j=this._dataSchema.expandableRow;let Z=V.find(fe=>!this.columnsDataSchema[fe]);if(j&&Z===j.name&&(Z=null),Z){const fe=Object.keys(this.columnsDataSchema).join(", ");throw new Error(`Event handlers for column "${Z}" can not be specified because the column was not defined in table data schema. Actual table columns: ${fe}.`)}}changeSelectionForRange(V){if(!this.renderedDataTrackValues||!this.lastSelectToggledRecord||this.lastSelectToggledRecord===V)return!1;const j=this.renderedDataTrackValues.indexOf(this.lastSelectToggledRecord),Z=this.renderedDataTrackValues.indexOf(V);if(-1===j||-1===Z)return!1;const fe=this.renderedDataTrackValues.slice(Math.min(j,Z),Math.max(j,Z)+1);return this.changeSelectionForRecords(!this.selection.isSelected(V),fe),this.lastSelectToggledRecord=V,this.emitSelectionChange(),!0}trackRecordsAreInTable(V){return this.dataSource?V.filter(j=>this.isRecordInTable(j)):V}trackRecordsAreNotInTable(V){return this.dataSource?V.filter(j=>!this.isRecordInTable(j)):V}trackRecordsExceptExcluded(V){const j=this.trackRecords(this.data);return V?j.filter(Z=>!V.includes(Z)):j}calculateMinWidth(){const V=this.minWidthPerColumn,j=this.dataSchema?.columns?.length??0,Z=!this.isEmpty()&&V>0&&j>0;this.minWidth=Z?V*j+"px":""}getColumnSpanClass(V){return V>0&&V<=24?`ts-column-span-${V}`:""}allRecordsSelected(){return this.dataSource&&this.selection.hasValue()&&this.selection.selected.length>=this.filteredData.length&&this.filteredData.every(this.isRecordSelected.bind(this))}getAllRowsSelectState(){let V;return this.allRowsSelectState&&(V=this.allRowsSelectState())?V:this.allRecordsSelected()?c.KI.All:this.isAnyRecordSelected()?c.KI.Intermediate:c.KI.None}ngOnChanges(){this.eventHandlers&&this.columnsDataSchema&&this.validateColumnEventHandlers(),this.calculateMinWidth()}isDataSchemaEmpty(){return!this.dataSchema||!this.dataSchema.columns||0===this.dataColumns.length}isEmpty(){return this.isDataSchemaEmpty()||!this.renderedDataTrackValues||0===this.renderedDataTrackValues.length}recordSelectToggle(V){const j=this.trackRecord(V);this.selection.toggle(j),this.lastSelectToggledRecord=j,this.emitSelectionChange()}onSortChange(V){const j={columnName:V.active,direction:V.direction};this.sort=j,this.sortChange.emit(j)}isAnyRecordSelected(){return this.selection.hasValue()}isRecordSelected(V){return this.selection.isSelected(this.trackRecord(V))}isRecordExpanded(V){return this.expansion.isSelected(this.trackRecord(V))}isAllRowsCheckboxChecked(){return this.getAllRowsSelectState()===c.KI.All}isAllRowsCheckboxIntermediate(){return this.getAllRowsSelectState()===c.KI.Intermediate}allRowsSelectToggle(){if("multi"!==this.selectMode)throw new RangeError("Multi-select mode should be enabled to select all records.");if(this.allRowsSelectToggleHandler)this.allRowsSelectToggleHandler();else{const V=!this.isAllRowsCheckboxChecked();this.changeSelectionForRecords(V,this.trackRecords(this.filteredData)),this.emitSelectionChange()}}onRowClick(V){"single"===this.selectMode&&this.selectSingleRecord(this.trackRecord(V))}onRowDoubleClick(V){this.rowDoubleClick.emit(V)}getValueTypeCssClass(V){return"ts-value-type-"+(V&&I.DataValueType[V].toString().toLowerCase())}getColumnHeaderCssClass(V,j){return[this.getValueTypeCssClass(V),this.getColumnSpanClass(j)].filter(Z=>!!Z)}getRowCssClass(V,j){const Z=[];j&&Z.push(this.evenRowCssClass),"single"===this.selectMode&&this.isRecordSelected(V)&&Z.push(this.selectedRowCssClass);const fe="function"==typeof this.dataSchema.rowCssClass?this.dataSchema.rowCssClass(V):this.dataSchema.rowCssClass;return fe&&Z.push(fe),Z}isColumnSortable(V){return!(!V.caption||this.enableOrdering)&&(this.sortable?!1!==V.sortable:!0===V.sortable)}onCheckboxClick(V,j){const Z=this.trackRecord(V);j.shiftKey&&this.changeSelectionForRange(Z)&&j.preventDefault(),j.stopPropagation()}toggleRowExpansion(V,j){if(j.stopPropagation(),!this.dataSchema.expandableRow)throw new Error("An expandable cell must be set for this operation");this.expansion.toggle(this.trackRecord(V)),this.emitExpandedChange()}onCellValueChange(V,j,Z){this.data=this.data,this.cellValueChange.emit({record:V,columnDataSchema:j,value:Z})}onItemDrop(V){const j=this.data.indexOf(V.item.data);(0,i.HD)(this.data,j,V.currentIndex),this.data=this.data;const Z={record:V.item.data,newIndex:V.currentIndex,prevIndex:j};this.recordPositionChange.emit(Z)}static{this.\u0275fac=function(j){return new(j||Pt)(M.\u0275\u0275directiveInject(M.ChangeDetectorRef))}}static{this.\u0275cmp=M.\u0275\u0275defineComponent({type:Pt,selectors:[["ts-table"]],viewQuery:function(j,Z){if(1&j&&M.\u0275\u0275viewQuery(W.B4,5),2&j){let fe;M.\u0275\u0275queryRefresh(fe=M.\u0275\u0275loadQuery())&&(Z.matSort=fe.first)}},hostVars:2,hostBindings:function(j,Z){2&j&&M.\u0275\u0275styleProp("min-width",Z.minWidth)},inputs:{dataSchema:"dataSchema",selectMode:"selectMode",headerSticky:"headerSticky",showHeader:"showHeader",showSelectAllButton:"showSelectAllButton",sortable:"sortable",sortColumn:"sortColumn",sortDirection:"sortDirection",selectedRowCssClass:"selectedRowCssClass",evenRowCssClass:"evenRowCssClass",minWidthPerColumn:"minWidthPerColumn",enableOrdering:"enableOrdering",dragBoundarySelector:"dragBoundarySelector",rowExpanderPosition:"rowExpanderPosition",selected:"selected",expanded:"expanded",sort:"sort",data:"data",dataSource:"dataSource",eventHandlers:"eventHandlers",config:"config",allRowsSelectState:"allRowsSelectState",allRowsSelectToggleHandler:"allRowsSelectToggleHandler"},outputs:{cellValueChange:"cellValueChange",selectedChange:"selectedChange",sortChange:"sortChange",expandedChange:"expandedChange",recordPositionChange:"recordPositionChange",rowDoubleClick:"rowDoubleClick"},features:[M.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[["mat-table","","matSort","","matSortDisableClear","","multiTemplateDataRows","","cdkDropList","",3,"display","dataSource","matSortDirection","matSortActive","cdkDropListDisabled","trackBy","matSortChange","cdkDropListDropped",4,"ngIf"],["mat-table","","matSort","","matSortDisableClear","","multiTemplateDataRows","","cdkDropList","",3,"matSortChange","cdkDropListDropped","dataSource","matSortDirection","matSortActive","cdkDropListDisabled","trackBy"],[3,"matColumnDef"],[4,"ngIf"],["mat-cell","","class","multi-select-column",4,"matCellDef"],["mat-cell","","class","row-expander-column",4,"matCellDef"],[4,"ngFor","ngForOf"],["matColumnDef","expandableRow"],["mat-cell","",3,"ngClass",4,"matCellDef"],["mat-row","","cdkDragLockAxis","y","cdkDrag","",3,"ngClass","cdkDragData","cdkDragBoundary","cdkDragDisabled","click","dblclick",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","class","multi-select-column",4,"matHeaderCellDef"],["mat-header-cell","",1,"multi-select-column"],[3,"change","checked","indeterminate"],["mat-cell","",1,"multi-select-column"],[3,"click","change","checked"],["mat-header-cell","","class","row-expander-column",4,"matHeaderCellDef"],["mat-header-cell","",1,"row-expander-column"],["mat-cell","",1,"row-expander-column"],[1,"trigger-button",3,"click"],[3,"ngClass"],[3,"matColumnDef",4,"ngIf"],["mat-header-cell","","mat-sort-header","",3,"disabled","ngClass",4,"matHeaderCellDef"],["mat-header-cell","","mat-sort-header","",3,"disabled","ngClass"],["mat-cell","",3,"ngClass"],[3,"valueChange","columnDataSchema","record","eventHandlers"],[1,"expandable-row-wrapper"],[3,"columnDataSchema","record","eventHandlers"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-header-row",""],["mat-row","","cdkDragLockAxis","y","cdkDrag","",3,"click","dblclick","ngClass","cdkDragData","cdkDragBoundary","cdkDragDisabled"],["mat-row","","class","expandable-row",4,"matRowDef","matRowDefColumns"],["mat-row","",1,"expandable-row"]],template:function(j,Z){1&j&&M.\u0275\u0275template(0,Oe,13,15,"table",0),2&j&&M.\u0275\u0275property("ngIf",!Z.isDataSchemaEmpty())},dependencies:[A.NgClass,A.NgForOf,A.NgIf,i.O7,i.T1,h.An,xe.NZ,W.B4,W.aE,v.MS,v.Aw,v.mS,v.j4,v.lM,v.p_,v.bO,v.cK,v.BE,v.OP,E.v],styles:["ts-table{display:inline-block;width:100%}ts-table table{width:100%}ts-table table tr.expandable-row{height:auto}ts-table table tr.expandable-row td.expandable-cell-collapsed{border-bottom:hidden}ts-table table tr td,ts-table table tr th{overflow:hidden}ts-table table tr td:not(.multi-select-column,.row-expander-column),ts-table table tr th:not(.multi-select-column,.row-expander-column){width:auto}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-1,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-1{width:4.1666666667%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-2,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-2{width:8.3333333333%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-3,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-3{width:12.5%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-4,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-4{width:16.6666666667%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-5,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-5{width:20.8333333333%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-6,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-6{width:25%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-7,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-7{width:29.1666666667%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-8,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-8{width:33.3333333333%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-9,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-9{width:37.5%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-10,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-10{width:41.6666666667%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-11,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-11{width:45.8333333333%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-12,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-12{width:50%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-13,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-13{width:54.1666666667%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-14,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-14{width:58.3333333333%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-15,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-15{width:62.5%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-16,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-16{width:66.6666666667%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-17,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-17{width:70.8333333333%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-18,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-18{width:75%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-19,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-19{width:79.1666666667%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-20,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-20{width:83.3333333333%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-21,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-21{width:87.5%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-22,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-22{width:91.6666666667%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-23,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-23{width:95.8333333333%}ts-table table tr td:not(.multi-select-column,.row-expander-column).ts-column-span-24,ts-table table tr th:not(.multi-select-column,.row-expander-column).ts-column-span-24{width:100%}ts-table table tr td:not(:first-of-type),ts-table table tr th:not(:first-of-type){padding-left:5px}ts-table table tr td:not(:last-of-type),ts-table table tr th:not(:last-of-type){padding-right:5px}ts-table table tr td.multi-select-column,ts-table table tr th.multi-select-column{padding-right:10px;width:16px!important;text-align:center;overflow:visible!important}ts-table table tr td.multi-select-column mat-checkbox .mat-checkbox-ripple,ts-table table tr th.multi-select-column mat-checkbox .mat-checkbox-ripple{overflow:visible;position:absolute;left:calc(50% - 16px);top:calc(50% - 16px);height:32px;width:32px}ts-table table tr td.multi-select-column mat-checkbox .mat-checkbox-ripple .mat-ripple-element:not(.mat-checkbox-persistent-ripple),ts-table table tr th.multi-select-column mat-checkbox .mat-checkbox-ripple .mat-ripple-element:not(.mat-checkbox-persistent-ripple){display:none}ts-table table tr td.row-expander-column .trigger-button,ts-table table tr th.row-expander-column .trigger-button{background:none;border:none}ts-table table tr td.row-expander-column .trigger-button:focus,ts-table table tr th.row-expander-column .trigger-button:focus{background:none;border:none;outline:none}ts-table table tr td.row-expander-column .trigger-button .row-expander-icon,ts-table table tr th.row-expander-column .trigger-button .row-expander-icon{background-image:url(\"data:image/svg+xml,%3Csvg id='Component_447' data-name='Component 447' xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cpath id='Path_1315' data-name='Path 1315' d='M7,13,0,6.5,7,0' transform='translate(14.549 4.25) rotate(90)' fill='none' stroke='%23006ce0' stroke-width='1.1'/%3E%3Crect id='Rectangle_6725' data-name='Rectangle 6725' width='16' height='16' fill='none'/%3E%3C/svg%3E%0A\");background-position:center}ts-table table tr td.row-expander-column .trigger-button .row-expander-icon.collapsed,ts-table table tr th.row-expander-column .trigger-button .row-expander-icon.collapsed{transform:rotate(-180deg)}ts-table table tr td .expandable-row-wrapper,ts-table table tr th .expandable-row-wrapper{display:flex}ts-table table tr td .expandable-row-wrapper ts-table-cell-wrapper,ts-table table tr th .expandable-row-wrapper ts-table-cell-wrapper{width:100%;margin:10px 0}ts-table table tr th.ts-value-type-boolean .mat-sort-header-container{justify-content:center;padding-left:21px}ts-table table tr td.ts-value-type-boolean{text-align:center}\n"],encapsulation:2,data:{animation:[(0,x.hZ)("expandableRowTrigger",[(0,x.wk)("collapsed",(0,x.iF)({height:"0px",minHeight:"0"})),(0,x.wk)("expanded",(0,x.iF)({height:"unset"}))]),(0,x.hZ)("rowExpanderTrigger",[(0,x.kY)("collapsed <=> expanded",[(0,x.iF)({transform:"rotate(180deg)",opacity:0})])])]},changeDetection:0})}}},84235:(k,Ce,b)=>{"use strict";var x,g;b.d(Ce,{Vvc:()=>zo,J$r:()=>cg,vZG:()=>ug,XhC:()=>Sp,ub_:()=>La,zXC:()=>h,myf:()=>ie,kGb:()=>Vi,DQf:()=>Se,XAg:()=>Ho,Uqx:()=>wr,ZXh:()=>ja,TEQ:()=>Ss,m9D:()=>Ge,ViS:()=>Vs,tTz:()=>Fa,jjK:()=>Lr,Ik6:()=>yn,MDt:()=>rl,qFg:()=>U,wqQ:()=>$i,KaY:()=>Ri,V_I:()=>Re,pge:()=>_o,ns0:()=>zn,otV:()=>Ht,Yp:()=>Es,SS4:()=>Qi,VMq:()=>Ln,YJq:()=>It,olg:()=>_e,PLi:()=>Z,QSp:()=>j,Rav:()=>us,M1n:()=>Rs,fL7:()=>Zs,t6X:()=>ne,PYA:()=>Y,K1D:()=>ci,vp2:()=>nt,eut:()=>Ot,G2Y:()=>rt,vpk:()=>jc,xRQ:()=>_s,j8w:()=>Qn,DG0:()=>zt,TsT:()=>oi,xZL:()=>_n,w9C:()=>Kn,hd5:()=>Nt,Dpk:()=>bs,e2c:()=>Bn,vkI:()=>Si,dFt:()=>Da,K2W:()=>co,b2z:()=>ji,gcc:()=>Ha,Awl:()=>Pn,GoH:()=>Oo,uSH:()=>xt,btv:()=>Zn,V__:()=>qr,B4r:()=>zi,cIp:()=>kr,zRA:()=>Fr,avn:()=>Wn,urz:()=>fn,Qhy:()=>ce,xsE:()=>og,DXo:()=>d_,SNu:()=>Ae,BGz:()=>Pi,Ac2:()=>be,l2Q:()=>mt,pAP:()=>Mr,c2Z:()=>Cs,L8V:()=>Rn,Stw:()=>Pl,yaY:()=>sa,n$i:()=>ui,ZhS:()=>po,atF:()=>wl,erT:()=>cs,ckl:()=>ln,vnp:()=>at,oqB:()=>de,sUJ:()=>ri,fvr:()=>st,L3o:()=>Mn,fTc:()=>we,t7G:()=>Hi,sGI:()=>He,$nD:()=>Lh,joR:()=>il,vQX:()=>ls,IU9:()=>r_,D08:()=>qo,n_g:()=>$r,oQk:()=>bt,x3G:()=>In,WdJ:()=>An,gdN:()=>Ga,Xqd:()=>wi,aGE:()=>l_,aPb:()=>Ph,Mcf:()=>Jo,KUn:()=>o_,a$i:()=>Xo,Bi4:()=>Rh,EVD:()=>nl,Rb9:()=>Ah,gPl:()=>Ke,cIr:()=>Nn,tCF:()=>Wa,o7N:()=>gt,KgX:()=>Hs,oXd:()=>Gs,B8u:()=>ip,Wv3:()=>el,ZNE:()=>Us,F8E:()=>Zo,ol1:()=>Nh,x4i:()=>s_}),(g=x||(x={})).Auto="auto",g.Transparent="transparent",g.PrimaryContrast500="primary-contrast-500",g.Foreground500="foreground-500",g.Label500="label-500",g.BrandSecondary500="brand-secondary-500",g.Warning500="warn-500",g.Brand500="brand-500",g.NavigationPrimary500="navigation-primary-500",g.Primary500="primary-500";x.PrimaryContrast500,x.Foreground500,x.Label500,x.BrandSecondary500,x.Warning500,x.Brand500,x.NavigationPrimary500,x.Primary500;var M;!function(g){g.LightGreen="crt-color-light-green",g.Green="crt-color-green",g.DarkGreen="crt-color-dark-green",g.Orange="crt-color-orange",g.OrangeRed="crt-color-orange-red",g.Coral="crt-color-coral",g.BrightRed="crt-color-bright-red",g.Red="crt-color-red",g.Purple="crt-color-purple",g.Violet="crt-color-violet",g.CelestialBlue="crt-color-celestial-blue",g.Blue="crt-color-blue",g.LightBlue="crt-color-light-blue",g.NavyBlue="crt-color-navy-blue",g.DarkTurquoise="crt-color-dark-turquoise",g.Turquoise="crt-color-turquoise",g.LightGreenPastel="crt-color-light-green-pastel",g.GreenPastel="crt-color-green-pastel",g.DarkGreenPastel="crt-color-dark-green-pastel",g.OrangePastel="crt-color-orange-pastel",g.OrangeRedPastel="crt-color-orange-red-pastel",g.CoralPastel="crt-color-coral-pastel",g.BrightRedPastel="crt-color-bright-red-pastel",g.RedPastel="crt-color-red-pastel",g.PurplePastel="crt-color-purple-pastel",g.VioletPastel="crt-color-violet-pastel",g.CelestialBluePastel="crt-color-celestial-blue-pastel",g.BluePastel="crt-color-blue-pastel",g.LightBluePastel="crt-color-light-blue-pastel",g.NavyBluePastel="crt-color-navy-blue-pastel",g.DarkTurquoisePastel="crt-color-dark-turquoise-pastel",g.TurquoisePastel="crt-color-turquoise-pastel",g.PrimaryBlue="crt-color-primary-blue",g.PrimaryOrange="crt-color-primary-orange",g.PrimaryGreen="crt-color-primary-green",g.PrimaryNavi="crt-color-primary-navi",g.PrimaryGrey="crt-color-primary-grey",g.PrimaryBlack="crt-color-primary-black",g.PrimaryWhite="crt-color-primary-white"}(M||(M={}));var xe,B=b(97270),v=b(44537),W=b(86731),I=b(32028),R=b(24677),c=b(99314),_=b(96091),A=b(93527),re=b(76661);class h{static create(s){const l=new h;return Object.assign(l,s),l}get isDebugEnabled(){return!!window.Terrasoft?.isDebug}static{this.\u0275fac=function(l){return new(l||h)}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:h,factory:h.\u0275fac,providedIn:"root"})}}!function(g){g.Production="production",g.PreProduction="pre-production",g.Development="development"}(xe||(xe={}));let E=h.create({serviceUrl:"",clientConnectionClassName:""});let ie=class Ih{constructor(s){this._httpClient=s,this._serviceEndpoint="ServiceModel/ApplicationInfoService.svc/"}_initApplicationInfo(){const s=this._serviceEndpoint+"GetApplicationInfo";this._applicationInfoObservable$=this._httpClient.post(s,null).pipe((0,A.T)(l=>{const d=l&&l.applicationInfo;return E=h.create(d),l}),(0,re.t)(1)),this._applicationInfoObservable$.subscribe()}loadApplicationInfo(){return this._applicationInfoObservable$||this._initApplicationInfo(),this._applicationInfoObservable$}loadSysValues(){return this.loadApplicationInfo().pipe((0,A.T)(s=>s?.applicationInfo?.sysValues))}getCoreVersion(){return this._coreVersion?(0,_.of)(this._coreVersion):this.loadSysValues().pipe((0,_.tap)(s=>this._coreVersion=s?.coreVersion),(0,A.T)(()=>this._coreVersion))}getIsProductionEnvironment(){return(this._environmentType?(0,_.of)(this._environmentType):this.loadSysValues().pipe((0,_.tap)(l=>this._environmentType=l?.environmentType),(0,A.T)(()=>this._environmentType))).pipe((0,A.T)(l=>l===xe.Production))}static{this.\u0275fac=function(l){return new(l||Ih)(c.\u0275\u0275inject(R.HttpClient))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Ih,factory:Ih.\u0275fac,providedIn:"root"})}};ie=(0,B.Cg)([(0,I.op)({requestType:"crt.SysValuesService"}),(0,B.Sn)("design:paramtypes",[R.HttpClient])],ie);class Y{get isLookupType(){return!!this.dataValueType&&this.dataValueType===v.DataValueType.Lookup}constructor(s){s&&(this.uId=s.uId,this.name=s.name,this.caption=s.caption,this.columnCaptionPath=s.columnCaptionPath,this.dataValueType=s.dataValueType,this.usageType=s.usageType,this.referenceSchemaUId=s.referenceSchemaUId,this.referenceSchemaName=s.referenceSchemaName,this.isRequired=s.isRequired,this.isValueCloneable=s.isValueCloneable,this.isMasked=s.isMasked,this.isFormatValidated=s.isFormatValidated,this.isSensitiveData=s.isSensitiveData,this.defaultValueSchema=s.defaultValueSchema,this.lookupMode=s.lookupMode)}}class Se{constructor(s){s&&(this.uId=s.uId,this.name=s.name,this.caption=s.caption,this.extendParent=s.extendParent,this.packageUId=s.packageUId)}}class ne extends Se{getPrimaryColumn(){return this.primaryColumnUId&&this.columns?.find(s=>s.uId===this.primaryColumnUId)}getPrimaryDisplayColumn(){return this.primaryDisplayColumnUId&&this.columns?.find(s=>s.uId===this.primaryDisplayColumnUId)}getPrimaryColorColumn(){return this.primaryColorColumnUId&&this.columns?.find(s=>s.uId===this.primaryColorColumnUId)}getHierarchyColumn(){return this.hierarchyColumnUId&&this.columns?.find(s=>s.uId===this.hierarchyColumnUId)}getCreatedOnColumn(){return this.createdOnColumnUId&&this.columns?.find(s=>s.uId===this.createdOnColumnUId)}getCreatedByColumn(){return this.createdByColumnUId&&this.columns?.find(s=>s.uId===this.createdByColumnUId)}getModifiedOnColumn(){return this.modifiedOnColumnUId&&this.columns?.find(s=>s.uId===this.modifiedOnColumnUId)}getModifiedByColumn(){return this.modifiedByColumnUId&&this.columns?.find(s=>s.uId===this.modifiedByColumnUId)}}var je;!function(g){g.List="List",g.SelectionWindow="SelectionWindow"}(je||(je={}));var it=b(93422),ue=b(37236),me=b(37782),z=b(34526);class Ne{constructor(s){Object.assign(this,s)}static getDefaultCulture(){return new Ne({sysCultureId:"A5420246-0A8E-E111-84A3-00155D054C03",sysCultureName:"en-US",decimalSeparator:".",thousandSeparator:","})}}class Ae{constructor(){const s=this.constructor;if((0,c.inject)(s,c.InjectFlags.Optional|c.InjectFlags.SkipSelf))throw Error(`[${s.name}]: trying to create multiple instances,\n\t\t\tbut this service should be a singleton.`)}}class de{constructor(){this.cultureInfo=new Ne,this.defCultureInfo=new Ne}}const K="Information about the current user is not initialized yet. Use UserInfoService to load current user information.";const ge=function X(){return{get id(){throw new ReferenceError(K)},get contactId(){throw new ReferenceError(K)},get contactName(){throw new ReferenceError(K)},get accountId(){throw new ReferenceError(K)},get accountName(){throw new ReferenceError(K)},get isSSP(){throw new ReferenceError(K)},get timeZoneId(){throw new ReferenceError(K)},get cultureInfo(){throw new ReferenceError(K)},get defCultureInfo(){throw new ReferenceError(K)},get timeZoneOffsetHours(){throw new ReferenceError(K)},get photoId(){throw new ReferenceError(K)},get accessType(){throw new ReferenceError(K)},get sessionId(){throw new ReferenceError(K)}}}(),Oe={get id(){return ge.id},get contactId(){return ge.contactId},get contactName(){return ge.contactName},get accountId(){return ge.accountId},get accountName(){return ge.accountName},get isSSP(){return ge.isSSP},get timeZoneId(){return ge.timeZoneId},get cultureInfo(){return ge.cultureInfo},get defCultureInfo(){return ge.defCultureInfo},get timeZoneOffsetHours(){return ge.timeZoneOffsetHours},get photoId(){return ge.photoId},get accessType(){return ge.accessType},get sessionId(){return ge.sessionId}};Object.freeze(Oe);const at={provide:de,useFactory:()=>Oe};class st extends Ae{constructor(s){super(),this._httpClient=s,this._serviceEndpoint="ServiceModel/UserInfoService.svc"}_applyUserInfo(s){Object.keys(ge).forEach(l=>{delete ge[l]}),Object.assign(ge,s)}loadCurrentUserInfo(){if(!this._userInfo$){const s=`${this._serviceEndpoint}/GetCurrentUserInfo`;this._userInfo$=this._httpClient.post(s,null).pipe((0,_.tap)(l=>{this._applyUserInfo(l?.userInfo)}),(0,_.shareReplay)({bufferSize:1,refCount:!1}))}return this._userInfo$}static{this.\u0275fac=function(l){return new(l||st)(c.\u0275\u0275inject(R.HttpClient))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:st,factory:st.\u0275fac,providedIn:"root"})}}class Pt{constructor(s,l){this._userInfo=s,this._httpClient=l}_getServiceUrlSspPart(){return this._userInfo.isSSP?"ssp/":""}_getDataServiceUrlWithSspPart(){return`DataService/${this._getServiceUrlSspPart()}`}getSchemaDesignerServiceEndpoint(){return this._getDataServiceUrlWithSspPart()+"json/SyncReply/SchemaDesignerRequest"}getRuntimeEntitySchemaServiceEndpoint(){return this._getDataServiceUrlWithSspPart()+"json/SyncReply/RuntimeEntitySchemaRequest"}getEntitySchemaServiceEndpoint(){return this._getDataServiceUrlWithSspPart()+"json/SyncReply/EntitySchemaRequest"}getRuntimeEntitySchemeServiceEndpoint(){return this._getDataServiceUrlWithSspPart()+"json/SyncReply/RuntimeEntitySchemesRequest"}getEntity(s){return(0,_.lastValueFrom)(this._httpClient.post(this.getRuntimeEntitySchemaServiceEndpoint(),{name:s}))}getEntities(s){return(0,_.lastValueFrom)(this._httpClient.post(this.getRuntimeEntitySchemeServiceEndpoint(),s))}static{this.\u0275fac=function(l){return new(l||Pt)(c.\u0275\u0275inject(de),c.\u0275\u0275inject(R.HttpClient))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Pt,factory:Pt.\u0275fac,providedIn:"root"})}}var oe=b(73308);const V="DataValueType",j={[v.DataValueType.Date]:{type:v.DataValueType.Date,id:"603d4960-a1a2-45e9-b232-206a54421b01",name:"Date",icon:"data-type-date-icon.svg",designerIcon:b(26861),translateKey:`${V}.DateCaption`},[v.DataValueType.Time]:{type:v.DataValueType.Time,id:"04cc757b-8f06-482c-8a1a-0c0e171d2410",name:"Time",icon:"data-type-time-icon.svg",designerIcon:b(8510),translateKey:`${V}.TimeCaption`},[v.DataValueType.DateTime]:{type:v.DataValueType.DateTime,id:"d21e9ef4-c064-4012-b286-fa1a8171da44",name:"DateTime",icon:"data-type-datetime-icon.svg",designerIcon:b(55146),translateKey:`${V}.DateTimeCaption`},[v.DataValueType.Text]:{type:v.DataValueType.Text,id:"8b3f29bb-ea14-4ce5-a5c5-293a929b6ba2",name:"Text",icon:"data-type-text-icon.svg",autonumberIcon:"data-type-autonumber-icon.svg",designerIcon:b(97180),designerAutonumberIcon:b(78683),translateKey:`${V}.TextCaption`},[v.DataValueType.SHORT_TEXT]:{type:v.DataValueType.SHORT_TEXT,id:"325a73b8-0f47-44a0-8412-7606f78003ac",name:"ShortText",icon:"data-type-text-icon.svg",autonumberIcon:"data-type-autonumber-icon.svg",designerIcon:b(97180),designerAutonumberIcon:b(78683),translateKey:`${V}.ShortTextCaption`},[v.DataValueType.PHONE_TEXT]:{type:v.DataValueType.PHONE_TEXT,id:"26cba63c-daf1-4f36-b2ea-73c0d675d90c",name:"PhoneText",icon:"data-type-phone-icon.svg",designerIcon:b(59155),translateKey:`${V}.PhoneTextCaption`},[v.DataValueType.WEB_TEXT]:{type:v.DataValueType.WEB_TEXT,id:"26cba64c-daf1-4f36-b2ea-73c0d695d90c",name:"WebText",icon:"data-type-text-icon.svg",designerIcon:b(64337),translateKey:`${V}.WebTextCaption`},[v.DataValueType.EMAIL_TEXT]:{type:v.DataValueType.EMAIL_TEXT,id:"66cba64c-daf1-4f36-b8ea-73c0d695d90c",name:"EmailText",icon:"data-type-text-icon.svg",designerIcon:b(71011),translateKey:`${V}.EmailTextCaption`},[v.DataValueType.MEDIUM_TEXT]:{type:v.DataValueType.MEDIUM_TEXT,id:"ddb3a1ee-07e8-4d62-b7a9-d0e618b00fbd",name:"MediumText",icon:"data-type-text-icon.svg",autonumberIcon:"data-type-autonumber-icon.svg",designerIcon:b(97180),designerAutonumberIcon:b(78683),translateKey:`${V}.MediumTextCaption`},[v.DataValueType.LONG_TEXT]:{type:v.DataValueType.LONG_TEXT,id:"5ca35f10-a101-4c67-a96a-383da6afacfc",name:"LongText",icon:"data-type-text-icon.svg",autonumberIcon:"data-type-autonumber-icon.svg",designerIcon:b(97180),designerAutonumberIcon:b(78683),translateKey:`${V}.LongTextCaption`},[v.DataValueType.MAXSIZE_TEXT]:{type:v.DataValueType.MAXSIZE_TEXT,id:"c0f04627-4620-4bc0-84e5-9419dc8516b1",name:"MaxSizeText",icon:"data-type-unlimited-text-icon.svg",autonumberIcon:"data-type-autonumber-icon.svg",designerIcon:b(97180),designerAutonumberIcon:b(78683),translateKey:`${V}.MaxSizeTextCaption`},[v.DataValueType.Integer]:{type:v.DataValueType.Integer,id:"6b6b74e2-820d-490e-a017-2b73d4ccf2b0",name:"Integer",icon:"data-type-integer-icon.svg",designerIcon:b(60521),translateKey:`${V}.IntegerCaption`},[v.DataValueType.FLOAT1]:{type:v.DataValueType.FLOAT1,id:"07ba84ce-0bf7-44b4-9f2c-7b15032eb98c",name:"Float1",icon:"data-type-float1-icon.svg",designerIcon:b(68877),translateKey:`${V}.FLOAT1Caption`},[v.DataValueType.FLOAT2]:{type:v.DataValueType.FLOAT2,id:"5cc8060d-6d10-4773-89fc-8c12d6f659a6",name:"Float2",icon:"data-type-float2-icon.svg",designerIcon:b(68877),translateKey:`${V}.FLOAT2Caption`},[v.DataValueType.FLOAT3]:{type:v.DataValueType.FLOAT3,id:"3f62414e-6c25-4182-bcef-a73c9e396f31",name:"Float3",icon:"data-type-float3-icon.svg",designerIcon:b(68877),translateKey:`${V}.FLOAT3Caption`},[v.DataValueType.FLOAT4]:{type:v.DataValueType.FLOAT4,id:"ff22e049-4d16-46ee-a529-92d8808932dc",name:"Float4",icon:"data-type-float4-icon.svg",designerIcon:b(68877),translateKey:`${V}.FLOAT4Caption`},[v.DataValueType.FLOAT8]:{type:v.DataValueType.FLOAT8,id:"a4aaf398-3531-4a0d-9d75-a587f5b5b59e",name:"Float8",icon:"data-type-float8-icon.svg",designerIcon:b(68877),translateKey:`${V}.FLOAT8Caption`},[v.DataValueType.Guid]:{type:v.DataValueType.Guid,id:"23018567-a13c-4320-8687-fd6f9e3699bd",name:"Guid",icon:"data-type-guid-icon.svg",designerIcon:b(92458),translateKey:`${V}.GuidCaption`},[v.DataValueType.Lookup]:{type:v.DataValueType.Lookup,id:"b295071f-7ea9-4e62-8d1a-919bf3732ff2",name:"Lookup",icon:"data-type-lookup-icon.svg",designerIcon:b(61631),translateKey:`${V}.LookupCaption`},[v.DataValueType.Boolean]:{type:v.DataValueType.Boolean,id:"90b65bf8-0ffc-4141-8779-2420877af907",name:"Boolean",icon:"data-type-boolean-icon.svg",designerIcon:b(36659),translateKey:`${V}.BooleanCaption`},[v.DataValueType.HASH_TEXT]:{type:v.DataValueType.HASH_TEXT,id:"ecbcce18-2a17-4ead-829a-9d02fa9578a4",name:"HashText",icon:"data-type-crs-text-icon.svg",designerIcon:b(97180),translateKey:`${V}.HashTextCaption`},[v.DataValueType.SECURE_TEXT]:{type:v.DataValueType.SECURE_TEXT,id:"3509b9dd-2c90-4540-b82e-8f6ae85d8248",name:"SecureText",icon:"data-type-encrypted-text-icon.svg",designerIcon:b(28010),translateKey:`${V}.SecureTextCaption`},[v.DataValueType.IMAGELOOKUP]:{type:v.DataValueType.IMAGELOOKUP,id:"b039feb0-ee7c-4884-8aa6-d6d45d84316f",name:"ImageLookup",icon:"data-type-image-link-icon.svg",designerIcon:b(65689),translateKey:`${V}.ImageLookupCaption`},[v.DataValueType.Money]:{type:v.DataValueType.Money,id:"969093e2-2b4e-463b-883a-3d3b8c61f0cd",name:"Money",icon:"data-type-float2-icon.svg",designerIcon:b(32643),translateKey:`${V}.MoneyCaption`},[v.DataValueType.Float]:{type:v.DataValueType.Float,id:"57ee4c31-5ec4-45fa-b95d-3a2868aa89a8",name:"Float",icon:"data-type-float1-icon.svg",designerIcon:b(68877),translateKey:`${V}.FloatCaption`},[v.DataValueType.FILE]:{type:v.DataValueType.FILE,id:"a33c9252-d401-453e-949d-169157067ed9",name:"File",icon:"data-type-file-icon.svg",designerIcon:b(55039),translateKey:`${V}.FileCaption`},[v.DataValueType.Image]:{type:v.DataValueType.Image,id:"fa6e6e49-b996-475e-a77e-73904e4c5a88",name:"Image",icon:"data-type-image-icon.svg",designerIcon:b(55039),translateKey:`${V}.ImageCaption`},[v.DataValueType.Blob]:{type:v.DataValueType.Blob,id:"b7342b7a-5dde-40de-aa7c-24d2a57b3202",name:"Blob",icon:"data-type-blob-icon.svg",designerIcon:b(55039),translateKey:`${V}.BlobCaption`},[v.DataValueType.Color]:{type:v.DataValueType.Color,id:"dafb71f9-ee9f-4e0b-a4d7-37aa15987155",name:"Color",icon:"data-type-color-icon.svg",designerIcon:b(39078),translateKey:`${V}.ColorCaption`},[v.DataValueType.RICH_TEXT]:{type:v.DataValueType.RICH_TEXT,id:"79bccffa-8c8b-4863-b376-a69d2244182b",name:"RichText",icon:"data-type-rich-text-icon.svg",designerIcon:b(67021),translateKey:`${V}.RichCaption`},[v.DataValueType.ENTITY]:{type:v.DataValueType.ENTITY,id:"ebd85d37-0abf-4bbf-bb32-97dc3dffcc8c",name:"Entity",icon:"data-type-other-icon.svg",designerIcon:b(97180),translateKey:`${V}.Entity`},[v.DataValueType.ENTITY_COLLECTION]:{type:v.DataValueType.ENTITY_COLLECTION,id:"51fb23ba-3eb2-11e2-b7d5-b0c76188709b",name:"EntityCollection",icon:"data-type-other-icon.svg",designerIcon:b(97180),translateKey:`${V}.EntityCollection`},[v.DataValueType.ENTITY_COLUMN_MAPPING_COLLECTION]:{type:v.DataValueType.ENTITY_COLUMN_MAPPING_COLLECTION,id:"b53eaa2a-4bb7-4a6b-9f4f-58ccab293e31",name:"EntityColumnMappingCollection",icon:"data-type-other-icon.svg",designerIcon:b(97180),translateKey:`${V}.EntityColumnMappingCollection`},[v.DataValueType.CUSTOM_OBJECT]:{type:v.DataValueType.CUSTOM_OBJECT,id:"84ed6865-9692-4c98-aaed-4d15b96a95c2",name:"CustomObject",icon:"data-type-other-icon.svg",designerIcon:b(97180),translateKey:`${V}.CustomObject`},[v.DataValueType.OBJECT_LIST]:{type:v.DataValueType.OBJECT_LIST,id:"4b51a8b5-1ee9-4437-9d58-f35e083cbcdf",name:"ObjectList",icon:"data-type-other-icon.svg",designerIcon:b(97180),translateKey:`${V}.ObjectList`},[v.DataValueType.COMPOSITE_OBJECT_LIST]:{type:v.DataValueType.COMPOSITE_OBJECT_LIST,id:"651ec16f-d140-46db-b9e2-825c985a8ac2",name:"CompositeObjectList",icon:"data-type-other-icon.svg",designerIcon:b(97180),translateKey:`${V}.CompositeObjectList`},[v.DataValueType.COMPOSITE_OBJECT]:{type:v.DataValueType.COMPOSITE_OBJECT,id:"632e4371-0a7f-46cd-a284-a623b3933027",name:"CompositeObject",icon:"data-type-composite-object-icon.svg",designerIcon:b(97180),translateKey:`${V}.CompositeObject`},[v.DataValueType.COLLECTION]:{type:v.DataValueType.COLLECTION,name:"Collection",icon:"data-type-other-icon.svg",designerIcon:b(97180),translateKey:`${V}.Collection`},[v.DataValueType.LOCALIZABLE_STRING]:{type:v.DataValueType.LOCALIZABLE_STRING,id:"95c6e6c4-2cc8-46be-a1cb-96f942655f86",name:"LocalizableString",icon:"data-type-text-icon.svg",designerIcon:b(97180),translateKey:`${V}.LocalizableString`},[v.DataValueType.METADATA_TEXT]:{type:v.DataValueType.METADATA_TEXT,id:"394e160f-c8e0-46fa-9c0d-75d97e9e9169",name:"MetaDataText",icon:"data-type-text-icon.svg",designerIcon:b(97180),translateKey:`${V}.MetaDataText`}},Z={DateTime:[v.DataValueType.Date,v.DataValueType.Time,v.DataValueType.DateTime],Text:[v.DataValueType.Text,v.DataValueType.SHORT_TEXT,v.DataValueType.MEDIUM_TEXT,v.DataValueType.LONG_TEXT,v.DataValueType.PHONE_TEXT,v.DataValueType.WEB_TEXT,v.DataValueType.EMAIL_TEXT,v.DataValueType.MAXSIZE_TEXT,v.DataValueType.LOCALIZABLE_STRING,v.DataValueType.RICH_TEXT],Number:[v.DataValueType.FLOAT1,v.DataValueType.FLOAT2,v.DataValueType.FLOAT3,v.DataValueType.FLOAT4,v.DataValueType.FLOAT8,v.DataValueType.Integer,v.DataValueType.Money,v.DataValueType.Float],Lookup:[v.DataValueType.Lookup,v.DataValueType.IMAGELOOKUP]};class fe{static _getDefaultValue(s){if(!s)return null;if(s.source===v.DefaultValueSource.Sequence)return{valueSourceType:v.DefaultValueSource.Sequence,value:"Sequence",sequencePrefix:s.sequencePrefix,sequenceNumberOfChars:s.sequenceNumberOfChars};if(s.source===v.DefaultValueSource.Const){const l=s.value,d="string"==typeof l?l:l.value;return{valueSourceType:v.DefaultValueSource.Const,value:d,valueSource:d,sequenceNumberOfChars:0}}return s.source===v.DefaultValueSource.Settings?{valueSourceType:v.DefaultValueSource.Settings,value:s.calculatedValue,valueSource:s.value,sequenceNumberOfChars:0}:s.source===v.DefaultValueSource.SystemValue?{valueSourceType:v.DefaultValueSource.SystemValue,value:s.calculatedValue,valueSource:s.sourceValue,sequenceNumberOfChars:0}:{valueSourceType:s.source,value:null,sequenceNumberOfChars:0}}static _getPrimaryDisplayColorColumnUId(s){if(!s.primaryColorColumnName)return null;const l=Object.values(s.columns).find(d=>d.name===s.primaryColorColumnName);if(!l)throw new Error(`Primary color column set in object ${s.name} but column ${s.primaryColorColumnName} does not exist`);return l?.uId}static map(s,l){const d={};return Object.entries(s.columns).forEach(([,C])=>{const D=C,N="Binary"===D.dataValueTypeName?"Blob":D.dataValueTypeName,q=Object.entries(j).find(([,De])=>De.name===N),J=q?Number(q[0]):D.dataValueType,pe=this._getDefaultValue(D.defaultValue);d[D.uId]={uId:D.uId,name:D.name,caption:{[l]:D.caption},dataValueType:J,isInherited:!!D.isInherited,isRequired:!!D.isRequired,isValueCloneable:!!D.isValueCloneable,usageType:D.usageType,referenceSchemaName:D.referenceSchemaName,isMasked:!!D.isMasked,isFormatValidated:!!D.isFormatValidated,isSimpleLookup:!!D.isSimpleLookup,isSensitiveData:!!D.isSensitiveData,defValue:pe}}),{administratedByOperations:s.administratedByOperations,administratedByRecords:s.administratedByRecords,useMasterRecordRights:s.useMasterRecordRights,masterRecordSchemaName:s.masterRecordSchemaName,primaryColumnUId:s.primaryColumn?.uId,primaryDisplayColumnUId:s.primaryDisplayColumn?.uId,primaryColorColumnUId:this._getPrimaryDisplayColorColumnUId(s),hierarchyColumnUId:s.hierarchyColumnUId,createdOnColumnUId:s.createdOnColumnUId,createdByColumnUId:s.createdByColumnUId,modifiedOnColumnUId:s.modifiedOnColumnUId,modifiedByColumnUId:s.modifiedByColumnUId,uId:s.uId,name:s.name,caption:{[l]:s.caption},columns:{Items:d},isVirtual:!!s.isVirtual,isDBView:!!s.isDBView,administratedByColumns:!!s.administratedByColumns,description:{[l]:s.description},parentUId:s.parentUId,isTrackChangesInDB:!!s.isTrackChangesInDB,extendParent:!!s.extendParent}}}class ye{static getPathItemInfo(s){const d=/\[([\w-]+):([\w-]+):?([\w-]*)]$/g.exec(s);if(d){return{isBackReference:!0,referenceSchemaName:d[1],referenceSchemaColumnName:d[2],columnName:d[3]}}return{isBackReference:!1,columnName:s}}static getLastBackwardSchemaNameByColumnPath(s){let l="";return s?.split(".").reverse()?.forEach(C=>{l||C.includes("[")&&(l=this.getPathItemInfo(C).referenceSchemaName)}),l}}let et=class{constructor(s){this._window=s}_getItems(s,l=[]){var d=this;let C=[];const D=[...l];return new Promise(N=>{this._window.require(s,(0,oe.A)(function*(...q){C=yield Promise.all(q.map(J=>d.map(J))),N({schemes:C,notFoundSchemes:D})}),q=>{const J=q.requireModules??[];D.push(...J),0===(s=s.filter(pe=>!J.includes(pe))).length&&N({schemes:C,notFoundSchemes:D}),N(this._getItems(s,D))})})}map(s){return Promise.resolve(s)}get(s){var l=this;return new Promise(d=>{this._window.require([s],function(){var C=(0,oe.A)(function*(D){const N=yield l.map(D);d(N)});return function(D){return C.apply(this,arguments)}}(),()=>{d(null)})})}getItems(s){return this._getItems(s,[])}};et=(0,B.Cg)([(0,B.Qj)(0,(0,c.Inject)(I.ZP)),(0,B.Sn)("design:paramtypes",[Object])],et);const rn=["SysSettings"];class En extends et{constructor(s,l,d){super(s),this._userInfo=l,this._entityHttpService=d}map(s){return Promise.resolve(fe.map(s,this._userInfo.cultureInfo.sysCultureName))}_getLookupEntities(s){const l=s.flatMap(C=>Object.values(C.columns.Items).filter(D=>D.dataValueType===v.DataValueType.Lookup&&D.referenceSchemaName&&!s.find(N=>N.name===D.referenceSchemaName)).map(D=>D.referenceSchemaName)),d=[...new Set(l)];return this.getItems(d)}_getReferenceEntityNameFromBackReferencePath(s){return ye.getPathItemInfo(s).referenceSchemaName}_getReferenceSchemaName(s,l){const d=this._getReferenceEntityNameFromBackReferencePath(s);let C;if(d)C=d;else{const D=Object.entries(l.columns.Items).find(([,q])=>q.name===s);if(!D)throw new Error(`Can't find column '${s}' in EntitySchema '${l.name}'`);const[,N]=D;C=N.referenceSchemaName}return C}_loadSchemasByPath(s,l,d){var C=this;return(0,oe.A)(function*(){const D=d.find(qe=>qe.name===s);if(!D)return{schemas:[],notFoundSchemas:[s]};const N=[...l],q=N.shift(),J=C._getReferenceSchemaName(q,D);if(!J)return{schemas:[],notFoundSchemas:[]};let pe=d.find(qe=>qe.name===J);if(!pe)try{if(pe=yield C.get(J),!pe)return{schemas:[],notFoundSchemas:[J]};d.push(pe)}catch{return{schemas:[],notFoundSchemas:[J]}}const De=N.length?yield C._loadSchemasByPath(pe.name,N,d):{schemas:[],notFoundSchemas:[]};return{schemas:[pe,...De.schemas],notFoundSchemas:De.notFoundSchemas}})()}_getForwardReferenceSchemas(s,l){var d=this;return(0,oe.A)(function*(){const C=yield Promise.all(s.filter(D=>D.forwardReferencePaths).flatMap(D=>D.forwardReferencePaths.flatMap(N=>d._loadSchemasByPath(D.name,N.split("."),l))));return{schemes:C.flatMap(D=>D.schemas),notFoundSchemes:C.flatMap(D=>D.notFoundSchemas)}})()}_getEntitiesToLoadLookups(s,l){return l.schemes.filter(d=>s.requests.find(C=>!0===C.loadLookupColumns&&C.name===d.name))}get(s){var l=()=>super.get,d=this;return(0,oe.A)(function*(){return rn.includes(s)?(yield d._entityHttpService.getEntity(s)).schema:l().call(d,s)})()}getItems(s){var l=()=>super.getItems,d=this;return(0,oe.A)(function*(){const C=s.filter(J=>rn.includes(J)),D=s.filter(J=>!rn.includes(J));let N={success:!0,schemes:[],notFoundSchemes:[]};if(0!==C.length){const J={requests:C.map(pe=>({name:pe,loadLookupColumns:!1}))};N=yield d._entityHttpService.getEntities(J)}const q=yield l().call(d,D);return{schemes:[...q.schemes,...N.schemes],notFoundSchemes:[...q.notFoundSchemes,...N.notFoundSchemes]}})()}getEntity(s){var l=this;return(0,oe.A)(function*(){const d=yield l.get(s);return{success:!!d,schema:d}})()}getEntities(s){var l=this;return(0,oe.A)(function*(){const d=s.requests.map(J=>J.name),C=yield l.getItems(d),D=l._getEntitiesToLoadLookups(s,C),N=yield l._getLookupEntities(D),q=yield l._getForwardReferenceSchemas(s.requests,[...C.schemes,...N.schemes]);return{success:!0,schemes:[...C.schemes,...N.schemes,...q.schemes],notFoundSchemes:[...C.notFoundSchemes,...N.notFoundSchemes,...q.notFoundSchemes]}})()}static{this.\u0275fac=function(l){return new(l||En)(c.\u0275\u0275inject(I.ZP),c.\u0275\u0275inject(de),c.\u0275\u0275inject(Pt))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:En,factory:En.\u0275fac,providedIn:"root"})}}var on,xn,It;!function(g){g.Replace="replace",g.InsertAbove="insertAbove",g.InsertBelow="insertBelow"}(on||(on={}));class Re{static{this.instance=new Re}wait(s){return s()}}!function(g){g.SetHighlighting="setHighlighting",g.RemoveHighlighting="removeHighlighting"}(xn||(xn={}));class _s{}class Nt extends Array{constructor(s){super(),Object.setPrototypeOf(this,Object.create(Nt.prototype)),Array.isArray(s)&&this._fillFromSource(s)}_fillFromSource(s){s.filter(l=>null!=l?.cultureName).forEach(l=>{this.setValueLocalizableString(l.cultureName,l.value)})}getValue(s){const l=this.getLocalizableString(s);return l?l.value:""}hasCultureValue(s,l=!1){const d=this.getLocalizableString(s);return l?null!=(d?.value||null):null!=d?.value}getLocalizableString(s){return this.find(l=>l.cultureName===s)||null}setValueLocalizableString(s,l){const d=this.getLocalizableString(s);return d?d.value=l:this.push({cultureName:s,value:l}),this}setValues(s,l=!1){return s.forEach(d=>{this.hasCultureValue(d.cultureName)&&l||this.setValueLocalizableString(d.cultureName,d.value)}),this}clone(){return new Nt(this)}}!function(g){g.OnDemand="OnDemand",g.OnInit="OnInit"}(It||(It={}));new c.InjectionToken("navigation_handler_token");const An=g=>g.replace(/\./g,"")+"_PropertiesBindingAttribute";var ln;!function(g){g.string="Strings",g.image="Images"}(ln||(ln={}));const Cs="Resources";var Rn;!function(g){g[g.EntitySchema=3]="EntitySchema",g[g.ClientUnitSchema=4]="ClientUnitSchema"}(Rn||(Rn={}));var _e,si=b(92272),ia=b(51807);class we{constructor(s={preventAttributeChangeRequest:!1,preventRunBusinessRules:!1,preventStateChange:!1}){this._preventAttributeChangeRequest=!1,this._preventStateChange=!1,this._preventRunBusinessRules=!1,this._setOptions(s)}_setUsingSilent(s){this._preventStateChange=s,this._preventRunBusinessRules=s,this._preventAttributeChangeRequest=!1}_setOptions(s){this._preventAttributeChangeRequest=s?.preventAttributeChangeRequest??this._preventAttributeChangeRequest,this._preventStateChange=s?.preventStateChange??this._preventStateChange,this._preventRunBusinessRules=s?.preventRunBusinessRules??this._preventRunBusinessRules}getAsSilent(){return this._preventRunBusinessRules&&this._preventStateChange}setOptions(s){if((0,si.A)(s?.silent)){const l=(0,ia.A)(s,"preventAttributeChangeRequest","preventStateChange","preventRunBusinessRules");this._setOptions(l)}else this._setUsingSilent(s?.silent)}getOptions(){return{preventAttributeChangeRequest:this._preventAttributeChangeRequest,preventRunBusinessRules:this._preventRunBusinessRules,preventStateChange:this._preventStateChange}}reset(){this._preventAttributeChangeRequest=!1,this._preventRunBusinessRules=!1,this._preventStateChange=!1}}!function(g){g.EntityDataSource="crt.EntityDataSource",g.WebServiceDataSource="crt.WebServiceDataSource",g.PageParametersDataSource="crt.PageParametersDataSource"}(_e||(_e={}));const rt=new c.InjectionToken("FEATURE_VALUES",{factory:()=>({})});class $e{constructor(s,l,d,C){this.httpClient=s,this._entityRequire=l,this._entityHttp=d,this._featureValues=C}_useRequire(){return this._featureValues?.UseRequireEntitySchema8x??!1}getEntity(s){var l=this;return(0,oe.A)(function*(){return l._useRequire()?l._entityRequire.getEntity(s):l._entityHttp.getEntity(s)})()}getEntities(s){var l=this;return(0,oe.A)(function*(){return l._useRequire()?l._entityRequire.getEntities(s):l._entityHttp.getEntities(s)})()}static{this.\u0275fac=function(l){return new(l||$e)(c.\u0275\u0275inject(R.HttpClient),c.\u0275\u0275inject(En),c.\u0275\u0275inject(Pt),c.\u0275\u0275inject(rt,8))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:$e,factory:$e.\u0275fac,providedIn:"root"})}}function aa(g){return()=>(0,_.lastValueFrom)(g.loadCurrentUserInfo(),{defaultValue:null})}class ri{static{this.\u0275fac=function(l){return new(l||ri)}}static{this.\u0275mod=c.\u0275\u0275defineNgModule({type:ri})}static{this.\u0275inj=c.\u0275\u0275defineInjector({providers:[at,{provide:c.APP_INITIALIZER,useFactory:aa,deps:[st],multi:!0}]})}}class Ot{constructor(s,l,d,C){this.httpClient=s,this._userInfo=l,this._schemaLoader=d,this._entityHttp=C,this._entitySchemaServiceRequests=new Map,this._destroyed$=new _.Subject}_convertToEntitySchema(s){const l=new ne;return l.uId=s.uId,l.name=s.name,l.caption=this._getCaptionElement(s),l.extendParent=s.extendParent,l.packageUId=s.packageUId,l.administratedByColumns=s.administratedByColumns,l.administratedByOperations=s.administratedByOperations,l.administratedByRecords=s.administratedByRecords,l.description=s.description,l.isDBView=s.isDBView,l.isTrackChangesInDB=s.isTrackChangesInDB,l.isVirtual=s.isVirtual,l.masterRecordSchemaName=s.masterRecordSchemaName,l.primaryColumnUId=s.primaryColumnUId,l.primaryDisplayColumnUId=s.primaryDisplayColumnUId,l.primaryColorColumnUId=s.primaryColorColumnUId,l.hierarchyColumnUId=s.hierarchyColumnUId,l.createdOnColumnUId=s.createdOnColumnUId,l.createdByColumnUId=s.createdByColumnUId,l.modifiedOnColumnUId=s.modifiedOnColumnUId,l.modifiedByColumnUId=s.modifiedByColumnUId,l.useMasterRecordRights=s.useMasterRecordRights,l.parentUId=s.parentUId,l.columns=Object.values(s.columns.Items).map(d=>{const C=new Y;return C.uId=d.uId,C.name=d.name,C.caption=this._getCaptionElement(d),C.dataValueType=d.dataValueType,C.usageType=d.usageType,C.referenceSchemaUId=d.referenceSchemaUId,C.referenceSchemaName=d.referenceSchemaName,C.isRequired=d.isRequired,C.isValueCloneable=d.isValueCloneable,C.isMasked=d.isMasked,C.isFormatValidated=d.isFormatValidated,C.isSensitiveData=d.isSensitiveData,C.defaultValueSchema=d.defValue,C.lookupMode=d.isSimpleLookup?je.List:je.SelectionWindow,C}),l}_getCaptionElement(s){return s.caption[this._userInfo.cultureInfo.sysCultureName]||s.caption["en-US"]}_createEntitySchemaColumnFromInformationObject(s){const l=new Y;return l.uId=s.columnUId,l.name=s.columnName,l.caption=s.columnCaption,l.dataValueType=s.columnDataValueType,l.usageType=s.columnUsageType,l.referenceSchemaUId=s.referenceSchemaUId,l.referenceSchemaName=s.referenceSchemaName,l.columnCaptionPath=s.columnCaptionPath,l}_getEntitySchemaFromEndpoint(s,l){return this.httpClient.post(s,l).pipe((0,it.Z)(d=>d.schema?(0,_.of)({success:!0,entitySchema:this._convertToEntitySchema(d.schema)}):(0,_.throwError)({success:!1,entitySchema:null,errorInfo:d.errorInfo})))}_getEntitySchemaColumnByPath(s,l,d="."){const C=`${s}_${d}_${l}`;if(this._entitySchemaServiceRequests.has(C))return this._entitySchemaServiceRequests.get(C);const D=this.httpClient.post(this._entityHttp.getSchemaDesignerServiceEndpoint(),{getSchemaColumnInformation:{entitySchemaUId:s,schemaColumnPath:l,schemaColumnCaptionPathDelimiter:d}}).pipe((0,ue.M)(({success:N})=>{if(!N)throw new Error("SchemaDesignerService request has failed")}),(0,A.T)(({getSchemaColumnInformationResponse:N})=>this._createEntitySchemaColumnFromInformationObject(N)),(0,ue.M)(()=>this._entitySchemaServiceRequests.delete(C)),(0,me.u)());return this._entitySchemaServiceRequests.set(C,D),D}_combineEntitySchemaColumnInformationRequestsWithPaths(s,l){return l.reduce((d,C)=>({...d,[C]:this._getEntitySchemaColumnByPath(s,C)}),{})}getEntitySchemaByUId(s,l){const d=`${s}_${l}`;if(this._entitySchemaServiceRequests.has(d))return this._entitySchemaServiceRequests.get(d);const C=l?this._entityHttp.getEntitySchemaServiceEndpoint():this._entityHttp.getRuntimeEntitySchemaServiceEndpoint(),D={uId:s};l&&(D.packageUId=l);const N=this._getEntitySchemaFromEndpoint(C,D).pipe((0,ue.M)(()=>this._entitySchemaServiceRequests.delete(d)),(0,me.u)());return this._entitySchemaServiceRequests.set(d,N),N}getEntitySchemaByName(s){if(this._entitySchemaServiceRequests.has(s))return this._entitySchemaServiceRequests.get(s);const l=(0,_.from)(this._schemaLoader.getEntity(s)).pipe((0,A.T)(d=>({success:d.success,entitySchema:d.schema?this._convertToEntitySchema(d.schema):null,errorInfo:d.errorInfo})),(0,ue.M)(()=>this._entitySchemaServiceRequests.delete(s)),(0,me.u)(),(0,z.W)(d=>(this._entitySchemaServiceRequests.delete(s),(0,_.throwError)(()=>d))));return this._entitySchemaServiceRequests.set(s,l),l}getEntitySchemes(s){const l=JSON.stringify(s);if(this._entitySchemaServiceRequests.has(l))return this._entitySchemaServiceRequests.get(l);const d=(0,_.from)(this._schemaLoader.getEntities(s)).pipe((0,A.T)(C=>({success:C.success,schemes:C.schemes.map(D=>this._convertToEntitySchema(D)),notFoundSchemes:C.notFoundSchemes})),(0,ue.M)(()=>this._entitySchemaServiceRequests.delete(l)),(0,me.u)(),(0,z.W)(C=>(0,_.throwError)(()=>C)));return this._entitySchemaServiceRequests.set(l,d),d}getEntitySchemaColumnsInformationByMetaPath(s,l){const d={getSchemaColumnsInformation:{entitySchemaUId:s,schemaColumnMetaPaths:l}};return this.httpClient.post(this._entityHttp.getSchemaDesignerServiceEndpoint(),d).pipe((0,ue.M)(({success:C})=>{if(!C)throw new Error("SchemaDesignerService request is failed")}),(0,A.T)(({getSchemaColumnsInformationResponse:C})=>C.map(D=>({column:this._createEntitySchemaColumnFromInformationObject(D),columnMetaPath:D.columnMetaPath,columnPath:D.columnPath,columnCaptionPath:D.columnCaptionPath}))))}getEntitySchemaColumnsInformationByPath(s,l,d){return this._getEntitySchemaColumnByPath(s,l,d)}getEntitySchemaColumnsInformationByPathsArray(s,l){return(0,_.forkJoin)(this._combineEntitySchemaColumnInformationRequestsWithPaths(s,l))}getColumnCaptionPathByMetaPath(s){const l={getColumnCaptionPathByMetaPath:s};return this.httpClient.post(this._entityHttp.getSchemaDesignerServiceEndpoint(),l).pipe((0,ue.M)(({success:d})=>{if(!d)throw new Error("SchemaDesignerService request is failed")}),(0,A.T)(({columnCaptionPath:d})=>d))}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}static{this.\u0275fac=function(l){return new(l||Ot)(c.\u0275\u0275inject(R.HttpClient),c.\u0275\u0275inject(de),c.\u0275\u0275inject($e),c.\u0275\u0275inject(Pt))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Ot,factory:Ot.\u0275fac,providedIn:"root"})}}var Gt=b(39554),Ti=b(83437),pt=b(68642);function Jt(g,s,l){return{file:g,error:s,message:l}}class ot{constructor(s,l){this._translateService=s,this._sysSettingsService=l}_getMaxFileSizeExceededExceptionCode(){return"MaxFileSizeExceededException"}_getIsOversizedErrorExist(s){return s&&s.some(l=>l.error===this._getMaxFileSizeExceededExceptionCode())}_getOversizeErrorTipMessage(s){return this._getIsOversizedErrorExist(s)?pt.Qf.format("{0}\r\n\r\n",this._translateService.instant("InfoDialog.FileUpload.ChangeFileSizeInfoMessage")):pt.Qf.empty}_getFormattedFilesNames(s){return s.map(l=>"- "+l.file.name).join("\r\n")}_getOversizedFilesLogs(s,l){const d=pt.Qf.format(this._translateService.instant("InfoDialog.FileUpload.MaxFileSizeExceededExceptionMessage"),l);return s.map(C=>Jt(C,this._getMaxFileSizeExceededExceptionCode(),d))}_getZerosizedFilesLogs(s){return s.map(l=>Jt(l,"FileWithZeroSizeException",this._translateService.instant("InfoDialog.FileUpload.EmptyFileMessage")))}_buildMessage(s){const l=this._translateService.instant("InfoDialog.FileUpload.InvalidExtension.Deny"),C=this._translateService.instant("InfoDialog.FileUpload.FileListHeader");let D="";for(const N in s)if(Object.prototype.hasOwnProperty.call(s,N)){const q=s[N];let J=(0,pt.JT)(l+"\r\n\r\n"+C+":\r\n",N);q.forEach(pe=>{J+="- "+pe.name+"\r\n"}),D+=J+"\r\n"}return D}isFileExtensionDeny(s){var l=this;return(0,oe.A)(function*(){const d=s.name.split(".").pop().toLowerCase();return(yield l._sysSettingsService.getByCode("FileExtensionsDenyList"))?.value.toLowerCase().indexOf(d)>-1})()}createExtensionAttachmentsErrorMessage(s){const l=(0,Gt.A)(s,d=>d.name.split(".").pop().toLowerCase());return this._buildMessage(l)}createFileErrorMessageForLogs(s){s=s.reverse();const l="\r\n\r\n",C="{0}"+l+this._translateService.instant("InfoDialog.FileUpload.FileListHeader")+":\r\n{1}",D=Ti.A.groupBy(s,"message");let N="";for(const[q,J]of Object.entries(D)){const pe=this._getFormattedFilesNames(J);N+=pt.Qf.format(C,q,pe),N+=l}return N+=this._getOversizeErrorTipMessage(s),N.slice(0,N.length-4)}processSelectedFiles(s,l){var d=this;return(0,oe.A)(function*(){const C=[...s],N=(yield d._sysSettingsService.getByCode("MaxFileSize"))?.value||0,{allowed:q,oversized:J,zerosized:pe,maxFileSizeMB:De}=function Vt(g,s,l){const d=l?Math.min(s,l):s,C=1048576*d;return{allowed:g.filter(J=>J.size<=C&&J.size>0),oversized:g.filter(J=>J.size>C),zerosized:g.filter(J=>0===J.size),maxFileSizeMB:d}}(C,N,l);return{files:q,errors:d._getOversizedFilesLogs(J,De).concat(d._getZerosizedFilesLogs(pe))}})()}static{this.\u0275fac=function(l){return new(l||ot)(c.\u0275\u0275inject(W.c$),c.\u0275\u0275inject(v.SysSettingsService))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:ot,factory:ot.\u0275fac,providedIn:"root"})}}var cn=b(54807),Di=b(32835),lt=b(72831),Ut=b(46991),We=b(76696);class zt{constructor(s){this._document=s}_getDownloadFileUrl(s){const l=new Blob([s],{type:"octet/stream"});return window.URL.createObjectURL(l)}_getDownloadFileName(s){const l=s.headers.get("Content-Disposition");return l?l.match(/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/)[1]:null}download(s,l){const d=this._getDownloadFileUrl(s);this.downloadFromUrl(d,l)}downloadFromResponse(s,l){l=l||this._getDownloadFileName(s),this.download(s.body,l)}downloadFromUrl(s,l){const d=this._document,C=d.createElement("a");C.href=s,C.download=l,d.body.appendChild(C),C.click(),d.body.removeChild(C)}static{this.\u0275fac=function(l){return new(l||zt)(c.\u0275\u0275inject(We.DOCUMENT))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:zt,factory:zt.\u0275fac})}}class Mi{encodeKey(s){return encodeURIComponent(s)}encodeValue(s){return encodeURIComponent(s)}decodeKey(s){return decodeURIComponent(s)}decodeValue(s){return decodeURIComponent(s)}}class Un{constructor(s,l,d){this.http=s,this._fileDownloadService=l,this._userInfo=d,this._baseEndpoint="rest/FileApiService/",this._uploadFileMethodName="UploadFile",this._uploadAndAttachMethodName="UploadAndAttachFile",this._getFileSchemasMethodName="GetAllFileSchemas",this._chunkSize=5e5}_getEndpoint(s){return(this._userInfo.isSSP?"ssp/":"")+`${this._baseEndpoint}${s}`}_prepareError(s,l){const d={...s,file:l.file};return(0,_.throwError)(()=>d)}_sendWithChunks(s,l,d,C=this._chunkSize){const D=new Uint8Array(s.content),N=new Array;for(let J=0;J<D.length;J+=C){const pe=Math.min(J+C,D.length),qe={start:J,end:pe,content:new Blob([D.subarray(J,pe)])};N.push(qe)}let q=0;return(0,_.from)(N).pipe((0,cn.H)(J=>(q++,s.progress=Math.floor(q/N.length*100),this.http.post(d,J.content,{headers:new R.HttpHeaders({"Content-Range":`bytes ${J.start}-${J.end-1}/${s.file.size}`,"Content-Type":s.file.type,"Content-Disposition":`attachment; filename=${encodeURIComponent(s.file.name)}`}),params:l}).pipe((0,Di.L)(2),(0,lt.n)(pe=>pe&&pe.success?(0,_.of)(pe):(0,_.throwError)(()=>pe.errorInfo)),(0,z.W)(pe=>this._prepareError(pe,s))))),(0,Ut.$)())}upload(s){let l=new R.HttpParams({encoder:new Mi}).set("fileId",s.id).set("totalFileLength",s.file.size).set("mimeType",s.file.type).set("fileName",s.file.name).set("columnName","Data").set("entitySchemaName",s.fileEntitySchemaName).set("parentColumnName",s.recordColumnName).set("parentColumnValue",s.recordId);const d={...s.fileGroup&&{FileGroupId:s.fileGroup},...s.tag&&{Tag:s.tag},...s.recordEntitySchemaName&&{RecordSchemaName:s.recordEntitySchemaName}};Object.keys(d).length&&(l=l.append("AdditionalParams",JSON.stringify(d)));const C=this._getEndpoint(this._uploadFileMethodName);return this._sendWithChunks(s,l,C)}uploadAsColumn(s){const l=new R.HttpParams({encoder:new Mi}).set("fileId",s.id).set("totalFileLength",s.file.size).set("mimeType",s.file.type).set("columnName","Data").set("fileName",s.file.name).set("entitySchemaName",s.fileEntitySchemaName),d=this._getEndpoint(this._uploadFileMethodName);return this._sendWithChunks(s,l,d)}uploadAndAttach(s){const l=new R.HttpParams({encoder:new Mi}).set("fileId",s.id).set("totalFileLength",s.file.size).set("mimeType",s.file.type).set("columnName","Data").set("fileName",s.file.name).set("parentEntitySchemaName",s.recordEntitySchemaName).set("entitySchemaName",s.fileEntitySchemaName).set("parentColumnValue",s.recordId),d=this._getEndpoint(this._uploadAndAttachMethodName);return this._sendWithChunks(s,l,d)}uploadToCustomEndpoint(s,l,d){const C=new R.HttpParams({encoder:new Mi}).set("totalFileLength",s.file.size).set("mimeType",s.file.type).set("fileName",s.file.name);return this._sendWithChunks(s,C,l,d)}download(s,l){this._fileDownloadService.downloadFromUrl(s,l)}getAllFileSchemas(){const s=this._getEndpoint(this._getFileSchemasMethodName);return this.http.get(s)}static{this.\u0275fac=function(l){return new(l||Un)(c.\u0275\u0275inject(R.HttpClient),c.\u0275\u0275inject(zt),c.\u0275\u0275inject(de))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Un,factory:Un.\u0275fac})}}class Tt{read(s){return new _.Observable(l=>{const d=new FileReader;d.onloadend=function(){var C=(0,oe.A)(function*(D){l.next({content:D.target?.result,file:s}),l.complete()});return function(D){return C.apply(this,arguments)}}(),d.readAsArrayBuffer(s)})}static{this.\u0275fac=function(l){return new(l||Tt)}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Tt,factory:Tt.\u0275fac})}}class Yt{constructor(s,l){this._httpClient=s,this._translateService=l}_generateFileDestinationUrl(s,l){return`ImageAPIService/upload?fileapi${l.lastModified}&totalFileLength=${l.size}&fileId=${s}&mimeType=${encodeURIComponent(l.type)}`}upload(s,l){const d=this._generateFileDestinationUrl(s,l);return this._httpClient.post(d,l,{headers:{"Content-Range":`bytes 0-${l.size}/${l.size}`,"Content-Type":l.type,"Content-Disposition":`attachment; filename=${encodeURIComponent(l.name)}`}}).pipe((0,z.W)(C=>(0,_.of)({error:C.error?.error||this._translateService.instant("InfoDialog.FileUpload.UnknownServerError")})))}static{this.\u0275fac=function(l){return new(l||Yt)(c.\u0275\u0275inject(R.HttpClient),c.\u0275\u0275inject(W.c$))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Yt,factory:Yt.\u0275fac,providedIn:"root"})}}class un{constructor(s,l){this._translateService=s,this._userInfo=l,this._defaultCulture="en-US"}initialize(){const s=this._userInfo?.cultureInfo?.sysCultureName??this._defaultCulture;this._translateService.setDefaultLang(this._defaultCulture),this._translateService.currentLang=s,this._translateService.getTranslation(s)}static{this.\u0275fac=function(l){return new(l||un)(c.\u0275\u0275inject(W.c$),c.\u0275\u0275inject(de))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:un,factory:un.\u0275fac,providedIn:"root"})}}var Kt=b(47868),Dt=b(76340);const oi=new c.InjectionToken("Custom event name for get translations");class zn extends W.Wr{constructor(s,l,d){super(),this.customEventService=s,this._store=l,this._getTranslationsEventName=d,this._destroyed$=new _.Subject}getTranslation(s){return new _.Observable(l=>{this.customEventService.subscribe(this._getTranslationsEventName).pipe((0,Dt.Q)(this._destroyed$),(0,ue.M)(d=>{this._store.langs.forEach(C=>{const D=this._store.translations[C];this._store.translations[C]=Kt.A(D,d)})})).subscribe(d=>{l.next(d)},_.noop,()=>{l.complete()}),this.customEventService.createOutboundChannel(this._getTranslationsEventName).next()})}ngOnDestroy(){this._destroyed$.next()}static{this.\u0275fac=function(l){return new(l||zn)(c.\u0275\u0275inject(I.Dj),c.\u0275\u0275inject(W.Mw),c.\u0275\u0275inject(oi))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:zn,factory:zn.\u0275fac})}}class li{constructor(s){this._httpClient=s,this._serviceEndpoint="rest/MainMenuService/"}logout(){const s=this._serviceEndpoint+"Logout";return this._httpClient.post(s,{}).pipe((0,A.T)(l=>({redirectLocation:l.RedirectLocation})))}static{this.\u0275fac=function(l){return new(l||li)(c.\u0275\u0275inject(R.HttpClient))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:li,factory:li.\u0275fac,providedIn:"root"})}}var ee=b(64864),L=b(38503),H=b(10699);class ae{constructor(s){this._zone=s,this._message$=new _.Subject}init(s){return this._zone.runOutsideAngular(()=>(this._connection=(new H.$I).withUrl(s).withAutomaticReconnect().withHubProtocol(new H.cc).build(),this._connection.on("ServerMessage",l=>this._zone.run(()=>this._message$.next(l))),(0,_.from)(this._connection.start())))}sendMessage(s){return(0,_.from)(this._connection.send("SendMessage",s))}subscribe(){return this._message$}ngOnDestroy(){this._connection.off("ServerMessage"),this._message$.complete(),this._connection.stop().then()}static{this.\u0275fac=function(l){return new(l||ae)(c.\u0275\u0275inject(c.NgZone))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:ae,factory:ae.\u0275fac,providedIn:"root"})}}var le=b(7541);const Na="pong";class Tr{constructor(s){this._ngZone=s}_createHeartbeatRequestMessage(){return{Id:(0,v.generateGuid)(),Header:{Sender:"ConsoleCommand",BodyTypeName:"System.String"},Body:"ping"}}_isHeartbeatResponseMessage(s){const l="CommandService"===s.Header?.Sender,d=s.Body===Na;return l&&d}_startHeartbeat(){this._stopHeartbeat(),this._ngZone.runOutsideAngular(()=>{console.log("WS-Heartbeat: connection ping scheduled for every [30] sec");const s=(0,_.timer)(1e3,3e4).pipe((0,_.tap)(()=>{this._webSocket$.next(this._createHeartbeatRequestMessage())}),(0,_.concatMap)(()=>(0,_.race)(this._webSocket$.pipe((0,_.filter)(l=>this._isHeartbeatResponseMessage(l)),(0,_.map)(l=>l.Body),(0,_.catchError)(()=>(0,_.of)("error"))),(0,_.of)("timeout").pipe((0,_.delay)(1e4)))));this._heartbeatSubscription=s.subscribe(l=>{switch(l){case Na:console.log(`WS-Heartbeat: Server responded with: ${Na}`);break;case"timeout":console.error("WS-Heartbeat: Server failed to respond in 10 seconds");break;case"error":console.error("WS-Heartbeat: Server errored out")}})})}_stopHeartbeat(){this._heartbeatSubscription&&this._heartbeatSubscription.unsubscribe()}init(s){return new _.Observable(l=>{this._webSocket$=(0,le.K)({url:s,openObserver:{next:()=>{console.log(`Websocket channel opened for url: ${s}`),this._startHeartbeat(),l.complete()}}}),this._subscription=this._webSocket$.subscribe()})}sendMessage(s){return new _.Observable(l=>{this._webSocket$.next(s),l.next(),l.complete()})}subscribe(){const s={delay:2e3};return this._webSocket$.pipe((0,_.retry)(s),(0,_.filter)(l=>!this._isHeartbeatResponseMessage(l)))}ngOnDestroy(){this._stopHeartbeat(),this._webSocket$.complete(),this._subscription.unsubscribe()}static{this.\u0275fac=function(l){return new(l||Tr)(c.\u0275\u0275inject(c.NgZone))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Tr,factory:Tr.\u0275fac,providedIn:"root"})}}let Pn=class Th{constructor(s,l,d){this.applicationInfo=s,this.injector=l,this.applicationInfoService=d,this._destroyed$=new _.Subject,this.init$=new _.ReplaySubject(1),this.messageEvent$=new _.Subject,s.clientConnectionClassName&&""!==s.clientConnectionClassName?this._initialize(s):this.applicationInfoService.loadApplicationInfo().subscribe(C=>{this._initialize(C.applicationInfo)})}_initialize(s){this.msgChannel=this._getChannel(s.clientConnectionClassName),this._initChannel(s.serviceUrl)}_getChannel(s){switch(s){case"Terrasoft.WebSocketChannel":return this.injector.get(Tr);case"Terrasoft.SignalRChannel":return this.injector.get(ae)}}_buildMessageEvent(s){let l;if(s.Body&&"string"==typeof s.Body)try{l=JSON.parse(s.Body)}catch(d){return(0,c.isDevMode)()&&console.warn(`MessageChannelService. Parse error: ${d}`),null}else s.Body&&"object"==typeof s.Body&&(l=s.Body);return{header:{sender:s?.Header?.Sender,bodyTypeName:s?.Header?.BodyTypeName},body:l,id:s.Id}}_subscribeToMsgChannel(){this.msgChannel.subscribe().pipe((0,Dt.Q)(this._destroyed$)).subscribe(s=>{const l=this._buildMessageEvent(s);l&&this.messageEvent$.next(l)})}_initChannel(s){this.msgChannel.init(s).subscribe({complete:()=>{this.init$.next(this.msgChannel),this._subscribeToMsgChannel()}})}_sendMessageInternal(s,l,d){const C={Id:ee.q.create().toString(),Header:{Sender:s,BodyTypeName:"System.String",ChannelType:l},Body:JSON.stringify(d)};return this.init$.pipe((0,_.take)(1),(0,lt.n)(()=>this.msgChannel.sendMessage(C)))}getMessages(s){return v.ValidationUtilities.checkArgumentEmpty("sender",s),this.messageEvent$.pipe((0,L.p)(l=>l.header.sender===s))}subscribe(s,l){v.ValidationUtilities.checkArgumentEmpty("sender",s),v.ValidationUtilities.checkArgumentEmpty("callback",l);const d=this.getMessages(s).subscribe(l);return Promise.resolve(new v.Subscription(()=>d.unsubscribe()))}sendMessage(s,l,d){let C,D;const N=!!d;N?(C=s,D=l,v.ValidationUtilities.checkStringIsNotEmpty("sender",C),v.ValidationUtilities.checkEnumOutOfRange("channelType",d,v.MessageChannelType)):(D=s,C=l,v.ValidationUtilities.checkArgumentEmpty("channelType",C),v.ValidationUtilities.checkEnumOutOfRange("channelType",C,v.MessageChannelType));const q=this._sendMessageInternal(C,d,D);return N?(0,_.firstValueFrom)(q):q}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete(),this.init$.complete(),this.messageEvent$.complete()}static{this.\u0275fac=function(l){return new(l||Th)(c.\u0275\u0275inject(h),c.\u0275\u0275inject(c.Injector),c.\u0275\u0275inject(ie))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Th,factory:Th.\u0275fac,providedIn:"root"})}};var ci;Pn=(0,B.Cg)([(0,I.op)({requestType:"crt.MessageChannelService"}),(0,B.Sn)("design:paramtypes",[h,c.Injector,ie])],Pn),function(g){g[g.General=0]="General",g[g.Advanced=1]="Advanced",g[g.None=2]="None"}(ci||(ci={}));ci.General,ci.General,ci.Advanced,ci.Advanced,ci.None,ci.None;var Oo,sa,Oa,Mr,Va,La,Fa,ka,ja,wr,bs,Ss,Ba,yt,Er;!function(g){g[g.Error=1]="Error",g[g.Warning=2]="Warning",g[g.Information=4]="Information"}(Oo||(Oo={})),function(g){g.Contains="contains",g.StartsWith="starts-with",g.Equals="equals"}(sa||(sa={})),function(g){g[g.Asc=0]="Asc",g[g.Desc=1]="Desc"}(Oa||(Oa={})),function(g){g.METADATA_INIT="METADATA_INIT",g.MODEL_INIT="MODEL_INIT",g.VIEW_MODEL_INIT="VIEW_MODEL_INIT"}(Mr||(Mr={})),function(g){g.Blank="_blank",g.Self="_self"}(Va||(Va={})),function(g){g.BusinessRule="BusinessRule",g.RelatedPage="RelatedPage",g.TimelineEntity="TimelineEntity",g.AppearanceSettings="AppearanceSettings",g.Sidebar="Sidebar",g.UCTestAddon="UCTestAddon"}(La||(La={})),function(g){g[g.None=0]="None",g[g.Module=1]="Module",g[g.EditViewModelSchema=2]="EditViewModelSchema",g[g.ModuleViewModelSchema=3]="ModuleViewModelSchema",g[g.DetailViewModelSchema=4]="DetailViewModelSchema",g[g.GridDetailViewModelSchema=5]="GridDetailViewModelSchema",g[g.EditControlsDetailViewModelSchema=6]="EditControlsDetailViewModelSchema",g[g.UnitTestModule=7]="UnitTestModule",g[g.GridEditDetailViewModelSchema=8]="GridEditDetailViewModelSchema",g[g.AngularSchema=9]="AngularSchema"}(Fa||(Fa={})),function(g){g.Byte="Byte",g.Kilobyte="Kilobyte",g.Megabyte="Megabyte",g.Gigabyte="Gigabyte"}(ka||(ka={})),function(g){g.Const="Const",g.SysValue="SysValue",g.SysSetting="SysSetting",g.AttributeValue="AttributeValue",g.AttributeProperty="AttributeProperty",g.Formula="Formula"}(ja||(ja={})),function(g){g[g.IsNull=0]="IsNull",g[g.IsNotNull=1]="IsNotNull",g[g.Equal=2]="Equal",g[g.NotEqual=3]="NotEqual",g[g.Contain=11]="Contain",g[g.NotContain=12]="NotContain"}(wr||(wr={})),function(g){g[g.None=0]="None",g[g.And=1]="And",g[g.Or=2]="Or"}(bs||(bs={})),function(g){g.ChangeAttributeValue="ChangeAttributeValue",g.ChangeAttributeProperty="ChangeAttributeProperty",g.DataLoaded="DataLoaded",g.ContextReady="ContextReady"}(Ss||(Ss={})),function(g){g[g.General=0]="General",g[g.External=1]="External"}(Ba||(Ba={})),function(g){g.LightGreen="#A6DE00",g.Green="#20A959",g.DarkGreen="#22AC14",g.Orange="#FFAC07",g.OrangeRed="#FF8800",g.Coral="#F9307F",g.BrightRed="#FF602E",g.Red="#FF4013",g.Purple="#B87CCF",g.Violet="#7848EE",g.CelestialBlue="#247EE5",g.Blue="#0058EF",g.LightBlue="#009DE3",g.NavyBlue="#4F43C2",g.DarkTurquoise="#08857E",g.Turquoise="#00BFA5",g.BurntCoral="#BE1B5A",g.CadmiumRed="#E00022",g.ForestGreen="#0B6A32",g.SteelBlue="#1566B9",g.VividPurple="#9641A9",g.RustyOrange="#F86700",g.DarkBlue="#0D2E4E"}(yt||(yt={})),function(g){g.LightGreen="#7DA112",g.Green="#008537",g.DarkGreen="#0B8500",g.Orange="#EF6F00",g.OrangeRed="#DB3C00",g.Coral="#C2185B",g.BrightRed="#DC3A00",g.Red="#DB2D00",g.Purple="#A400AA",g.Violet="#512DA8",g.CelestialBlue="#0058EF",g.Blue="#014BCB",g.LightBlue="#0073EA",g.NavyBlue="#28216B",g.DarkTurquoise="#00665C",g.Turquoise="#118574",g.BurntCoral="#A10E47",g.CadmiumRed="#B8001C",g.ForestGreen="#0A592A",g.SteelBlue="#145597",g.VividPurple="#7B2D8D",g.RustyOrange="#9C3305",g.DarkBlue="#071D35"}(Er||(Er={}));yt.LightGreen,yt.Green,yt.DarkGreen,yt.Orange,yt.OrangeRed,yt.Coral,yt.BrightRed,yt.Red,yt.Purple,yt.Violet,yt.CelestialBlue,yt.Blue,yt.LightBlue,yt.NavyBlue,yt.DarkTurquoise,yt.Turquoise;class Hn{constructor(s){this.window=s}navigate(s,l,d=Va.Blank){this.window.open(s,l||d)}static{this.\u0275fac=function(l){return new(l||Hn)(c.\u0275\u0275inject(I.ZP))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Hn,factory:Hn.\u0275fac,providedIn:"root"})}}class mn{}const xr=new c.InjectionToken("CRT_REQUIRE_JS"),Pc=[v.DataValueType.DateTime,v.DataValueType.Date,v.DataValueType.Time],vs=new Map([[v.DataValueType.Integer,0],[v.DataValueType.Float,2],[v.DataValueType.Money,2],[v.DataValueType.FLOAT1,1],[v.DataValueType.FLOAT2,2],[v.DataValueType.FLOAT3,3],[v.DataValueType.FLOAT4,4],[v.DataValueType.FLOAT8,8]]),$n=[v.DataValueType.Float,v.DataValueType.FLOAT1,v.DataValueType.FLOAT2,v.DataValueType.FLOAT3,v.DataValueType.FLOAT4,v.DataValueType.FLOAT8,v.DataValueType.Integer,v.DataValueType.Money];function Nn(){let g=location.pathname;const s=g.match(/.*?\/\d\/?/);return g=s&&1===s.length?function Is(g){return g.endsWith("/")||(g+="/"),g}(s[0]):"",Ms(location.origin,g)}function wi(){let s=Nn().replace(location.origin,"");return s.endsWith("/")&&(s=s.substring(0,s.length-1)),s}function Ga(){return Nn().replace(/\/0\/?$|\/+$/,"")}function Ms(...g){return g.map(s=>function Rr(g){return g.replace(/(^([/\\])+)|(([/\\])+$)/,"")}(s)).join("/")}class qn extends mn{constructor(s,l){super(),this._requireJs=s,this._httpClient=l,this._serviceEndpoint="ServiceModel/ClientUnitSchemaPathService.svc/",this.paths=new Map}_loadPartOfSchema(s){const l=this._serviceEndpoint+"GetPathsBySchemaName/"+s;return this._httpClient.post(l,null).pipe((0,A.T)(d=>d?.paths??[]))}register(s){return this.paths.has(s)?(0,_.of)(void 0):this._loadPartOfSchema(s).pipe((0,A.T)(l=>{const d=Object.fromEntries(l.map(C=>[C.name,We.Location.joinWithSlash(Nn(),C.path)]));this._requireJs.config({paths:d});for(const{name:C,path:D}of l)this.paths.set(C,D)}))}registerDescriptors(s){const l=Object.fromEntries(s.map(d=>[d.schemaName,We.Location.joinWithSlash(We.Location.joinWithSlash(Nn(),d.path),d.schemaName)]));this._requireJs.config({paths:l})}static{this.\u0275fac=function(l){return new(l||qn)(c.\u0275\u0275inject(xr),c.\u0275\u0275inject(R.HttpClient))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:qn,factory:qn.\u0275fac})}}class Ua extends mn{constructor(s,l){super(),this._requireJs=s,this._appInfo=l,this._hashParamName="hash",this._workspaceBaseUrl=Nn(),this._emptyResourcesModulePath="Terrasoft/configuration/resources/empty-resources.js"}_getSchemaRuntimePath(s){return We.Location.joinWithSlash(this._workspaceBaseUrl,s.staticFileContent.schemasRuntimePath)}_getResourceRuntimePath(s){return We.Location.joinWithSlash(this._workspaceBaseUrl,s.staticFileContent.resourcesRuntimePath)}_getEmptyResourcesPath(s){const l=We.Location.joinWithSlash(this._workspaceBaseUrl,s.coreModulesPath),d=new URL(We.Location.joinWithSlash(l,this._emptyResourcesModulePath));return d.searchParams.set(this._hashParamName,s.configurationContentHash),d.toString()}_getSchemaPath(s,l){const d=new URL(We.Location.joinWithSlash(this._getSchemaRuntimePath(l),`${s}.js`));return d.searchParams.set(this._hashParamName,l.configurationContentHash),d.toString()}_getResourcePath(s,l){const d=new URL(We.Location.joinWithSlash(this._getResourceRuntimePath(l),`${s}Resources.js`));return d.searchParams.set(this._hashParamName,l.configurationContentHash),d.toString()}register(s){return this._requireJs.config({paths:{[s]:this._getSchemaPath(s,this._appInfo),[`${s}Resources`]:[this._getResourcePath(s,this._appInfo),this._getEmptyResourcesPath(this._appInfo)]}}),(0,_.of)(void 0)}registerDescriptors(s,l){s.forEach(d=>{const C=d.schemaName;this._requireJs.config({paths:{[C]:this._getSchemaPath(C,l),[`${C}Resources`]:[this._getResourcePath(C,l),this._getEmptyResourcesPath(l)]}})})}static{this.\u0275fac=function(l){return new(l||Ua)(c.\u0275\u0275inject(xr),c.\u0275\u0275inject(h))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Ua,factory:Ua.\u0275fac})}}c.Injector;class ws extends mn{register(){return(0,_.of)(void 0)}registerDescriptors(s){}static{this.\u0275fac=(()=>{let s;return function(d){return(s||(s=c.\u0275\u0275getInheritedFactory(ws)))(d||ws)}})()}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:ws,factory:ws.\u0275fac})}}class Wn{constructor(s){this._window=s}get(){return this._window.requirejs}static{this.\u0275fac=function(l){return new(l||Wn)(c.\u0275\u0275inject(I.ZP))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Wn,factory:Wn.\u0275fac})}}class ce{constructor(s){this.userInfo=s,this._resourceMacrosRegExpPattern="(?<macrosBody>#ResourceString\\((?<macrosArgs>[^)]*)\\)#)",this._viewModelAttributeRegExpPattern=`\\$${Cs}.${ln.string}.(?<macrosArgs>[\\S\\s]*)`,this._sysCultureName=this.userInfo.cultureInfo.sysCultureName,this._defCultureName=this.userInfo.defCultureInfo.sysCultureName}_getLczResource(s){const l={};return s.forEach(d=>l[d.cultureName]=d.value),l}_getResourceValueMatches(s){const l=new RegExp(this._resourceMacrosRegExpPattern,"g"),d=new RegExp(this._viewModelAttributeRegExpPattern,"g");let C=[...(s??"").matchAll(d)];return C.length||(C=[...(s??"").matchAll(l)]),C}_findStringPropertyResource(s,l){const{resourceName:d,useMacrosTemplate:C}=this.findResourcesName(s);if(d)return{path:l,resourceName:d,useMacrosTemplate:C}}_findArrayPropertyResources(s,l=""){return s.flatMap((d,C)=>this.findPropertyResources(d,l?`${l}.${C}`:`${C}`))}_findObjectPropertyResources(s,l=""){return Object.entries(s).flatMap(([d,C])=>this.findPropertyResources(C,l?`${l}.${d}`:d))}findLocalizableValue(s){if("string"==typeof s)return s;if(!s||"object"!=typeof s)return null;let l;return l=Array.isArray(s)?s?.filter(d=>d.value).reduce((d,C)=>Object.assign(d,{[C.cultureName]:C.value}),{}):s,(l[this._sysCultureName]??l[this._defCultureName])?.toString()??null}findResourcesName(s){const d=this._getResourceValueMatches(s)[0]?.groups.macrosArgs,C=s?.startsWith("#MacrosTemplateString");return{resourceName:d,useMacrosTemplate:C}}findLocalizationFromResourceString(s,l,d=""){const{resourceName:C}=this.findResourcesName(s),D=void 0!==C&&l.strings[C];if(D){const J=Object.entries(D).map(([pe,De])=>({cultureName:pe,value:De}));return new Nt(J)}const N=void 0===C&&s||d,q=this._sysCultureName||this._defCultureName;return new Nt([{cultureName:q,value:N}])}findValueFromResource(s,l){const d=this.findLocalizationFromResourceString(s,l),C=this._getLczResource(d);return this.findLocalizableValue(C)}findViewModelResourceValue(s,l,d){var C=this;return(0,oe.A)(function*(){const{resourceName:D}=C.findResourcesName(s);let N;return D&&(N=yield l.Strings[D]),N||d||s})()}findPropertyResources(s,l=""){return s?Array.isArray(s)?this._findArrayPropertyResources(s,l):"object"==typeof s?this._findObjectPropertyResources(s,l):"string"==typeof s?[this._findStringPropertyResource(s,l)].filter(Boolean):[]:[]}static{this.\u0275fac=function(l){return new(l||ce)(c.\u0275\u0275inject(de))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:ce,factory:ce.\u0275fac,providedIn:"root"})}}const be=new c.InjectionToken("Represents a list of schema change message predicates"),Ve=new c.InjectionToken("Represents a list of schema remove message predicates");class mt{constructor(s,l,d){this._messageChannelService=s,this._changePredicates=l,this._removePredicates=d,this._destroyed$=new _.Subject,this.schemaChanged$=new _.Subject,this.schemaRemoved$=new _.Subject,this._subscribeMessageChannelEvent()}_getSchemaType(s){let l;switch(s){case"ClientUnitSchemaManager":l=Rn.ClientUnitSchema;break;case"EntitySchemaManager":l=Rn.EntitySchema}return l}_processMessage(s,l){const d=s.body,C=this._getSchemaType(d.ManagerName);C&&l.next({name:d.Name,uId:d.UId,schemaType:C})}_subscribeMessageChannelEvent(){this._messageChannelService.messageEvent$.pipe((0,L.p)(s=>this._changePredicates?.some(l=>l(s))),(0,Dt.Q)(this._destroyed$)).subscribe(s=>this._processMessage(s,this.schemaChanged$)),this._messageChannelService.messageEvent$.pipe((0,L.p)(s=>this._removePredicates?.some(l=>l(s))),(0,Dt.Q)(this._destroyed$)).subscribe(s=>this._processMessage(s,this.schemaRemoved$))}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete(),this.schemaChanged$.complete()}static{this.\u0275fac=function(l){return new(l||mt)(c.\u0275\u0275inject(Pn),c.\u0275\u0275inject(be,8),c.\u0275\u0275inject(Ve,8))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:mt,factory:mt.\u0275fac,providedIn:"root"})}}class he{constructor(s){this.schemaChangeListener=s,this._repository=new Map,this._uIdMap=new Map,this._destroyed$=new _.Subject,this.schemaChangeListener.schemaChanged$.pipe((0,L.p)(l=>l.schemaType===this.provider.schemaType),(0,Dt.Q)(this._destroyed$)).subscribe(l=>this.clearSchemaCacheByUId(l.uId))}add(s){this._repository.set(s.name,s),this._uIdMap.set(s.uId,s.name)}getCachedSchema(s){return this._repository.get(s)}getIsSchemaCached(s){return this._repository.has(s)}getCachedSchemesNames(){return[...this._repository.keys()]}getSchemaByName(s){const l=this.getCachedSchema(s);return l?(0,_.of)(l):this.provider.getSchemaByName(s).pipe((0,ue.M)(d=>this.add(d)))}getSchemaByUId(s){const l=this._uIdMap.get(s),d=l&&this.getCachedSchema(l);return d?(0,_.of)(d):this.provider.getSchemaByUId(s).pipe((0,ue.M)(C=>this.add(C)))}clearSchemaCacheByName(s){const l=this.getCachedSchema(s);l&&this._uIdMap.delete(l.uId),this._repository.delete(s)}clearSchemaCacheByUId(s){const l=this._uIdMap.get(s);l&&this._repository.delete(l),this._uIdMap.delete(s)}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}static{this.\u0275fac=function(l){return new(l||he)(c.\u0275\u0275inject(mt))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:he,factory:he.\u0275fac})}}class ve{constructor(s){this._entitySchemaService=s,this.schemaType=Rn.EntitySchema}_getSchema(s){return s.pipe((0,lt.n)(l=>!0===l.success?(0,_.of)(l):(0,_.throwError)(()=>new Error(l.errorInfo.message))),(0,A.T)(l=>l.entitySchema))}_getScheme(s){return s.pipe((0,lt.n)(l=>!0===l.success?(0,_.of)(l):(0,_.throwError)(()=>new Error(l.errorInfo.message))),(0,A.T)(l=>l.schemes))}getSchemaByUId(s){const l=this._entitySchemaService.getEntitySchemaByUId(s);return this._getSchema(l)}getSchemaByName(s){const l=this._entitySchemaService.getEntitySchemaByName(s);return this._getSchema(l)}getSchemes(s){const l=this._entitySchemaService.getEntitySchemes(s);return this._getScheme(l)}static{this.\u0275fac=function(l){return new(l||ve)(c.\u0275\u0275inject(Ot))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:ve,factory:ve.\u0275fac,providedIn:"root"})}}const Ht=new c.InjectionToken("DataServiceUri"),Es={provide:Ht,useFactory:g=>g?.isSSP?"DataService/ssp/json/SyncReply":"DataService/json/SyncReply",deps:[[new c.Optional,de]]};class nt extends he{constructor(s,l){super(l),this.provider=s,this.schemaChangeListener=l}_checkPath(s){if(!s||0===s.length)throw new Error("Path is null or empty")}_checkLookupColumn(s,l){if(!s.isLookupType)throw new Error(`Column '${s.name}' for schema '${l.name}' is not lookup`)}_getEntitySchemaColumn(s,l){const d=s.columns.find(C=>C.name===l);if(!d)throw new Error(`Can not find column '${l}' in schema '${s.name}'`);return d}_findEntitySchemesByPath(s,l){this._checkPath(l);const d=[...l],C=this.getCachedSchema(s);if(!C)return null;const D=d.shift(),N=ye.getPathItemInfo(D);let q=[];if(N.isBackReference)q=this._findEntitySchemesByPath(N.referenceSchemaName,d);else{const pe=this._getEntitySchemaColumn(C,N.columnName);if(0===d.length)return[C];this._checkLookupColumn(pe,C),q=this._findEntitySchemesByPath(pe.referenceSchemaName,d)}if(!q)return null;const J=q.filter(pe=>pe.name!==C.name);return[C,...J]}_getAreSchemesCached(s){for(const l of s){const d=this.getCachedSchema(l.name);if(!d)return!1;const C=d.columns.filter(N=>N.isLookupType).every(N=>this.getIsSchemaCached(N.referenceSchemaName));if(l.loadLookupColumns&&!C)return!1;const D=l.forwardReferencePaths??[];for(const N of D){const q=N.split(".");if(!this.findEntitySchemaColumnByPath(l.name,q))return!1}}return!0}_addSchemaIfNotExists(s,l){s.has(l.name)||s.set(l.name,l)}_addSchemesIfNotExists(s,l){l.forEach(d=>{this._addSchemaIfNotExists(s,d)})}_getCachedSchemes(s){const l=new Map;return s.forEach(d=>{const C=this.getCachedSchema(d.name);if(C){if(this._addSchemaIfNotExists(l,C),d.loadLookupColumns){const N=C.columns.filter(q=>q.isLookupType).map(q=>this.getCachedSchema(q.referenceSchemaName)).filter(q=>null!=q);this._addSchemesIfNotExists(l,N)}(d.forwardReferencePaths??[]).forEach(N=>{const q=N.split("."),J=this._findEntitySchemesByPath(d.name,q);J&&this._addSchemesIfNotExists(l,J)})}}),[...l.values()]}getSchemes(s){if(this._getAreSchemesCached(s))return(0,_.of)(this._getCachedSchemes(s));const l={requests:s,cachedSchemesNames:this.getCachedSchemesNames()};return this.provider.getSchemes(l).pipe((0,ue.M)(d=>d.forEach(C=>this.add(C))),(0,A.T)(()=>this._getCachedSchemes(s)))}findEntitySchemaByPath(s,l){this._checkPath(l);const d=this.getCachedSchema(s);if(!d)return null;const C=[...l],D=C.shift(),N=ye.getPathItemInfo(D);if(N.isBackReference)return this.findEntitySchemaByPath(N.referenceSchemaName,C);const q=this._getEntitySchemaColumn(d,N.columnName);return 0===C.length?d:(this._checkLookupColumn(q,d),this.findEntitySchemaByPath(q.referenceSchemaName,C))}findEntitySchemaColumnByPath(s,l){const d=this.findEntitySchemaByPath(s,l);if(!d)return null;const C=[...l].pop(),D=ye.getPathItemInfo(C);return this._getEntitySchemaColumn(d,D.columnName)}static{this.\u0275fac=function(l){return new(l||nt)(c.\u0275\u0275inject(ve),c.\u0275\u0275inject(mt))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:nt,factory:nt.\u0275fac,providedIn:"root"})}}var _t=b(78516);class St{constructor(s){this.translateService=s}_getTranslations(s){const l=this.translateService.translations[s];return l?(0,_.of)({translation:l,cultureName:s}):this.translateService.currentLoader.getTranslation(s).pipe((0,A.T)(d=>({translation:d,cultureName:s})))}getAllCultureValues(s,l){return(0,_.forkJoin)(s.map(d=>this._getTranslations(d))).pipe((0,A.T)(d=>{const C=new Nt;for(const{translation:D,cultureName:N}of d){const q=(0,_t.A)(D,l);C.setValueLocalizableString(N,q)}return C}))}isTranslateKey(s){return/^\S+\.\S+$/.test(s)}static{this.\u0275fac=function(l){return new(l||St)(c.\u0275\u0275inject(W.c$))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:St,factory:St.\u0275fac})}}class ui{constructor(s){this._window=s}get(s){return this._window.localStorage.getItem(s)}set(s,l){this._window.localStorage.setItem(s,l)}remove(s){this._window.localStorage.removeItem(s)}static{this.\u0275fac=function(l){return new(l||ui)(c.\u0275\u0275inject(I.ZP))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:ui,factory:ui.\u0275fac})}}class ra{get availableColors(){return["linear-gradient(226.56deg, #E92170 2.58%, #9C1548 100%)","linear-gradient(223.63deg, #E23911 0%, #A11818 102.51%)","linear-gradient(265.43deg, #118F45 0.43%, #085C2B 92.69%)","linear-gradient(226.04deg, #078A7E 3.14%, #084C45 94.22%)","linear-gradient(224.97deg, #057ADD 5.35%, #274D8F 100%)","linear-gradient(220.79deg, #A758C5 2.27%, #841189 95.92%)","linear-gradient(143.25deg, #7848EE 1.25%, #512DA8 101.21%)","linear-gradient(223.46deg, #0058EF -4.85%, #0042B5 103.03%)","linear-gradient(143.8deg, #4F43C2 6.59%, #282261 95.27%)","linear-gradient(223.63deg, #06427C 0%, #0D2E4E 102.51%)"]}constructor(s){this.window=s,this.STORAGE_KEY="freedomContactColor",this._currentIndex=0,this._currentIndex=this._getIndexFromStorage()}_getIndexStorageKey(){return`${this.STORAGE_KEY}_index`}_getStorageKey(s){return`${this.STORAGE_KEY}_${s}`}_saveIndexToStorage(){this.window.localStorage.setItem(this._getIndexStorageKey(),this._currentIndex.toString())}_saveToStorage(s,l){this.window.localStorage.setItem(this._getStorageKey(s),l)}_removeFromStorage(s){this.window.localStorage.removeItem(this._getStorageKey(s))}_getIndexFromStorage(){const s=this.window.localStorage?.getItem(this._getIndexStorageKey());return s?Number(s):0}_getFromStorage(s){let l=this.window.localStorage.getItem(this._getStorageKey(s));return l&&!this.availableColors.some(d=>d===l)&&(this._removeFromStorage(s),l=""),l}getNextColor(s){let l=this._getFromStorage(s)||"";return-1===l.indexOf("#")&&(this._currentIndex>=this.availableColors.length&&(this._currentIndex=0),l=this.availableColors[this._currentIndex],this._currentIndex++,this._saveIndexToStorage(),this._saveToStorage(s,l)),l}static{this.\u0275fac=function(l){return new(l||ra)(c.\u0275\u0275inject(I.ZP))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:ra,factory:ra.\u0275fac,providedIn:"root"})}}class Xt{}class hn extends Xt{toDataSourceAttribute(s,l){const{path:d,aggregationConfig:C}=l??{};return s&&d&&C?{type:"aggregation",name:s,path:d,aggregationConfig:C}:null}toEntityDataSourceAttribute(s){const{path:l,aggregationConfig:d}=s??{};return l&&d?{type:"Aggregation",path:l,aggregationConfig:d}:null}static{this.\u0275fac=(()=>{let s;return function(d){return(s||(s=c.\u0275\u0275getInheritedFactory(hn)))(d||hn)}})()}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:hn,factory:hn.\u0275fac})}}class di extends Xt{toDataSourceAttribute(s,l){const{path:d}=l??{};return s&&d?{type:"default",path:d,name:s}:null}toEntityDataSourceAttribute(s){const{path:l}=s??{};return l?{type:/\./.test(l)?"ForwardReference":"Own",path:l}:null}static{this.\u0275fac=(()=>{let s;return function(d){return(s||(s=c.\u0275\u0275getInheritedFactory(di)))(d||di)}})()}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:di,factory:di.\u0275fac})}}class xi extends Xt{toDataSourceAttribute(s,l){const{path:d,functionConfig:C}=l??{};return s&&d&&C?{type:"function",name:s,path:d,functionConfig:C}:null}toEntityDataSourceAttribute(s){const{path:l,functionConfig:d}=s??{};return l&&d?{type:"Function",path:l,functionConfig:d}:null}static{this.\u0275fac=(()=>{let s;return function(d){return(s||(s=c.\u0275\u0275getInheritedFactory(xi)))(d||xi)}})()}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:xi,factory:xi.\u0275fac})}}const oa=new c.InjectionToken("Represents a factory of entity data source attribute config converters");class xs{static{this.\u0275fac=function(l){return new(l||xs)}}static{this.\u0275mod=c.\u0275\u0275defineNgModule({type:xs})}static{this.\u0275inj=c.\u0275\u0275defineInjector({providers:[hn,di,xi,I.gX.create({token:oa,mappings:[{predicate:"aggregation",injectable:hn},{predicate:"Aggregation",injectable:hn},{predicate:"function",injectable:xi},{predicate:"Function",injectable:xi}],default:{injectable:di}})]})}}class Be{getInitials(s,l){if(!s||""===s)return"";const d=l||(C=>C.substr(0,1).toUpperCase());return s.trim().split(" ",2).map(d).join("")}static{this.\u0275fac=function(l){return new(l||Be)}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Be,factory:Be.\u0275fac,providedIn:"root"})}}class Mt{constructor(s){this._httpClient=s,this._serviceEndpoint="rest/MacrosHelperService"}static isMacros(s){return"string"==typeof s&&(s?.startsWith("#")??!1)}getTemplate(s,l){return this.getTemplateByEntity({textTemplate:s},l)}getTemplateByEntity(s,l){const d=`${this._serviceEndpoint}/GetTemplate`;return this._httpClient.post(d,{request:s}).pipe((0,A.T)(C=>{const D=C?.GetTemplateResult;return D?.success?l?D.textTemplate:D.textTemplate.replace(/\s?<.+?>(.+?)<(.+?)\/?(.+?)>/g,""):s.textTemplate}))}getMultiLanguageTemplate(s,l,d){const C=`${this._serviceEndpoint}/GetMultiLanguageTextTemplate`;return this._httpClient.post(C,{request:{entityId:s,entityName:l,templateId:d}}).pipe((0,A.T)(D=>D?.GetMultiLanguageTextTemplateResult))}static{this.\u0275fac=function(l){return new(l||Mt)(c.\u0275\u0275inject(R.HttpClient))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Mt,factory:Mt.\u0275fac,providedIn:"root"})}}class Ai{constructor(s){this._elementRef=s,this._scrollPositions=new Map,this._saveScrollPosition=l=>{const d=l.target;if(d){const C=this._findRef(d)||new WeakRef(d);this._scrollPositions.set(C,{scrollLeft:d.scrollLeft,scrollTop:d.scrollTop})}}}get scrollPositions(){return this._scrollPositions}set scrollPositions(s){this._scrollPositions=s}_findRef(s){for(const[l]of this._scrollPositions)if(l.deref()===s)return l;return null}_onScrollEnd(){const s=this._elementRef.nativeElement;return(0,_.fromEventPattern)(l=>s.addEventListener("scroll",l,!0),l=>s.removeEventListener("scroll",l,!0)).pipe((0,_.debounceTime)(200))}startScrollTracking(){this._subscription?.unsubscribe(),this._subscription=this._onScrollEnd().subscribe(s=>this._saveScrollPosition(s))}stopScrollTracking(){this._subscription?.unsubscribe()}restoreScrollPosition(){for(const[s,l]of this._scrollPositions){const d=s.deref();d?.isConnected?d.scroll(l.scrollLeft,l.scrollTop):this._scrollPositions.delete(s)}}ngOnDestroy(){this.stopScrollTracking(),this._scrollPositions.clear()}static{this.\u0275fac=function(l){return new(l||Ai)(c.\u0275\u0275inject(c.ElementRef))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Ai,factory:Ai.\u0275fac})}}var Vr=b(23596);const Ge=new c.InjectionToken("CRT_METADATA_PREPROCESSOR");class Ye{constructor(s,l){this.id=s,this._baseHostInjector=l,this._hostModuleTypes=[],this._hostModuleRefs=[],this._lazyModulesBySource=new Map,this._hostInjector=this._baseHostInjector}_createDynamicNgModule(s){const d=this._hostInjector.get(Ge,[]).map(N=>({provide:Ge,useValue:N,multi:!0})),C=(0,c.NgModule)({providers:d})(class{}),D=(0,c.NgModule)({imports:[C,...s]})(class{});return(0,c.createNgModule)(D,this._hostInjector)}inject(s){return this._hostInjector.get(s)}addLazyModule(s){const l=v.bootstrappedCrtModules.get(s);if(!l)throw new Error("Module was not bootstrapped");const{source:d}=l;this._lazyModulesBySource.has(d)||this._lazyModulesBySource.set(d,new Set),this._lazyModulesBySource.get(d).add(s)}getLazyModules(s){return[...this._lazyModulesBySource.get(s)??[]]}connectHostLazyModules(){const s=this.getLazyModules("host");if((0,Vr.A)(s,this._hostModuleTypes))return;const l=this._createDynamicNgModule(s);this._hostModuleTypes=s,this._hostModuleRefs.push(l),this._hostInjector=l.injector}destroy(){for(const s of this._hostModuleRefs)s.destroy();this._hostModuleRefs=[]}}class Ri extends Ae{constructor(){super(...arguments),this._injectionContextsMap=new Map}createContext(s,l){const d=new Ye(s,l);return this._injectionContextsMap.set(s,d),d}injectFromContext(s,l){return this._injectionContextsMap.get(s).inject(l)}removeContext(s){return this._injectionContextsMap.get(s)?.destroy(),this._injectionContextsMap.delete(s)}static{this.\u0275fac=(()=>{let s;return function(d){return(s||(s=c.\u0275\u0275getInheritedFactory(Ri)))(d||Ri)}})()}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Ri,factory:Ri.\u0275fac,providedIn:"root"})}}var la,Lr,Zn;!function(g){g.Insert="insert",g.Update="update",g.Delete="delete",g.ForceUpdate="forceUpdate"}(la||(la={}));class As{constructor(s,l){this._messageChannelService=s,this._userInfo=l,this._subscriptions=[],this.newMessageEvent=new c.EventEmitter,this.feedPostPublishedEvent=new c.EventEmitter,this._subscribeMessageChannelEvents()}_subscribeMessageChannelEvents(){this._subscriptions.push(this._messageChannelService.messageEvent$.pipe((0,_.filter)(s=>"UpdateSocialMessage"===s.header.sender),(0,_.map)(s=>{const l=s.body;return{MessageId:s.id.toString(),AuthorId:l.sysAdminUnitId,Operation:l.operation,EntityId:l.channelId,ParentId:l.parentId,EntityName:l.entityName}})).subscribe(s=>this.newMessageEvent.emit(s)))}onFeedPostPublished(s,l){const d={MessageId:s,Operation:la.Insert,EntityId:l};this.feedPostPublishedEvent.emit(d)}ngOnDestroy(){this._subscriptions.forEach(s=>s?.unsubscribe())}static{this.\u0275fac=function(l){return new(l||As)(c.\u0275\u0275inject(Pn),c.\u0275\u0275inject(de))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:As,factory:As.\u0275fac})}}class He{constructor(s){this._httpClient=s,this._workplaceServiceUrl="/rest/WorkplaceService/"}resetWorkplaceScriptCache(){const s=this._workplaceServiceUrl+"ResetScriptCache";return this._httpClient.post(s,null)}static{this.\u0275fac=function(l){return new(l||He)(c.\u0275\u0275inject(R.HttpClient))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:He,factory:He.\u0275fac,providedIn:"root"})}}class za{constructor(){this._customEventService=(0,c.inject)(I.Dj),this._listeners=new Map,this.destroyed$=new _.Subject,this.addDefaultListeners(),this.initChannels(),this._startListening()}_startListening(){this.inboundChannel$.pipe((0,_.takeUntil)(this.destroyed$)).subscribe(s=>{if(!this._listeners.has(s.type))throw new Error(`No listener for "${s.type}" request`);const d=D=>{const N={body:D,requestId:s.id,requestType:s.type};this.outboundChannel$.next(N)},C=this._listeners.get(s.type)(s);C instanceof Promise?C.then(d):d(C)})}addDefaultListeners(){this.addListener("ping",()=>"pong")}initChannels(){this.inboundChannel$=this._customEventService.subscribe("CreatioBrowserExtensionRequest"),this.outboundChannel$=this._customEventService.createOutboundChannel("CreatioBrowserExtensionResponse")}addListener(s,l){this._listeners.set(s,l)}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}static{this.\u0275fac=function(l){return new(l||za)}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:za,factory:za.\u0275fac,providedIn:"root"})}}class ca extends za{initChannels(){this.inboundChannel$=new _.Subject,this.outboundChannel$=new _.Subject}simulateBrowserExtensionRequest(s){const l=(0,_.firstValueFrom)(this.outboundChannel$.pipe((0,_.first)(d=>d.requestId===s.id)));return this.inboundChannel$.next(s),l}static{this.\u0275fac=(()=>{let s;return function(d){return(s||(s=c.\u0275\u0275getInheritedFactory(ca)))(d||ca)}})()}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:ca,factory:ca.\u0275fac})}}class Pi{constructor(s){this._environment=s}getUrl(){const s=this._environment.runtimeApplicationUrl||this._environment.defaultApplicationUrl;return We.Location.joinWithSlash(this._environment.workspaceBaseUrl,s)}static{this.\u0275fac=function(l){return new(l||Pi)(c.\u0275\u0275inject("environment"))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Pi,factory:Pi.\u0275fac,providedIn:"root"})}}!function(g){g.Reload="reload",g.Merge="merge"}(Lr||(Lr={})),function(g){g.Init="init",g.Create="create",g.Update="update",g.Copy="copy",g.Delete="delete",g.Unknown="unknown"}(Zn||(Zn={}));const Rs="crt.EntityDataSource",Fr="crt.PageParametersDataSource",kr="PageParameters";var Jn;!function(g){g[g.None=0]="None",g[g.Small=1]="Small",g[g.Medium=2]="Medium",g[g.Large=3]="Large",g[g.ExtraLarge=4]="ExtraLarge",g[g.Custom=5]="Custom"}(Jn||(Jn={}));const Qe=new c.InjectionToken("sessionEndNotifier"),Oc=new c.InjectionToken("APPEARANCE_SETTINGS_DEFAULT_LOADER"),ua=new c.InjectionToken("APPEARANCE_SETTINGS_LOADER"),pi=new Map([[Jn.Small,"modal-size-small"],[Jn.Medium,"modal-size-medium"],[Jn.Large,"modal-size-large"],[Jn.ExtraLarge,"modal-size-extra-large"]]);class da{constructor(){this._appearanceSettingsLoader=(0,c.inject)(ua,{optional:!0}),this._appearanceSettingsDefaultLoader=(0,c.inject)(Oc,{optional:!0})}_getEmptyAppearanceSettings(){const s={modalSettings:{size:Jn.None}};return Promise.resolve(s)}_getAppearanceSettings(s){return this._appearanceSettingsLoader?(0,_.lastValueFrom)(this._appearanceSettingsLoader.getAppearanceSettings(s)):this._getEmptyAppearanceSettings()}_getDefaultAppearanceSettings(s){return this._appearanceSettingsDefaultLoader?(0,_.lastValueFrom)(this._appearanceSettingsDefaultLoader.getDefaultAppearanceSettings(s)):this._getEmptyAppearanceSettings()}getSchemaModalClasses(s){var l=this;return(0,oe.A)(function*(){let d;const C=yield l._getAppearanceSettings(s),D=yield l._getEmptyAppearanceSettings(),N=C?.modalSettings??D.modalSettings;if(N?.size!==Jn.None)d=pi.get(N.size);else{const J=(yield l._getDefaultAppearanceSettings(s)).modalSettings;d=pi.get(J.size)}return[d]})()}static{this.\u0275fac=function(l){return new(l||da)}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:da,factory:da.\u0275fac,providedIn:"root"})}}class Pe{}const Ps="#DATE_SEPARATOR#",gn=`--${Ps}--${Ps}----`,mi=`${gn} 00:00`,Ct={[v.DataValueType.Date]:gn,[v.DataValueType.Time]:"00:00",[v.DataValueType.DateTime]:mi};class ht extends Pe{constructor(s){super(),this._dateTimeFormat=s?.cultureInfo?.dateTimeFormat}create(s){const l=Ct[s];return l?(0,I.mh)(l,[{searchValue:Ps,replaceMacros:Ps,replaceValue:this._dateTimeFormat?.dateSeparator??"/"}]):""}static{this.\u0275fac=function(l){return new(l||ht)(c.\u0275\u0275inject(de))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:ht,factory:ht.\u0275fac})}}class On extends Pe{constructor(s){super(),this._decimalSeparator=s?.cultureInfo?.decimalSeparator}create(s){const l=vs.get(s);return l?"0"+(this._decimalSeparator??".")+"0".repeat(l):"0"}static{this.\u0275fac=function(l){return new(l||On)(c.\u0275\u0275inject(de))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:On,factory:On.\u0275fac})}}const Vc=new c.InjectionToken("A factory of empty placeholder creators"),Fo=I.gX.create({token:Vc,mappings:[{predicate:g=>Pc.includes(g),injectable:ht},{predicate:g=>$n.includes(g),injectable:On}]});var jr,Yn;!function(g){g.PDS="Page PDS",g.SectionAccess="Section access",g.PageAccess="Object page settings rule"}(jr||(jr={}));class Oi extends Error{constructor(s,l,d){super(),this._schemaName=s,this._userName=l,this._rule=d}get message(){return this._schemaName?`${this._schemaName} is not allowed due to ACL setup for ${this._userName}. Failed rules: - ${this._rule}.`:"Page is not allowed due to ACL setup. Check application logs for more details."}}class Vi{}!function(g){g[g.Error=0]="Error",g[g.Debugger=1]="Debugger",g[g.Info=2]="Info"}(Yn||(Yn={}));class Vn{get dataServiceUri(){return this._dataServiceUri||(this._dataServiceUri=this._injector.get(Ht)),this._dataServiceUri}constructor(s,l){this._httpClient=s,this._injector=l}_createClientLogMessage(s,l){return{message:s,messageType:l,loggerName:"Client"}}_sendData(s){return this._httpClient.post(this.dataServiceUri+"/PostClientLog",{LogItems:[s]})}logError(s){const l=this._createClientLogMessage(s.message,Yn.Error);return this._sendData(l)}logMessage(s,l,d){const C={message:s,messageType:l,loggerName:d};return this._sendData(C)}static{this.\u0275fac=function(l){return new(l||Vn)(c.\u0275\u0275inject(R.HttpClient),c.\u0275\u0275inject(c.Injector))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Vn,factory:Vn.\u0275fac,providedIn:"root"})}}class Ns{constructor(s){this._injector=s,this._userInfo=this._injector.get(de),this._rightsService=this._injector.get(Vi),this._featureService=this._injector.get(v.FeatureService),this._clientLogService=this._injector.get(Vn)}checkAccess(s){var l=this;return(0,oe.A)(function*(){if((yield l._featureService.getFeatureState("EnablePageOpeningRestrictions"))&&!(yield(0,_.firstValueFrom)(l._rightsService.getCanExecuteOperation("CanBypassPageOpeningRestrictions")))&&!(yield l._rightsService.getAclGranted(s.name)))throw console.error((new Oi).message),l._clientLogService.logError(new Oi(s.name,l._userInfo.contactName,jr.PDS)).subscribe(),new Oi})()}static{this.\u0275fac=function(l){return new(l||Ns)(c.\u0275\u0275inject(c.Injector))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Ns,factory:Ns.\u0275fac,providedIn:"root"})}}class Ha{constructor(s){this._featureValues=s,this._consequentMeasureStartTimeCorrection=.001,this.rendering$=new _.BehaviorSubject(null),this._lastNowStartTime=0,this._useMeasurePerformanceTools=this._featureValues?.UseMeasurePerformanceTools}_getNowStartTimeWithCorrection(){const s=performance.now(),l=s<=this._lastNowStartTime?this._lastNowStartTime+this._consequentMeasureStartTimeCorrection:s;return this._lastNowStartTime=l,l}measure(s,l,d){if(!this._useMeasurePerformanceTools)return l();const C=d||this._getNowStartTimeWithCorrection(),D=l();return performance.measure(s,{start:C}),D}measureCallback(s,l){var d=this;return(0,oe.A)(function*(){if(!d._useMeasurePerformanceTools)return l();const C=d._getNowStartTimeWithCorrection(),D=yield l();return performance.measure(s,{start:C}),D})()}measure$(s){if(!this._useMeasurePerformanceTools)return d=>d;let l;return d=>(0,_.of)(null).pipe((0,ue.M)(()=>l=this._getNowStartTimeWithCorrection()),(0,_.switchMap)(()=>d),(0,ue.M)(()=>{const C="string"==typeof s?s:s();performance.measure(C,{start:l})}))}static{this.\u0275fac=function(l){return new(l||Ha)(c.\u0275\u0275inject(rt,8))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Ha,factory:Ha.\u0275fac,providedIn:"root"})}}class hi{constructor(s,l,d){this._messageChannelService=s,this._httpClient=l,this._injector=d,this._onSessionEnding=new _.Subject,this._subscription=new _.Subscription}get window(){return this._window??(this._window=this._injector.get(I.ZP))}get isSessionExpired(){return(this.window.Terrasoft??{}).SessionEndUserNotification?.sessionExpired??!1}get sessionEndNotifier(){return this._sessionEndNotifier??(this._sessionEndNotifier=this._injector.get(Qe))}get onSessionEnding$(){return this._onSessionEnding.asObservable()}setUpSessionExpired(){const s=this.window.Terrasoft??{};this.isSessionExpired||(s.SessionEndUserNotification.sessionExpired=!0)}_processSessionEndMessage(s){return this.sessionEndNotifier.notify(s).pipe((0,ue.M)(()=>{this.setUpSessionExpired(),this.window.location.reload()}))}_processSessionEndSoonMessage(s){return this.sessionEndNotifier.notifyGently(s).pipe((0,lt.n)(l=>l===I.u_.StayLoggedIn?this._httpClient.post("api/ShellSession/KeepAlive",{}).pipe((0,A.T)(()=>{})):l===I.u_.Exit?(this.setUpSessionExpired(),this._httpClient.post("rest/MainMenuService/Logout",{}).pipe((0,A.T)(()=>this.window.location.reload()))):(0,_.of)(void 0)),(0,z.W)(()=>this._httpClient.post("rest/MainMenuService/Logout",{}).pipe((0,A.T)(()=>this.window.location.reload()))))}_getIsMessageValid(s,l){return"WebApp"===s?.header.sender&&s.header.bodyTypeName===l&&s.body.SessionId===this._getSessionId()}_getSessionId(){return(this.window.Terrasoft??{}).sessionId}handleSessionEnd(){this._subscription.add(this._messageChannelService.getMessages("WebApp").pipe((0,L.p)(s=>this._getIsMessageValid(s,"SessionEnd")),(0,lt.n)(s=>(this._onSessionEnding.next(),this._processSessionEndMessage(s.body.Message)))).subscribe())}handleSessionEndSoon(){this._subscription.add(this._messageChannelService.getMessages("WebApp").pipe((0,L.p)(s=>this._getIsMessageValid(s,"SessionEndSoon")),(0,lt.n)(s=>this._processSessionEndSoonMessage(s.body.Message))).subscribe())}ngOnDestroy(){this._onSessionEnding.complete(),this._subscription.unsubscribe()}static{this.\u0275fac=function(l){return new(l||hi)(c.\u0275\u0275inject(Pn),c.\u0275\u0275inject(R.HttpClient),c.\u0275\u0275inject(c.Injector))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:hi,factory:hi.\u0275fac})}}class fn{constructor(){this._requireJsProvider=(0,c.inject)(Wn),this._requireJs=this._requireJsProvider.get(),this._destroy$=new _.Subject,this._cachedModuleMap=new Map([])}deleteCachedModule(s){this._isAllowToCacheCalls&&this._cachedModuleMap.delete(s)}set allowToCacheCalls(s){this._isAllowToCacheCalls=s}get allowToCacheCalls(){return this._isAllowToCacheCalls}load(s,l){if(!this.allowToCacheCalls)return void this._requireJs(s,(...D)=>{l(...D)});const d=[],C=[];for(const D of s)if(this._cachedModuleMap.has(D)){const N=this._cachedModuleMap.get(D);d.push(N)}else C.push(D);d.length&&l(...d),C.length&&this._requireJs(C,(...D)=>{C.forEach((N,q)=>this._cachedModuleMap.set(N,D[q])),l(...D)})}ngOnDestroy(){this._cachedModuleMap.clear(),this._destroy$.next(),this._destroy$.complete()}static{this.\u0275fac=function(l){return new(l||fn)}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:fn,factory:fn.\u0275fac,providedIn:"root"})}}var tn=b(62441);class yn{constructor(s){this._entitySchemaService=s}_loadPrimaryColumns(s){return this._entitySchemaService.getEntitySchemaByName(s).pipe((0,A.T)(l=>{const d=l.entitySchema.getPrimaryColumn(),C=l.entitySchema.getPrimaryDisplayColumn();if((0,tn.A)(C))throw new Error(`Entity ${s} should have primary display column`);return{primaryColumnName:d.name,primaryDisplayColumnName:C?.name}}))}getColumnLookupValues(s){if((0,tn.A)(s))return(0,_.of)(null);const l=this._loadPrimaryColumns(s),d=(0,_.from)(v.Model.create(s));return(0,_.forkJoin)([l,d]).pipe((0,lt.n)(([C,D])=>(0,_.from)(D.load({attributes:[C.primaryColumnName,C.primaryDisplayColumnName]})).pipe((0,A.T)(q=>q.map(J=>({value:J[C.primaryColumnName],displayValue:J[C.primaryDisplayColumnName]}))))))}static{this.\u0275fac=function(l){return new(l||yn)(c.\u0275\u0275inject(Ot))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:yn,factory:yn.\u0275fac,providedIn:"root"})}}var Li=b(29488);new c.InjectionToken("Flag indicating that allow open designer page using design button");new c.InjectionToken("ContextService");const Vs=new c.InjectionToken("CrtNavigationLock"),Ln=(new c.InjectionToken("Default item property values"),new c.InjectionToken("CRT_DESIGN_TIME_METADATA_PREPROCESSOR"),new c.InjectionToken("DEVKIT_MASK_SERVICE",{providedIn:"root",factory:()=>new v.MaskService})),Kn=(new c.InjectionToken("Represents the static height for the header."),new c.InjectionToken("IS_DESIGN_TIME")),Fi=(new c.InjectionToken("Use UI optimization - simple animations, glassmorphism, etc",{providedIn:"root",factory:()=>{try{const g=new _.BehaviorSubject(void 0),s=(0,c.inject)(st),l=(0,c.inject)(c.Injector),d=s.loadCurrentUserInfo().pipe((0,A.T)(()=>l.get(v.SysSettingsService)),(0,_.switchMap)(C=>C.getByCode("DisableAdvancedVisualEffects")),(0,A.T)(C=>!!C?.value),(0,_.take)(1));return g.pipe((0,_.switchMap)(C=>"boolean"==typeof C?(0,_.of)(C):d))}catch(g){return console.error(g),new _.BehaviorSubject(!1)}}}),new c.InjectionToken("Window payload values")),Xe=(new c.InjectionToken("USE_SAVE_SCROLL_POSITION_SERVICE"),new c.InjectionToken("Save entity schema message identifier for entity object designer web token"),new c.InjectionToken("Terrasoft global object",{providedIn:"root",factory:()=>(0,_t.A)((0,c.inject)(I.ZP),["Terrasoft"])||{}})),_n=new c.InjectionToken("Flag indicating that this is an angular host",{providedIn:"root",factory:()=>(0,_t.A)((0,c.inject)(Xe),["isAngularHost"])});new c.InjectionToken("Entity structure from Terrasoft.configuration",{providedIn:"root",factory:()=>{const g=(0,c.inject)(Xe);return new jo((0,_t.A)(g,["configuration","EntityStructure"]))}});class jo{constructor(s){this.items=s}}new c.InjectionToken("Module structure from Terrasoft.configuration",{providedIn:"root",factory:()=>{const g=(0,c.inject)(Xe);return new gi((0,_t.A)(g,["configuration","ModuleStructure"]))}});class gi{constructor(s){this.items=s}}new c.InjectionToken("Module utils from Terrasoft",{providedIn:"root",factory:()=>(0,_t.A)((0,c.inject)(Xe),["ModuleUtils"])}),new c.InjectionToken("Root schema descriptors from Terrasoft.configuration",{providedIn:"root",factory:()=>{const g=(0,c.inject)(Xe);return new Uo((0,_t.A)(g,["configuration","RootSchemaDescriptors"]))}});class Uo{constructor(s){this.items=s}}new c.InjectionToken("Structures from Terrasoft.configuration",{providedIn:"root",factory:()=>{const g=(0,c.inject)(Xe);return new pa((0,_t.A)(g,["configuration","Structures"]))}});class pa{constructor(s){this.items=s}}const jc=new c.InjectionToken("File content descriptor from Terrasoft.configuration",{providedIn:"root",factory:()=>{const g=(0,c.inject)(I.ZP);return new Wd(g)}});class Wd{get descriptors(){return(0,_t.A)(this._window,"Terrasoft.configuration.FileContentDescriptors")??{}}constructor(s){this._window=s}}const zo=new c.InjectionToken("AC whitelist"),ki=new c.InjectionToken("PERFORMANCE_LOGGERS");new c.InjectionToken("CkeditorUrl");class fi extends Ae{constructor(){super(...arguments),this._window=(0,c.inject)(I.ZP),this._requestBuffer=[],this._requestIter=0,this._cachedRequestIter=0,this._compressedRequestIter=0}_onRequest(s){const l=s.getEntries();for(const d of l){if(!d.name.startsWith(this._window.location.origin))return;this._requestIter++,d.transferSize||this._cachedRequestIter++,d.encodedBodySize!==d.decodedBodySize&&this._compressedRequestIter++,d.fetchStart&&d.responseStart&&d.responseEnd&&this._requestBuffer.push({name:d.name,initiatorType:d.initiatorType,transferSize:d.transferSize,responseStart:d.responseStart,responseEnd:d.responseEnd,fetchStart:d.fetchStart})}}_calculateLatency(s,l){return s/(l/1e3)/1e3/1e3||0}_normalizeUrl(s,l){try{return(s+new URL(l)?.pathname.replace("/0/","/")).slice(0,100)}catch{return l?.slice(0,100)}}_reset(){this._resourcePerformanceObserver?.disconnect(),this._markPerformanceObserver?.disconnect(),this._requestBuffer=[],this._compressedRequestIter=0,this._cachedRequestIter=0,this._requestIter=0}_downlink(){let s=0,l=0;return this._requestBuffer.forEach(C=>{"xmlhttprequest"===C.initiatorType&&(s+=C.transferSize,l+=C.responseEnd-C.responseStart)}),+this._calculateLatency(s,l).toFixed(1)}_withCache(){return Math.round(this._cachedRequestIter/this._requestIter*100)||0}_withCompression(){return Math.round(this._compressedRequestIter/this._requestIter*100)||0}_topRequests(s){const l=[];for(let d=this._requestBuffer.length-1;d>=0;d--){const C=this._requestBuffer[d],D=Math.round(C.responseEnd-C.fetchStart);if(D>=s.topRequestThreshold&&l.length<s.topRequestCount){const N=this._normalizeUrl(D,C.name);if(l.push(N),l.length===s.topRequestThreshold)return l}}return l}start(){this._reset(),this._resourcePerformanceObserver=this._resourcePerformanceObserver??new PerformanceObserver(this._onRequest.bind(this)),this._resourcePerformanceObserver.observe({type:"resource",buffered:!this._firstStart}),this._firstStart=!0}measure(s={topRequestThreshold:400,topRequestCount:5}){const l={transferred:0};return this._requestBuffer.sort((d,C)=>d.fetchStart-C.fetchStart),l.duration=this._calculateDuration(),l.transferred=this._calculateTransferred(),l.downlink=this._downlink(),l.cache=this._withCache(),l.compression=this._withCompression(),l.topRequests=this._topRequests(s),this._reset(),l}_calculateDuration(){let s=this._requestBuffer[0]?.responseEnd,l=this._requestBuffer[0]?.responseEnd-this._requestBuffer[0]?.fetchStart;return this._requestBuffer.forEach(d=>{s<d.fetchStart?l+=d.responseEnd-d.fetchStart:s<d.responseEnd&&(l+=d.responseEnd-s),s=Math.max(s,d.responseEnd)}),Math.round(l)||0}_calculateTransferred(){let s=this._requestBuffer.reduce((l,d)=>l+d.transferSize,0);return s=Math.round(s/1e3)||0,s}ngOnDestroy(){this._reset()}static{this.\u0275fac=(()=>{let s;return function(d){return(s||(s=c.\u0275\u0275getInheritedFactory(fi)))(d||fi)}})()}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:fi,factory:fi.\u0275fac,providedIn:"root"})}}var Cn,js;!function(g){g.PageStartLoading="PageStartLoading",g.PageFinishLoading="PageFinishLoading"}(Cn||(Cn={}));class ji extends Ae{constructor(){super(),this._ngZone=(0,c.inject)(c.NgZone),this._window=(0,c.inject)(I.ZP),this._featureValues=(0,c.inject)(rt,{optional:!0}),this._isAngularHost=(0,c.inject)(_n,{optional:!0}),this._performanceNetworkObserver=(0,c.inject)(fi),this._measureName="PageLoadDuration",this._debounceTime=100,this._subscriptions=new _.Subscription,this._measurements=[],this._tasks=new Set,this._loadingStarted=!1,this._loadingStartedCount=new Set,this._loadingFinishedCount=new Set,this._tasksQueueSubject=new _.Subject,this._pageLoadLifeCycleSubject=new _.Subject,this._iterationCounter=0,this.pageLoadDuration$=new _.Subject,this._enableMeasurement=!!this._isAngularHost&&!this._featureValues?.DisablePerformancePageLoadMeasurement,this._initSubscriptions(),(0,Li.A)(this._window,"creatio.performance.measurePerformancePageLoadService",this)}_initSubscriptions(){this._enableMeasurement&&(this._subscriptions.add(this._tasksQueueSubject.pipe((0,_.debounceTime)(this._debounceTime),(0,L.p)(s=>this._loadingStartedCount.size===this._loadingFinishedCount.size&&this._loadingStarted&&1===s.size&&s.has(Cn.PageStartLoading))).subscribe({next:()=>this._pageLoadLifeCycleSubject.next(Cn.PageFinishLoading)})),this._subscriptions.add(this._pageLoadLifeCycleSubject.subscribe({next:s=>{this._ngZone.runOutsideAngular(()=>{s===Cn.PageStartLoading&&this._onStartPageLoadMeasure(),s===Cn.PageFinishLoading&&this._onEndPageLoadMeasure()})}})))}_onStartPageLoadMeasure(){this.addTask(Cn.PageStartLoading)}getMeasureDataOnTimeout$(){const s={start:this._startTime,end:this._window.performance.now(),detail:this._getMeasurementDetail(),timeout:!0};return this._measurements.push(()=>this._window.performance.measure(this._measureName,s)),this._reset(),(0,_.of)(s)}_getLocationInfo(){const s=this._window.location.hash,[l,d]=s.slice(1).split("/");return{moduleName:l,schemaName:d,hash:s}}_getMeasurementDetail(){const l=((0,_t.A)(this._window,"creatio.performance")??{}).focusLossDuringLoad,d={iteration:this._iterationCounter++,location:this._getLocationInfo(),isReuse:!!this._isReuseMode,focusLossDuringLoad:!!l};return this._featureValues.DisablePerformancePageNetworkMeasurement||(d.network=this._performanceNetworkObserver.measure()),d}_onEndPageLoadMeasure(){this.removeTask(Cn.PageFinishLoading),this.removeTask(Cn.PageStartLoading);const s={start:this._startTime,detail:this._getMeasurementDetail(),end:this._window.performance.now()};this._measurements.push(()=>this._window.performance.measure(this._measureName,s)),this.pageLoadDuration$.next(s),this._reset()}_reset(){const s=(0,_t.A)(this._window,"creatio.performance");s.initialLoad?s.initialLoad=!1:s.focusLossDuringLoad=null,this._startTime=null,this._tasks.clear(),this._loadingStarted=!1,this._loadingStartedCount.clear(),this._loadingFinishedCount.clear(),this._isReuseMode=null}setReuseMode(s){this._enableMeasurement&&null===this._isReuseMode&&(this._isReuseMode=s)}startPageLoadMeasure(s=performance.now()){this._enableMeasurement&&this._ngZone.runOutsideAngular(()=>{this._reset(),this._startTime=s,this._pageLoadLifeCycleSubject.next(Cn.PageStartLoading),this._featureValues.DisablePerformancePageNetworkMeasurement||this._performanceNetworkObserver.start()})}addTask(s,l={}){this._enableMeasurement&&this._ngZone.runOutsideAngular(()=>{l.targetTask&&(this._loadingStartedCount.add(s),this._loadingStarted=!0),this._tasks.add(s),this._tasksQueueSubject.next(this._tasks)})}removeTask(s,l={}){this._enableMeasurement&&this._ngZone.runOutsideAngular(()=>{l.targetTask&&this._loadingFinishedCount.add(s),this._tasks.delete(s),this._tasksQueueSubject.next(this._tasks)})}getMeasurements(){const s=this._measurements.map(l=>l());return this._measurements=[],s}ngOnDestroy(){this._reset(),this._subscriptions.unsubscribe(),this._tasksQueueSubject.complete(),this._pageLoadLifeCycleSubject.complete(),this.pageLoadDuration$.complete()}static{this.\u0275fac=function(l){return new(l||ji)}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:ji,factory:ji.\u0275fac,providedIn:"root"})}}!function(g){g.Passed="Passed",g.InvalidSecondFactor="InvalidSecondFactor",g.Logout="Logout",g.SecondFactorCodeRequired="SecondFactorCodeRequired"}(js||(js={}));class bn{}class yi{}class wt{constructor(s,l){this._dialogService=s,this._twoFaReferrerService=l}intercept(s,l){return s.headers.has("X-Second-Factor-Resend-Request")?l.handle(s):l.handle(s).pipe((0,lt.n)(d=>{if(d instanceof R.HttpResponse&&200===d.status){const D=d.headers.get("X-Second-Factor-Validation-Status");if(D&&D===js.SecondFactorCodeRequired)return this._handleTwoFaFlow(s,this._twoFaReferrerService.getReferrer())}return(0,_.of)(d)}))}_handleTwoFaFlow(s,l){return(0,_.from)(this._dialogService.resendRequestWithTwoFactor(s,l,this._twoFaReferrerService.getIsFullPage())).pipe((0,lt.n)(d=>{if(2===d.resultCode){const C=new R.HttpErrorResponse({error:"Request canceled by interceptor",status:499,statusText:"Client Closed Request"});return(0,_.throwError)(()=>C)}return(0,_.of)(d.response)}))}static{this.\u0275fac=function(l){return new(l||wt)(c.\u0275\u0275inject(bn),c.\u0275\u0275inject(yi))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:wt,factory:wt.\u0275fac})}}class nn{getReferrer(){return"interceptor"}getIsFullPage(){return!1}static{this.\u0275fac=function(l){return new(l||nn)}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:nn,factory:nn.\u0275fac})}}class Fn{getBaseUrl(){let s=window.location.pathname;s=s.replace("/0","");const l=s.toLowerCase().indexOf("/shell");if(-1!==l)return s.substring(0,l);const d=s.toLowerCase().indexOf("/nui/viewmodule.aspx");if(-1!==d)return s.substring(0,d);const C=s.toLowerCase().indexOf("/login/");return-1!==C?s.substring(0,C):"/"===s?"":s}setupTotpShow(s){const d=this.getBaseUrl(),C=new URLSearchParams(window.location.search);C.has("referrer")?C.set("referrer",s):C.append("referrer",s),window.location.assign(`${d}/Login/app#totp-setup?${C.toString()}`)}static{this.\u0275fac=function(l){return new(l||Fn)}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Fn,factory:Fn.\u0275fac,providedIn:"root"})}}class Ho{}class $a{logSplashScreenTime(s){return console.log("Performance ::","splashScreenTime:",s.splashScreenTime,"ms, module:",`${s.location.moduleName},`,"schema:",s.location.schemaName),Promise.resolve()}logMeasureData(s){const l=s?.detail,d=l?.focusLossDuringLoad?["focus lost"]:[],C=0===d.length?"":` (${d.join(", ")})`;return console.log(`Performance${C} ::`,"reuse:",+l?.isReuse,", page:",Math.round(s?.end-s?.start),", startTime:",s?.start,", moduleName:",l?.location?.moduleName,", schemaName:",l?.location?.schemaName,"ms, network:",l?.network?.duration,"ms, trf:",l?.network?.transferred,"kB, spd:",l?.network?.downlink,"mb/s, cache:",l?.network?.cache,"%, zip:",l?.network?.compression,"%,",l?.location?.hash),Promise.resolve()}static{this.\u0275fac=function(l){return new(l||$a)}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:$a,factory:$a.\u0275fac,providedIn:"root"})}}class ma{constructor(s,l){this._clientLogService=s,this._applicationInfoService=l}_getLogMeasureMessage(s){var l=this;return(0,oe.A)(function*(){const d=s?.detail;return(yield l._getUserInfo())+`startTime: ${s?.start};focusLossDuringLoad: ${d?.focusLossDuringLoad};reuse: ${d?.isReuse};page: ${Math.round(s?.end-s?.start)};moduleName: ${d?.location?.moduleName};schemaName: ${d?.location?.schemaName};network: ${d?.network?.duration};trf: ${d?.network?.transferred};kB spd mb/s: ${d?.network?.downlink};cache%: ${d?.network?.cache};zip%: ${d?.network?.compression};hash: ${d?.location?.hash};`})()}_getUserInfo(){var s=this;return(0,oe.A)(function*(){const d=(yield(0,_.lastValueFrom)(s._applicationInfoService.loadSysValues())).user;return`userId: '${d.value}';userName: '${d.displayValue}';`})()}_logMessage(s){return(0,_.lastValueFrom)(this._clientLogService.logMessage(s,Yn.Info,"ClientMeasure"))}logSplashScreenTime(s){var l=this;return(0,oe.A)(function*(){const C=(yield l._getUserInfo())+`splashScreenTime: ${s.splashScreenTime};module: '${s.location.moduleName}';schema: '${s.location.schemaName}';`;return l._logMessage(C)})()}logMeasureData(s){var l=this;return(0,oe.A)(function*(){const d=yield l._getLogMeasureMessage(s);return l._logMessage(d)})()}static{this.\u0275fac=function(l){return new(l||ma)(c.\u0275\u0275inject(Vn),c.\u0275\u0275inject(ie))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:ma,factory:ma.\u0275fac,providedIn:"root"})}}class qa{constructor(s){this._services=s}logSplashScreenTime(s){const l=this._services.map(d=>d.logSplashScreenTime(s));return Promise.all(l).then(()=>Promise.resolve())}logMeasureData(s){const l=this._services.map(d=>d.logMeasureData(s));return Promise.all(l).then(()=>Promise.resolve())}static{this.\u0275fac=function(l){return new(l||qa)(c.\u0275\u0275inject(ki))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:qa,factory:qa.\u0275fac,providedIn:"root"})}}class Bi{_buildResourcePath(s){const l=`terrasoft.axd?${s}`;return Ms(Nn(),"img",l)}getSysSettingUrl(s){return this._buildResourcePath(`s=nui-binary-syssetting&r=${s}`)}getSourceCodeSchemaUrl(s,l){return this._buildResourcePath(`s=scs&sn=${s}&r=${l}`)}static{this.\u0275fac=function(l){return new(l||Bi)}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Bi,factory:Bi.\u0275fac,providedIn:"root"})}}class Bs{constructor(){this._currentSubscriptionIdentifier=null,this._currentSubscription=null,this._replaceSelectionSubject=new _.Subject}_unsubscribeLastEditor(){if(this._currentSubscription){const s={editorAction:xn.RemoveHighlighting};this._replaceSelectionSubject?.next(s),this._currentSubscriptionIdentifier=null,this._currentSubscription.unsubscribe()}}subscribeToNotifications(s,l){this._currentSubscriptionIdentifier!==s&&(this._unsubscribeLastEditor(),this._currentSubscriptionIdentifier=s,this._currentSubscription=this._replaceSelectionSubject.subscribe(l))}notify(s){this._replaceSelectionSubject?.next(s)}static{this.\u0275fac=function(l){return new(l||Bs)}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Bs,factory:Bs.\u0275fac,providedIn:"root"})}}class Qn{constructor(){this._descriptorService=(0,c.inject)(jc)}getUrl(s,l,d){let C=Nn()+["Terrasoft.Configuration/Pkg",s,"Files",l].join("/");const D=this._descriptorService.descriptors[s+"/"+l];return C+="?hash="+(D?.Hash||d||"empty"),C}static{this.\u0275fac=function(l){return new(l||Qn)}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Qn,factory:Qn.\u0275fac,providedIn:"root"})}}class Gi{constructor(){this._enabled=(0,c.signal)(!1),this._detached=new _.Subject}set enabled(s){this._enabled.set(s)}get enabled(){return this._enabled.asReadonly()}get detached$(){return this._detached.asObservable()}detach(){this._detached.next()}static{this.\u0275fac=function(l){return new(l||Gi)}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Gi,factory:Gi.\u0275fac})}}class U{static{this._codeCharactersRegex=new RegExp("^[A-Za-z0-9\\s_]*$")}static{this._wordsMatchRegex=new RegExp(/\w+/g)}static generateCode(s,l=-1){const C=(s.match(this._wordsMatchRegex)||[]).filter(D=>0!==D.length).map(D=>D[0].toUpperCase()+D.substring(1)).join("");return l>=0?C.slice(0,l):C}static isTextUsableForCodeGeneration(s){return this._codeCharactersRegex.test(s)}}class m{constructor(s){this._sysSettingsService=s}_getDefaultCodeWithCache(s,l){return void 0===this._cachedDefaultCode&&(this._cachedDefaultCode=I.$A.generateUnique(l,s)),this._cachedDefaultCode}_generateCodeInternal(s,l,d){if(!s)return this._getDefaultCodeWithCache(l,d.defaultNewCode);const C=U.generateCode(s,d.maxLength-l.length);return C.length>=d.minLength?l+C:this._getDefaultCodeWithCache(l,d.defaultNewCode)}generateCode(s,l){const{minLength:d=1,maxLength:C,defaultNewCode:D=""}=l;return(0,_.from)(this._sysSettingsService.getByCode("SchemaNamePrefix")).pipe((0,_.map)(N=>this._generateCodeInternal(s,N.value,{minLength:d,maxLength:C,defaultNewCode:D})))}static{this.\u0275fac=function(l){return new(l||m)(c.\u0275\u0275inject(v.SysSettingsService))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:m,factory:m.\u0275fac,providedIn:"root"})}}let y=class extends v.BaseRequest{};y=(0,B.Cg)([(0,v.CrtRequest)({type:"crt.CopyClipboardRequest"})],y);var T=b(37497);let G=class extends v.BaseRequestHandler{constructor(s,l){super(),this._copyClipboardService=s,this._notifyService=l}handle(s){var l=this;return(0,oe.A)(function*(){yield l._copyClipboardService.copyTextToBuffer(s.value),yield l._notifyService.show({message:"CopyClipboard.Copied"}),yield l.next?.handle(s)})()}};G=(0,B.Cg)([(0,v.CrtRequestHandler)({type:"crt.CopyClipboardRequestHandler",requestType:"crt.CopyClipboardRequest"}),(0,B.Sn)("design:paramtypes",[T.wq,T.FL])],G);var Q=b(42127);function Ke(g){const s=function Et(g){const s=[];return v.ViewElementRegistry.viewElements.get(g)?.contentSlots?.forEach(d=>{if("string"==typeof d)s.push(d);else{const C=d?.name;s.push(C)}}),s}(g),l=function Ie(g){return v.InterfaceDesignerItemRegistry.get(g)?.collectionPropertyNames||["items"]}(g);return[...new Set([...s,...l])]}function gt(g){const s=g;return!!s&&(!!s?.modelConfig||!!s?.embeddedModel||!!s?.value)}function Wa(g){const s=g;return!!s&&(!!s.from||!!s.triggers)}class xt{static _getViewConfigInfo(s,l,d,C,D){const N=[];if(Array.isArray(d))for(let q=0;q<d.length;q++){const J=d[q];l.includes(J[s])&&N.push({viewConfig:J,parentName:C,index:q,parentPropertyName:D}),Ke(J.type)?.forEach(De=>{const qe=J[De];if(qe){const Gn=this._getViewConfigInfo(s,l,qe,J.name,De);N.push(...Gn)}})}return N}static _getViewConfigInfoByFilter(s,l,d,C){const D=[];if(Array.isArray(l))for(let N=0;N<l.length;N++){const q=l[N];s(q)&&D.push({viewConfig:q,parentName:d,index:N,parentPropertyName:C}),Ke(q.type)?.forEach(pe=>{const De=q[pe];if(De){const qe=this._getViewConfigInfoByFilter(s,De,q.name,pe);D.push(...qe)}})}return D}static _getViewConfigsBindingMap(s,l,d){const C=new Map;if(Array.isArray(s))for(let D=0;D<s.length;D++){const N=s[D],q=v.ViewElementRegistry.getFormControlRelatesAttribute(N.type),J=N[q]??"";if(J.startsWith("$")){const De=J.substring(1),qe={viewConfig:N,parentName:l,index:D,parentPropertyName:d};C.has(De)?C.get(De).push(qe):C.set(De,[qe])}Ke(N.type)?.forEach(De=>{const qe=N[De];qe&&this._getViewConfigsBindingMap(qe,N.name,De).forEach((ti,kt)=>{C.has(kt)?C.get(kt).push(...ti):C.set(kt,ti)})})}return C}static _isViewModelAttributeBound(s,l){if(!l)return!1;const d=s.viewConfig,C=`\\W\\$${l}\\W`;return xt._isAttributeUseInConfig(d,C)}static _isViewModelAttributeBoundInViewModel(s,l){if(!l)return!1;const d=(0,Q.A)(xt.getViewModelConfig(s));d.attributes=d.attributes||{},delete d?.attributes[l];const C=`\\W${l}\\W`;return this._isAttributeUseInConfig(d,C)}static _isAttributeUseInConfig(s,l){const d=JSON.stringify(s);return new RegExp(l).test(d)}static _findViewConfigItem(s,l,d){if(d(l))return s.push(l),!0;const C=Ke(l.type);for(const D of C){const N=l[D];if(N)for(const q of N)if(this._findViewConfigItem(s,q,d))return s.push(l),!0}}static _getViewConfigArray(s){return s?Array.isArray(s)?s:[s]:[]}static _getPossibleResourceValues(s){return[`#ResourceString(${s})#`]}static getViewConfigPathByPropertyValue(s,l,d){const C=[],D=this._getViewConfigArray(d);for(const N of D)if(this._findViewConfigItem(C,N,q=>q[s]===l))break;return C}static getViewConfigInfoByPropertyForValues(s,l,d){const C=[],D=this._getViewConfigArray(d);for(let N=0;N<D.length;N++){const q=D[N];l.includes(q[s])&&C.push({viewConfig:q,index:N}),Ke(q.type)?.forEach(pe=>{const De=q[pe];if(De){const qe=xt._getViewConfigInfo(s,l,De,q.name,pe);C.push(...qe)}})}return C}static getViewConfigInfoByProperty(s,l,d){return xt.getViewConfigInfoByPropertyForValues(s,[l],d)}static getViewConfigInfoByFilter(s,l){const d=[],C=l??[];for(let D=0;D<C.length;D++){const N=C[D];s(N)&&d.push({viewConfig:N,index:D}),Ke(N.type)?.forEach(J=>{const pe=N[J];if(pe){const De=xt._getViewConfigInfoByFilter(s,pe,N.name,J);d.push(...De)}})}return d}static getViewConfigsBindingMap(s){return xt._getViewConfigsBindingMap(s??[],"","")}static getViewModelAttribute(s,l){return xt.getViewModelConfig(s)?.attributes?.[l]}static getViewConfigInfoByName(s,l){return xt.getViewConfigInfoByProperty("name",l,s?.viewConfig)[0]||{}}static getViewModelConfig(s,l=!1){return!s.viewModelConfig&&l&&(s.viewModelConfig={}),s.viewModelConfig||{}}static isViewModelAttributeBound(s,l){return!!l&&(xt._isViewModelAttributeBound(s,l)||xt._isViewModelAttributeBoundInViewModel(s,l))}static addViewModelAttributeChangeRequest(s,l){const{attributeName:d,requests:C,options:D}=l??{};if(!d||!C?.length)return;const N=!!D?.createAttributeIfEmpty,q=xt.getViewModelConfig(s,N);if(!q?.attributes&&!N)return;const J=q.attributes??={};if(!J[d]&&!N)return;const pe=J[d]??={};pe.change??=[],Array.isArray(pe.change)||(pe.change=[pe.change]),pe.change.push(...C)}static findResourceDependencies(s,l){const d=xt._getPossibleResourceValues(s),C={viewElements:[],attributes:[]},D=(N,q)=>{N&&("string"==typeof N?d.forEach(J=>{N.includes(J)&&C.viewElements.push(q)}):Array.isArray(N)?N.forEach(J=>D(J,q)):"object"==typeof N&&Object.values(N).forEach(J=>D(J,q)))};return Object.entries(l).forEach(([N,q])=>D(q,N)),C}static getDependentModelsNames(s,l,d){return Object.entries(s||{}).filter(([,D])=>{let N=l;return d&&(N=`${l}.${d}`),D.some(q=>q.relationPath.startsWith(N))}).map(([D])=>D)}static getDataSourceModelName(s,l){return s?.dataSources?.[l]?.config?.entitySchemaName}static findAllAttributesByDataSourceAttributePath(s,l){const d=xt.getViewModelConfig(s,!0).attributes??{},C=Object.keys(d).filter(N=>{const q=d[N]??{};return gt(q)&&q.modelConfig?.path===l});if(C.length>0)return C;const D=l.split(".");if(D.length>2){const N=D[0],J=s?.modelConfig?.dataSources?.[N]?.config?.attributes;if(J){const pe=D.slice(1).join("."),De=Object.keys(J).find(qe=>J[qe].path===pe);if(De)return this.findAllAttributesByDataSourceAttributePath(s,`${N}.${De}`)}}return[]}static getLoadParametersByDataSourceName(s,l){return l.modelConfig?.dataSources?.[s]?.config?.loadParameters}static getSortingConfigByDataSourceName(s,l){return this.getLoadParametersByDataSourceName(s,l)?.options?.sortingConfig}}const Sn="BPMCSRF";class Ui{constructor(s){this.tokenService=s}intercept(s,l){const d=s.url.toLowerCase();if("GET"===s.method||"HEAD"===s.method||(d.startsWith("http://")||d.startsWith("https://"))&&!d.startsWith(Ga().toLowerCase()))return l.handle(s);const C=this.tokenService.getToken();return null!==C&&!s.headers.has(Sn)&&(s=s.clone({headers:s.headers.set(Sn,C)})),l.handle(s)}static{this.\u0275fac=function(l){return new(l||Ui)(c.\u0275\u0275inject(R.HttpXsrfTokenExtractor))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Ui,factory:Ui.\u0275fac,providedIn:"root"})}}var Za=b(54668);function Ah(g){let s;switch(g){case v.DataValueType.SHORT_TEXT:s=Za.OK.ShortTextCaption;break;case v.DataValueType.PHONE_TEXT:case v.DataValueType.MEDIUM_TEXT:s=Za.OK.MediumTextCaption;break;case v.DataValueType.LONG_TEXT:case v.DataValueType.EMAIL_TEXT:s=Za.OK.LongTextCaption;break;default:return}return{maxLength:s}}function Rh(g){return[v.DataValueType.Float,v.DataValueType.FLOAT1,v.DataValueType.FLOAT2,v.DataValueType.FLOAT3,v.DataValueType.FLOAT4,v.DataValueType.FLOAT8,v.DataValueType.Money].includes(g)?{minValue:Za.M_.Float.min,maxValue:Za.M_.Float.max}:g===v.DataValueType.Integer?{minValue:Za.M_.Integer.min,maxValue:Za.M_.Integer.max}:void 0}var Ur=b(49147),Jd=b(26182);class kn{constructor(s,l){this.iconRegistry=s,this.domSanitizer=l,Object.keys(j).forEach(d=>{const C=j[d],D=C.name.toLowerCase();this.iconRegistry.addSvgIconLiteral(`page-designer-${D}`,this.domSanitizer.bypassSecurityTrustHtml(C.designerIcon)),C.designerAutonumberIcon&&this.iconRegistry.addSvgIconLiteral(`page-designer-${D}-autonumber`,this.domSanitizer.bypassSecurityTrustHtml(C.designerAutonumberIcon))})}getDesignerDataValueTypeIcon(s,l=!1){const d=j[s];if(!d)throw new Error(`Data value type "${s}" not exists`);const C=d.name.toLowerCase();return l?`page-designer-${C}-autonumber`:`page-designer-${C}`}static{this.\u0275fac=function(l){return new(l||kn)(c.\u0275\u0275inject(Jd.tp),c.\u0275\u0275inject(Ur.DomSanitizer))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:kn,factory:kn.\u0275fac,providedIn:"root"})}}function Ph(g){return Object.values(j).find(s=>s.name===g)?.type}function Gs(g){return!(g&&!g?.value)}function Nh(g){return g=g||new Date,new Date(g.getFullYear(),g.getMonth(),g.getDate())}function qo(g){return g=g||new Date,new Date(g.getFullYear(),g.getMonth(),g.getDate(),23,59,59,999)}function Wo(g){if(!g)return null;function s(){throw new Error(`String "${g}" is not a valid serialized date.`)}"string"!=typeof g&&s();const[l,d]=g.split("T");if(d&&("Z"===d[d.length-1]||-1!==d.indexOf("+")||-1!==d.indexOf("-"))){const D=Date.parse(g);return isNaN(D)&&s(),new Date(D)}try{const[D,N,q]=l.split("-"),[J,pe,De]=d.split(":"),[qe,Gn]=De.split(".");return new Date(parseInt(D),parseInt(N)-1,parseInt(q),parseInt(J),parseInt(pe),parseInt(qe),parseInt(Gn))}catch{s()}}function Zo(g){return g.replace(/\.+/g,"").replace(/\[+/g,"").replace(/\]+/g,"").replace(/:+/g,"")}function zr(g,s,l){return!g||!s||!l}function Kd(g,s){return`/img/entity/hash/${g}/${s}/`}function Jo(g,s="SysImage",l="Data"){if(zr(g,s,l))return"";const d=Kd(s,l);return`${wi()}${d}${g}`}function Us(g,s){switch(v.ValidationUtilities.checkArgumentEmpty("dataValueType",s),s){case v.DataValueType.Date:case v.DataValueType.Time:case v.DataValueType.DateTime:return Wo(g);default:return g}}function Xo(g,s){const l=$r(g,s);return Object.fromEntries(Object.entries(l).map(([d,C])=>[d,C?.[s]]))}function $r(g,s){return g&&s?Object.fromEntries(Object.entries(g).map(([l,d])=>[l,d?.[s]]).filter(([,l])=>void 0!==l).map(([l,d])=>[l,{[s]:d}])):{}}function el(g){if(!g)return g;const s=JSON.parse(JSON.stringify(g));return Object.fromEntries(Object.entries(s).filter(([,l])=>!(0,tn.A)(l)))}function Lh(g,s,l=!1){if(null==g&&null==s)return!0===l;const d=new Nt(g),C=new Nt(s);return d.length===C.length&&d.every(D=>function zc(g,s,l=!1){return null==g&&null==s&&!0===l||g?.cultureName===s?.cultureName&&g?.value===s?.value}(D,C.getLocalizableString(D.cultureName),l))}class qr{constructor(s){this.precision=2,Object.assign(this,s)}}class Xd{constructor(s={}){this.decimalSeparator=s.decimalSeparator||"",this.thousandSeparator=s.thousandSeparator||""}}class zi{constructor(s){this._userInfo=s,this._digitsInRank=3}_collapseRepeatedChar(s,l){return s.replace(new RegExp(`[\\${l}]{1,}`,"g"),l)}_insertThousandSeparators(s,l){const d=s.split("");for(let C=d.length-this._digitsInRank;C>0;C-=this._digitsInRank)d.splice(C,0,l);return d.join("")}formatNumberValue(s,l=null){if(!(s=parseFloat(s&&s.toString()))||isNaN(s))return"0";let d="";s<0&&(d="-"),l=l||new qr;const C=this.getNumberFormatInfo(),{decimalSeparator:D,thousandSeparator:N}=C,q=s.toFixed(l.precision).split(".");let J=q[0].replace("-","");l.ignoreThousandSeparator||(J=this._insertThousandSeparators(J,N));const pe=q.length>1?q[1].replace(/0{1,}$/,""):"";return""!==pe?`${d}${J}${D}${pe}`:`${d}${J}`}removeFractionalPart(s){const[d]=s.toString().split(".");return d}getNumberFormatInfo(){const s=this._userInfo.cultureInfo;return new Xd({decimalSeparator:s.decimalSeparator,thousandSeparator:s.thousandSeparator})}parseStringToNumber(s,l=2){if(!s)return NaN;"string"!=typeof s&&(s=String(s));const d=this.getNumberFormatInfo().decimalSeparator;let C=this.formatStringValue(s);C=C.replace(d,".");const D=parseFloat(C);return Number(D.toFixed(l))}formatStringValue(s){"string"!=typeof s&&(s=String(s));const l=s.match(/^-/)||"",d=this.getNumberFormatInfo().decimalSeparator,C=this._collapseRepeatedChar(s,d),D=new RegExp(`[^0-9\\${d}]+`,"g");return l+C.replace(D,"")}convertNumericStringToExponentialFormat(s,l=2){if(s&&""!==s){const d=parseFloat(s);if(!isNaN(d))return d.toExponential(l)}return""}static{this.\u0275fac=function(l){return new(l||zi)(c.\u0275\u0275inject(de))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:zi,factory:zi.\u0275fac,providedIn:"root"})}}function nl(g,s){const l=Array.isArray(s)?s:s.split(".");let d=g;for(const C of l)if(d instanceof Map)d=d.get(C);else{if(!d||"object"!=typeof d)return;d=d[C]}return d}function Hs(g){return"string"==typeof g}function Wc(g,s){return g.replace(/{[0-9]}/g,l=>{const d=function jh(g){const s=g.substring(1,g.length-1);return parseInt(s,10)}(l);return s[d]?s[d].toString():""})}function ip(g){const s=new _.Subscription;for(const l of g)s.add(l);return s}function il(g,s=sa.Contains){return v.ValidationUtilities.checkArgumentEmpty("columnSelectors",g),(l,d)=>!d||g.some(C=>{const D="string"==typeof C?l[C]:C(l);return!(!D||"string"!=typeof D)&&function Wr(g,s,l){const d=g.toLowerCase();switch(l){case sa.Contains:return d.includes(s);case sa.StartsWith:return 0===d.indexOf(s);case sa.Equals:return d===s}}(D,d,s)})}class ga{_buildRequestUrl(s){return this._isAbsoluteUrl(s)?s:We.Location.joinWithSlash(this.getUrl(),s)}_isAbsoluteUrl(s){return/^https?:\/\//i.test(s)}getUrl(){return wi()}intercept(s,l){return s=s.clone({url:this._buildRequestUrl(s.url)}),l.handle(s).pipe((0,z.W)(d=>(console.log(d),(0,_.throwError)(d))))}static{this.\u0275fac=function(l){return new(l||ga)}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:ga,factory:ga.\u0275fac})}}class Hi extends ga{getUrl(){return Nn()}static{this.\u0275fac=(()=>{let s;return function(d){return(s||(s=c.\u0275\u0275getInheritedFactory(Hi)))(d||Hi)}})()}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Hi,factory:Hi.\u0275fac})}}let Zc=class{constructor(s){this._window=s}intercept(s,l){const d={beforeRequest:function(C){},afterRequest:function(C){},onErrorRequest:function(C,D){}};return Object.assign(d,this._window.RequestLogger||{}),d.beforeRequest(s),l.handle(s).pipe((0,z.W)(C=>{throw d.onErrorRequest(s,C),C}),(0,A.T)(C=>(d.afterRequest(s),C)))}};Zc=(0,B.Cg)([(0,B.Qj)(0,(0,c.Inject)(I.ZP)),(0,B.Sn)("design:paramtypes",[Window])],Zc);let Ja=class{constructor(s,l){this._featureValues=s,this._applicationInfo=l,this._dataServiceUrlRegex=new RegExp("DataService/(.+?)/(SelectQuery|InsertQuery|UpdateQuery|DeleteQuery)$")}_needAddParameters(s){return(this._applicationInfo.isDebugEnabled||this._featureValues.UseDataServiceQueryParams)&&!!s.url.match(this._dataServiceUrlRegex)}_addParameters(s){const l={s:s.body.rootSchemaName},d=s.body.rowCount;d&&(l.c=d);const C=new URLSearchParams(l);return`${s.url}?${C.toString()}`}intercept(s,l){try{if(!this._needAddParameters(s))return l.handle(s);const d=s.clone({url:this._addParameters(s)});return l.handle(d)}catch{return l.handle(s)}}};Ja=(0,B.Cg)([(0,B.Qj)(0,(0,c.Inject)(rt)),(0,B.Sn)("design:paramtypes",[_s,h])],Ja);let al=class extends v.BaseRequest{constructor(){super(...arguments),this.throwErrors=!1}};al=(0,B.Cg)([(0,v.CrtRequest)({type:"crt.SoundNotificationRequest"})],al);let Jc=class extends v.BaseRequestHandler{constructor(s){super(),this._soundPlayerService=s}handle(s){var l=this;return(0,oe.A)(function*(){yield l._soundPlayerService.playFromSource(s.source,s.throwErrors),yield l.next?.handle(s)})()}};Jc=(0,B.Cg)([(0,v.CrtRequestHandler)({type:"crt.SoundNotificationHandler",requestType:"crt.SoundNotificationRequest"}),(0,B.Sn)("design:paramtypes",[I.wZ])],Jc);let sl=class extends v.BaseRequest{};sl=(0,B.Cg)([(0,v.CrtRequest)({type:"crt.ShowDesktopNotification"})],sl);let Yc=class extends v.BaseRequestHandler{constructor(s){super(),this.notificationSender=s}handle(s){var l=this;return(0,oe.A)(function*(){yield l.notificationSender.notify(s.config),yield l.next?.handle(s)})()}};Yc=(0,B.Cg)([(0,v.CrtRequestHandler)({type:"crt.ShowDesktopNotificationHandler",requestType:"crt.ShowDesktopNotificationRequest"}),(0,B.Qj)(0,(0,v.CrtInject)(I.X4)),(0,B.Sn)("design:paramtypes",[Object])],Yc);var ap=b(32787);const Ya={name:"crt-shell-db",version:3,objectStoresMeta:[{store:"images",storeConfig:{keyPath:"id",autoIncrement:!0},storeSchema:[{name:"key",keypath:"key",options:{unique:!0}},{name:"dataUrl",keypath:"dataUrl",options:{unique:!1}}]},{store:"business-rules",storeConfig:{keyPath:"id",autoIncrement:!0},storeSchema:[{name:"key",keypath:"key",options:{unique:!0}},{name:"data",keypath:"data",options:{unique:!1}}]},{store:"common",storeConfig:{keyPath:"id",autoIncrement:!0},storeSchema:[{name:"key",keypath:"key",options:{unique:!0}},{name:"data",keypath:"data",options:{unique:!1}}]}],isDefault:!0};class $i{constructor(s){this.dbService=s,this._cache=new Map}_getLocalCache(s){return this._cache.has(s)||this._cache.set(s,new Map),this._cache.get(s)}_clearLocalCache(s){this._getLocalCache(s).clear()}_setItemToLocalCache(s,l,d){this._getLocalCache(s).set(l,d)}_getItemFromLocalCache(s,l){return this._getLocalCache(s).get(l)}_hasItemInLocalCache(s,l){return this._getLocalCache(s).has(l)}add(s,l){return this.dbService.add(s,l).pipe((0,_.tap)(d=>this._setItemToLocalCache(s,l.key,d)))}getByKey(s,l){return this._hasItemInLocalCache(s,l)?(0,_.of)(this._getItemFromLocalCache(s,l)):this.dbService.getByIndex(s,"key",l).pipe((0,_.tap)(d=>this._setItemToLocalCache(s,l,d)))}clear(s){return this.dbService.clear(s).pipe((0,_.tap)(()=>this._clearLocalCache(s)))}update(s,l){return this.dbService.update(s,l).pipe((0,_.tap)(d=>this._setItemToLocalCache(s,l.key,d)))}static{this.\u0275fac=function(l){return new(l||$i)(c.\u0275\u0275inject(ap.MX))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:$i,factory:$i.\u0275fac})}}class Zr{static{this.\u0275fac=function(l){return new(l||Zr)}}static{this.\u0275mod=c.\u0275\u0275defineNgModule({type:Zr})}static{this.\u0275inj=c.\u0275\u0275defineInjector({providers:[$i],imports:[ap.L7.forRoot(Ya)]})}}let rl=class zy{static{this.\u0275fac=function(l){return new(l||zy)}}static{this.\u0275mod=c.\u0275\u0275defineNgModule({type:zy})}static{this.\u0275inj=c.\u0275\u0275defineInjector({providers:[Ot,Un,zt,zi,St,ce,{provide:xr,useFactory:s=>s.requirejs,deps:[I.ZP]},qn,ws,Ua,Wn,{provide:be,useValue:s=>"SchemaManagerItemEventNotifier"===s?.header?.sender&&"ChangedSchema"===s?.header?.bodyTypeName,multi:!0},{provide:Ve,useValue:s=>"SchemaManagerItemEventNotifier"===s?.header?.sender&&"RemovedSchema"===s?.header?.bodyTypeName,multi:!0}],imports:[W.h]})}};rl=(0,B.Cg)([(0,v.CrtModule)({requestHandlers:[G,Yc,Jc]})],rl);var Kc=b(31704),sp=b(35025),Bh=b.n(sp);class fa{constructor(){this._defaultShortDatePattern="M/D/YYYY"}convert(s){if(s)return{...s,shortDatePattern:s?.shortDatePattern?.toUpperCase()??this._defaultShortDatePattern,shortTimePattern:s?.shortTimePattern?.replace("tt","A")}}static{this.\u0275fac=function(l){return new(l||fa)}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:fa,factory:fa.\u0275fac,providedIn:"root"})}}const ol=new c.InjectionToken("DateTimeFormatInfo",{providedIn:"root",factory:()=>{const g=(0,c.inject)(fa),s=(0,c.inject)(de);return g.convert(s?.cultureInfo?.dateTimeFormat)}});class Jr extends Kc.QH{constructor(){super(...arguments),this._dateTimeFormatToken=(0,c.inject)(ol),this._userInfo=(0,c.inject)(de)}getFirstDayOfWeek(){return this._dateTimeFormatToken?.firstDayOfWeek??0}today(){return super.today().utcOffset(this._userInfo.timeZoneOffsetHours??Bh()().utcOffset())}static{this.\u0275fac=(()=>{let s;return function(d){return(s||(s=c.\u0275\u0275getInheritedFactory(Jr)))(d||Jr)}})()}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Jr,factory:Jr.\u0275fac,providedIn:"root"})}}var Uh=b(32693);class qs extends Uh.vS{constructor(){super(...arguments),this._dateTimeFormatToken=(0,c.inject)(ol)}format(s,l){let d=super.format(s,l);if(this._dateTimeFormatToken&&l.includes("A")){const C=s.format("A");d=s.hour()<12?d.replace(C,this._dateTimeFormatToken.amDesignator):d.replace(C,this._dateTimeFormatToken.pmDesignator)}return d}static{this.\u0275fac=(()=>{let s;return function(d){return(s||(s=c.\u0275\u0275getInheritedFactory(qs)))(d||qs)}})()}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:qs,factory:qs.\u0275fac})}}var Hh=b(96810),$h=b(31424),Qc=b(90590);class _i{constructor(s,l,d,C){this.overlay=s,this.overlayPositionBuilder=l,this.elementRef=d,this.ngZone=C,this.delayTime=500}_createIconHoveredStream(s){return this.ngZone.runOutsideAngular(()=>(0,_.fromEvent)(this.elementRef.nativeElement,"mouseenter").pipe((0,$h.Z)(this.delayTime),(0,Dt.Q)(s)))}_createIconMouseOutStream(){return this.ngZone.runOutsideAngular(()=>(0,_.fromEvent)(this.elementRef.nativeElement,"mouseleave"))}_createEventsStream(s,l){this.subscription=l.subscribe(),this.subscription.add(s.subscribe());const d=(0,_.merge)(s,l);d.pipe((0,Dt.Q)(l));const C=d.subscribe(D=>{if("mouseenter"===D.type&&this.show(),"mouseleave"===D.type){this.hide(),this.subscription.unsubscribe();const N=this._createIconMouseOutStream(),q=this._createIconHoveredStream(N);this._createEventsStream(q,N)}});this.subscription.add(C)}hide(){this.overlayRef.hasAttached()&&this.overlayRef.detach()}show(){this.hintConfig&&(this.overlayRef.hasAttached()||(this.tooltipRef=this.overlayRef.attach(new Hh.A8(this.hintConfig.componentType))),this.tooltipRef.instance.hintConfig=this.hintConfig.hintConfig)}ngOnInit(){const s=this.overlayPositionBuilder.flexibleConnectedTo(this.elementRef).withPositions([{originX:"center",originY:"bottom",overlayX:"center",overlayY:"top",offsetX:this.hintConfig.positionX?this.hintConfig.positionX:0,offsetY:this.hintConfig.positionY?this.hintConfig.positionY:0}]);this.overlayRef=this.overlay.create({scrollStrategy:this.overlay.scrollStrategies.close(),positionStrategy:s})}ngAfterViewInit(){const s=this._createIconMouseOutStream(),l=this._createIconHoveredStream(s);this._createEventsStream(l,s)}ngOnDestroy(){this.hide(),this.subscription.unsubscribe()}static{this.\u0275fac=function(l){return new(l||_i)(c.\u0275\u0275directiveInject(Qc.hJ),c.\u0275\u0275directiveInject(Qc.lF),c.\u0275\u0275directiveInject(c.ElementRef),c.\u0275\u0275directiveInject(c.NgZone))}}static{this.\u0275dir=c.\u0275\u0275defineDirective({type:_i,selectors:[["","libHintOverlay",""]],inputs:{hintConfig:[c.\u0275\u0275InputFlags.None,"libHintOverlay","hintConfig"]},exportAs:["libHintOverlay"]})}}var qh=b(7557);class Xc{constructor(s){this._elementRef=s,this._debounceTime=300}_setTitleAttribute(){const s="title",l=this._elementRef.nativeElement;if(this._isElementOverflowed(l)){const d=l.value||l.innerText||"";l.setAttribute(s,d)}else l.removeAttribute(s)}_isElementOverflowed(s){return s.offsetWidth<s.scrollWidth||s.offsetHeight<s.scrollHeight}onMouseEnter(){(0,qh.A)(()=>this._setTitleAttribute(),this._debounceTime,{leading:!0,trailing:!1})()}static{this.\u0275fac=function(l){return new(l||Xc)(c.\u0275\u0275directiveInject(c.ElementRef))}}static{this.\u0275dir=c.\u0275\u0275defineDirective({type:Xc,selectors:[["","crtTextOverflowTitle",""]],hostBindings:function(l,d){1&l&&c.\u0275\u0275listener("mouseenter",function(){return d.onMouseEnter()})}})}}class ll{static{this.\u0275fac=function(l){return new(l||ll)}}static{this.\u0275mod=c.\u0275\u0275defineNgModule({type:ll})}static{this.\u0275inj=c.\u0275\u0275defineInjector({})}}class cl{static{this.\u0275fac=function(l){return new(l||cl)}}static{this.\u0275mod=c.\u0275\u0275defineNgModule({type:cl})}static{this.\u0275inj=c.\u0275\u0275defineInjector({})}}class ul{static{this.\u0275fac=function(l){return new(l||ul)}}static{this.\u0275dir=c.\u0275\u0275defineDirective({type:ul,selectors:[["","crtSaveScrollPosition",""]],features:[c.\u0275\u0275ProvidersFeature([Ai])]})}}var an,Lt,Ft,eu=b(41992),Wh=b(7212),Ws=b(73866);class dl extends eu.kB{constructor(){super(...arguments),this._trapFocusService=(0,c.inject)(Gi),this._injector=(0,c.inject)(c.Injector),this._destroyRef=(0,c.inject)(c.DestroyRef),this._toggleTrapFocusEffect=(0,c.effect)(()=>{this.enabled=this._trapFocusService.enabled()})}ngAfterContentInit(){super.ngAfterContentInit(),(0,c.runInInjectionContext)(this._injector,()=>this._toggleTrapFocusEffect),this._trapFocusService.detached$.pipe((0,Wh.pQ)(this._destroyRef),(0,Ws.c)(1)).subscribe(()=>this.focusTrap.destroy())}static{this.\u0275fac=(()=>{let s;return function(d){return(s||(s=c.\u0275\u0275getInheritedFactory(dl)))(d||dl)}})()}static{this.\u0275dir=c.\u0275\u0275defineDirective({type:dl,selectors:[["","crtTrapFocus",""]],exportAs:["crtTrapFocus"],standalone:!0,features:[c.\u0275\u0275ProvidersFeature([{provide:eu.GX,useClass:eu.Fp}]),c.\u0275\u0275InheritDefinitionFeature]})}}class ya{constructor(){this._elementRef=(0,c.inject)(c.ElementRef)}focus(){this._elementRef.nativeElement.focus()}static{this.\u0275fac=function(l){return new(l||ya)}}static{this.\u0275dir=c.\u0275\u0275defineDirective({type:ya,selectors:[["","crtA11yListItem",""]]})}}class Zs{_getEntitySchemaColumnsDataValueTypesMap(s){return s.columns.reduce((l,d)=>(l[d.name]=d.dataValueType,l),{})}_getEntityColumnsDataValueTypesMap(s){return Object.keys(s).reduce((l,d)=>(l[d]=s[d].dataValueType,l),{})}_parseRawColumnValue(s,l){switch(l){case v.DataValueType.Date:case v.DataValueType.Time:case v.DataValueType.DateTime:return Wo(s);default:return s}}_parseRawEntityObject(s,l){const d={};return Object.keys(s).forEach(C=>{const D=s[C];d[C]=l[C]?this._parseRawColumnValue(D,l[C]):D}),d}deserializeEntity(s,l){v.ValidationUtilities.checkArgumentEmpty("columnsConfig",s),v.ValidationUtilities.checkArgumentEmpty("rawEntity",l);const d=this._getEntityColumnsDataValueTypesMap(s);return this._parseRawEntityObject(l,d)}deserializeEntities(s,l){v.ValidationUtilities.checkArgumentEmpty("columnsConfig",s),v.ValidationUtilities.checkArgumentEmpty("rawEntities",l);const d=this._getEntityColumnsDataValueTypesMap(s);return l.map(C=>this._parseRawEntityObject(C,d))}deserializeEntitySchemaRecord(s,l){v.ValidationUtilities.checkArgumentEmpty("entitySchema",s),v.ValidationUtilities.checkArgumentEmpty("rawEntities",l);const d=this._getEntitySchemaColumnsDataValueTypesMap(s);return this._parseRawEntityObject(l,d)}deserializeEntitySchemaRecords(s,l){v.ValidationUtilities.checkArgumentEmpty("entitySchema",s),v.ValidationUtilities.checkArgumentEmpty("rawEntities",l);const d=this._getEntitySchemaColumnsDataValueTypesMap(s);return l.map(C=>this._parseRawEntityObject(C,d))}static{this.\u0275fac=function(l){return new(l||Zs)}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Zs,factory:Zs.\u0275fac,providedIn:"root"})}}class Js{constructor(){this.subject$=new _.Subject}emit(s){this.subject$.next(s)}on(s,l,d){return this.subject$.pipe((0,L.p)(C=>C.name===s),(0,A.T)(C=>C.value)).subscribe(C=>l.call(d,C))}static{this.\u0275fac=function(l){return new(l||Js)}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Js,factory:Js.\u0275fac})}}!function(g){g[g.Operator=0]="Operator",g[g.Operand=1]="Operand",g[g.Function=2]="Function"}(an||(an={})),function(g){g[g.Const=0]="Const",g[g.Column=1]="Column",g[g.SysSetting=2]="SysSetting",g[g.SysVariable=3]="SysVariable"}(Lt||(Lt={})),function(g){g[g.Addition=0]="Addition",g[g.Subtraction=1]="Subtraction",g[g.Multiplication=2]="Multiplication",g[g.Division=3]="Division"}(Ft||(Ft={}));var Xn,jn;!function(g){g[g.Parentheses=0]="Parentheses",g[g.Arithmetic=1]="Arithmetic",g[g.Relation=2]="Relation",g[g.Ternary=3]="Ternary",g[g.Comma=4]="Comma",g[g.Point=5]="Point"}(Xn||(Xn={})),function(g){g[g.Equal=0]="Equal",g[g.NotEqual=1]="NotEqual",g[g.Less=2]="Less",g[g.LessOrEqual=3]="LessOrEqual",g[g.Greater=4]="Greater",g[g.GreaterOrEqual=5]="GreaterOrEqual"}(jn||(jn={}));var qi;!function(g){g[g.SchemaColumn=0]="SchemaColumn",g[g.SubQuery=1]="SubQuery",g[g.Aggregation=2]="Aggregation"}(qi||(qi={}));class Wi{static{this._supportedDataTypesPriority={[v.DataValueType.Integer]:0,[v.DataValueType.FLOAT1]:1,[v.DataValueType.Float]:2,[v.DataValueType.FLOAT2]:3,[v.DataValueType.Money]:4,[v.DataValueType.FLOAT3]:5,[v.DataValueType.FLOAT4]:6,[v.DataValueType.FLOAT8]:7}}static _isSupportedResultDataType(s,l){if(null==s||null==l)return!1;const d=null!=this._supportedDataTypesPriority[s],C=null!=this._supportedDataTypesPriority[l];return d&&C}static _getSupportedResultDataType(s,l){return this._supportedDataTypesPriority[s]>=this._supportedDataTypesPriority[l]?s:l}static getResultDataType(s,l){const d=s?.dataType,C=l?.dataType;return this._isSupportedResultDataType(d,C)?this._getSupportedResultDataType(d,C):null}}class Zh{static{this.NUMBER_REGEX=/^\d+\.{0,1}\d*$/}static{this.DECIMAL_SEPARATOR="."}static _getNumericDataType(s){const l=s.indexOf(this.DECIMAL_SEPARATOR);if(-1===l)return v.DataValueType.Integer;const C=s.slice(l+1,s.length).length;return this._getNumericDataTypeByPrecision(C)}static _getNumericDataTypeByPrecision(s){return s>4?v.DataValueType.FLOAT8:4===s?v.DataValueType.FLOAT4:3===s?v.DataValueType.FLOAT3:2===s?v.DataValueType.Float:v.DataValueType.FLOAT1}static getResultDataType(s){return"boolean"==typeof s?v.DataValueType.Boolean:"number"==typeof s?this._getNumericDataType(s.toString()):"string"==typeof s?this.NUMBER_REGEX.test(s)?this._getNumericDataType(s):v.DataValueType.Text:null}}class _a{constructor(s,l){this.type=s,this.dataType=l}}class Ca extends _a{constructor(s,l,d){super(an.Function,l),this.code=s,this.arguments=d}get definitionId(){return this.code}accept(s){return s&&s.visitFunctionExpression(this)}}class Ys extends _a{constructor(s,l){super(an.Operand,l),this.operandType=s}}function Jh(g){return g?.columnPath}class Ka extends Ys{constructor(s,l){super(Lt.Column,l),this.columnPath=s,this.columnOperandType=qi.SchemaColumn}get definitionId(){return Jh(this)}accept(s){return s&&s.visitColumnOperandExpression(this)}}function Kr(g){const s=Jh(g),l=function $s(g){let s=0;if(!Hs(g)||0===g.length)return s;for(let l=0;l<g.length;l++)s=g.charCodeAt(l)+(s<<5)-s,s|=0;return s}(g?.subFilters);return`${s}_${l}`}class Ks extends Ka{constructor(s,l,d){super(s,l),this.subFilters=d,this.columnOperandType=qi.SubQuery}get definitionId(){return Kr(this)}accept(s){return s&&s.visitSubQueryOperandExpression(this)}}class iu extends Ks{constructor(s,l,d,C){super(s,l,C),this.aggregationType=d,this.columnOperandType=qi.Aggregation}get definitionId(){return function nu(g){return`${Kr(g)}_${g?.aggregationType}`}(this)}accept(s){return s&&s.visitAggregationSubQueryOperandExpression(this)}}class ml extends Ys{constructor(s,l){super(Lt.Const,l??Zh.getResultDataType(s)),this.value=s}get definitionId(){}accept(s){return s&&s.visitConstOperandExpression(this)}}class Yh extends Ys{constructor(s,l){super(Lt.SysSetting,l),this.code=s}get definitionId(){return this.code}accept(s){return s&&s.visitSysSettingOperandExpression(this)}}class hl extends Ys{constructor(s,l){super(Lt.SysVariable,l),this.name=s}get definitionId(){return this.name}accept(s){return s&&s.visitSysVariableOperandExpression(this)}}class gl extends _a{constructor(s,l){super(an.Operator,l),this.operatorType=s}}class rp extends gl{constructor(s,l,d,C){super(s,l),this.leftExpression=d,this.rightExpression=C}}class ft extends rp{constructor(s,l,d){super(Xn.Arithmetic,Wi.getResultDataType(l,d),l,d),this.arithmeticOperatorType=s}get definitionId(){return(g=>{switch(g){case Ft.Addition:return"+";case Ft.Subtraction:return"-";case Ft.Multiplication:return"*";case Ft.Division:return"/";default:throw new Error("Unsupported arithmetic operator type")}})(this.arithmeticOperatorType)}accept(s){return s&&s.visitArithmeticOperatorExpression(this)}}class sn extends gl{constructor(s,l){super(s,l?.dataType),this.expression=l}}class op extends sn{constructor(s){super(Xn.Parentheses,s)}get definitionId(){}accept(s){return s&&s.visitParenthesesOperatorExpression(this)}}class au extends rp{constructor(s,l,d){super(Xn.Relation,v.DataValueType.Boolean,l,d),this.relationOperatorType=s}get definitionId(){return(g=>{switch(g){case jn.Equal:return"==";case jn.NotEqual:return"!=";case jn.Greater:return">";case jn.GreaterOrEqual:return">=";case jn.Less:return"<";case jn.LessOrEqual:return"<=";default:throw new Error("Unsupported relation operator type")}})(this.relationOperatorType)}accept(s){return s&&s.visitRelationOperatorExpression(this)}}class lp extends gl{constructor(s,l,d){super(Xn.Ternary,l.dataType),this.condition=s,this.thenExpression=l,this.elseExpression=d}get definitionId(){return"ternary"}accept(s){return s&&s.visitTernaryOperatorExpression(this)}}class $t{constructor(s){this.expressionFactoryMediator=s}getDataType(s){return this.getObjectField(s,"dataType")}getDefinitionId(s){return this.getObjectField(s,"definitionId")}getExpression(s,l,d){const C=this.getObjectField(s,l);return this.expressionFactoryMediator.createExpression(d||"expression",C)}getObjectField(s,l){return s[l]}getEnumValue(s,l){if(null==l||""===l)return null;const d=+l;if(!isNaN(d))return d;const C=Object.entries(s).find(([D])=>D.toLocaleLowerCase()===l.toString().toLocaleLowerCase()&&Object.prototype.hasOwnProperty.call(s,D));return C?C[1]:null}getEnumValueByObject(s,l,d){const C=this.getObjectField(l,d);return this.getEnumValue(s,C)}}class cp extends $t{constructor(s){super(s)}createExpression(s){const l=this.getObjectField(s,"code"),d=this.getDataType(s),D=this.getObjectField(s,"arguments").map(N=>this.expressionFactoryMediator.createExpression("expression",N));return new Ca(l,d,D)}}class Kh extends $t{constructor(s){super(s)}createExpression(s){const l=this.getDataType(s),d=this.getObjectField(s,"columnPath"),C=this.getObjectField(s,"subFilters"),D=this.getEnumValueByObject(v.AggregationType,s,"aggregationType");return new iu(d,l,D,C)}}class fl extends $t{constructor(s){super(s)}createExpression(s){switch(this.getEnumValueByObject(qi,s,"columnOperandType")){case qi.Aggregation:return this.expressionFactoryMediator.createExpression("aggregationSubQueryOperandExpression",s);case qi.SubQuery:return this.expressionFactoryMediator.createExpression("subQueryOperandExpression",s);case qi.SchemaColumn:default:return this.expressionFactoryMediator.createExpression("schemaColumnOperandExpression",s)}}}class vn extends $t{constructor(s){super(s)}createExpression(s){const l=this.getObjectField(s,"value"),d=this.getDataType(s);return new ml(l,d)}}class Qh extends $t{constructor(s){super(s)}createExpression(s){switch(this.getEnumValueByObject(Lt,s,"operandType")){case Lt.Column:return this.expressionFactoryMediator.createExpression("columnOperandExpression",s);case Lt.Const:return this.expressionFactoryMediator.createExpression("constantOperandExpression",s);case Lt.SysSetting:return this.expressionFactoryMediator.createExpression("sysSettingOperandExpression",s);case Lt.SysVariable:return this.expressionFactoryMediator.createExpression("sysVariableOperandExpression",s);default:{const d=this.getObjectField(s,"operandType");throw new Error(`The '${d}' operand type is not supported.`)}}}}class Qs extends $t{constructor(s){super(s)}createExpression(s){const l=this.getObjectField(s,"columnPath"),d=this.getDataType(s);return new Ka(l,d)}}class Zi extends $t{constructor(s){super(s)}createExpression(s){const l=this.getDataType(s),d=this.getObjectField(s,"columnPath"),C=this.getObjectField(s,"subFilters");return new Ks(d,l,C)}}class yl extends $t{constructor(s){super(s)}createExpression(s){const l=this.getObjectField(s,"code"),d=this.getDataType(s);return new Yh(l,d)}}class up extends $t{constructor(s){super(s)}createExpression(s){const l=this.getObjectField(s,"name"),d=this.getDataType(s);return new hl(l,d)}}class su extends $t{constructor(s){super(s)}getLeftExpression(s){return this.getExpression(s,"leftExpression")}getRightExpression(s){return this.getExpression(s,"rightExpression")}}class Yy extends su{constructor(s){super(s)}createExpression(s){const l=this.getEnumValueByObject(Ft,s,"arithmeticOperatorType"),d=this.getLeftExpression(s),C=this.getRightExpression(s);return new ft(l,d,C)}}class ru extends $t{constructor(s){super(s)}createExpression(s){switch(this.getEnumValueByObject(Xn,s,"operatorType")){case Xn.Arithmetic:return this.expressionFactoryMediator.createExpression("arithmeticOperatorExpression",s);case Xn.Parentheses:return this.expressionFactoryMediator.createExpression("parenthesesOperatorExpression",s);case Xn.Relation:return this.expressionFactoryMediator.createExpression("relationOperatorExpression",s);case Xn.Ternary:return this.expressionFactoryMediator.createExpression("ternaryOperatorExpression",s);default:{const d=this.getObjectField(s,"operatorType");throw new Error(`The '${d}' operator type is not supported.`)}}}}class Ky extends $t{constructor(s){super(s)}getInnerExpression(s){return this.getExpression(s,"expression")}}class dp extends Ky{constructor(s){super(s)}createExpression(s){const l=this.getInnerExpression(s);return new op(l)}}class ou extends su{constructor(s){super(s)}createExpression(s){const l=this.getEnumValueByObject(jn,s,"relationOperatorType"),d=this.getLeftExpression(s),C=this.getRightExpression(s);return new au(l,d,C)}}class Qy extends $t{constructor(s){super(s)}createExpression(s){const l=this.getExpression(s,"condition","relationOperatorExpression"),d=this.getExpression(s,"thenExpression"),C=this.getExpression(s,"elseExpression");return new lp(l,d,C)}}class pp extends $t{constructor(s){super(s)}createExpression(s){switch(this.getEnumValueByObject(an,s,"type")){case an.Function:return this.expressionFactoryMediator.createExpression("functionExpression",s);case an.Operand:return this.expressionFactoryMediator.createExpression("operandExpression",s);case an.Operator:return this.expressionFactoryMediator.createExpression("operatorExpression",s);default:{const d=this.getObjectField(s,"type");throw new Error(`The '${d}' expression type is not supported.`)}}}}class Xs{}class Qa extends Xs{constructor(){super(),this._factories=new Map}registerFactory(s,l){this._factories.set(s,l)}createExpression(s,l){if(this._factories.has(s))return this._factories.get(s).createExpression(l);throw new Error(`Factory for the '${s}' expression is not registered.`)}static{this.\u0275fac=function(l){return new(l||Qa)}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Qa,factory:Qa.\u0275fac,providedIn:"root"})}}class lu{static{this.\u0275fac=function(l){return new(l||lu)}}static{this.\u0275mod=c.\u0275\u0275defineNgModule({type:lu})}static{this.\u0275inj=c.\u0275\u0275defineInjector({providers:[{provide:Xs,useFactory:()=>{const s=new Qa;return s.registerFactory("expression",new pp(s)),s.registerFactory("functionExpression",new cp(s)),s.registerFactory("operandExpression",new Qh(s)),s.registerFactory("columnOperandExpression",new fl(s)),s.registerFactory("aggregationSubQueryOperandExpression",new Kh(s)),s.registerFactory("schemaColumnOperandExpression",new Qs(s)),s.registerFactory("subQueryOperandExpression",new Zi(s)),s.registerFactory("constantOperandExpression",new vn(s)),s.registerFactory("sysSettingOperandExpression",new yl(s)),s.registerFactory("sysSettingOperandExpression",new up(s)),s.registerFactory("operatorExpression",new ru(s)),s.registerFactory("arithmeticOperatorExpression",new Yy(s)),s.registerFactory("parenthesesOperatorExpression",new dp(s)),s.registerFactory("relationOperatorExpression",new ou(s)),s.registerFactory("ternaryOperatorExpression",new Qy(s)),s}}]})}}(0,v.generateGuid)();var Qr;!function(g){g[g.Busy=0]="Busy",g[g.Idle=1]="Idle"}(Qr||(Qr={}));var _l;b(72260);!function(g){g.ReadyStateChange="readystatechange"}(_l||(_l={}));class mp{constructor(s){this._trackedTasks=[],this._trackedEventTasks=[],this._enableDebugTracking=!1,this._disableWaits=!1,this._pendingFunctions=new Map,this.onStateChange$=new c.EventEmitter(!1),this._parentZone=Zone.current,this._rootZone=Zone.root,this._isBusy=!1,this._ignoredTaskSources=["setInterval","requestAnimationFrame"],this._eventTaskFilters=[l=>l.source.startsWith("XMLHttpRequest")&&l.source.endsWith(_l.ReadyStateChange)],this._zone=this._parentZone.fork({name:s,properties:{currentExecutionZone:this},onInvokeTask:this._onInvokeTask.bind(this),onCancelTask:this._onCancelTask.bind(this),onScheduleTask:this._onScheduleTask.bind(this),onHasTask:this._onHasTask.bind(this)})}wait(s){if(this._disableWaits)return s();this._isBusy||(this._isBusy=!0,this.onStateChange$.next(Qr.Busy));const l=(0,v.generateGuid)();return this._pendingFunctions.set(l,this._enableDebugTracking?s:null),s().finally(()=>{this._pendingFunctions.delete(l),!this._pendingFunctions.size&&this._zone.run(()=>new Promise(d=>setTimeout(d)))}).catch(d=>{throw d})}_cancelXMLHttpRequestReadyStateChangeTaskOnRequestComplete(s,l){if("eventTask"===s.type&&("running"===s.state||"scheduled"===s.state)){const d=s;d.eventName===_l.ReadyStateChange&&d.target.readyState===XMLHttpRequest.DONE&&l.cancelTask(d)}}_onInvokeTask(s,l,d,C,D,N){let q;this._unTrackTask(C);try{q=s.invokeTask(d,C,D,N),this._cancelXMLHttpRequestReadyStateChangeTaskOnRequestComplete(C,l)}catch(J){console.error(J),l.cancelTask(C)}return q}_onCancelTask(s,l,d,C){return this._unTrackTask(C),s.zone.runGuarded(()=>s.cancelTask(d,C))}_onScheduleTask(s,l,d,C){return this._getCanScheduleTask(C)?(this._trackTask(C),s.scheduleTask(d,C)):(C.cancelScheduleRequest(),this._parentZone.scheduleTask(C))}_onHasTask(s,l,d,C){s.hasTask(d,C);const D=C.eventTask||C.macroTask||C.microTask||this._pendingFunctions.size>0;this._isBusy!==D&&(this._rootZone.run(()=>this.onStateChange$.next(D?Qr.Busy:Qr.Idle)),this._isBusy=D)}_trackTask(s){this._enableDebugTracking&&("eventTask"===s.type&&this._trackedEventTasks.push(s),this._trackedTasks.push(s))}_unTrackTask(s){if(!this._enableDebugTracking)return;const l=this._trackedTasks.indexOf(s);l>-1&&this._trackedTasks.splice(l,1)}_getCanScheduleTask(s){return"eventTask"===s.type?this._eventTaskFilters.some(l=>l(s)):-1===this._ignoredTaskSources.indexOf(s.source)}run(s,l,d){return this._zone.run(s,l,d)}}function In(g,s,l){if(!g)return null;let d=g.find(C=>s(C));return d||(g.forEach(C=>{d||(d=In(l(C),s,l))}),d)}function bt(g,s,l){if(!g)return null;let d=s(g);return d||(g.forEach(C=>{d||(d=bt(l(C),s,l))}),d)}class Ze{static{this.\u0275fac=function(l){return new(l||Ze)}}static{this.\u0275mod=c.\u0275\u0275defineNgModule({type:Ze})}static{this.\u0275inj=c.\u0275\u0275defineInjector({})}}class Cl{static{this.\u0275fac=function(l){return new(l||Cl)}}static{this.\u0275mod=c.\u0275\u0275defineNgModule({type:Cl})}static{this.\u0275inj=c.\u0275\u0275defineInjector({})}}class bl{static{this.\u0275fac=function(l){return new(l||bl)}}static{this.\u0275mod=c.\u0275\u0275defineNgModule({type:bl})}static{this.\u0275inj=c.\u0275\u0275defineInjector({})}}class Sl{static{this.\u0275fac=function(l){return new(l||Sl)}}static{this.\u0275mod=c.\u0275\u0275defineNgModule({type:Sl})}static{this.\u0275inj=c.\u0275\u0275defineInjector({})}}class er extends I.NS{constructor(s){super(),this._dateTimeFormat=s}_castToDateTimeFormat(s){const l=s.format;if(!l)return s;const d=l.split(" ").length>=2;return{type:s.type,date:{display:!0},time:{display:d}}}_getDateTimeFormatMoment(s){let l="";const{shortDatePattern:d,shortTimePattern:C}=this._dateTimeFormat??{};if(!d&&!C)return"M/D/YYYY";const{date:D,time:N}=s??{},{display:q=!1}=D??{},{display:J=!1}=N??{};return q&&(l+=d),J&&(l+=` ${C}`),l.trim()}handle(s){const{dateTimeFormat:l,handledMomentFormat:d}=s,C=this._castToDateTimeFormat(l),D=this._getDateTimeFormatMoment(C);this.format=C?.date?.format;let N=this.internalHandler(d??D);if(N!==D){const q=new RegExp(`^\\${this._dateTimeFormat.dateSeparator}+`),J=new RegExp(`\\${this._dateTimeFormat.dateSeparator}+$`),pe=new RegExp(`\\${this._dateTimeFormat.dateSeparator}{2,}`,"g");N=N.replace(q,"").replace(J,"").replace(pe,this._dateTimeFormat.dateSeparator)}return s.handledMomentFormat=N,super.handle(s)??N}static{this.\u0275fac=function(l){return new(l||er)(c.\u0275\u0275inject(ol))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:er,factory:er.\u0275fac,providedIn:"root"})}}class Xa extends I.NS{handle(s){return"hour"===s?.dateTimeFormat?.time?.format?"H":super.handle(s)}static{this.\u0275fac=(()=>{let s;return function(d){return(s||(s=c.\u0275\u0275getInheritedFactory(Xa)))(d||Xa)}})()}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Xa,factory:Xa.\u0275fac,providedIn:"root"})}}class Xr extends I.NS{handle(s){return"week"===s.dateTimeFormat?.date?.format?"W":super.handle(s)}static{this.\u0275fac=(()=>{let s;return function(d){return(s||(s=c.\u0275\u0275getInheritedFactory(Xr)))(d||Xr)}})()}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Xr,factory:Xr.\u0275fac,providedIn:"root"})}}class ba extends er{internalHandler(s){return this.format&&!this.format.has("days")?s.replace(/D/g,""):s}static{this.\u0275fac=(()=>{let s;return function(d){return(s||(s=c.\u0275\u0275getInheritedFactory(ba)))(d||ba)}})()}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:ba,factory:ba.\u0275fac,providedIn:"root"})}}class Sa extends er{internalHandler(s){return this.format&&!this.format?.has("years")?s.replace(/Y/g,""):s}static{this.\u0275fac=(()=>{let s;return function(d){return(s||(s=c.\u0275\u0275getInheritedFactory(Sa)))(d||Sa)}})()}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Sa,factory:Sa.\u0275fac,providedIn:"root"})}}class va extends er{internalHandler(s){return this.format&&!this.format?.has("months")?s.replace(/M/g,""):s}static{this.\u0275fac=(()=>{let s;return function(d){return(s||(s=c.\u0275\u0275getInheritedFactory(va)))(d||va)}})()}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:va,factory:va.\u0275fac,providedIn:"root"})}}const eo=new c.InjectionToken("Represents the moment date time format",{factory:()=>{const g=(0,c.inject)(Xr),s=(0,c.inject)(Xa),l=(0,c.inject)(ba),d=(0,c.inject)(va),C=(0,c.inject)(Sa);return{getFormat:D=>(g.setNext(s).setNext(l).setNext(d).setNext(C),g.handle({dateTimeFormat:D}))}},providedIn:"root"});class tr{}class Ia extends tr{constructor(s){super(),this._momentDateTimeFormatter=s}format(s,l){if(!s)return"";const d=new Date(s);if(isNaN(d))return"";const C=this._momentDateTimeFormatter.getFormat(l);return Bh()(d).format(C)}static{this.\u0275fac=function(l){return new(l||Ia)(c.\u0275\u0275inject(eo))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Ia,factory:Ia.\u0275fac,providedIn:"root"})}}const uu=new Map([["default",{ADD_TAGS:["#comment","signature"],FORCE_BODY:!0}],["textOnly",{ALLOWED_TAGS:["#text"],FORBID_CONTENTS:I.G8}]]);class es extends tr{constructor(s){super(),this._domPurifier=s,this._defaultFormat={type:"sanitizeHtml",mode:"default"},this._sanitizationConfigsByMode=uu}_sanitizeHtml(s,l){const d=l.mode??"default",C=this._sanitizationConfigsByMode.get(d);return this._domPurifier.sanitize(s,C).toString()}format(s,l){return s?this._sanitizeHtml(s,l??this._defaultFormat):""}static{this.\u0275fac=function(l){return new(l||es)(c.\u0275\u0275inject(I.MV))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:es,factory:es.\u0275fac,providedIn:"root"})}}var tg=b(88569),a_=b(63547),gp=b(99959),ts=b.n(gp);class nr{constructor(s){this._userInfo=s}_adjustDecimalPrecision(s){return null==s||(s=parseInt(`${s}`,10),isNaN(s))?null:(s=Math.min(s,20),s=Math.max(s,0))}_adjustDecimalSeparator(s){const l=this._userInfo?.cultureInfo?.decimalSeparator;return"string"==typeof l?l:s||"."}_adjustThousandSeparator(s){const l=this._userInfo?.cultureInfo?.thousandSeparator;return"string"==typeof l?l:s||""}adjust(s){const{decimalPrecision:l,decimalSeparator:d,thousandSeparator:C,thousandAbbreviation:D,trimTrailingZeros:N}=s||{};return{type:"number",decimalPrecision:this._adjustDecimalPrecision(l),decimalSeparator:this._adjustDecimalSeparator(d),trimTrailingZeros:N??!1,thousandSeparator:this._adjustThousandSeparator(C),thousandAbbreviation:{enabled:!0===D?.enabled}}}static{this.\u0275fac=function(l){return new(l||nr)(c.\u0275\u0275inject(de,8))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:nr,factory:nr.\u0275fac,providedIn:"root"})}}const du="#DECIMAL_SEPARATOR#",qt="#THOUSAND_SEPARATOR#";class is extends tr{constructor(s){super(),this._formatAdjuster=s}_isNaN(s){const l=parseFloat(s);return isNaN(l)}_createNumeralFormat(s,l){const[C,D]=s.split("."),N=Math.abs(parseInt(C,10))>=1e3,q=!!l.thousandAbbreviation?.enabled;if(N&&q)return"0,0a.[0]";const J=this._getFractionLength(D,l);return`0,0.${"0".repeat(J)}`}_getFractionLength(s,l){if(!l.trimTrailingZeros)return l.decimalPrecision??s?.length??0;const d=(0,tg.A)(s,"0");return(0,a_.A)(l.decimalPrecision)?d.length:Math.min(d.length,l.decimalPrecision)}_replaceSeparators(s,l){const{decimalSeparator:d,thousandSeparator:C}=l,D=[{searchValue:".",replaceMacros:du,replaceValue:d},{searchValue:",",replaceMacros:qt,replaceValue:C}];return(0,I.mh)(s,D)}_undoReplaceSeparators(s,l){const{decimalSeparator:d,thousandSeparator:C}=l,D=[{searchValue:d,replaceMacros:du,replaceValue:"."},{searchValue:C,replaceMacros:qt,replaceValue:""}];return(0,I.mh)(s,D)}format(s,l){if(this._isNaN(s))return"";l||(l={type:"number"});const d=this._formatAdjuster.adjust(l),C=this._createNumeralFormat(s,d),D=ts()(s).format(C);return this._isNaN(D)?"":this._replaceSeparators(D,d)}undoFormat(s,l){if(this._isNaN(s))return"";l||(l={type:"number"});const d=this._formatAdjuster.adjust(l);return this._undoReplaceSeparators(s,d)}static{this.\u0275fac=function(l){return new(l||is)(c.\u0275\u0275inject(nr))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:is,factory:is.\u0275fac,providedIn:"root"})}}const vl={type:"string",wordSeparator:" ",wordConnector:" ",maxLinesCount:-1,maxLineLength:-1};class Tn extends tr{_fillInFormat(s){const{maxLinesCount:l,maxLineLength:d,wordSeparator:C,wordConnector:D}=vl;return{type:"string",maxLinesCount:s?.maxLinesCount??l,maxLineLength:s?.maxLineLength??d,wordSeparator:s?.wordSeparator??C,wordConnector:s?.wordConnector??D}}_splitTextToWords(s,l){return s.split(l).map(d=>d.trim()).filter(d=>""!==d)}_wrapWordsToLines(s,l){const d=[];for(;s.length>0;){const C=s.shift(),D=this._getLinesState(d,l);if(this._canAddWordIntoLine(C,D)){this._addWordToLine(C,d);continue}if(this._canAddWordIntoNextLine(C,s,D)){d.push([]),s.unshift(C);continue}const{remainderLineLength:N}=D;if(!this._canBreakWordIntoSyllables(D)){this._canTruncateWordWithEllipsis(D)?this._truncateWordWithEllipsis(C,d,N):this._addWordToLine("...",d);break}{const q=this._breakWordIntoSyllables(C,d,N);d.push([]),s.unshift(q)}}return d}_getLinesState(s,l){let{maxLinesCount:d,maxLineLength:C}=l;d<-1&&(d=-1),C<-1&&(C=-1);const D=s.length,N=D>0?s[D-1]:[],q=this._getTotalWordsLength(N);return{maxLineLength:C,maxLinesCount:d,currentLinesCount:D,remainderLineLength:-1===C?-1:C-q,remainderLinesCount:-1===d?-1:d-D}}_getTotalWordsLength(s){return s.reduce((l,d)=>l+d.length,0)}_canAddWordIntoLine(s,l){const{remainderLineLength:d}=l;return s.length<=d||-1===d}_canAddWordIntoNextLine(s,l,d){const{maxLineLength:C,remainderLineLength:D,remainderLinesCount:N}=d;if(0===N)return!1;if(-1===N)return!0;const q=s.length;if(q<4||D<2)return!0;if(q>C)return!1;return this._getTotalWordsLength(l)<=(N-1)*C}_canBreakWordIntoSyllables(s){const{remainderLinesCount:l,remainderLineLength:d}=s;return(-1===l||l>0)&&d>=2}_canTruncateWordWithEllipsis(s){return s.remainderLineLength>0}_addWordToLine(s,l){const d=l.pop()??[];d.push(s),l.push(d)}_breakWordIntoSyllables(s,l,d){const C=s.length;C-d==1&&d--;const N=s.substring(0,d),q=s.substring(d,C);return this._addWordToLine(N+"-",l),q}_truncateWordWithEllipsis(s,l,d){const C=s.substring(0,d);1===C.length?this._addWordToLine("...",l):this._addWordToLine(C+"...",l)}format(s,l){if("string"!=typeof s)return[];l=this._fillInFormat(l);const d=this._splitTextToWords(s,l.wordSeparator);return this._wrapWordsToLines(d,l).map(D=>D.join(l.wordConnector))}static{this.\u0275fac=(()=>{let s;return function(d){return(s||(s=c.\u0275\u0275getInheritedFactory(Tn)))(d||Tn)}})()}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Tn,factory:Tn.\u0275fac,providedIn:"root"})}}const ar=new c.InjectionToken("Represents a datetime data formatter",{factory:()=>new Ia((0,c.inject)(eo)),providedIn:"root"}),as=new c.InjectionToken("Represents a default data formatter",{factory:()=>new Tn,providedIn:"root"}),sr=new c.InjectionToken("Represents a sanitize html formatter",{factory:()=>new es((0,c.inject)(I.MV)),providedIn:"root"}),pu=new c.InjectionToken("Represents a number data formatter",{factory:()=>(0,c.inject)(is),providedIn:"root"}),mu=new c.InjectionToken("Represents a registration map of formatters",{factory:()=>new Map([["string",Tn],["number",is],["datetime",Ia]]),providedIn:"root"});class ss{constructor(s,l,d){this._injector=s,this._defaultFormatter=l,this._formattersMap=d}_getFormatterByType(s){const{type:l}=s;if(this._formattersMap.has(l)){const d=this._formattersMap.get(l);return this._injector.get(d)}}_getFormatterByPredicat(s){for(const[l,d]of this._formattersMap)if("function"==typeof l&&l(s))return this._injector.get(d)}resolveFormatter(s){return s?this._getFormatterByType(s)??this._getFormatterByPredicat(s)??this._defaultFormatter:this._defaultFormatter}static{this.\u0275fac=function(l){return new(l||ss)(c.\u0275\u0275inject(c.Injector),c.\u0275\u0275inject(as),c.\u0275\u0275inject(mu))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:ss,factory:ss.\u0275fac,providedIn:"root"})}}var hu=b(9461);class Il{constructor(s){this._formatter=s}getValue(s){return s.toString()}getFormat(s){if(!s)return this.defaultFormat;const l=this.getFormatByDataType(s.dataType);return l?(0,Kt.A)({},l,s):{type:this.defaultFormat?.type,...(0,hu.A)(s,"dataType")}}getFormatByDataType(s){return s&&this.formatsByDataTypeMap.get(s)}isSupportedValue(s){return"string"==typeof s}transform(s,l){if(!this.isSupportedValue(s))return"";const d=this.getValue(s),C=this.getFormat(l);return this._formatter.format(d,C)}}const gu=new Map([[v.DataValueType.Date,{type:"datetime",date:{display:!0}}],[v.DataValueType.DateTime,{type:"datetime",date:{display:!0},time:{display:!0}}],[v.DataValueType.Time,{type:"datetime",date:{display:!1},time:{display:!0}}]]);class rs extends Il{constructor(s){super(s),this.defaultFormat={type:"datetime",date:{display:!0}},this.formatsByDataTypeMap=gu}getValue(s){return"number"==typeof s&&(s=new Date(s)),s.toString()}isSupportedValue(s){return super.isSupportedValue(s)||"number"==typeof s||s instanceof Date}transform(s,l){return""===s?"":super.transform(s,l)}static{this.\u0275fac=function(l){return new(l||rs)(c.\u0275\u0275directiveInject(ar,16))}}static{this.\u0275pipe=c.\u0275\u0275definePipe({name:"dateTimeFormat",type:rs,pure:!0})}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:rs,factory:rs.\u0275fac,providedIn:"root"})}}const fu=new Map($n.map(g=>[g,ng(g)]));function ng(g){return{type:"number",decimalPrecision:vs.get(g)}}class os extends Il{constructor(s){super(s),this.defaultFormat={type:"number"},this.formatsByDataTypeMap=fu}isSupportedValue(s){return super.isSupportedValue(s)||"number"==typeof s}static{this.\u0275fac=function(l){return new(l||os)(c.\u0275\u0275directiveInject(pu,16))}}static{this.\u0275pipe=c.\u0275\u0275definePipe({name:"numberFormat",type:os,pure:!0})}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:os,factory:os.\u0275fac,providedIn:"root"})}}class ro{constructor(s){this._injector=s,this._unitNames=["Byte","Kilobyte","Megabyte","Gigabyte"],this._thresh=1024}_roundNumber(s,l=1){const d=10**l;return Math.round((s+Number.EPSILON)*d)/d}_evalLevel(s){return s<this._thresh?0:Math.floor(Math.log(s)/Math.log(this._thresh))}_getUnits(s,l){const d=l&&0===s&&[2,3,4].includes(l%10)&&![12,13,14].includes(l%100)?"s":"",C=this._unitNames[s]+d;return" "+this._injector.get(W.c$).instant("FileSizeUnit."+C)}transform(s,l){if("number"!=typeof s)return"string"==typeof s?s:"";let d=l?this._unitNames.indexOf(l):-1;if(-1===d&&(d=this._evalLevel(s)),s<=0)return 0+this._getUnits(d);const C=d>0?this._roundNumber(s/Math.pow(this._thresh,d)):s;return this._injector.get(os).transform(C)+this._getUnits(d,C)}static{this.\u0275fac=function(l){return new(l||ro)(c.\u0275\u0275directiveInject(c.Injector,16))}}static{this.\u0275pipe=c.\u0275\u0275definePipe({name:"memoryFormat",type:ro,pure:!0})}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:ro,factory:ro.\u0275fac,providedIn:"root"})}}var _p=b(79716);class Dn{transform(s){return(0,_p.decode)(s)}static{this.\u0275fac=function(l){return new(l||Dn)}}static{this.\u0275pipe=c.\u0275\u0275definePipe({name:"decodeHtml",type:Dn,pure:!0,standalone:!0})}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Dn,factory:Dn.\u0275fac,providedIn:"root"})}}class bi{transform(s){return(0,_p.encode)(s)}static{this.\u0275fac=function(l){return new(l||bi)}}static{this.\u0275pipe=c.\u0275\u0275definePipe({name:"encodeHtml",type:bi,pure:!0,standalone:!0})}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:bi,factory:bi.\u0275fac,providedIn:"root"})}}class Tl{transform(s,l){return Wc(s,l)}static{this.\u0275fac=function(l){return new(l||Tl)}}static{this.\u0275pipe=c.\u0275\u0275definePipe({name:"stringFormat",type:Tl,pure:!0,standalone:!0})}}class rr{constructor(s){this._resourceFinderService=s}transform(s){return this._resourceFinderService.findLocalizableValue(s)}static{this.\u0275fac=function(l){return new(l||rr)(c.\u0275\u0275directiveInject(ce,16))}}static{this.\u0275pipe=c.\u0275\u0275definePipe({name:"lczToString",type:rr,pure:!0})}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:rr,factory:rr.\u0275fac,providedIn:"root"})}}class Ta{static{this.\u0275fac=function(l){return new(l||Ta)}}static{this.\u0275mod=c.\u0275\u0275defineNgModule({type:Ta})}static{this.\u0275inj=c.\u0275\u0275defineInjector({})}}class oo{constructor(s){this._sanitizer=s}transform(s,l){switch(l){case"html":default:return this._sanitizer.bypassSecurityTrustHtml(s);case"style":return this._sanitizer.bypassSecurityTrustStyle(s);case"script":return this._sanitizer.bypassSecurityTrustScript(s);case"url":return this._sanitizer.bypassSecurityTrustUrl(s);case"resourceUrl":return this._sanitizer.bypassSecurityTrustResourceUrl(s)}}static{this.\u0275fac=function(l){return new(l||oo)(c.\u0275\u0275directiveInject(Ur.DomSanitizer,16))}}static{this.\u0275pipe=c.\u0275\u0275definePipe({name:"bypassSecurityTrust",type:oo,pure:!0})}}class Cp{static{this.\u0275fac=function(l){return new(l||Cp)}}static{this.\u0275mod=c.\u0275\u0275defineNgModule({type:Cp})}static{this.\u0275inj=c.\u0275\u0275defineInjector({})}}const lo_macrosHandler=function(g,s){if(!g)throw new Error("Context is not defined");if(!g.Resources?.Strings)throw new Error("Context does not contain property Resources.Strings");const l=g.Resources.Strings[s[0]];return l instanceof Promise?(0,_.from)(l):(0,_.of)(l)};function yu(g){return{macrosName:"ResourceString",macrosHandler:function(s,l){if(s?.strings){for(const d of l){const C=s.strings[d];if(C)return(0,_.of)(g.findLocalizableValue(C))}throw new Error(`Localized resource string not found. ${l}`)}if(s?.Strings){for(const d of l){const C=s.Strings[d];if(C)return(0,_.from)(C)}throw new Error(`Localized string in ViewModel metadata not found. ${l}`)}return lo_macrosHandler(s,l)}}}function ls(g=!1){return{macrosName:"DataSourceEntityName",macrosHandler:(s,l)=>{if(!s)throw new Error("Context is not defined");let C,d=l[0];if(g)C="BaseViewModel"===s.constructor.name?s.dataSchemas?.[d]?.dataSourceConfig?.config?.entitySchemaName:s.modelConfig?.dataSources?.[d]?.config?.entitySchemaName;else{d||(d=s.modelConfig.primaryDataSourceName);const D=s.modelConfig.dataSources?.[d];if(!D)throw new Error(`DataSource '${d}' is not defined`);C=D.config.entitySchemaName}return(0,_.of)(C)}}}function or(g,s=!1){return{macrosName:"MacrosTemplateString",macrosHandler:(l,d)=>{const C=d.join(", "),D=/\[#([^\]]*)#\]/.test(C);return s||!D?(0,_.of)(C):g.getTemplate(C)}}}const Si=new c.InjectionToken("MACROS_HANDLER");class Da{constructor(s,l,d){this.handlers=s,this._featureValues=l,this._applicationInfo=d}get _includeProcessedHandlers(){return!!this._featureValues?.IncludeProcessedMacrosHandlers}_findClosingBracket(s,l){let d=l,C=1;for(;C>0&&d<s.length;){const D=s[++d];"("===D?C++:")"===D&&C--}return d}_getMacroses(s){const l=new Array;let d=s.indexOf("#");for(;d>=0;){const C=s.indexOf("(",d);if(C<0)return l;const D=this._findClosingBracket(s,C),N=s.indexOf("#",D);if(N<0)return l;l.push({macrosName:s.substring(d+1,C),macrosArgs:s.substring(C+1,D),macrosBody:s.substring(d,N+1)}),d=s.indexOf("#",N+1)}return l}_processMacroses({macroses:s,macrosNameFilter:l,context:d,options:C,value:D}){let N={...D};return(0,_.forkJoin)({...s.map(({macrosName:J,macrosArgs:pe,macrosBody:De})=>{if((J=>!(!l||l===J||-1!==l.split(",").indexOf(J)))(J))return(0,_.of)(null);const qe=this.getHandler(J);return qe?this.internalHandle(pe,d,l,C).pipe((0,lt.n)(Gn=>{const ti=qe(d,`${Gn.value}`.split(",").map(kt=>kt.trim()));return(ti instanceof _.Observable?ti:(0,_.of)(ti)).pipe((0,z.W)(kt=>(this._applicationInfo.isDebugEnabled&&console.warn(kt),(0,_.of)(De))),(0,ue.M)(kt=>{const Tp="number"==typeof kt?kt:kt||"";N={isChanged:!0,value:N.value.replace(De,Tp)}}))}),(0,z.W)(Gn=>(C&&C.errorHandler?C.errorHandler(Gn):this._applicationInfo.isDebugEnabled&&console.warn(Gn),(0,_.of)(De)))):(0,_.of)(null)}),default:(0,_.of)(null)}).pipe((0,A.T)(()=>N))}_forEachStringInObject(s,l,d=[],C=[]){if(!(s instanceof Object))return;const D=q=>!d.includes(q),N=(q,J)=>{"string"==typeof q?l(C.concat(J),q):"object"==typeof q&&null!==q&&(C.push(J),this._forEachStringInObject(q,l,d,C),C.pop())};if(s instanceof Map)for(const q of Array.from(s.keys()).filter(D))N(s.get(q),q);else Object.keys(s).filter(D).forEach(q=>{N(s[q],q)})}_set(s,l,d){const C=l.slice(),D=C.pop(),N=0===C.length?s:nl(s,C);N&&(N[D]=d)}getHandler(s){return this.handlers.filter(l=>l.macrosName===s).pop()?.macrosHandler}internalHandle(s,l,d,C){const D={value:s,isChanged:!1};return(0,_.of)(D).pipe((0,lt.n)(q=>{if("string"!=typeof s)return(0,_.of)(q);const J=this._getMacroses(s);return J.length?this._processMacroses({macroses:J,macrosNameFilter:d,context:l,options:C,value:D}):(0,_.of)(q)}))}handle(s,l){const d=(0,Q.A)(s);return(0,_.forkJoin)([...(0,v.objectDeepKeys)(d).map(C=>{const D=(0,_t.A)(d,C);return this.internalHandle(D,l).pipe((0,ue.M)(({value:N})=>{(0,Li.A)(d,C,N)}))}),(0,_.of)(null)]).pipe((0,A.T)(()=>d))}handleMarcos(...s){return this.handleMacros.call(this,...s)}handleResourceMacros(s,l,d){return this.handleMacros("MacrosTemplateString,ResourceString",(0,Q.A)(s),l,d)}handleMacros(s,l,d,C){const D=[(0,_.of)(null)];return this._forEachStringInObject(l,(N,q)=>{const J=this._getMacroses(q);if(!J.length)return;const pe=this._processMacroses({macroses:J,context:d,options:C,macrosNameFilter:s,value:{isChanged:!1,value:q}}).pipe((0,ue.M)(De=>{!1!==De.isChanged&&(C?.setPropertyFn?C.setPropertyFn({source:l,keys:N,value:De.value}):this._set(l,N,De.value))}));D.push(pe)},this._includeProcessedHandlers?[]:["__preprocessed"]),(0,_.forkJoin)(D).pipe((0,A.T)(()=>l))}static{this.\u0275fac=function(l){return new(l||Da)(c.\u0275\u0275inject(Si),c.\u0275\u0275inject(rt,8),c.\u0275\u0275inject(h))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Da,factory:Da.\u0275fac})}}class co{static{this.\u0275fac=function(l){return new(l||co)}}static{this.\u0275mod=c.\u0275\u0275defineNgModule({type:co})}static{this.\u0275inj=c.\u0275\u0275defineInjector({providers:[Da,{provide:Si,useFactory:yu,deps:[ce],multi:!0},{provide:Si,useFactory:ls,deps:[[new c.Optional,Kn]],multi:!0},{provide:Si,useFactory:or,deps:[Mt,[new c.Optional,Kn]],multi:!0}],imports:[We.CommonModule]})}}b(71679);class Ki{constructor(s){this._macrosHandlerService=s}transform(s,l,d){return l?this._macrosHandlerService.handleResourceMacros(s,l).pipe((0,A.T)(C=>C[d])):null}static{this.\u0275fac=function(l){return new(l||Ki)(c.\u0275\u0275directiveInject(Da,16))}}static{this.\u0275pipe=c.\u0275\u0275definePipe({name:"handleResourceMacros",type:Ki,pure:!0})}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Ki,factory:Ki.\u0275fac,providedIn:"root"})}}class cs{constructor(s){this._emptyPlaceholderCreatorFactory=s}transform(s,l){return null==s||""===s?this._emptyPlaceholderCreatorFactory?.create(l)?.create(l)??"":s}static{this.\u0275fac=function(l){return new(l||cs)(c.\u0275\u0275directiveInject(Vc,16))}}static{this.\u0275pipe=c.\u0275\u0275definePipe({name:"toEmptyPlaceholder",type:cs,pure:!0})}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:cs,factory:cs.\u0275fac})}}class wl{static{this.\u0275fac=function(l){return new(l||wl)}}static{this.\u0275mod=c.\u0275\u0275defineNgModule({type:wl})}static{this.\u0275inj=c.\u0275\u0275defineInjector({providers:[cs,On,ht,Fo]})}}class Ma{constructor(s){this._domSanitizer=s}transform(s){return this._domSanitizer.bypassSecurityTrustResourceUrl(s)}static{this.\u0275fac=function(l){return new(l||Ma)(c.\u0275\u0275directiveInject(Ur.DomSanitizer,16))}}static{this.\u0275pipe=c.\u0275\u0275definePipe({name:"safeUrl",type:Ma,pure:!0})}}class _u{static{this.\u0275fac=function(l){return new(l||_u)}}static{this.\u0275mod=c.\u0275\u0275defineNgModule({type:_u})}static{this.\u0275inj=c.\u0275\u0275defineInjector({})}}class Bn{constructor(s){this._translate=s}transform(s){if(!s?.value)return null;const l=s?.displayValue||null;return s&&pt.Qf.isNullOrWhiteSpace(l)?this._translate.instant("LookupFormat.EmptyDisplayValue"):l}static{this.\u0275fac=function(l){return new(l||Bn)(c.\u0275\u0275directiveInject(W.c$,16))}}static{this.\u0275pipe=c.\u0275\u0275definePipe({name:"lookupFormat",type:Bn,pure:!0})}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Bn,factory:Bn.\u0275fac,providedIn:"root"})}}class ei extends Il{constructor(s){super(s),this.defaultFormat={type:"sanitizeHtml"},this.formatsByDataTypeMap=new Map([])}isSupportedValue(s){return super.isSupportedValue(s)||"number"==typeof s||"boolean"==typeof s||"bigint"==typeof s||"symbol"==typeof s||s instanceof Date}static{this.\u0275fac=function(l){return new(l||ei)(c.\u0275\u0275directiveInject(sr,16))}}static{this.\u0275pipe=c.\u0275\u0275definePipe({name:"sanitizeHtml",type:ei,pure:!0})}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:ei,factory:ei.\u0275fac,providedIn:"root"})}}class Mn{constructor(s){this._injector=s}_sanitizeText(s,l){const d=this._injector.get(Dn),C=this._injector.get(ei);return s=d.transform(s),s=C.transform(s,{mode:"textOnly",dataType:l}),s=d.transform(s)}transform(s,l){const{dataType:d}=l??{};return $n.includes(d)?this._injector.get(os).transform(s,l):d===v.DataValueType.Lookup?this._injector.get(Bn).transform(s):Pc.includes(d)?this._injector.get(rs).transform(s,l):d===v.DataValueType.IMAGELOOKUP?"":"string"==typeof s?this._sanitizeText(s,d):s?.toString()}static{this.\u0275fac=function(l){return new(l||Mn)(c.\u0275\u0275directiveInject(c.Injector,16))}}static{this.\u0275pipe=c.\u0275\u0275definePipe({name:"valueFormat",type:Mn,pure:!0})}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Mn,factory:Mn.\u0275fac,providedIn:"root"})}}class El{constructor(s){this._injector=s,this._translationPrefix="SmartDateTimeFormat"}_getTranslationTemplate(s,l){const d=new Date;if(d.setDate(d.getDate()),d.toDateString()===s.toDateString())return l.instant(`${this._translationPrefix}.TodayAt`);const C=new Date;if(C.setDate(C.getDate()-1),C.toDateString()===s.toDateString())return l.instant(`${this._translationPrefix}.YesterdayAt`);const D=new Date;return D.setDate(D.getDate()-2),D.toDateString()===s.toDateString()?l.instant(`${this._translationPrefix}.DayBeforeYesterdayAt`):null}_canBeDate(s){return"string"==typeof s||"number"==typeof s||s instanceof Date}transform(s){if(this._canBeDate(s)){const l=new Date(s),d=this._injector.get(rs),C=this._injector.get(W.c$),D=this._getTranslationTemplate(l,C),N={dataType:v.DataValueType.Time};if(D)return pt.Qf.format(D,d.transform(l,N));{const q=C.instant(`${this._translationPrefix}.At`);return`${d.transform(l)} ${q} ${d.transform(l,N)}`}}return""}static{this.\u0275fac=function(l){return new(l||El)(c.\u0275\u0275directiveInject(c.Injector,16))}}static{this.\u0275pipe=c.\u0275\u0275definePipe({name:"smartDateTimeFormat",type:El,pure:!0})}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:El,factory:El.\u0275fac,providedIn:"root"})}}class xl{constructor(s){this._translateService=s,this._minutesInHour=60,this._hoursInDay=24,this._daysInMonth=30,this._milisecondsInMinute=6e4,this._milisecondsInHour=this._milisecondsInMinute*this._minutesInHour,this._milisecondsInDay=this._milisecondsInHour*this._hoursInDay,this._milisecondsInMonth=this._milisecondsInDay*this._daysInMonth,this._translationPrefix="TimerDateTimeFormat",this._monthAbbreviation=this._translateService.instant(`${this._translationPrefix}.MonthAbbreviation`),this._daysAbbreviation=this._translateService.instant(`${this._translationPrefix}.DaysAbbreviation`),this._hoursAbbreviation=this._translateService.instant(`${this._translationPrefix}.HoursAbbreviation`),this._minutesAbbreviation=this._translateService.instant(`${this._translationPrefix}.MinutesAbbreviation`)}_getDisplayValue(s){const l=Math.floor(s/this._milisecondsInMinute),d=Math.floor(s/this._milisecondsInHour),C=Math.floor(s/this._milisecondsInDay),D=Math.floor(s/this._milisecondsInMonth),N="{0}{1} {2}{3}";if(D>0){const J=C%this._daysInMonth;return pt.Qf.format(N,D,this._monthAbbreviation,J,this._daysAbbreviation)}if(C>0){const J=d%this._hoursInDay;return pt.Qf.format(N,C,this._daysAbbreviation,J,this._hoursAbbreviation)}const q=l%this._minutesInHour;return pt.Qf.format(N,d,this._hoursAbbreviation,q,this._minutesAbbreviation)}transform(s){return s?this._getDisplayValue(s):""}static{this.\u0275fac=function(l){return new(l||xl)(c.\u0275\u0275directiveInject(W.c$,16))}}static{this.\u0275pipe=c.\u0275\u0275definePipe({name:"timerDateTimeFormat",type:xl,pure:!0})}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:xl,factory:xl.\u0275fac,providedIn:"root"})}}var ig,bp=b(15103);class Al{constructor(){this._maxMinutesValue=999,this._maxMinutesTemplate="...",this._maxValueForNormalization=10}_getDisplayValue(s){const l=Math.floor(s/bp.Cg);if(l>this._maxMinutesValue)return this._maxMinutesTemplate;const d=Math.floor((s-l*bp.Cg)/bp._m),C=[""];return this._addNormalizedTemplatePart(l,C),this._addTemplatePart(C,"{0}:"),this._addNormalizedTemplatePart(d,C),this._addTemplatePart(C,"{1}"),pt.Qf.format(C.join(""),l,d)}_addTemplatePart(s,l){s.push(l)}_addNormalizedTemplatePart(s,l){s<this._maxValueForNormalization&&l.push("0")}transform(s){return s<0?"":this._getDisplayValue(s)}static{this.\u0275fac=function(l){return new(l||Al)}}static{this.\u0275pipe=c.\u0275\u0275definePipe({name:"stopwatchDateTimeFormat",type:Al,pure:!0})}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Al,factory:Al.\u0275fac,providedIn:"root"})}}!function(g){g.Date="date",g.DateTime="datetime",g.Time="time"}(ig||(ig={}));class Cu{static _createFormattersRegistrationMap(s){const l=new Map;return(s=s??[]).forEach(({predicat:d,formatter:C})=>{l.set(d,C)}),l}static forRoot(s){const l=s?.default??Tn,d=this._createFormattersRegistrationMap(s?.customs),C=d.values();return{ngModule:Cu,providers:[l,...C,ss,{provide:as,useClass:l},{provide:mu,useValue:d}]}}static{this.\u0275fac=function(l){return new(l||Cu)}}static{this.\u0275mod=c.\u0275\u0275defineNgModule({type:Cu})}static{this.\u0275inj=c.\u0275\u0275defineInjector({})}}function s_(g){switch(g){case"asc":return v.OrderDirection.Asc;case"desc":return v.OrderDirection.Desc;default:return v.OrderDirection.None}}function r_(g){let s=!1;const l=[];return Object.keys(g).forEach(d=>{ag(d,g)&&(s=!0,l.push(d))}),{hasCycles:s,cycledModelsNames:l}}function ag(g,s,l=[]){if(!s[g])return!1;const d=Object.values(s[g]);return!!d.some(D=>l.includes(sg(D)))||(l.push(g),!d.every(D=>!ag(sg(D),s,l)))}function sg(g){return g.relationPath.split(".")[0]}function o_(g){return`${g}_List`}function l_(g){return`${g}_BusinessRule_Filter`}new c.InjectionToken("TRANSLATE_SERVICE_URI");class Rl{constructor(){this._document=(0,c.inject)(We.DOCUMENT),this._window=(0,c.inject)(I.ZP),this._availableMomentLocales=["af","ar-dz","ar-kw","ar-ly","ar-ma","ar-ps","ar-sa","ar-tn","ar","az","be","bg","bm","bn-bd","bn","bo","br","bs","ca","cs","cv","cy","da","de-at","de-ch","de","dv","el","en-au","en-ca","en-gb","en-ie","en-il","en-in","en-nz","en-sg","eo","es-do","es-mx","es-us","es","et","eu","fa","fi","fil","fo","fr-ca","fr-ch","fr","fy","ga","gd","gl","gom-deva","gom-latn","gu","he","hi","hr","hu","hy-am","id","is","it-ch","it","ja","jv","ka","kk","km","kn","ko","ku-kmr","ku","ky","lb","lo","lt","lv","me","mi","mk","ml","mn","mr","ms-my","ms","mt","my","nb","ne","nl-be","nl","nn","oc-lnc","pa-in","pl","pt-br","pt","ro","ru","sd","se","si","sk","sl","sq","sr-cyrl","sr","ss","sv","sw","ta","te","tet","tg","th","tk","tl-ph","tlh","tr","tzl","tzm-latn","tzm","ug-cn","uk","ur","uz-latn","uz","vi","x-pseudo","yo","zh-cn","zh-hk","zh-mo","zh-tw"]}_isDefaultLocale(s){return"en-us"===s||"en"===s}_normalizeLocales(s){const l=s.map(d=>this._normalizeLocale(d));return[...new Set(l)]}_normalizeLocale(s){return s.toLocaleLowerCase().replace("_","-")}_initializeGlobalMoment(){const s=this._window;s.moment=s.moment||b(35025)}_initializeLocalesFiles(s){return Promise.all(s.map(l=>this._initializeLocaleFile(l)))}_initializeLocaleFile(s){const l=this._getLocaleFileName(s);return l?this._loadLocaleFile(l):(console.error("Invalid moment locale: "+s),Promise.resolve())}_getLocaleFileName(s){let l;const d=s.split("-");for(let C=0,D=d.length;C<D;C++){const N=d.join("-");if(-1!==this._availableMomentLocales.indexOf(N)){l=N;break}d.pop()}return l}_loadLocaleFile(s){return new Promise(l=>{const d=this._document.createElement("script");d.src="./moment/locale/"+s+".js",d.type="text/javascript",d.onload=()=>l(),d.onerror=()=>{console.error("Error loading moment locale file: "+s),l()},this._document.head.appendChild(d)})}_getNormalizeAndNotDefaultLocales(s){return(s=this._normalizeLocales(s)).filter(l=>!this._isDefaultLocale(l))}initialize(s){var l=this;return(0,oe.A)(function*(){(0,tn.A)(s)?console.warn("Moment locales are not specified"):(s=l._getNormalizeAndNotDefaultLocales(s),!(0,tn.A)(s)&&(l._initializeGlobalMoment(),yield l._initializeLocalesFiles(s)))})()}setCurrentMomentLocale(s){s&&(this._initializeGlobalMoment(),this._window.moment.locale(s))}static{this.\u0275fac=function(l){return new(l||Rl)}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Rl,factory:Rl.\u0275fac,providedIn:"root"})}}c.APP_INITIALIZER;class rg{get permissions(){return this._permissions}constructor(s){this._permissions=s}hasNotConfiguredPermissionsItems(){return this._permissions.byOperations?.length>0||this._permissions.byRecords?.length>0}}class bu{constructor(s){this._httpClient=s,this._serviceUrl="/rest/SectionService/"}getObjectsWithNotConfiguredPermissionsByEntityName(s){const l=this._serviceUrl+"GetNotAdministratedEntitiesByEntity";return this._httpClient.post(l,{entitySchemaName:s}).pipe((0,_.map)(d=>new rg(d)))}getObjectsWithNotConfiguredPermissionsByPageSchemaUId(s){const l=this._serviceUrl+"GetNotAdministratedEntitiesByPage";return this._httpClient.post(l,{pageSchemaUId:s}).pipe((0,_.map)(d=>new rg(d)))}setConnectedEntitiesAdministratedByEntity(s){const l=this._serviceUrl+"SetConnectedEntitiesAdministratedByEntity";return this._httpClient.post(l,{entitySchemaName:s})}setConnectedEntitiesRightsByPage(s){const l=this._serviceUrl+"SetConnectedEntitiesRightsByPage";return this._httpClient.post(l,{pageSchemaUId:s})}static{this.\u0275fac=function(l){return new(l||bu)(c.\u0275\u0275inject(R.HttpClient))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:bu,factory:bu.\u0275fac,providedIn:"root"})}}class og{handleRequest(s,l={}){let d=s;return d=this.processResponse(l,d),d.pipe((0,z.W)(C=>{let D;return C instanceof Error?D=C.message:("object"==typeof C.error?.errorInfo&&(D=C.error.errorInfo.message),"string"==typeof C.error&&(D=C.error)),D||(D=JSON.stringify(C.message)),this.processErrorMessage(D),(0,_.throwError)(()=>new Error(D))}))}processResponse(s,l){return s.skipUnsuccessfulResponse||(l=l.pipe((0,ue.M)(d=>this.processUnsuccessfulResponse(d)))),l}processUnsuccessfulResponse(s){const{success:l,errorInfo:d}=s||{};!l&&d&&this.processErrorMessage(d.message)}}class d_{}class uo{static{this.dataValueTypeConvertRules={[v.DataValueType.DateTime]:{canConvertTo:[]},[v.DataValueType.Date]:{canConvertTo:[v.DataValueType.DateTime]},[v.DataValueType.Time]:{canConvertTo:[v.DataValueType.DateTime]},[v.DataValueType.SHORT_TEXT]:{canConvertTo:[v.DataValueType.PHONE_TEXT,v.DataValueType.WEB_TEXT,v.DataValueType.EMAIL_TEXT,v.DataValueType.MEDIUM_TEXT,v.DataValueType.LONG_TEXT,v.DataValueType.MAXSIZE_TEXT,v.DataValueType.RICH_TEXT]},[v.DataValueType.PHONE_TEXT]:{canConvertTo:[v.DataValueType.MEDIUM_TEXT,v.DataValueType.LONG_TEXT,v.DataValueType.MAXSIZE_TEXT,v.DataValueType.RICH_TEXT]},[v.DataValueType.WEB_TEXT]:{canConvertTo:[v.DataValueType.MEDIUM_TEXT,v.DataValueType.LONG_TEXT,v.DataValueType.MAXSIZE_TEXT,v.DataValueType.RICH_TEXT]},[v.DataValueType.EMAIL_TEXT]:{canConvertTo:[v.DataValueType.MEDIUM_TEXT,v.DataValueType.LONG_TEXT,v.DataValueType.MAXSIZE_TEXT,v.DataValueType.RICH_TEXT]},[v.DataValueType.MEDIUM_TEXT]:{canConvertTo:[v.DataValueType.LONG_TEXT,v.DataValueType.MAXSIZE_TEXT,v.DataValueType.RICH_TEXT]},[v.DataValueType.LONG_TEXT]:{canConvertTo:[v.DataValueType.MAXSIZE_TEXT,v.DataValueType.RICH_TEXT]},[v.DataValueType.MAXSIZE_TEXT]:{canConvertTo:[v.DataValueType.RICH_TEXT]},[v.DataValueType.Integer]:{canConvertTo:[v.DataValueType.FLOAT1,v.DataValueType.FLOAT2,v.DataValueType.FLOAT3,v.DataValueType.FLOAT4,v.DataValueType.FLOAT8,v.DataValueType.Money]},[v.DataValueType.FLOAT1]:{canConvertTo:[v.DataValueType.FLOAT2,v.DataValueType.FLOAT3,v.DataValueType.FLOAT4,v.DataValueType.FLOAT8,v.DataValueType.Money]},[v.DataValueType.FLOAT2]:{canConvertTo:[v.DataValueType.FLOAT3,v.DataValueType.FLOAT4,v.DataValueType.FLOAT8,v.DataValueType.Money]},[v.DataValueType.FLOAT3]:{canConvertTo:[v.DataValueType.FLOAT4,v.DataValueType.FLOAT8]},[v.DataValueType.FLOAT4]:{canConvertTo:[v.DataValueType.FLOAT8]},[v.DataValueType.FLOAT8]:{canConvertTo:[]},[v.DataValueType.Money]:{canConvertTo:[]}}}static{this._changeColumnDataValueTypeGroup={DateTime:Z.DateTime,Text:uo._removeItems(Z.Text,[v.DataValueType.Text,v.DataValueType.LOCALIZABLE_STRING]),Number:uo._removeItems(Z.Number,[v.DataValueType.Float]),RichText:[v.DataValueType.RICH_TEXT],PhoneText:uo._removeItems(Z.Text,[v.DataValueType.Text,v.DataValueType.SHORT_TEXT,v.DataValueType.LOCALIZABLE_STRING]),EmailText:uo._removeItems(Z.Text,[v.DataValueType.Text,v.DataValueType.SHORT_TEXT,v.DataValueType.LOCALIZABLE_STRING]),WebText:uo._removeItems(Z.Text,[v.DataValueType.Text,v.DataValueType.SHORT_TEXT,v.DataValueType.LOCALIZABLE_STRING])}}static getDateTypeValueGroup(s){let l;switch(s){case v.DataValueType.Date:case v.DataValueType.Time:case v.DataValueType.DateTime:l=this._changeColumnDataValueTypeGroup.DateTime;break;case v.DataValueType.PHONE_TEXT:l=this._changeColumnDataValueTypeGroup.PhoneText;break;case v.DataValueType.WEB_TEXT:l=this._changeColumnDataValueTypeGroup.WebText;break;case v.DataValueType.EMAIL_TEXT:l=this._changeColumnDataValueTypeGroup.EmailText;break;case v.DataValueType.Text:case v.DataValueType.SHORT_TEXT:case v.DataValueType.MEDIUM_TEXT:case v.DataValueType.LONG_TEXT:case v.DataValueType.MAXSIZE_TEXT:l=this._changeColumnDataValueTypeGroup.Text;break;case v.DataValueType.RICH_TEXT:l=this._changeColumnDataValueTypeGroup.RichText;break;case v.DataValueType.Integer:case v.DataValueType.FLOAT1:case v.DataValueType.FLOAT2:case v.DataValueType.FLOAT3:case v.DataValueType.FLOAT4:case v.DataValueType.FLOAT8:case v.DataValueType.Money:l=this._changeColumnDataValueTypeGroup.Number;break;default:l=[]}return l.map(d=>j[d])}static _removeItems(s,l){const d=[...s];return l.forEach(C=>{const D=d.indexOf(C);D>-1&&d.splice(D,1)}),d}static getAllowedChangeTypes(s){return this.getDateTypeValueGroup(s).filter(({type:d})=>d!==s)}static isPrecisionLost(s,l){return s!==l&&!this.dataValueTypeConvertRules[s]?.canConvertTo.includes(l)}}class Pl{createObserver(s,l,d){return new p_(s,l,d)}static{this.\u0275fac=function(l){return new(l||Pl)}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Pl,factory:Pl.\u0275fac,providedIn:"root"})}}class p_{constructor(s,l,d){if(this._bottomBuffer=100,this._lastScrollMaxPosition=0,this._emitter=new c.EventEmitter,v.ValidationUtilities.checkArgumentEmpty("element",s),this._element=s,this._subscribeOnScroll(),d){if(d<=0)throw new Error(`Value of 'bottomBuffer' paramter must be positive, but actual value is ${d}.`);this._bottomBuffer=d}l&&this.subscribe(l)}_isWindowObserved(s){return!(this._element instanceof HTMLElement)}_scrolledToBottom(){const s=this._element,l=this._isWindowObserved(s)?s.document.documentElement.scrollTop:s.scrollTop,d=this._isWindowObserved(s)?s.document.body.scrollHeight:s.scrollHeight,C=this._isWindowObserved(s)?s.innerHeight:s.offsetHeight;if(!d||!C)return!1;const D=d-C-this._bottomBuffer;return this._lastScrollMaxPosition=l>this._lastScrollMaxPosition?l:this._lastScrollMaxPosition,this._lastScrollMaxPosition===l&&l>=D}_processScroll(){this._scrolledToBottom()&&this._emitter.emit()}_subscribeOnScroll(){this._eventListener=this._processScroll.bind(this),this._element.addEventListener("scroll",this._eventListener)}subscribe(s){this._emitter.subscribe(s)}resetScrollMaxPosition(){this._lastScrollMaxPosition=0}destroy(){this._element.removeEventListener("scroll",this._eventListener),this._element=null,this._emitter.unsubscribe()}}const lg=[v.DataValueType.Integer,v.DataValueType.Float,v.DataValueType.FLOAT1,v.DataValueType.FLOAT2,v.DataValueType.FLOAT3,v.DataValueType.FLOAT4,v.DataValueType.FLOAT8,v.DataValueType.Money];v.DataValueType.Lookup,v.DataValueType.Text,v.DataValueType.LONG_TEXT,v.DataValueType.MAXSIZE_TEXT,v.DataValueType.MEDIUM_TEXT,v.DataValueType.SHORT_TEXT,v.DataValueType.PHONE_TEXT,v.DataValueType.WEB_TEXT,v.DataValueType.EMAIL_TEXT,v.DataValueType.RICH_TEXT;class Nl{constructor(s,l){this._window=s,this._windowPayloadValues=l,this._initializeEventType="initializeEvent",this._windowPayloadValuesEventType="windowPayloadValuesEvent"}_dispatchPayloadDataEvent(s,l){const d=new MessageEvent(this._windowPayloadValuesEventType,{data:s});l.dispatchEvent(d)}openWindowWithPayload(s,l,d){const C=this._window.open(s,d);C&&l&&C.addEventListener(this._initializeEventType,()=>this._dispatchPayloadDataEvent(l,C))}initializeWindowPayloadValues(){this._window.addEventListener(this._windowPayloadValuesEventType,s=>Object.assign(this._windowPayloadValues,s.data)),this._window.dispatchEvent(new Event(this._initializeEventType))}static{this.\u0275fac=function(l){return new(l||Nl)(c.\u0275\u0275inject(I.ZP),c.\u0275\u0275inject(Fi))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Nl,factory:Nl.\u0275fac,providedIn:"root"})}}const cg="a29a3ba5-4b0d-de11-9a51-005056c00008",ug="720b771c-e7a7-4f31-9cfb-52cd21c3739f";var po;!function(g){g[g.Organization=0]="Organization",g[g.Division=1]="Division",g[g.Manager=2]="Manager",g[g.Team=3]="Team",g[g.User=4]="User",g[g.SelfServicePortalUser=5]="SelfServicePortalUser",g[g.FunctionalRole=6]="FunctionalRole",g[g.TechnicalUser=7]="TechnicalUser"}(po||(po={}));class Sp{}new c.InjectionToken("Represents a current application theme.",{factory:()=>{const g=(0,c.inject)(st),s=(0,c.inject)(c.Injector);return g.loadCurrentUserInfo().pipe((0,A.T)(()=>s.get(Sp)),(0,_.switchMap)(l=>l.getCurrentTheme()))}});const Qi=new c.InjectionToken("Represents a default application theme.");class Xi{static{this.rootLevel=0}constructor(s,l,d,C){this._id=s,this._value=l,this._level=d&&d.level+1||Xi.rootLevel,this._parent=d,this._children=(C||new Array).map(D=>D&&new Xi(D.id,D.value,this,D.children))}get id(){return this._id}get value(){return this._value}get level(){return this._level}get parent(){return this._parent}get children(){return this._children}findChild(s){return this.children.find(l=>l.id===s)}appendChild(s){this.children.push(s&&new Xi(s.id,s.value,this,s.children))}removeChild(s){const l=this.children.findIndex(d=>d.id===s.id);this.children.splice(l,1)}toJSON(){return{id:this.id,value:this.value,level:this.level,parentId:this.parent?this.parent.id:null,children:this.children?this.children.map(s=>s.toJSON()):[]}}}var pg=b(68264);const vu=new c.InjectionToken("Represents a string pattern of the translation key for validation error");class vi{constructor(s,l){this.translateService=s,this.errorTranslationKeyPattern=l}getLocalizableErrorMessage(s){const l=pt.Qf.Format(this.errorTranslationKeyPattern,(0,pg.A)(s.code)),d=this.translateService.instant(l),C=s.interpolateParams||[];return pt.Qf.Format(d,...C)}translateErrorMessage(s){s.message=this.getLocalizableErrorMessage(s)}static{this.\u0275fac=function(l){return new(l||vi)(c.\u0275\u0275inject(W.c$),c.\u0275\u0275inject(vu))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:vi,factory:vi.\u0275fac,providedIn:"root"})}}class go{}class lr{constructor(s=[]){this.errors=s}static createSuccess(){return new lr}static createError(s){return new lr(s)}static unionResults(...s){const l=s.map(d=>d?.errors||[]).reduce((d,C)=>d.concat(C),[]);return new lr(l)}get success(){return!(this.errors&&this.errors.length>0)}}const vp=new c.InjectionToken("Represents a collection of validators");class ea extends go{constructor(s){super(),this._validators=s}validate(s){const d=this._validators.map(C=>C.validate(s)).map(C=>C.errors).reduce((C,D)=>C.concat(D),[]);return new lr(d)}static{this.\u0275fac=function(l){return new(l||ea)(c.\u0275\u0275inject(vp))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:ea,factory:ea.\u0275fac})}}class Ll extends ea{constructor(s,l){super(s),this._validationErrorTranslateService=l}validate(s){const l=super.validate(s);return l.errors.forEach(d=>{this._validationErrorTranslateService.translateErrorMessage(d)}),l}static{this.\u0275fac=function(l){return new(l||Ll)(c.\u0275\u0275inject(vp),c.\u0275\u0275inject(vi))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Ll,factory:Ll.\u0275fac})}}var fo,us;!function(g){g.Root="root",g.Angular="angular",g.ExecutionTracking="executionTracking"}(fo||(fo={})),function(g){g.Root="root",g.Angular="angular"}(us||(us={}));class Ip{constructor(s){this.ngZone=s}run(s,l,d){return this.ngZone.runOutsideAngular(s)}}class yo extends Ip{constructor(s){super(s)}run(s,l,d){return this.ngZone.run(s,l,d)}}class ds{constructor(s){this._ngZone=s}createDefaultZones(){return{root:new Ip(this._ngZone),angular:new yo(this._ngZone)}}createZone(s,l){if(l===fo.ExecutionTracking)return new mp(s);throw new Error(`Zone ${s} with type ${l} is not supported`)}static{this.\u0275fac=function(l){return new(l||ds)(c.\u0275\u0275inject(c.NgZone))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:ds,factory:ds.\u0275fac,providedIn:"root"})}}let _o=class Dh{constructor(s){this._zoneProvider=s,this._zones=s.createDefaultZones()}init(s){var l=this;return(0,oe.A)(function*(){l._disableExecutionTrackingZone=yield(0,_.lastValueFrom)(s("DisableExecutionTrackingZone"))})()}runInZone(s,l,d,C){return this._disableExecutionTrackingZone&&s!==us.Angular&&(s=us.Root),(this._zones[s]??this._zones[us.Root]).run(l,d,C)}register(s,l){if(this._zones[s])throw new Error(`Zone ${s} already registered`);const d=this._zoneProvider.createZone(s,l);return this._zones[s]=d,d}get(s){return this._zones[s]}runOutside(s){return this.runInZone(us.Root,s)}static{this.\u0275fac=function(l){return new(l||Dh)(c.\u0275\u0275inject(ds))}}static{this.\u0275prov=c.\u0275\u0275defineInjectable({token:Dh,factory:Dh.\u0275fac,providedIn:"root"})}};var Fl,Iu;_o=(0,B.Cg)([(0,I.op)({requestType:"crt.ZoneService"}),(0,B.Sn)("design:paramtypes",[ds])],_o),function(g){g.User="User",g.Record="Record"}(Fl||(Fl={})),function(g){g[g.All=0]="All",g[g.External=1]="External",g[g.Internal=2]="Internal"}(Iu||(Iu={}))},35358:(k,Ce,b)=>{var x={"./af":29901,"./af.js":29901,"./ar":33249,"./ar-dz":88836,"./ar-dz.js":88836,"./ar-kw":37736,"./ar-kw.js":37736,"./ar-ly":93909,"./ar-ly.js":93909,"./ar-ma":37172,"./ar-ma.js":37172,"./ar-ps":98831,"./ar-ps.js":98831,"./ar-sa":61766,"./ar-sa.js":61766,"./ar-tn":53080,"./ar-tn.js":53080,"./ar.js":33249,"./az":17017,"./az.js":17017,"./be":35475,"./be.js":35475,"./bg":34069,"./bg.js":34069,"./bm":3931,"./bm.js":3931,"./bn":35134,"./bn-bd":20585,"./bn-bd.js":20585,"./bn.js":35134,"./bo":68349,"./bo.js":68349,"./br":1370,"./br.js":1370,"./bs":48585,"./bs.js":48585,"./ca":57606,"./ca.js":57606,"./cs":64876,"./cs.js":64876,"./cv":69847,"./cv.js":69847,"./cy":95934,"./cy.js":95934,"./da":46981,"./da.js":46981,"./de":31017,"./de-at":75603,"./de-at.js":75603,"./de-ch":32149,"./de-ch.js":32149,"./de.js":31017,"./dv":99648,"./dv.js":99648,"./el":35583,"./el.js":35583,"./en-au":66436,"./en-au.js":66436,"./en-ca":72982,"./en-ca.js":72982,"./en-gb":85543,"./en-gb.js":85543,"./en-ie":48460,"./en-ie.js":48460,"./en-il":25019,"./en-il.js":25019,"./en-in":89437,"./en-in.js":89437,"./en-nz":17022,"./en-nz.js":17022,"./en-sg":69648,"./en-sg.js":69648,"./eo":77202,"./eo.js":77202,"./es":46662,"./es-do":95722,"./es-do.js":95722,"./es-mx":93294,"./es-mx.js":93294,"./es-us":76235,"./es-us.js":76235,"./es.js":46662,"./et":17927,"./et.js":17927,"./eu":76880,"./eu.js":76880,"./fa":82011,"./fa.js":82011,"./fi":71027,"./fi.js":71027,"./fil":12559,"./fil.js":12559,"./fo":63769,"./fo.js":63769,"./fr":27342,"./fr-ca":35111,"./fr-ca.js":35111,"./fr-ch":36152,"./fr-ch.js":36152,"./fr.js":27342,"./fy":17315,"./fy.js":17315,"./ga":23178,"./ga.js":23178,"./gd":58709,"./gd.js":58709,"./gl":18109,"./gl.js":18109,"./gom-deva":10048,"./gom-deva.js":10048,"./gom-latn":45851,"./gom-latn.js":45851,"./gu":35686,"./gu.js":35686,"./he":35701,"./he.js":35701,"./hi":46081,"./hi.js":46081,"./hr":42384,"./hr.js":42384,"./hu":8709,"./hu.js":8709,"./hy-am":63420,"./hy-am.js":63420,"./id":71939,"./id.js":71939,"./is":5610,"./is.js":5610,"./it":9299,"./it-ch":7703,"./it-ch.js":7703,"./it.js":9299,"./ja":77103,"./ja.js":77103,"./jv":8766,"./jv.js":8766,"./ka":39166,"./ka.js":39166,"./kk":24460,"./kk.js":24460,"./km":70506,"./km.js":70506,"./kn":29431,"./kn.js":29431,"./ko":39712,"./ko.js":39712,"./ku":84898,"./ku-kmr":39065,"./ku-kmr.js":39065,"./ku.js":84898,"./ky":17190,"./ky.js":17190,"./lb":72596,"./lb.js":72596,"./lo":58007,"./lo.js":58007,"./lt":4418,"./lt.js":4418,"./lv":31800,"./lv.js":31800,"./me":55576,"./me.js":55576,"./mi":21276,"./mi.js":21276,"./mk":83270,"./mk.js":83270,"./ml":2951,"./ml.js":2951,"./mn":11753,"./mn.js":11753,"./mr":5341,"./mr.js":5341,"./ms":21598,"./ms-my":40869,"./ms-my.js":40869,"./ms.js":21598,"./mt":20607,"./mt.js":20607,"./my":90540,"./my.js":90540,"./nb":62582,"./nb.js":62582,"./ne":37463,"./ne.js":37463,"./nl":34888,"./nl-be":72796,"./nl-be.js":72796,"./nl.js":34888,"./nn":20178,"./nn.js":20178,"./oc-lnc":62510,"./oc-lnc.js":62510,"./pa-in":22221,"./pa-in.js":22221,"./pl":14598,"./pl.js":14598,"./pt":87102,"./pt-br":69779,"./pt-br.js":69779,"./pt.js":87102,"./ro":25165,"./ro.js":25165,"./ru":19539,"./ru.js":19539,"./sd":42681,"./sd.js":42681,"./se":72426,"./se.js":72426,"./si":49598,"./si.js":49598,"./sk":61396,"./sk.js":61396,"./sl":58913,"./sl.js":58913,"./sq":90822,"./sq.js":90822,"./sr":12579,"./sr-cyrl":36782,"./sr-cyrl.js":36782,"./sr.js":12579,"./ss":14588,"./ss.js":14588,"./sv":62087,"./sv.js":62087,"./sw":55216,"./sw.js":55216,"./ta":61653,"./ta.js":61653,"./te":38905,"./te.js":38905,"./tet":73193,"./tet.js":73193,"./tg":8343,"./tg.js":8343,"./th":34430,"./th.js":34430,"./tk":37915,"./tk.js":37915,"./tl-ph":33835,"./tl-ph.js":33835,"./tlh":54656,"./tlh.js":54656,"./tr":34108,"./tr.js":34108,"./tzl":88938,"./tzl.js":88938,"./tzm":59193,"./tzm-latn":89483,"./tzm-latn.js":89483,"./tzm.js":59193,"./ug-cn":25218,"./ug-cn.js":25218,"./uk":88686,"./uk.js":88686,"./ur":30965,"./ur.js":30965,"./uz":41949,"./uz-latn":24103,"./uz-latn.js":24103,"./uz.js":41949,"./vi":13155,"./vi.js":13155,"./x-pseudo":15063,"./x-pseudo.js":15063,"./yo":39710,"./yo.js":39710,"./zh-cn":90844,"./zh-cn.js":90844,"./zh-hk":3676,"./zh-hk.js":3676,"./zh-mo":15697,"./zh-mo.js":15697,"./zh-tw":95580,"./zh-tw.js":95580};function F(M){var B=i(M);return b(B)}function i(M){if(!b.o(x,M)){var B=new Error("Cannot find module '"+M+"'");throw B.code="MODULE_NOT_FOUND",B}return x[M]}F.keys=function(){return Object.keys(x)},F.resolve=i,k.exports=F,F.id=35358},95063:k=>{k.exports='<svg width="56" height="51" viewBox="0 0 56 51" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t<path d="M52.401 48.6233C52.008 49.0263 51.36 49.0256 50.9678 48.6218L40.2231 37.5595C39.8456 37.1709 39.8463 36.5523 40.2245 36.1645L41.7488 34.6018C42.1418 34.1989 42.7898 34.1995 43.182 34.6033L53.9267 45.6656C54.3042 46.0543 54.3036 46.6728 53.9253 47.0606L52.401 48.6233Z" stroke="currentColor" stroke-width="2"/>\n\t<circle cx="25.386" cy="21.386" r="20.386" stroke="currentColor" stroke-width="2"/>\n\t<path fill-rule="evenodd" clip-rule="evenodd" d="M45.0652 13H46V12V7V6H45H40.2397C40.5739 6.32273 40.8976 6.65625 41.2103 7H45V12H44.6076C44.7684 12.3287 44.921 12.6621 45.0652 13ZM5.28475 14.0682C5.02991 14.0234 4.76769 14 4.5 14C2.01472 14 0 16.0147 0 18.5C0 20.8363 1.78038 22.7567 4.05841 22.9786C4.0337 22.643 4.01674 22.3053 4.0077 21.9656C2.3078 21.7264 1 20.2659 1 18.5C1 16.567 2.567 15 4.5 15C4.65605 15 4.80971 15.0102 4.96036 15.03C5.06106 14.706 5.16926 14.3854 5.28475 14.0682Z" fill="currentColor"/>\n\t<mask id="path-4-inside-1_15152_1853" fill="white">\n\t\t<path fill-rule="evenodd" clip-rule="evenodd" d="M46.088 16H37H36V15V4V3H36.3156C36.8393 3.31201 37.3486 3.64575 37.8422 4H37V15H45.8022C45.9053 15.33 46.0006 15.6634 46.088 16ZM5.03754 27.985C10.0342 27.7063 14 23.5663 14 18.5C14 14.3366 11.3218 10.7988 7.59429 9.51532C7.40334 9.80095 7.21908 10.0914 7.04175 10.3865C10.4945 11.4671 13 14.691 13 18.5C13 23.113 9.32534 26.8677 4.74355 26.9966C4.83378 27.3294 4.93185 27.6589 5.03754 27.985Z"/>\n\t</mask>\n\t<path fill-rule="evenodd" clip-rule="evenodd" d="M46.088 16H37H36V15V4V3H36.3156C36.8393 3.31201 37.3486 3.64575 37.8422 4H37V15H45.8022C45.9053 15.33 46.0006 15.6634 46.088 16ZM5.03754 27.985C10.0342 27.7063 14 23.5663 14 18.5C14 14.3366 11.3218 10.7988 7.59429 9.51532C7.40334 9.80095 7.21908 10.0914 7.04175 10.3865C10.4945 11.4671 13 14.691 13 18.5C13 23.113 9.32534 26.8677 4.74355 26.9966C4.83378 27.3294 4.93185 27.6589 5.03754 27.985Z" fill="currentColor"/>\n\t<path d="M46.088 16V18H48.673L48.0239 15.4978L46.088 16ZM36 16H34V18H36V16ZM36 3V1H34V3H36ZM36.3156 3L37.3392 1.28179L36.8662 1H36.3156V3ZM37.8422 4V6H44.0588L39.0084 2.37518L37.8422 4ZM37 4V2H35V4H37ZM37 15H35V17H37V15ZM45.8022 15L47.7112 14.4035L47.2727 13H45.8022V15ZM5.03754 27.985L3.13495 28.6016L3.61009 30.0678L5.14892 29.9819L5.03754 27.985ZM7.59429 9.51532L8.24542 7.62428L6.78818 7.12251L5.93162 8.40378L7.59429 9.51532ZM7.04175 10.3865L5.32744 9.35642L4.01782 11.5358L6.4444 12.2953L7.04175 10.3865ZM4.74355 26.9966L4.6873 24.9974L2.14861 25.0688L2.81325 27.52L4.74355 26.9966ZM46.088 14H37V18H46.088V14ZM37 14H36V18H37V14ZM38 16V15H34V16H38ZM38 15V4H34V15H38ZM38 4V3H34V4H38ZM36 5H36.3156V1H36V5ZM35.292 4.71821C35.7667 5.00102 36.2285 5.3036 36.676 5.62482L39.0084 2.37518C38.4688 1.98791 37.9119 1.62299 37.3392 1.28179L35.292 4.71821ZM37 6H37.8422V2H37V6ZM39 15V4H35V15H39ZM45.8022 13H37V17H45.8022V13ZM43.8932 15.5965C43.9866 15.8954 44.073 16.1973 44.1521 16.5022L48.0239 15.4978C47.9283 15.1294 47.824 14.7646 47.7112 14.4035L43.8932 15.5965ZM12 18.5C12 22.499 8.86909 25.7682 4.92615 25.9881L5.14892 29.9819C11.1992 29.6445 16 24.6336 16 18.5H12ZM6.94315 11.4064C9.88844 12.4205 12 15.2162 12 18.5H16C16 13.457 12.7552 9.17712 8.24542 7.62428L6.94315 11.4064ZM8.75605 11.4167C8.91679 11.1492 9.08383 10.8858 9.25696 10.6269L5.93162 8.40378C5.72284 8.71607 5.52137 9.03369 5.32744 9.35642L8.75605 11.4167ZM6.4444 12.2953C9.08657 13.1221 11 15.5902 11 18.5H15C15 13.7917 11.9025 9.8121 7.63909 8.47783L6.4444 12.2953ZM11 18.5C11 22.0272 8.18992 24.8988 4.6873 24.9974L4.79979 28.9958C10.4608 28.8365 15 24.1987 15 18.5H11ZM6.94012 27.3685C6.8444 27.0731 6.75557 26.7746 6.67384 26.4732L2.81325 27.52C2.91199 27.8841 3.0193 28.2448 3.13495 28.6016L6.94012 27.3685Z" fill="currentColor" mask="url(#path-4-inside-1_15152_1853)"/>\n\t<path d="M12.25 44.3349L16 46.5L12.25 48.6651L12.25 44.3349Z" stroke="currentColor"/>\n</svg>\n'},26242:k=>{k.exports='<svg id="Group_7" data-name="Group 7" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n\t<rect id="Rectangle_7" data-name="Rectangle 7" width="24" height="24" fill="none"/>\n\t<line id="Line_5" data-name="Line 5" y1="10" x2="10" transform="translate(7 7)" fill="none" stroke="#ffff" stroke-miterlimit="10" stroke-width="1"/>\n\t<line id="Line_6" data-name="Line 6" x2="10" y2="10" transform="translate(7 7)" fill="none" stroke="#ffff" stroke-miterlimit="10" stroke-width="1"/>\n</svg>\n'},92825:k=>{k.exports='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M13.1592 7.99998C13.1592 5.15064 10.8494 2.84079 8.00004 2.84079C5.1507 2.84079 2.84085 5.15064 2.84085 7.99998C2.84085 10.8493 5.1507 13.1592 8.00004 13.1592C10.8494 13.1592 13.1592 10.8493 13.1592 7.99998ZM8.00004 1.50079C11.5894 1.50079 14.4992 4.41058 14.4992 7.99998C14.4992 11.5894 11.5894 14.4992 8.00004 14.4992C4.41064 14.4992 1.50085 11.5894 1.50085 7.99998C1.50085 4.41058 4.41064 1.50079 8.00004 1.50079ZM7.16167 5.39671C7.16167 4.93555 7.53551 4.56171 7.99667 4.56171H8.00333C8.46449 4.56171 8.83833 4.93555 8.83833 5.39671C8.83833 5.85786 8.46449 6.23171 8.00333 6.23171H7.99667C7.53551 6.23171 7.16167 5.85786 7.16167 5.39671ZM7.99979 6.95437C8.46095 6.95477 8.83447 7.32893 8.83407 7.79009L8.83163 10.6063C8.83123 11.0674 8.45706 11.4409 7.9959 11.4405C7.53475 11.4401 7.16123 11.066 7.16163 10.6048L7.16407 7.78864C7.16447 7.32749 7.53864 6.95397 7.99979 6.95437Z" fill="currentColor"/>\n</svg>\n'},90651:k=>{k.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22" enable-background="new 0 0 22 22" fit="" height="100%" width="100%" preserveAspectRatio="xMidYMid meet" focusable="false"><circle cx="11" cy="11" r="9.5" fill="none" stroke="#22AC14" stroke-miterlimit="10" class="circle"></circle><g xmlns="http://www.w3.org/2000/svg" class="content" fill="#22AC14"><path d="m10 9h2v7h-2v-7"></path><path d="M10,6h2v2h-2V7"></path></g></svg>'},46844:k=>{k.exports='<svg width="14" height="13" viewBox="0 0 14 13" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M4.74997 1.34375H13.75V2.28125H4.74997V1.34375ZM4.74997 6.03125H13.75V6.96875H4.74997V6.03125ZM4.74997 10.7188H13.75V11.6562H4.74997V10.7188ZM2.74997 3.6875V0.171875H0.816077V1.10938H1.74997V3.6875H2.74997ZM0.790527 6.67903V8.14062H3.3159V7.16581H1.868L3.24044 6.51803V4.625H0.790527V5.5625H2.24997V5.97591L0.790527 6.67903ZM0.790527 11.8906V12.8281H3.24044V9.07812H0.790527V10.0156H2.24997V10.4844H1.49997V11.4219H2.24997V11.8906H0.790527Z" fill="#0D2E4E"/>\n</svg>\n'},96323:k=>{k.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16.024" viewBox="0 0 16 16.024"><defs><style>.structure-explorer-binary-icon-unique-class-a{fill:none;}.structure-explorer-binary-icon-unique-class-b{fill:#54657d;}</style></defs><g transform="translate(0 0)"><rect class="structure-explorer-binary-icon-unique-class-a" width="16" height="16" transform="translate(0 0)"/><path class="structure-explorer-binary-icon-unique-class-b" d="M881.587-85.337c0,2.3-.838,3.573-2.306,3.573-1.3,0-2.173-1.24-2.194-3.479,0-2.272.959-3.521,2.307-3.521C880.791-88.764,881.587-87.493,881.587-85.337Zm-3.6.1c0,1.761.531,2.761,1.347,2.761.918,0,1.357-1.093,1.357-2.822,0-1.667-.419-2.761-1.347-2.761C878.557-88.055,877.985-87.077,877.985-85.233Z" transform="translate(-871.088 88.764)"/><path class="structure-explorer-binary-icon-unique-class-b" d="M881.587-85.337c0,2.3-.838,3.573-2.306,3.573-1.3,0-2.173-1.24-2.194-3.479,0-2.272.959-3.521,2.307-3.521C880.791-88.764,881.587-87.493,881.587-85.337Zm-3.6.1c0,1.761.531,2.761,1.347,2.761.918,0,1.357-1.093,1.357-2.822,0-1.667-.419-2.761-1.347-2.761C878.557-88.055,877.985-87.077,877.985-85.233Z" transform="translate(-876.088 97.764)"/><path class="structure-explorer-binary-icon-unique-class-b" d="M874.186-87.884h-.023l-1.355.657-.2-.718,1.7-.819h.9v7h-1.019Z" transform="translate(-871.607 88.764)"/><path class="structure-explorer-binary-icon-unique-class-b" d="M884.332-87.884h-.024l-1.355.657-.2-.718,1.7-.819h.9v7h-1.019Z" transform="translate(-870.754 88.764)"/><path class="structure-explorer-binary-icon-unique-class-b" d="M884.332-87.884h-.024l-1.355.657-.2-.718,1.7-.819h.9v7h-1.019Z" transform="translate(-875.754 97.764)"/><path class="structure-explorer-binary-icon-unique-class-b" d="M884.332-79.907h-.024l-1.355.657-.2-.718,1.7-.819h.9v7h-1.019Z" transform="translate(-870.754 89.811)"/></g></svg>'},86174:k=>{k.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><defs><style>.structure-explorer-boolean-icon-unique-class-a,.structure-explorer-boolean-icon-unique-class-b{fill:none;}.structure-explorer-boolean-icon-unique-class-a{stroke:#54657d;stroke-miterlimit:10;}</style></defs><g transform="translate(-586.213 93.047)"><path class="structure-explorer-boolean-icon-unique-class-a" d="M591.213-85.547l2.5,2,6.5-7.5"/><path class="structure-explorer-boolean-icon-unique-class-a" d="M1626.707,39.564a6.5,6.5,0,1,1-6.1-4.263" transform="translate(-1026.389 -126.848)"/></g><rect class="structure-explorer-boolean-icon-unique-class-b" width="16" height="16"/></svg>'},70313:k=>{k.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"><path d="M8.456.779c2.084.007 2.813.35 4.468 1.861l-1.875 2.424-2.95-1.229Z" fill="#0d2e4e" opacity=".8"/><path d="M7.467 15.445c-2.083-.006-2.813-.35-4.467-1.861l1.875-2.424 2.949 1.229Z" fill="#0d2e4e" opacity=".4"/><path d="M15.5 8.331c-.064 2.22-.431 3.006-2 4.809l-2.4-1.931 1.322-3.175Z" fill="#0d2e4e" opacity=".6"/><path d="M.629 7.618c.006-2.084.35-2.814 1.86-4.468l2.425 1.875-1.229 2.949Z" fill="#0d2e4e" opacity=".2"/><path d="M13.409 3.076c1.5 1.443 1.8 2.195 1.949 4.431l-3.03.46-1.286-2.925Z" fill="#0d2e4e" opacity=".8"/><path d="M2.574 13.009c-1.5-1.443-1.795-2.195-1.948-4.43l3.029-.46 1.287 2.925Z" fill="#0d2e4e" opacity=".4"/><path d="M13.293 13.403c-1.578 1.562-2.386 1.878-4.769 2.1l-.4-3.055 3.149-1.384Z" fill="#0d2e4e" opacity=".6"/><path d="M3.026 2.622C4.468 1.122 5.22.828 7.455.674l.461 3.03L4.99 4.99Z" fill="#0d2e4e" opacity=".2"/><g transform="translate(-798.326 92.909)" fill="none"><path d="M798.326-92.909h16v16h-16z"/><circle cx="7.5" cy="7.5" r="7.5" transform="translate(798.826 -92.409)" stroke="#162e4c"/><circle cx="4" cy="4" r="4" transform="translate(802.326 -88.909)" stroke="#162e4c"/><g stroke="#162e4c"><path d="M806.326-81.1v3.686"/><path d="M806.326-89.023v-3.386"/><path d="M802.511-84.909h-3.685"/><path d="M813.826-84.909h-3.387"/><path d="m803.416-87.817-2.394-2.395"/><path d="m811.628-79.605-2.189-2.189"/><path d="m803.211-81.795-2.189 2.189"/><path d="m811.629-90.213-2.4 2.395"/></g></g></svg>\n'},5254:k=>{k.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><defs><style>.structure-explorer-date-icon-unique-class-a,.structure-explorer-date-icon-unique-class-b{fill:none;}.structure-explorer-date-icon-unique-class-a{stroke:#54657d;stroke-miterlimit:10;}.structure-explorer-date-icon-unique-class-c{stroke:none;}</style></defs><g transform="translate(0.5)"><g transform="translate(2365.657 64.642)"><line class="structure-explorer-date-icon-unique-class-a" x2="5.938" transform="translate(-2361.157 -62.142)"/><path class="structure-explorer-date-icon-unique-class-a" d="M-2353.157-61.732h2.5v12h-15v-12h2.563" transform="translate(0 -0.41)"/><line class="structure-explorer-date-icon-unique-class-a" x2="15" transform="translate(-2365.657 -58.142)"/><g class="structure-explorer-date-icon-unique-class-a" transform="translate(-2364.157 -64.642)"><rect class="structure-explorer-date-icon-unique-class-c" width="3" height="5"/><rect class="structure-explorer-date-icon-unique-class-b" x="0.5" y="0.5" width="2" height="4"/></g><g class="structure-explorer-date-icon-unique-class-a" transform="translate(-2355.157 -64.642)"><rect class="structure-explorer-date-icon-unique-class-c" width="3" height="5"/><rect class="structure-explorer-date-icon-unique-class-b" x="0.5" y="0.5" width="2" height="4"/></g></g></g><rect class="structure-explorer-date-icon-unique-class-b" width="16" height="16"/></svg>'},88552:k=>{k.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><defs><style>.structure-explorer-date-time-icon-unique-class-a,.structure-explorer-date-time-icon-unique-class-b,.structure-explorer-date-time-icon-unique-class-c,.structure-explorer-date-time-icon-unique-class-d{fill:none;}.structure-explorer-date-time-icon-unique-class-b,.structure-explorer-date-time-icon-unique-class-c{stroke:#54657d;}.structure-explorer-date-time-icon-unique-class-b,.structure-explorer-date-time-icon-unique-class-d{stroke-miterlimit:10;}.structure-explorer-date-time-icon-unique-class-e,.structure-explorer-date-time-icon-unique-class-f{stroke:none;}.structure-explorer-date-time-icon-unique-class-f{fill:#54657d;}</style></defs><rect class="structure-explorer-date-time-icon-unique-class-a" width="16" height="16"/><path class="structure-explorer-date-time-icon-unique-class-b" d="M1895.033,260.278h-4.149v-9h12v2" transform="translate(-1890.384 -248.778)"/><path class="structure-explorer-date-time-icon-unique-class-c" d="M0,0H4.5" transform="translate(1 5.5)"/><g transform="translate(4.5)"><line class="structure-explorer-date-time-icon-unique-class-b" y2="4" transform="translate(-1 0)"/><line class="structure-explorer-date-time-icon-unique-class-b" y2="4" transform="translate(5 0)"/></g><g class="structure-explorer-date-time-icon-unique-class-d" transform="translate(-1889.764 -248.583)"><path class="structure-explorer-date-time-icon-unique-class-e" d="M1905.764,258.584a5,5,0,1,1-5-5A5,5,0,0,1,1905.764,258.584Z"/><path class="structure-explorer-date-time-icon-unique-class-f" d="M 1900.7626953125 262.5840454101563 C 1902.968994140625 262.5840454101563 1904.763916015625 260.7896728515625 1904.763916015625 258.5840759277344 C 1904.763916015625 256.3778686523438 1902.968994140625 254.5829772949219 1900.7626953125 254.5829772949219 C 1898.557739257813 254.5829772949219 1896.763916015625 256.3778686523438 1896.763916015625 258.5840759277344 C 1896.763916015625 260.7896728515625 1898.557739257813 262.5840454101563 1900.7626953125 262.5840454101563 M 1900.7626953125 263.5840454101563 C 1898.000244140625 263.5840454101563 1895.763916015625 261.3454284667969 1895.763916015625 258.5840759277344 C 1895.763916015625 255.8215942382813 1898.000244140625 253.5829772949219 1900.7626953125 253.5829772949219 C 1903.524169921875 253.5829772949219 1905.763916015625 255.8215942382813 1905.763916015625 258.5840759277344 C 1905.763916015625 261.3454284667969 1903.524169921875 263.5840454101563 1900.7626953125 263.5840454101563 Z"/></g><path class="structure-explorer-date-time-icon-unique-class-b" d="M1900.1,254.194v5h2.5" transform="translate(-1889.097 -248.694)"/></svg>'},26538:k=>{k.exports='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect x="2" y="3.5" width="12" height="9" stroke="currentColor"/>\n<path d="M14 3.5L8 9L2 3.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n'},87232:k=>{k.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><defs><style>.structure-explorer-float-icon-unique-class-a{fill:#54657d;}.structure-explorer-float-icon-unique-class-b{fill:none;}</style></defs><g transform="translate(2212.813 -42.785)"><path class="structure-explorer-float-icon-unique-class-a" d="M-2210.728,47.87h-.024l-1.355.732-.2-.8,1.7-.911h.9v7.795h-1.019Z" transform="translate(1)"/><path class="structure-explorer-float-icon-unique-class-a" d="M-2207.943,54.682v-.647l.828-.8c1.99-1.9,2.891-2.9,2.9-4.077a1.391,1.391,0,0,0-1.547-1.524,2.659,2.659,0,0,0-1.656.66l-.336-.744a3.431,3.431,0,0,1,2.207-.791,2.193,2.193,0,0,1,2.387,2.266c0,1.44-1.043,2.6-2.686,4.186l-.624.576v.024h3.5v.875Z" transform="translate(4 0.03)"/><rect class="structure-explorer-float-icon-unique-class-a" width="1" height="1" transform="translate(-2206.813 53.785)"/></g><rect class="structure-explorer-float-icon-unique-class-b" width="16" height="16"/></svg>'},31242:k=>{k.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"><path fill="#0d2e4e" d="m8.446 5.548-.131.483h-1.07l-.8 3.2a19.171 19.171 0 0 1-1.077 3.274 5.653 5.653 0 0 1-1.655 2.255 2.323 2.323 0 0 1-1.348.476 1.106 1.106 0 0 1-.747-.263.581.581 0 0 1-.227-.476.534.534 0 0 1 .187-.407.648.648 0 0 1 .457-.172.477.477 0 0 1 .334.125.378.378 0 0 1 .135.285.4.4 0 0 1-.154.3q-.117.1-.117.153a.12.12 0 0 0 .051.1.336.336 0 0 0 .2.051 1.345 1.345 0 0 0 .663-.2 1.9 1.9 0 0 0 .619-.589 4.487 4.487 0 0 0 .513-1.132q.1-.308.549-2.029l1.275-4.958H4.828l.1-.483a2.888 2.888 0 0 0 .849-.085 1.024 1.024 0 0 0 .443-.322 4.834 4.834 0 0 0 .524-.89 7.189 7.189 0 0 1 .828-1.362 4 4 0 0 1 1.138-.978 2.365 2.365 0 0 1 1.125-.326 1.346 1.346 0 0 1 .893.282.8.8 0 0 1 .337.612.6.6 0 0 1-.168.432.571.571 0 0 1-.432.176.522.522 0 0 1-.37-.132.415.415 0 0 1-.143-.315.633.633 0 0 1 .095-.289.647.647 0 0 0 .1-.231.185.185 0 0 0-.066-.154.453.453 0 0 0-.279-.073 1.29 1.29 0 0 0-.828.293 3.3 3.3 0 0 0-.878 1.216q-.2.432-.725 2.146Z" data-name="Path 7000"/><path fill="#0d2e4e" d="M10.768 5.372a3.082 3.082 0 0 1 .542.761 10.154 10.154 0 0 1 .432 1.385l.645-.967a4.078 4.078 0 0 1 .622-.67 2.522 2.522 0 0 1 .645-.436.992.992 0 0 1 .388-.073.724.724 0 0 1 .5.168.532.532 0 0 1 .186.41.515.515 0 0 1-.109.381.685.685 0 0 1-.469.183.944.944 0 0 1-.33-.066 1.836 1.836 0 0 0-.461-.117.708.708 0 0 0-.418.205 5.842 5.842 0 0 0-1.084 1.472l.6 2.52a2.242 2.242 0 0 0 .234.692.261.261 0 0 0 .191.114.61.61 0 0 0 .359-.169 2.856 2.856 0 0 0 .688-.879l.256.132a4.589 4.589 0 0 1-1.171 1.436 1.192 1.192 0 0 1-.682.322.728.728 0 0 1-.651-.461 17.972 17.972 0 0 1-.638-2.461 10.388 10.388 0 0 1-1.831 2.556 1.382 1.382 0 0 1-.864.366.8.8 0 0 1-.535-.212.56.56 0 0 1-.175-.433.542.542 0 0 1 .161-.4.535.535 0 0 1 .4-.162.778.778 0 0 1 .5.235.543.543 0 0 0 .293.168.4.4 0 0 0 .227-.117 5.539 5.539 0 0 0 .938-1.2 11.879 11.879 0 0 0 .776-1.333q-.454-1.78-.491-1.882a1.369 1.369 0 0 0-.439-.674 1.346 1.346 0 0 0-.8-.2c-.113 0-.242.005-.389.015v-.264Z"/><path fill="none" d="M0 0h16v16H0z"/></svg>'},62907:k=>{k.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><defs><style>.structure-explorer-guid-icon-unique-class-a{fill:none;}.structure-explorer-guid-icon-unique-class-b{fill:#54657d;}</style></defs><rect class="structure-explorer-guid-icon-unique-class-a" width="16" height="16"/><path class="structure-explorer-guid-icon-unique-class-b" d="M4.252-2.767h-2v1h1V-.5c-.016.018.177,0-.252,0A1.724,1.724,0,0,1,1.172-2.253,1.727,1.727,0,0,1,3-4.03a3.445,3.445,0,0,1,1.252.216l.013-.729A3.252,3.252,0,0,0,3-4.767,2.5,2.5,0,0,0,.252-2.253,2.45,2.45,0,0,0,.96-.439,2.675,2.675,0,0,0,2.857.2,4.082,4.082,0,0,0,4.252,0Zm1-2v2.919A1.86,1.86,0,0,0,7.232.233a1.869,1.869,0,0,0,2.02-2.081V-4.767h-1v2.919C8.252-.771,7.685-.5,7.232-.5c-.358,0-.98-.253-.98-1.344V-4.767Zm5,0v5h1v-5Zm2,4.964c.016.02.559,0,1.026,0a3.21,3.21,0,0,0,2.244-.7,2.518,2.518,0,0,0,.73-1.893,2.2,2.2,0,0,0-.715-1.749,2.987,2.987,0,0,0-2.056-.607c-.52,0-1.229-.032-1.229-.015Zm1-4.227c.173-.036-.11,0,.229,0,1.385,0,1.871.8,1.871,1.633A1.773,1.773,0,0,1,13.393-.5c-.256,0,.025.029-.141,0Z" transform="translate(-0.252 9.768)"/></svg>'},91627:k=>{k.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><defs><style>.structure-explorer-image-icon-unique-class-a,.structure-explorer-image-icon-unique-class-c{fill:none;}.structure-explorer-image-icon-unique-class-a{stroke:#54657d;stroke-miterlimit:10;}.structure-explorer-image-icon-unique-class-b{fill:#54657d;}.structure-explorer-image-icon-unique-class-d{stroke:none;}</style></defs><g class="structure-explorer-image-icon-unique-class-a" transform="translate(0 2)"><rect class="structure-explorer-image-icon-unique-class-d" width="16" height="12"/><rect class="structure-explorer-image-icon-unique-class-c" x="0.5" y="0.5" width="15" height="11"/></g><circle class="structure-explorer-image-icon-unique-class-b" cx="1.5" cy="1.5" r="1.5" transform="translate(10 4)"/><path class="structure-explorer-image-icon-unique-class-b" d="M638.873-81.425l4-6,7,8h-11Z" transform="translate(-637.873 92.426)"/><path class="structure-explorer-image-icon-unique-class-b" d="M650.873-79.425l-2-3,2-1,2,2v2Z" transform="translate(-637.873 92.426)"/><rect class="structure-explorer-image-icon-unique-class-c" width="16" height="16"/></svg>'},39378:k=>{k.exports='<svg width="17" height="18" viewBox="0 0 17 18" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M2 12.0906V14.0081H16V4.00806H12.7424" stroke="currentColor" stroke-miterlimit="10"/>\n<path d="M12.5 9.00806C13.3284 9.00806 14 8.33648 14 7.50806C14 6.67963 13.3284 6.00806 12.5 6.00806C11.6716 6.00806 11 6.67963 11 7.50806C11 8.33648 11.6716 9.00806 12.5 9.00806Z" fill="currentColor"/>\n<path d="M3.99998 14.0081L4.89526 12.8143L8.5414 8.25662L14.2928 14.0081H3.99998Z" stroke="currentColor"/>\n<path d="M3.69895 10.697C3.07795 11.318 2.33199 10.921 1.70999 10.297C1.08899 9.67596 0.689969 8.92896 1.30997 8.30796L3.29898 6.31896C3.91998 5.69796 4.66596 6.09496 5.28696 6.71896C5.90896 7.33996 6.30698 8.08596 5.68698 8.70796L3.69895 10.697Z" stroke="currentColor" stroke-miterlimit="10"/>\n<path d="M8.69905 5.69693C8.07705 6.31793 7.33204 5.92093 6.71004 5.29693C6.08804 4.67593 5.69101 3.92993 6.31001 3.30893L8.29805 1.31993C8.92005 0.698935 9.666 1.09593 10.287 1.71993C10.909 2.34093 11.306 3.08693 10.687 3.70893L8.69905 5.69693Z" stroke="currentColor" stroke-miterlimit="10"/>\n<path d="M4 8.24291L8.233 4.00891" stroke="currentColor" stroke-miterlimit="10"/>\n</svg>\n'},17984:k=>{k.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><defs><style>.structure-explorer-integer-icon-unique-class-a{fill:#54657d;}.structure-explorer-integer-icon-unique-class-b{fill:none;}</style></defs><g transform="translate(0.502 3.971)"><path class="structure-explorer-integer-icon-unique-class-a" d="M-2210.728,47.87h-.024l-1.355.732-.2-.8,1.7-.911h.9v7.795h-1.019Z" transform="translate(2212.311 -46.755)"/><path class="structure-explorer-integer-icon-unique-class-a" d="M-2207.943,54.682v-.647l.828-.8c1.99-1.9,2.891-2.9,2.9-4.077a1.391,1.391,0,0,0-1.547-1.524,2.659,2.659,0,0,0-1.656.66l-.336-.744a3.431,3.431,0,0,1,2.207-.791,2.193,2.193,0,0,1,2.387,2.266c0,1.44-1.043,2.6-2.686,4.186l-.624.576v.024h3.5v.875Z" transform="translate(2212.311 -46.755)"/><path class="structure-explorer-integer-icon-unique-class-a" d="M-2201.9,53.471a3.526,3.526,0,0,0,1.727.492c1.356,0,1.775-.864,1.763-1.512-.013-1.091-.995-1.559-2.015-1.559h-.588V50.1h.588c.768,0,1.739-.4,1.739-1.319,0-.624-.4-1.176-1.368-1.176a2.86,2.86,0,0,0-1.558.516l-.276-.768a3.715,3.715,0,0,1,2.039-.6c1.535,0,2.231.911,2.231,1.859a1.938,1.938,0,0,1-1.439,1.835v.024a2.031,2.031,0,0,1,1.738,2c0,1.248-.971,2.339-2.842,2.339a3.964,3.964,0,0,1-2.027-.528Z" transform="translate(2212.311 -46.755)"/></g><rect class="structure-explorer-integer-icon-unique-class-b" width="16" height="16"/></svg>'},78764:k=>{k.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><defs><style>.structure-explorer-lookup-icon-unique-class-a,.structure-explorer-lookup-icon-unique-class-b,.structure-explorer-lookup-icon-unique-class-c{fill:none;}.structure-explorer-lookup-icon-unique-class-a,.structure-explorer-lookup-icon-unique-class-b{stroke:#54657d;}.structure-explorer-lookup-icon-unique-class-a{stroke-miterlimit:10;}.structure-explorer-lookup-icon-unique-class-d{stroke:none;}</style></defs><g transform="translate(0.001)"><g class="structure-explorer-lookup-icon-unique-class-a" transform="translate(0 0)"><circle class="structure-explorer-lookup-icon-unique-class-d" cx="6" cy="6" r="6"/><circle class="structure-explorer-lookup-icon-unique-class-c" cx="6" cy="6" r="5.5"/></g><path class="structure-explorer-lookup-icon-unique-class-b" d="M.344.344,5.5,5.5" transform="translate(9.5 9.5)"/></g><rect class="structure-explorer-lookup-icon-unique-class-c" width="16" height="16"/></svg>'},21782:k=>{k.exports='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M6.3353 2.83815L6.79954 2.65245L6.79954 2.65245L6.3353 2.83815ZM7.03813 4.59524L6.57389 4.78094L6.57389 4.78094L7.03813 4.59524ZM6.82454 5.94398L6.44043 5.62389L6.44042 5.6239L6.82454 5.94398ZM6.44629 6.39792L6.8304 6.71802L6.83041 6.718L6.44629 6.39792ZM6.52758 8.19434L6.17402 8.54789L6.17404 8.5479L6.52758 8.19434ZM7.8057 9.47236L8.15925 9.11881L8.15924 9.1188L7.8057 9.47236ZM9.60205 9.55382L9.28202 9.16966L9.28196 9.1697L9.60205 9.55382ZM10.0561 9.17554L10.3762 9.5597L10.3762 9.55965L10.0561 9.17554ZM11.4048 8.96192L11.5905 8.49768L11.5905 8.49768L11.4048 8.96192ZM13.1617 9.66476L12.976 10.129L12.976 10.129L13.1617 9.66476ZM13.9999 10.9027H13.4999V10.9027L13.9999 10.9027ZM14 12.7369H14.5V12.7369L14 12.7369ZM5.09733 2.5C5.43808 2.5 5.74451 2.70746 5.87106 3.02384L6.79954 2.65245C6.52112 1.95641 5.84699 1.5 5.09733 1.5V2.5ZM5.87106 3.02384L6.57389 4.78094L7.50237 4.40955L6.79954 2.65245L5.87106 3.02384ZM6.57389 4.78094C6.68759 5.0652 6.63634 5.3888 6.44043 5.62389L7.20866 6.26407C7.63979 5.74671 7.75243 5.03471 7.50237 4.40955L6.57389 4.78094ZM6.44042 5.6239L6.06217 6.07785L6.83041 6.718L7.20867 6.26406L6.44042 5.6239ZM6.06218 6.07783C5.45524 6.80615 5.50344 7.87731 6.17402 8.54789L6.88113 7.84078C6.57646 7.53612 6.55439 7.04923 6.8304 6.71802L6.06218 6.07783ZM6.17404 8.5479L7.45216 9.82593L8.15924 9.1188L6.88112 7.84077L6.17404 8.5479ZM7.45214 9.82592C8.12264 10.4964 9.19373 10.5449 9.92214 9.93793L9.28196 9.1697C8.95084 9.44564 8.464 9.42356 8.15925 9.11881L7.45214 9.82592ZM9.92209 9.93797L10.3762 9.5597L9.73609 8.79138L9.28202 9.16966L9.92209 9.93797ZM10.3762 9.55965C10.6113 9.36371 10.9348 9.31247 11.2191 9.42616L11.5905 8.49768C10.9652 8.2476 10.2534 8.36031 9.73603 8.79143L10.3762 9.55965ZM11.219 9.42615L12.976 10.129L13.3474 9.20052L11.5905 8.49768L11.219 9.42615ZM12.976 10.129C13.2925 10.2556 13.4999 10.562 13.4999 10.9027H14.4999C14.4999 10.153 14.0434 9.47891 13.3474 9.20052L12.976 10.129ZM13.4999 10.9027L13.5 12.7369L14.5 12.7369L14.4999 10.9027L13.4999 10.9027ZM13.5 12.7369C13.5 13.1584 13.1584 13.5 12.737 13.5V14.5C13.7108 14.5 14.5 13.7106 14.5 12.7369H13.5ZM12.737 13.5C7.08332 13.5 2.5 8.91682 2.5 3.26318H1.5C1.5 9.46913 6.53105 14.5 12.737 14.5V13.5ZM2.5 3.26318C2.5 2.84169 2.84169 2.5 3.26316 2.5V1.5C2.28938 1.5 1.5 2.28943 1.5 3.26318H2.5ZM3.26316 2.5H5.09733V1.5H3.26316V2.5Z" fill="currentColor"/>\n</svg>\n'},44344:k=>{k.exports='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M12 4V6.112H11.732C11.7075 5.83541 11.6365 5.56494 11.522 5.312C11.3902 5.0689 11.188 4.87127 10.942 4.745C10.643 4.61142 10.3172 4.54879 9.98999 4.562H8.64697V11.438C8.60319 11.7946 8.66949 12.1561 8.83698 12.474C8.94798 12.5737 9.07811 12.6497 9.21942 12.6975C9.36073 12.7453 9.51029 12.7638 9.659 12.752H9.98999V12.997H5.94897V12.752H6.28699C6.44717 12.7684 6.60896 12.7457 6.75842 12.6858C6.90788 12.6259 7.0405 12.5305 7.14496 12.408C7.27744 12.1029 7.3298 11.769 7.297 11.438V4.562H6.151C5.83219 4.54791 5.513 4.57923 5.203 4.655C4.94879 4.74677 4.72978 4.91606 4.57697 5.13899C4.3865 5.42772 4.27925 5.76333 4.26697 6.10899H4V4H12Z" fill="#0D2E4E"/>\n<rect x="0.5" y="0.5" width="15" height="15" rx="1.5" stroke="#0D2E4E"/>\n</svg>\n'},96832:k=>{k.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16">\n    <path fill="currentColor" d="M11.693 5.356a.5.5 0 1 0-.707-.708L8.342 7.293 5.697 4.648a.5.5 0 1 0-.707.708L7.635 8 4.99 10.645a.5.5 0 1 0 .707.707l2.645-2.645 2.644 2.645a.5.5 0 1 0 .707-.707L9.05 8l2.644-2.644Z"/>\n</svg>'},43319:k=>{k.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><defs><style>.structure-explorer-string-icon-unique-class-a{fill:#54657d;}.structure-explorer-string-icon-unique-class-b{fill:none;}</style></defs><g transform="translate(2212.813 -5.301)"><path class="structure-explorer-string-icon-unique-class-a" d="M-2199.672,7.3l.139,2.951h-.354a3.592,3.592,0,0,0-.277-1.114,1.871,1.871,0,0,0-.766-.793,2.672,2.672,0,0,0-1.258-.255h-1.771V17.7a2.586,2.586,0,0,0,.25,1.448,1.4,1.4,0,0,0,1.086.389h.435v.343h-5.334v-.343h.446a1.277,1.277,0,0,0,1.132-.482,2.832,2.832,0,0,0,.2-1.355V8.089h-1.512a4.188,4.188,0,0,0-1.252.13,1.717,1.717,0,0,0-.826.677,2.739,2.739,0,0,0-.409,1.355h-.353l.148-2.951Z"/></g><rect class="structure-explorer-string-icon-unique-class-b" width="16" height="16"/></svg>'},98535:k=>{k.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><defs><style>.structure-explorer-time-icon-unique-class-a,.structure-explorer-time-icon-unique-class-c{fill:none;}.structure-explorer-time-icon-unique-class-a{stroke:#54657d;stroke-miterlimit:10;}.structure-explorer-time-icon-unique-class-b{stroke:none;}</style></defs><g transform="translate(-1816.814 -33.301)"><g class="structure-explorer-time-icon-unique-class-a" transform="translate(1816.814 33.301)"><circle class="structure-explorer-time-icon-unique-class-b" cx="8" cy="8" r="8"/><circle class="structure-explorer-time-icon-unique-class-c" cx="8" cy="8" r="7.5"/></g><path class="structure-explorer-time-icon-unique-class-a" d="M1825.314,36.015v5.244l3,3.542"/></g></svg>'},73672:k=>{k.exports='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M8 14C11.3137 14 14 11.3137 14 8C14 4.68629 11.3137 2 8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M2 8H14" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M8 13.8375C9.38071 13.8375 10.5 11.2239 10.5 7.99998C10.5 4.77601 9.38071 2.16248 8 2.16248C6.61929 2.16248 5.5 4.77601 5.5 7.99998C5.5 11.2239 6.61929 13.8375 8 13.8375Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n'},8035:k=>{k.exports='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M3 1V15H13V5H8.99999V1H3ZM2 0H9.99999V4H14V16H2V0Z" fill="#006CE0"/>\n<path d="M10 0L14 4H10V0Z" fill="#006CE0"/>\n</svg>\n'},25689:k=>{k.exports='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M14.0667 3.80034V12.2003H9.40001V3.80034H14.0667ZM15 2.867H8.46667V13.1337H15V2.867Z" fill="#207245"/>\n<path d="M13.1334 4.73367H11.2667V5.66701H13.1334V4.73367Z" fill="#207245"/>\n<path d="M10.3334 4.73367H9.40002V5.66701H10.3334V4.73367Z" fill="#207245"/>\n<path d="M13.1334 6.60034H11.2667V7.53368H13.1334V6.60034Z" fill="#207245"/>\n<path d="M10.3334 6.60034H9.40002V7.53368H10.3334V6.60034Z" fill="#207245"/>\n<path d="M13.1334 8.46701H11.2667V9.40034H13.1334V8.46701Z" fill="#207245"/>\n<path d="M10.3334 8.46701H9.40002V9.40034H10.3334V8.46701Z" fill="#207245"/>\n<path d="M13.1334 10.3337H11.2667V11.267H13.1334V10.3337Z" fill="#207245"/>\n<path d="M10.3334 10.3337H9.40002V11.267H10.3334V10.3337Z" fill="#207245"/>\n<path d="M8.46667 2.14835V13.8524L1.93333 12.4897V3.511L8.46667 2.14835ZM9.4 1.00034L1 2.75501V13.255L9.4 15.0097V1.00968V1.00034Z" fill="#207245"/>\n<path d="M3.80005 5.66699L6.60005 10.8003" stroke="#207245" stroke-miterlimit="10"/>\n<path d="M3.80005 10.3337L6.60005 5.20035" stroke="#207245" stroke-miterlimit="10"/>\n</svg>\n'},21431:k=>{k.exports='<svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M15.5458 3H1.54578V13H15.5458V3Z" stroke="#FF8800" stroke-miterlimit="10"/>\n<path d="M11.0458 8C11.8742 8 12.5458 7.32843 12.5458 6.5C12.5458 5.67157 11.8742 5 11.0458 5C10.2173 5 9.54578 5.67157 9.54578 6.5C9.54578 7.32843 10.2173 8 11.0458 8Z" fill="#FF8800"/>\n<path d="M1.54578 13V11.6514L5.09954 6.32074L10.9439 13H1.54578Z" stroke="#FF8800"/>\n<path d="M15.5458 13H13.8134L11.776 9.94392L13.447 9.10838L15.5458 11.2071V13Z" stroke="#FF8800"/>\n</svg>\n'},94570:k=>{k.exports='<svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M3 8V2H10.3L14 5.42461V14H6.5" stroke="#F40000" stroke-miterlimit="10"/>\n<path d="M10.4702 2H9.47021V6H13.4702V5H10.4702V2Z" fill="#F40000"/>\n<path d="M12.4598 11.07C12.4498 10.98 12.3799 10.86 12.2999 10.78C12.0799 10.56 11.5899 10.44 10.8499 10.43C10.3499 10.43 9.73986 10.47 9.10986 10.56C8.82986 10.39 8.52986 10.21 8.29986 9.98996C7.67986 9.39996 7.15984 8.57996 6.83984 7.67996C6.85984 7.59996 6.87984 7.51995 6.89984 7.44995C6.89984 7.44995 7.24985 5.41996 7.15985 4.73996C7.14985 4.64996 7.13984 4.61995 7.11984 4.54995L7.08984 4.46997C6.98984 4.24997 6.80986 4.00996 6.51986 4.01996H6.33984C6.00984 4.01996 5.74984 4.17997 5.67984 4.43997C5.46984 5.23997 5.67986 6.42995 6.07986 7.97995L5.97986 8.22995C5.69986 8.93995 5.33984 9.64996 5.02984 10.27L4.98987 10.35C4.65987 11.01 4.35984 11.57 4.08984 12.04L3.80984 12.19C3.80984 12.19 3.30986 12.46 3.19986 12.53C2.24986 13.11 1.60985 13.77 1.50985 14.3C1.47985 14.47 1.50986 14.68 1.66986 14.78L1.93985 14.9199C2.05985 14.9799 2.17984 15.01 2.30984 15.01C2.98984 15.01 3.77984 14.14 4.86984 12.21C6.12984 11.79 7.55984 11.44 8.80984 11.25C9.76984 11.8 10.9398 12.18 11.6798 12.18C11.8098 12.18 11.9299 12.17 12.0199 12.14C12.1599 12.1 12.2799 12.02 12.3499 11.91C12.4899 11.69 12.5199 11.38 12.4799 11.07H12.4598ZM2.13986 14.4799C2.25986 14.1299 2.74986 13.45 3.47986 12.84C3.52986 12.8 3.63987 12.69 3.73987 12.59C2.97987 13.83 2.46986 14.32 2.13986 14.47V14.4799ZM6.43985 4.36996C6.65985 4.36996 6.77985 4.92996 6.78985 5.45996C6.79985 5.98996 6.67984 6.35997 6.52984 6.62997C6.40984 6.21997 6.34985 5.57995 6.34985 5.16995C6.34985 5.16995 6.34985 4.36996 6.43985 4.36996ZM5.15985 11.58C5.30985 11.3 5.46985 11.0099 5.62985 10.6999C6.02985 9.93995 6.26984 9.33997 6.45984 8.84997C6.82984 9.53997 7.28986 10.12 7.82986 10.59C7.89986 10.65 7.96985 10.71 8.03985 10.77C6.93985 10.99 5.98985 11.26 5.15985 11.59V11.58ZM12.0898 11.52C12.0198 11.56 11.8298 11.59 11.7098 11.59C11.3098 11.59 10.8198 11.4 10.1298 11.1C10.3998 11.08 10.6399 11.07 10.8599 11.07C11.2599 11.07 11.3799 11.0699 11.7699 11.1699C12.1599 11.2699 12.1699 11.48 12.0999 11.52H12.0898Z" fill="#F40000"/>\n</svg>\n'},17935:k=>{k.exports='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M14.0667 3.80034V12.2003H9.40001V3.80034H14.0667ZM15 2.867H8.46667V13.1337H15V2.867Z" fill="#D24625"/>\n<path d="M13.1333 10.3337H8.46667V11.267H13.1333V10.3337Z" fill="#D24625"/>\n<path d="M8.46667 2.14835V13.8524L1.93333 12.4897V3.511L8.46667 2.14835ZM9.4 1.00034L1 2.75501V13.255L9.4 15.0097V1.00968V1.00034Z" fill="#D24625"/>\n<path d="M11.2667 4.73367V6.60034H13.1334C13.1334 5.57367 12.2934 4.73367 11.2667 4.73367Z" fill="#D24625"/>\n<path d="M6.63733 7.067C6.63733 6.227 6.33866 5.50835 5.89999 5.16302C5.22799 4.64035 4.192 4.73366 4.192 4.73366H3.79065V11.267H4.72398V9.44701C5.05065 9.44701 5.46132 9.37234 5.83465 9.09234C6.36665 8.69101 6.62799 8.00968 6.62799 7.05768L6.63733 7.067ZM5.28399 8.34566C5.11599 8.47633 4.90133 8.51368 4.73333 8.51368V5.62968C4.91066 5.65768 5.12533 5.71368 5.29333 5.86302C5.564 6.09635 5.704 6.49768 5.704 7.05768C5.704 7.49635 5.62932 8.07501 5.28399 8.33634V8.34566Z" fill="#D24625"/>\n<path d="M10.3334 7.53366V5.66699C9.98802 5.66699 9.67069 5.76966 9.40002 5.92832V9.14834C9.67069 9.307 9.98802 9.40967 10.3334 9.40967C11.36 9.40967 12.2 8.56967 12.2 7.543H10.3334V7.53366Z" fill="#D24625"/>\n</svg>\n'},94896:k=>{k.exports='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M14.0667 3.80034V12.2003H9.40001V3.80034H14.0667ZM15 2.867H8.46667V13.1337H15V2.867Z" fill="#2A5699"/>\n<path d="M13.1334 4.73367H9.40002V5.66701H13.1334V4.73367Z" fill="#2A5699"/>\n<path d="M13.1334 6.60034H9.40002V7.53368H13.1334V6.60034Z" fill="#2A5699"/>\n<path d="M13.1334 8.46701H9.40002V9.40034H13.1334V8.46701Z" fill="#2A5699"/>\n<path d="M13.1334 10.3337H9.40002V11.267H13.1334V10.3337Z" fill="#2A5699"/>\n<path d="M8.46667 2.14835V13.8524L1.93333 12.4897V3.511L8.46667 2.14835ZM9.4 1.00034L1 2.75501V13.255L9.4 15.0097V1.00968V1.00034Z" fill="#2A5699"/>\n<path d="M5.90935 10.3337L5.19069 7.35632L4.48135 10.3337H3.88403L2.8667 5.66699H3.61335L4.2107 8.58833L4.90136 5.66699H5.49868L6.18936 8.61633L6.78668 5.66699H7.53337L6.51604 10.3337H5.90935Z" fill="#2A5699"/>\n</svg>\n'},27107:k=>{k.exports='<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M31 6L39 14H31V6Z" fill="#0058EF"/>\n<mask id="path-2-inside-1_3672_46963" fill="white">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M31 6H11V44H39V14H31V6Z"/>\n</mask>\n<path d="M11 6V4H9V6H11ZM31 6H33V4H31V6ZM11 44H9V46H11V44ZM39 44V46H41V44H39ZM39 14H41V12H39V14ZM31 14H29V16H31V14ZM11 8H31V4H11V8ZM13 44V6H9V44H13ZM39 42H11V46H39V42ZM37 14V44H41V14H37ZM39 12H31V16H39V12ZM33 14V6H29V14H33Z" fill="#0058EF" mask="url(#path-2-inside-1_3672_46963)"/>\n</svg>\n'},76185:k=>{k.exports='<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M11.849 16.7535L20.249 32.1535" stroke="#207245" stroke-width="2" stroke-miterlimit="10"/>\n<path d="M11.849 30.7535L20.249 15.3535" stroke="#207245" stroke-width="2" stroke-miterlimit="10"/>\n<path d="M26.8625 4.75354L4.44897 9.74786V38.7394L26.8625 43.2465V4.75354Z" stroke="#207245" stroke-width="2"/>\n<path d="M26.8625 10.1133H43.551V38.0085H26.8625M26.8625 15.8385H31.5311M26.8625 21.3201H31.5311M26.8625 27.0454H31.5311M26.8625 32.6488H31.5311M34.2463 15.8385H39.9148M34.2463 21.3201H39.9148M34.2463 27.0454H39.9148M34.2463 32.6488H39.9148" stroke="#207245" stroke-width="2"/>\n</svg>\n'},87831:k=>{k.exports='<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M5 37V11H43V37H5Z" stroke="#FF8800" stroke-width="2" stroke-miterlimit="10"/>\n<path d="M33.6655 20.1493C33.6655 21.8257 32.3244 23.1657 30.6932 23.1657C29.0621 23.1657 27.7209 21.8257 27.7209 20.1493C27.7209 18.4729 29.0621 17.1329 30.6932 17.1329C32.3244 17.1329 33.6655 18.4729 33.6655 20.1493Z" stroke="#FF8800" stroke-width="2"/>\n<path d="M6.09387 37V33.8161L14.9636 19.1407L31.0907 37H6.09387Z" stroke="#FF8800" stroke-width="2"/>\n<path d="M42.0514 37H37.8244L32.1907 29.215L37.0649 26.7508L42.0514 32.5684V37Z" stroke="#FF8800" stroke-width="2"/>\n</svg>\n'},96682:k=>{k.exports='<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M8 24V6H29.9001L41 16.2738V42H18.5" stroke="#F40000" stroke-width="2" stroke-miterlimit="10"/>\n<path d="M29.3433 6.01556V16.5029C33.371 16.5029 41.4263 16.5029 41.4263 16.5029" stroke="#F40000" stroke-width="2"/>\n<path d="M35.9689 33.2099C35.9389 32.9399 35.7289 32.5799 35.4889 32.3399C34.8289 31.6799 33.3589 31.3199 31.1389 31.2899C29.6389 31.2899 27.8089 31.4099 25.9189 31.6799C25.0789 31.1699 24.1789 30.6299 23.4889 29.9699C21.6289 28.1999 20.0689 25.7399 19.1089 23.0399C19.1689 22.7999 19.2289 22.5598 19.2889 22.3498C19.2889 22.3498 20.3389 16.2599 20.0689 14.2199C20.0389 13.9499 20.0089 13.8599 19.9489 13.6499L19.8589 13.4099C19.5589 12.7499 19.0189 12.0299 18.1489 12.0599H17.6089C16.6189 12.0599 15.8389 12.5399 15.6289 13.3199C14.9989 15.7199 15.6289 19.2898 16.8289 23.9398L16.5289 24.6898C15.6889 26.8198 14.6089 28.9499 13.6789 30.8099L13.559 31.0499C12.569 33.0299 11.6689 34.7099 10.8589 36.1199L10.0189 36.5699C10.0189 36.5699 8.51893 37.3799 8.18893 37.5899C5.33893 39.3299 3.41892 41.3099 3.11892 42.8999C3.02892 43.4099 3.11893 44.0399 3.59893 44.3399L4.4089 44.7598C4.7689 44.9398 5.12888 45.0299 5.51888 45.0299C7.55888 45.0299 9.92887 42.4199 13.1989 36.6299C16.9789 35.3699 21.2689 34.3199 25.0189 33.7499C27.8989 35.3999 31.4089 36.5399 33.6289 36.5399C34.0189 36.5399 34.3789 36.5098 34.6489 36.4198C35.0689 36.2999 35.4289 36.0599 35.6389 35.7299C36.0589 35.0699 36.1489 34.1399 36.0289 33.2099H35.9689ZM5.00893 43.4398C5.36893 42.3898 6.83892 40.3499 9.02892 38.5199C9.17892 38.3999 9.50895 38.0699 9.80895 37.7699C7.52895 41.4899 5.99893 42.9599 5.00893 43.4099V43.4398ZM17.9089 13.1099C18.5689 13.1099 18.9289 14.7899 18.9589 16.3799C18.9889 17.9699 18.6289 19.0799 18.1789 19.8899C17.8189 18.6599 17.6389 16.7398 17.6389 15.5098C17.6389 15.5098 17.6389 13.1099 17.9089 13.1099ZM14.0689 34.7399C14.5189 33.8999 14.9989 33.0298 15.4789 32.0998C16.6789 29.8198 17.3989 28.0199 17.9689 26.5499C19.0789 28.6199 20.4589 30.3599 22.0789 31.7699C22.2889 31.9499 22.4989 32.1299 22.7089 32.3099C19.4089 32.9699 16.5589 33.7799 14.0689 34.7699V34.7399ZM34.8589 34.5599C34.6489 34.6799 34.0789 34.7699 33.7189 34.7699C32.5189 34.7699 31.0489 34.1999 28.9789 33.2999C29.7889 33.2399 30.5089 33.2099 31.1689 33.2099C32.3689 33.2099 32.7289 33.2098 33.8989 33.5098C35.0689 33.8098 35.0989 34.4399 34.8889 34.5599H34.8589Z" fill="#F40000"/>\n</svg>\n'},30351:k=>{k.exports='<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M26.8625 4.75354L4.44897 9.74786V38.7394L26.8625 43.2465V4.75354Z" stroke="#D24625" stroke-width="2"/>\n<path d="M33.8 14.2097V19.8097H39.4C39.4 16.7297 36.88 14.2097 33.8 14.2097Z" fill="#D24625"/>\n<path d="M31.0004 22.6097V17.0097C29.9644 17.0097 29.0124 17.3177 28.2004 17.7937V27.4537C29.0124 27.9297 29.9644 28.2377 31.0004 28.2377C34.0804 28.2377 36.6004 25.7177 36.6004 22.6377H31.0004V22.6097Z" fill="#D24625"/>\n<path d="M19.9124 21.2097C19.9124 18.6897 19.0163 16.5337 17.7003 15.4977C15.6843 13.9297 12.5764 14.2097 12.5764 14.2097H11.3723V33.8097H14.1723V28.3497C15.1523 28.3497 16.3843 28.1257 17.5043 27.2857C19.1003 26.0817 19.8843 24.0377 19.8843 21.1817L19.9124 21.2097ZM15.8523 25.0457C15.3483 25.4377 14.7043 25.5497 14.2003 25.5497V16.8977C14.7323 16.9817 15.3764 17.1497 15.8804 17.5977C16.6924 18.2977 17.1124 19.5017 17.1124 21.1817C17.1124 22.4977 16.8883 24.2337 15.8523 25.0177V25.0457Z" fill="#D24625"/>\n<path d="M26.8625 10.0612H43.551V37.9563H26.8625" stroke="#D24625" stroke-width="2"/>\n<path d="M26.8748 32.0246H39.8748" stroke="#D24625" stroke-width="2"/>\n</svg>\n'},23472:k=>{k.exports='<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M17.728 31.001L15.5721 22.069L13.444 31.001H11.6521L8.6001 17.001H10.8401L12.6321 25.765L14.7041 17.001H16.496L18.5681 25.849L20.36 17.001H22.6001L19.5481 31.001H17.728Z" fill="#2A5699"/>\n<path d="M26.8413 4.54126L4.42773 9.53558V38.5271L26.8413 43.0342V4.54126Z" stroke="#2A5699" stroke-width="2"/>\n<path d="M26.8413 9.90106H43.5298V37.7962H26.8413M26.8413 15.6263H39.5098M26.8413 21.1079H39.5098M26.8413 26.8331H39.5098M26.8413 32.4365H39.5098" stroke="#2A5699" stroke-width="2"/>\n</svg>\n'},34291:k=>{k.exports='<svg xmlns="http://www.w3.org/2000/svg" width="72" height="64"><defs><clipPath id="a"><path fill="none" d="M0 0h33.75v5H0z"/></clipPath></defs><g transform="translate(-516 -872)"><rect width="72" height="64" rx="6" transform="translate(516 872)" fill="none"/><rect width="56" height="46" rx="4" transform="translate(524 880)" fill="none"/><g data-name="Group 14754" transform="rotate(90 519.455 828.779)" fill="#7fc8f4"><rect width="36.729" height="10.229" rx="4" transform="rotate(-90 697.929 120.8)" opacity=".5"/><rect width="36.729" height="10.91" rx="4" transform="rotate(-90 703.725 115.004)" opacity=".5"/><rect width="36.729" height="10.229" rx="4" transform="rotate(-90 709.862 108.867)" opacity=".5"/></g><g transform="rotate(90 -156.375 730.875)"><path d="M4 2.5 0 5V0ZM11 2.5 7 5V0ZM18 2.5 14 5V0ZM25 2.5 21 5V0ZM32 2.5 28 5V0Z" fill="#004fd6"/></g></g></svg>\n'},84531:k=>{k.exports='<svg xmlns="http://www.w3.org/2000/svg" width="72" height="64"><g transform="translate(-418 -872)"><rect width="72" height="64" rx="6" transform="translate(418 872)" fill="none"/><rect width="56" height="46" rx="4" transform="translate(426 880)" fill="none"/><g transform="translate(-148.128 117.452)" fill="#7fc8f4"><rect width="22" height="15" rx="4" transform="rotate(-90 690.338 113.21)" opacity=".5"/><rect width="22" height="16" rx="4" transform="rotate(-90 698.838 104.71)" opacity=".5"/><rect width="22" height="15" rx="4" transform="rotate(-90 707.838 95.71)" opacity=".5"/></g><g><path d="m434 890.5-4 2.5v-5Zm9 0-4 2.5v-5Zm9 0-4 2.5v-5Zm9 0-4 2.5v-5Zm9 0-4 2.5v-5Zm9 0-4 2.5v-5Z" fill="#004fd6"/></g></g></svg>\n'},35723:k=>{k.exports='<svg xmlns="http://www.w3.org/2000/svg" width="72" height="64">\n\t<rect width="72" height="64" fill="none" rx="6"/>\n\t<g stroke="#999" stroke-width="0.5">\n\t\t<rect width="56" height="46" x="8" y="8" fill="#fff" rx="4"/>\n\t\t<rect width="55" height="45" x="8.5" y="8.5" fill="none" rx="3.5"/>\n\t</g>\n\t<g fill="#d1d1d1">\n\t\t<rect width="40" height="6" x="16" y="18" rx="3"/>\n\t\t<rect width="40" height="6" x="16" y="28" rx="3"/>\n\t\t<rect width="40" height="6" x="16" y="38" rx="3"/>\n\t</g>\n</svg>\n'},27320:k=>{k.exports='<svg xmlns="http://www.w3.org/2000/svg" width="72" height="64">\n\t<rect width="72" height="64" fill="none" rx="6"/>\n\t<g fill="#7fc8f4" stroke="#006ce0" opacity=".34">\n\t\t<rect width="50" height="43" x="11" y="11" rx="4"/>\n\t\t<rect width="49" height="42" x="11.5" y="11.5" fill="none" rx="3.5"/>\n\t</g>\n</svg>\n'},48305:k=>{k.exports='<svg xmlns="http://www.w3.org/2000/svg" width="72" height="64"><g data-name="Group 14609" transform="translate(-446 -144)"><rect data-name="Rectangle 24755" width="72" height="64" rx="6" transform="translate(446 144)" fill="none"/><g data-name="Rectangle 39843" transform="translate(484 155)" fill="#7fc8f4" stroke="#006ce0" opacity=".34"><rect width="23" height="43" rx="4" stroke="none"/><rect x=".5" y=".5" width="22" height="42" rx="3.5" fill="none"/></g><g data-name="Rectangle 39845" transform="translate(457 155)" fill="#7fc8f4" stroke="#006ce0" opacity=".34"><rect width="23" height="43" rx="4" stroke="none"/><rect x=".5" y=".5" width="22" height="42" rx="3.5" fill="none"/></g></g></svg>'},6206:k=>{k.exports='<svg xmlns="http://www.w3.org/2000/svg" width="72" height="64"><g data-name="Group 14609" transform="translate(-446 -144)"><rect data-name="Rectangle 24755" width="72" height="64" rx="6" transform="translate(446 144)" fill="none"/><g data-name="Rectangle 39845" transform="translate(456 155)" fill="#7fc8f4" stroke="#006ce0" opacity=".34"><rect width="15" height="43" rx="4" stroke="none"/><rect x=".5" y=".5" width="14" height="42" rx="3.5" fill="none"/></g><g data-name="Rectangle 39906" transform="translate(474 155)" fill="#7fc8f4" stroke="#006ce0" opacity=".34"><rect width="15" height="43" rx="4" stroke="none"/><rect x=".5" y=".5" width="14" height="42" rx="3.5" fill="none"/></g><g data-name="Rectangle 39907" transform="translate(492 155)" fill="#7fc8f4" stroke="#006ce0" opacity=".34"><rect width="15" height="43" rx="4" stroke="none"/><rect x=".5" y=".5" width="14" height="42" rx="3.5" fill="none"/></g></g></svg>'},50103:k=>{k.exports='<svg xmlns="http://www.w3.org/2000/svg" width="72" height="64"><g data-name="Group 14609" transform="translate(-446 -144)"><rect data-name="Rectangle 24755" width="72" height="64" rx="6" transform="translate(446 144)" fill="none"/><g data-name="Rectangle 39845" transform="translate(457 155)" fill="#7fc8f4" stroke="#006ce0" opacity=".34"><rect width="10" height="43" rx="4" stroke="none"/><rect x=".5" y=".5" width="9" height="42" rx="3.5" fill="none"/></g><g data-name="Rectangle 39908" transform="translate(470 155)" fill="#7fc8f4" stroke="#006ce0" opacity=".34"><rect width="10" height="43" rx="4" stroke="none"/><rect x=".5" y=".5" width="9" height="42" rx="3.5" fill="none"/></g><g data-name="Rectangle 39909" transform="translate(483 155)" fill="#7fc8f4" stroke="#006ce0" opacity=".34"><rect width="10" height="43" rx="4" stroke="none"/><rect x=".5" y=".5" width="9" height="42" rx="3.5" fill="none"/></g><g data-name="Rectangle 39910" transform="translate(496 155)" fill="#7fc8f4" stroke="#006ce0" opacity=".34"><rect width="10" height="43" rx="4" stroke="none"/><rect x=".5" y=".5" width="9" height="42" rx="3.5" fill="none"/></g></g></svg>'},75670:k=>{k.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" enable-background="new 0 0 20 20"><g fill="#afb4c1"><path d="m9 11.8h2v3.3h-2z"/><circle cx="10" cy="12" r="1.5"/></g><g fill="none" stroke="#afb4c1" stroke-miterlimit="10"><path d="m16.5 18.5h-13c-.6 0-1-.4-1-1v-9c0-.6.4-1 1-1h13c.6 0 1 .4 1 1v9c0 .6-.4 1-1 1z"/><path d="M5.5,7V5.5c0-2.2,1.8-4,4-4h1c2.2,0,4,1.8,4,4V7" stroke-width="1.25"/></g></svg>'},112:k=>{k.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 16 16"><defs/><g transform="translate(143.941 -406.051)"><rect width="2" height="2" transform="translate(-136.941 408.051)" style="fill: #8095b3;"/><rect width="2" height="2" transform="translate(-136.941 413.051)" style="fill: #8095b3;"/><rect width="2" height="2" transform="translate(-136.941 418.051)" style="fill: #8095b3;"/></g><rect width="16" height="16" style="fill: none;"/></svg>\n'},42926:k=>{k.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 1 20 20" enable-background="new 0 0 20 20"><path d="M17,3V1h-3v2H6V1H3v2H0v4v1v12h20V3H17z M15,2h1v3h-1V2z M4,2h1v3H4V2z M19,19H1V8h18V19z M19,7H1V4h2v2h3V4h8\n\tv2h3V4h2V7z" fill="#8095b3"/><path fill="none" stroke="#8095b3" stroke-miterlimit="10" d="m6.5 12.5l3 3 5-5"/></svg>\n'},67347:k=>{k.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 16 16"><defs/><path d="M-26.666,687.452l2.438,2,4.062-4" transform="translate(31.666 -676.453)" style="fill: none; stroke: #54657d; stroke-miterlimit: 10;"/><g transform="translate(0 2)" style="fill: none; stroke: #54657d; stroke-miterlimit: 10;"><rect width="16" height="14" style="stroke: none;"/><rect x="0.5" y="0.5" width="15" height="13" style="fill: none;"/></g><line x2="16" transform="translate(0 6.5)" style="fill: none; stroke: #54657d; stroke-miterlimit: 10;"/><g transform="translate(2)" style="stroke: #54657d; stroke-miterlimit: 10; fill: #fff;"><rect width="3" height="5" style="stroke: none;"/><rect x="0.5" y="0.5" width="2" height="4" style="fill: none;"/></g><g transform="translate(11)" style="stroke: #54657d; stroke-miterlimit: 10; fill: #fff;"><rect width="3" height="5" style="stroke: none;"/><rect x="0.5" y="0.5" width="2" height="4" style="fill: none;"/></g></svg>\n'},63202:k=>{k.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 16 16"><defs/><g transform="translate(-1816.814 -33.301)"><g transform="translate(1816.814 33.301)" style="fill: none; stroke: #54657d; stroke-miterlimit: 10;"><circle cx="8" cy="8" r="8" style="stroke: none;"/><circle cx="8" cy="8" r="7.5" style="fill: none;"/></g><path d="M1824.814,36.015v5.244l3.266,3.8" style="fill: none; stroke: #54657d; stroke-miterlimit: 10;"/></g></svg>\n'},77017:k=>{k.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><defs><style>.error-icon-a{fill:#df1f26;}.error-icon-b,.error-icon-c{fill:none;}.error-icon-b{stroke:#fff;stroke-miterlimit:10;stroke-width:1.5px;}</style></defs><circle class="error-icon-a" cx="7" cy="7" r="7" transform="translate(1 1)"/><line class="error-icon-b" x2="6" y2="6" transform="translate(5 5)"/><line class="error-icon-b" y1="6" x2="6" transform="translate(5 5)"/><rect class="error-icon-c" width="16" height="16"/></svg>'},64207:k=>{k.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16.001" height="16" viewBox="0 0 16.001 16"><defs><style>.warning-icon-a{fill:#ff9800;}.warning-icon-b,.warning-icon-d{fill:none;}.warning-icon-b{stroke:#fff;stroke-linecap:round;stroke-miterlimit:10;stroke-width:2px;}.warning-icon-c{fill:#fff;}</style></defs><g transform="translate(-1330.138 361.759)"><path class="warning-icon-a" d="M1345.172-346.541H1331.1a.964.964,0,0,1-.84-1.438l7.033-12.505a.965.965,0,0,1,1.682,0l7.034,12.505A.965.965,0,0,1,1345.172-346.541Z"/><line class="warning-icon-b" y2="3" transform="translate(1338.139 -355.279)"/><circle class="warning-icon-c" cx="1.25" cy="1.25" r="1.25" transform="translate(1336.889 -350.529)"/></g><rect class="warning-icon-d" width="16" height="16" transform="translate(0.001)"/></svg>'},14186:k=>{k.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><defs><style>.a,.b{fill:none;}.b{stroke:#fff;stroke-linecap:round;stroke-width:1.5px;}</style></defs><g transform="translate(16) rotate(90)"><rect class="a" width="16" height="16"/><path class="b" d="M10.365,0,5.182,5.465,0,0" transform="translate(2.818 5.268)"/></g></svg>'},54762:k=>{k.exports='<svg id="Group_7" data-name="Group 7" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <rect id="Rectangle_7" data-name="Rectangle 7" width="16" height="16" fill="none"/>\n  <line id="Line_5" data-name="Line 5" y1="10" x2="10" transform="translate(3 3)" fill="none" stroke="#999" stroke-miterlimit="10" stroke-width="1"/>\n  <line id="Line_6" data-name="Line 6" x2="10" y2="10" transform="translate(3 3)" fill="none" stroke="#999" stroke-miterlimit="10" stroke-width="1"/>\n</svg>\n'},71235:k=>{k.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16">\n\t<g fill="none">\n\t\t<path d="M0 16V0h16v16z"/>\n\t\t<path d="m14 5-5.5 5.5L3 5" stroke="#006ce0"/>\n\t</g>\n</svg>\n'},47943:k=>{k.exports='<svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t<path d="M7.49134 3.22305C7.49134 2.82264 7.15352 2.49805 6.73681 2.49805C6.32009 2.49805 5.98227 2.82264 5.98227 3.22305V3.41077H2.75453C2.33782 3.41077 2 3.73536 2 4.13577C2 4.53618 2.33782 4.86077 2.75453 4.86077H8.1046C7.97647 5.14655 7.83931 5.42552 7.69554 5.69677C7.2841 6.47305 6.81859 7.18611 6.35614 7.81489C6.03052 7.32801 5.72261 6.82084 5.42587 6.29971C5.22585 5.94845 4.76734 5.81949 4.40177 6.01168C4.03619 6.20387 3.90199 6.64443 4.102 6.9957C4.49601 7.68763 4.91857 8.37339 5.38474 9.03245C5.01375 9.46248 4.68032 9.81285 4.4245 10.0693C4.26253 10.2316 4.13205 10.3559 4.04334 10.4385C3.999 10.4797 3.96513 10.5106 3.94302 10.5305L3.91885 10.5521L3.91369 10.5567C3.60572 10.8261 3.58243 11.285 3.86266 11.5811C4.143 11.8774 4.6202 11.8992 4.92852 11.6298L4.42092 11.0934C4.92852 11.6298 4.92837 11.63 4.92852 11.6298L4.93016 11.6284L4.93303 11.6259L4.94239 11.6176L4.97513 11.5883C5.00304 11.5632 5.0429 11.5269 5.09339 11.4799C5.19436 11.3859 5.33801 11.2489 5.51383 11.0727C5.7348 10.8512 6.00719 10.5671 6.30993 10.2276C6.54806 10.5072 6.79704 10.7786 7.05826 11.0401C7.34683 11.329 7.82447 11.3384 8.12511 11.0611C8.42574 10.7839 8.43553 10.3249 8.14697 10.036C7.84094 9.72969 7.55143 9.40554 7.27557 9.06637C8.14191 7.94752 9.08008 6.50571 9.73299 4.86077H10.7151C11.1318 4.86077 11.4696 4.53618 11.4696 4.13577C11.4696 3.73536 11.1318 3.41077 10.7151 3.41077H9.22026C9.20855 3.41051 9.19687 3.41051 9.18522 3.41077H7.49134V3.22305Z" fill="#0D2E4E"/>\n\t<path fill-rule="evenodd" clip-rule="evenodd" d="M9.88447 7.94801C10.2159 7.17997 11.3516 7.1894 11.6692 7.96284L13.9471 13.5101C14.1001 13.8826 13.9098 14.3036 13.5222 14.4506C13.1346 14.5976 12.6963 14.4148 12.5434 14.0423L11.9148 12.5116L9.5486 12.5116L8.88299 14.0539C8.72337 14.4238 8.28192 14.5993 7.89699 14.4459C7.51205 14.2925 7.32941 13.8684 7.48903 13.4985L8.27697 11.6728C8.29592 11.5574 8.34318 11.4511 8.41171 11.3606L9.88447 7.94801ZM10.1744 11.0616H11.3194L10.7611 9.70208L10.1744 11.0616Z" fill="#0D2E4E"/>\n</svg>\n'},27809:k=>{k.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><defs><style>.lsa{fill:#8095b3;}.lsb,.lsc{fill:none;}.lsb{stroke:#8095b3;stroke-miterlimit:10;}</style></defs><path class="lsa" d="M14.5,14l-.9-2.5H10L9.1,14H8.2l3.2-8.4h.8L15.4,14ZM12,7.1c0-.1-.1-.2-.1-.3s-.1-.2-.1-.3h0a.367.367,0,0,1-.1.3c-.1.1,0,.2-.1.3l-1.4,3.7h3.1Z" transform="translate(0.301 1)"/><line class="lsb" x2="10" transform="translate(0.301 2.5)"/><line class="lsb" y2="2" transform="translate(4.801 1)"/><path class="lsb" d="M1.5,11.5S6.2,7.2,8,2" transform="translate(0.301 1)"/><path class="lsb" d="M3,4.5a24.292,24.292,0,0,0,4.5,5.6" transform="translate(0.301 1)"/><rect class="lsc" width="16" height="16"/></svg>'},38192:k=>{k.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16">\n\t<g fill="none">\n\t\t<path d="M16 0v16H0V0z"/>\n\t\t<path d="m2 11 5.5-5.5L13 11" stroke="#006ce0"/>\n\t</g>\n</svg>\n'},49967:k=>{k.exports='<svg xmlns="http://www.w3.org/2000/svg" width="65.898" height="50" viewBox="0 0 65.898 50">\n  <g id="Group_10554" data-name="Group 10554" transform="translate(-630.824 -282)">\n    <g id="Group_10553" data-name="Group 10553" transform="translate(-8 4)">\n      <rect id="Rectangle_23319" data-name="Rectangle 23319" width="24" height="8" transform="translate(640 311) rotate(-90)" fill="#757575" opacity="0.15"/>\n      <rect id="Rectangle_23320" data-name="Rectangle 23320" width="15" height="8" transform="translate(655 313) rotate(-90)" fill="#757575" opacity="0.36"/>\n      <rect id="Rectangle_23321" data-name="Rectangle 23321" width="50" height="8" transform="translate(671 328) rotate(-90)" fill="#757575" opacity="0.16"/>\n      <rect id="Rectangle_23326" data-name="Rectangle 23326" width="20" height="8" transform="translate(671 298) rotate(-90)" fill="#757575" opacity="0.36"/>\n      <rect id="Rectangle_23322" data-name="Rectangle 23322" width="30" height="8" transform="translate(687 311) rotate(-90)" fill="#757575" opacity="0.12"/>\n      <rect id="Rectangle_23327" data-name="Rectangle 23327" width="17" height="8" transform="translate(687 298) rotate(-90)" fill="#757575" opacity="0.36"/>\n      <rect id="Rectangle_23323" data-name="Rectangle 23323" width="11" height="8" transform="translate(640 298) rotate(-90)" fill="#757575" opacity="0.15"/>\n      <rect id="Rectangle_23324" data-name="Rectangle 23324" width="25" height="8" transform="translate(655 313) rotate(-90)" fill="#757575" opacity="0.19"/>\n      <path id="Path_9959" data-name="Path 9959" d="M223.923,2054c8.8,1.753,9.21,7.979,18.455,7.661s19.38-15.618,29.076-15.618,13.109-8.362,16.091-8.043" transform="translate(416.077 -1753.707)" fill="none" stroke="#757575" stroke-linecap="round" stroke-width="2" opacity="0.36"/>\n    </g>\n  </g>\n</svg>\n'},78683:k=>{k.exports='<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M0 1.49845H0.783829V4.00128H2.48383V0.000488281H0V1.49845Z" fill="#FF4013"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M14 1.00089H5.08699V3.00089H14V1.00089ZM14 6.00052H5.08699V8.00052H14V6.00052ZM0 12.7274V13.9998H3.19044V9.99979H0V11.1761H1.5V11.5073H0.75V12.3962H1.5V12.7274H0ZM14 10.9998H5.08699V12.9998H14V10.9998Z" fill="#FF4013"/>\n<path d="M2.14577e-05 7.56383V8.99972L3.15902 8.99977V7.56383L2.26167 7.56378L3.15902 6.86625L3.15902 5.00135L2.14577e-05 5.00128L0 6.43327H1.5L2.14577e-05 7.56383Z" fill="#FF4013"/>\n</svg>\n'},36659:k=>{k.exports='<svg id="Boolean_icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect id="Rectangle_23177" width="16" height="16" fill="none"/><g id="Rectangle_12" transform="translate(1 1)" fill="none" stroke="#ff4013" stroke-width="2"><rect width="14" height="14" stroke="none"/><rect x="1" y="1" width="12" height="12" fill="none"/></g><path id="Path_30" d="M10.5,4.5,5.912,9,4,7.162" transform="translate(1 0.5)" fill="rgba(0,0,0,0)" stroke="#ff4013" stroke-width="2"/></svg>\n'},39078:k=>{k.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"><path d="M8.183.779c2.084.007 2.813.35 4.468 1.861l-1.875 2.424-2.95-1.229Z" fill="#ff1c06"/><path d="M7.643 14.846c-2.083-.006-2.813-.35-4.467-1.861l1.875-2.424L8 11.79Z" fill="#ffc6b8"/><path d="M15.024 8.156c-.064 2.22-.431 3.006-2 4.809l-2.4-1.931 1.322-3.175Z" fill="#ff4013"/><path d="M13.074 3.143c1.5 1.443 1.8 2.195 1.949 4.431l-3.03.46-1.286-2.925Z" fill="#ff320e"/><path d="M3.224 12.86c-1.5-1.443-1.795-2.195-1.948-4.43l3.029-.46 1.287 2.925Z" fill="#ffe8e3"/><path d="M12.999 12.98c-1.578 1.562-2.386 1.878-4.769 2.1l-.4-3.055 3.149-1.384Z" fill="#ff795a"/><g transform="translate(-798.326 92.909)" fill="none"><path d="M798.326-92.909h16v16h-16z"/><circle cx="7" cy="7" r="7" transform="translate(799.326 -91.909)" stroke="#ff4013" stroke-width="2"/><circle cx="3" cy="3" r="3" transform="translate(803.326 -87.909)" stroke="#ff4013" stroke-width="2"/><g stroke="#ff4013" stroke-width="2"><path d="M806.326-81.454v3.686"/><path d="M806.326-88.519v-3.386"/><path d="M803.211-84.909h-3.685"/><path d="M812.826-84.909h-3.387"/><path d="M804.126-87.162c-.8-.8-2.306-2.252-3.1-3.05"/><path d="M811.628-79.605c-.729-.73-2.31-2.2-3.04-2.926"/><path d="m804.02-82.6-3 3"/><path d="m811.629-90.213-3.088 2.978"/></g></g></svg>\n'},26861:k=>{k.exports='<svg id="Date_icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect id="Rectangle_23177" width="16" height="16" fill="none"/><g id="Rectangle_6448" transform="translate(1 3)" fill="none" stroke="#ff4013" stroke-miterlimit="10" stroke-width="2"><rect width="14" height="12" stroke="none"/><rect x="1" y="1" width="12" height="10" fill="none"/></g><line id="Line_764" x2="12" transform="translate(2 7)" fill="none" stroke="#ff4013" stroke-miterlimit="10" stroke-width="2"/><path id="Path_11729" d="M176.171,1073.754v3" transform="translate(-171.171 -1072.754)" fill="none" stroke="#ff4013" stroke-width="2"/><path id="Path_11730" d="M176.171,1073.754v3" transform="translate(-165.171 -1072.754)" fill="none" stroke="#ff4013" stroke-width="2"/></svg>\n'},55146:k=>{k.exports='<svg id="Datetime_icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><g id="Icon_left_panel_date_time_16x16_heavy" transform="translate(0)"><rect id="Rectangle_6448" width="16" height="16" fill="none"/><path id="Path_6271" d="M1895.033,260.278h-4.149v-9h12v2" transform="translate(-1889.884 -248.278)" fill="none" stroke="#ff4013" stroke-miterlimit="10" stroke-width="2"/><path id="Path_7772" d="M0,0H4.5" transform="translate(1 6)" fill="none" stroke="#ff4013" stroke-width="2"/><line id="Line_771" y2="4" transform="translate(4)" fill="none" stroke="#ff4013" stroke-miterlimit="10" stroke-width="2"/><line id="Line_772" y2="4" transform="translate(10)" fill="none" stroke="#ff4013" stroke-miterlimit="10" stroke-width="2"/><g id="Path_6272" transform="translate(-1889.764 -248.582)" fill="none" stroke-miterlimit="10"><path d="M1905.764,258.584a5,5,0,1,1-5-5A5,5,0,0,1,1905.764,258.584Z" stroke="none"/><path d="M 1900.7626953125 261.5840454101562 C 1902.417602539062 261.5840454101562 1903.763916015625 260.23828125 1903.763916015625 258.5840759277344 C 1903.763916015625 256.9292602539062 1902.417602539062 255.5829772949219 1900.7626953125 255.5829772949219 C 1899.109130859375 255.5829772949219 1897.763916015625 256.9292602539062 1897.763916015625 258.5840759277344 C 1897.763916015625 260.23828125 1899.109130859375 261.5840454101562 1900.7626953125 261.5840454101562 M 1900.7626953125 263.5840454101562 C 1898.000244140625 263.5840454101562 1895.763916015625 261.3454284667969 1895.763916015625 258.5840759277344 C 1895.763916015625 255.8215942382812 1898.000244140625 253.5829772949219 1900.7626953125 253.5829772949219 C 1903.524169921875 253.5829772949219 1905.763916015625 255.8215942382812 1905.763916015625 258.5840759277344 C 1905.763916015625 261.3454284667969 1903.524169921875 263.5840454101562 1900.7626953125 263.5840454101562 Z" stroke="none" fill="#ff4013"/></g><path id="Path_6273" d="M1900.1,255.194v4h2.5" transform="translate(-1889.098 -249.194)" fill="none" stroke="#ff4013" stroke-miterlimit="10" stroke-width="2"/></g></svg>\n'},71011:k=>{k.exports='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M2 3.5H14V12C14 12.1326 13.9473 12.2598 13.8536 12.3536C13.7598 12.4473 13.6326 12.5 13.5 12.5H2.5C2.36739 12.5 2.24021 12.4473 2.14645 12.3536C2.05268 12.2598 2 12.1326 2 12V3.5Z" stroke="#FF4013" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M14 3.5L8 9L2 3.5" stroke="#FF4013" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n'},55039:k=>{k.exports='<svg id="File_icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect id="Rectangle_23177" width="16" height="16" fill="none"/><g id="Group_7055" transform="translate(-733.278 92.545)"><g id="Rectangle_6454" transform="translate(735.278 -91.545)" fill="none" stroke="#ff4013" stroke-miterlimit="10" stroke-width="2"><rect width="12" height="14" stroke="none"/><rect x="1" y="1" width="10" height="12" fill="none"/></g><line id="Line_774" x2="6" transform="translate(738.278 -87.545)" fill="none" stroke="#ff4013" stroke-miterlimit="10" stroke-width="2"/><line id="Line_775" x2="6" transform="translate(738.278 -84.545)" fill="none" stroke="#ff4013" stroke-miterlimit="10" stroke-width="2"/><line id="Line_777" x2="4" transform="translate(738.278 -81.545)" fill="none" stroke="#ff4013" stroke-miterlimit="10" stroke-width="2"/></g></svg>\n'},68877:k=>{k.exports='<svg id="Float_icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><g id="Group_14515" transform="translate(-144 -422)"><rect id="Rectangle_39433" width="16" height="16" transform="translate(144 422)" fill="none"/></g><path id="Path_11302" d="M6.957-4.64a6.469,6.469,0,0,1-.8,3.6A2.764,2.764,0,0,1,3.707.127,2.732,2.732,0,0,1,1.285-1.079,6.377,6.377,0,0,1,.47-4.64a6.53,6.53,0,0,1,.793-3.621A2.752,2.752,0,0,1,3.707-9.426,2.739,2.739,0,0,1,6.135-8.208,6.39,6.39,0,0,1,6.957-4.64Zm-4.539,0a7.22,7.22,0,0,0,.3,2.447,1.022,1.022,0,0,0,.993.74A1.033,1.033,0,0,0,4.7-2.2,7.02,7.02,0,0,0,5-4.64a7,7,0,0,0-.308-2.453,1.034,1.034,0,0,0-.987-.746,1.025,1.025,0,0,0-.99.746A7.208,7.208,0,0,0,2.418-4.64ZM7.759-.908a1.064,1.064,0,0,1,.286-.806,1.158,1.158,0,0,1,.832-.273,1.125,1.125,0,0,1,.816.279,1.061,1.061,0,0,1,.289.8,1.061,1.061,0,0,1-.292.79,1.105,1.105,0,0,1-.812.289,1.138,1.138,0,0,1-.825-.282A1.057,1.057,0,0,1,7.759-.908ZM13.69,0H11.728V-5.37l.019-.882.032-.965q-.489.489-.679.641l-1.066.857L9.088-6.9l2.99-2.38H13.69Z" transform="translate(0.53 12.426)" fill="#ff4013"/></svg>\n'},92458:k=>{k.exports='<svg id="Guid_icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect id="Rectangle_42308" width="16" height="16" fill="none"/><path id="Path_11737" d="M1.162,0H3.43V-9.8H1.162Zm9.926-10.388v3.654a2.894,2.894,0,0,0-2.254-.91A3.661,3.661,0,0,0,5.068-3.766,3.661,3.661,0,0,0,8.834.112a2.9,2.9,0,0,0,2.352-.98V0h2.086V-10.388ZM9.212-1.68A1.911,1.911,0,0,1,7.28-3.766,1.911,1.911,0,0,1,9.212-5.852,1.908,1.908,0,0,1,11.13-3.766,1.908,1.908,0,0,1,9.212-1.68Z" transform="translate(0.838 13)" fill="#ff4013" stroke="rgba(0,0,0,0)" stroke-width="1"/></svg>\n'},65689:k=>{k.exports='<svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0_1742_819)">\n<path d="M10.913 8.99277L7.40833 13.0074H13.0074V11.2395L10.913 8.99277ZM10.8641 6.00745L15.0074 10.4519V15.0074H3.00745L10.8641 6.00745Z" fill="#ff4013"/>\n<path d="M3.43597 9.72806C2.87697 10.2871 2.20496 9.92807 1.64496 9.37007C1.08596 8.81107 0.726988 8.13807 1.28699 7.57907L3.07794 5.78806C3.63694 5.22906 4.30898 5.58806 4.86798 6.14606C5.42798 6.70506 5.78595 7.37706 5.22595 7.93706L3.43597 9.72806Z" stroke="#ff4013" stroke-width="2" stroke-miterlimit="10"/>\n<path d="M7.93689 5.22705C7.37689 5.78605 6.70591 5.42704 6.14691 4.86804C5.58691 4.30904 5.22894 3.63704 5.78894 3.07804L7.57892 1.28704C8.13892 0.728043 8.80993 1.08704 9.36993 1.64604C9.92993 2.20504 10.2879 2.87704 9.72888 3.43704L7.93689 5.22705Z" stroke="#ff4013" stroke-width="2" stroke-miterlimit="10"/>\n<path d="M4.70691 6.51907L6.51791 4.70807" stroke="#ff4013" stroke-width="2"/>\n<path d="M11.301 2.00702H14.0079V14.007H2.00793V11.581" stroke="#ff4013" stroke-width="2"/>\n</g>\n<defs>\n<clipPath id="clip0_1742_819">\n<rect width="16.007" height="16.007" fill="#ff4013"/>\n</clipPath>\n</defs>\n</svg>\n'},60521:k=>{k.exports='<svg id="Integer_icon" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.99433 4.65198C9.48732 5.09802 9.74027 5.69781 9.74027 6.39946C9.74027 7.11039 9.46186 7.74386 8.95863 8.29085L8.95331 8.29664C8.68048 8.58037 8.17318 8.98047 7.44252 9.47417L7.44143 9.4749C7.00788 9.76552 6.67964 10.0338 6.4484 10.2773C6.39755 10.3308 6.35224 10.3822 6.31202 10.4316H9.03463C9.42976 10.4316 9.75009 10.7519 9.75009 11.1471C9.75009 11.5422 9.42976 11.8625 9.03463 11.8625H4.36201V11.5055C4.36201 10.774 4.62396 10.1113 5.14954 9.53003C5.45393 9.18287 5.98212 8.74216 6.73359 8.22779C7.28336 7.835 7.61754 7.57002 7.77738 7.40238C8.08169 7.07198 8.22096 6.73348 8.22096 6.38964C8.22096 6.03409 8.11952 5.81409 7.95289 5.66027C7.78277 5.50324 7.51683 5.40148 7.12478 5.40148C6.72877 5.40148 6.47218 5.52561 6.29884 5.75228L6.29169 5.76164L6.28392 5.77051C6.13055 5.94579 6.0142 6.20942 5.96505 6.5873C5.91679 6.95826 5.61042 7.29659 5.18377 7.29659C4.7751 7.29659 4.39395 6.95656 4.44447 6.49553C4.51728 5.83108 4.75991 5.26428 5.17392 4.82141C5.68203 4.26788 6.36125 4 7.15424 4C7.87626 4 8.49451 4.21025 8.99122 4.6492L8.99433 4.65198ZM14.8743 4.5961C15.3635 5.01371 15.6083 5.57814 15.6083 6.262C15.6083 6.71398 15.4974 7.12093 15.2526 7.45671C15.1531 7.59318 15.0352 7.71289 14.9008 7.81669C15.0605 7.92572 15.2015 8.0545 15.3211 8.20545C15.6165 8.55303 15.7556 8.98069 15.7556 9.46307C15.7556 10.1963 15.4914 10.8144 14.9713 11.2883C14.4419 11.7715 13.7612 12 12.9634 12C12.2299 12 11.6078 11.8045 11.1119 11.4124L11.1064 11.408C10.628 11.014 10.3332 10.4794 10.2052 9.83055C10.1107 9.35139 10.5042 8.97835 10.9288 8.97835C11.3492 8.97835 11.6378 9.30727 11.7079 9.64478C11.7693 9.94025 11.9002 10.158 12.0891 10.3154C12.3147 10.495 12.5969 10.5985 12.9634 10.5985C13.3872 10.5985 13.6961 10.4769 13.9229 10.2668C14.1282 10.0596 14.2363 9.80805 14.2363 9.49253C14.2363 9.15687 14.1319 8.93882 13.9486 8.7817C13.7609 8.62082 13.483 8.52399 13.0419 8.52399H12.7866C12.4159 8.52399 12.1154 8.22345 12.1154 7.85271C12.1154 7.48197 12.4159 7.18143 12.7866 7.18143H13.0125C13.4306 7.18143 13.6903 7.08609 13.85 6.9535C14.0037 6.81675 14.0989 6.61783 14.0989 6.31109C14.0989 6.00164 14.0017 5.79895 13.8513 5.66111L13.8504 5.66027C13.6842 5.50686 13.4217 5.4113 13.0223 5.4113C12.6106 5.4113 12.3484 5.51295 12.1702 5.68456L12.1656 5.68906C12.0215 5.82278 11.914 6.00455 11.8495 6.25293C11.766 6.57474 11.481 6.87436 11.0816 6.87436C10.6572 6.87436 10.2506 6.49494 10.3668 6.00508C10.4953 5.4634 10.7597 5.01133 11.1524 4.66211C11.6438 4.20736 12.2763 4 13.0125 4C13.739 4 14.3777 4.18225 14.8711 4.59337L14.8743 4.5961ZM3.41307 4.92822V11.1029C3.41307 11.5224 3.07297 11.8625 2.65342 11.8625C2.23388 11.8625 1.89377 11.5224 1.89377 11.1029V6.23307C1.68552 6.37174 1.46266 6.49124 1.22573 6.59268C0.723506 6.80771 0.244141 6.40276 0.244141 5.92406C0.244141 5.5872 0.467589 5.3135 0.755873 5.2089C0.963927 5.13341 1.17934 5.03405 1.39555 4.90741C1.64533 4.74519 1.85627 4.57307 2.04007 4.3863C2.18718 4.23681 2.39336 4.13748 2.62233 4.13748C3.05905 4.13748 3.41307 4.4915 3.41307 4.92822Z" fill="#ff4013"/>\n</svg>\n'},61631:k=>{k.exports='<svg id="Lookup_icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><g id="Group_6916" transform="translate(2.277 2)"><g id="Group_6915" transform="translate(-0.277)"><circle id="Ellipse_237" cx="4.5" cy="4.5" r="4.5" fill="none" stroke="#ff4013" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path id="Path_6243" d="M.344.344,4.123,4.123" transform="translate(7.877 7.876)" fill="none" stroke="#ff4013" stroke-width="2"/></g></g><rect id="Rectangle_24756" width="16" height="16" fill="none"/></svg>\n'},32643:k=>{k.exports='<svg id="Money_icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect id="Rectangle_23177" width="16" height="16" fill="none"/><path id="Path_7070" d="M-318.645,863.293h-6v-8h14v4" transform="translate(325.645 -852.293)" fill="none" stroke="#ff4013" stroke-miterlimit="10" stroke-width="2"/><path id="Path_7071" d="M-322.646,855.292a2,2,0,0,1-2,2" transform="translate(326.646 -851.292)" fill="none" stroke="#ff4013" stroke-miterlimit="10" stroke-width="2"/><path id="Path_7072" d="M-312.246,857.292a2,2,0,0,1-2-2" transform="translate(326.246 -851.292)" fill="none" stroke="#ff4013" stroke-miterlimit="10" stroke-width="2"/><path id="Path_7073" d="M-324.646,861.692a2,2,0,0,1,2,2" transform="translate(326.646 -853.692)" fill="none" stroke="#ff4013" stroke-miterlimit="10" stroke-width="2"/><g id="Ellipse_1363" transform="translate(6 5)" fill="none" stroke="#ff4013" stroke-miterlimit="10" stroke-width="2"><circle cx="2" cy="2" r="2" stroke="none"/><circle cx="2" cy="2" r="1" fill="none"/></g><path id="Path_7074" d="M-310.846,861.425c0,.737-1.12,1.333-2.5,1.333s-2.5-.6-2.5-1.333,1.12-1.333,2.5-1.333S-310.846,860.69-310.846,861.425Z" transform="translate(325.846 -851.092)" fill="none" stroke="#ff4013" stroke-miterlimit="10" stroke-width="2"/><path id="Path_7075" d="M-310.846,863.292c0,.589-1.12,1.333-2.5,1.333s-2.5-.744-2.5-1.333" transform="translate(325.846 -850.292)" fill="none" stroke="#ff4013" stroke-miterlimit="10" stroke-width="2"/></svg>\n'},59155:k=>{k.exports='<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M5.3353 1.83815L6.26378 1.46676L6.26378 1.46676L5.3353 1.83815ZM6.03813 3.59524L5.10965 3.96663L5.10965 3.96663L6.03813 3.59524ZM5.82454 4.94398L5.05632 4.3038L5.0563 4.30383L5.82454 4.94398ZM5.44629 5.39792L6.21451 6.03811L6.21453 6.03808L5.44629 5.39792ZM5.52758 7.19434L4.82047 7.90144L4.8205 7.90147L5.52758 7.19434ZM6.8057 8.47236L7.5128 7.76526L7.51278 7.76523L6.8057 8.47236ZM8.60205 8.55382L7.96198 7.7855L7.96187 7.78559L8.60205 8.55382ZM9.05613 8.17554L9.69619 8.94386L9.69631 8.94376L9.05613 8.17554ZM10.4048 7.96192L10.7762 7.03345L10.7761 7.03344L10.4048 7.96192ZM12.1617 8.66476L11.7903 9.59322L11.7903 9.59323L12.1617 8.66476ZM12.9999 9.90268H11.9999V9.90272L12.9999 9.90268ZM13 11.7369H14V11.7368L13 11.7369ZM4.09733 2C4.23363 2 4.3562 2.08298 4.40682 2.20954L6.26378 1.46676C5.90943 0.580885 5.05144 0 4.09733 0V2ZM4.40682 2.20953L5.10965 3.96663L6.96661 3.22386L6.26378 1.46676L4.40682 2.20953ZM5.10965 3.96663C5.15517 4.08044 5.13462 4.20985 5.05632 4.3038L6.59277 5.58417C7.14152 4.92566 7.28485 4.01947 6.96661 3.22385L5.10965 3.96663ZM5.0563 4.30383L4.67804 4.75777L6.21453 6.03808L6.59279 5.58414L5.0563 4.30383ZM4.67807 4.75774C3.90567 5.68462 3.96693 7.0479 4.82047 7.90144L6.23468 6.48723C6.11298 6.36552 6.10396 6.17076 6.21451 6.03811L4.67807 4.75774ZM4.8205 7.90147L6.09862 9.17949L7.51278 7.76523L6.23466 6.4872L4.8205 7.90147ZM6.09859 9.17947C6.95196 10.0328 8.31517 10.0946 9.24224 9.32204L7.96187 7.78559C7.82939 7.89599 7.63468 7.88713 7.5128 7.76526L6.09859 9.17947ZM9.24212 9.32213L9.69619 8.94386L8.41606 7.40722L7.96198 7.7855L9.24212 9.32213ZM9.69631 8.94376C9.79033 8.86541 9.91963 8.8449 10.0334 8.8904L10.7761 7.03344C9.98045 6.71516 9.07438 6.85861 8.41594 7.40732L9.69631 8.94376ZM10.0333 8.89039L11.7903 9.59322L12.5331 7.73629L10.7762 7.03345L10.0333 8.89039ZM11.7903 9.59323C11.917 9.64389 11.9999 9.76649 11.9999 9.90268H13.9999C13.9999 8.94847 13.4189 8.09059 12.5331 7.73628L11.7903 9.59323ZM11.9999 9.90272L12 11.7369L14 11.7368L13.9999 9.90264L11.9999 9.90272ZM12 11.7369C12 11.8823 11.8822 12 11.737 12V14C12.987 14 14 12.9867 14 11.7369H12ZM11.737 12C6.35945 12 2 7.64067 2 2.26318H0C0 8.74528 5.25492 14 11.737 14V12ZM2 2.26318C2 2.11782 2.11785 2 2.26316 2V0C1.01322 0 0 1.0133 0 2.26318H2ZM2.26316 2H4.09733V0H2.26316V2Z" fill="#FF4013"/>\n</svg>\n'},67021:k=>{k.exports='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M13 1H3C1.89543 1 1 1.89543 1 3V13C1 14.1046 1.89543 15 3 15H13C14.1046 15 15 14.1046 15 13V3C15 1.89543 14.1046 1 13 1Z" stroke="#FF4013" stroke-width="2" stroke-miterlimit="10"/>\n<path d="M9 12H7V6H4V4H12V6H9V12Z" fill="#FF4013"/>\n</svg>\n'},28010:k=>{k.exports='<svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M5.14 6.90901C5.13775 7.50618 5.25259 8.098 5.478 8.65101L1.5 12.629V15.229H4.1V13.669H5.66V12.109H7.22L8.078 11.251C8.631 11.4764 9.22282 11.5912 9.82 11.589C10.7456 11.589 11.6504 11.3145 12.4201 10.8003C13.1897 10.286 13.7895 9.55512 14.1438 8.69996C14.498 7.84481 14.5907 6.90381 14.4101 5.99598C14.2295 5.08815 13.7838 4.25426 13.1293 3.59975C12.4747 2.94524 11.6409 2.49951 10.733 2.31893C9.82519 2.13835 8.8842 2.23103 8.02904 2.58525C7.17388 2.93947 6.44297 3.53932 5.92872 4.30894C5.41448 5.07856 5.14 5.98339 5.14 6.90901ZM12.4832 5.95178C12.4832 6.84671 11.7577 7.57221 10.8628 7.57221C9.96785 7.57221 9.24236 6.84671 9.24236 5.95178C9.24236 5.05684 9.96785 4.33135 10.8628 4.33135C11.7577 4.33135 12.4832 5.05684 12.4832 5.95178Z" fill="#FF4013"/>\n</svg>\n'},97180:k=>{k.exports='<svg id="Text_icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect id="Rectangle_39432" width="16" height="16" fill="none"/><path id="Path_11304" d="M5.113,0H2.994V-8.23H.28V-9.994H7.827V-8.23H5.113Z" transform="translate(4 13)" fill="#ff4013"/></svg>\n'},8510:k=>{k.exports='<svg id="Time_icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><rect id="Rectangle_23177" width="16" height="16" fill="none"/><g id="Ellipse_1346" transform="translate(1 1)" fill="none" stroke="#ff4013" stroke-miterlimit="10" stroke-width="2"><circle cx="7" cy="7" r="7" stroke="none"/><circle cx="7" cy="7" r="6" fill="none"/></g><path id="Path_6908" d="M1824.814,31.345v6h3" transform="translate(-1816.814 -29.345)" fill="none" stroke="#ff4013" stroke-miterlimit="10" stroke-width="2"/></svg>\n'},64337:k=>{k.exports='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M8 14C11.3137 14 14 11.3137 14 8C14 4.68629 11.3137 2 8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14Z" stroke="#FF4013" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M2 8H14" stroke="#FF4013" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M8 13.8375C9.38071 13.8375 10.5 11.2239 10.5 7.99998C10.5 4.77601 9.38071 2.16248 8 2.16248C6.61929 2.16248 5.5 4.77601 5.5 7.99998C5.5 11.2239 6.61929 13.8375 8 13.8375Z" stroke="#FF4013" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n'},82891:()=>{}}]);